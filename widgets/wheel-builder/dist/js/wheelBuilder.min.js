!function(){function e(e,t,l){var s=this;if(e&&"string"==typeof e)if(t&&"object"!=typeof t)console.error("Invalid layer stacks");else if(LayerBuilder&&"function"==typeof LayerBuilder){"object"!=typeof l&&(l={}),this.colorOp="multiply",this.pickerColor="FFFFFF",this.ctrlTitleText="Customize",this.wheelDims=[],this.imageType="image/png",this.defaultLayerOpts=null,this.cancelText="Cancel",this.confirmText="Confirm",this.onCancel=null,this.onConfirm=null;for(var i in l)this.hasOwnProperty(i)&&(this[i]=l[i]);if(this.dev=!!l.hasOwnProperty("dev")&&!!l.dev,this.containerId=e,this.container=document.getElementById(e),this.wrapId="wb-wrapper",this.smallWidth=900,this.smallestWidth=500,this.dirtyStacks=t,this.layerStacks=[],this.stackLookup={},this.layerColors={},this.visibleStacks=0,this.initPromise=new LBUtil.promise,this.asyncPromise=new LBUtil.promise,this.loadedPromise=new LBUtil.promise,this.appLoadedPromise=new LBUtil.promise,this.tplLoaded=!1,this.cssLoaded=!1,this.extJsLoaded=!1,this.cdnUrl="https://rawgit.com/Burkson/com.burkson.ridestyler.widgets/master/widgets/wheel-builder/dist/",this.urlPfx=this.dev?"src/":this.cdnUrl,this.tplUrl=this.urlPfx+"html/template.html",l.hasOwnProperty("cssUrl")?this.cssUrl="string"==typeof l.cssUrl&&l.cssUrl:this.cssUrl=this.dev?this.urlPfx+"css/wheelBuilder.css":this.urlPfx+"css/wheelBuilder.min.css",window.jscolor||(this.jsColorUrl=this.urlPfx+"js/jscolor.min.js"),this.tplHtml="",this.wrapEl=null,this.wheelPreview=null,this.ctrlWrap=null,this.selectorEl=null,this.layerSelectWrap=null,this.layerOptsWrap=null,this.topBar=null,this.ctrlHeader=null,this.ctrlTitle=null,this.ctrl=null,this.backBtn=null,this.closeBtn=null,this.previewWidth=0,this.containerWidth=0,this.selectedStack=null,"object"==typeof l.wheelDims&&2===l.wheelDims.length){var r=parseInt(l.wheelDims[0]),a=parseInt(l.wheelDims[1]);isNaN(r)||isNaN(a)||(this.wheelDims=[r,a])}this.container?(s.initPromise.resolve(),s.onDomReady()):document.addEventListener("DOMContentLoaded",function(){s.container=document.getElementById(s.containerId),s.container?(s.initPromise.resolve(),s.onDomReady()):console.error("Container does not exist")})}else console.error("LayerBuilder not found");else console.error("Invalid container ID")}e.prototype.checkLoaded=function(){for(var e=this.layerStacks.length,t=0,l=0;l<e;l++)this.layerStacks[l].lb.loaded&&t++;t===e&&this.loadedPromise.resolve()},e.prototype.loaded=function(e){this.appLoadedPromise.done(function(){e.call()})},e.prototype.onDomReady=function(){var e=this.onAsyncComplete;null!=this.container?(this.loadExternalJs(e),this.loadStyles(e),this.loadTemplate(e)):console.error("Invalid container Id")},e.prototype.isAsyncComplete=function(){return this.tplLoaded&&this.cssLoaded&&this.extJsLoaded},e.prototype.onAsyncComplete=function(){this.isAsyncComplete()&&(this.initApp(),this.asyncPromise.resolve())},e.prototype.initApp=function(){var e=this,t=this.dirtyStacks.length;if(this.isAsyncComplete())if(this.tplHtml)if(this.container.innerHTML=this.tplHtml,this.wrapEl=document.getElementById(this.wrapId),this.wrapEl)if(this.containerWidth=this.container.offsetWidth,this.containerWidth){this.ctrlWrap=this.wrapEl.getElementsByClassName("wb-ctrl-wrap")[0],this.wheelPreview=this.wrapEl.getElementsByClassName("wb-wheel-preview")[0],this.selectorEl=this.wrapEl.getElementsByClassName("wb-wheel-selector")[0],this.layerSelectWrap=this.ctrlWrap.getElementsByClassName("wb-layer-select")[0],this.layerOptsWrap=this.ctrlWrap.getElementsByClassName("wb-layer-options")[0],this.topBar=this.wrapEl.getElementsByClassName("wb-top-bar")[0],this.logo=this.topBar.getElementsByClassName("wb-logo")[0],this.ctrlHeader=this.ctrlWrap.getElementsByClassName("wb-ctrl-header")[0],this.ctrlTitle=this.ctrlWrap.getElementsByClassName("wb-ctrl-title")[0],this.ctrl=this.ctrlWrap.getElementsByClassName("wb-ctrl")[0],this.backBtn=this.ctrlHeader.getElementsByClassName("wb-back-btn")[0],this.closeBtn=this.ctrlHeader.getElementsByClassName("wb-close-btn")[0],this.appLoadedPromise.done(function(){e.containerWidth=e.container.offsetWidth,addResizeListener(e.container,function(){var t=e.container.offsetWidth;e.containerWidth!==t&&(e.containerWidth=t,e.reinitialize())})}),window.addEventListener("resize",function(){e.adjustLayout()}),this.backBtn.onclick=function(){e.onBackClick()},this.closeBtn.onclick=function(){LBUtil.hasClass(e.ctrlWrap,"wb-closed")?(LBUtil.removeClass(e.ctrlWrap,"wb-closed"),this.innerHTML="[-]"):(LBUtil.addClass(e.ctrlWrap,"wb-closed"),this.innerHTML="[+]")},this.adjustLayout(),this.previewWidth=this.wheelPreview.clientWidth;for(var l=0;l<t;l++)this.addStack(this.dirtyStacks[l]);this.loadedPromise.done(function(){e.initTop(),e.renderCtrl(),e.renderStackSelector(),e.renderPreview(),e.appLoadedPromise.resolve()}),this.appLoadedPromise.done(function(){LBUtil.show(e.wrapEl,"block",!0)})}else console.error("Container element has no width");else console.error("Unable to select wrapper element #"+this.wrapId);else console.error("No template specified");else console.error("Template not loaded")},e.prototype.initTop=function(){var e=this,t=this.topBar.getElementsByClassName("wb-top-button-left")[0],l=this.topBar.getElementsByClassName("wb-top-button-right")[0],s=this.wrapEl.getElementsByClassName("wb-download")[0];this.onCancel?(t.innerText=this.cancelText,t.onclick=function(){e.onCancel.call()}):LBUtil.hide(t),this.onConfirm?(l.innerText=this.confirmText,l.onclick=function(){e.onConfirm.call()}):LBUtil.hide(l),s&&(s.onclick=function(t){e.onDownloadClick(t)}),LBUtil.show(this.topBar,"table",!0)},e.prototype.adjustLayout=function(){if(this.container){var e=this.container.offsetWidth;this.wrapEl&&(e<=this.smallestWidth?(LBUtil.hasClass(this.wrapEl,"wb-small")||LBUtil.addClass(this.wrapEl,"wb-small"),LBUtil.hasClass(this.wrapEl,"wb-smallest")||LBUtil.addClass(this.wrapEl,"wb-smallest")):e<=this.smallWidth?(LBUtil.hasClass(this.wrapEl,"wb-small")||LBUtil.addClass(this.wrapEl,"wb-small"),LBUtil.removeClass(this.wrapEl,"wb-smallest")):LBUtil.removeClass(this.wrapEl,["wb-small","wb-smallest"]))}},e.prototype.selectStack=function(e){this.layerStacks[this.selectedStack];var t=this.getStack(e);t.layerSelectEl||this.createLayerSelector(t,!0),this.togglePreviewStack(t),this.selectedStack=this.stackLookup[e],this.toggleSelectedStyle(e)},e.prototype.createLayerSelector=function(e){var t=this,l=e.layers.length,s="",i=null,r=null,a=null,n=null,o=null,c=document.createElement("ul");c.innerHTML="",LBUtil.addClass(c,"wb-layer-selector");for(var h=0;h<l;h++)(i=e.layers[h]).readOnly||(s=LBUtil.nonAlpha2Dash(i.name),n=document.createElement("a"),o=document.createElement("li"),r=document.createElement("span"),a=document.createElement("span"),LBUtil.addClass(o,"wb-ctrl-layer"),LBUtil.addClass(o,"wb-ctrl-layer-"+s),LBUtil.addClass(r,"wb-color"),i.currentColor&&(r.style.backgroundColor=i.currentColor),a.innerText=i.name+" +",n.appendChild(r),n.appendChild(a),n.setAttribute("data-layeridx",h),n.onclick=function(l){var s=l.target,i=null;"A"!==s.tagName&&(s=s.parentElement),i=parseInt(s.getAttribute("data-layeridx")),t.showLayerOpts(e,i),LBUtil.toggle(t.layerOptsWrap,t.layerSelectWrap)},o.appendChild(n),c.appendChild(o));o=document.createElement("li"),e.layerSelectEl=c,this.layerSelectWrap.appendChild(c)},e.prototype.showLayerOpts=function(e,t){var l=this,s=e.layers[t],i=(LBUtil.nonAlpha2Dash(s.name),s.options),r=null,a=null,n=null,o=null,c=null,h=null,d=null,p=null,m=null,y="";if("object"==typeof i&&i.length){this.setCtrlTitle("Options"),this.layerOptsWrap.innerHTML="",r=document.createElement("ul"),(o=document.createElement("li")).innerText=s.name+" -",LBUtil.show(o),r.appendChild(o);for(var u=0,w=i.length;u<w;u++)"string"==typeof i[u].name&&i[u].name.trim()?"string"==typeof i[u].color&&i[u].color.trim()?(y="string"!=typeof i[u].operation||-1===e.lb.getOperations().indexOf(i[u].operation.toLowerCase())?this.colorOp:i[u].operation.trim().toLowerCase(),a=document.createElement("li"),h=document.createElement("span"),c=document.createElement("a"),LBUtil.addClass(h,"wb-color"),h.style.backgroundColor=i[u].color.trim(),c.appendChild(h),c.onclick=function(e){var t=e.target,i="",r="";"A"!==t.tagName&&(t=t.parentElement),i=t.getAttribute("data-color"),r=t.getAttribute("data-operation"),p.fromString(i),l.setLayerColor(s.name,i,r)},c.setAttribute("data-color",i[u].color.trim()),c.setAttribute("data-operation",y),c.setAttribute("title",i[u].name),a.appendChild(c),r.appendChild(a)):console.error("Invalid color provided for layer "+s.name+" option "+i.name):console.error("Invalid name provided for layer "+s.name+" option");this.layerOptsWrap.appendChild(r),d=document.createElement("input"),LBUtil.addClass(d,"jscolor"),h=document.createElement("span"),LBUtil.addClass(h,"wb-color"),LBUtil.addClass(h,"wb-color-custom"),a=document.createElement("li"),LBUtil.addClass(a,"wb-custom-color-wrap"),m=document.createElement("a"),LBUtil.addClass(m,"wb-js-color"),m.innerHTML="<span>&nbsp;Custom</span>",m.setAttribute("title","Custom Color"),m.onclick=function(){p.show()},(p=new jscolor(d,{hash:!0,closable:!0})).fromString(s.currentColor?s.currentColor:this.pickerColor),p.onFineChange=function(){var e=this.valueElement.parentElement.getElementsByClassName("wb-color-custom")[0],t=this.toHEXString();l.setLayerColor(s.name,t),e.style.backgroundColor=t},m.insertBefore(h,m.firstElementChild),m.appendChild(d),a.appendChild(m),r.appendChild(a),a=document.createElement("li"),h=document.createElement("span"),(n=document.createElement("a")).innerHTML="<span> Reset</span>",LBUtil.addClass(h,"wb-color"),LBUtil.addClass(h,"wb-color-reset"),LBUtil.addClass(a,"wb-reset-wrap"),n.insertBefore(h,n.firstElementChild),a.appendChild(n),n.onclick=function(){p.fromString(l.pickerColor),h.style.backgroundColor="#"+l.pickerColor,l.resetLayer(s.name)},r.appendChild(a),LBUtil.show(this.backBtn,"inline"),LBUtil.toggle(this.layerOptsWrap,this.layerSelectWrap)}},e.prototype.addStack=function(e){var t=this;e&&"object"==typeof e?this.asyncPromise.done(function(){var l=t.getStack(e.name),s=t.wrapEl.getElementsByClassName("wb-wheel-preview-inner")[0],i=null,r=null,a=null,n=null,o="";if(e.name&&e.name.trim())if(e.name=e.name.trim(),o=LBUtil.nonAlpha2Dash(e.name.toLowerCase()),e.visible=!!e.visible,e.selected=!!e.selected,"object"==typeof e.layers&&e.layers.length){for(var c=0,h=e.layers.length;c<h;c++)e.layers[c]=t.validateLayer(e.layers[c]),e.layers[c]||e.layers.splice(c,1);l?((i=document.getElementById("wb-wheel-"+o)).innerHTML="",a=t.stackLookup[e.name],t.layerStacks[a]=e):((i=document.createElement("div")).id="wb-wheel-"+o,s.appendChild(i),a=t.layerStacks.length,t.stackLookup[e.name]=a,t.layerStacks[a]=e),LBUtil.addClass(i,"wb-wheel"),(r=new LayerBuilder(i.id,{dimensions:[t.previewWidth,t.previewWidth]})).setLayers(e.layers).done(function(){n=r.getDimensions(),i.style.width=n.width+"px",i.style.height=n.height+"px",e.visible&&t.addStackSelector(e),e.selected||LBUtil.hide(i)}),r.imgLoadPromise.done(function(){t.checkLoaded()}),t.layerStacks[a].lb=r,t.layerStacks[a].containEl=i,t.layerStacks[a].idx=a,e.visible&&(t.visibleStacks++,e.selected&&(LBUtil.addClass(i,"wb-wheel-selected"),t.selectedStack=a,t.selectStack(e.name)))}else console.error("No layers provided");else console.error("No name provided for layer stack")}):console.error("Invalid layer stack")},e.prototype.addStackSelector=function(e){var t=this,l=e.lb.getImage(),s=new Image,i=document.createElement("li"),r=null;s.src=l,LBUtil.addClass(i,"wb-ss-"+LBUtil.nonAlpha2Dash(e.name.toLowerCase())),i.setAttribute("data-stackname",e.name),i.appendChild(s),i.onclick=function(l){var s=l.target;t.selectorEl.getElementsByClassName("wb-stack-selected")[0];"li"!==s.tagName.toLowerCase()&&s.parentElement,t.selectStack(e.name)},e.selected&&LBUtil.addClass(i,"wb-stack-selected"),this.selectorEl.children.length?(r=this.selectorEl.children[e.idx])?this.selectorEl.insertBefore(i,r):e.idx>=this.selectorEl.children.length?this.selectorEl.appendChild(i):this.selectorEl.insertBefore(i,this.selectorEl.firstChild):this.selectorEl.appendChild(i)},e.prototype.setLayerColor=function(e,t,l){var s=this.layerStacks.length,i=null,r=null,a=null,n=this.layerStacks[this.selectedStack],o=LBUtil.nonAlpha2Dash(e),c=this.layerSelectWrap.getElementsByClassName("wb-ctrl-layer-"+o);if("string"==typeof e&&e.trim()){t=t.toUpperCase(),(a=n.lb.getLayer(e))&&!a.readOnly&&n.lb.setColor(e,t,l);for(var h=0;h<s;h++){i=(r=this.layerStacks[h]).layers.length;for(var d=0;d<i;d++)if((a=r.lb.getLayer(e))&&!a.readOnly&&r.layers[d].name===e){r!==n&&r.lb.setColor(e,t,l),r.layers[d].currentColor=t,r.layers[d].currentOp=l,this.layerColors[e]=t;break}}for(this.updateStackSelector(),s=c.length,h=0;h<s;h++)c[h].getElementsByTagName("span")[0].style.backgroundColor=t}else console.error("Invalid layer name")},e.prototype.updateStackSelector=function(){for(var e=this.selectorEl.getElementsByTagName("li"),t=e.length,l=null,s=null,i="",r="",a="",n=0;n<t;n++)i=e[n].getAttribute("data-stackname"),l=this.getStack(i),s=e[n].getElementsByTagName("img")[0],"none"===(a=l.containEl.style.display)&&(l.containEl.style.display="block"),r=l.lb.getImage(),l.containEl.style.display=a,s.setAttribute("src",r)},e.prototype.toggleSelectedStyle=function(e){var t=this.selectorEl.getElementsByClassName("wb-stack-selected")[0],l=this.selectorEl.getElementsByClassName("wb-ss-"+LBUtil.nonAlpha2Dash(e.toLowerCase()))[0];t&&LBUtil.removeClass(t,"wb-stack-selected"),l&&LBUtil.addClass(l,"wb-stack-selected")},e.prototype.reinitialize=function(){var e=this,t=this.layerStacks.length,l=null,s=this.layerStacks[this.selectedStack].name;this.loadedPromise=new LBUtil.promise;for(var i=0;i<t;i++)(l=this.layerStacks[i]).containEl.parentElement.removeChild(l.containEl);for(this.layerStacks=[],this.adjustLayout(),this.previewWidth=this.wheelPreview.clientWidth,this.selectorEl.innerHTML="",LBUtil.hide(this.selectorEl,!0),LBUtil.hide(this.ctrlWrap,!0),i=0;i<t;i++)this.dirtyStacks[i].name===s?this.dirtyStacks[i].selected=!0:this.dirtyStacks[i].selected=!1,this.addStack(this.dirtyStacks[i]);this.loadedPromise.done(function(){LBUtil.show(e.selectorEl,"block",!0),LBUtil.show(e.ctrlWrap,"table-cell",!0);for(var t in e.layerColors)e.setLayerColor(t,e.layerColors[t])})},e.prototype.togglePreviewStack=function(e){var t=this,l=this.layerStacks[this.selectedStack],s=null;l&&l!==e&&((s=l.containEl).style.opacity=0,LBUtil.removeClass(s,"wb-wheel-selected"),l.layerSelectEl.style.opacity=0),setTimeout(function(){s&&(LBUtil.hide(s),LBUtil.hide(l.layerSelectEl)),LBUtil.addClass(e.containEl,"wb-wheel-selected"),e.containEl.style.display="block",e.containEl.clientWidth,e.containEl.style.opacity=1,e.layerSelectEl.style.display="block",e.layerSelectEl.clientWidth,e.layerSelectEl.style.opacity=1,LBUtil.toggle(t.layerSelectWrap,t.layerOptsWrap),t.setStackTitle(e.name)},250)},e.prototype.renderCtrl=function(){LBUtil.show(this.ctrlWrap,"table-cell",!0,.87),this.setCtrlTitle()},e.prototype.renderStackSelector=function(){this.visibleStacks>1?this.selectorEl.style.opacity=1:LBUtil.hide(this.selectorEl,!0)},e.prototype.renderPreview=function(){if(this.wheelDims&&this.wheelDims.length){var e=this.wrapEl.getElementsByClassName("wb-wheel-preview-inner")[0];e.style.width=this.wheelDims[0]+"px",e.style.height=this.wheelDims[1]+"px"}},e.prototype.setCtrlTitle=function(e){this.ctrlTitle.innerText=e||this.ctrlTitleText},e.prototype.onBackClick=function(){this.setCtrlTitle(),LBUtil.hide(this.backBtn),LBUtil.toggle(this.layerSelectWrap,this.layerOptsWrap)},e.prototype.resetLayer=function(e){for(var t=this.layerStacks.length,l=null,s=null,i=LBUtil.nonAlpha2Dash(e),r=this.layerSelectWrap.getElementsByClassName("wb-ctrl-layer-"+i),a=0;a<t;a++){(s=this.layerStacks[a]).lb.resetLayer(e),l=s.layers.length;for(var n=0;n<l;n++)s.layers[n].name===e&&(s.layers[n].currentColor="",this.layerColors[e]="")}for(t=r.length,a=0;a<t;a++)r[a].getElementsByTagName("span")[0].style.backgroundColor="";this.updateStackSelector()},e.prototype.resetAllLayers=function(){for(var e=this.layerStacks.length,t=null,l=null,s=this.layerSelectWrap.getElementsByClassName("wb-color"),i=0;i<e;i++){(l=this.layerStacks[i]).lb.resetAllLayers(),t=l.layers.length;for(var r=0;r<t;r++)l.layers[r].currentColor="",this.layerColors[l.layers[r].name]=""}for(e=s.length,i=0;i<e;i++)s[i].style.backgroundColor="";this.updateStackSelector()},e.prototype.validateLayer=function(e){return"object"!=typeof e?(console.error("Invalid layer for stack "+ls.name),!1):"string"!=typeof e.name||"string"!=typeof e.img?(console.error("Layer name and img properties invalid"),!1):(e.name=e.name.trim(),e.img=e.img.trim(),e.label="string"==typeof e.label&&e.label.trim()?e.label:e.name,e.readOnly=!!e.readOnly,e.options&&"object"==typeof e.options&&e.options.length||(self.defaultLayerOpts.length?e.options=self.defaultLayerOpts:(e.readOnly=!0,e.options=[])),e)},e.prototype.getStack=function(e){return this.stackLookup.hasOwnProperty(e)?this.layerStacks[this.stackLookup[e]]:null},e.prototype.setStackTitle=function(e){"string"==typeof e&&(this.logo.innerText=e)},e.prototype.loadExternalJs=function(e){if(this.jsColorUrl){var t=this,l=document.createElement("script"),s=document.getElementsByTagName("head")[0];l.type="text/javascript",l.src=this.jsColorUrl,l.onload=function(){t.extJsLoaded||(t.extJsLoaded=!0,"function"==typeof e&&e.apply(t))},s.insertBefore(l,s.firstElementChild)}else this.extJsLoaded=!0},e.prototype.loadTemplate=function(e){var t=this,l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState&&(200===l.status?(t.tplHtml=l.responseText,t.tplLoaded=!0,"function"==typeof e&&e.apply(t)):console.error("xhr request for template failed"))},l.open("GET",this.tplUrl,!0),l.send(null)},e.prototype.loadStyles=function(e){if(this.cssUrl){var t=this,l=document.createElement("link"),s=document.getElementsByTagName("head")[0];l.rel="stylesheet",l.type="text/css",l.href=this.cssUrl,l.onload=function(){t.cssLoaded||(t.cssLoaded=!0,"function"==typeof e&&e.apply(t))},s.insertBefore(l,s.firstElementChild)}else this.cssLoaded=!0},e.prototype.getImage=function(e,t){var l=this.getStack(e),s=null;return l&&l.lb&&(t="string"==typeof t?t.trim():this.imageType,s=l.lb.getUnscaledImage(t)),s},e.prototype.onDownloadClick=function(e){var t=e.target,l=this.layerStacks[this.selectedStack],s=LBUtil.nonAlpha2Dash(l.name)+".png",i="";l&&l.lb?(i=this.getImage(l.name,this.imageType),window.navigator.msSaveBlob?window.navigator.msSaveBlob(i,s):(t.href=i,t.download=s)):console.error("Cannot export: no stack selected")},window.WheelBuilder=e,function(){function e(e){var t=e.target||e.srcElement;t.__resizeRAF__&&r(t.__resizeRAF__),t.__resizeRAF__=i(function(){var l=t.__resizeTrigger__;l.__resizeListeners__.forEach(function(t){t.call(l,e)})})}function t(t){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",e)}var l=document.attachEvent,s=navigator.userAgent.match(/Trident/),i=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),r=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}();window.addResizeListener=function(i,r){if(!i.__resizeListeners__)if(i.__resizeListeners__=[],l)i.__resizeTrigger__=i,i.attachEvent("onresize",e);else{"static"==getComputedStyle(i).position&&(i.style.position="relative");var a=i.__resizeTrigger__=document.createElement("object");a.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),a.__resizeElement__=i,a.onload=t,a.type="text/html",s&&i.appendChild(a),a.data="about:blank",s||i.appendChild(a)}i.__resizeListeners__.push(r)},window.removeResizeListener=function(t,s){t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(s),1),t.__resizeListeners__.length||(l?t.detachEvent("onresize",e):(t.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",e),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)))}}()}();