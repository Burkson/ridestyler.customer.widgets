/*! nouislider - 10.1.0 - 2017-07-28 17:11:18 */

(function (factory) {

    if ( typeof define === 'function' && define.amd ) {

        // AMD. Register as an anonymous module.
        define([], factory);

    } else if ( typeof exports === 'object' ) {

        // Node/CommonJS
        module.exports = factory();

    } else {

        // Browser globals
        window.noUiSlider = factory();
    }

}(function( ){

	'use strict';

	var VERSION = '10.1.0';


	function isValidFormatter ( entry ) {
		return typeof entry === 'object' && typeof entry.to === 'function' && typeof entry.from === 'function';
	}

	function removeElement ( el ) {
		el.parentElement.removeChild(el);
	}

	// Bindable version
	function preventDefault ( e ) {
		e.preventDefault();
	}

	// Removes duplicates from an array.
	function unique ( array ) {
		return array.filter(function(a){
			return !this[a] ? this[a] = true : false;
		}, {});
	}

	// Round a value to the closest 'to'.
	function closest ( value, to ) {
		return Math.round(value / to) * to;
	}

	// Current position of an element relative to the document.
	function offset ( elem, orientation ) {

		var rect = elem.getBoundingClientRect();
		var doc = elem.ownerDocument;
		var docElem = doc.documentElement;
		var pageOffset = getPageOffset(doc);

		// getBoundingClientRect contains left scroll in Chrome on Android.
		// I haven't found a feature detection that proves this. Worst case
		// scenario on mis-match: the 'tap' feature on horizontal sliders breaks.
		if ( /webkit.*Chrome.*Mobile/i.test(navigator.userAgent) ) {
			pageOffset.x = 0;
		}

		return orientation ? (rect.top + pageOffset.y - docElem.clientTop) : (rect.left + pageOffset.x - docElem.clientLeft);
	}

	// Checks whether a value is numerical.
	function isNumeric ( a ) {
		return typeof a === 'number' && !isNaN( a ) && isFinite( a );
	}

	// Sets a class and removes it after [duration] ms.
	function addClassFor ( element, className, duration ) {
		if (duration > 0) {
		addClass(element, className);
			setTimeout(function(){
				removeClass(element, className);
			}, duration);
		}
	}

	// Limits a value to 0 - 100
	function limit ( a ) {
		return Math.max(Math.min(a, 100), 0);
	}

	// Wraps a variable as an array, if it isn't one yet.
	// Note that an input array is returned by reference!
	function asArray ( a ) {
		return Array.isArray(a) ? a : [a];
	}

	// Counts decimals
	function countDecimals ( numStr ) {
		numStr = String(numStr);
		var pieces = numStr.split(".");
		return pieces.length > 1 ? pieces[1].length : 0;
	}

	// http://youmightnotneedjquery.com/#add_class
	function addClass ( el, className ) {
		if ( el.classList ) {
			el.classList.add(className);
		} else {
			el.className += ' ' + className;
		}
	}

	// http://youmightnotneedjquery.com/#remove_class
	function removeClass ( el, className ) {
		if ( el.classList ) {
			el.classList.remove(className);
		} else {
			el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
		}
	}

	// https://plainjs.com/javascript/attributes/adding-removing-and-testing-for-classes-9/
	function hasClass ( el, className ) {
		return el.classList ? el.classList.contains(className) : new RegExp('\\b' + className + '\\b').test(el.className);
	}

	// https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY#Notes
	function getPageOffset ( doc ) {

		var supportPageOffset = window.pageXOffset !== undefined;
		var isCSS1Compat = ((doc.compatMode || "") === "CSS1Compat");
		var x = supportPageOffset ? window.pageXOffset : isCSS1Compat ? doc.documentElement.scrollLeft : doc.body.scrollLeft;
		var y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? doc.documentElement.scrollTop : doc.body.scrollTop;

		return {
			x: x,
			y: y
		};
	}

	// we provide a function to compute constants instead
	// of accessing window.* as soon as the module needs it
	// so that we do not compute anything if not needed
	function getActions ( ) {

		// Determine the events to bind. IE11 implements pointerEvents without
		// a prefix, which breaks compatibility with the IE10 implementation.
		return window.navigator.pointerEnabled ? {
			start: 'pointerdown',
			move: 'pointermove',
			end: 'pointerup'
		} : window.navigator.msPointerEnabled ? {
			start: 'MSPointerDown',
			move: 'MSPointerMove',
			end: 'MSPointerUp'
		} : {
			start: 'mousedown touchstart',
			move: 'mousemove touchmove',
			end: 'mouseup touchend'
		};
	}

	// https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md
	// Issue #785
	function getSupportsPassive ( ) {

		var supportsPassive = false;

		try {

			var opts = Object.defineProperty({}, 'passive', {
				get: function() {
					supportsPassive = true;
				}
			});

			window.addEventListener('test', null, opts);

		} catch (e) {}

		return supportsPassive;
	}

	function getSupportsTouchActionNone ( ) {
		return window.CSS && CSS.supports && CSS.supports('touch-action', 'none');
	}


// Value calculation

	// Determine the size of a sub-range in relation to a full range.
	function subRangeRatio ( pa, pb ) {
		return (100 / (pb - pa));
	}

	// (percentage) How many percent is this value of this range?
	function fromPercentage ( range, value ) {
		return (value * 100) / ( range[1] - range[0] );
	}

	// (percentage) Where is this value on this range?
	function toPercentage ( range, value ) {
		return fromPercentage( range, range[0] < 0 ?
			value + Math.abs(range[0]) :
				value - range[0] );
	}

	// (value) How much is this percentage on this range?
	function isPercentage ( range, value ) {
		return ((value * ( range[1] - range[0] )) / 100) + range[0];
	}


// Range conversion

	function getJ ( value, arr ) {

		var j = 1;

		while ( value >= arr[j] ){
			j += 1;
		}

		return j;
	}

	// (percentage) Input a value, find where, on a scale of 0-100, it applies.
	function toStepping ( xVal, xPct, value ) {

		if ( value >= xVal.slice(-1)[0] ){
			return 100;
		}

		var j = getJ( value, xVal ), va, vb, pa, pb;

		va = xVal[j-1];
		vb = xVal[j];
		pa = xPct[j-1];
		pb = xPct[j];

		return pa + (toPercentage([va, vb], value) / subRangeRatio (pa, pb));
	}

	// (value) Input a percentage, find where it is on the specified range.
	function fromStepping ( xVal, xPct, value ) {

		// There is no range group that fits 100
		if ( value >= 100 ){
			return xVal.slice(-1)[0];
		}

		var j = getJ( value, xPct ), va, vb, pa, pb;

		va = xVal[j-1];
		vb = xVal[j];
		pa = xPct[j-1];
		pb = xPct[j];

		return isPercentage([va, vb], (value - pa) * subRangeRatio (pa, pb));
	}

	// (percentage) Get the step that applies at a certain value.
	function getStep ( xPct, xSteps, snap, value ) {

		if ( value === 100 ) {
			return value;
		}

		var j = getJ( value, xPct ), a, b;

		// If 'snap' is set, steps are used as fixed points on the slider.
		if ( snap ) {

			a = xPct[j-1];
			b = xPct[j];

			// Find the closest position, a or b.
			if ((value - a) > ((b-a)/2)){
				return b;
			}

			return a;
		}

		if ( !xSteps[j-1] ){
			return value;
		}

		return xPct[j-1] + closest(
			value - xPct[j-1],
			xSteps[j-1]
		);
	}


// Entry parsing

	function handleEntryPoint ( index, value, that ) {

		var percentage;

		// Wrap numerical input in an array.
		if ( typeof value === "number" ) {
			value = [value];
		}

		// Reject any invalid input, by testing whether value is an array.
		if ( Object.prototype.toString.call( value ) !== '[object Array]' ){
			throw new Error("noUiSlider (" + VERSION + "): 'range' contains invalid value.");
		}

		// Covert min/max syntax to 0 and 100.
		if ( index === 'min' ) {
			percentage = 0;
		} else if ( index === 'max' ) {
			percentage = 100;
		} else {
			percentage = parseFloat( index );
		}

		// Check for correct input.
		if ( !isNumeric( percentage ) || !isNumeric( value[0] ) ) {
			throw new Error("noUiSlider (" + VERSION + "): 'range' value isn't numeric.");
		}

		// Store values.
		that.xPct.push( percentage );
		that.xVal.push( value[0] );

		// NaN will evaluate to false too, but to keep
		// logging clear, set step explicitly. Make sure
		// not to override the 'step' setting with false.
		if ( !percentage ) {
			if ( !isNaN( value[1] ) ) {
				that.xSteps[0] = value[1];
			}
		} else {
			that.xSteps.push( isNaN(value[1]) ? false : value[1] );
		}

		that.xHighestCompleteStep.push(0);
	}

	function handleStepPoint ( i, n, that ) {

		// Ignore 'false' stepping.
		if ( !n ) {
			return true;
		}

		// Factor to range ratio
		that.xSteps[i] = fromPercentage([
			 that.xVal[i]
			,that.xVal[i+1]
		], n) / subRangeRatio (
			that.xPct[i],
			that.xPct[i+1] );

		var totalSteps = (that.xVal[i+1] - that.xVal[i]) / that.xNumSteps[i];
		var highestStep = Math.ceil(Number(totalSteps.toFixed(3)) - 1);
		var step = that.xVal[i] + (that.xNumSteps[i] * highestStep);

		that.xHighestCompleteStep[i] = step;
	}


// Interface

	function Spectrum ( entry, snap, singleStep ) {

		this.xPct = [];
		this.xVal = [];
		this.xSteps = [ singleStep || false ];
		this.xNumSteps = [ false ];
		this.xHighestCompleteStep = [];

		this.snap = snap;

		var index, ordered = [ /* [0, 'min'], [1, '50%'], [2, 'max'] */ ];

		// Map the object keys to an array.
		for ( index in entry ) {
			if ( entry.hasOwnProperty(index) ) {
				ordered.push([entry[index], index]);
			}
		}

		// Sort all entries by value (numeric sort).
		if ( ordered.length && typeof ordered[0][0] === "object" ) {
			ordered.sort(function(a, b) { return a[0][0] - b[0][0]; });
		} else {
			ordered.sort(function(a, b) { return a[0] - b[0]; });
		}


		// Convert all entries to subranges.
		for ( index = 0; index < ordered.length; index++ ) {
			handleEntryPoint(ordered[index][1], ordered[index][0], this);
		}

		// Store the actual step values.
		// xSteps is sorted in the same order as xPct and xVal.
		this.xNumSteps = this.xSteps.slice(0);

		// Convert all numeric steps to the percentage of the subrange they represent.
		for ( index = 0; index < this.xNumSteps.length; index++ ) {
			handleStepPoint(index, this.xNumSteps[index], this);
		}
	}

	Spectrum.prototype.getMargin = function ( value ) {

		var step = this.xNumSteps[0];

		if ( step && ((value / step) % 1) !== 0 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'limit', 'margin' and 'padding' must be divisible by step.");
		}

		return this.xPct.length === 2 ? fromPercentage(this.xVal, value) : false;
	};

	Spectrum.prototype.toStepping = function ( value ) {

		value = toStepping( this.xVal, this.xPct, value );

		return value;
	};

	Spectrum.prototype.fromStepping = function ( value ) {

		return fromStepping( this.xVal, this.xPct, value );
	};

	Spectrum.prototype.getStep = function ( value ) {

		value = getStep(this.xPct, this.xSteps, this.snap, value );

		return value;
	};

	Spectrum.prototype.getNearbySteps = function ( value ) {

		var j = getJ(value, this.xPct);

		return {
			stepBefore: { startValue: this.xVal[j-2], step: this.xNumSteps[j-2], highestStep: this.xHighestCompleteStep[j-2] },
			thisStep: { startValue: this.xVal[j-1], step: this.xNumSteps[j-1], highestStep: this.xHighestCompleteStep[j-1] },
			stepAfter: { startValue: this.xVal[j-0], step: this.xNumSteps[j-0], highestStep: this.xHighestCompleteStep[j-0] }
		};
	};

	Spectrum.prototype.countStepDecimals = function () {
		var stepDecimals = this.xNumSteps.map(countDecimals);
		return Math.max.apply(null, stepDecimals);
 	};

	// Outside testing
	Spectrum.prototype.convert = function ( value ) {
		return this.getStep(this.toStepping(value));
	};

/*	Every input option is tested and parsed. This'll prevent
	endless validation in internal methods. These tests are
	structured with an item for every option available. An
	option can be marked as required by setting the 'r' flag.
	The testing function is provided with three arguments:
		- The provided value for the option;
		- A reference to the options object;
		- The name for the option;

	The testing function returns false when an error is detected,
	or true when everything is OK. It can also modify the option
	object, to make sure all values can be correctly looped elsewhere. */

	var defaultFormatter = { 'to': function( value ){
		return value !== undefined && value.toFixed(2);
	}, 'from': Number };

	function validateFormat ( entry ) {

		// Any object with a to and from method is supported.
		if ( isValidFormatter(entry) ) {
			return true;
		}

		throw new Error("noUiSlider (" + VERSION + "): 'format' requires 'to' and 'from' methods.");
	}

	function testStep ( parsed, entry ) {

		if ( !isNumeric( entry ) ) {
			throw new Error("noUiSlider (" + VERSION + "): 'step' is not numeric.");
		}

		// The step option can still be used to set stepping
		// for linear sliders. Overwritten if set in 'range'.
		parsed.singleStep = entry;
	}

	function testRange ( parsed, entry ) {

		// Filter incorrect input.
		if ( typeof entry !== 'object' || Array.isArray(entry) ) {
			throw new Error("noUiSlider (" + VERSION + "): 'range' is not an object.");
		}

		// Catch missing start or end.
		if ( entry.min === undefined || entry.max === undefined ) {
			throw new Error("noUiSlider (" + VERSION + "): Missing 'min' or 'max' in 'range'.");
		}

		// Catch equal start or end.
		if ( entry.min === entry.max ) {
			throw new Error("noUiSlider (" + VERSION + "): 'range' 'min' and 'max' cannot be equal.");
		}

		parsed.spectrum = new Spectrum(entry, parsed.snap, parsed.singleStep);
	}

	function testStart ( parsed, entry ) {

		entry = asArray(entry);

		// Validate input. Values aren't tested, as the public .val method
		// will always provide a valid location.
		if ( !Array.isArray( entry ) || !entry.length ) {
			throw new Error("noUiSlider (" + VERSION + "): 'start' option is incorrect.");
		}

		// Store the number of handles.
		parsed.handles = entry.length;

		// When the slider is initialized, the .val method will
		// be called with the start options.
		parsed.start = entry;
	}

	function testSnap ( parsed, entry ) {

		// Enforce 100% stepping within subranges.
		parsed.snap = entry;

		if ( typeof entry !== 'boolean' ){
			throw new Error("noUiSlider (" + VERSION + "): 'snap' option must be a boolean.");
		}
	}

	function testAnimate ( parsed, entry ) {

		// Enforce 100% stepping within subranges.
		parsed.animate = entry;

		if ( typeof entry !== 'boolean' ){
			throw new Error("noUiSlider (" + VERSION + "): 'animate' option must be a boolean.");
		}
	}

	function testAnimationDuration ( parsed, entry ) {

		parsed.animationDuration = entry;

		if ( typeof entry !== 'number' ){
			throw new Error("noUiSlider (" + VERSION + "): 'animationDuration' option must be a number.");
		}
	}

	function testConnect ( parsed, entry ) {

		var connect = [false];
		var i;

		// Map legacy options
		if ( entry === 'lower' ) {
			entry = [true, false];
		}

		else if ( entry === 'upper' ) {
			entry = [false, true];
		}

		// Handle boolean options
		if ( entry === true || entry === false ) {

			for ( i = 1; i < parsed.handles; i++ ) {
				connect.push(entry);
			}

			connect.push(false);
		}

		// Reject invalid input
		else if ( !Array.isArray( entry ) || !entry.length || entry.length !== parsed.handles + 1 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'connect' option doesn't match handle count.");
		}

		else {
			connect = entry;
		}

		parsed.connect = connect;
	}

	function testOrientation ( parsed, entry ) {

		// Set orientation to an a numerical value for easy
		// array selection.
		switch ( entry ){
		  case 'horizontal':
			parsed.ort = 0;
			break;
		  case 'vertical':
			parsed.ort = 1;
			break;
		  default:
			throw new Error("noUiSlider (" + VERSION + "): 'orientation' option is invalid.");
		}
	}

	function testMargin ( parsed, entry ) {

		if ( !isNumeric(entry) ){
			throw new Error("noUiSlider (" + VERSION + "): 'margin' option must be numeric.");
		}

		// Issue #582
		if ( entry === 0 ) {
			return;
		}

		parsed.margin = parsed.spectrum.getMargin(entry);

		if ( !parsed.margin ) {
			throw new Error("noUiSlider (" + VERSION + "): 'margin' option is only supported on linear sliders.");
		}
	}

	function testLimit ( parsed, entry ) {

		if ( !isNumeric(entry) ){
			throw new Error("noUiSlider (" + VERSION + "): 'limit' option must be numeric.");
		}

		parsed.limit = parsed.spectrum.getMargin(entry);

		if ( !parsed.limit || parsed.handles < 2 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'limit' option is only supported on linear sliders with 2 or more handles.");
		}
	}

	function testPadding ( parsed, entry ) {

		if ( !isNumeric(entry) ){
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option must be numeric.");
		}

		if ( entry === 0 ) {
			return;
		}

		parsed.padding = parsed.spectrum.getMargin(entry);

		if ( !parsed.padding ) {
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option is only supported on linear sliders.");
		}

		if ( parsed.padding < 0 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option must be a positive number.");
		}

		if ( parsed.padding >= 50 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option must be less than half the range.");
		}
	}

	function testDirection ( parsed, entry ) {

		// Set direction as a numerical value for easy parsing.
		// Invert connection for RTL sliders, so that the proper
		// handles get the connect/background classes.
		switch ( entry ) {
		  case 'ltr':
			parsed.dir = 0;
			break;
		  case 'rtl':
			parsed.dir = 1;
			break;
		  default:
			throw new Error("noUiSlider (" + VERSION + "): 'direction' option was not recognized.");
		}
	}

	function testBehaviour ( parsed, entry ) {

		// Make sure the input is a string.
		if ( typeof entry !== 'string' ) {
			throw new Error("noUiSlider (" + VERSION + "): 'behaviour' must be a string containing options.");
		}

		// Check if the string contains any keywords.
		// None are required.
		var tap = entry.indexOf('tap') >= 0;
		var drag = entry.indexOf('drag') >= 0;
		var fixed = entry.indexOf('fixed') >= 0;
		var snap = entry.indexOf('snap') >= 0;
		var hover = entry.indexOf('hover') >= 0;

		if ( fixed ) {

			if ( parsed.handles !== 2 ) {
				throw new Error("noUiSlider (" + VERSION + "): 'fixed' behaviour must be used with 2 handles");
			}

			// Use margin to enforce fixed state
			testMargin(parsed, parsed.start[1] - parsed.start[0]);
		}

		parsed.events = {
			tap: tap || snap,
			drag: drag,
			fixed: fixed,
			snap: snap,
			hover: hover
		};
	}

	function testMultitouch ( parsed, entry ) {
		parsed.multitouch = entry;

		if ( typeof entry !== 'boolean' ){
			throw new Error("noUiSlider (" + VERSION + "): 'multitouch' option must be a boolean.");
		}
	}

	function testTooltips ( parsed, entry ) {

		if ( entry === false ) {
			return;
		}

		else if ( entry === true ) {

			parsed.tooltips = [];

			for ( var i = 0; i < parsed.handles; i++ ) {
				parsed.tooltips.push(true);
			}
		}

		else {

			parsed.tooltips = asArray(entry);

			if ( parsed.tooltips.length !== parsed.handles ) {
				throw new Error("noUiSlider (" + VERSION + "): must pass a formatter for all handles.");
			}

			parsed.tooltips.forEach(function(formatter){
				if ( typeof formatter !== 'boolean' && (typeof formatter !== 'object' || typeof formatter.to !== 'function') ) {
					throw new Error("noUiSlider (" + VERSION + "): 'tooltips' must be passed a formatter or 'false'.");
				}
			});
		}
	}

	function testAriaFormat ( parsed, entry ) {
		parsed.ariaFormat = entry;
		validateFormat(entry);
	}

	function testFormat ( parsed, entry ) {
		parsed.format = entry;
		validateFormat(entry);
	}

	function testCssPrefix ( parsed, entry ) {

		if ( entry !== undefined && typeof entry !== 'string' && entry !== false ) {
			throw new Error("noUiSlider (" + VERSION + "): 'cssPrefix' must be a string or `false`.");
		}

		parsed.cssPrefix = entry;
	}

	function testCssClasses ( parsed, entry ) {

		if ( entry !== undefined && typeof entry !== 'object' ) {
			throw new Error("noUiSlider (" + VERSION + "): 'cssClasses' must be an object.");
		}

		if ( typeof parsed.cssPrefix === 'string' ) {
			parsed.cssClasses = {};

			for ( var key in entry ) {
				if ( !entry.hasOwnProperty(key) ) { continue; }

				parsed.cssClasses[key] = parsed.cssPrefix + entry[key];
			}
		} else {
			parsed.cssClasses = entry;
		}
	}

	function testUseRaf ( parsed, entry ) {
		if ( entry === true || entry === false ) {
			parsed.useRequestAnimationFrame = entry;
		} else {
			throw new Error("noUiSlider (" + VERSION + "): 'useRequestAnimationFrame' option should be true (default) or false.");
		}
	}

	// Test all developer settings and parse to assumption-safe values.
	function testOptions ( options ) {

		// To prove a fix for #537, freeze options here.
		// If the object is modified, an error will be thrown.
		// Object.freeze(options);

		var parsed = {
			margin: 0,
			limit: 0,
			padding: 0,
			animate: true,
			animationDuration: 300,
			ariaFormat: defaultFormatter,
			format: defaultFormatter
		};

		// Tests are executed in the order they are presented here.
		var tests = {
			'step': { r: false, t: testStep },
			'start': { r: true, t: testStart },
			'connect': { r: true, t: testConnect },
			'direction': { r: true, t: testDirection },
			'snap': { r: false, t: testSnap },
			'animate': { r: false, t: testAnimate },
			'animationDuration': { r: false, t: testAnimationDuration },
			'range': { r: true, t: testRange },
			'orientation': { r: false, t: testOrientation },
			'margin': { r: false, t: testMargin },
			'limit': { r: false, t: testLimit },
			'padding': { r: false, t: testPadding },
			'behaviour': { r: true, t: testBehaviour },
			'multitouch': { r: true, t: testMultitouch },
			'ariaFormat': { r: false, t: testAriaFormat },
			'format': { r: false, t: testFormat },
			'tooltips': { r: false, t: testTooltips },
			'cssPrefix': { r: false, t: testCssPrefix },
			'cssClasses': { r: false, t: testCssClasses },
			'useRequestAnimationFrame': { r: false, t: testUseRaf }
		};

		var defaults = {
			'connect': false,
			'direction': 'ltr',
			'behaviour': 'tap',
			'multitouch': false,
			'orientation': 'horizontal',
			'cssPrefix' : 'noUi-',
			'cssClasses': {
				target: 'target',
				base: 'base',
				origin: 'origin',
				handle: 'handle',
				handleLower: 'handle-lower',
				handleUpper: 'handle-upper',
				horizontal: 'horizontal',
				vertical: 'vertical',
				background: 'background',
				connect: 'connect',
				ltr: 'ltr',
				rtl: 'rtl',
				draggable: 'draggable',
				drag: 'state-drag',
				tap: 'state-tap',
				active: 'active',
				tooltip: 'tooltip',
				pips: 'pips',
				pipsHorizontal: 'pips-horizontal',
				pipsVertical: 'pips-vertical',
				marker: 'marker',
				markerHorizontal: 'marker-horizontal',
				markerVertical: 'marker-vertical',
				markerNormal: 'marker-normal',
				markerLarge: 'marker-large',
				markerSub: 'marker-sub',
				value: 'value',
				valueHorizontal: 'value-horizontal',
				valueVertical: 'value-vertical',
				valueNormal: 'value-normal',
				valueLarge: 'value-large',
				valueSub: 'value-sub'
			},
			'useRequestAnimationFrame': true
		};

		// AriaFormat defaults to regular format, if any.
		if ( options.format && !options.ariaFormat ) {
			options.ariaFormat = options.format;
		}

		// Run all options through a testing mechanism to ensure correct
		// input. It should be noted that options might get modified to
		// be handled properly. E.g. wrapping integers in arrays.
		Object.keys(tests).forEach(function( name ){

			// If the option isn't set, but it is required, throw an error.
			if ( options[name] === undefined && defaults[name] === undefined ) {

				if ( tests[name].r ) {
					throw new Error("noUiSlider (" + VERSION + "): '" + name + "' is required.");
				}

				return true;
			}

			tests[name].t( parsed, options[name] === undefined ? defaults[name] : options[name] );
		});

		// Forward pips options
		parsed.pips = options.pips;

		var styles = [['left', 'top'], ['right', 'bottom']];

		// Pre-define the styles.
		parsed.style = styles[parsed.dir][parsed.ort];
		parsed.styleOposite = styles[parsed.dir?0:1][parsed.ort];

		return parsed;
	}


function closure ( target, options, originalOptions ){

	var actions = getActions();
	var supportsTouchActionNone = getSupportsTouchActionNone();
	var supportsPassive = supportsTouchActionNone && getSupportsPassive();

	// All variables local to 'closure' are prefixed with 'scope_'
	var scope_Target = target;
	var scope_Locations = [];
	var scope_Base;
	var scope_Handles;
	var scope_HandleNumbers = [];
	var scope_ActiveHandlesCount = 0;
	var scope_Connects;
	var scope_Spectrum = options.spectrum;
	var scope_Values = [];
	var scope_Events = {};
	var scope_Self;
	var scope_Pips;
	var scope_Document = target.ownerDocument;
	var scope_DocumentElement = scope_Document.documentElement;
	var scope_Body = scope_Document.body;


	// Creates a node, adds it to target, returns the new node.
	function addNodeTo ( target, className ) {

		var div = scope_Document.createElement('div');

		if ( className ) {
			addClass(div, className);
		}

		target.appendChild(div);

		return div;
	}

	// Append a origin to the base
	function addOrigin ( base, handleNumber ) {

		var origin = addNodeTo(base, options.cssClasses.origin);
		var handle = addNodeTo(origin, options.cssClasses.handle);

		handle.setAttribute('data-handle', handleNumber);

		// https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex
		// 0 = focusable and reachable
		handle.setAttribute('tabindex', '0');
		handle.setAttribute('role', 'slider');
		handle.setAttribute('aria-orientation', options.ort ? 'vertical' : 'horizontal');

		if ( handleNumber === 0 ) {
			addClass(handle, options.cssClasses.handleLower);
		}

		else if ( handleNumber === options.handles - 1 ) {
			addClass(handle, options.cssClasses.handleUpper);
		}

		return origin;
	}

	// Insert nodes for connect elements
	function addConnect ( base, add ) {

		if ( !add ) {
			return false;
		}

		return addNodeTo(base, options.cssClasses.connect);
	}

	// Add handles to the slider base.
	function addElements ( connectOptions, base ) {

		scope_Handles = [];
		scope_Connects = [];

		scope_Connects.push(addConnect(base, connectOptions[0]));

		// [::::O====O====O====]
		// connectOptions = [0, 1, 1, 1]

		for ( var i = 0; i < options.handles; i++ ) {
			// Keep a list of all added handles.
			scope_Handles.push(addOrigin(base, i));
			scope_HandleNumbers[i] = i;
			scope_Connects.push(addConnect(base, connectOptions[i + 1]));
		}
	}

	// Initialize a single slider.
	function addSlider ( target ) {

		// Apply classes and data to the target.
		addClass(target, options.cssClasses.target);

		if ( options.dir === 0 ) {
			addClass(target, options.cssClasses.ltr);
		} else {
			addClass(target, options.cssClasses.rtl);
		}

		if ( options.ort === 0 ) {
			addClass(target, options.cssClasses.horizontal);
		} else {
			addClass(target, options.cssClasses.vertical);
		}

		scope_Base = addNodeTo(target, options.cssClasses.base);
	}


	function addTooltip ( handle, handleNumber ) {

		if ( !options.tooltips[handleNumber] ) {
			return false;
		}

		return addNodeTo(handle.firstChild, options.cssClasses.tooltip);
	}

	// The tooltips option is a shorthand for using the 'update' event.
	function tooltips ( ) {

		// Tooltips are added with options.tooltips in original order.
		var tips = scope_Handles.map(addTooltip);

		bindEvent('update', function(values, handleNumber, unencoded) {

			if ( !tips[handleNumber] ) {
				return;
			}

			var formattedValue = values[handleNumber];

			if ( options.tooltips[handleNumber] !== true ) {
				formattedValue = options.tooltips[handleNumber].to(unencoded[handleNumber]);
			}

			tips[handleNumber].innerHTML = formattedValue;
		});
	}


	function aria ( ) {

		bindEvent('update', function ( values, handleNumber, unencoded, tap, positions ) {

			// Update Aria Values for all handles, as a change in one changes min and max values for the next.
			scope_HandleNumbers.forEach(function( handleNumber ){

				var handle = scope_Handles[handleNumber];

				var min = checkHandlePosition(scope_Locations, handleNumber, 0, true, true, true);
				var max = checkHandlePosition(scope_Locations, handleNumber, 100, true, true, true);

				var now = positions[handleNumber];
				var text = options.ariaFormat.to(unencoded[handleNumber]);

				handle.children[0].setAttribute('aria-valuemin', min.toFixed(1));
				handle.children[0].setAttribute('aria-valuemax', max.toFixed(1));
				handle.children[0].setAttribute('aria-valuenow', now.toFixed(1));
				handle.children[0].setAttribute('aria-valuetext', text);
			});
		});
	}


	function getGroup ( mode, values, stepped ) {

		// Use the range.
		if ( mode === 'range' || mode === 'steps' ) {
			return scope_Spectrum.xVal;
		}

		if ( mode === 'count' ) {

			if ( !values ) {
				throw new Error("noUiSlider (" + VERSION + "): 'values' required for mode 'count'.");
			}

			// Divide 0 - 100 in 'count' parts.
			var spread = ( 100 / (values - 1) );
			var v;
			var i = 0;

			values = [];

			// List these parts and have them handled as 'positions'.
			while ( (v = i++ * spread) <= 100 ) {
				values.push(v);
			}

			mode = 'positions';
		}

		if ( mode === 'positions' ) {

			// Map all percentages to on-range values.
			return values.map(function( value ){
				return scope_Spectrum.fromStepping( stepped ? scope_Spectrum.getStep( value ) : value );
			});
		}

		if ( mode === 'values' ) {

			// If the value must be stepped, it needs to be converted to a percentage first.
			if ( stepped ) {

				return values.map(function( value ){

					// Convert to percentage, apply step, return to value.
					return scope_Spectrum.fromStepping( scope_Spectrum.getStep( scope_Spectrum.toStepping( value ) ) );
				});

			}

			// Otherwise, we can simply use the values.
			return values;
		}
	}

	function generateSpread ( density, mode, group ) {

		function safeIncrement(value, increment) {
			// Avoid floating point variance by dropping the smallest decimal places.
			return (value + increment).toFixed(7) / 1;
		}

		var indexes = {};
		var firstInRange = scope_Spectrum.xVal[0];
		var lastInRange = scope_Spectrum.xVal[scope_Spectrum.xVal.length-1];
		var ignoreFirst = false;
		var ignoreLast = false;
		var prevPct = 0;

		// Create a copy of the group, sort it and filter away all duplicates.
		group = unique(group.slice().sort(function(a, b){ return a - b; }));

		// Make sure the range starts with the first element.
		if ( group[0] !== firstInRange ) {
			group.unshift(firstInRange);
			ignoreFirst = true;
		}

		// Likewise for the last one.
		if ( group[group.length - 1] !== lastInRange ) {
			group.push(lastInRange);
			ignoreLast = true;
		}

		group.forEach(function ( current, index ) {

			// Get the current step and the lower + upper positions.
			var step;
			var i;
			var q;
			var low = current;
			var high = group[index+1];
			var newPct;
			var pctDifference;
			var pctPos;
			var type;
			var steps;
			var realSteps;
			var stepsize;

			// When using 'steps' mode, use the provided steps.
			// Otherwise, we'll step on to the next subrange.
			if ( mode === 'steps' ) {
				step = scope_Spectrum.xNumSteps[ index ];
			}

			// Default to a 'full' step.
			if ( !step ) {
				step = high-low;
			}

			// Low can be 0, so test for false. If high is undefined,
			// we are at the last subrange. Index 0 is already handled.
			if ( low === false || high === undefined ) {
				return;
			}

			// Make sure step isn't 0, which would cause an infinite loop (#654)
			step = Math.max(step, 0.0000001);

			// Find all steps in the subrange.
			for ( i = low; i <= high; i = safeIncrement(i, step) ) {

				// Get the percentage value for the current step,
				// calculate the size for the subrange.
				newPct = scope_Spectrum.toStepping( i );
				pctDifference = newPct - prevPct;

				steps = pctDifference / density;
				realSteps = Math.round(steps);

				// This ratio represents the ammount of percentage-space a point indicates.
				// For a density 1 the points/percentage = 1. For density 2, that percentage needs to be re-devided.
				// Round the percentage offset to an even number, then divide by two
				// to spread the offset on both sides of the range.
				stepsize = pctDifference/realSteps;

				// Divide all points evenly, adding the correct number to this subrange.
				// Run up to <= so that 100% gets a point, event if ignoreLast is set.
				for ( q = 1; q <= realSteps; q += 1 ) {

					// The ratio between the rounded value and the actual size might be ~1% off.
					// Correct the percentage offset by the number of points
					// per subrange. density = 1 will result in 100 points on the
					// full range, 2 for 50, 4 for 25, etc.
					pctPos = prevPct + ( q * stepsize );
					indexes[pctPos.toFixed(5)] = ['x', 0];
				}

				// Determine the point type.
				type = (group.indexOf(i) > -1) ? 1 : ( mode === 'steps' ? 2 : 0 );

				// Enforce the 'ignoreFirst' option by overwriting the type for 0.
				if ( !index && ignoreFirst ) {
					type = 0;
				}

				if ( !(i === high && ignoreLast)) {
					// Mark the 'type' of this point. 0 = plain, 1 = real value, 2 = step value.
					indexes[newPct.toFixed(5)] = [i, type];
				}

				// Update the percentage count.
				prevPct = newPct;
			}
		});

		return indexes;
	}

	function addMarking ( spread, filterFunc, formatter ) {

		var element = scope_Document.createElement('div');

		var valueSizeClasses = [
			options.cssClasses.valueNormal,
			options.cssClasses.valueLarge,
			options.cssClasses.valueSub
		];
		var markerSizeClasses = [
			options.cssClasses.markerNormal,
			options.cssClasses.markerLarge,
			options.cssClasses.markerSub
		];
		var valueOrientationClasses = [
			options.cssClasses.valueHorizontal,
			options.cssClasses.valueVertical
		];
		var markerOrientationClasses = [
			options.cssClasses.markerHorizontal,
			options.cssClasses.markerVertical
		];

		addClass(element, options.cssClasses.pips);
		addClass(element, options.ort === 0 ? options.cssClasses.pipsHorizontal : options.cssClasses.pipsVertical);

		function getClasses( type, source ){
			var a = source === options.cssClasses.value;
			var orientationClasses = a ? valueOrientationClasses : markerOrientationClasses;
			var sizeClasses = a ? valueSizeClasses : markerSizeClasses;

			return source + ' ' + orientationClasses[options.ort] + ' ' + sizeClasses[type];
		}

		function addSpread ( offset, values ){

			// Apply the filter function, if it is set.
			values[1] = (values[1] && filterFunc) ? filterFunc(values[0], values[1]) : values[1];

			// Add a marker for every point
			var node = addNodeTo(element, false);
				node.className = getClasses(values[1], options.cssClasses.marker);
				node.style[options.style] = offset + '%';

			// Values are only appended for points marked '1' or '2'.
			if ( values[1] ) {
				node = addNodeTo(element, false);
				node.className = getClasses(values[1], options.cssClasses.value);
				node.style[options.style] = offset + '%';
				node.innerText = formatter.to(values[0]);
			}
		}

		// Append all points.
		Object.keys(spread).forEach(function(a){
			addSpread(a, spread[a]);
		});

		return element;
	}

	function removePips ( ) {
		if ( scope_Pips ) {
			removeElement(scope_Pips);
			scope_Pips = null;
		}
	}

	function pips ( grid ) {

		// Fix #669
		removePips();

		var mode = grid.mode;
		var density = grid.density || 1;
		var filter = grid.filter || false;
		var values = grid.values || false;
		var stepped = grid.stepped || false;
		var group = getGroup( mode, values, stepped );
		var spread = generateSpread( density, mode, group );
		var format = grid.format || {
			to: Math.round
		};

		scope_Pips = scope_Target.appendChild(addMarking(
			spread,
			filter,
			format
		));

		return scope_Pips;
	}


	// Shorthand for base dimensions.
	function baseSize ( ) {
		var rect = scope_Base.getBoundingClientRect(), alt = 'offset' + ['Width', 'Height'][options.ort];
		return options.ort === 0 ? (rect.width||scope_Base[alt]) : (rect.height||scope_Base[alt]);
	}

	// Handler for attaching events trough a proxy.
	function attachEvent ( events, element, callback, data ) {

		// This function can be used to 'filter' events to the slider.
		// element is a node, not a nodeList

		var method = function ( e ){

			if ( scope_Target.hasAttribute('disabled') ) {
				return false;
			}

			// Stop if an active 'tap' transition is taking place.
			if ( hasClass(scope_Target, options.cssClasses.tap) ) {
				return false;
			}

			e = fixEvent(e, data.pageOffset, data.target || element);

			// Handle reject of multitouch
			if ( !e ) {
				return false;
			}

			// Ignore right or middle clicks on start #454
			if ( events === actions.start && e.buttons !== undefined && e.buttons > 1 ) {
				return false;
			}

			// Ignore right or middle clicks on start #454
			if ( data.hover && e.buttons ) {
				return false;
			}

			// 'supportsPassive' is only true if a browser also supports touch-action: none in CSS.
			// iOS safari does not, so it doesn't get to benefit from passive scrolling. iOS does support
			// touch-action: manipulation, but that allows panning, which breaks
			// sliders after zooming/on non-responsive pages.
			// See: https://bugs.webkit.org/show_bug.cgi?id=133112
			if ( !supportsPassive ) {
				e.preventDefault();
			}

			e.calcPoint = e.points[ options.ort ];

			// Call the event handler with the event [ and additional data ].
			callback ( e, data );
		};

		var methods = [];

		// Bind a closure on the target for every event type.
		events.split(' ').forEach(function( eventName ){
			element.addEventListener(eventName, method, supportsPassive ? { passive: true } : false);
			methods.push([eventName, method]);
		});

		return methods;
	}

	// Provide a clean event with standardized offset values.
	function fixEvent ( e, pageOffset, target ) {

		// Filter the event to register the type, which can be
		// touch, mouse or pointer. Offset changes need to be
		// made on an event specific basis.
		var touch = e.type.indexOf('touch') === 0;
		var mouse = e.type.indexOf('mouse') === 0;
		var pointer = e.type.indexOf('pointer') === 0;

		var x;
		var y;

		// IE10 implemented pointer events with a prefix;
		if ( e.type.indexOf('MSPointer') === 0 ) {
			pointer = true;
		}


		// In the event that multitouch is activated, the only thing one handle should be concerned
		// about is the touches that originated on top of it.
		if ( touch && options.multitouch ) {
			// Returns true if a touch originated on the target.
			var isTouchOnTarget = function (touch) {
				return touch.target === target || target.contains(touch.target);
			};
			// In the case of touchstart events, we need to make sure there is still no more than one
			// touch on the target so we look amongst all touches.
			if (e.type === 'touchstart') {
				var targetTouches = Array.prototype.filter.call(e.touches, isTouchOnTarget);
				// Do not support more than one touch per handle.
				if ( targetTouches.length > 1 ) {
					return false;
				}
				x = targetTouches[0].pageX;
				y = targetTouches[0].pageY;
			} else {
			// In the other cases, find on changedTouches is enough.
				var targetTouch = Array.prototype.find.call(e.changedTouches, isTouchOnTarget);
				// Cancel if the target touch has not moved.
				if ( !targetTouch ) {
					return false;
				}
				x = targetTouch.pageX;
				y = targetTouch.pageY;
			}
		} else if ( touch ) {
			// Fix bug when user touches with two or more fingers on mobile devices.
			// It's useful when you have two or more sliders on one page,
			// that can be touched simultaneously.
			// #649, #663, #668
			if ( e.touches.length > 1 ) {
				return false;
			}

			// noUiSlider supports one movement at a time,
			// so we can select the first 'changedTouch'.
			x = e.changedTouches[0].pageX;
			y = e.changedTouches[0].pageY;
		}

		pageOffset = pageOffset || getPageOffset(scope_Document);

		if ( mouse || pointer ) {
			x = e.clientX + pageOffset.x;
			y = e.clientY + pageOffset.y;
		}

		e.pageOffset = pageOffset;
		e.points = [x, y];
		e.cursor = mouse || pointer; // Fix #435

		return e;
	}

	// Translate a coordinate in the document to a percentage on the slider
	function calcPointToPercentage ( calcPoint ) {
		var location = calcPoint - offset(scope_Base, options.ort);
		var proposal = ( location * 100 ) / baseSize();
		return options.dir ? 100 - proposal : proposal;
	}

	// Find handle closest to a certain percentage on the slider
	function getClosestHandle ( proposal ) {

		var closest = 100;
		var handleNumber = false;

		scope_Handles.forEach(function(handle, index){

			// Disabled handles are ignored
			if ( handle.hasAttribute('disabled') ) {
				return;
			}

			var pos = Math.abs(scope_Locations[index] - proposal);

			if ( pos < closest ) {
				handleNumber = index;
				closest = pos;
			}
		});

		return handleNumber;
	}

	// Moves handle(s) by a percentage
	// (bool, % to move, [% where handle started, ...], [index in scope_Handles, ...])
	function moveHandles ( upward, proposal, locations, handleNumbers ) {

		var proposals = locations.slice();

		var b = [!upward, upward];
		var f = [upward, !upward];

		// Copy handleNumbers so we don't change the dataset
		handleNumbers = handleNumbers.slice();

		// Check to see which handle is 'leading'.
		// If that one can't move the second can't either.
		if ( upward ) {
			handleNumbers.reverse();
		}

		// Step 1: get the maximum percentage that any of the handles can move
		if ( handleNumbers.length > 1 ) {

			handleNumbers.forEach(function(handleNumber, o) {

				var to = checkHandlePosition(proposals, handleNumber, proposals[handleNumber] + proposal, b[o], f[o], false);

				// Stop if one of the handles can't move.
				if ( to === false ) {
					proposal = 0;
				} else {
					proposal = to - proposals[handleNumber];
					proposals[handleNumber] = to;
				}
			});
		}

		// If using one handle, check backward AND forward
		else {
			b = f = [true];
		}

		var state = false;

		// Step 2: Try to set the handles with the found percentage
		handleNumbers.forEach(function(handleNumber, o) {
			state = setHandle(handleNumber, locations[handleNumber] + proposal, b[o], f[o]) || state;
		});

		// Step 3: If a handle moved, fire events
		if ( state ) {
			handleNumbers.forEach(function(handleNumber){
				fireEvent('update', handleNumber);
				fireEvent('slide', handleNumber);
			});
		}
	}

	// External event handling
	function fireEvent ( eventName, handleNumber, tap ) {

		Object.keys(scope_Events).forEach(function( targetEvent ) {

			var eventType = targetEvent.split('.')[0];

			if ( eventName === eventType ) {
				scope_Events[targetEvent].forEach(function( callback ) {

					callback.call(
						// Use the slider public API as the scope ('this')
						scope_Self,
						// Return values as array, so arg_1[arg_2] is always valid.
						scope_Values.map(options.format.to),
						// Handle index, 0 or 1
						handleNumber,
						// Unformatted slider values
						scope_Values.slice(),
						// Event is fired by tap, true or false
						tap || false,
						// Left offset of the handle, in relation to the slider
						scope_Locations.slice()
					);
				});
			}
		});
	}


	// Fire 'end' when a mouse or pen leaves the document.
	function documentLeave ( event, data ) {
		if ( event.type === "mouseout" && event.target.nodeName === "HTML" && event.relatedTarget === null ){
			eventEnd (event, data);
		}
	}

	// Handle movement on document for handle and range drag.
	function eventMove ( event, data ) {

		// Fix #498
		// Check value of .buttons in 'start' to work around a bug in IE10 mobile (data.buttonsProperty).
		// https://connect.microsoft.com/IE/feedback/details/927005/mobile-ie10-windows-phone-buttons-property-of-pointermove-event-always-zero
		// IE9 has .buttons and .which zero on mousemove.
		// Firefox breaks the spec MDN defines.
		if ( navigator.appVersion.indexOf("MSIE 9") === -1 && event.buttons === 0 && data.buttonsProperty !== 0 ) {
			return eventEnd(event, data);
		}

		// Check if we are moving up or down
		var movement = (options.dir ? -1 : 1) * (event.calcPoint - data.startCalcPoint);

		// Convert the movement into a percentage of the slider width/height
		var proposal = (movement * 100) / data.baseSize;

		moveHandles(movement > 0, proposal, data.locations, data.handleNumbers);
	}

	// Unbind move events on document, call callbacks.
	function eventEnd ( event, data ) {

		// The handle is no longer active, so remove the class.
		if ( data.handle ) {
			removeClass(data.handle, options.cssClasses.active);
			scope_ActiveHandlesCount -= 1;
		}

		// Unbind the move and end events, which are added on 'start'.
		data.listeners.forEach(function( c ) {
			scope_DocumentElement.removeEventListener(c[0], c[1]);
		});

		if ( scope_ActiveHandlesCount === 0 ) {
			// Remove dragging class.
			removeClass(scope_Target, options.cssClasses.drag);
			setZindex();

			// Remove cursor styles and text-selection events bound to the body.
			if ( event.cursor ) {
				scope_Body.style.cursor = '';
				scope_Body.removeEventListener('selectstart', preventDefault);
			}
		}

		data.handleNumbers.forEach(function(handleNumber){
			fireEvent('change', handleNumber);
			fireEvent('set', handleNumber);
			fireEvent('end', handleNumber);
		});
	}

	// Bind move events on document.
	function eventStart ( event, data ) {

		var handle;
		if ( data.handleNumbers.length === 1 ) {

			var handleOrigin = scope_Handles[data.handleNumbers[0]];

			// Ignore 'disabled' handles
			if ( handleOrigin.hasAttribute('disabled') ) {
				return false;
			}

			handle = handleOrigin.children[0];
			scope_ActiveHandlesCount += 1;

			// Mark the handle as 'active' so it can be styled.
			addClass(handle, options.cssClasses.active);
		}

		// A drag should never propagate up to the 'tap' event.
		event.stopPropagation();

		// Record the event listeners.
		var listeners = [];

		// Attach the move and end events.
		var moveEvent = attachEvent(actions.move, scope_DocumentElement, eventMove, {
			// The event target has changed so we need to propagate the original one so that we keep
			// relying on it to extract target touches.
			target: event.target,
			handle: handle,
			listeners: listeners,
			startCalcPoint: event.calcPoint,
			baseSize: baseSize(),
			pageOffset: event.pageOffset,
			handleNumbers: data.handleNumbers,
			buttonsProperty: event.buttons,
			locations: scope_Locations.slice()
		});

		var endEvent = attachEvent(actions.end, scope_DocumentElement, eventEnd, {
			target: event.target,
			handle: handle,
			listeners: listeners,
			handleNumbers: data.handleNumbers
		});

		var outEvent = attachEvent("mouseout", scope_DocumentElement, documentLeave, {
			target: event.target,
			handle: handle,
			listeners: listeners,
			handleNumbers: data.handleNumbers
		});

		// We want to make sure we pushed the listeners in the listener list rather than creating
		// a new one as it has already been passed to the event handlers.
		listeners.push.apply(listeners, moveEvent.concat(endEvent, outEvent));

		// Text selection isn't an issue on touch devices,
		// so adding cursor styles can be skipped.
		if ( event.cursor ) {

			// Prevent the 'I' cursor and extend the range-drag cursor.
			scope_Body.style.cursor = getComputedStyle(event.target).cursor;

			// Mark the target with a dragging state.
			if ( scope_Handles.length > 1 ) {
				addClass(scope_Target, options.cssClasses.drag);
			}

			// Prevent text selection when dragging the handles.
			// In noUiSlider <= 9.2.0, this was handled by calling preventDefault on mouse/touch start/move,
			// which is scroll blocking. The selectstart event is supported by FireFox starting from version 52,
			// meaning the only holdout is iOS Safari. This doesn't matter: text selection isn't triggered there.
			// The 'cursor' flag is false.
			// See: http://caniuse.com/#search=selectstart
			scope_Body.addEventListener('selectstart', preventDefault, false);
		}

		data.handleNumbers.forEach(function(handleNumber){
			fireEvent('start', handleNumber);
		});
	}

	// Move closest handle to tapped location.
	function eventTap ( event ) {

		// The tap event shouldn't propagate up
		event.stopPropagation();

		var proposal = calcPointToPercentage(event.calcPoint);
		var handleNumber = getClosestHandle(proposal);

		// Tackle the case that all handles are 'disabled'.
		if ( handleNumber === false ) {
			return false;
		}

		// Flag the slider as it is now in a transitional state.
		// Transition takes a configurable amount of ms (default 300). Re-enable the slider after that.
		if ( !options.events.snap ) {
			addClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);
		}

		setHandle(handleNumber, proposal, true, true);

		setZindex();

		fireEvent('slide', handleNumber, true);
		fireEvent('update', handleNumber, true);
		fireEvent('change', handleNumber, true);
		fireEvent('set', handleNumber, true);

		if ( options.events.snap ) {
			eventStart(event, { handleNumbers: [handleNumber] });
		}
	}

	// Fires a 'hover' event for a hovered mouse/pen position.
	function eventHover ( event ) {

		var proposal = calcPointToPercentage(event.calcPoint);

		var to = scope_Spectrum.getStep(proposal);
		var value = scope_Spectrum.fromStepping(to);

		Object.keys(scope_Events).forEach(function( targetEvent ) {
			if ( 'hover' === targetEvent.split('.')[0] ) {
				scope_Events[targetEvent].forEach(function( callback ) {
					callback.call( scope_Self, value );
				});
			}
		});
	}

	// Attach events to several slider parts.
	function bindSliderEvents ( behaviour ) {

		// Attach the standard drag event to the handles.
		if ( !behaviour.fixed ) {

			scope_Handles.forEach(function( handle, index ){

				// These events are only bound to the visual handle
				// element, not the 'real' origin element.
				attachEvent ( actions.start, handle.children[0], eventStart, {
					handleNumbers: [index]
				});
			});
		}

		// Attach the tap event to the slider base.
		if ( behaviour.tap ) {
			attachEvent (actions.start, scope_Base, eventTap, {});
		}

		// Fire hover events
		if ( behaviour.hover ) {
			attachEvent (actions.move, scope_Base, eventHover, { hover: true });
		}

		// Make the range draggable.
		if ( behaviour.drag ){

			scope_Connects.forEach(function( connect, index ){

				if ( connect === false || index === 0 || index === scope_Connects.length - 1 ) {
					return;
				}

				var handleBefore = scope_Handles[index - 1];
				var handleAfter = scope_Handles[index];
				var eventHolders = [connect];

				addClass(connect, options.cssClasses.draggable);

				// When the range is fixed, the entire range can
				// be dragged by the handles. The handle in the first
				// origin will propagate the start event upward,
				// but it needs to be bound manually on the other.
				if ( behaviour.fixed ) {
					eventHolders.push(handleBefore.children[0]);
					eventHolders.push(handleAfter.children[0]);
				}

				eventHolders.forEach(function( eventHolder ) {
					attachEvent ( actions.start, eventHolder, eventStart, {
						handles: [handleBefore, handleAfter],
						handleNumbers: [index - 1, index]
					});
				});
			});
		}
	}


	// Split out the handle positioning logic so the Move event can use it, too
	function checkHandlePosition ( reference, handleNumber, to, lookBackward, lookForward, getValue ) {

		// For sliders with multiple handles, limit movement to the other handle.
		// Apply the margin option by adding it to the handle positions.
		if ( scope_Handles.length > 1 ) {

			if ( lookBackward && handleNumber > 0 ) {
				to = Math.max(to, reference[handleNumber - 1] + options.margin);
			}

			if ( lookForward && handleNumber < scope_Handles.length - 1 ) {
				to = Math.min(to, reference[handleNumber + 1] - options.margin);
			}
		}

		// The limit option has the opposite effect, limiting handles to a
		// maximum distance from another. Limit must be > 0, as otherwise
		// handles would be unmoveable.
		if ( scope_Handles.length > 1 && options.limit ) {

			if ( lookBackward && handleNumber > 0 ) {
				to = Math.min(to, reference[handleNumber - 1] + options.limit);
			}

			if ( lookForward && handleNumber < scope_Handles.length - 1 ) {
				to = Math.max(to, reference[handleNumber + 1] - options.limit);
			}
		}

		// The padding option keeps the handles a certain distance from the
		// edges of the slider. Padding must be > 0.
		if ( options.padding ) {

			if ( handleNumber === 0 ) {
				to = Math.max(to, options.padding);
			}

			if ( handleNumber === scope_Handles.length - 1 ) {
				to = Math.min(to, 100 - options.padding);
			}
		}

		to = scope_Spectrum.getStep(to);

		// Limit percentage to the 0 - 100 range
		to = limit(to);

		// Return false if handle can't move
		if ( to === reference[handleNumber] && !getValue ) {
			return false;
		}

		return to;
	}

	function toPct ( pct ) {
		return pct + '%';
	}

	// Updates scope_Locations and scope_Values, updates visual state
	function updateHandlePosition ( handleNumber, to ) {

		// Update locations.
		scope_Locations[handleNumber] = to;

		// Convert the value to the slider stepping/range.
		scope_Values[handleNumber] = scope_Spectrum.fromStepping(to);

		// Called synchronously or on the next animationFrame
		var stateUpdate = function() {
			scope_Handles[handleNumber].style[options.style] = toPct(to);
			updateConnect(handleNumber);
			updateConnect(handleNumber + 1);
		};

		// Set the handle to the new position.
		// Use requestAnimationFrame for efficient painting.
		// No significant effect in Chrome, Edge sees dramatic performace improvements.
		// Option to disable is useful for unit tests, and single-step debugging.
		if ( window.requestAnimationFrame && options.useRequestAnimationFrame ) {
			window.requestAnimationFrame(stateUpdate);
		} else {
			stateUpdate();
		}
	}

	function setZindex ( ) {

		scope_HandleNumbers.forEach(function(handleNumber){
			// Handles before the slider middle are stacked later = higher,
			// Handles after the middle later is lower
			// [[7] [8] .......... | .......... [5] [4]
			var dir = (scope_Locations[handleNumber] > 50 ? -1 : 1);
			var zIndex = 3 + (scope_Handles.length + (dir * handleNumber));
			scope_Handles[handleNumber].childNodes[0].style.zIndex = zIndex;
		});
	}

	// Test suggested values and apply margin, step.
	function setHandle ( handleNumber, to, lookBackward, lookForward ) {

		to = checkHandlePosition(scope_Locations, handleNumber, to, lookBackward, lookForward, false);

		if ( to === false ) {
			return false;
		}

		updateHandlePosition(handleNumber, to);

		return true;
	}

	// Updates style attribute for connect nodes
	function updateConnect ( index ) {

		// Skip connects set to false
		if ( !scope_Connects[index] ) {
			return;
		}

		var l = 0;
		var h = 100;

		if ( index !== 0 ) {
			l = scope_Locations[index - 1];
		}

		if ( index !== scope_Connects.length - 1 ) {
			h = scope_Locations[index];
		}

		scope_Connects[index].style[options.style] = toPct(l);
		scope_Connects[index].style[options.styleOposite] = toPct(100 - h);
	}

	// ...
	function setValue ( to, handleNumber ) {

		// Setting with null indicates an 'ignore'.
		// Inputting 'false' is invalid.
		if ( to === null || to === false ) {
			return;
		}

		// If a formatted number was passed, attemt to decode it.
		if ( typeof to === 'number' ) {
			to = String(to);
		}

		to = options.format.from(to);

		// Request an update for all links if the value was invalid.
		// Do so too if setting the handle fails.
		if ( to !== false && !isNaN(to) ) {
			setHandle(handleNumber, scope_Spectrum.toStepping(to), false, false);
		}
	}

	// Set the slider value.
	function valueSet ( input, fireSetEvent ) {

		var values = asArray(input);
		var isInit = scope_Locations[0] === undefined;

		// Event fires by default
		fireSetEvent = (fireSetEvent === undefined ? true : !!fireSetEvent);

		values.forEach(setValue);

		// Animation is optional.
		// Make sure the initial values were set before using animated placement.
		if ( options.animate && !isInit ) {
			addClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);
		}

		// Now that all base values are set, apply constraints
		scope_HandleNumbers.forEach(function(handleNumber){
			setHandle(handleNumber, scope_Locations[handleNumber], true, false);
		});

		setZindex();

		scope_HandleNumbers.forEach(function(handleNumber){

			fireEvent('update', handleNumber);

			// Fire the event only for handles that received a new value, as per #579
			if ( values[handleNumber] !== null && fireSetEvent ) {
				fireEvent('set', handleNumber);
			}
		});
	}

	// Reset slider to initial values
	function valueReset ( fireSetEvent ) {
		valueSet(options.start, fireSetEvent);
	}

	// Get the slider value.
	function valueGet ( ) {

		var values = scope_Values.map(options.format.to);

		// If only one handle is used, return a single value.
		if ( values.length === 1 ){
			return values[0];
		}

		return values;
	}

	// Removes classes from the root and empties it.
	function destroy ( ) {

		for ( var key in options.cssClasses ) {
			if ( !options.cssClasses.hasOwnProperty(key) ) { continue; }
			removeClass(scope_Target, options.cssClasses[key]);
		}

		while (scope_Target.firstChild) {
			scope_Target.removeChild(scope_Target.firstChild);
		}

		delete scope_Target.noUiSlider;
	}

	// Get the current step size for the slider.
	function getCurrentStep ( ) {

		// Check all locations, map them to their stepping point.
		// Get the step point, then find it in the input list.
		return scope_Locations.map(function( location, index ){

			var nearbySteps = scope_Spectrum.getNearbySteps( location );
			var value = scope_Values[index];
			var increment = nearbySteps.thisStep.step;
			var decrement = null;

			// If the next value in this step moves into the next step,
			// the increment is the start of the next step - the current value
			if ( increment !== false ) {
				if ( value + increment > nearbySteps.stepAfter.startValue ) {
					increment = nearbySteps.stepAfter.startValue - value;
				}
			}


			// If the value is beyond the starting point
			if ( value > nearbySteps.thisStep.startValue ) {
				decrement = nearbySteps.thisStep.step;
			}

			else if ( nearbySteps.stepBefore.step === false ) {
				decrement = false;
			}

			// If a handle is at the start of a step, it always steps back into the previous step first
			else {
				decrement = value - nearbySteps.stepBefore.highestStep;
			}


			// Now, if at the slider edges, there is not in/decrement
			if ( location === 100 ) {
				increment = null;
			}

			else if ( location === 0 ) {
				decrement = null;
			}

			// As per #391, the comparison for the decrement step can have some rounding issues.
			var stepDecimals = scope_Spectrum.countStepDecimals();

			// Round per #391
			if ( increment !== null && increment !== false ) {
				increment = Number(increment.toFixed(stepDecimals));
			}

			if ( decrement !== null && decrement !== false ) {
				decrement = Number(decrement.toFixed(stepDecimals));
			}

			return [decrement, increment];
		});
	}

	// Attach an event to this slider, possibly including a namespace
	function bindEvent ( namespacedEvent, callback ) {
		scope_Events[namespacedEvent] = scope_Events[namespacedEvent] || [];
		scope_Events[namespacedEvent].push(callback);

		// If the event bound is 'update,' fire it immediately for all handles.
		if ( namespacedEvent.split('.')[0] === 'update' ) {
			scope_Handles.forEach(function(a, index){
				fireEvent('update', index);
			});
		}
	}

	// Undo attachment of event
	function removeEvent ( namespacedEvent ) {

		var event = namespacedEvent && namespacedEvent.split('.')[0];
		var namespace = event && namespacedEvent.substring(event.length);

		Object.keys(scope_Events).forEach(function( bind ){

			var tEvent = bind.split('.')[0],
				tNamespace = bind.substring(tEvent.length);

			if ( (!event || event === tEvent) && (!namespace || namespace === tNamespace) ) {
				delete scope_Events[bind];
			}
		});
	}

	// Updateable: margin, limit, padding, step, range, animate, snap
	function updateOptions ( optionsToUpdate, fireSetEvent ) {

		// Spectrum is created using the range, snap, direction and step options.
		// 'snap' and 'step' can be updated.
		// If 'snap' and 'step' are not passed, they should remain unchanged.
		var v = valueGet();

		var updateAble = ['margin', 'limit', 'padding', 'range', 'animate', 'snap', 'step', 'format'];

		// Only change options that we're actually passed to update.
		updateAble.forEach(function(name){
			if ( optionsToUpdate[name] !== undefined ) {
				originalOptions[name] = optionsToUpdate[name];
			}
		});

		var newOptions = testOptions(originalOptions);

		// Load new options into the slider state
		updateAble.forEach(function(name){
			if ( optionsToUpdate[name] !== undefined ) {
				options[name] = newOptions[name];
			}
		});

		scope_Spectrum = newOptions.spectrum;

		// Limit, margin and padding depend on the spectrum but are stored outside of it. (#677)
		options.margin = newOptions.margin;
		options.limit = newOptions.limit;
		options.padding = newOptions.padding;

		// Update pips, removes existing.
		if ( options.pips ) {
			pips(options.pips);
		}

		// Invalidate the current positioning so valueSet forces an update.
		scope_Locations = [];
		valueSet(optionsToUpdate.start || v, fireSetEvent);
	}

	// Throw an error if the slider was already initialized.
	if ( scope_Target.noUiSlider ) {
		throw new Error("noUiSlider (" + VERSION + "): Slider was already initialized.");
	}

	// Create the base element, initialise HTML and set classes.
	// Add handles and connect elements.
	addSlider(scope_Target);
	addElements(options.connect, scope_Base);

	scope_Self = {
		destroy: destroy,
		steps: getCurrentStep,
		on: bindEvent,
		off: removeEvent,
		get: valueGet,
		set: valueSet,
		reset: valueReset,
		// Exposed for unit testing, don't use this in your application.
		__moveHandles: function(a, b, c) { moveHandles(a, b, scope_Locations, c); },
		options: originalOptions, // Issue #600, #678
		updateOptions: updateOptions,
		target: scope_Target, // Issue #597
		removePips: removePips,
		pips: pips // Issue #594
	};

	// Attach user events.
	bindSliderEvents(options.events);

	// Use the public value method to set the start values.
	valueSet(options.start);

	if ( options.pips ) {
		pips(options.pips);
	}

	if ( options.tooltips ) {
		tooltips();
	}

	aria();

	return scope_Self;

}


	// Run the standard initializer
	function initialize ( target, originalOptions ) {

		if ( !target || !target.nodeName ) {
			throw new Error("noUiSlider (" + VERSION + "): create requires a single element, got: " + target);
		}

		// Test the options and create the slider environment;
		var options = testOptions( originalOptions, target );
		var api = closure( target, options, originalOptions );

		target.noUiSlider = api;

		return api;
	}

	// Use an object instead of a function for future expansibility;
	return {
		version: VERSION,
		create: initialize
	};

}));
/**
 * @fileoverview
 * - Using the 'QRCode for Javascript library'
 * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.
 * - this library has no dependencies.
 * 
 * @author davidshimjs
 * @see <a href="http://www.d-project.com/" target="_blank">http://www.d-project.com/</a>
 * @see <a href="http://jeromeetienne.github.com/jquery-qrcode/" target="_blank">http://jeromeetienne.github.com/jquery-qrcode/</a>
 */
var QRCode;

(function () {
	//---------------------------------------------------------------------
	// QRCode for JavaScript
	//
	// Copyright (c) 2009 Kazuhiko Arase
	//
	// URL: http://www.d-project.com/
	//
	// Licensed under the MIT license:
	//   http://www.opensource.org/licenses/mit-license.php
	//
	// The word "QR Code" is registered trademark of 
	// DENSO WAVE INCORPORATED
	//   http://www.denso-wave.com/qrcode/faqpatent-e.html
	//
	//---------------------------------------------------------------------
	function QR8bitByte(data) {
		this.mode = QRMode.MODE_8BIT_BYTE;
		this.data = data;
		this.parsedData = [];

		// Added to support UTF-8 Characters
		for (var i = 0, l = this.data.length; i < l; i++) {
			var byteArray = [];
			var code = this.data.charCodeAt(i);

			if (code > 0x10000) {
				byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);
				byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);
				byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);
				byteArray[3] = 0x80 | (code & 0x3F);
			} else if (code > 0x800) {
				byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);
				byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);
				byteArray[2] = 0x80 | (code & 0x3F);
			} else if (code > 0x80) {
				byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);
				byteArray[1] = 0x80 | (code & 0x3F);
			} else {
				byteArray[0] = code;
			}

			this.parsedData.push(byteArray);
		}

		this.parsedData = Array.prototype.concat.apply([], this.parsedData);

		if (this.parsedData.length != this.data.length) {
			this.parsedData.unshift(191);
			this.parsedData.unshift(187);
			this.parsedData.unshift(239);
		}
	}

	QR8bitByte.prototype = {
		getLength: function (buffer) {
			return this.parsedData.length;
		},
		write: function (buffer) {
			for (var i = 0, l = this.parsedData.length; i < l; i++) {
				buffer.put(this.parsedData[i], 8);
			}
		}
	};

	function QRCodeModel(typeNumber, errorCorrectLevel) {
		this.typeNumber = typeNumber;
		this.errorCorrectLevel = errorCorrectLevel;
		this.modules = null;
		this.moduleCount = 0;
		this.dataCache = null;
		this.dataList = [];
	}

	QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+","+col);}
	return this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}
	this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}
	if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}
	this.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}
	return pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}
	return qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}
	this.modules[r][6]=(r%2==0);}
	for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}
	this.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}
	for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}
	for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}
	for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}
	this.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}
	var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}
	this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}
	row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}
	var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}
	if(buffer.getLengthInBits()>totalDataCount*8){throw new Error("code length overflow. ("
	+buffer.getLengthInBits()
	+">"
	+totalDataCount*8
	+")");}
	if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}
	while(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}
	while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}
	buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}
	buffer.put(QRCodeModel.PAD1,8);}
	return QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}
	offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}
	var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}
	var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}
	for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}
	return data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}
	return((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}
	return(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}
	return digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}
	return a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode);}}else{throw new Error("type:"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}
	for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}
	if(r==0&&c==0){continue;}
	if(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}
	if(sameCount>5){lostPoint+=(3+sameCount-5);}}}
	for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}
	for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}
	for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}
	var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}
	var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error("glog("+n+")");}
	return QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}
	while(n>=256){n-=255;}
	return QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}
	for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}
	for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}
	function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+"/"+shift);}
	var offset=0;while(offset<num.length&&num[offset]==0){offset++;}
	this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}
	QRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}
	return new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}
	var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}
	for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}
	return new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}
	QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);}
	var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}
	return list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}
	QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}
	if(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}
	this.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];
	
	function _isSupportCanvas() {
		return typeof CanvasRenderingContext2D != "undefined";
	}
	
	// android 2.x doesn't support Data-URI spec
	function _getAndroid() {
		var android = false;
		var sAgent = navigator.userAgent;
		
		if (/android/i.test(sAgent)) { // android
			android = true;
			var aMat = sAgent.toString().match(/android ([0-9]\.[0-9])/i);
			
			if (aMat && aMat[1]) {
				android = parseFloat(aMat[1]);
			}
		}
		
		return android;
	}
	
	var svgDrawer = (function() {

		var Drawing = function (el, htOption) {
			this._el = el;
			this._htOption = htOption;
		};

		Drawing.prototype.draw = function (oQRCode) {
			var _htOption = this._htOption;
			var _el = this._el;
			var nCount = oQRCode.getModuleCount();
			var nWidth = Math.floor(_htOption.width / nCount);
			var nHeight = Math.floor(_htOption.height / nCount);

			this.clear();

			function makeSVG(tag, attrs) {
				var el = document.createElementNS('http://www.w3.org/2000/svg', tag);
				for (var k in attrs)
					if (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);
				return el;
			}

			var svg = makeSVG("svg" , {'viewBox': '0 0 ' + String(nCount) + " " + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});
			svg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
			_el.appendChild(svg);

			svg.appendChild(makeSVG("rect", {"fill": _htOption.colorLight, "width": "100%", "height": "100%"}));
			svg.appendChild(makeSVG("rect", {"fill": _htOption.colorDark, "width": "1", "height": "1", "id": "template"}));

			for (var row = 0; row < nCount; row++) {
				for (var col = 0; col < nCount; col++) {
					if (oQRCode.isDark(row, col)) {
						var child = makeSVG("use", {"x": String(col), "y": String(row)});
						child.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template")
						svg.appendChild(child);
					}
				}
			}
		};
		Drawing.prototype.clear = function () {
			while (this._el.hasChildNodes())
				this._el.removeChild(this._el.lastChild);
		};
		return Drawing;
	})();

	var useSVG = document.documentElement.tagName.toLowerCase() === "svg";

	// Drawing in DOM by using Table tag
	var Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {
		var Drawing = function (el, htOption) {
			this._el = el;
			this._htOption = htOption;
		};
			
		/**
		 * Draw the QRCode
		 * 
		 * @param {QRCode} oQRCode
		 */
		Drawing.prototype.draw = function (oQRCode) {
            var _htOption = this._htOption;
            var _el = this._el;
			var nCount = oQRCode.getModuleCount();
			var nWidth = Math.floor(_htOption.width / nCount);
			var nHeight = Math.floor(_htOption.height / nCount);
			var aHTML = ['<table style="border:0;border-collapse:collapse;">'];
			
			for (var row = 0; row < nCount; row++) {
				aHTML.push('<tr>');
				
				for (var col = 0; col < nCount; col++) {
					aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';"></td>');
				}
				
				aHTML.push('</tr>');
			}
			
			aHTML.push('</table>');
			_el.innerHTML = aHTML.join('');
			
			// Fix the margin values as real size.
			var elTable = _el.childNodes[0];
			var nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;
			var nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;
			
			if (nLeftMarginTable > 0 && nTopMarginTable > 0) {
				elTable.style.margin = nTopMarginTable + "px " + nLeftMarginTable + "px";	
			}
		};
		
		/**
		 * Clear the QRCode
		 */
		Drawing.prototype.clear = function () {
			this._el.innerHTML = '';
		};
		
		return Drawing;
	})() : (function () { // Drawing in Canvas
		function _onMakeImage() {
			this._elImage.src = this._elCanvas.toDataURL("image/png");
			this._elImage.style.display = "block";
			this._elCanvas.style.display = "none";			
		}
		
		// Android 2.1 bug workaround
		// http://code.google.com/p/android/issues/detail?id=5141
		if (this._android && this._android <= 2.1) {
	    	var factor = 1 / window.devicePixelRatio;
	        var drawImage = CanvasRenderingContext2D.prototype.drawImage; 
	    	CanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {
	    		if (("nodeName" in image) && /img/i.test(image.nodeName)) {
		        	for (var i = arguments.length - 1; i >= 1; i--) {
		            	arguments[i] = arguments[i] * factor;
		        	}
	    		} else if (typeof dw == "undefined") {
	    			arguments[1] *= factor;
	    			arguments[2] *= factor;
	    			arguments[3] *= factor;
	    			arguments[4] *= factor;
	    		}
	    		
	        	drawImage.apply(this, arguments); 
	    	};
		}
		
		/**
		 * Check whether the user's browser supports Data URI or not
		 * 
		 * @private
		 * @param {Function} fSuccess Occurs if it supports Data URI
		 * @param {Function} fFail Occurs if it doesn't support Data URI
		 */
		function _safeSetDataURI(fSuccess, fFail) {
            var self = this;
            self._fFail = fFail;
            self._fSuccess = fSuccess;

            // Check it just once
            if (self._bSupportDataURI === null) {
                var el = document.createElement("img");
                var fOnError = function() {
                    self._bSupportDataURI = false;

                    if (self._fFail) {
                        self._fFail.call(self);
                    }
                };
                var fOnSuccess = function() {
                    self._bSupportDataURI = true;

                    if (self._fSuccess) {
                        self._fSuccess.call(self);
                    }
                };

                el.onabort = fOnError;
                el.onerror = fOnError;
                el.onload = fOnSuccess;
                el.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="; // the Image contains 1px data.
                return;
            } else if (self._bSupportDataURI === true && self._fSuccess) {
                self._fSuccess.call(self);
            } else if (self._bSupportDataURI === false && self._fFail) {
                self._fFail.call(self);
            }
		};
		
		/**
		 * Drawing QRCode by using canvas
		 * 
		 * @constructor
		 * @param {HTMLElement} el
		 * @param {Object} htOption QRCode Options 
		 */
		var Drawing = function (el, htOption) {
    		this._bIsPainted = false;
    		this._android = _getAndroid();
		
			this._htOption = htOption;
			this._elCanvas = document.createElement("canvas");
			this._elCanvas.width = htOption.width;
			this._elCanvas.height = htOption.height;
			el.appendChild(this._elCanvas);
			this._el = el;
			this._oContext = this._elCanvas.getContext("2d");
			this._bIsPainted = false;
			this._elImage = document.createElement("img");
			this._elImage.alt = "Scan me!";
			this._elImage.style.display = "none";
			this._el.appendChild(this._elImage);
			this._bSupportDataURI = null;
		};
			
		/**
		 * Draw the QRCode
		 * 
		 * @param {QRCode} oQRCode 
		 */
		Drawing.prototype.draw = function (oQRCode) {
            var _elImage = this._elImage;
            var _oContext = this._oContext;
            var _htOption = this._htOption;
            
			var nCount = oQRCode.getModuleCount();
			var nWidth = _htOption.width / nCount;
			var nHeight = _htOption.height / nCount;
			var nRoundedWidth = Math.round(nWidth);
			var nRoundedHeight = Math.round(nHeight);

			_elImage.style.display = "none";
			this.clear();
			
			for (var row = 0; row < nCount; row++) {
				for (var col = 0; col < nCount; col++) {
					var bIsDark = oQRCode.isDark(row, col);
					var nLeft = col * nWidth;
					var nTop = row * nHeight;
					_oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;
					_oContext.lineWidth = 1;
					_oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;					
					_oContext.fillRect(nLeft, nTop, nWidth, nHeight);
					
					//    
					_oContext.strokeRect(
						Math.floor(nLeft) + 0.5,
						Math.floor(nTop) + 0.5,
						nRoundedWidth,
						nRoundedHeight
					);
					
					_oContext.strokeRect(
						Math.ceil(nLeft) - 0.5,
						Math.ceil(nTop) - 0.5,
						nRoundedWidth,
						nRoundedHeight
					);
				}
			}
			
			this._bIsPainted = true;
		};
			
		/**
		 * Make the image from Canvas if the browser supports Data URI.
		 */
		Drawing.prototype.makeImage = function () {
			if (this._bIsPainted) {
				_safeSetDataURI.call(this, _onMakeImage);
			}
		};
			
		/**
		 * Return whether the QRCode is painted or not
		 * 
		 * @return {Boolean}
		 */
		Drawing.prototype.isPainted = function () {
			return this._bIsPainted;
		};
		
		/**
		 * Clear the QRCode
		 */
		Drawing.prototype.clear = function () {
			this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);
			this._bIsPainted = false;
		};
		
		/**
		 * @private
		 * @param {Number} nNumber
		 */
		Drawing.prototype.round = function (nNumber) {
			if (!nNumber) {
				return nNumber;
			}
			
			return Math.floor(nNumber * 1000) / 1000;
		};
		
		return Drawing;
	})();
	
	/**
	 * Get the type by string length
	 * 
	 * @private
	 * @param {String} sText
	 * @param {Number} nCorrectLevel
	 * @return {Number} type
	 */
	function _getTypeNumber(sText, nCorrectLevel) {			
		var nType = 1;
		var length = _getUTF8Length(sText);
		
		for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {
			var nLimit = 0;
			
			switch (nCorrectLevel) {
				case QRErrorCorrectLevel.L :
					nLimit = QRCodeLimitLength[i][0];
					break;
				case QRErrorCorrectLevel.M :
					nLimit = QRCodeLimitLength[i][1];
					break;
				case QRErrorCorrectLevel.Q :
					nLimit = QRCodeLimitLength[i][2];
					break;
				case QRErrorCorrectLevel.H :
					nLimit = QRCodeLimitLength[i][3];
					break;
			}
			
			if (length <= nLimit) {
				break;
			} else {
				nType++;
			}
		}
		
		if (nType > QRCodeLimitLength.length) {
			throw new Error("Too long data");
		}
		
		return nType;
	}

	function _getUTF8Length(sText) {
		var replacedText = encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g, 'a');
		return replacedText.length + (replacedText.length != sText ? 3 : 0);
	}
	
	/**
	 * @class QRCode
	 * @constructor
	 * @example 
	 * new QRCode(document.getElementById("test"), "http://jindo.dev.naver.com/collie");
	 *
	 * @example
	 * var oQRCode = new QRCode("test", {
	 *    text : "http://naver.com",
	 *    width : 128,
	 *    height : 128
	 * });
	 * 
	 * oQRCode.clear(); // Clear the QRCode.
	 * oQRCode.makeCode("http://map.naver.com"); // Re-create the QRCode.
	 *
	 * @param {HTMLElement|String} el target element or 'id' attribute of element.
	 * @param {Object|String} vOption
	 * @param {String} vOption.text QRCode link data
	 * @param {Number} [vOption.width=256]
	 * @param {Number} [vOption.height=256]
	 * @param {String} [vOption.colorDark="#000000"]
	 * @param {String} [vOption.colorLight="#ffffff"]
	 * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H] 
	 */
	QRCode = function (el, vOption) {
		this._htOption = {
			width : 256, 
			height : 256,
			typeNumber : 4,
			colorDark : "#000000",
			colorLight : "#ffffff",
			correctLevel : QRErrorCorrectLevel.H
		};
		
		if (typeof vOption === 'string') {
			vOption	= {
				text : vOption
			};
		}
		
		// Overwrites options
		if (vOption) {
			for (var i in vOption) {
				this._htOption[i] = vOption[i];
			}
		}
		
		if (typeof el == "string") {
			el = document.getElementById(el);
		}

		if (this._htOption.useSVG) {
			Drawing = svgDrawer;
		}
		
		this._android = _getAndroid();
		this._el = el;
		this._oQRCode = null;
		this._oDrawing = new Drawing(this._el, this._htOption);
		
		if (this._htOption.text) {
			this.makeCode(this._htOption.text);	
		}
	};
	
	/**
	 * Make the QRCode
	 * 
	 * @param {String} sText link data
	 */
	QRCode.prototype.makeCode = function (sText) {
		this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);
		this._oQRCode.addData(sText);
		this._oQRCode.make();
		this._el.title = sText;
		this._oDrawing.draw(this._oQRCode);			
		this.makeImage();
	};
	
	/**
	 * Make the Image from Canvas element
	 * - It occurs automatically
	 * - Android below 3 doesn't support Data-URI spec.
	 * 
	 * @private
	 */
	QRCode.prototype.makeImage = function () {
		if (typeof this._oDrawing.makeImage == "function" && (!this._android || this._android >= 3)) {
			this._oDrawing.makeImage();
		}
	};
	
	/**
	 * Clear the QRCode
	 */
	QRCode.prototype.clear = function () {
		this._oDrawing.clear();
	};
	
	/**
	 * @name QRCode.CorrectLevel
	 */
	QRCode.CorrectLevel = QRErrorCorrectLevel;
})();
/**
 * TinyAnimate
 *  version 0.3.0
 *
 * Source:  https://github.com/branneman/TinyAnimate
 * Author:  Bran van der Meer <branmovic@gmail.com> (http://bran.name/)
 * License: MIT
 *
 * Functions:
 *  TinyAnimate.animate(from, to, duration, update, easing, done)
 *  TinyAnimate.animateCSS(element, property, unit, from, to, duration, easing, done)
 *  TinyAnimate.cancel(animation)
 *
 * Parameters:
 *  element   HTMLElement        A dom node
 *  property  string             Property name, as available in element.style, i.e. 'borderRadius', not 'border-radius'
 *  unit      string             Property unit, like 'px'
 *  from      int                Property value to animate from
 *  to        int                Property value to animate to
 *  duration  int                Duration in milliseconds
 *  update    function           Function to implement updating the DOM, get's called with a value between `from` and `to`
 *  easing    string | function  Optional: A string when the easing function is available in TinyAnimate.easings,
 *                                or a function with the signature: function(t, b, c, d) {...}
 *  done      function           Optional: To be executed when the animation has completed.
 *
 * Returns:
 *  animation object             Animation object that can be canceled.
 */

/**
 * Universal Module Dance
 *  config: CommonJS Strict, exports Global, supports circular dependencies
 *  https://github.com/umdjs/umd/
 */
(function(root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['exports'], function(exports) {
            factory((root.TinyAnimate = exports));
        });
    } else if (typeof exports === 'object') {
        factory(exports);
    } else {
        factory((root.TinyAnimate = {}));
    }
}(this, function(exports) {

    /**
     * TinyAnimate.animate()
     */
    exports.animate = function(from, to, duration, update, easing, done) {

        // Early bail out if called incorrectly
        if (typeof from !== 'number' ||
            typeof to !== 'number' ||
            typeof duration !== 'number' ||
            typeof update !== 'function')
            return;

        // Determine easing
        if (typeof easing === 'string' && easings[easing]) {
            easing = easings[easing];
        }
        if (typeof easing !== 'function') {
            easing = easings.linear;
        }

        // Create mock done() function if necessary
        if (typeof done !== 'function') {
            done = function() {};
        }

        // Pick implementation (requestAnimationFrame | setTimeout)
        var rAF = window.requestAnimationFrame || function(callback) {
            window.setTimeout(callback, 1000 / 60);
        };

        // Animation loop
        var canceled = false;
        var change = to - from;
        function loop(timestamp) {
            if (canceled) {
                return;
            }
            var time = (timestamp || +new Date()) - start;
            if (time >= 0) {
                update(easing(time, from, change, duration));
            }
            if (time >= 0 && time >= duration) {
                update(to);
                done();
            } else {
                rAF(loop);
            }
        }
        update(from);

        // Start animation loop
        var start = window.performance && window.performance.now ? window.performance.now() : +new Date();

        rAF(loop);

        return {
            cancel: function() {
                canceled = true;
            }
        };
    };

    /**
     * TinyAnimate.animateCSS()
     *  Shortcut method for animating css properties
     */
    exports.animateCSS = function(element, property, unit, from, to, duration, easing, done) {

        var update = function(value) {
            element.style[property] = value + unit;
        };
        return exports.animate(from, to, duration, update, easing, done);
    };

    /**
     * TinyAnimate.cancel()
     *  Method for canceling animations
     */
    exports.cancel = function(animation) {
        if (!animation) {
            return;
        }
        animation.cancel();
    };

    /**
     * TinyAnimate.easings
     *  Adapted from jQuery Easing
     */
    var easings = exports.easings = {};
    easings.linear = function(t, b, c, d) {
        return c * t / d + b;
    };
    easings.easeInQuad = function(t, b, c, d) {
        return c * (t /= d) * t + b;
    };
    easings.easeOutQuad = function(t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    };
    easings.easeInOutQuad = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    };
    easings.easeInCubic = function(t, b, c, d) {
        return c * (t /= d) * t * t + b;
    };
    easings.easeOutCubic = function(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    };
    easings.easeInOutCubic = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    };
    easings.easeInQuart = function(t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    };
    easings.easeOutQuart = function(t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    };
    easings.easeInOutQuart = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    };
    easings.easeInQuint = function(t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    };
    easings.easeOutQuint = function(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    };
    easings.easeInOutQuint = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    };
    easings.easeInSine = function(t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    };
    easings.easeOutSine = function(t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    };
    easings.easeInOutSine = function(t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    };
    easings.easeInExpo = function(t, b, c, d) {
        return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    };
    easings.easeOutExpo = function(t, b, c, d) {
        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    };
    easings.easeInOutExpo = function(t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    };
    easings.easeInCirc = function(t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    };
    easings.easeOutCirc = function(t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    };
    easings.easeInOutCirc = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    };
    easings.easeInElastic = function(t, b, c, d) {
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        }
        else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    };
    easings.easeOutElastic = function(t, b, c, d) {
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        }
        else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
    };
    easings.easeInOutElastic = function(t, b, c, d) {
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (!p) p = d * (.3 * 1.5);
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        }
        else var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    };
    easings.easeInBack = function(t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    };
    easings.easeOutBack = function(t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    };
    easings.easeInOutBack = function(t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
    };
    easings.easeInBounce = function(t, b, c, d) {
        return c - easings.easeOutBounce(d - t, 0, c, d) + b;
    };
    easings.easeOutBounce = function(t, b, c, d) {
        if ((t /= d) < (1 / 2.75)) {
            return c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
    };
    easings.easeInOutBounce = function(t, b, c, d) {
        if (t < d / 2) return easings.easeInBounce(t * 2, 0, c, d) * .5 + b;
        return easings.easeOutBounce(t * 2 - d, 0, c, d) * .5 + c * .5 + b;
    };

}));

(function (global, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['exports', 'module'], factory);
    } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {
        factory(exports, module);
    } else {
        var mod = {
            exports: {}
        };
        factory(mod.exports, mod);
        global.Impetus = mod.exports;
    }
})(this, function (exports, module) {
    'use strict';

    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

    var stopThresholdDefault = 0.3;
    var bounceDeceleration = 0.04;
    var bounceAcceleration = 0.11;

    // fixes weird safari 10 bug where preventDefault is prevented
    // @see https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356
    window.addEventListener('touchmove', function () {});

    var Impetus = function Impetus(_ref) {
        var _ref$source = _ref.source;
        var sourceEl = _ref$source === undefined ? document : _ref$source;
        var updateCallback = _ref.update;
        var _ref$multiplier = _ref.multiplier;
        var multiplier = _ref$multiplier === undefined ? 1 : _ref$multiplier;
        var _ref$friction = _ref.friction;
        var friction = _ref$friction === undefined ? 0.92 : _ref$friction;
        var initialValues = _ref.initialValues;
        var boundX = _ref.boundX;
        var boundY = _ref.boundY;
        var _ref$bounce = _ref.bounce;
        var bounce = _ref$bounce === undefined ? true : _ref$bounce;

        _classCallCheck(this, Impetus);

        var boundXmin, boundXmax, boundYmin, boundYmax, pointerLastX, pointerLastY, pointerCurrentX, pointerCurrentY, pointerId, decVelX, decVelY;
        var targetX = 0;
        var targetY = 0;
        var stopThreshold = stopThresholdDefault * multiplier;
        var ticking = false;
        var pointerActive = false;
        var paused = false;
        var decelerating = false;
        var trackingPoints = [];

        /**
         * Initialize instance
         */
        (function init() {
            sourceEl = typeof sourceEl === 'string' ? document.querySelector(sourceEl) : sourceEl;
            if (!sourceEl) {
                throw new Error('IMPETUS: source not found.');
            }

            if (!updateCallback) {
                throw new Error('IMPETUS: update function not defined.');
            }

            if (initialValues) {
                if (initialValues[0]) {
                    targetX = initialValues[0];
                }
                if (initialValues[1]) {
                    targetY = initialValues[1];
                }
                callUpdateCallback();
            }

            // Initialize bound values
            if (boundX) {
                boundXmin = boundX[0];
                boundXmax = boundX[1];
            }
            if (boundY) {
                boundYmin = boundY[0];
                boundYmax = boundY[1];
            }

            sourceEl.addEventListener('touchstart', onDown);
            sourceEl.addEventListener('mousedown', onDown);
        })();

        /**
         * In edge cases where you may need to
         * reinstanciate Impetus on the same sourceEl
         * this will remove the previous event listeners
         */
        this.destroy = function () {
            sourceEl.removeEventListener('touchstart', onDown);
            sourceEl.removeEventListener('mousedown', onDown);
            // however it won't "destroy" a reference
            // to instance if you'd like to do that
            // it returns null as a convinience.
            // ex: `instance = instance.destroy();`
            return null;
        };

        /**
         * Disable movement processing
         * @public
         */
        this.pause = function () {
            pointerActive = false;
            paused = true;
        };

        /**
         * Enable movement processing
         * @public
         */
        this.resume = function () {
            paused = false;
        };

        /**
         * Update the current x and y values
         * @public
         * @param {Number} x
         * @param {Number} y
         */
        this.setValues = function (x, y) {
            if (typeof x === 'number') {
                targetX = x;
            }
            if (typeof y === 'number') {
                targetY = y;
            }
        };

        /**
         * Update the multiplier value
         * @public
         * @param {Number} val
         */
        this.setMultiplier = function (val) {
            multiplier = val;
            stopThreshold = stopThresholdDefault * multiplier;
        };

        /**
         * Update boundX value
         * @public
         * @param {Number[]} boundX
         */
        this.setBoundX = function (boundX) {
            boundXmin = boundX[0];
            boundXmax = boundX[1];
        };

        /**
         * Update boundY value
         * @public
         * @param {Number[]} boundY
         */
        this.setBoundY = function (boundY) {
            boundYmin = boundY[0];
            boundYmax = boundY[1];
        };

        /**
         * Executes the update function
         */
        function callUpdateCallback() {
            updateCallback.call(sourceEl, targetX, targetY);
        }

        /**
         * Creates a custom normalized event object from touch and mouse events
         * @param  {Event} ev
         * @returns {Object} with x, y, and id properties
         */
        function normalizeEvent(ev) {
            if (ev.type === 'touchmove' || ev.type === 'touchstart' || ev.type === 'touchend') {
                var touch = ev.targetTouches[0] || ev.changedTouches[0];
                return {
                    x: touch.clientX,
                    y: touch.clientY,
                    id: touch.identifier
                };
            } else {
                // mouse events
                return {
                    x: ev.clientX,
                    y: ev.clientY,
                    id: null
                };
            }
        }

        /**
         * Initializes movement tracking
         * @param  {Object} ev Normalized event
         */
        function onDown(ev) {
            var event = normalizeEvent(ev);
            if (!pointerActive && !paused) {
                pointerActive = true;
                decelerating = false;
                pointerId = event.id;

                pointerLastX = pointerCurrentX = event.x;
                pointerLastY = pointerCurrentY = event.y;
                trackingPoints = [];
                addTrackingPoint(pointerLastX, pointerLastY);

                // @see https://developers.google.com/web/updates/2017/01/scrolling-intervention
                document.addEventListener('touchmove', onMove, getPassiveSupported() ? { passive: false } : false);
                document.addEventListener('touchend', onUp);
                document.addEventListener('touchcancel', stopTracking);
                document.addEventListener('mousemove', onMove, getPassiveSupported() ? { passive: false } : false);
                document.addEventListener('mouseup', onUp);
            }
        }

        /**
         * Handles move events
         * @param  {Object} ev Normalized event
         */
        function onMove(ev) {
            ev.preventDefault();
            var event = normalizeEvent(ev);

            if (pointerActive && event.id === pointerId) {
                pointerCurrentX = event.x;
                pointerCurrentY = event.y;
                addTrackingPoint(pointerLastX, pointerLastY);
                requestTick();
            }
        }

        /**
         * Handles up/end events
         * @param {Object} ev Normalized event
         */
        function onUp(ev) {
            var event = normalizeEvent(ev);

            if (pointerActive && event.id === pointerId) {
                stopTracking();
            }
        }

        /**
         * Stops movement tracking, starts animation
         */
        function stopTracking() {
            pointerActive = false;
            addTrackingPoint(pointerLastX, pointerLastY);
            startDecelAnim();

            document.removeEventListener('touchmove', onMove);
            document.removeEventListener('touchend', onUp);
            document.removeEventListener('touchcancel', stopTracking);
            document.removeEventListener('mouseup', onUp);
            document.removeEventListener('mousemove', onMove);
        }

        /**
         * Records movement for the last 100ms
         * @param {number} x
         * @param {number} y [description]
         */
        function addTrackingPoint(x, y) {
            var time = Date.now();
            while (trackingPoints.length > 0) {
                if (time - trackingPoints[0].time <= 100) {
                    break;
                }
                trackingPoints.shift();
            }

            trackingPoints.push({ x: x, y: y, time: time });
        }

        /**
         * Calculate new values, call update function
         */
        function updateAndRender() {
            var pointerChangeX = pointerCurrentX - pointerLastX;
            var pointerChangeY = pointerCurrentY - pointerLastY;

            targetX += pointerChangeX * multiplier;
            targetY += pointerChangeY * multiplier;

            if (bounce) {
                var diff = checkBounds();
                if (diff.x !== 0) {
                    targetX -= pointerChangeX * dragOutOfBoundsMultiplier(diff.x) * multiplier;
                }
                if (diff.y !== 0) {
                    targetY -= pointerChangeY * dragOutOfBoundsMultiplier(diff.y) * multiplier;
                }
            } else {
                checkBounds(true);
            }

            callUpdateCallback();

            pointerLastX = pointerCurrentX;
            pointerLastY = pointerCurrentY;
            ticking = false;
        }

        /**
         * Returns a value from around 0.5 to 1, based on distance
         * @param {Number} val
         */
        function dragOutOfBoundsMultiplier(val) {
            return 0.000005 * Math.pow(val, 2) + 0.0001 * val + 0.55;
        }

        /**
         * prevents animating faster than current framerate
         */
        function requestTick() {
            if (!ticking) {
                requestAnimFrame(updateAndRender);
            }
            ticking = true;
        }

        /**
         * Determine position relative to bounds
         * @param {Boolean} restrict Whether to restrict target to bounds
         */
        function checkBounds(restrict) {
            var xDiff = 0;
            var yDiff = 0;

            if (boundXmin !== undefined && targetX < boundXmin) {
                xDiff = boundXmin - targetX;
            } else if (boundXmax !== undefined && targetX > boundXmax) {
                xDiff = boundXmax - targetX;
            }

            if (boundYmin !== undefined && targetY < boundYmin) {
                yDiff = boundYmin - targetY;
            } else if (boundYmax !== undefined && targetY > boundYmax) {
                yDiff = boundYmax - targetY;
            }

            if (restrict) {
                if (xDiff !== 0) {
                    targetX = xDiff > 0 ? boundXmin : boundXmax;
                }
                if (yDiff !== 0) {
                    targetY = yDiff > 0 ? boundYmin : boundYmax;
                }
            }

            return {
                x: xDiff,
                y: yDiff,
                inBounds: xDiff === 0 && yDiff === 0
            };
        }

        /**
         * Initialize animation of values coming to a stop
         */
        function startDecelAnim() {
            var firstPoint = trackingPoints[0];
            var lastPoint = trackingPoints[trackingPoints.length - 1];

            var xOffset = lastPoint.x - firstPoint.x;
            var yOffset = lastPoint.y - firstPoint.y;
            var timeOffset = lastPoint.time - firstPoint.time;

            var D = timeOffset / 15 / multiplier;

            decVelX = xOffset / D || 0; // prevent NaN
            decVelY = yOffset / D || 0;

            var diff = checkBounds();

            if (Math.abs(decVelX) > 1 || Math.abs(decVelY) > 1 || !diff.inBounds) {
                decelerating = true;
                requestAnimFrame(stepDecelAnim);
            }
        }

        /**
         * Animates values slowing down
         */
        function stepDecelAnim() {
            if (!decelerating) {
                return;
            }

            decVelX *= friction;
            decVelY *= friction;

            targetX += decVelX;
            targetY += decVelY;

            var diff = checkBounds();

            if (Math.abs(decVelX) > stopThreshold || Math.abs(decVelY) > stopThreshold || !diff.inBounds) {

                if (bounce) {
                    var reboundAdjust = 2.5;

                    if (diff.x !== 0) {
                        if (diff.x * decVelX <= 0) {
                            decVelX += diff.x * bounceDeceleration;
                        } else {
                            var adjust = diff.x > 0 ? reboundAdjust : -reboundAdjust;
                            decVelX = (diff.x + adjust) * bounceAcceleration;
                        }
                    }
                    if (diff.y !== 0) {
                        if (diff.y * decVelY <= 0) {
                            decVelY += diff.y * bounceDeceleration;
                        } else {
                            var adjust = diff.y > 0 ? reboundAdjust : -reboundAdjust;
                            decVelY = (diff.y + adjust) * bounceAcceleration;
                        }
                    }
                } else {
                    if (diff.x !== 0) {
                        if (diff.x > 0) {
                            targetX = boundXmin;
                        } else {
                            targetX = boundXmax;
                        }
                        decVelX = 0;
                    }
                    if (diff.y !== 0) {
                        if (diff.y > 0) {
                            targetY = boundYmin;
                        } else {
                            targetY = boundYmax;
                        }
                        decVelY = 0;
                    }
                }

                callUpdateCallback();

                requestAnimFrame(stepDecelAnim);
            } else {
                decelerating = false;
            }
        }
    }

    /**
     * @see http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
     */
    ;

    module.exports = Impetus;
    var requestAnimFrame = (function () {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {
            window.setTimeout(callback, 1000 / 60);
        };
    })();

    function getPassiveSupported() {
        var passiveSupported = false;

        try {
            var options = Object.defineProperty({}, "passive", {
                get: function get() {
                    passiveSupported = true;
                }
            });

            window.addEventListener("test", null, options);
        } catch (err) {}

        getPassiveSupported = function () {
            return passiveSupported;
        };
        return passiveSupported;
    }
});

//Template HTML
var vsm_template = '<div id="vsm_modal_base" class="vsm-modal vsm-hide vsm-fade" style="z-index: 9999;" tabindex="-1" role="dialog"> <div class="vsm-modal-dialog"> <div class="vsm-modal-content"> <div class="vsm-modal-header"> <button type="button" class="vsm-close"> </button> </div><div class="vsm-modal-body vsm-option-body vsm-list-body"> <a href="javascript:void(0);" class="vsm-back-link vsm-back-step"> <i class="vsm-back-arrow"></i> </a> <div class="vsm-in-progress"> <p class="vsm-header vsm-center"></p><div class="vsm-line-step center-piece vsm-columns"> </div><div class="vsm-list-container"> <i class="vsm-loaderIcon" alt="Loading options"></i> </div></div><div class="vsm-final"> <div class="center-piece vsm-line-step vsm-columns vehicle-result-wrap"> <div class="vsm-column-2 vsm-before"></div><div class="vsm-column-2 no-style"><i class="dot-style dot-before active"></i></div><p class="vehicle-result-name"></p><p class="vehicle-result-size"></p></div> <div class="center-piece vehicle-image-wrap"> <div style="position: relative; text-align: center; min-height: 120px;"> <i class="vsm-loaderIcon" alt="Loading an image of your vehicle"></i> <img src="" alt="" class="vsm-vehicle-display" style="display: none;"> </div><a href="javascript:void(0);" class="vsm-btn vsm-btn-gray vsm-full-width vsm-find"></a> </div></div></div></div></div></div>';

var _vsmModalIDCounter = 0;
function RideStylerVehicleSelectionModal(options) {
    var infoArray = [], //Keep track of selected options info
    dataArray = [], //Keep track of selected options data (data sent to Vehicle/Select endpoint)
    modalArray = [], //Keep track of modal screen generated by this instance
    disCountinued = false; //Decide whether or not continue to next modal screen

    //Similar to $.extend
    function extend(out) {
        out = out || {};

        for (var i = 1; i < arguments.length; i++) {
            if (!arguments[i])
                continue;

            for (var key in arguments[i]) {
                if (arguments[i].hasOwnProperty(key))
                out[key] = arguments[i][key];
            }
        }

        return out;
    };

    // Extend default settings
    options = extend({
        ConfirmButtonText: 'Confirm Vehicle',
        GroupOptions: false,
        IncludeOETireOption: false,
        YearScreenColumns: 3,
        MakeScreenColumns: 2,

        container: document.body,

        afterBackClicked: null,
        afterOptionSelected: null,
        callback: null
    }, options);

    //Check if transition is supported, Boolean
    var transitionSupport = (function(){
        var thisBody = document.body || document.documentElement,
        thisStyle = thisBody.style,
        support = thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.OTransition !== undefined || thisStyle.transition !== undefined;

        return support;
    })();

    // add onTransitionEndOnce to HTMLElement
    (function() {
        var i,
        el = document.createElement('div'),
        transitions = {
            'transition':'transitionend',
            'OTransition':'otransitionend',
            'MozTransition':'transitionend',
            'WebkitTransition':'webkitTransitionEnd'
        };

        var transitionEnd = '';
        for (i in transitions) {
            if (transitions.hasOwnProperty(i) && el.style[i] !== undefined) {
                transitionEnd = transitions[i];
                break;
            }
        }

        HTMLElement.prototype.onTransitionEndOnce = function(callback) {
            if (transitionEnd === '') {
                callback();
                return this;
            }
            var transitionEndWrap = function(e) {
                callback();
                e.target.removeEventListener(e.type, transitionEndWrap);
            };
            this.addEventListener(transitionEnd, transitionEndWrap, false);
            return this;
        };
    }());

    /**
     * Add certain class to elements
     * @private
     * @param  {Element|[Element]} elements - Element(s) to search
     * @param  {String}  myClass - Class name to add
     * @return void
     */
    function addClass(elements, myClass) {
        if (!elements) { return; }
        if (typeof(elements) === 'string') elements = document.querySelectorAll(elements);
        else if (elements.tagName) elements=[elements];
        // add class to all chosen elements
        for (var i=0; i<elements.length; i++) {
            if (elements[i].className.trim() == '') elements[i].className = myClass;
            else if ((' '+elements[i].className+' ').indexOf(' '+myClass+' ') < 0) {
                // add class
                elements[i].className += ' ' + myClass;
            }
        }
    }

    /**
     * Remove certain class from elements
     * @private
     * @param  {Element|[Element]} elements - Element(s) to search
     * @param  {String}  myClass - Class name to match against
     * @return void
     */
    function removeClass(elements, myClass) {
        if (!elements) { return; }
        if (typeof(elements) === 'string') elements = document.querySelectorAll(elements);
        else if (elements.tagName) elements=[elements];
        var reg1 = new RegExp(' '+myClass+' ','g');
        var reg2 = new RegExp('(^)'+myClass+'($| )','g');
        var reg3 = new RegExp('(^| )'+myClass+'($)','g');
        // remove class from all chosen elements
        for (var i=0; i<elements.length; i++) {
            elements[i].className = elements[i].className.replace(reg1,' ');
            elements[i].className = elements[i].className.replace(reg2,'');
            elements[i].className = elements[i].className.replace(reg3,'');

            if (elements[i].className.trim() == '') elements[i].removeAttribute('class');
        }
    }

    /**
     * Get the closest matching element up the DOM tree.
     * @private
     * @param  {Element} element - Starting element
     * @param  {String}  selector Selector to match against
     * @return {Boolean|Element}  Returns null if no match found
     */
    function getClosest(element, selector) {
        // Element.matches() polyfill
        if (!Element.prototype.matches) {
            Element.prototype.matches =
            Element.prototype.matchesSelector ||
            Element.prototype.mozMatchesSelector ||
            Element.prototype.msMatchesSelector ||
            Element.prototype.oMatchesSelector ||
            Element.prototype.webkitMatchesSelector ||
            function(s) {
                var matches = (this.document || this.ownerDocument).querySelectorAll(s),
                    i = matches.length;
                while (--i >= 0 && matches.item(i) !== this) {}
                return i > -1;
            };
        }

        // Get closest match
        for ( ; element && element !== document; element = element.parentNode ) {
            if ( element.matches( selector ) ) return element;
        }

        return null;
    };

    function createBackdrop() {
        var existingBackdrop = document.getElementById('vsm-backdrop');
        if (!existingBackdrop) {
            var backDrop = document.createElement('div');
            backDrop.id = 'vsm-backdrop';
            backDrop.style.opacity = 0;
            backDrop.style.transition = 'opacity linear .3s';
            getModalContainer().appendChild(backDrop);

            showBackdrop();
        }
    }

    function showBackdrop() {
        var existingBackdrop = document.getElementById('vsm-backdrop');
        if (!existingBackdrop) {
            createBackdrop();
        }
        setTimeout(function(){
            existingBackdrop.style.opacity = 0.55
            existingBackdrop.onTransitionEndOnce(function(){});
        }, 0);
    }

    function hideBackdrop() {
        var existingBackdrop = document.getElementById('vsm-backdrop');
        if (existingBackdrop) {
            existingBackdrop.style.opacity = 0;
            existingBackdrop.onTransitionEndOnce(function(){
                existingBackdrop.parentNode.removeChild(existingBackdrop);
            });
        }
    }

    function hideModals() {
        var allModals = document.querySelectorAll('.vsm-modal:not(#vsm_modal_base)'),
        currentBase = document.querySelectorAll('.vsm-modal.in')[0];

        var copyOfArray = infoArray.slice(0), copyOfDataArray = dataArray.slice(0);

        infoArray = [];
        dataArray = [];
        disCountinued = true;

        if (modalArray.indexOf(currentBase.getAttribute('id')) > -1) {
            currentBase.style.opacity = 0;
            currentBase.onTransitionEndOnce(function(){
                [].forEach.call(allModals, function (thisModal) {
                    var thisID = thisModal.getAttribute('id');
                    if (modalArray.indexOf(thisID) > -1) {
                        thisModal.parentNode.removeChild(thisModal);
                    }
                });

                var infoBaseObj = {};

                for (var i = 0; i < copyOfArray.length; i++) {
                  var splittedArray = copyOfArray[i].split(':');
                  if (splittedArray.length == 2) {
                      infoBaseObj[splittedArray[0]] = splittedArray[1];
                  }
                }

                if (options.callback && typeof options.callback == 'function') {
                    var outObj = {
                        FinalSelectionMade: false,
                        Vehicle: infoBaseObj,
                        FullSelectionData: copyOfDataArray
                    }
                    options.callback(outObj);
                }
                else {
                    console.warn('No callback function provided.');
                }
            });
            hideBackdrop();
            removeClass(document.body, 'vsm-modal-open');
        }
        else {
            console.warn('This vsm instance is not shown yet.');
        }
    }

    /**
     * Return the container that modals should be appended to
     */
    function getModalContainer() {
        if (typeof options.container === 'function') return options.container();

        if (options.container) return options.container;

        return document.body;
    }

    /*Load HTML code and append to body*/
    function loadBase() {
        var existingModal = document.getElementById('vsm_modal_base');
        if (!existingModal) {
            var divEle = document.createElement('div');
            divEle.innerHTML = vsm_template;
            getModalContainer().appendChild(divEle.firstChild);
        }
    }

    /**
     * Generate and prepare modal screen
     * @private
     * @param  {Function} prepareFunction - The function to prepare the modal
     * @param  {Object} prepareFunctionOptions - Options to pass in
     * @param  {Object} transitionModal - The modal screen to transition to
     * @return {Element}  Returns the prepared modal
     */
    function base(prepareFunction, prepareFunctionOptions, transitionModal) {
        var modalBase = document.getElementById('vsm_modal_base');
        if (!modalBase) return undefined;
        //Make a copy of #vsm_modal_base
        var modalBaseCopy = modalBase.cloneNode(true);

        //Override id of modalBaseCopy and append to body
        modalBaseCopy.id = 'vsm_modal_' + _vsmModalIDCounter;
        modalArray.push('vsm_modal_' + _vsmModalIDCounter);
        modalBaseCopy.className += ' vsm_modal_' + _vsmModalIDCounter;
        getModalContainer().appendChild(modalBaseCopy);

        //Setup transition
        if (typeof(transitionModal) !== 'undefined') {
            prepareFunctionOptions = extend({
                backModal: transitionModal,
                thisModal: modalBaseCopy
            }, prepareFunctionOptions);

            var backLinks = modalBaseCopy.querySelectorAll('.vsm-back-step');
            [].forEach.call(backLinks, function (backLink) {
                var backHandler = function(e){
                    e.target.removeEventListener(e.type, backHandler);
                    var bm = prepareFunctionOptions.backModal,
                    bc = prepareFunctionOptions.thisModal;
                    transitionToModal(bm, bc, true)
                    .done(
                        function(){
                            if (infoArray.length) infoArray.pop();
                            if (dataArray.length) dataArray.pop();
                            if (bc.parentNode) bc.parentNode.removeChild(bc);

                            if (options.afterBackClicked && typeof options.afterBackClicked == 'function') {
                                var infoBaseObj = {};

                                for (var i = 0; i < infoArray.length; i++) {
                                  var splittedArray = infoArray[i].split(':');
                                  if (splittedArray.length == 2) {
                                      infoBaseObj[splittedArray[0]] = splittedArray[1];
                                  }
                                }

                                var outInfoObj = {
                                    FullSelection: infoBaseObj,
                                    FullSelectionData: dataArray
                                }

                                options.afterBackClicked(outInfoObj);
                            }
                        }
                    )
                }
                backLink.addEventListener('click', backHandler, false);
            });
        }

        //Call the prepare function to initialize the new modal
        if (typeof prepareFunction === "function") prepareFunction(modalBaseCopy, prepareFunctionOptions);

        //bind click event to close the modal
        var closeButtons = modalBaseCopy.querySelectorAll('.vsm-close');
        [].forEach.call(closeButtons, function (closeButton) {
            closeButton.onclick = function(){
                hideModals();
            };
        });

        _vsmModalIDCounter++;

        return modalBaseCopy;
    }

    /**
     * Transition between modal
     * @private
     * @param  {Element} toModal - The modal to transition to
     * @param  {Element} fromModal - The current modal to transition from
     * @param  {Boolean} backwards - set to true, if transition from higher index to lower index
     * @return {RideStylerPromise} - Returns a promise that will resolve when the transition is complete
     */
    function transitionToModal(toModal, fromModal, backwards) {
        backwards = !! backwards;

        if (!toModal || !fromModal)
            return;

        /** @type {RideStylerPromise} */
        var fromAnimatePromise = ridestyler.promise(),
            toAnimatePromise = ridestyler.promise();

        if (!backwards) {
            var fromZ = parseInt(fromModal.style.zIndex, 10) || 0,
                toZ = parseInt(toModal.style.zIndex, 10) || 0;
            if (toZ <= fromZ) toZ = fromZ + 1;
            toModal.style.zIndex = toZ;
        }

        if (transitionSupport) {
            if (backwards) {
                toModal.style.display = 'block';
                addClass(toModal, 'in');

                toAnimatePromise.resolve();

                setTimeout(function() {
                    removeClass(fromModal, 'in');
                    fromModal.onTransitionEndOnce(function(){
                        fromModal.style.display = 'none';
                        fromAnimatePromise.resolve();
                    })
                }, 50);
            }
            else {
                toModal.style.display = 'block';

                setTimeout(function() {
                    addClass(toModal, 'in');
                    toModal.onTransitionEndOnce(function(){
                        fromModal.style.display = 'none';
                        removeClass(fromModal, 'in');

                        toAnimatePromise.resolve();
                        fromAnimatePromise.resolve();
                    })
                }, 50);
            }
        }
        else {
            if (backwards) {
                toModal.style.display = 'block';
                addClass(toModal, 'in');

                removeClass(fromModal, 'in');
                fromModal.style.display = 'none';
            }
            else {
                toModal.style.display = 'block';
                addClass(toModal, 'in');

                fromModal.style.display = 'none';
                removeClass(fromModal, 'in');
            }

            toAnimatePromise.resolve();
            fromAnimatePromise.resolve();
        }

        var allPromise = ridestyler.promise();
        var onPromiseChange = function () {
            var toState = toAnimatePromise.state(),
                fromState = fromAnimatePromise.state();

            // Still waiting for resolution
            if (toState === 0 || fromState === 0) return;

            // One promise has been rejected but the other is resolved
            if (toState === 2 || fromState === 2) return allPromise.reject();

            // Both promises are resolved
            allPromise.resolve();
        };

        toAnimatePromise.always(onPromiseChange);
        fromAnimatePromise.always(onPromiseChange);

        return allPromise;
    }

    /**
     * Modal preparation: Process the vehicle select request
     * @private
     * @param  {Element} modal - The modal to prepare
     * @return void
     */
    function requestStep(modal, stepOptions) {
        var request = {
            Selection: dataArray
        };

        if (stepOptions && stepOptions.bestConfiguration) {
            showSelection(modal, stepOptions.bestConfiguration);
        }
        else
            ridestyler.ajax.send({
                action: 'Vehicle/Select',
                data: request,
                callback: function (response) {
                    if (response.Success) {
                        if (response.BestConfiguration) {
                            if (options.IncludeOETireOption) {
                                ridestyler.ajax.send({
                                    action: 'Vehicle/GetTireOptionDetails',
                                    data: {'VehicleConfiguration': response.BestConfiguration.Value},
                                    bestConfiguration: response.BestConfiguration,
                                    callback: function (detailResponse) {
                                        if (detailResponse.Success) {
                                            var details = detailResponse.Details,
                                            bestConfiguration = this.bestConfiguration;
                                            if (details.length == 1) {
                                                var detailString = (function (detail) {
                                                    var f = detail.Front['Description'], r = detail.Rear['Description'];
                                                    if (f==r) return f;
                                                    else return "F: " + f + " R: " + r;
                                                })(details[0]);
                                                bestConfiguration.TireOptionBasic = {TireOptionID: details[0]['TireOptionID'], TireOptionString: detailString};
                                                showSelection(modal, bestConfiguration);
                                            }
                                            else {
                                                var optionMenu = {
                                                    Groups: null,
                                                    Description: 'Select Your Tire Size',
                                                    Title: 'Tire Size',
                                                    Key: 'tireoption',
                                                    Options: []
                                                }
                                                for (var i = 0; i < details.length; i++) {
                                                    var detailString = (function (detail) {
                                                        var f = detail.Front['Description'], r = detail.Rear['Description'];
                                                        if (f==r) return f;
                                                        else return "F: " + f + " R: " + r;
                                                    })(details[i]);
                                                    optionMenu.Options.push({Group: null, Label: detailString, Value: details[i]['TireOptionID']});
                                                }
                                                updateModal(modal, optionMenu, bestConfiguration);
                                            }
                                        }
                                        else showSelection(modal, bestConfiguration);
                                    }
                                });
                            }
                            else
                                showSelection(modal, response.BestConfiguration);
                        }
                        else {
                            updateModal(modal, response.Menu);
                        }
                    }
                }
            });
    }

    /**
     * Modal preparation: Update modal content
     * @private
     * @param  {Element} modal - The modal to prepare
     * @param  {Object} menu - Menu object to pass in for modal content update
     * @return void
     */
    function updateModal(modal, menu, bestConfiguration) {
        var itemListContainer = modal.querySelectorAll('.vsm-list-container')[0],
        headerElement = modal.querySelectorAll('.vsm-header')[0],
        bodyElement = modal.querySelectorAll('.vsm-modal-body')[0],
        vsmLinkStyle = modal.querySelectorAll('.vsm-line-step')[0],
        finalScreen = modal.querySelectorAll('.vsm-final')[0];
        var menuOptions = menu.Options,
        menuKey = menu.Key,
        menuTitle = menu.Title,
        menuGroups = menu.Groups;

        var onListItemSelected = function(o) {
            var optionValue = o.getAttribute('data-optionvalue');
            var optionKey = o.getAttribute('data-optionkey');
            var optionLabel = o.getAttribute('data-optionlabel');
            var optionTitle = o.getAttribute('data-menutitle');
            dataArray.push(optionKey + ':' + optionValue);
            infoArray.push(optionTitle + ':' + optionLabel);

            if (options.afterOptionSelected && typeof options.afterOptionSelected == 'function') {
                var infoBaseObj = {};

                for (var i = 0; i < infoArray.length; i++) {
                    var splittedArray = infoArray[i].split(':');
                    if (splittedArray.length == 2) {
                        infoBaseObj[splittedArray[0]] = splittedArray[1];
                    }
                }

                var outInfoObj = {
                    CurrentSelection: {},
                    FullSelection: infoBaseObj,
                    FullSelectionData: dataArray
                }

                outInfoObj.CurrentSelection[optionTitle] = optionLabel;

                options.afterOptionSelected(outInfoObj);
            }

            if (!disCountinued) {
                var transitionOption = {};
                if (optionKey == 'tireoption' && bestConfiguration) {
                    bestConfiguration.TireOptionBasic = {
                        TireOptionID: optionValue,
                        TireOptionString: optionLabel
                    };
                    transitionOption.bestConfiguration = bestConfiguration;
                }
                transitionToModal(
                    base(requestStep, transitionOption, modal),
                    modal
                );
            }
            else {
                return;
            }
        },
        buildListItem = function(optObj) {
            var optionLabel = optObj.Label,
            optionValue = optObj.Value;
            if (typeof optionLabel === 'undefined' || typeof optionValue === 'undefined') {
                return undefined;
            }

            var optionBtn = document.createElement('a'),
            optionText = document.createTextNode(optionLabel);
            optionBtn.className = 'vsm-option-item vsm-btn vsm-btn-gray';
            optionBtn.href = 'javascript:void(0)';
            optionBtn.setAttribute('data-optionvalue', optionValue);
            optionBtn.setAttribute('data-optionlabel', optionLabel);
            optionBtn.appendChild(optionText);

            optionBtn.onclick = function(){
                onListItemSelected(this);
            };
            return optionBtn;
        },
        buildListHeader = function(headerText) {
            var menuSubHeader = document.createElement('p'),
            menuSubHeaderText = document.createTextNode(headerText);
            menuSubHeader.className = 'vsm-group-title';
            menuSubHeader.appendChild(menuSubHeaderText);

            return menuSubHeader;
        };

        //In progress, removing the final screen element from loaded modal
        finalScreen.parentNode.removeChild(finalScreen);
        addClass(vsmLinkStyle, 'vsm-single-step');

        
        //Create right-side progress bar
        var divELe = document.createElement('div'),
        dotEle = document.createElement('i'),
        spanEle = document.createElement('span');
        divELe.className = 'vsm-column-2';
        dotEle.className = 'dot-style dot-before active';
        spanEle.className = 'dot-info dot-info-before active';
        //spanEle.innerHTML = menuTitle;
        divELe.appendChild(dotEle);
        divELe.appendChild(spanEle);

        //Create left-side progress info
        if (!dataArray.length) {
            var notStyleDiv = document.createElement('div');
            notStyleDiv.className = 'vsm-column-2 no-style';
            vsmLinkStyle.appendChild(notStyleDiv);
            vsmLinkStyle.appendChild(divELe);
        }
        else {
            addClass(bodyElement, 'vsm-has-back');
            var notStyleDiv = document.createElement('div');
            /*cellEle = document.createElement('span'),*/
            /*infoEle = document.createElement('span');*/
            notStyleDiv.className = 'vsm-column-2 vsm-before';
            /*cellEle.className = 'vsm-table-cell';
            infoEle.className = 'vsm-selected-info';
            cellEle.appendChild(infoEle);
            notStyleDiv.appendChild(cellEle);*/
            var infoBaseArray = infoArray.map(function (ele) {
                return ele && ele.split(':').length === 2 ? ele.split(':')[1] : '';
            });
            /*infoEle.innerHTML = infoBaseArray.join(' ');*/
            spanEle.innerHTML = infoBaseArray.join(' ');
            vsmLinkStyle.appendChild(notStyleDiv);
            vsmLinkStyle.appendChild(divELe);

        }

        var headerEnd = menu.Description.split(' ').slice(-1)[0].replace(/\b\w/g, function(t){ return t.toUpperCase() });
        var headerStart = menu.Description.split(' '). slice(0,2).join(' ');

        headerElement.innerHTML = headerStart + ' ' + headerEnd;

        //Clear the container
        while (itemListContainer.firstChild) {
            itemListContainer.removeChild(itemListContainer.firstChild);
        }

        if (menuOptions.length) {
            var groupWrap = document.createElement('div');
            groupWrap.className = 'vsm-group-wrap center-piece';
            itemListContainer.appendChild(groupWrap);

            if (options.GroupOptions && menuGroups) {
                var menuGroupedOptions = {};
                for (var i = 0; i < menuOptions.length; i++) {
                    var thisMenuOption = menuOptions[i],
                    thisMenuOptionGroup = thisMenuOption.Group;
                    if (thisMenuOptionGroup) {
                        //If Group value of this option is not null or undefined
                        if (!menuGroupedOptions[thisMenuOptionGroup]) {
                            menuGroupedOptions[thisMenuOptionGroup] = [thisMenuOption];
                        }
                        else {
                            menuGroupedOptions[thisMenuOptionGroup].push(thisMenuOption);
                        }
                    }
                    else {
                        //If Group value of this option is null or undefined, put them in Ungrouped array
                        //May never happen, more like an error handling
                        if (!menuGroupedOptions['_ungrouped']) {
                            menuGroupedOptions['_ungrouped'] = [thisMenuOption];
                        }
                        else {
                            menuGroupedOptions['_ungrouped'].push(thisMenuOption);
                        }
                    }
                }
                //Go through known Groups before checking ungrouped options
                for (var j = 0; j < menuGroups.length; j++) {
                    var menuGroup = menuGroups[j];
                    var subGroup = menuGroupedOptions[menuGroup];
                    if (subGroup) {
                        var groupList = document.createElement('div'),
                        columnClass = 'vsm-one-container';
                        if (menu.Key == 'year' && menuOptions.length > 10) {
                            if (options.YearScreenColumns == 2) columnClass = 'vsm-half-container';
                            if (options.YearScreenColumns >= 3) columnClass = 'vsm-third-container';
                        }
                        if (menu.Key == 'make' && menuOptions.length > 10) {
                            if (options.MakeScreenColumns >= 2) columnClass = 'vsm-half-container';
                        }
                        groupList.className = 'vsm-group-list ' + columnClass;
                        groupWrap.appendChild(buildListHeader(menuGroup));
                        groupWrap.appendChild(groupList);

                        for (var i = 0; i < subGroup.length; i++) {
                            var listItem = buildListItem(subGroup[i]);
                            if (typeof listItem !== 'undefined') {
                                listItem.setAttribute('data-optionkey', menuKey);
                                listItem.setAttribute('data-menutitle', menuTitle);
                                groupList.appendChild(listItem);
                            }
                        }
                    }
                }
                //Check if Ungrouped options exist
                if (menuGroupedOptions['_ungrouped']) {
                    var groupList = document.createElement('div'),
                    columnClass = 'vsm-one-container';
                    if (menu.Key == 'year' && menuOptions.length > 10) {
                        if (options.YearScreenColumns == 2) columnClass = 'vsm-half-container';
                        if (options.YearScreenColumns >= 3) columnClass = 'vsm-third-container';
                    }
                    if (menu.Key == 'make' && menuOptions.length > 10) {
                        if (options.MakeScreenColumns >= 2) columnClass = 'vsm-half-container';
                    }
                    groupList.className = 'vsm-group-list ' + columnClass;
                    groupWrap.appendChild(buildListHeader('Ungrouped'));
                    groupWrap.appendChild(groupList);

                    var subGroup = menuGroupedOptions['_ungrouped'];
                    for (var i = 0; i < subGroup.length; i++) {
                        var listItem = buildListItem(subGroup[i]);
                        if (typeof listItem !== 'undefined') {
                            listItem.setAttribute('data-optionkey', menuKey);
                            listItem.setAttribute('data-menutitle', menuTitle);
                            groupList.appendChild(listItem);
                        }
                    }
                }
            }
            else {
                var groupList = document.createElement('div'),
                columnClass = 'vsm-one-container';
                if (menu.Key == 'year' && menuOptions.length > 10) {
                    if (options.YearScreenColumns == 2) columnClass = 'vsm-half-container';
                    if (options.YearScreenColumns >= 3) columnClass = 'vsm-third-container';
                }
                if (menu.Key == 'make' && menuOptions.length > 10) {
                    if (options.MakeScreenColumns >= 2) columnClass = 'vsm-half-container';
                }
                groupList.className = 'vsm-group-list ' + columnClass;
                groupWrap.appendChild(groupList);

                for (var i = 0; i < menuOptions.length; i++) {
                    var listItem = buildListItem(menuOptions[i]);
                    if (typeof listItem !== 'undefined') {
                        listItem.setAttribute('data-optionkey', menuKey);
                        listItem.setAttribute('data-menutitle', menuTitle);
                        groupList.appendChild(listItem);
                    }
                }
            }
        }
    }

    /**
     * Modal preparation: Show final vehicle selection
     * @private
     * @param  {Element} modal - The modal to prepare
     * @param  {Object} bestConfiguration - bestConfiguration object to pass in for modal content update
     * @return void
     */
    function showSelection(modal, bestConfiguration) {
        var vehicleImage = modal.querySelectorAll('.vsm-vehicle-display')[0],
        vehicleLoader = modal.querySelectorAll('.vsm-final .vsm-loaderIcon')[0],
        nameElement = modal.querySelectorAll('.vehicle-result-name')[0],
        sizeElement = modal.querySelectorAll('.vehicle-result-size')[0],
        confirmButton = modal.querySelectorAll('.vsm-find')[0],
        bodyElement = modal.querySelectorAll('.vsm-modal-body')[0],
        inProgressScreen = modal.querySelectorAll('.vsm-in-progress')[0];

        addClass(bodyElement, 'vsm-has-back');
        confirmButton.innerHTML = options.ConfirmButtonText;

        var infoBaseArray = [], infoBaseObj = {};

        for (var i = 0; i < infoArray.length; i++) {
          var splittedArray = infoArray[i].split(':');
          if (splittedArray.length == 2 && splittedArray[0] != 'Tire Size') {
              infoBaseArray.push(splittedArray[1]);
              infoBaseObj[splittedArray[0]] = splittedArray[1];
          }
        }

        var mainPartString = infoBaseArray[0],
        lastItem = infoBaseArray.pop();

        for (var i = 1; i < infoBaseArray.length; i++) {
            if (i >= 3) break;
            mainPartString += ' ' + infoBaseArray[i];
        }

        var vehicleDesc = mainPartString + ' ' + lastItem;

        nameElement.innerHTML = vehicleDesc;

        addClass(modal.querySelectorAll('.vsm-modal-body')[0], 'vsm-final-screen');
        inProgressScreen.parentNode.removeChild(inProgressScreen);

        var imageSettings = {
            Width: 260,
            Height: 120,
            PositionX: 1,
            PositionY: 1
        };

        if (options.ImageSettings) {
            extend(imageSettings, 
                   typeof options.ImageSettings === "function" ?
                        options.ImageSettings.call(this, options) :
                        options.ImageSettings);
        }

        imageSettings.VehicleConfiguration = bestConfiguration.Value;

        var imageUrl = ridestyler.ajax.url("Vehicle/Render", imageSettings);

        vehicleImage.src = imageUrl;
        vehicleImage.style.display = 'inline-block';
        vehicleImage.onload = function(){
            vehicleLoader.style.display = 'none';
        }

        var confirmHandler = function (e) {
            e.target.removeEventListener(e.type, confirmHandler);
            //Hide modal
            var allModals = document.querySelectorAll('.vsm-modal:not(#vsm_modal_base)'),
            parentBase = getClosest(this, '.vsm-modal');

            var copyOfDataArray = dataArray.slice(0);

            infoArray = [];
            dataArray = [];

            parentBase.style.opacity = 0;
            parentBase.onTransitionEndOnce(function(){
                [].forEach.call(allModals, function (thisModal) {thisModal.parentNode.removeChild(thisModal);});

                var vehicleInfo = {
                    ImageUrl: imageUrl,
                    VehicleDescription: vehicleDesc,
                    VehicleConfiguration: bestConfiguration.Value
                };

                extend(vehicleInfo, infoBaseObj);
                if (bestConfiguration.TireOptionBasic) extend(vehicleInfo, bestConfiguration.TireOptionBasic);
                if (options.callback && typeof options.callback == 'function') {
                    var outObj = {
                        FinalSelectionMade: true,
                        Vehicle: vehicleInfo,
                        FullSelectionData: copyOfDataArray
                    }
                    options.callback(outObj);
                }
                else {
                    hideModals();
                    console.warn('No callback function provided.');
                }
            });
            hideBackdrop();
        }

        confirmButton.addEventListener('click', confirmHandler, false);
    }

    this.Show = function () {
        loadBase();
        //Check for any existing modals
        var allModals = document.querySelectorAll('.vsm-modal:not(#vsm_modal_base)');
        if (allModals.length) {
            console.warn('There is currently another vsm instance running.');
            return;
        }
        var modal = base();
        createBackdrop();
        modal.style.display = 'block';
        disCountinued = false;
        setTimeout(function(){
            addClass(modal, 'in');
            addClass(document.body, 'vsm-modal-open');
            modal.onTransitionEndOnce(function(){
                requestStep(modal);
            })
        }, 50);
    }

    this.Hide = hideModals;
}
/* exported RideStylerViewport */
function RideStylerViewport(elem, options) {
    // UI resources
    var loaderData = 'data:image/gif;base64,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ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IENhbid0IGNvbm5lY3QgdG8gbG9jYWwgTXlTUUwgc2VydmVyIHRocm91Z2ggc29ja2V0ICcvdmFyL3J1bi9teXNxbGQvbXlzcWxkLnNvY2snICgyKSBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+CjxiciAvPgo8Yj5XYXJuaW5nPC9iPjogIG15c3FsX3F1ZXJ5KCkgWzxhIGhyZWY9J2Z1bmN0aW9uLm15c3FsLXF1ZXJ5Jz5mdW5jdGlvbi5teXNxbC1xdWVyeTwvYT5dOiBBIGxpbmsgdG8gdGhlIHNlcnZlciBjb3VsZCBub3QgYmUgZXN0YWJsaXNoZWQgaW4gPGI+L2hvbWUvYWpheGxvYWQvd3d3L2xpYnJhaXJpZXMvY2xhc3MubXlzcWwucGhwPC9iPiBvbiBsaW5lIDxiPjY4PC9iPjxiciAvPgo8YnIgLz4KPGI+V2FybmluZzwvYj46ICBteXNxbF9xdWVyeSgpIFs8YSBocmVmPSdmdW5jdGlvbi5teXNxbC1xdWVyeSc+ZnVuY3Rpb24ubXlzcWwtcXVlcnk8L2E+XTogQ2FuJ3QgY29ubmVjdCB0byBsb2NhbCBNeVNRTCBzZXJ2ZXIgdGhyb3VnaCBzb2NrZXQgJy92YXIvcnVuL215c3FsZC9teXNxbGQuc29jaycgKDIpIGluIDxiPi9ob21lL2FqYXhsb2FkL3d3dy9saWJyYWlyaWVzL2NsYXNzLm15c3FsLnBocDwvYj4gb24gbGluZSA8Yj42ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IEEgbGluayB0byB0aGUgc2VydmVyIGNvdWxkIG5vdCBiZSBlc3RhYmxpc2hlZCBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+Cg==';

    // Viewport elements
    /** @type {HTMLElement} */
    var container  = null;
    var loader = null;
    var renderer = null;

    // Stores the current vehicle state for the vehicle
    var active = false;
    var state = { };

    // Make sure our options object is initialized
    options = options || {};

    if (options.state) {
        state = options.state;
    }

    // Attempt to find our container based on the selection string if we can
    if (typeof elem === 'string') {
        if (typeof document.querySelector === 'function') {
            container = document.querySelector(elem);
        } else if (elem[0] === '.') {
            container = document.getElementsByClassName(elem.substring(1));
        } else if (elem[0] === '#') {
            container = document.getElementById(elem.substring(1));
        }
    } else if (typeof elem === 'object') {
        // Is this a DOM element
        if (elem.tagName) {
            container = elem;
        }
    }

    // Make sure we can find our element that we are trying to use for this viewer
    if (!container) console.error('Could not find element specified for: ' + elem);

    // Prepare the container so it can properly wrap the contents
    var isOffsetPositioned = function () {
        var position = container.style.position;
        var isOffsetPositionValue = function (value) {
            return value === 'fixed' || value === 'absolute' || value === 'relative';
        };

        if (isOffsetPositionValue(position)) return true;

        /** @type {CSSStyleDeclaration} */
        var calculatedStyle = 'getComputedStyle' in window ? getComputedStyle(container) : container.runtimeStyle;

        if (!calculatedStyle) return false;

        return isOffsetPositionValue(calculatedStyle.position);
    }();

    // If we're not positioned using offset positioning, set relative positioning on the container
    if (!isOffsetPositioned)
        container.style.position = 'relative';

    // Create our other required elements
    createLoaderElement();

    // Figure out which version of our viewer we want to use
    /*
    if (isCanvasSupported() == false) { // TODO: NEED TO REMOVE THE FALSE REQUIREMENT - WE ARE FLIPPING FOR DEBUG

    } else {
        renderer = new RideStylerImageRenderer(container);
    }
    */

    // We are always using the image renderer since that is all that is supported currently
    renderer = new RideStylerImageRenderer(container);

    var desiredAspectHeight = null;
    if (typeof options.containerAspectRatio === 'number') {
        desiredAspectHeight = options.containerAspectRatio;
    }

    var lastClientWidth = 0;
    var refreshTimeout = 0;
    this.ResizeRenderArea = function() {
        if (container.clientWidth != lastClientWidth) {
            lastClientWidth = container.clientWidth;
            state['width'] = lastClientWidth;

            // If we are maintaining the aspect ratio we need to update that
            if (desiredAspectHeight != null) {
                var height = Math.round(lastClientWidth * desiredAspectHeight);
                container.style.height = height - 200 + 'px';
                state['height'] = height;
            }

            // Make sure our renderer is active before attempt to redraw
            if (active) {
                clearTimeout(refreshTimeout);
                refreshTimeout = setTimeout(function() {
                    // Trigger a refresh on the renderer
                    renderer.Render(state);
                }, 150);
            }
        }
    };

    // Check to see if we should be controlling the container aspect ratio
    if (options.responsive !== false) {
        setInterval(this.ResizeRenderArea, 100);
        this.ResizeRenderArea();
    }

    this.Update = function(instructions) {
        // Let our system know that we are ready to rock
        active = true;
       
        // Make sure our instructions are in an object format
        instructions = prepareArguments(instructions);

        // Inject our variables based on global params
        instructions['width'] = container.clientWidth;
        instructions['height'] = container.clientHeight;

        // Update our internal state and watch for changes
        var hasChanges = false;
        for(var x in instructions) {
            var v1 = state[x];
            var v2 = instructions[x];
            if (v1 != v2) {
                state[x] = v2;
                hasChanges = true;
            }
        }
        // If we didn't make any changes to our internal state we don't need to perform an update
        if (hasChanges == false) {
            var promise = ridestyler.promise();

            promise.resolve();

            return promise;
        }
        return renderer.Render(state);
    };


    this.Reset = function() {
        state = {};
        if (typeof renderer.Reset === 'function') renderer.Reset();
    };


    function prepareArguments(args) {
        var values = {};

        if (typeof args === 'string') {
            var tokens = args.split('?');
            tokens = (tokens.length == 1 ? tokens[0] : tokens[1]).split('&');
            for(var i = 0; i < tokens.length; i++) {
                var kv = tokens[i].split('=');
                var key = decodeURIComponent(kv[0]).toLowerCase();
            
                // Skip over variables that are not used for rendering
                if (key == 'key' || key == 'token') continue;

                values[key] = decodeURIComponent(kv[1]);
            }
        } else {
            // Make sure all keys are in lower case
            for(var k in args) {
                values[k.toLowerCase()] = args[k];
            }
        }

        return values;
    }

    function isCanvasSupported() {
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    } 

    function RideStylerImageRenderer(container) {
        var activeImage = null;
        var retiredImages = [];

        /**
         * @return {RideStylerPromise}
         */
        this.Render = function(instructions) {
            return createNewLayer(instructions);
        };

        this.Reset = function () {
            if (activeImage != null) {
                container.removeChild(activeImage);
                activeImage = null;
            }
        };

        /**
         * @return {RideStylerPromise}
         */
        function createNewLayer(instructions) {
            var promise = ridestyler.promise();
            // Show our loader since we are creating a new layer
            showLoaderElement();


            // Retire our active image if it is available
            if (activeImage != null) {
                // hideOldVehicle();
                retiredImages.push(activeImage);
                activeImage = null;
            }

            // Find all of our old images and fade them to half transparent (if they are visible)
            for(var i = retiredImages.length - 1; i >= 0; i--) {
                var oimg = retiredImages[i];

                // Partially fade out our retired images
                if (oimg.style.opacity > 0.5) oimg.style.opacity = 0.5;
            }
            
            var imageUrl = ridestyler.ajax.url('Vehicle/Render', instructions);


            // Create a new image element for the current render result
            var img = document.createElement('img');
            img.style.position = 'absolute';
            img.style.left = 0;
            img.style.top = 0;
            img.style.opacity = 0;
            img.style.transition = 'opacity linear 300ms';

            // Add our new image layer to the DOM
            container.appendChild(activeImage = img);

            // Listen for our new layer to become ready and display it to the user. Also, cleanup any legacy layers.
            img.onload = function() {
                // Only fade in this IMG if it hasn't already been replaced.
                if (img == activeImage) {
                    hideLoaderElement();
                    img.style.opacity = 1;

                    var removedImages = retiredImages.splice(0, retiredImages.length);
                    // Fade all of our old images out of view
                    for(var i = 0; i < removedImages.length; i++) {
                        removedImages[i].style.opacity = 0;
                    }

                    // Remove the elements after they have had a chance to fade out
                    setTimeout(function() {
                        for(var i = 0; i < removedImages.length; i++) {
                            container.removeChild(removedImages[i]);
                        }
                        promise.resolve();
                    }, 300);
                }
            };

            img.onerror = function () {
                promise.reject();
            };

            // Start loading our image
            img.src = imageUrl;

            return promise;
        }
    }

    function createLoaderElement() {
        loader = document.createElement('img');

        // Set our image
        loader.src = loaderData;

        // Setup style of the element
        loader.style.padding = '5px';
        loader.style.borderRadius = '21px';
        loader.style.background = '#fff';
        loader.style.opacity = 0;
        loader.style.transition = 'opacity linear 300ms';

        // Position in our container
        loader.style.position = 'absolute';
        loader.style.left = '50%';
        loader.style.top = '50%';
        loader.style.zIndex = '50';

        // Offset for size
        loader.style.marginLeft = '-21px';
        loader.style.marginTop = '-21px';

        container.appendChild(loader);
        showLoaderElement();
    }

    function showLoaderElement() {
        loader.style.opacity = 0.75;
    }

    function hideLoaderElement() {
        loader.style.opacity = 0;
    }
}


(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
"use strict";

_dereq_(327);

_dereq_(328);

_dereq_(2);

if (global._babelPolyfill) {
  throw new Error("only one instance of babel-polyfill is allowed");
}
global._babelPolyfill = true;

var DEFINE_PROPERTY = "defineProperty";
function define(O, key, value) {
  O[key] || Object[DEFINE_PROPERTY](O, key, {
    writable: true,
    configurable: true,
    value: value
  });
}

define(String.prototype, "padLeft", "".padStart);
define(String.prototype, "padRight", "".padEnd);

"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function (key) {
  [][key] && define(Array, key, Function.call.bind([][key]));
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"2":2,"327":327,"328":328}],2:[function(_dereq_,module,exports){
_dereq_(130);
module.exports = _dereq_(23).RegExp.escape;

},{"130":130,"23":23}],3:[function(_dereq_,module,exports){
module.exports = function (it) {
  if (typeof it != 'function') throw TypeError(it + ' is not a function!');
  return it;
};

},{}],4:[function(_dereq_,module,exports){
var cof = _dereq_(18);
module.exports = function (it, msg) {
  if (typeof it != 'number' && cof(it) != 'Number') throw TypeError(msg);
  return +it;
};

},{"18":18}],5:[function(_dereq_,module,exports){
// 22.1.3.31 Array.prototype[@@unscopables]
var UNSCOPABLES = _dereq_(128)('unscopables');
var ArrayProto = Array.prototype;
if (ArrayProto[UNSCOPABLES] == undefined) _dereq_(42)(ArrayProto, UNSCOPABLES, {});
module.exports = function (key) {
  ArrayProto[UNSCOPABLES][key] = true;
};

},{"128":128,"42":42}],6:[function(_dereq_,module,exports){
module.exports = function (it, Constructor, name, forbiddenField) {
  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {
    throw TypeError(name + ': incorrect invocation!');
  } return it;
};

},{}],7:[function(_dereq_,module,exports){
var isObject = _dereq_(51);
module.exports = function (it) {
  if (!isObject(it)) throw TypeError(it + ' is not an object!');
  return it;
};

},{"51":51}],8:[function(_dereq_,module,exports){
// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)
'use strict';
var toObject = _dereq_(119);
var toAbsoluteIndex = _dereq_(114);
var toLength = _dereq_(118);

module.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {
  var O = toObject(this);
  var len = toLength(O.length);
  var to = toAbsoluteIndex(target, len);
  var from = toAbsoluteIndex(start, len);
  var end = arguments.length > 2 ? arguments[2] : undefined;
  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
  var inc = 1;
  if (from < to && to < from + count) {
    inc = -1;
    from += count - 1;
    to += count - 1;
  }
  while (count-- > 0) {
    if (from in O) O[to] = O[from];
    else delete O[to];
    to += inc;
    from += inc;
  } return O;
};

},{"114":114,"118":118,"119":119}],9:[function(_dereq_,module,exports){
// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)
'use strict';
var toObject = _dereq_(119);
var toAbsoluteIndex = _dereq_(114);
var toLength = _dereq_(118);
module.exports = function fill(value /* , start = 0, end = @length */) {
  var O = toObject(this);
  var length = toLength(O.length);
  var aLen = arguments.length;
  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);
  var end = aLen > 2 ? arguments[2] : undefined;
  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
  while (endPos > index) O[index++] = value;
  return O;
};

},{"114":114,"118":118,"119":119}],10:[function(_dereq_,module,exports){
var forOf = _dereq_(39);

module.exports = function (iter, ITERATOR) {
  var result = [];
  forOf(iter, false, result.push, result, ITERATOR);
  return result;
};

},{"39":39}],11:[function(_dereq_,module,exports){
// false -> Array#indexOf
// true  -> Array#includes
var toIObject = _dereq_(117);
var toLength = _dereq_(118);
var toAbsoluteIndex = _dereq_(114);
module.exports = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIObject($this);
    var length = toLength(O.length);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {
      if (O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

},{"114":114,"117":117,"118":118}],12:[function(_dereq_,module,exports){
// 0 -> Array#forEach
// 1 -> Array#map
// 2 -> Array#filter
// 3 -> Array#some
// 4 -> Array#every
// 5 -> Array#find
// 6 -> Array#findIndex
var ctx = _dereq_(25);
var IObject = _dereq_(47);
var toObject = _dereq_(119);
var toLength = _dereq_(118);
var asc = _dereq_(15);
module.exports = function (TYPE, $create) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  var create = $create || asc;
  return function ($this, callbackfn, that) {
    var O = toObject($this);
    var self = IObject(O);
    var f = ctx(callbackfn, that, 3);
    var length = toLength(self.length);
    var index = 0;
    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;
    var val, res;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      val = self[index];
      res = f(val, index, O);
      if (TYPE) {
        if (IS_MAP) result[index] = res;   // map
        else if (res) switch (TYPE) {
          case 3: return true;             // some
          case 5: return val;              // find
          case 6: return index;            // findIndex
          case 2: result.push(val);        // filter
        } else if (IS_EVERY) return false; // every
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;
  };
};

},{"118":118,"119":119,"15":15,"25":25,"47":47}],13:[function(_dereq_,module,exports){
var aFunction = _dereq_(3);
var toObject = _dereq_(119);
var IObject = _dereq_(47);
var toLength = _dereq_(118);

module.exports = function (that, callbackfn, aLen, memo, isRight) {
  aFunction(callbackfn);
  var O = toObject(that);
  var self = IObject(O);
  var length = toLength(O.length);
  var index = isRight ? length - 1 : 0;
  var i = isRight ? -1 : 1;
  if (aLen < 2) for (;;) {
    if (index in self) {
      memo = self[index];
      index += i;
      break;
    }
    index += i;
    if (isRight ? index < 0 : length <= index) {
      throw TypeError('Reduce of empty array with no initial value');
    }
  }
  for (;isRight ? index >= 0 : length > index; index += i) if (index in self) {
    memo = callbackfn(memo, self[index], index, O);
  }
  return memo;
};

},{"118":118,"119":119,"3":3,"47":47}],14:[function(_dereq_,module,exports){
var isObject = _dereq_(51);
var isArray = _dereq_(49);
var SPECIES = _dereq_(128)('species');

module.exports = function (original) {
  var C;
  if (isArray(original)) {
    C = original.constructor;
    // cross-realm fallback
    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;
    if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? Array : C;
};

},{"128":128,"49":49,"51":51}],15:[function(_dereq_,module,exports){
// 9.4.2.3 ArraySpeciesCreate(originalArray, length)
var speciesConstructor = _dereq_(14);

module.exports = function (original, length) {
  return new (speciesConstructor(original))(length);
};

},{"14":14}],16:[function(_dereq_,module,exports){
'use strict';
var aFunction = _dereq_(3);
var isObject = _dereq_(51);
var invoke = _dereq_(46);
var arraySlice = [].slice;
var factories = {};

var construct = function (F, len, args) {
  if (!(len in factories)) {
    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';
    // eslint-disable-next-line no-new-func
    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');
  } return factories[len](F, args);
};

module.exports = Function.bind || function bind(that /* , ...args */) {
  var fn = aFunction(this);
  var partArgs = arraySlice.call(arguments, 1);
  var bound = function (/* args... */) {
    var args = partArgs.concat(arraySlice.call(arguments));
    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);
  };
  if (isObject(fn.prototype)) bound.prototype = fn.prototype;
  return bound;
};

},{"3":3,"46":46,"51":51}],17:[function(_dereq_,module,exports){
// getting tag from 19.1.3.6 Object.prototype.toString()
var cof = _dereq_(18);
var TAG = _dereq_(128)('toStringTag');
// ES3 wrong here
var ARG = cof(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (e) { /* empty */ }
};

module.exports = function (it) {
  var O, T, B;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T
    // builtinTag case
    : ARG ? cof(O)
    // ES3 arguments fallback
    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;
};

},{"128":128,"18":18}],18:[function(_dereq_,module,exports){
var toString = {}.toString;

module.exports = function (it) {
  return toString.call(it).slice(8, -1);
};

},{}],19:[function(_dereq_,module,exports){
'use strict';
var dP = _dereq_(72).f;
var create = _dereq_(71);
var redefineAll = _dereq_(93);
var ctx = _dereq_(25);
var anInstance = _dereq_(6);
var forOf = _dereq_(39);
var $iterDefine = _dereq_(55);
var step = _dereq_(57);
var setSpecies = _dereq_(100);
var DESCRIPTORS = _dereq_(29);
var fastKey = _dereq_(66).fastKey;
var validate = _dereq_(125);
var SIZE = DESCRIPTORS ? '_s' : 'size';

var getEntry = function (that, key) {
  // fast case
  var index = fastKey(key);
  var entry;
  if (index !== 'F') return that._i[index];
  // frozen object case
  for (entry = that._f; entry; entry = entry.n) {
    if (entry.k == key) return entry;
  }
};

module.exports = {
  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {
    var C = wrapper(function (that, iterable) {
      anInstance(that, C, NAME, '_i');
      that._t = NAME;         // collection type
      that._i = create(null); // index
      that._f = undefined;    // first entry
      that._l = undefined;    // last entry
      that[SIZE] = 0;         // size
      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
    });
    redefineAll(C.prototype, {
      // 23.1.3.1 Map.prototype.clear()
      // 23.2.3.2 Set.prototype.clear()
      clear: function clear() {
        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {
          entry.r = true;
          if (entry.p) entry.p = entry.p.n = undefined;
          delete data[entry.i];
        }
        that._f = that._l = undefined;
        that[SIZE] = 0;
      },
      // 23.1.3.3 Map.prototype.delete(key)
      // 23.2.3.4 Set.prototype.delete(value)
      'delete': function (key) {
        var that = validate(this, NAME);
        var entry = getEntry(that, key);
        if (entry) {
          var next = entry.n;
          var prev = entry.p;
          delete that._i[entry.i];
          entry.r = true;
          if (prev) prev.n = next;
          if (next) next.p = prev;
          if (that._f == entry) that._f = next;
          if (that._l == entry) that._l = prev;
          that[SIZE]--;
        } return !!entry;
      },
      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)
      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)
      forEach: function forEach(callbackfn /* , that = undefined */) {
        validate(this, NAME);
        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);
        var entry;
        while (entry = entry ? entry.n : this._f) {
          f(entry.v, entry.k, this);
          // revert to the last existing entry
          while (entry && entry.r) entry = entry.p;
        }
      },
      // 23.1.3.7 Map.prototype.has(key)
      // 23.2.3.7 Set.prototype.has(value)
      has: function has(key) {
        return !!getEntry(validate(this, NAME), key);
      }
    });
    if (DESCRIPTORS) dP(C.prototype, 'size', {
      get: function () {
        return validate(this, NAME)[SIZE];
      }
    });
    return C;
  },
  def: function (that, key, value) {
    var entry = getEntry(that, key);
    var prev, index;
    // change existing entry
    if (entry) {
      entry.v = value;
    // create new entry
    } else {
      that._l = entry = {
        i: index = fastKey(key, true), // <- index
        k: key,                        // <- key
        v: value,                      // <- value
        p: prev = that._l,             // <- previous entry
        n: undefined,                  // <- next entry
        r: false                       // <- removed
      };
      if (!that._f) that._f = entry;
      if (prev) prev.n = entry;
      that[SIZE]++;
      // add to index
      if (index !== 'F') that._i[index] = entry;
    } return that;
  },
  getEntry: getEntry,
  setStrong: function (C, NAME, IS_MAP) {
    // add .keys, .values, .entries, [@@iterator]
    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11
    $iterDefine(C, NAME, function (iterated, kind) {
      this._t = validate(iterated, NAME); // target
      this._k = kind;                     // kind
      this._l = undefined;                // previous
    }, function () {
      var that = this;
      var kind = that._k;
      var entry = that._l;
      // revert to the last existing entry
      while (entry && entry.r) entry = entry.p;
      // get next entry
      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {
        // or finish the iteration
        that._t = undefined;
        return step(1);
      }
      // return step by kind
      if (kind == 'keys') return step(0, entry.k);
      if (kind == 'values') return step(0, entry.v);
      return step(0, [entry.k, entry.v]);
    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);

    // add [@@species], 23.1.2.2, 23.2.2.2
    setSpecies(NAME);
  }
};

},{"100":100,"125":125,"25":25,"29":29,"39":39,"55":55,"57":57,"6":6,"66":66,"71":71,"72":72,"93":93}],20:[function(_dereq_,module,exports){
// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var classof = _dereq_(17);
var from = _dereq_(10);
module.exports = function (NAME) {
  return function toJSON() {
    if (classof(this) != NAME) throw TypeError(NAME + "#toJSON isn't generic");
    return from(this);
  };
};

},{"10":10,"17":17}],21:[function(_dereq_,module,exports){
'use strict';
var redefineAll = _dereq_(93);
var getWeak = _dereq_(66).getWeak;
var anObject = _dereq_(7);
var isObject = _dereq_(51);
var anInstance = _dereq_(6);
var forOf = _dereq_(39);
var createArrayMethod = _dereq_(12);
var $has = _dereq_(41);
var validate = _dereq_(125);
var arrayFind = createArrayMethod(5);
var arrayFindIndex = createArrayMethod(6);
var id = 0;

// fallback for uncaught frozen keys
var uncaughtFrozenStore = function (that) {
  return that._l || (that._l = new UncaughtFrozenStore());
};
var UncaughtFrozenStore = function () {
  this.a = [];
};
var findUncaughtFrozen = function (store, key) {
  return arrayFind(store.a, function (it) {
    return it[0] === key;
  });
};
UncaughtFrozenStore.prototype = {
  get: function (key) {
    var entry = findUncaughtFrozen(this, key);
    if (entry) return entry[1];
  },
  has: function (key) {
    return !!findUncaughtFrozen(this, key);
  },
  set: function (key, value) {
    var entry = findUncaughtFrozen(this, key);
    if (entry) entry[1] = value;
    else this.a.push([key, value]);
  },
  'delete': function (key) {
    var index = arrayFindIndex(this.a, function (it) {
      return it[0] === key;
    });
    if (~index) this.a.splice(index, 1);
    return !!~index;
  }
};

module.exports = {
  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {
    var C = wrapper(function (that, iterable) {
      anInstance(that, C, NAME, '_i');
      that._t = NAME;      // collection type
      that._i = id++;      // collection id
      that._l = undefined; // leak store for uncaught frozen objects
      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
    });
    redefineAll(C.prototype, {
      // 23.3.3.2 WeakMap.prototype.delete(key)
      // 23.4.3.3 WeakSet.prototype.delete(value)
      'delete': function (key) {
        if (!isObject(key)) return false;
        var data = getWeak(key);
        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);
        return data && $has(data, this._i) && delete data[this._i];
      },
      // 23.3.3.4 WeakMap.prototype.has(key)
      // 23.4.3.4 WeakSet.prototype.has(value)
      has: function has(key) {
        if (!isObject(key)) return false;
        var data = getWeak(key);
        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);
        return data && $has(data, this._i);
      }
    });
    return C;
  },
  def: function (that, key, value) {
    var data = getWeak(anObject(key), true);
    if (data === true) uncaughtFrozenStore(that).set(key, value);
    else data[that._i] = value;
    return that;
  },
  ufstore: uncaughtFrozenStore
};

},{"12":12,"125":125,"39":39,"41":41,"51":51,"6":6,"66":66,"7":7,"93":93}],22:[function(_dereq_,module,exports){
'use strict';
var global = _dereq_(40);
var $export = _dereq_(33);
var redefine = _dereq_(94);
var redefineAll = _dereq_(93);
var meta = _dereq_(66);
var forOf = _dereq_(39);
var anInstance = _dereq_(6);
var isObject = _dereq_(51);
var fails = _dereq_(35);
var $iterDetect = _dereq_(56);
var setToStringTag = _dereq_(101);
var inheritIfRequired = _dereq_(45);

module.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {
  var Base = global[NAME];
  var C = Base;
  var ADDER = IS_MAP ? 'set' : 'add';
  var proto = C && C.prototype;
  var O = {};
  var fixMethod = function (KEY) {
    var fn = proto[KEY];
    redefine(proto, KEY,
      KEY == 'delete' ? function (a) {
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'has' ? function has(a) {
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'get' ? function get(a) {
        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }
        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }
    );
  };
  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {
    new C().entries().next();
  }))) {
    // create collection constructor
    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);
    redefineAll(C.prototype, methods);
    meta.NEED = true;
  } else {
    var instance = new C();
    // early implementations not supports chaining
    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;
    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false
    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });
    // most early implementations doesn't supports iterables, most modern - not close it correctly
    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new
    // for early implementations -0 and +0 not the same
    var BUGGY_ZERO = !IS_WEAK && fails(function () {
      // V8 ~ Chromium 42- fails only with 5+ elements
      var $instance = new C();
      var index = 5;
      while (index--) $instance[ADDER](index, index);
      return !$instance.has(-0);
    });
    if (!ACCEPT_ITERABLES) {
      C = wrapper(function (target, iterable) {
        anInstance(target, C, NAME);
        var that = inheritIfRequired(new Base(), target, C);
        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
        return that;
      });
      C.prototype = proto;
      proto.constructor = C;
    }
    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
      fixMethod('delete');
      fixMethod('has');
      IS_MAP && fixMethod('get');
    }
    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);
    // weak collections should not contains .clear method
    if (IS_WEAK && proto.clear) delete proto.clear;
  }

  setToStringTag(C, NAME);

  O[NAME] = C;
  $export($export.G + $export.W + $export.F * (C != Base), O);

  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);

  return C;
};

},{"101":101,"33":33,"35":35,"39":39,"40":40,"45":45,"51":51,"56":56,"6":6,"66":66,"93":93,"94":94}],23:[function(_dereq_,module,exports){
var core = module.exports = { version: '2.5.0' };
if (typeof __e == 'number') __e = core; // eslint-disable-line no-undef

},{}],24:[function(_dereq_,module,exports){
'use strict';
var $defineProperty = _dereq_(72);
var createDesc = _dereq_(92);

module.exports = function (object, index, value) {
  if (index in object) $defineProperty.f(object, index, createDesc(0, value));
  else object[index] = value;
};

},{"72":72,"92":92}],25:[function(_dereq_,module,exports){
// optional / simple context binding
var aFunction = _dereq_(3);
module.exports = function (fn, that, length) {
  aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};

},{"3":3}],26:[function(_dereq_,module,exports){
'use strict';
// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var fails = _dereq_(35);
var getTime = Date.prototype.getTime;
var $toISOString = Date.prototype.toISOString;

var lz = function (num) {
  return num > 9 ? num : '0' + num;
};

// PhantomJS / old WebKit has a broken implementations
module.exports = (fails(function () {
  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';
}) || !fails(function () {
  $toISOString.call(new Date(NaN));
})) ? function toISOString() {
  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');
  var d = this;
  var y = d.getUTCFullYear();
  var m = d.getUTCMilliseconds();
  var s = y < 0 ? '-' : y > 9999 ? '+' : '';
  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +
    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +
    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +
    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';
} : $toISOString;

},{"35":35}],27:[function(_dereq_,module,exports){
'use strict';
var anObject = _dereq_(7);
var toPrimitive = _dereq_(120);
var NUMBER = 'number';

module.exports = function (hint) {
  if (hint !== 'string' && hint !== NUMBER && hint !== 'default') throw TypeError('Incorrect hint');
  return toPrimitive(anObject(this), hint != NUMBER);
};

},{"120":120,"7":7}],28:[function(_dereq_,module,exports){
// 7.2.1 RequireObjectCoercible(argument)
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on  " + it);
  return it;
};

},{}],29:[function(_dereq_,module,exports){
// Thank's IE8 for his funny defineProperty
module.exports = !_dereq_(35)(function () {
  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
});

},{"35":35}],30:[function(_dereq_,module,exports){
var isObject = _dereq_(51);
var document = _dereq_(40).document;
// typeof document.createElement is 'object' in old IE
var is = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
  return is ? document.createElement(it) : {};
};

},{"40":40,"51":51}],31:[function(_dereq_,module,exports){
// IE 8- don't enum bug keys
module.exports = (
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'
).split(',');

},{}],32:[function(_dereq_,module,exports){
// all enumerable object keys, includes symbols
var getKeys = _dereq_(81);
var gOPS = _dereq_(78);
var pIE = _dereq_(82);
module.exports = function (it) {
  var result = getKeys(it);
  var getSymbols = gOPS.f;
  if (getSymbols) {
    var symbols = getSymbols(it);
    var isEnum = pIE.f;
    var i = 0;
    var key;
    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);
  } return result;
};

},{"78":78,"81":81,"82":82}],33:[function(_dereq_,module,exports){
var global = _dereq_(40);
var core = _dereq_(23);
var hide = _dereq_(42);
var redefine = _dereq_(94);
var ctx = _dereq_(25);
var PROTOTYPE = 'prototype';

var $export = function (type, name, source) {
  var IS_FORCED = type & $export.F;
  var IS_GLOBAL = type & $export.G;
  var IS_STATIC = type & $export.S;
  var IS_PROTO = type & $export.P;
  var IS_BIND = type & $export.B;
  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];
  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});
  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});
  var key, own, out, exp;
  if (IS_GLOBAL) source = name;
  for (key in source) {
    // contains in native
    own = !IS_FORCED && target && target[key] !== undefined;
    // export native or passed
    out = (own ? target : source)[key];
    // bind timers to global for call from export context
    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
    // extend global
    if (target) redefine(target, key, out, type & $export.U);
    // export
    if (exports[key] != out) hide(exports, key, exp);
    if (IS_PROTO && expProto[key] != out) expProto[key] = out;
  }
};
global.core = core;
// type bitmap
$export.F = 1;   // forced
$export.G = 2;   // global
$export.S = 4;   // static
$export.P = 8;   // proto
$export.B = 16;  // bind
$export.W = 32;  // wrap
$export.U = 64;  // safe
$export.R = 128; // real proto method for `library`
module.exports = $export;

},{"23":23,"25":25,"40":40,"42":42,"94":94}],34:[function(_dereq_,module,exports){
var MATCH = _dereq_(128)('match');
module.exports = function (KEY) {
  var re = /./;
  try {
    '/./'[KEY](re);
  } catch (e) {
    try {
      re[MATCH] = false;
      return !'/./'[KEY](re);
    } catch (f) { /* empty */ }
  } return true;
};

},{"128":128}],35:[function(_dereq_,module,exports){
module.exports = function (exec) {
  try {
    return !!exec();
  } catch (e) {
    return true;
  }
};

},{}],36:[function(_dereq_,module,exports){
'use strict';
var hide = _dereq_(42);
var redefine = _dereq_(94);
var fails = _dereq_(35);
var defined = _dereq_(28);
var wks = _dereq_(128);

module.exports = function (KEY, length, exec) {
  var SYMBOL = wks(KEY);
  var fns = exec(defined, SYMBOL, ''[KEY]);
  var strfn = fns[0];
  var rxfn = fns[1];
  if (fails(function () {
    var O = {};
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) != 7;
  })) {
    redefine(String.prototype, KEY, strfn);
    hide(RegExp.prototype, SYMBOL, length == 2
      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)
      // 21.2.5.11 RegExp.prototype[@@split](string, limit)
      ? function (string, arg) { return rxfn.call(string, this, arg); }
      // 21.2.5.6 RegExp.prototype[@@match](string)
      // 21.2.5.9 RegExp.prototype[@@search](string)
      : function (string) { return rxfn.call(string, this); }
    );
  }
};

},{"128":128,"28":28,"35":35,"42":42,"94":94}],37:[function(_dereq_,module,exports){
'use strict';
// 21.2.5.3 get RegExp.prototype.flags
var anObject = _dereq_(7);
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.unicode) result += 'u';
  if (that.sticky) result += 'y';
  return result;
};

},{"7":7}],38:[function(_dereq_,module,exports){
'use strict';
// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray
var isArray = _dereq_(49);
var isObject = _dereq_(51);
var toLength = _dereq_(118);
var ctx = _dereq_(25);
var IS_CONCAT_SPREADABLE = _dereq_(128)('isConcatSpreadable');

function flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {
  var targetIndex = start;
  var sourceIndex = 0;
  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;
  var element, spreadable;

  while (sourceIndex < sourceLen) {
    if (sourceIndex in source) {
      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];

      spreadable = false;
      if (isObject(element)) {
        spreadable = element[IS_CONCAT_SPREADABLE];
        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);
      }

      if (spreadable && depth > 0) {
        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;
      } else {
        if (targetIndex >= 0x1fffffffffffff) throw TypeError();
        target[targetIndex] = element;
      }

      targetIndex++;
    }
    sourceIndex++;
  }
  return targetIndex;
}

module.exports = flattenIntoArray;

},{"118":118,"128":128,"25":25,"49":49,"51":51}],39:[function(_dereq_,module,exports){
var ctx = _dereq_(25);
var call = _dereq_(53);
var isArrayIter = _dereq_(48);
var anObject = _dereq_(7);
var toLength = _dereq_(118);
var getIterFn = _dereq_(129);
var BREAK = {};
var RETURN = {};
var exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {
  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);
  var f = ctx(fn, that, entries ? 2 : 1);
  var index = 0;
  var length, step, iterator, result;
  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');
  // fast case for arrays with default iterator
  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {
    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);
    if (result === BREAK || result === RETURN) return result;
  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {
    result = call(iterator, f, step.value, entries);
    if (result === BREAK || result === RETURN) return result;
  }
};
exports.BREAK = BREAK;
exports.RETURN = RETURN;

},{"118":118,"129":129,"25":25,"48":48,"53":53,"7":7}],40:[function(_dereq_,module,exports){
// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self
  // eslint-disable-next-line no-new-func
  : Function('return this')();
if (typeof __g == 'number') __g = global; // eslint-disable-line no-undef

},{}],41:[function(_dereq_,module,exports){
var hasOwnProperty = {}.hasOwnProperty;
module.exports = function (it, key) {
  return hasOwnProperty.call(it, key);
};

},{}],42:[function(_dereq_,module,exports){
var dP = _dereq_(72);
var createDesc = _dereq_(92);
module.exports = _dereq_(29) ? function (object, key, value) {
  return dP.f(object, key, createDesc(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};

},{"29":29,"72":72,"92":92}],43:[function(_dereq_,module,exports){
var document = _dereq_(40).document;
module.exports = document && document.documentElement;

},{"40":40}],44:[function(_dereq_,module,exports){
module.exports = !_dereq_(29) && !_dereq_(35)(function () {
  return Object.defineProperty(_dereq_(30)('div'), 'a', { get: function () { return 7; } }).a != 7;
});

},{"29":29,"30":30,"35":35}],45:[function(_dereq_,module,exports){
var isObject = _dereq_(51);
var setPrototypeOf = _dereq_(99).set;
module.exports = function (that, target, C) {
  var S = target.constructor;
  var P;
  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {
    setPrototypeOf(that, P);
  } return that;
};

},{"51":51,"99":99}],46:[function(_dereq_,module,exports){
// fast apply, http://jsperf.lnkit.com/fast-apply/5
module.exports = function (fn, args, that) {
  var un = that === undefined;
  switch (args.length) {
    case 0: return un ? fn()
                      : fn.call(that);
    case 1: return un ? fn(args[0])
                      : fn.call(that, args[0]);
    case 2: return un ? fn(args[0], args[1])
                      : fn.call(that, args[0], args[1]);
    case 3: return un ? fn(args[0], args[1], args[2])
                      : fn.call(that, args[0], args[1], args[2]);
    case 4: return un ? fn(args[0], args[1], args[2], args[3])
                      : fn.call(that, args[0], args[1], args[2], args[3]);
  } return fn.apply(that, args);
};

},{}],47:[function(_dereq_,module,exports){
// fallback for non-array-like ES3 and non-enumerable old V8 strings
var cof = _dereq_(18);
// eslint-disable-next-line no-prototype-builtins
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {
  return cof(it) == 'String' ? it.split('') : Object(it);
};

},{"18":18}],48:[function(_dereq_,module,exports){
// check on default Array iterator
var Iterators = _dereq_(58);
var ITERATOR = _dereq_(128)('iterator');
var ArrayProto = Array.prototype;

module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);
};

},{"128":128,"58":58}],49:[function(_dereq_,module,exports){
// 7.2.2 IsArray(argument)
var cof = _dereq_(18);
module.exports = Array.isArray || function isArray(arg) {
  return cof(arg) == 'Array';
};

},{"18":18}],50:[function(_dereq_,module,exports){
// 20.1.2.3 Number.isInteger(number)
var isObject = _dereq_(51);
var floor = Math.floor;
module.exports = function isInteger(it) {
  return !isObject(it) && isFinite(it) && floor(it) === it;
};

},{"51":51}],51:[function(_dereq_,module,exports){
module.exports = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};

},{}],52:[function(_dereq_,module,exports){
// 7.2.8 IsRegExp(argument)
var isObject = _dereq_(51);
var cof = _dereq_(18);
var MATCH = _dereq_(128)('match');
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');
};

},{"128":128,"18":18,"51":51}],53:[function(_dereq_,module,exports){
// call something on iterator step with safe closing on error
var anObject = _dereq_(7);
module.exports = function (iterator, fn, value, entries) {
  try {
    return entries ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch (e) {
    var ret = iterator['return'];
    if (ret !== undefined) anObject(ret.call(iterator));
    throw e;
  }
};

},{"7":7}],54:[function(_dereq_,module,exports){
'use strict';
var create = _dereq_(71);
var descriptor = _dereq_(92);
var setToStringTag = _dereq_(101);
var IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
_dereq_(42)(IteratorPrototype, _dereq_(128)('iterator'), function () { return this; });

module.exports = function (Constructor, NAME, next) {
  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });
  setToStringTag(Constructor, NAME + ' Iterator');
};

},{"101":101,"128":128,"42":42,"71":71,"92":92}],55:[function(_dereq_,module,exports){
'use strict';
var LIBRARY = _dereq_(60);
var $export = _dereq_(33);
var redefine = _dereq_(94);
var hide = _dereq_(42);
var has = _dereq_(41);
var Iterators = _dereq_(58);
var $iterCreate = _dereq_(54);
var setToStringTag = _dereq_(101);
var getPrototypeOf = _dereq_(79);
var ITERATOR = _dereq_(128)('iterator');
var BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`
var FF_ITERATOR = '@@iterator';
var KEYS = 'keys';
var VALUES = 'values';

var returnThis = function () { return this; };

module.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
  $iterCreate(Constructor, NAME, next);
  var getMethod = function (kind) {
    if (!BUGGY && kind in proto) return proto[kind];
    switch (kind) {
      case KEYS: return function keys() { return new Constructor(this, kind); };
      case VALUES: return function values() { return new Constructor(this, kind); };
    } return function entries() { return new Constructor(this, kind); };
  };
  var TAG = NAME + ' Iterator';
  var DEF_VALUES = DEFAULT == VALUES;
  var VALUES_BUG = false;
  var proto = Base.prototype;
  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];
  var $default = $native || getMethod(DEFAULT);
  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;
  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;
  var methods, key, IteratorPrototype;
  // Fix native
  if ($anyNative) {
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));
    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {
      // Set @@toStringTag to native iterators
      setToStringTag(IteratorPrototype, TAG, true);
      // fix for some old engines
      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);
    }
  }
  // fix Array#{values, @@iterator}.name in V8 / FF
  if (DEF_VALUES && $native && $native.name !== VALUES) {
    VALUES_BUG = true;
    $default = function values() { return $native.call(this); };
  }
  // Define iterator
  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {
    hide(proto, ITERATOR, $default);
  }
  // Plug for library
  Iterators[NAME] = $default;
  Iterators[TAG] = returnThis;
  if (DEFAULT) {
    methods = {
      values: DEF_VALUES ? $default : getMethod(VALUES),
      keys: IS_SET ? $default : getMethod(KEYS),
      entries: $entries
    };
    if (FORCED) for (key in methods) {
      if (!(key in proto)) redefine(proto, key, methods[key]);
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
  }
  return methods;
};

},{"101":101,"128":128,"33":33,"41":41,"42":42,"54":54,"58":58,"60":60,"79":79,"94":94}],56:[function(_dereq_,module,exports){
var ITERATOR = _dereq_(128)('iterator');
var SAFE_CLOSING = false;

try {
  var riter = [7][ITERATOR]();
  riter['return'] = function () { SAFE_CLOSING = true; };
  // eslint-disable-next-line no-throw-literal
  Array.from(riter, function () { throw 2; });
} catch (e) { /* empty */ }

module.exports = function (exec, skipClosing) {
  if (!skipClosing && !SAFE_CLOSING) return false;
  var safe = false;
  try {
    var arr = [7];
    var iter = arr[ITERATOR]();
    iter.next = function () { return { done: safe = true }; };
    arr[ITERATOR] = function () { return iter; };
    exec(arr);
  } catch (e) { /* empty */ }
  return safe;
};

},{"128":128}],57:[function(_dereq_,module,exports){
module.exports = function (done, value) {
  return { value: value, done: !!done };
};

},{}],58:[function(_dereq_,module,exports){
module.exports = {};

},{}],59:[function(_dereq_,module,exports){
var getKeys = _dereq_(81);
var toIObject = _dereq_(117);
module.exports = function (object, el) {
  var O = toIObject(object);
  var keys = getKeys(O);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) if (O[key = keys[index++]] === el) return key;
};

},{"117":117,"81":81}],60:[function(_dereq_,module,exports){
module.exports = false;

},{}],61:[function(_dereq_,module,exports){
// 20.2.2.14 Math.expm1(x)
var $expm1 = Math.expm1;
module.exports = (!$expm1
  // Old FF bug
  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168
  // Tor Browser bug
  || $expm1(-2e-17) != -2e-17
) ? function expm1(x) {
  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;
} : $expm1;

},{}],62:[function(_dereq_,module,exports){
// 20.2.2.16 Math.fround(x)
var sign = _dereq_(65);
var pow = Math.pow;
var EPSILON = pow(2, -52);
var EPSILON32 = pow(2, -23);
var MAX32 = pow(2, 127) * (2 - EPSILON32);
var MIN32 = pow(2, -126);

var roundTiesToEven = function (n) {
  return n + 1 / EPSILON - 1 / EPSILON;
};

module.exports = Math.fround || function fround(x) {
  var $abs = Math.abs(x);
  var $sign = sign(x);
  var a, result;
  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;
  a = (1 + EPSILON32 / EPSILON) * $abs;
  result = a - (a - $abs);
  // eslint-disable-next-line no-self-compare
  if (result > MAX32 || result != result) return $sign * Infinity;
  return $sign * result;
};

},{"65":65}],63:[function(_dereq_,module,exports){
// 20.2.2.20 Math.log1p(x)
module.exports = Math.log1p || function log1p(x) {
  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);
};

},{}],64:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
module.exports = Math.scale || function scale(x, inLow, inHigh, outLow, outHigh) {
  if (
    arguments.length === 0
      // eslint-disable-next-line no-self-compare
      || x != x
      // eslint-disable-next-line no-self-compare
      || inLow != inLow
      // eslint-disable-next-line no-self-compare
      || inHigh != inHigh
      // eslint-disable-next-line no-self-compare
      || outLow != outLow
      // eslint-disable-next-line no-self-compare
      || outHigh != outHigh
  ) return NaN;
  if (x === Infinity || x === -Infinity) return x;
  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;
};

},{}],65:[function(_dereq_,module,exports){
// 20.2.2.28 Math.sign(x)
module.exports = Math.sign || function sign(x) {
  // eslint-disable-next-line no-self-compare
  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;
};

},{}],66:[function(_dereq_,module,exports){
var META = _dereq_(124)('meta');
var isObject = _dereq_(51);
var has = _dereq_(41);
var setDesc = _dereq_(72).f;
var id = 0;
var isExtensible = Object.isExtensible || function () {
  return true;
};
var FREEZE = !_dereq_(35)(function () {
  return isExtensible(Object.preventExtensions({}));
});
var setMeta = function (it) {
  setDesc(it, META, { value: {
    i: 'O' + ++id, // object ID
    w: {}          // weak collections IDs
  } });
};
var fastKey = function (it, create) {
  // return primitive with prefix
  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
  if (!has(it, META)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return 'F';
    // not necessary to add metadata
    if (!create) return 'E';
    // add missing metadata
    setMeta(it);
  // return object ID
  } return it[META].i;
};
var getWeak = function (it, create) {
  if (!has(it, META)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return true;
    // not necessary to add metadata
    if (!create) return false;
    // add missing metadata
    setMeta(it);
  // return hash weak collections IDs
  } return it[META].w;
};
// add metadata on freeze-family methods calling
var onFreeze = function (it) {
  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);
  return it;
};
var meta = module.exports = {
  KEY: META,
  NEED: false,
  fastKey: fastKey,
  getWeak: getWeak,
  onFreeze: onFreeze
};

},{"124":124,"35":35,"41":41,"51":51,"72":72}],67:[function(_dereq_,module,exports){
var Map = _dereq_(160);
var $export = _dereq_(33);
var shared = _dereq_(103)('metadata');
var store = shared.store || (shared.store = new (_dereq_(266))());

var getOrCreateMetadataMap = function (target, targetKey, create) {
  var targetMetadata = store.get(target);
  if (!targetMetadata) {
    if (!create) return undefined;
    store.set(target, targetMetadata = new Map());
  }
  var keyMetadata = targetMetadata.get(targetKey);
  if (!keyMetadata) {
    if (!create) return undefined;
    targetMetadata.set(targetKey, keyMetadata = new Map());
  } return keyMetadata;
};
var ordinaryHasOwnMetadata = function (MetadataKey, O, P) {
  var metadataMap = getOrCreateMetadataMap(O, P, false);
  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);
};
var ordinaryGetOwnMetadata = function (MetadataKey, O, P) {
  var metadataMap = getOrCreateMetadataMap(O, P, false);
  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);
};
var ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {
  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);
};
var ordinaryOwnMetadataKeys = function (target, targetKey) {
  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);
  var keys = [];
  if (metadataMap) metadataMap.forEach(function (_, key) { keys.push(key); });
  return keys;
};
var toMetaKey = function (it) {
  return it === undefined || typeof it == 'symbol' ? it : String(it);
};
var exp = function (O) {
  $export($export.S, 'Reflect', O);
};

module.exports = {
  store: store,
  map: getOrCreateMetadataMap,
  has: ordinaryHasOwnMetadata,
  get: ordinaryGetOwnMetadata,
  set: ordinaryDefineOwnMetadata,
  keys: ordinaryOwnMetadataKeys,
  key: toMetaKey,
  exp: exp
};

},{"103":103,"160":160,"266":266,"33":33}],68:[function(_dereq_,module,exports){
var global = _dereq_(40);
var macrotask = _dereq_(113).set;
var Observer = global.MutationObserver || global.WebKitMutationObserver;
var process = global.process;
var Promise = global.Promise;
var isNode = _dereq_(18)(process) == 'process';

module.exports = function () {
  var head, last, notify;

  var flush = function () {
    var parent, fn;
    if (isNode && (parent = process.domain)) parent.exit();
    while (head) {
      fn = head.fn;
      head = head.next;
      try {
        fn();
      } catch (e) {
        if (head) notify();
        else last = undefined;
        throw e;
      }
    } last = undefined;
    if (parent) parent.enter();
  };

  // Node.js
  if (isNode) {
    notify = function () {
      process.nextTick(flush);
    };
  // browsers with MutationObserver
  } else if (Observer) {
    var toggle = true;
    var node = document.createTextNode('');
    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (Promise && Promise.resolve) {
    var promise = Promise.resolve();
    notify = function () {
      promise.then(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessag
  // - onreadystatechange
  // - setTimeout
  } else {
    notify = function () {
      // strange IE + webpack dev server bug - use .call(global)
      macrotask.call(global, flush);
    };
  }

  return function (fn) {
    var task = { fn: fn, next: undefined };
    if (last) last.next = task;
    if (!head) {
      head = task;
      notify();
    } last = task;
  };
};

},{"113":113,"18":18,"40":40}],69:[function(_dereq_,module,exports){
'use strict';
// 25.4.1.5 NewPromiseCapability(C)
var aFunction = _dereq_(3);

function PromiseCapability(C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aFunction(resolve);
  this.reject = aFunction(reject);
}

module.exports.f = function (C) {
  return new PromiseCapability(C);
};

},{"3":3}],70:[function(_dereq_,module,exports){
'use strict';
// 19.1.2.1 Object.assign(target, source, ...)
var getKeys = _dereq_(81);
var gOPS = _dereq_(78);
var pIE = _dereq_(82);
var toObject = _dereq_(119);
var IObject = _dereq_(47);
var $assign = Object.assign;

// should work with symbols and should have deterministic property order (V8 bug)
module.exports = !$assign || _dereq_(35)(function () {
  var A = {};
  var B = {};
  // eslint-disable-next-line no-undef
  var S = Symbol();
  var K = 'abcdefghijklmnopqrst';
  A[S] = 7;
  K.split('').forEach(function (k) { B[k] = k; });
  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars
  var T = toObject(target);
  var aLen = arguments.length;
  var index = 1;
  var getSymbols = gOPS.f;
  var isEnum = pIE.f;
  while (aLen > index) {
    var S = IObject(arguments[index++]);
    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];
  } return T;
} : $assign;

},{"119":119,"35":35,"47":47,"78":78,"81":81,"82":82}],71:[function(_dereq_,module,exports){
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
var anObject = _dereq_(7);
var dPs = _dereq_(73);
var enumBugKeys = _dereq_(31);
var IE_PROTO = _dereq_(102)('IE_PROTO');
var Empty = function () { /* empty */ };
var PROTOTYPE = 'prototype';

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var createDict = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = _dereq_(30)('iframe');
  var i = enumBugKeys.length;
  var lt = '<';
  var gt = '>';
  var iframeDocument;
  iframe.style.display = 'none';
  _dereq_(43).appendChild(iframe);
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url
  // createDict = iframe.contentWindow.Object;
  // html.removeChild(iframe);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);
  iframeDocument.close();
  createDict = iframeDocument.F;
  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];
  return createDict();
};

module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    Empty[PROTOTYPE] = anObject(O);
    result = new Empty();
    Empty[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = createDict();
  return Properties === undefined ? result : dPs(result, Properties);
};

},{"102":102,"30":30,"31":31,"43":43,"7":7,"73":73}],72:[function(_dereq_,module,exports){
var anObject = _dereq_(7);
var IE8_DOM_DEFINE = _dereq_(44);
var toPrimitive = _dereq_(120);
var dP = Object.defineProperty;

exports.f = _dereq_(29) ? Object.defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return dP(O, P, Attributes);
  } catch (e) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};

},{"120":120,"29":29,"44":44,"7":7}],73:[function(_dereq_,module,exports){
var dP = _dereq_(72);
var anObject = _dereq_(7);
var getKeys = _dereq_(81);

module.exports = _dereq_(29) ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = getKeys(Properties);
  var length = keys.length;
  var i = 0;
  var P;
  while (length > i) dP.f(O, P = keys[i++], Properties[P]);
  return O;
};

},{"29":29,"7":7,"72":72,"81":81}],74:[function(_dereq_,module,exports){
'use strict';
// Forced replacement prototype accessors methods
module.exports = _dereq_(60) || !_dereq_(35)(function () {
  var K = Math.random();
  // In FF throws only define methods
  // eslint-disable-next-line no-undef, no-useless-call
  __defineSetter__.call(null, K, function () { /* empty */ });
  delete _dereq_(40)[K];
});

},{"35":35,"40":40,"60":60}],75:[function(_dereq_,module,exports){
var pIE = _dereq_(82);
var createDesc = _dereq_(92);
var toIObject = _dereq_(117);
var toPrimitive = _dereq_(120);
var has = _dereq_(41);
var IE8_DOM_DEFINE = _dereq_(44);
var gOPD = Object.getOwnPropertyDescriptor;

exports.f = _dereq_(29) ? gOPD : function getOwnPropertyDescriptor(O, P) {
  O = toIObject(O);
  P = toPrimitive(P, true);
  if (IE8_DOM_DEFINE) try {
    return gOPD(O, P);
  } catch (e) { /* empty */ }
  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);
};

},{"117":117,"120":120,"29":29,"41":41,"44":44,"82":82,"92":92}],76:[function(_dereq_,module,exports){
// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
var toIObject = _dereq_(117);
var gOPN = _dereq_(77).f;
var toString = {}.toString;

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return gOPN(it);
  } catch (e) {
    return windowNames.slice();
  }
};

module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));
};

},{"117":117,"77":77}],77:[function(_dereq_,module,exports){
// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)
var $keys = _dereq_(80);
var hiddenKeys = _dereq_(31).concat('length', 'prototype');

exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return $keys(O, hiddenKeys);
};

},{"31":31,"80":80}],78:[function(_dereq_,module,exports){
exports.f = Object.getOwnPropertySymbols;

},{}],79:[function(_dereq_,module,exports){
// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)
var has = _dereq_(41);
var toObject = _dereq_(119);
var IE_PROTO = _dereq_(102)('IE_PROTO');
var ObjectProto = Object.prototype;

module.exports = Object.getPrototypeOf || function (O) {
  O = toObject(O);
  if (has(O, IE_PROTO)) return O[IE_PROTO];
  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectProto : null;
};

},{"102":102,"119":119,"41":41}],80:[function(_dereq_,module,exports){
var has = _dereq_(41);
var toIObject = _dereq_(117);
var arrayIndexOf = _dereq_(11)(false);
var IE_PROTO = _dereq_(102)('IE_PROTO');

module.exports = function (object, names) {
  var O = toIObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (has(O, key = names[i++])) {
    ~arrayIndexOf(result, key) || result.push(key);
  }
  return result;
};

},{"102":102,"11":11,"117":117,"41":41}],81:[function(_dereq_,module,exports){
// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var $keys = _dereq_(80);
var enumBugKeys = _dereq_(31);

module.exports = Object.keys || function keys(O) {
  return $keys(O, enumBugKeys);
};

},{"31":31,"80":80}],82:[function(_dereq_,module,exports){
exports.f = {}.propertyIsEnumerable;

},{}],83:[function(_dereq_,module,exports){
// most Object methods by ES6 should accept primitives
var $export = _dereq_(33);
var core = _dereq_(23);
var fails = _dereq_(35);
module.exports = function (KEY, exec) {
  var fn = (core.Object || {})[KEY] || Object[KEY];
  var exp = {};
  exp[KEY] = exec(fn);
  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);
};

},{"23":23,"33":33,"35":35}],84:[function(_dereq_,module,exports){
var getKeys = _dereq_(81);
var toIObject = _dereq_(117);
var isEnum = _dereq_(82).f;
module.exports = function (isEntries) {
  return function (it) {
    var O = toIObject(it);
    var keys = getKeys(O);
    var length = keys.length;
    var i = 0;
    var result = [];
    var key;
    while (length > i) if (isEnum.call(O, key = keys[i++])) {
      result.push(isEntries ? [key, O[key]] : O[key]);
    } return result;
  };
};

},{"117":117,"81":81,"82":82}],85:[function(_dereq_,module,exports){
// all object keys, includes non-enumerable and symbols
var gOPN = _dereq_(77);
var gOPS = _dereq_(78);
var anObject = _dereq_(7);
var Reflect = _dereq_(40).Reflect;
module.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {
  var keys = gOPN.f(anObject(it));
  var getSymbols = gOPS.f;
  return getSymbols ? keys.concat(getSymbols(it)) : keys;
};

},{"40":40,"7":7,"77":77,"78":78}],86:[function(_dereq_,module,exports){
var $parseFloat = _dereq_(40).parseFloat;
var $trim = _dereq_(111).trim;

module.exports = 1 / $parseFloat(_dereq_(112) + '-0') !== -Infinity ? function parseFloat(str) {
  var string = $trim(String(str), 3);
  var result = $parseFloat(string);
  return result === 0 && string.charAt(0) == '-' ? -0 : result;
} : $parseFloat;

},{"111":111,"112":112,"40":40}],87:[function(_dereq_,module,exports){
var $parseInt = _dereq_(40).parseInt;
var $trim = _dereq_(111).trim;
var ws = _dereq_(112);
var hex = /^[-+]?0[xX]/;

module.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {
  var string = $trim(String(str), 3);
  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));
} : $parseInt;

},{"111":111,"112":112,"40":40}],88:[function(_dereq_,module,exports){
'use strict';
var path = _dereq_(89);
var invoke = _dereq_(46);
var aFunction = _dereq_(3);
module.exports = function (/* ...pargs */) {
  var fn = aFunction(this);
  var length = arguments.length;
  var pargs = Array(length);
  var i = 0;
  var _ = path._;
  var holder = false;
  while (length > i) if ((pargs[i] = arguments[i++]) === _) holder = true;
  return function (/* ...args */) {
    var that = this;
    var aLen = arguments.length;
    var j = 0;
    var k = 0;
    var args;
    if (!holder && !aLen) return invoke(fn, pargs, that);
    args = pargs.slice();
    if (holder) for (;length > j; j++) if (args[j] === _) args[j] = arguments[k++];
    while (aLen > k) args.push(arguments[k++]);
    return invoke(fn, args, that);
  };
};

},{"3":3,"46":46,"89":89}],89:[function(_dereq_,module,exports){
module.exports = _dereq_(40);

},{"40":40}],90:[function(_dereq_,module,exports){
module.exports = function (exec) {
  try {
    return { e: false, v: exec() };
  } catch (e) {
    return { e: true, v: e };
  }
};

},{}],91:[function(_dereq_,module,exports){
var newPromiseCapability = _dereq_(69);

module.exports = function (C, x) {
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};

},{"69":69}],92:[function(_dereq_,module,exports){
module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};

},{}],93:[function(_dereq_,module,exports){
var redefine = _dereq_(94);
module.exports = function (target, src, safe) {
  for (var key in src) redefine(target, key, src[key], safe);
  return target;
};

},{"94":94}],94:[function(_dereq_,module,exports){
var global = _dereq_(40);
var hide = _dereq_(42);
var has = _dereq_(41);
var SRC = _dereq_(124)('src');
var TO_STRING = 'toString';
var $toString = Function[TO_STRING];
var TPL = ('' + $toString).split(TO_STRING);

_dereq_(23).inspectSource = function (it) {
  return $toString.call(it);
};

(module.exports = function (O, key, val, safe) {
  var isFunction = typeof val == 'function';
  if (isFunction) has(val, 'name') || hide(val, 'name', key);
  if (O[key] === val) return;
  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));
  if (O === global) {
    O[key] = val;
  } else if (!safe) {
    delete O[key];
    hide(O, key, val);
  } else if (O[key]) {
    O[key] = val;
  } else {
    hide(O, key, val);
  }
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, TO_STRING, function toString() {
  return typeof this == 'function' && this[SRC] || $toString.call(this);
});

},{"124":124,"23":23,"40":40,"41":41,"42":42}],95:[function(_dereq_,module,exports){
module.exports = function (regExp, replace) {
  var replacer = replace === Object(replace) ? function (part) {
    return replace[part];
  } : replace;
  return function (it) {
    return String(it).replace(regExp, replacer);
  };
};

},{}],96:[function(_dereq_,module,exports){
// 7.2.9 SameValue(x, y)
module.exports = Object.is || function is(x, y) {
  // eslint-disable-next-line no-self-compare
  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;
};

},{}],97:[function(_dereq_,module,exports){
'use strict';
// https://tc39.github.io/proposal-setmap-offrom/
var $export = _dereq_(33);
var aFunction = _dereq_(3);
var ctx = _dereq_(25);
var forOf = _dereq_(39);

module.exports = function (COLLECTION) {
  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {
    var mapFn = arguments[1];
    var mapping, A, n, cb;
    aFunction(this);
    mapping = mapFn !== undefined;
    if (mapping) aFunction(mapFn);
    if (source == undefined) return new this();
    A = [];
    if (mapping) {
      n = 0;
      cb = ctx(mapFn, arguments[2], 2);
      forOf(source, false, function (nextItem) {
        A.push(cb(nextItem, n++));
      });
    } else {
      forOf(source, false, A.push, A);
    }
    return new this(A);
  } });
};

},{"25":25,"3":3,"33":33,"39":39}],98:[function(_dereq_,module,exports){
'use strict';
// https://tc39.github.io/proposal-setmap-offrom/
var $export = _dereq_(33);

module.exports = function (COLLECTION) {
  $export($export.S, COLLECTION, { of: function of() {
    var length = arguments.length;
    var A = Array(length);
    while (length--) A[length] = arguments[length];
    return new this(A);
  } });
};

},{"33":33}],99:[function(_dereq_,module,exports){
// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */
var isObject = _dereq_(51);
var anObject = _dereq_(7);
var check = function (O, proto) {
  anObject(O);
  if (!isObject(proto) && proto !== null) throw TypeError(proto + ": can't set as prototype!");
};
module.exports = {
  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line
    function (test, buggy, set) {
      try {
        set = _dereq_(25)(Function.call, _dereq_(75).f(Object.prototype, '__proto__').set, 2);
        set(test, []);
        buggy = !(test instanceof Array);
      } catch (e) { buggy = true; }
      return function setPrototypeOf(O, proto) {
        check(O, proto);
        if (buggy) O.__proto__ = proto;
        else set(O, proto);
        return O;
      };
    }({}, false) : undefined),
  check: check
};

},{"25":25,"51":51,"7":7,"75":75}],100:[function(_dereq_,module,exports){
'use strict';
var global = _dereq_(40);
var dP = _dereq_(72);
var DESCRIPTORS = _dereq_(29);
var SPECIES = _dereq_(128)('species');

module.exports = function (KEY) {
  var C = global[KEY];
  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {
    configurable: true,
    get: function () { return this; }
  });
};

},{"128":128,"29":29,"40":40,"72":72}],101:[function(_dereq_,module,exports){
var def = _dereq_(72).f;
var has = _dereq_(41);
var TAG = _dereq_(128)('toStringTag');

module.exports = function (it, tag, stat) {
  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });
};

},{"128":128,"41":41,"72":72}],102:[function(_dereq_,module,exports){
var shared = _dereq_(103)('keys');
var uid = _dereq_(124);
module.exports = function (key) {
  return shared[key] || (shared[key] = uid(key));
};

},{"103":103,"124":124}],103:[function(_dereq_,module,exports){
var global = _dereq_(40);
var SHARED = '__core-js_shared__';
var store = global[SHARED] || (global[SHARED] = {});
module.exports = function (key) {
  return store[key] || (store[key] = {});
};

},{"40":40}],104:[function(_dereq_,module,exports){
// 7.3.20 SpeciesConstructor(O, defaultConstructor)
var anObject = _dereq_(7);
var aFunction = _dereq_(3);
var SPECIES = _dereq_(128)('species');
module.exports = function (O, D) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);
};

},{"128":128,"3":3,"7":7}],105:[function(_dereq_,module,exports){
'use strict';
var fails = _dereq_(35);

module.exports = function (method, arg) {
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call
    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);
  });
};

},{"35":35}],106:[function(_dereq_,module,exports){
var toInteger = _dereq_(116);
var defined = _dereq_(28);
// true  -> String#at
// false -> String#codePointAt
module.exports = function (TO_STRING) {
  return function (that, pos) {
    var s = String(defined(that));
    var i = toInteger(pos);
    var l = s.length;
    var a, b;
    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;
    a = s.charCodeAt(i);
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff
      ? TO_STRING ? s.charAt(i) : a
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;
  };
};

},{"116":116,"28":28}],107:[function(_dereq_,module,exports){
// helper for String#{startsWith, endsWith, includes}
var isRegExp = _dereq_(52);
var defined = _dereq_(28);

module.exports = function (that, searchString, NAME) {
  if (isRegExp(searchString)) throw TypeError('String#' + NAME + " doesn't accept regex!");
  return String(defined(that));
};

},{"28":28,"52":52}],108:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var fails = _dereq_(35);
var defined = _dereq_(28);
var quot = /"/g;
// B.2.3.2.1 CreateHTML(string, tag, attribute, value)
var createHTML = function (string, tag, attribute, value) {
  var S = String(defined(string));
  var p1 = '<' + tag;
  if (attribute !== '') p1 += ' ' + attribute + '="' + String(value).replace(quot, '&quot;') + '"';
  return p1 + '>' + S + '</' + tag + '>';
};
module.exports = function (NAME, exec) {
  var O = {};
  O[NAME] = exec(createHTML);
  $export($export.P + $export.F * fails(function () {
    var test = ''[NAME]('"');
    return test !== test.toLowerCase() || test.split('"').length > 3;
  }), 'String', O);
};

},{"28":28,"33":33,"35":35}],109:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-string-pad-start-end
var toLength = _dereq_(118);
var repeat = _dereq_(110);
var defined = _dereq_(28);

module.exports = function (that, maxLength, fillString, left) {
  var S = String(defined(that));
  var stringLength = S.length;
  var fillStr = fillString === undefined ? ' ' : String(fillString);
  var intMaxLength = toLength(maxLength);
  if (intMaxLength <= stringLength || fillStr == '') return S;
  var fillLen = intMaxLength - stringLength;
  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));
  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);
  return left ? stringFiller + S : S + stringFiller;
};

},{"110":110,"118":118,"28":28}],110:[function(_dereq_,module,exports){
'use strict';
var toInteger = _dereq_(116);
var defined = _dereq_(28);

module.exports = function repeat(count) {
  var str = String(defined(this));
  var res = '';
  var n = toInteger(count);
  if (n < 0 || n == Infinity) throw RangeError("Count can't be negative");
  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;
  return res;
};

},{"116":116,"28":28}],111:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var defined = _dereq_(28);
var fails = _dereq_(35);
var spaces = _dereq_(112);
var space = '[' + spaces + ']';
var non = '\u200b\u0085';
var ltrim = RegExp('^' + space + space + '*');
var rtrim = RegExp(space + space + '*$');

var exporter = function (KEY, exec, ALIAS) {
  var exp = {};
  var FORCE = fails(function () {
    return !!spaces[KEY]() || non[KEY]() != non;
  });
  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];
  if (ALIAS) exp[ALIAS] = fn;
  $export($export.P + $export.F * FORCE, 'String', exp);
};

// 1 -> String#trimLeft
// 2 -> String#trimRight
// 3 -> String#trim
var trim = exporter.trim = function (string, TYPE) {
  string = String(defined(string));
  if (TYPE & 1) string = string.replace(ltrim, '');
  if (TYPE & 2) string = string.replace(rtrim, '');
  return string;
};

module.exports = exporter;

},{"112":112,"28":28,"33":33,"35":35}],112:[function(_dereq_,module,exports){
module.exports = '\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003' +
  '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';

},{}],113:[function(_dereq_,module,exports){
var ctx = _dereq_(25);
var invoke = _dereq_(46);
var html = _dereq_(43);
var cel = _dereq_(30);
var global = _dereq_(40);
var process = global.process;
var setTask = global.setImmediate;
var clearTask = global.clearImmediate;
var MessageChannel = global.MessageChannel;
var Dispatch = global.Dispatch;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var defer, channel, port;
var run = function () {
  var id = +this;
  // eslint-disable-next-line no-prototype-builtins
  if (queue.hasOwnProperty(id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};
var listener = function (event) {
  run.call(event.data);
};
// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!setTask || !clearTask) {
  setTask = function setImmediate(fn) {
    var args = [];
    var i = 1;
    while (arguments.length > i) args.push(arguments[i++]);
    queue[++counter] = function () {
      // eslint-disable-next-line no-new-func
      invoke(typeof fn == 'function' ? fn : Function(fn), args);
    };
    defer(counter);
    return counter;
  };
  clearTask = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (_dereq_(18)(process) == 'process') {
    defer = function (id) {
      process.nextTick(ctx(run, id, 1));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(ctx(run, id, 1));
    };
  // Browsers with MessageChannel, includes WebWorkers
  } else if (MessageChannel) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = listener;
    defer = ctx(port.postMessage, port, 1);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {
    defer = function (id) {
      global.postMessage(id + '', '*');
    };
    global.addEventListener('message', listener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in cel('script')) {
    defer = function (id) {
      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run.call(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(ctx(run, id, 1), 0);
    };
  }
}
module.exports = {
  set: setTask,
  clear: clearTask
};

},{"18":18,"25":25,"30":30,"40":40,"43":43,"46":46}],114:[function(_dereq_,module,exports){
var toInteger = _dereq_(116);
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
  index = toInteger(index);
  return index < 0 ? max(index + length, 0) : min(index, length);
};

},{"116":116}],115:[function(_dereq_,module,exports){
// https://tc39.github.io/ecma262/#sec-toindex
var toInteger = _dereq_(116);
var toLength = _dereq_(118);
module.exports = function (it) {
  if (it === undefined) return 0;
  var number = toInteger(it);
  var length = toLength(number);
  if (number !== length) throw RangeError('Wrong length!');
  return length;
};

},{"116":116,"118":118}],116:[function(_dereq_,module,exports){
// 7.1.4 ToInteger
var ceil = Math.ceil;
var floor = Math.floor;
module.exports = function (it) {
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
};

},{}],117:[function(_dereq_,module,exports){
// to indexed object, toObject with fallback for non-array-like ES3 strings
var IObject = _dereq_(47);
var defined = _dereq_(28);
module.exports = function (it) {
  return IObject(defined(it));
};

},{"28":28,"47":47}],118:[function(_dereq_,module,exports){
// 7.1.15 ToLength
var toInteger = _dereq_(116);
var min = Math.min;
module.exports = function (it) {
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991
};

},{"116":116}],119:[function(_dereq_,module,exports){
// 7.1.13 ToObject(argument)
var defined = _dereq_(28);
module.exports = function (it) {
  return Object(defined(it));
};

},{"28":28}],120:[function(_dereq_,module,exports){
// 7.1.1 ToPrimitive(input [, PreferredType])
var isObject = _dereq_(51);
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function (it, S) {
  if (!isObject(it)) return it;
  var fn, val;
  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;
  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  throw TypeError("Can't convert object to primitive value");
};

},{"51":51}],121:[function(_dereq_,module,exports){
'use strict';
if (_dereq_(29)) {
  var LIBRARY = _dereq_(60);
  var global = _dereq_(40);
  var fails = _dereq_(35);
  var $export = _dereq_(33);
  var $typed = _dereq_(123);
  var $buffer = _dereq_(122);
  var ctx = _dereq_(25);
  var anInstance = _dereq_(6);
  var propertyDesc = _dereq_(92);
  var hide = _dereq_(42);
  var redefineAll = _dereq_(93);
  var toInteger = _dereq_(116);
  var toLength = _dereq_(118);
  var toIndex = _dereq_(115);
  var toAbsoluteIndex = _dereq_(114);
  var toPrimitive = _dereq_(120);
  var has = _dereq_(41);
  var classof = _dereq_(17);
  var isObject = _dereq_(51);
  var toObject = _dereq_(119);
  var isArrayIter = _dereq_(48);
  var create = _dereq_(71);
  var getPrototypeOf = _dereq_(79);
  var gOPN = _dereq_(77).f;
  var getIterFn = _dereq_(129);
  var uid = _dereq_(124);
  var wks = _dereq_(128);
  var createArrayMethod = _dereq_(12);
  var createArrayIncludes = _dereq_(11);
  var speciesConstructor = _dereq_(104);
  var ArrayIterators = _dereq_(141);
  var Iterators = _dereq_(58);
  var $iterDetect = _dereq_(56);
  var setSpecies = _dereq_(100);
  var arrayFill = _dereq_(9);
  var arrayCopyWithin = _dereq_(8);
  var $DP = _dereq_(72);
  var $GOPD = _dereq_(75);
  var dP = $DP.f;
  var gOPD = $GOPD.f;
  var RangeError = global.RangeError;
  var TypeError = global.TypeError;
  var Uint8Array = global.Uint8Array;
  var ARRAY_BUFFER = 'ArrayBuffer';
  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;
  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
  var PROTOTYPE = 'prototype';
  var ArrayProto = Array[PROTOTYPE];
  var $ArrayBuffer = $buffer.ArrayBuffer;
  var $DataView = $buffer.DataView;
  var arrayForEach = createArrayMethod(0);
  var arrayFilter = createArrayMethod(2);
  var arraySome = createArrayMethod(3);
  var arrayEvery = createArrayMethod(4);
  var arrayFind = createArrayMethod(5);
  var arrayFindIndex = createArrayMethod(6);
  var arrayIncludes = createArrayIncludes(true);
  var arrayIndexOf = createArrayIncludes(false);
  var arrayValues = ArrayIterators.values;
  var arrayKeys = ArrayIterators.keys;
  var arrayEntries = ArrayIterators.entries;
  var arrayLastIndexOf = ArrayProto.lastIndexOf;
  var arrayReduce = ArrayProto.reduce;
  var arrayReduceRight = ArrayProto.reduceRight;
  var arrayJoin = ArrayProto.join;
  var arraySort = ArrayProto.sort;
  var arraySlice = ArrayProto.slice;
  var arrayToString = ArrayProto.toString;
  var arrayToLocaleString = ArrayProto.toLocaleString;
  var ITERATOR = wks('iterator');
  var TAG = wks('toStringTag');
  var TYPED_CONSTRUCTOR = uid('typed_constructor');
  var DEF_CONSTRUCTOR = uid('def_constructor');
  var ALL_CONSTRUCTORS = $typed.CONSTR;
  var TYPED_ARRAY = $typed.TYPED;
  var VIEW = $typed.VIEW;
  var WRONG_LENGTH = 'Wrong length!';

  var $map = createArrayMethod(1, function (O, length) {
    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);
  });

  var LITTLE_ENDIAN = fails(function () {
    // eslint-disable-next-line no-undef
    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;
  });

  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {
    new Uint8Array(1).set({});
  });

  var toOffset = function (it, BYTES) {
    var offset = toInteger(it);
    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');
    return offset;
  };

  var validate = function (it) {
    if (isObject(it) && TYPED_ARRAY in it) return it;
    throw TypeError(it + ' is not a typed array!');
  };

  var allocate = function (C, length) {
    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {
      throw TypeError('It is not a typed array constructor!');
    } return new C(length);
  };

  var speciesFromList = function (O, list) {
    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);
  };

  var fromList = function (C, list) {
    var index = 0;
    var length = list.length;
    var result = allocate(C, length);
    while (length > index) result[index] = list[index++];
    return result;
  };

  var addGetter = function (it, key, internal) {
    dP(it, key, { get: function () { return this._d[internal]; } });
  };

  var $from = function from(source /* , mapfn, thisArg */) {
    var O = toObject(source);
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var iterFn = getIterFn(O);
    var i, length, values, result, step, iterator;
    if (iterFn != undefined && !isArrayIter(iterFn)) {
      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {
        values.push(step.value);
      } O = values;
    }
    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);
    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {
      result[i] = mapping ? mapfn(O[i], i) : O[i];
    }
    return result;
  };

  var $of = function of(/* ...items */) {
    var index = 0;
    var length = arguments.length;
    var result = allocate(this, length);
    while (length > index) result[index] = arguments[index++];
    return result;
  };

  // iOS Safari 6.x fails here
  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });

  var $toLocaleString = function toLocaleString() {
    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);
  };

  var proto = {
    copyWithin: function copyWithin(target, start /* , end */) {
      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
    },
    every: function every(callbackfn /* , thisArg */) {
      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars
      return arrayFill.apply(validate(this), arguments);
    },
    filter: function filter(callbackfn /* , thisArg */) {
      return speciesFromList(this, arrayFilter(validate(this), callbackfn,
        arguments.length > 1 ? arguments[1] : undefined));
    },
    find: function find(predicate /* , thisArg */) {
      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
    },
    findIndex: function findIndex(predicate /* , thisArg */) {
      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
    },
    forEach: function forEach(callbackfn /* , thisArg */) {
      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    indexOf: function indexOf(searchElement /* , fromIndex */) {
      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
    },
    includes: function includes(searchElement /* , fromIndex */) {
      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
    },
    join: function join(separator) { // eslint-disable-line no-unused-vars
      return arrayJoin.apply(validate(this), arguments);
    },
    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars
      return arrayLastIndexOf.apply(validate(this), arguments);
    },
    map: function map(mapfn /* , thisArg */) {
      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars
      return arrayReduce.apply(validate(this), arguments);
    },
    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars
      return arrayReduceRight.apply(validate(this), arguments);
    },
    reverse: function reverse() {
      var that = this;
      var length = validate(that).length;
      var middle = Math.floor(length / 2);
      var index = 0;
      var value;
      while (index < middle) {
        value = that[index];
        that[index++] = that[--length];
        that[length] = value;
      } return that;
    },
    some: function some(callbackfn /* , thisArg */) {
      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    sort: function sort(comparefn) {
      return arraySort.call(validate(this), comparefn);
    },
    subarray: function subarray(begin, end) {
      var O = validate(this);
      var length = O.length;
      var $begin = toAbsoluteIndex(begin, length);
      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(
        O.buffer,
        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,
        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)
      );
    }
  };

  var $slice = function slice(start, end) {
    return speciesFromList(this, arraySlice.call(validate(this), start, end));
  };

  var $set = function set(arrayLike /* , offset */) {
    validate(this);
    var offset = toOffset(arguments[1], 1);
    var length = this.length;
    var src = toObject(arrayLike);
    var len = toLength(src.length);
    var index = 0;
    if (len + offset > length) throw RangeError(WRONG_LENGTH);
    while (index < len) this[offset + index] = src[index++];
  };

  var $iterators = {
    entries: function entries() {
      return arrayEntries.call(validate(this));
    },
    keys: function keys() {
      return arrayKeys.call(validate(this));
    },
    values: function values() {
      return arrayValues.call(validate(this));
    }
  };

  var isTAIndex = function (target, key) {
    return isObject(target)
      && target[TYPED_ARRAY]
      && typeof key != 'symbol'
      && key in target
      && String(+key) == String(key);
  };
  var $getDesc = function getOwnPropertyDescriptor(target, key) {
    return isTAIndex(target, key = toPrimitive(key, true))
      ? propertyDesc(2, target[key])
      : gOPD(target, key);
  };
  var $setDesc = function defineProperty(target, key, desc) {
    if (isTAIndex(target, key = toPrimitive(key, true))
      && isObject(desc)
      && has(desc, 'value')
      && !has(desc, 'get')
      && !has(desc, 'set')
      // TODO: add validation descriptor w/o calling accessors
      && !desc.configurable
      && (!has(desc, 'writable') || desc.writable)
      && (!has(desc, 'enumerable') || desc.enumerable)
    ) {
      target[key] = desc.value;
      return target;
    } return dP(target, key, desc);
  };

  if (!ALL_CONSTRUCTORS) {
    $GOPD.f = $getDesc;
    $DP.f = $setDesc;
  }

  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {
    getOwnPropertyDescriptor: $getDesc,
    defineProperty: $setDesc
  });

  if (fails(function () { arrayToString.call({}); })) {
    arrayToString = arrayToLocaleString = function toString() {
      return arrayJoin.call(this);
    };
  }

  var $TypedArrayPrototype$ = redefineAll({}, proto);
  redefineAll($TypedArrayPrototype$, $iterators);
  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);
  redefineAll($TypedArrayPrototype$, {
    slice: $slice,
    set: $set,
    constructor: function () { /* noop */ },
    toString: arrayToString,
    toLocaleString: $toLocaleString
  });
  addGetter($TypedArrayPrototype$, 'buffer', 'b');
  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');
  addGetter($TypedArrayPrototype$, 'byteLength', 'l');
  addGetter($TypedArrayPrototype$, 'length', 'e');
  dP($TypedArrayPrototype$, TAG, {
    get: function () { return this[TYPED_ARRAY]; }
  });

  // eslint-disable-next-line max-statements
  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {
    CLAMPED = !!CLAMPED;
    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';
    var GETTER = 'get' + KEY;
    var SETTER = 'set' + KEY;
    var TypedArray = global[NAME];
    var Base = TypedArray || {};
    var TAC = TypedArray && getPrototypeOf(TypedArray);
    var FORCED = !TypedArray || !$typed.ABV;
    var O = {};
    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];
    var getter = function (that, index) {
      var data = that._d;
      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);
    };
    var setter = function (that, index, value) {
      var data = that._d;
      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;
      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);
    };
    var addElement = function (that, index) {
      dP(that, index, {
        get: function () {
          return getter(this, index);
        },
        set: function (value) {
          return setter(this, index, value);
        },
        enumerable: true
      });
    };
    if (FORCED) {
      TypedArray = wrapper(function (that, data, $offset, $length) {
        anInstance(that, TypedArray, NAME, '_d');
        var index = 0;
        var offset = 0;
        var buffer, byteLength, length, klass;
        if (!isObject(data)) {
          length = toIndex(data);
          byteLength = length * BYTES;
          buffer = new $ArrayBuffer(byteLength);
        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {
          buffer = data;
          offset = toOffset($offset, BYTES);
          var $len = data.byteLength;
          if ($length === undefined) {
            if ($len % BYTES) throw RangeError(WRONG_LENGTH);
            byteLength = $len - offset;
            if (byteLength < 0) throw RangeError(WRONG_LENGTH);
          } else {
            byteLength = toLength($length) * BYTES;
            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);
          }
          length = byteLength / BYTES;
        } else if (TYPED_ARRAY in data) {
          return fromList(TypedArray, data);
        } else {
          return $from.call(TypedArray, data);
        }
        hide(that, '_d', {
          b: buffer,
          o: offset,
          l: byteLength,
          e: length,
          v: new $DataView(buffer)
        });
        while (index < length) addElement(that, index++);
      });
      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);
      hide(TypedArrayPrototype, 'constructor', TypedArray);
    } else if (!fails(function () {
      TypedArray(1);
    }) || !fails(function () {
      new TypedArray(-1); // eslint-disable-line no-new
    }) || !$iterDetect(function (iter) {
      new TypedArray(); // eslint-disable-line no-new
      new TypedArray(null); // eslint-disable-line no-new
      new TypedArray(1.5); // eslint-disable-line no-new
      new TypedArray(iter); // eslint-disable-line no-new
    }, true)) {
      TypedArray = wrapper(function (that, data, $offset, $length) {
        anInstance(that, TypedArray, NAME);
        var klass;
        // `ws` module bug, temporarily remove validation length for Uint8Array
        // https://github.com/websockets/ws/pull/645
        if (!isObject(data)) return new Base(toIndex(data));
        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {
          return $length !== undefined
            ? new Base(data, toOffset($offset, BYTES), $length)
            : $offset !== undefined
              ? new Base(data, toOffset($offset, BYTES))
              : new Base(data);
        }
        if (TYPED_ARRAY in data) return fromList(TypedArray, data);
        return $from.call(TypedArray, data);
      });
      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {
        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);
      });
      TypedArray[PROTOTYPE] = TypedArrayPrototype;
      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;
    }
    var $nativeIterator = TypedArrayPrototype[ITERATOR];
    var CORRECT_ITER_NAME = !!$nativeIterator
      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);
    var $iterator = $iterators.values;
    hide(TypedArray, TYPED_CONSTRUCTOR, true);
    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);
    hide(TypedArrayPrototype, VIEW, true);
    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);

    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {
      dP(TypedArrayPrototype, TAG, {
        get: function () { return NAME; }
      });
    }

    O[NAME] = TypedArray;

    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);

    $export($export.S, NAME, {
      BYTES_PER_ELEMENT: BYTES
    });

    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {
      from: $from,
      of: $of
    });

    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);

    $export($export.P, NAME, proto);

    setSpecies(NAME);

    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });

    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);

    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;

    $export($export.P + $export.F * fails(function () {
      new TypedArray(1).slice();
    }), NAME, { slice: $slice });

    $export($export.P + $export.F * (fails(function () {
      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();
    }) || !fails(function () {
      TypedArrayPrototype.toLocaleString.call([1, 2]);
    })), NAME, { toLocaleString: $toLocaleString });

    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;
    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);
  };
} else module.exports = function () { /* empty */ };

},{"100":100,"104":104,"11":11,"114":114,"115":115,"116":116,"118":118,"119":119,"12":12,"120":120,"122":122,"123":123,"124":124,"128":128,"129":129,"141":141,"17":17,"25":25,"29":29,"33":33,"35":35,"40":40,"41":41,"42":42,"48":48,"51":51,"56":56,"58":58,"6":6,"60":60,"71":71,"72":72,"75":75,"77":77,"79":79,"8":8,"9":9,"92":92,"93":93}],122:[function(_dereq_,module,exports){
'use strict';
var global = _dereq_(40);
var DESCRIPTORS = _dereq_(29);
var LIBRARY = _dereq_(60);
var $typed = _dereq_(123);
var hide = _dereq_(42);
var redefineAll = _dereq_(93);
var fails = _dereq_(35);
var anInstance = _dereq_(6);
var toInteger = _dereq_(116);
var toLength = _dereq_(118);
var toIndex = _dereq_(115);
var gOPN = _dereq_(77).f;
var dP = _dereq_(72).f;
var arrayFill = _dereq_(9);
var setToStringTag = _dereq_(101);
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length!';
var WRONG_INDEX = 'Wrong index!';
var $ArrayBuffer = global[ARRAY_BUFFER];
var $DataView = global[DATA_VIEW];
var Math = global.Math;
var RangeError = global.RangeError;
// eslint-disable-next-line no-shadow-restricted-names
var Infinity = global.Infinity;
var BaseBuffer = $ArrayBuffer;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;
var BUFFER = 'buffer';
var BYTE_LENGTH = 'byteLength';
var BYTE_OFFSET = 'byteOffset';
var $BUFFER = DESCRIPTORS ? '_b' : BUFFER;
var $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;
var $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;

// IEEE754 conversions based on https://github.com/feross/ieee754
function packIEEE754(value, mLen, nBytes) {
  var buffer = Array(nBytes);
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;
  var i = 0;
  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
  var e, m, c;
  value = abs(value);
  // eslint-disable-next-line no-self-compare
  if (value != value || value === Infinity) {
    // eslint-disable-next-line no-self-compare
    m = value != value ? 1 : 0;
    e = eMax;
  } else {
    e = floor(log(value) / LN2);
    if (value * (c = pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }
    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * pow(2, eBias - 1) * pow(2, mLen);
      e = 0;
    }
  }
  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);
  e = e << mLen | m;
  eLen += mLen;
  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);
  buffer[--i] |= s * 128;
  return buffer;
}
function unpackIEEE754(buffer, mLen, nBytes) {
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var nBits = eLen - 7;
  var i = nBytes - 1;
  var s = buffer[i--];
  var e = s & 127;
  var m;
  s >>= 7;
  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);
  m = e & (1 << -nBits) - 1;
  e >>= -nBits;
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);
  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : s ? -Infinity : Infinity;
  } else {
    m = m + pow(2, mLen);
    e = e - eBias;
  } return (s ? -1 : 1) * m * pow(2, e - mLen);
}

function unpackI32(bytes) {
  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];
}
function packI8(it) {
  return [it & 0xff];
}
function packI16(it) {
  return [it & 0xff, it >> 8 & 0xff];
}
function packI32(it) {
  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];
}
function packF64(it) {
  return packIEEE754(it, 52, 8);
}
function packF32(it) {
  return packIEEE754(it, 23, 4);
}

function addGetter(C, key, internal) {
  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });
}

function get(view, bytes, index, isLittleEndian) {
  var numIndex = +index;
  var intIndex = toIndex(numIndex);
  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);
  var store = view[$BUFFER]._b;
  var start = intIndex + view[$OFFSET];
  var pack = store.slice(start, start + bytes);
  return isLittleEndian ? pack : pack.reverse();
}
function set(view, bytes, index, conversion, value, isLittleEndian) {
  var numIndex = +index;
  var intIndex = toIndex(numIndex);
  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);
  var store = view[$BUFFER]._b;
  var start = intIndex + view[$OFFSET];
  var pack = conversion(+value);
  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];
}

if (!$typed.ABV) {
  $ArrayBuffer = function ArrayBuffer(length) {
    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);
    var byteLength = toIndex(length);
    this._b = arrayFill.call(Array(byteLength), 0);
    this[$LENGTH] = byteLength;
  };

  $DataView = function DataView(buffer, byteOffset, byteLength) {
    anInstance(this, $DataView, DATA_VIEW);
    anInstance(buffer, $ArrayBuffer, DATA_VIEW);
    var bufferLength = buffer[$LENGTH];
    var offset = toInteger(byteOffset);
    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');
    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);
    this[$BUFFER] = buffer;
    this[$OFFSET] = offset;
    this[$LENGTH] = byteLength;
  };

  if (DESCRIPTORS) {
    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');
    addGetter($DataView, BUFFER, '_b');
    addGetter($DataView, BYTE_LENGTH, '_l');
    addGetter($DataView, BYTE_OFFSET, '_o');
  }

  redefineAll($DataView[PROTOTYPE], {
    getInt8: function getInt8(byteOffset) {
      return get(this, 1, byteOffset)[0] << 24 >> 24;
    },
    getUint8: function getUint8(byteOffset) {
      return get(this, 1, byteOffset)[0];
    },
    getInt16: function getInt16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments[1]);
      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
    },
    getUint16: function getUint16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments[1]);
      return bytes[1] << 8 | bytes[0];
    },
    getInt32: function getInt32(byteOffset /* , littleEndian */) {
      return unpackI32(get(this, 4, byteOffset, arguments[1]));
    },
    getUint32: function getUint32(byteOffset /* , littleEndian */) {
      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;
    },
    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);
    },
    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);
    },
    setInt8: function setInt8(byteOffset, value) {
      set(this, 1, byteOffset, packI8, value);
    },
    setUint8: function setUint8(byteOffset, value) {
      set(this, 1, byteOffset, packI8, value);
    },
    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packI16, value, arguments[2]);
    },
    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packI16, value, arguments[2]);
    },
    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packI32, value, arguments[2]);
    },
    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packI32, value, arguments[2]);
    },
    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packF32, value, arguments[2]);
    },
    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {
      set(this, 8, byteOffset, packF64, value, arguments[2]);
    }
  });
} else {
  if (!fails(function () {
    $ArrayBuffer(1);
  }) || !fails(function () {
    new $ArrayBuffer(-1); // eslint-disable-line no-new
  }) || fails(function () {
    new $ArrayBuffer(); // eslint-disable-line no-new
    new $ArrayBuffer(1.5); // eslint-disable-line no-new
    new $ArrayBuffer(NaN); // eslint-disable-line no-new
    return $ArrayBuffer.name != ARRAY_BUFFER;
  })) {
    $ArrayBuffer = function ArrayBuffer(length) {
      anInstance(this, $ArrayBuffer);
      return new BaseBuffer(toIndex(length));
    };
    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];
    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {
      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);
    }
    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;
  }
  // iOS Safari 7.x bug
  var view = new $DataView(new $ArrayBuffer(2));
  var $setInt8 = $DataView[PROTOTYPE].setInt8;
  view.setInt8(0, 2147483648);
  view.setInt8(1, 2147483649);
  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {
    setInt8: function setInt8(byteOffset, value) {
      $setInt8.call(this, byteOffset, value << 24 >> 24);
    },
    setUint8: function setUint8(byteOffset, value) {
      $setInt8.call(this, byteOffset, value << 24 >> 24);
    }
  }, true);
}
setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);
hide($DataView[PROTOTYPE], $typed.VIEW, true);
exports[ARRAY_BUFFER] = $ArrayBuffer;
exports[DATA_VIEW] = $DataView;

},{"101":101,"115":115,"116":116,"118":118,"123":123,"29":29,"35":35,"40":40,"42":42,"6":6,"60":60,"72":72,"77":77,"9":9,"93":93}],123:[function(_dereq_,module,exports){
var global = _dereq_(40);
var hide = _dereq_(42);
var uid = _dereq_(124);
var TYPED = uid('typed_array');
var VIEW = uid('view');
var ABV = !!(global.ArrayBuffer && global.DataView);
var CONSTR = ABV;
var i = 0;
var l = 9;
var Typed;

var TypedArrayConstructors = (
  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'
).split(',');

while (i < l) {
  if (Typed = global[TypedArrayConstructors[i++]]) {
    hide(Typed.prototype, TYPED, true);
    hide(Typed.prototype, VIEW, true);
  } else CONSTR = false;
}

module.exports = {
  ABV: ABV,
  CONSTR: CONSTR,
  TYPED: TYPED,
  VIEW: VIEW
};

},{"124":124,"40":40,"42":42}],124:[function(_dereq_,module,exports){
var id = 0;
var px = Math.random();
module.exports = function (key) {
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
};

},{}],125:[function(_dereq_,module,exports){
var isObject = _dereq_(51);
module.exports = function (it, TYPE) {
  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');
  return it;
};

},{"51":51}],126:[function(_dereq_,module,exports){
var global = _dereq_(40);
var core = _dereq_(23);
var LIBRARY = _dereq_(60);
var wksExt = _dereq_(127);
var defineProperty = _dereq_(72).f;
module.exports = function (name) {
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });
};

},{"127":127,"23":23,"40":40,"60":60,"72":72}],127:[function(_dereq_,module,exports){
exports.f = _dereq_(128);

},{"128":128}],128:[function(_dereq_,module,exports){
var store = _dereq_(103)('wks');
var uid = _dereq_(124);
var Symbol = _dereq_(40).Symbol;
var USE_SYMBOL = typeof Symbol == 'function';

var $exports = module.exports = function (name) {
  return store[name] || (store[name] =
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));
};

$exports.store = store;

},{"103":103,"124":124,"40":40}],129:[function(_dereq_,module,exports){
var classof = _dereq_(17);
var ITERATOR = _dereq_(128)('iterator');
var Iterators = _dereq_(58);
module.exports = _dereq_(23).getIteratorMethod = function (it) {
  if (it != undefined) return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};

},{"128":128,"17":17,"23":23,"58":58}],130:[function(_dereq_,module,exports){
// https://github.com/benjamingr/RexExp.escape
var $export = _dereq_(33);
var $re = _dereq_(95)(/[\\^$*+?.()|[\]{}]/g, '\\$&');

$export($export.S, 'RegExp', { escape: function escape(it) { return $re(it); } });

},{"33":33,"95":95}],131:[function(_dereq_,module,exports){
// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)
var $export = _dereq_(33);

$export($export.P, 'Array', { copyWithin: _dereq_(8) });

_dereq_(5)('copyWithin');

},{"33":33,"5":5,"8":8}],132:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $every = _dereq_(12)(4);

$export($export.P + $export.F * !_dereq_(105)([].every, true), 'Array', {
  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])
  every: function every(callbackfn /* , thisArg */) {
    return $every(this, callbackfn, arguments[1]);
  }
});

},{"105":105,"12":12,"33":33}],133:[function(_dereq_,module,exports){
// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)
var $export = _dereq_(33);

$export($export.P, 'Array', { fill: _dereq_(9) });

_dereq_(5)('fill');

},{"33":33,"5":5,"9":9}],134:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $filter = _dereq_(12)(2);

$export($export.P + $export.F * !_dereq_(105)([].filter, true), 'Array', {
  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])
  filter: function filter(callbackfn /* , thisArg */) {
    return $filter(this, callbackfn, arguments[1]);
  }
});

},{"105":105,"12":12,"33":33}],135:[function(_dereq_,module,exports){
'use strict';
// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)
var $export = _dereq_(33);
var $find = _dereq_(12)(6);
var KEY = 'findIndex';
var forced = true;
// Shouldn't skip holes
if (KEY in []) Array(1)[KEY](function () { forced = false; });
$export($export.P + $export.F * forced, 'Array', {
  findIndex: function findIndex(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});
_dereq_(5)(KEY);

},{"12":12,"33":33,"5":5}],136:[function(_dereq_,module,exports){
'use strict';
// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)
var $export = _dereq_(33);
var $find = _dereq_(12)(5);
var KEY = 'find';
var forced = true;
// Shouldn't skip holes
if (KEY in []) Array(1)[KEY](function () { forced = false; });
$export($export.P + $export.F * forced, 'Array', {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});
_dereq_(5)(KEY);

},{"12":12,"33":33,"5":5}],137:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $forEach = _dereq_(12)(0);
var STRICT = _dereq_(105)([].forEach, true);

$export($export.P + $export.F * !STRICT, 'Array', {
  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])
  forEach: function forEach(callbackfn /* , thisArg */) {
    return $forEach(this, callbackfn, arguments[1]);
  }
});

},{"105":105,"12":12,"33":33}],138:[function(_dereq_,module,exports){
'use strict';
var ctx = _dereq_(25);
var $export = _dereq_(33);
var toObject = _dereq_(119);
var call = _dereq_(53);
var isArrayIter = _dereq_(48);
var toLength = _dereq_(118);
var createProperty = _dereq_(24);
var getIterFn = _dereq_(129);

$export($export.S + $export.F * !_dereq_(56)(function (iter) { Array.from(iter); }), 'Array', {
  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)
  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
    var O = toObject(arrayLike);
    var C = typeof this == 'function' ? this : Array;
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var index = 0;
    var iterFn = getIterFn(O);
    var length, result, step, iterator;
    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);
    // if object isn't iterable or it's array with default iterator - use simple case
    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {
      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {
        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);
      }
    } else {
      length = toLength(O.length);
      for (result = new C(length); length > index; index++) {
        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);
      }
    }
    result.length = index;
    return result;
  }
});

},{"118":118,"119":119,"129":129,"24":24,"25":25,"33":33,"48":48,"53":53,"56":56}],139:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $indexOf = _dereq_(11)(false);
var $native = [].indexOf;
var NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;

$export($export.P + $export.F * (NEGATIVE_ZERO || !_dereq_(105)($native)), 'Array', {
  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])
  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {
    return NEGATIVE_ZERO
      // convert -0 to +0
      ? $native.apply(this, arguments) || 0
      : $indexOf(this, searchElement, arguments[1]);
  }
});

},{"105":105,"11":11,"33":33}],140:[function(_dereq_,module,exports){
// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)
var $export = _dereq_(33);

$export($export.S, 'Array', { isArray: _dereq_(49) });

},{"33":33,"49":49}],141:[function(_dereq_,module,exports){
'use strict';
var addToUnscopables = _dereq_(5);
var step = _dereq_(57);
var Iterators = _dereq_(58);
var toIObject = _dereq_(117);

// 22.1.3.4 Array.prototype.entries()
// 22.1.3.13 Array.prototype.keys()
// 22.1.3.29 Array.prototype.values()
// 22.1.3.30 Array.prototype[@@iterator]()
module.exports = _dereq_(55)(Array, 'Array', function (iterated, kind) {
  this._t = toIObject(iterated); // target
  this._i = 0;                   // next index
  this._k = kind;                // kind
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var kind = this._k;
  var index = this._i++;
  if (!O || index >= O.length) {
    this._t = undefined;
    return step(1);
  }
  if (kind == 'keys') return step(0, index);
  if (kind == 'values') return step(0, O[index]);
  return step(0, [index, O[index]]);
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)
Iterators.Arguments = Iterators.Array;

addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');

},{"117":117,"5":5,"55":55,"57":57,"58":58}],142:[function(_dereq_,module,exports){
'use strict';
// 22.1.3.13 Array.prototype.join(separator)
var $export = _dereq_(33);
var toIObject = _dereq_(117);
var arrayJoin = [].join;

// fallback for not array-like strings
$export($export.P + $export.F * (_dereq_(47) != Object || !_dereq_(105)(arrayJoin)), 'Array', {
  join: function join(separator) {
    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);
  }
});

},{"105":105,"117":117,"33":33,"47":47}],143:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toIObject = _dereq_(117);
var toInteger = _dereq_(116);
var toLength = _dereq_(118);
var $native = [].lastIndexOf;
var NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;

$export($export.P + $export.F * (NEGATIVE_ZERO || !_dereq_(105)($native)), 'Array', {
  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])
  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {
    // convert -0 to +0
    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;
    var O = toIObject(this);
    var length = toLength(O.length);
    var index = length - 1;
    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));
    if (index < 0) index = length + index;
    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;
    return -1;
  }
});

},{"105":105,"116":116,"117":117,"118":118,"33":33}],144:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $map = _dereq_(12)(1);

$export($export.P + $export.F * !_dereq_(105)([].map, true), 'Array', {
  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments[1]);
  }
});

},{"105":105,"12":12,"33":33}],145:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var createProperty = _dereq_(24);

// WebKit Array.of isn't generic
$export($export.S + $export.F * _dereq_(35)(function () {
  function F() { /* empty */ }
  return !(Array.of.call(F) instanceof F);
}), 'Array', {
  // 22.1.2.3 Array.of( ...items)
  of: function of(/* ...args */) {
    var index = 0;
    var aLen = arguments.length;
    var result = new (typeof this == 'function' ? this : Array)(aLen);
    while (aLen > index) createProperty(result, index, arguments[index++]);
    result.length = aLen;
    return result;
  }
});

},{"24":24,"33":33,"35":35}],146:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $reduce = _dereq_(13);

$export($export.P + $export.F * !_dereq_(105)([].reduceRight, true), 'Array', {
  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])
  reduceRight: function reduceRight(callbackfn /* , initialValue */) {
    return $reduce(this, callbackfn, arguments.length, arguments[1], true);
  }
});

},{"105":105,"13":13,"33":33}],147:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $reduce = _dereq_(13);

$export($export.P + $export.F * !_dereq_(105)([].reduce, true), 'Array', {
  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])
  reduce: function reduce(callbackfn /* , initialValue */) {
    return $reduce(this, callbackfn, arguments.length, arguments[1], false);
  }
});

},{"105":105,"13":13,"33":33}],148:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var html = _dereq_(43);
var cof = _dereq_(18);
var toAbsoluteIndex = _dereq_(114);
var toLength = _dereq_(118);
var arraySlice = [].slice;

// fallback for not array-like ES3 strings and DOM objects
$export($export.P + $export.F * _dereq_(35)(function () {
  if (html) arraySlice.call(html);
}), 'Array', {
  slice: function slice(begin, end) {
    var len = toLength(this.length);
    var klass = cof(this);
    end = end === undefined ? len : end;
    if (klass == 'Array') return arraySlice.call(this, begin, end);
    var start = toAbsoluteIndex(begin, len);
    var upTo = toAbsoluteIndex(end, len);
    var size = toLength(upTo - start);
    var cloned = Array(size);
    var i = 0;
    for (; i < size; i++) cloned[i] = klass == 'String'
      ? this.charAt(start + i)
      : this[start + i];
    return cloned;
  }
});

},{"114":114,"118":118,"18":18,"33":33,"35":35,"43":43}],149:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $some = _dereq_(12)(3);

$export($export.P + $export.F * !_dereq_(105)([].some, true), 'Array', {
  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])
  some: function some(callbackfn /* , thisArg */) {
    return $some(this, callbackfn, arguments[1]);
  }
});

},{"105":105,"12":12,"33":33}],150:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var aFunction = _dereq_(3);
var toObject = _dereq_(119);
var fails = _dereq_(35);
var $sort = [].sort;
var test = [1, 2, 3];

$export($export.P + $export.F * (fails(function () {
  // IE8-
  test.sort(undefined);
}) || !fails(function () {
  // V8 bug
  test.sort(null);
  // Old WebKit
}) || !_dereq_(105)($sort)), 'Array', {
  // 22.1.3.25 Array.prototype.sort(comparefn)
  sort: function sort(comparefn) {
    return comparefn === undefined
      ? $sort.call(toObject(this))
      : $sort.call(toObject(this), aFunction(comparefn));
  }
});

},{"105":105,"119":119,"3":3,"33":33,"35":35}],151:[function(_dereq_,module,exports){
_dereq_(100)('Array');

},{"100":100}],152:[function(_dereq_,module,exports){
// 20.3.3.1 / 15.9.4.4 Date.now()
var $export = _dereq_(33);

$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });

},{"33":33}],153:[function(_dereq_,module,exports){
// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var $export = _dereq_(33);
var toISOString = _dereq_(26);

// PhantomJS / old WebKit has a broken implementations
$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {
  toISOString: toISOString
});

},{"26":26,"33":33}],154:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toObject = _dereq_(119);
var toPrimitive = _dereq_(120);

$export($export.P + $export.F * _dereq_(35)(function () {
  return new Date(NaN).toJSON() !== null
    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;
}), 'Date', {
  // eslint-disable-next-line no-unused-vars
  toJSON: function toJSON(key) {
    var O = toObject(this);
    var pv = toPrimitive(O);
    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();
  }
});

},{"119":119,"120":120,"33":33,"35":35}],155:[function(_dereq_,module,exports){
var TO_PRIMITIVE = _dereq_(128)('toPrimitive');
var proto = Date.prototype;

if (!(TO_PRIMITIVE in proto)) _dereq_(42)(proto, TO_PRIMITIVE, _dereq_(27));

},{"128":128,"27":27,"42":42}],156:[function(_dereq_,module,exports){
var DateProto = Date.prototype;
var INVALID_DATE = 'Invalid Date';
var TO_STRING = 'toString';
var $toString = DateProto[TO_STRING];
var getTime = DateProto.getTime;
if (new Date(NaN) + '' != INVALID_DATE) {
  _dereq_(94)(DateProto, TO_STRING, function toString() {
    var value = getTime.call(this);
    // eslint-disable-next-line no-self-compare
    return value === value ? $toString.call(this) : INVALID_DATE;
  });
}

},{"94":94}],157:[function(_dereq_,module,exports){
// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)
var $export = _dereq_(33);

$export($export.P, 'Function', { bind: _dereq_(16) });

},{"16":16,"33":33}],158:[function(_dereq_,module,exports){
'use strict';
var isObject = _dereq_(51);
var getPrototypeOf = _dereq_(79);
var HAS_INSTANCE = _dereq_(128)('hasInstance');
var FunctionProto = Function.prototype;
// 19.2.3.6 Function.prototype[@@hasInstance](V)
if (!(HAS_INSTANCE in FunctionProto)) _dereq_(72).f(FunctionProto, HAS_INSTANCE, { value: function (O) {
  if (typeof this != 'function' || !isObject(O)) return false;
  if (!isObject(this.prototype)) return O instanceof this;
  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:
  while (O = getPrototypeOf(O)) if (this.prototype === O) return true;
  return false;
} });

},{"128":128,"51":51,"72":72,"79":79}],159:[function(_dereq_,module,exports){
var dP = _dereq_(72).f;
var FProto = Function.prototype;
var nameRE = /^\s*function ([^ (]*)/;
var NAME = 'name';

// 19.2.4.2 name
NAME in FProto || _dereq_(29) && dP(FProto, NAME, {
  configurable: true,
  get: function () {
    try {
      return ('' + this).match(nameRE)[1];
    } catch (e) {
      return '';
    }
  }
});

},{"29":29,"72":72}],160:[function(_dereq_,module,exports){
'use strict';
var strong = _dereq_(19);
var validate = _dereq_(125);
var MAP = 'Map';

// 23.1 Map Objects
module.exports = _dereq_(22)(MAP, function (get) {
  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.1.3.6 Map.prototype.get(key)
  get: function get(key) {
    var entry = strong.getEntry(validate(this, MAP), key);
    return entry && entry.v;
  },
  // 23.1.3.9 Map.prototype.set(key, value)
  set: function set(key, value) {
    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);
  }
}, strong, true);

},{"125":125,"19":19,"22":22}],161:[function(_dereq_,module,exports){
// 20.2.2.3 Math.acosh(x)
var $export = _dereq_(33);
var log1p = _dereq_(63);
var sqrt = Math.sqrt;
var $acosh = Math.acosh;

$export($export.S + $export.F * !($acosh
  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509
  && Math.floor($acosh(Number.MAX_VALUE)) == 710
  // Tor Browser bug: Math.acosh(Infinity) -> NaN
  && $acosh(Infinity) == Infinity
), 'Math', {
  acosh: function acosh(x) {
    return (x = +x) < 1 ? NaN : x > 94906265.62425156
      ? Math.log(x) + Math.LN2
      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));
  }
});

},{"33":33,"63":63}],162:[function(_dereq_,module,exports){
// 20.2.2.5 Math.asinh(x)
var $export = _dereq_(33);
var $asinh = Math.asinh;

function asinh(x) {
  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));
}

// Tor Browser bug: Math.asinh(0) -> -0
$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', { asinh: asinh });

},{"33":33}],163:[function(_dereq_,module,exports){
// 20.2.2.7 Math.atanh(x)
var $export = _dereq_(33);
var $atanh = Math.atanh;

// Tor Browser bug: Math.atanh(-0) -> 0
$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {
  atanh: function atanh(x) {
    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;
  }
});

},{"33":33}],164:[function(_dereq_,module,exports){
// 20.2.2.9 Math.cbrt(x)
var $export = _dereq_(33);
var sign = _dereq_(65);

$export($export.S, 'Math', {
  cbrt: function cbrt(x) {
    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);
  }
});

},{"33":33,"65":65}],165:[function(_dereq_,module,exports){
// 20.2.2.11 Math.clz32(x)
var $export = _dereq_(33);

$export($export.S, 'Math', {
  clz32: function clz32(x) {
    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;
  }
});

},{"33":33}],166:[function(_dereq_,module,exports){
// 20.2.2.12 Math.cosh(x)
var $export = _dereq_(33);
var exp = Math.exp;

$export($export.S, 'Math', {
  cosh: function cosh(x) {
    return (exp(x = +x) + exp(-x)) / 2;
  }
});

},{"33":33}],167:[function(_dereq_,module,exports){
// 20.2.2.14 Math.expm1(x)
var $export = _dereq_(33);
var $expm1 = _dereq_(61);

$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', { expm1: $expm1 });

},{"33":33,"61":61}],168:[function(_dereq_,module,exports){
// 20.2.2.16 Math.fround(x)
var $export = _dereq_(33);

$export($export.S, 'Math', { fround: _dereq_(62) });

},{"33":33,"62":62}],169:[function(_dereq_,module,exports){
// 20.2.2.17 Math.hypot([value1[, value2[,  ]]])
var $export = _dereq_(33);
var abs = Math.abs;

$export($export.S, 'Math', {
  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars
    var sum = 0;
    var i = 0;
    var aLen = arguments.length;
    var larg = 0;
    var arg, div;
    while (i < aLen) {
      arg = abs(arguments[i++]);
      if (larg < arg) {
        div = larg / arg;
        sum = sum * div * div + 1;
        larg = arg;
      } else if (arg > 0) {
        div = arg / larg;
        sum += div * div;
      } else sum += arg;
    }
    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);
  }
});

},{"33":33}],170:[function(_dereq_,module,exports){
// 20.2.2.18 Math.imul(x, y)
var $export = _dereq_(33);
var $imul = Math.imul;

// some WebKit versions fails with big numbers, some has wrong arity
$export($export.S + $export.F * _dereq_(35)(function () {
  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;
}), 'Math', {
  imul: function imul(x, y) {
    var UINT16 = 0xffff;
    var xn = +x;
    var yn = +y;
    var xl = UINT16 & xn;
    var yl = UINT16 & yn;
    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);
  }
});

},{"33":33,"35":35}],171:[function(_dereq_,module,exports){
// 20.2.2.21 Math.log10(x)
var $export = _dereq_(33);

$export($export.S, 'Math', {
  log10: function log10(x) {
    return Math.log(x) * Math.LOG10E;
  }
});

},{"33":33}],172:[function(_dereq_,module,exports){
// 20.2.2.20 Math.log1p(x)
var $export = _dereq_(33);

$export($export.S, 'Math', { log1p: _dereq_(63) });

},{"33":33,"63":63}],173:[function(_dereq_,module,exports){
// 20.2.2.22 Math.log2(x)
var $export = _dereq_(33);

$export($export.S, 'Math', {
  log2: function log2(x) {
    return Math.log(x) / Math.LN2;
  }
});

},{"33":33}],174:[function(_dereq_,module,exports){
// 20.2.2.28 Math.sign(x)
var $export = _dereq_(33);

$export($export.S, 'Math', { sign: _dereq_(65) });

},{"33":33,"65":65}],175:[function(_dereq_,module,exports){
// 20.2.2.30 Math.sinh(x)
var $export = _dereq_(33);
var expm1 = _dereq_(61);
var exp = Math.exp;

// V8 near Chromium 38 has a problem with very small numbers
$export($export.S + $export.F * _dereq_(35)(function () {
  return !Math.sinh(-2e-17) != -2e-17;
}), 'Math', {
  sinh: function sinh(x) {
    return Math.abs(x = +x) < 1
      ? (expm1(x) - expm1(-x)) / 2
      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);
  }
});

},{"33":33,"35":35,"61":61}],176:[function(_dereq_,module,exports){
// 20.2.2.33 Math.tanh(x)
var $export = _dereq_(33);
var expm1 = _dereq_(61);
var exp = Math.exp;

$export($export.S, 'Math', {
  tanh: function tanh(x) {
    var a = expm1(x = +x);
    var b = expm1(-x);
    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));
  }
});

},{"33":33,"61":61}],177:[function(_dereq_,module,exports){
// 20.2.2.34 Math.trunc(x)
var $export = _dereq_(33);

$export($export.S, 'Math', {
  trunc: function trunc(it) {
    return (it > 0 ? Math.floor : Math.ceil)(it);
  }
});

},{"33":33}],178:[function(_dereq_,module,exports){
'use strict';
var global = _dereq_(40);
var has = _dereq_(41);
var cof = _dereq_(18);
var inheritIfRequired = _dereq_(45);
var toPrimitive = _dereq_(120);
var fails = _dereq_(35);
var gOPN = _dereq_(77).f;
var gOPD = _dereq_(75).f;
var dP = _dereq_(72).f;
var $trim = _dereq_(111).trim;
var NUMBER = 'Number';
var $Number = global[NUMBER];
var Base = $Number;
var proto = $Number.prototype;
// Opera ~12 has broken Object#toString
var BROKEN_COF = cof(_dereq_(71)(proto)) == NUMBER;
var TRIM = 'trim' in String.prototype;

// 7.1.3 ToNumber(argument)
var toNumber = function (argument) {
  var it = toPrimitive(argument, false);
  if (typeof it == 'string' && it.length > 2) {
    it = TRIM ? it.trim() : $trim(it, 3);
    var first = it.charCodeAt(0);
    var third, radix, maxCode;
    if (first === 43 || first === 45) {
      third = it.charCodeAt(2);
      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix
    } else if (first === 48) {
      switch (it.charCodeAt(1)) {
        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i
        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i
        default: return +it;
      }
      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {
        code = digits.charCodeAt(i);
        // parseInt parses a string to a first unavailable symbol
        // but ToNumber should return NaN if a string contains unavailable symbols
        if (code < 48 || code > maxCode) return NaN;
      } return parseInt(digits, radix);
    }
  } return +it;
};

if (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {
  $Number = function Number(value) {
    var it = arguments.length < 1 ? 0 : value;
    var that = this;
    return that instanceof $Number
      // check on 1..constructor(foo) case
      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)
        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);
  };
  for (var keys = _dereq_(29) ? gOPN(Base) : (
    // ES3:
    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +
    // ES6 (in case, if modules with ES6 Number statics required before):
    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +
    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'
  ).split(','), j = 0, key; keys.length > j; j++) {
    if (has(Base, key = keys[j]) && !has($Number, key)) {
      dP($Number, key, gOPD(Base, key));
    }
  }
  $Number.prototype = proto;
  proto.constructor = $Number;
  _dereq_(94)(global, NUMBER, $Number);
}

},{"111":111,"120":120,"18":18,"29":29,"35":35,"40":40,"41":41,"45":45,"71":71,"72":72,"75":75,"77":77,"94":94}],179:[function(_dereq_,module,exports){
// 20.1.2.1 Number.EPSILON
var $export = _dereq_(33);

$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });

},{"33":33}],180:[function(_dereq_,module,exports){
// 20.1.2.2 Number.isFinite(number)
var $export = _dereq_(33);
var _isFinite = _dereq_(40).isFinite;

$export($export.S, 'Number', {
  isFinite: function isFinite(it) {
    return typeof it == 'number' && _isFinite(it);
  }
});

},{"33":33,"40":40}],181:[function(_dereq_,module,exports){
// 20.1.2.3 Number.isInteger(number)
var $export = _dereq_(33);

$export($export.S, 'Number', { isInteger: _dereq_(50) });

},{"33":33,"50":50}],182:[function(_dereq_,module,exports){
// 20.1.2.4 Number.isNaN(number)
var $export = _dereq_(33);

$export($export.S, 'Number', {
  isNaN: function isNaN(number) {
    // eslint-disable-next-line no-self-compare
    return number != number;
  }
});

},{"33":33}],183:[function(_dereq_,module,exports){
// 20.1.2.5 Number.isSafeInteger(number)
var $export = _dereq_(33);
var isInteger = _dereq_(50);
var abs = Math.abs;

$export($export.S, 'Number', {
  isSafeInteger: function isSafeInteger(number) {
    return isInteger(number) && abs(number) <= 0x1fffffffffffff;
  }
});

},{"33":33,"50":50}],184:[function(_dereq_,module,exports){
// 20.1.2.6 Number.MAX_SAFE_INTEGER
var $export = _dereq_(33);

$export($export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });

},{"33":33}],185:[function(_dereq_,module,exports){
// 20.1.2.10 Number.MIN_SAFE_INTEGER
var $export = _dereq_(33);

$export($export.S, 'Number', { MIN_SAFE_INTEGER: -0x1fffffffffffff });

},{"33":33}],186:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var $parseFloat = _dereq_(86);
// 20.1.2.12 Number.parseFloat(string)
$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', { parseFloat: $parseFloat });

},{"33":33,"86":86}],187:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var $parseInt = _dereq_(87);
// 20.1.2.13 Number.parseInt(string, radix)
$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', { parseInt: $parseInt });

},{"33":33,"87":87}],188:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toInteger = _dereq_(116);
var aNumberValue = _dereq_(4);
var repeat = _dereq_(110);
var $toFixed = 1.0.toFixed;
var floor = Math.floor;
var data = [0, 0, 0, 0, 0, 0];
var ERROR = 'Number.toFixed: incorrect invocation!';
var ZERO = '0';

var multiply = function (n, c) {
  var i = -1;
  var c2 = c;
  while (++i < 6) {
    c2 += n * data[i];
    data[i] = c2 % 1e7;
    c2 = floor(c2 / 1e7);
  }
};
var divide = function (n) {
  var i = 6;
  var c = 0;
  while (--i >= 0) {
    c += data[i];
    data[i] = floor(c / n);
    c = (c % n) * 1e7;
  }
};
var numToString = function () {
  var i = 6;
  var s = '';
  while (--i >= 0) {
    if (s !== '' || i === 0 || data[i] !== 0) {
      var t = String(data[i]);
      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;
    }
  } return s;
};
var pow = function (x, n, acc) {
  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);
};
var log = function (x) {
  var n = 0;
  var x2 = x;
  while (x2 >= 4096) {
    n += 12;
    x2 /= 4096;
  }
  while (x2 >= 2) {
    n += 1;
    x2 /= 2;
  } return n;
};

$export($export.P + $export.F * (!!$toFixed && (
  0.00008.toFixed(3) !== '0.000' ||
  0.9.toFixed(0) !== '1' ||
  1.255.toFixed(2) !== '1.25' ||
  1000000000000000128.0.toFixed(0) !== '1000000000000000128'
) || !_dereq_(35)(function () {
  // V8 ~ Android 4.3-
  $toFixed.call({});
})), 'Number', {
  toFixed: function toFixed(fractionDigits) {
    var x = aNumberValue(this, ERROR);
    var f = toInteger(fractionDigits);
    var s = '';
    var m = ZERO;
    var e, z, j, k;
    if (f < 0 || f > 20) throw RangeError(ERROR);
    // eslint-disable-next-line no-self-compare
    if (x != x) return 'NaN';
    if (x <= -1e21 || x >= 1e21) return String(x);
    if (x < 0) {
      s = '-';
      x = -x;
    }
    if (x > 1e-21) {
      e = log(x * pow(2, 69, 1)) - 69;
      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);
      z *= 0x10000000000000;
      e = 52 - e;
      if (e > 0) {
        multiply(0, z);
        j = f;
        while (j >= 7) {
          multiply(1e7, 0);
          j -= 7;
        }
        multiply(pow(10, j, 1), 0);
        j = e - 1;
        while (j >= 23) {
          divide(1 << 23);
          j -= 23;
        }
        divide(1 << j);
        multiply(1, 1);
        divide(2);
        m = numToString();
      } else {
        multiply(0, z);
        multiply(1 << -e, 0);
        m = numToString() + repeat.call(ZERO, f);
      }
    }
    if (f > 0) {
      k = m.length;
      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));
    } else {
      m = s + m;
    } return m;
  }
});

},{"110":110,"116":116,"33":33,"35":35,"4":4}],189:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $fails = _dereq_(35);
var aNumberValue = _dereq_(4);
var $toPrecision = 1.0.toPrecision;

$export($export.P + $export.F * ($fails(function () {
  // IE7-
  return $toPrecision.call(1, undefined) !== '1';
}) || !$fails(function () {
  // V8 ~ Android 4.3-
  $toPrecision.call({});
})), 'Number', {
  toPrecision: function toPrecision(precision) {
    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');
    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision);
  }
});

},{"33":33,"35":35,"4":4}],190:[function(_dereq_,module,exports){
// 19.1.3.1 Object.assign(target, source)
var $export = _dereq_(33);

$export($export.S + $export.F, 'Object', { assign: _dereq_(70) });

},{"33":33,"70":70}],191:[function(_dereq_,module,exports){
var $export = _dereq_(33);
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
$export($export.S, 'Object', { create: _dereq_(71) });

},{"33":33,"71":71}],192:[function(_dereq_,module,exports){
var $export = _dereq_(33);
// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)
$export($export.S + $export.F * !_dereq_(29), 'Object', { defineProperties: _dereq_(73) });

},{"29":29,"33":33,"73":73}],193:[function(_dereq_,module,exports){
var $export = _dereq_(33);
// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)
$export($export.S + $export.F * !_dereq_(29), 'Object', { defineProperty: _dereq_(72).f });

},{"29":29,"33":33,"72":72}],194:[function(_dereq_,module,exports){
// 19.1.2.5 Object.freeze(O)
var isObject = _dereq_(51);
var meta = _dereq_(66).onFreeze;

_dereq_(83)('freeze', function ($freeze) {
  return function freeze(it) {
    return $freeze && isObject(it) ? $freeze(meta(it)) : it;
  };
});

},{"51":51,"66":66,"83":83}],195:[function(_dereq_,module,exports){
// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
var toIObject = _dereq_(117);
var $getOwnPropertyDescriptor = _dereq_(75).f;

_dereq_(83)('getOwnPropertyDescriptor', function () {
  return function getOwnPropertyDescriptor(it, key) {
    return $getOwnPropertyDescriptor(toIObject(it), key);
  };
});

},{"117":117,"75":75,"83":83}],196:[function(_dereq_,module,exports){
// 19.1.2.7 Object.getOwnPropertyNames(O)
_dereq_(83)('getOwnPropertyNames', function () {
  return _dereq_(76).f;
});

},{"76":76,"83":83}],197:[function(_dereq_,module,exports){
// 19.1.2.9 Object.getPrototypeOf(O)
var toObject = _dereq_(119);
var $getPrototypeOf = _dereq_(79);

_dereq_(83)('getPrototypeOf', function () {
  return function getPrototypeOf(it) {
    return $getPrototypeOf(toObject(it));
  };
});

},{"119":119,"79":79,"83":83}],198:[function(_dereq_,module,exports){
// 19.1.2.11 Object.isExtensible(O)
var isObject = _dereq_(51);

_dereq_(83)('isExtensible', function ($isExtensible) {
  return function isExtensible(it) {
    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;
  };
});

},{"51":51,"83":83}],199:[function(_dereq_,module,exports){
// 19.1.2.12 Object.isFrozen(O)
var isObject = _dereq_(51);

_dereq_(83)('isFrozen', function ($isFrozen) {
  return function isFrozen(it) {
    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;
  };
});

},{"51":51,"83":83}],200:[function(_dereq_,module,exports){
// 19.1.2.13 Object.isSealed(O)
var isObject = _dereq_(51);

_dereq_(83)('isSealed', function ($isSealed) {
  return function isSealed(it) {
    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;
  };
});

},{"51":51,"83":83}],201:[function(_dereq_,module,exports){
// 19.1.3.10 Object.is(value1, value2)
var $export = _dereq_(33);
$export($export.S, 'Object', { is: _dereq_(96) });

},{"33":33,"96":96}],202:[function(_dereq_,module,exports){
// 19.1.2.14 Object.keys(O)
var toObject = _dereq_(119);
var $keys = _dereq_(81);

_dereq_(83)('keys', function () {
  return function keys(it) {
    return $keys(toObject(it));
  };
});

},{"119":119,"81":81,"83":83}],203:[function(_dereq_,module,exports){
// 19.1.2.15 Object.preventExtensions(O)
var isObject = _dereq_(51);
var meta = _dereq_(66).onFreeze;

_dereq_(83)('preventExtensions', function ($preventExtensions) {
  return function preventExtensions(it) {
    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;
  };
});

},{"51":51,"66":66,"83":83}],204:[function(_dereq_,module,exports){
// 19.1.2.17 Object.seal(O)
var isObject = _dereq_(51);
var meta = _dereq_(66).onFreeze;

_dereq_(83)('seal', function ($seal) {
  return function seal(it) {
    return $seal && isObject(it) ? $seal(meta(it)) : it;
  };
});

},{"51":51,"66":66,"83":83}],205:[function(_dereq_,module,exports){
// 19.1.3.19 Object.setPrototypeOf(O, proto)
var $export = _dereq_(33);
$export($export.S, 'Object', { setPrototypeOf: _dereq_(99).set });

},{"33":33,"99":99}],206:[function(_dereq_,module,exports){
'use strict';
// 19.1.3.6 Object.prototype.toString()
var classof = _dereq_(17);
var test = {};
test[_dereq_(128)('toStringTag')] = 'z';
if (test + '' != '[object z]') {
  _dereq_(94)(Object.prototype, 'toString', function toString() {
    return '[object ' + classof(this) + ']';
  }, true);
}

},{"128":128,"17":17,"94":94}],207:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var $parseFloat = _dereq_(86);
// 18.2.4 parseFloat(string)
$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });

},{"33":33,"86":86}],208:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var $parseInt = _dereq_(87);
// 18.2.5 parseInt(string, radix)
$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });

},{"33":33,"87":87}],209:[function(_dereq_,module,exports){
'use strict';
var LIBRARY = _dereq_(60);
var global = _dereq_(40);
var ctx = _dereq_(25);
var classof = _dereq_(17);
var $export = _dereq_(33);
var isObject = _dereq_(51);
var aFunction = _dereq_(3);
var anInstance = _dereq_(6);
var forOf = _dereq_(39);
var speciesConstructor = _dereq_(104);
var task = _dereq_(113).set;
var microtask = _dereq_(68)();
var newPromiseCapabilityModule = _dereq_(69);
var perform = _dereq_(90);
var promiseResolve = _dereq_(91);
var PROMISE = 'Promise';
var TypeError = global.TypeError;
var process = global.process;
var $Promise = global[PROMISE];
var isNode = classof(process) == 'process';
var empty = function () { /* empty */ };
var Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;
var newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;

var USE_NATIVE = !!function () {
  try {
    // correct subclassing with @@species support
    var promise = $Promise.resolve(1);
    var FakePromise = (promise.constructor = {})[_dereq_(128)('species')] = function (exec) {
      exec(empty, empty);
    };
    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test
    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;
  } catch (e) { /* empty */ }
}();

// helpers
var sameConstructor = LIBRARY ? function (a, b) {
  // with library wrapper special case
  return a === b || a === $Promise && b === Wrapper;
} : function (a, b) {
  return a === b;
};
var isThenable = function (it) {
  var then;
  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;
};
var notify = function (promise, isReject) {
  if (promise._n) return;
  promise._n = true;
  var chain = promise._c;
  microtask(function () {
    var value = promise._v;
    var ok = promise._s == 1;
    var i = 0;
    var run = function (reaction) {
      var handler = ok ? reaction.ok : reaction.fail;
      var resolve = reaction.resolve;
      var reject = reaction.reject;
      var domain = reaction.domain;
      var result, then;
      try {
        if (handler) {
          if (!ok) {
            if (promise._h == 2) onHandleUnhandled(promise);
            promise._h = 1;
          }
          if (handler === true) result = value;
          else {
            if (domain) domain.enter();
            result = handler(value);
            if (domain) domain.exit();
          }
          if (result === reaction.promise) {
            reject(TypeError('Promise-chain cycle'));
          } else if (then = isThenable(result)) {
            then.call(result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch (e) {
        reject(e);
      }
    };
    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach
    promise._c = [];
    promise._n = false;
    if (isReject && !promise._h) onUnhandled(promise);
  });
};
var onUnhandled = function (promise) {
  task.call(global, function () {
    var value = promise._v;
    var unhandled = isUnhandled(promise);
    var result, handler, console;
    if (unhandled) {
      result = perform(function () {
        if (isNode) {
          process.emit('unhandledRejection', value, promise);
        } else if (handler = global.onunhandledrejection) {
          handler({ promise: promise, reason: value });
        } else if ((console = global.console) && console.error) {
          console.error('Unhandled promise rejection', value);
        }
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      promise._h = isNode || isUnhandled(promise) ? 2 : 1;
    } promise._a = undefined;
    if (unhandled && result.e) throw result.v;
  });
};
var isUnhandled = function (promise) {
  if (promise._h == 1) return false;
  var chain = promise._a || promise._c;
  var i = 0;
  var reaction;
  while (chain.length > i) {
    reaction = chain[i++];
    if (reaction.fail || !isUnhandled(reaction.promise)) return false;
  } return true;
};
var onHandleUnhandled = function (promise) {
  task.call(global, function () {
    var handler;
    if (isNode) {
      process.emit('rejectionHandled', promise);
    } else if (handler = global.onrejectionhandled) {
      handler({ promise: promise, reason: promise._v });
    }
  });
};
var $reject = function (value) {
  var promise = this;
  if (promise._d) return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  promise._v = value;
  promise._s = 2;
  if (!promise._a) promise._a = promise._c.slice();
  notify(promise, true);
};
var $resolve = function (value) {
  var promise = this;
  var then;
  if (promise._d) return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  try {
    if (promise === value) throw TypeError("Promise can't be resolved itself");
    if (then = isThenable(value)) {
      microtask(function () {
        var wrapper = { _w: promise, _d: false }; // wrap
        try {
          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));
        } catch (e) {
          $reject.call(wrapper, e);
        }
      });
    } else {
      promise._v = value;
      promise._s = 1;
      notify(promise, false);
    }
  } catch (e) {
    $reject.call({ _w: promise, _d: false }, e); // wrap
  }
};

// constructor polyfill
if (!USE_NATIVE) {
  // 25.4.3.1 Promise(executor)
  $Promise = function Promise(executor) {
    anInstance(this, $Promise, PROMISE, '_h');
    aFunction(executor);
    Internal.call(this);
    try {
      executor(ctx($resolve, this, 1), ctx($reject, this, 1));
    } catch (err) {
      $reject.call(this, err);
    }
  };
  // eslint-disable-next-line no-unused-vars
  Internal = function Promise(executor) {
    this._c = [];             // <- awaiting reactions
    this._a = undefined;      // <- checked in isUnhandled reactions
    this._s = 0;              // <- state
    this._d = false;          // <- done
    this._v = undefined;      // <- value
    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled
    this._n = false;          // <- notify
  };
  Internal.prototype = _dereq_(93)($Promise.prototype, {
    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)
    then: function then(onFulfilled, onRejected) {
      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));
      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;
      reaction.fail = typeof onRejected == 'function' && onRejected;
      reaction.domain = isNode ? process.domain : undefined;
      this._c.push(reaction);
      if (this._a) this._a.push(reaction);
      if (this._s) notify(this, false);
      return reaction.promise;
    },
    // 25.4.5.1 Promise.prototype.catch(onRejected)
    'catch': function (onRejected) {
      return this.then(undefined, onRejected);
    }
  });
  OwnPromiseCapability = function () {
    var promise = new Internal();
    this.promise = promise;
    this.resolve = ctx($resolve, promise, 1);
    this.reject = ctx($reject, promise, 1);
  };
  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return sameConstructor($Promise, C)
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });
_dereq_(101)($Promise, PROMISE);
_dereq_(100)(PROMISE);
Wrapper = _dereq_(23)[PROMISE];

// statics
$export($export.S + $export.F * !USE_NATIVE, PROMISE, {
  // 25.4.4.5 Promise.reject(r)
  reject: function reject(r) {
    var capability = newPromiseCapability(this);
    var $$reject = capability.reject;
    $$reject(r);
    return capability.promise;
  }
});
$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {
  // 25.4.4.6 Promise.resolve(x)
  resolve: function resolve(x) {
    // instanceof instead of internal slot check because we should fix it without replacement native Promise core
    if (x instanceof $Promise && sameConstructor(x.constructor, this)) return x;
    return promiseResolve(this, x);
  }
});
$export($export.S + $export.F * !(USE_NATIVE && _dereq_(56)(function (iter) {
  $Promise.all(iter)['catch'](empty);
})), PROMISE, {
  // 25.4.4.1 Promise.all(iterable)
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var values = [];
      var index = 0;
      var remaining = 1;
      forOf(iterable, false, function (promise) {
        var $index = index++;
        var alreadyCalled = false;
        values.push(undefined);
        remaining++;
        C.resolve(promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[$index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.e) reject(result.v);
    return capability.promise;
  },
  // 25.4.4.4 Promise.race(iterable)
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var reject = capability.reject;
    var result = perform(function () {
      forOf(iterable, false, function (promise) {
        C.resolve(promise).then(capability.resolve, reject);
      });
    });
    if (result.e) reject(result.v);
    return capability.promise;
  }
});

},{"100":100,"101":101,"104":104,"113":113,"128":128,"17":17,"23":23,"25":25,"3":3,"33":33,"39":39,"40":40,"51":51,"56":56,"6":6,"60":60,"68":68,"69":69,"90":90,"91":91,"93":93}],210:[function(_dereq_,module,exports){
// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)
var $export = _dereq_(33);
var aFunction = _dereq_(3);
var anObject = _dereq_(7);
var rApply = (_dereq_(40).Reflect || {}).apply;
var fApply = Function.apply;
// MS Edge argumentsList argument is optional
$export($export.S + $export.F * !_dereq_(35)(function () {
  rApply(function () { /* empty */ });
}), 'Reflect', {
  apply: function apply(target, thisArgument, argumentsList) {
    var T = aFunction(target);
    var L = anObject(argumentsList);
    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);
  }
});

},{"3":3,"33":33,"35":35,"40":40,"7":7}],211:[function(_dereq_,module,exports){
// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])
var $export = _dereq_(33);
var create = _dereq_(71);
var aFunction = _dereq_(3);
var anObject = _dereq_(7);
var isObject = _dereq_(51);
var fails = _dereq_(35);
var bind = _dereq_(16);
var rConstruct = (_dereq_(40).Reflect || {}).construct;

// MS Edge supports only 2 arguments and argumentsList argument is optional
// FF Nightly sets third argument as `new.target`, but does not create `this` from it
var NEW_TARGET_BUG = fails(function () {
  function F() { /* empty */ }
  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);
});
var ARGS_BUG = !fails(function () {
  rConstruct(function () { /* empty */ });
});

$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {
  construct: function construct(Target, args /* , newTarget */) {
    aFunction(Target);
    anObject(args);
    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);
    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);
    if (Target == newTarget) {
      // w/o altered newTarget, optimization for 0-4 arguments
      switch (args.length) {
        case 0: return new Target();
        case 1: return new Target(args[0]);
        case 2: return new Target(args[0], args[1]);
        case 3: return new Target(args[0], args[1], args[2]);
        case 4: return new Target(args[0], args[1], args[2], args[3]);
      }
      // w/o altered newTarget, lot of arguments case
      var $args = [null];
      $args.push.apply($args, args);
      return new (bind.apply(Target, $args))();
    }
    // with altered newTarget, not support built-in constructors
    var proto = newTarget.prototype;
    var instance = create(isObject(proto) ? proto : Object.prototype);
    var result = Function.apply.call(Target, instance, args);
    return isObject(result) ? result : instance;
  }
});

},{"16":16,"3":3,"33":33,"35":35,"40":40,"51":51,"7":7,"71":71}],212:[function(_dereq_,module,exports){
// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)
var dP = _dereq_(72);
var $export = _dereq_(33);
var anObject = _dereq_(7);
var toPrimitive = _dereq_(120);

// MS Edge has broken Reflect.defineProperty - throwing instead of returning false
$export($export.S + $export.F * _dereq_(35)(function () {
  // eslint-disable-next-line no-undef
  Reflect.defineProperty(dP.f({}, 1, { value: 1 }), 1, { value: 2 });
}), 'Reflect', {
  defineProperty: function defineProperty(target, propertyKey, attributes) {
    anObject(target);
    propertyKey = toPrimitive(propertyKey, true);
    anObject(attributes);
    try {
      dP.f(target, propertyKey, attributes);
      return true;
    } catch (e) {
      return false;
    }
  }
});

},{"120":120,"33":33,"35":35,"7":7,"72":72}],213:[function(_dereq_,module,exports){
// 26.1.4 Reflect.deleteProperty(target, propertyKey)
var $export = _dereq_(33);
var gOPD = _dereq_(75).f;
var anObject = _dereq_(7);

$export($export.S, 'Reflect', {
  deleteProperty: function deleteProperty(target, propertyKey) {
    var desc = gOPD(anObject(target), propertyKey);
    return desc && !desc.configurable ? false : delete target[propertyKey];
  }
});

},{"33":33,"7":7,"75":75}],214:[function(_dereq_,module,exports){
'use strict';
// 26.1.5 Reflect.enumerate(target)
var $export = _dereq_(33);
var anObject = _dereq_(7);
var Enumerate = function (iterated) {
  this._t = anObject(iterated); // target
  this._i = 0;                  // next index
  var keys = this._k = [];      // keys
  var key;
  for (key in iterated) keys.push(key);
};
_dereq_(54)(Enumerate, 'Object', function () {
  var that = this;
  var keys = that._k;
  var key;
  do {
    if (that._i >= keys.length) return { value: undefined, done: true };
  } while (!((key = keys[that._i++]) in that._t));
  return { value: key, done: false };
});

$export($export.S, 'Reflect', {
  enumerate: function enumerate(target) {
    return new Enumerate(target);
  }
});

},{"33":33,"54":54,"7":7}],215:[function(_dereq_,module,exports){
// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)
var gOPD = _dereq_(75);
var $export = _dereq_(33);
var anObject = _dereq_(7);

$export($export.S, 'Reflect', {
  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {
    return gOPD.f(anObject(target), propertyKey);
  }
});

},{"33":33,"7":7,"75":75}],216:[function(_dereq_,module,exports){
// 26.1.8 Reflect.getPrototypeOf(target)
var $export = _dereq_(33);
var getProto = _dereq_(79);
var anObject = _dereq_(7);

$export($export.S, 'Reflect', {
  getPrototypeOf: function getPrototypeOf(target) {
    return getProto(anObject(target));
  }
});

},{"33":33,"7":7,"79":79}],217:[function(_dereq_,module,exports){
// 26.1.6 Reflect.get(target, propertyKey [, receiver])
var gOPD = _dereq_(75);
var getPrototypeOf = _dereq_(79);
var has = _dereq_(41);
var $export = _dereq_(33);
var isObject = _dereq_(51);
var anObject = _dereq_(7);

function get(target, propertyKey /* , receiver */) {
  var receiver = arguments.length < 3 ? target : arguments[2];
  var desc, proto;
  if (anObject(target) === receiver) return target[propertyKey];
  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')
    ? desc.value
    : desc.get !== undefined
      ? desc.get.call(receiver)
      : undefined;
  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);
}

$export($export.S, 'Reflect', { get: get });

},{"33":33,"41":41,"51":51,"7":7,"75":75,"79":79}],218:[function(_dereq_,module,exports){
// 26.1.9 Reflect.has(target, propertyKey)
var $export = _dereq_(33);

$export($export.S, 'Reflect', {
  has: function has(target, propertyKey) {
    return propertyKey in target;
  }
});

},{"33":33}],219:[function(_dereq_,module,exports){
// 26.1.10 Reflect.isExtensible(target)
var $export = _dereq_(33);
var anObject = _dereq_(7);
var $isExtensible = Object.isExtensible;

$export($export.S, 'Reflect', {
  isExtensible: function isExtensible(target) {
    anObject(target);
    return $isExtensible ? $isExtensible(target) : true;
  }
});

},{"33":33,"7":7}],220:[function(_dereq_,module,exports){
// 26.1.11 Reflect.ownKeys(target)
var $export = _dereq_(33);

$export($export.S, 'Reflect', { ownKeys: _dereq_(85) });

},{"33":33,"85":85}],221:[function(_dereq_,module,exports){
// 26.1.12 Reflect.preventExtensions(target)
var $export = _dereq_(33);
var anObject = _dereq_(7);
var $preventExtensions = Object.preventExtensions;

$export($export.S, 'Reflect', {
  preventExtensions: function preventExtensions(target) {
    anObject(target);
    try {
      if ($preventExtensions) $preventExtensions(target);
      return true;
    } catch (e) {
      return false;
    }
  }
});

},{"33":33,"7":7}],222:[function(_dereq_,module,exports){
// 26.1.14 Reflect.setPrototypeOf(target, proto)
var $export = _dereq_(33);
var setProto = _dereq_(99);

if (setProto) $export($export.S, 'Reflect', {
  setPrototypeOf: function setPrototypeOf(target, proto) {
    setProto.check(target, proto);
    try {
      setProto.set(target, proto);
      return true;
    } catch (e) {
      return false;
    }
  }
});

},{"33":33,"99":99}],223:[function(_dereq_,module,exports){
// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])
var dP = _dereq_(72);
var gOPD = _dereq_(75);
var getPrototypeOf = _dereq_(79);
var has = _dereq_(41);
var $export = _dereq_(33);
var createDesc = _dereq_(92);
var anObject = _dereq_(7);
var isObject = _dereq_(51);

function set(target, propertyKey, V /* , receiver */) {
  var receiver = arguments.length < 4 ? target : arguments[3];
  var ownDesc = gOPD.f(anObject(target), propertyKey);
  var existingDescriptor, proto;
  if (!ownDesc) {
    if (isObject(proto = getPrototypeOf(target))) {
      return set(proto, propertyKey, V, receiver);
    }
    ownDesc = createDesc(0);
  }
  if (has(ownDesc, 'value')) {
    if (ownDesc.writable === false || !isObject(receiver)) return false;
    existingDescriptor = gOPD.f(receiver, propertyKey) || createDesc(0);
    existingDescriptor.value = V;
    dP.f(receiver, propertyKey, existingDescriptor);
    return true;
  }
  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);
}

$export($export.S, 'Reflect', { set: set });

},{"33":33,"41":41,"51":51,"7":7,"72":72,"75":75,"79":79,"92":92}],224:[function(_dereq_,module,exports){
var global = _dereq_(40);
var inheritIfRequired = _dereq_(45);
var dP = _dereq_(72).f;
var gOPN = _dereq_(77).f;
var isRegExp = _dereq_(52);
var $flags = _dereq_(37);
var $RegExp = global.RegExp;
var Base = $RegExp;
var proto = $RegExp.prototype;
var re1 = /a/g;
var re2 = /a/g;
// "new" creates a new object, old webkit buggy here
var CORRECT_NEW = new $RegExp(re1) !== re1;

if (_dereq_(29) && (!CORRECT_NEW || _dereq_(35)(function () {
  re2[_dereq_(128)('match')] = false;
  // RegExp constructor can alter flags and IsRegExp works correct with @@match
  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';
}))) {
  $RegExp = function RegExp(p, f) {
    var tiRE = this instanceof $RegExp;
    var piRE = isRegExp(p);
    var fiU = f === undefined;
    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p
      : inheritIfRequired(CORRECT_NEW
        ? new Base(piRE && !fiU ? p.source : p, f)
        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)
      , tiRE ? this : proto, $RegExp);
  };
  var proxy = function (key) {
    key in $RegExp || dP($RegExp, key, {
      configurable: true,
      get: function () { return Base[key]; },
      set: function (it) { Base[key] = it; }
    });
  };
  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);
  proto.constructor = $RegExp;
  $RegExp.prototype = proto;
  _dereq_(94)(global, 'RegExp', $RegExp);
}

_dereq_(100)('RegExp');

},{"100":100,"128":128,"29":29,"35":35,"37":37,"40":40,"45":45,"52":52,"72":72,"77":77,"94":94}],225:[function(_dereq_,module,exports){
// 21.2.5.3 get RegExp.prototype.flags()
if (_dereq_(29) && /./g.flags != 'g') _dereq_(72).f(RegExp.prototype, 'flags', {
  configurable: true,
  get: _dereq_(37)
});

},{"29":29,"37":37,"72":72}],226:[function(_dereq_,module,exports){
// @@match logic
_dereq_(36)('match', 1, function (defined, MATCH, $match) {
  // 21.1.3.11 String.prototype.match(regexp)
  return [function match(regexp) {
    'use strict';
    var O = defined(this);
    var fn = regexp == undefined ? undefined : regexp[MATCH];
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));
  }, $match];
});

},{"36":36}],227:[function(_dereq_,module,exports){
// @@replace logic
_dereq_(36)('replace', 2, function (defined, REPLACE, $replace) {
  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)
  return [function replace(searchValue, replaceValue) {
    'use strict';
    var O = defined(this);
    var fn = searchValue == undefined ? undefined : searchValue[REPLACE];
    return fn !== undefined
      ? fn.call(searchValue, O, replaceValue)
      : $replace.call(String(O), searchValue, replaceValue);
  }, $replace];
});

},{"36":36}],228:[function(_dereq_,module,exports){
// @@search logic
_dereq_(36)('search', 1, function (defined, SEARCH, $search) {
  // 21.1.3.15 String.prototype.search(regexp)
  return [function search(regexp) {
    'use strict';
    var O = defined(this);
    var fn = regexp == undefined ? undefined : regexp[SEARCH];
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));
  }, $search];
});

},{"36":36}],229:[function(_dereq_,module,exports){
// @@split logic
_dereq_(36)('split', 2, function (defined, SPLIT, $split) {
  'use strict';
  var isRegExp = _dereq_(52);
  var _split = $split;
  var $push = [].push;
  var $SPLIT = 'split';
  var LENGTH = 'length';
  var LAST_INDEX = 'lastIndex';
  if (
    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||
    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||
    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||
    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||
    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||
    ''[$SPLIT](/.?/)[LENGTH]
  ) {
    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group
    // based on es5-shim implementation, need to rework it
    $split = function (separator, limit) {
      var string = String(this);
      if (separator === undefined && limit === 0) return [];
      // If `separator` is not a regex, use native split
      if (!isRegExp(separator)) return _split.call(string, separator, limit);
      var output = [];
      var flags = (separator.ignoreCase ? 'i' : '') +
                  (separator.multiline ? 'm' : '') +
                  (separator.unicode ? 'u' : '') +
                  (separator.sticky ? 'y' : '');
      var lastLastIndex = 0;
      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;
      // Make `global` and avoid `lastIndex` issues by working with a copy
      var separatorCopy = new RegExp(separator.source, flags + 'g');
      var separator2, match, lastIndex, lastLength, i;
      // Doesn't need flags gy, but they don't hurt
      if (!NPCG) separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\s)', flags);
      while (match = separatorCopy.exec(string)) {
        // `separatorCopy.lastIndex` is not reliable cross-browser
        lastIndex = match.index + match[0][LENGTH];
        if (lastIndex > lastLastIndex) {
          output.push(string.slice(lastLastIndex, match.index));
          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG
          // eslint-disable-next-line no-loop-func
          if (!NPCG && match[LENGTH] > 1) match[0].replace(separator2, function () {
            for (i = 1; i < arguments[LENGTH] - 2; i++) if (arguments[i] === undefined) match[i] = undefined;
          });
          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));
          lastLength = match[0][LENGTH];
          lastLastIndex = lastIndex;
          if (output[LENGTH] >= splitLimit) break;
        }
        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop
      }
      if (lastLastIndex === string[LENGTH]) {
        if (lastLength || !separatorCopy.test('')) output.push('');
      } else output.push(string.slice(lastLastIndex));
      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;
    };
  // Chakra, V8
  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {
    $split = function (separator, limit) {
      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);
    };
  }
  // 21.1.3.17 String.prototype.split(separator, limit)
  return [function split(separator, limit) {
    var O = defined(this);
    var fn = separator == undefined ? undefined : separator[SPLIT];
    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);
  }, $split];
});

},{"36":36,"52":52}],230:[function(_dereq_,module,exports){
'use strict';
_dereq_(225);
var anObject = _dereq_(7);
var $flags = _dereq_(37);
var DESCRIPTORS = _dereq_(29);
var TO_STRING = 'toString';
var $toString = /./[TO_STRING];

var define = function (fn) {
  _dereq_(94)(RegExp.prototype, TO_STRING, fn, true);
};

// 21.2.5.14 RegExp.prototype.toString()
if (_dereq_(35)(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {
  define(function toString() {
    var R = anObject(this);
    return '/'.concat(R.source, '/',
      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);
  });
// FF44- RegExp#toString has a wrong name
} else if ($toString.name != TO_STRING) {
  define(function toString() {
    return $toString.call(this);
  });
}

},{"225":225,"29":29,"35":35,"37":37,"7":7,"94":94}],231:[function(_dereq_,module,exports){
'use strict';
var strong = _dereq_(19);
var validate = _dereq_(125);
var SET = 'Set';

// 23.2 Set Objects
module.exports = _dereq_(22)(SET, function (get) {
  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.2.3.1 Set.prototype.add(value)
  add: function add(value) {
    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);
  }
}, strong);

},{"125":125,"19":19,"22":22}],232:[function(_dereq_,module,exports){
'use strict';
// B.2.3.2 String.prototype.anchor(name)
_dereq_(108)('anchor', function (createHTML) {
  return function anchor(name) {
    return createHTML(this, 'a', 'name', name);
  };
});

},{"108":108}],233:[function(_dereq_,module,exports){
'use strict';
// B.2.3.3 String.prototype.big()
_dereq_(108)('big', function (createHTML) {
  return function big() {
    return createHTML(this, 'big', '', '');
  };
});

},{"108":108}],234:[function(_dereq_,module,exports){
'use strict';
// B.2.3.4 String.prototype.blink()
_dereq_(108)('blink', function (createHTML) {
  return function blink() {
    return createHTML(this, 'blink', '', '');
  };
});

},{"108":108}],235:[function(_dereq_,module,exports){
'use strict';
// B.2.3.5 String.prototype.bold()
_dereq_(108)('bold', function (createHTML) {
  return function bold() {
    return createHTML(this, 'b', '', '');
  };
});

},{"108":108}],236:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $at = _dereq_(106)(false);
$export($export.P, 'String', {
  // 21.1.3.3 String.prototype.codePointAt(pos)
  codePointAt: function codePointAt(pos) {
    return $at(this, pos);
  }
});

},{"106":106,"33":33}],237:[function(_dereq_,module,exports){
// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])
'use strict';
var $export = _dereq_(33);
var toLength = _dereq_(118);
var context = _dereq_(107);
var ENDS_WITH = 'endsWith';
var $endsWith = ''[ENDS_WITH];

$export($export.P + $export.F * _dereq_(34)(ENDS_WITH), 'String', {
  endsWith: function endsWith(searchString /* , endPosition = @length */) {
    var that = context(this, searchString, ENDS_WITH);
    var endPosition = arguments.length > 1 ? arguments[1] : undefined;
    var len = toLength(that.length);
    var end = endPosition === undefined ? len : Math.min(toLength(endPosition), len);
    var search = String(searchString);
    return $endsWith
      ? $endsWith.call(that, search, end)
      : that.slice(end - search.length, end) === search;
  }
});

},{"107":107,"118":118,"33":33,"34":34}],238:[function(_dereq_,module,exports){
'use strict';
// B.2.3.6 String.prototype.fixed()
_dereq_(108)('fixed', function (createHTML) {
  return function fixed() {
    return createHTML(this, 'tt', '', '');
  };
});

},{"108":108}],239:[function(_dereq_,module,exports){
'use strict';
// B.2.3.7 String.prototype.fontcolor(color)
_dereq_(108)('fontcolor', function (createHTML) {
  return function fontcolor(color) {
    return createHTML(this, 'font', 'color', color);
  };
});

},{"108":108}],240:[function(_dereq_,module,exports){
'use strict';
// B.2.3.8 String.prototype.fontsize(size)
_dereq_(108)('fontsize', function (createHTML) {
  return function fontsize(size) {
    return createHTML(this, 'font', 'size', size);
  };
});

},{"108":108}],241:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var toAbsoluteIndex = _dereq_(114);
var fromCharCode = String.fromCharCode;
var $fromCodePoint = String.fromCodePoint;

// length should be 1, old FF problem
$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {
  // 21.1.2.2 String.fromCodePoint(...codePoints)
  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars
    var res = [];
    var aLen = arguments.length;
    var i = 0;
    var code;
    while (aLen > i) {
      code = +arguments[i++];
      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');
      res.push(code < 0x10000
        ? fromCharCode(code)
        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)
      );
    } return res.join('');
  }
});

},{"114":114,"33":33}],242:[function(_dereq_,module,exports){
// 21.1.3.7 String.prototype.includes(searchString, position = 0)
'use strict';
var $export = _dereq_(33);
var context = _dereq_(107);
var INCLUDES = 'includes';

$export($export.P + $export.F * _dereq_(34)(INCLUDES), 'String', {
  includes: function includes(searchString /* , position = 0 */) {
    return !!~context(this, searchString, INCLUDES)
      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);
  }
});

},{"107":107,"33":33,"34":34}],243:[function(_dereq_,module,exports){
'use strict';
// B.2.3.9 String.prototype.italics()
_dereq_(108)('italics', function (createHTML) {
  return function italics() {
    return createHTML(this, 'i', '', '');
  };
});

},{"108":108}],244:[function(_dereq_,module,exports){
'use strict';
var $at = _dereq_(106)(true);

// 21.1.3.27 String.prototype[@@iterator]()
_dereq_(55)(String, 'String', function (iterated) {
  this._t = String(iterated); // target
  this._i = 0;                // next index
// 21.1.5.2.1 %StringIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var index = this._i;
  var point;
  if (index >= O.length) return { value: undefined, done: true };
  point = $at(O, index);
  this._i += point.length;
  return { value: point, done: false };
});

},{"106":106,"55":55}],245:[function(_dereq_,module,exports){
'use strict';
// B.2.3.10 String.prototype.link(url)
_dereq_(108)('link', function (createHTML) {
  return function link(url) {
    return createHTML(this, 'a', 'href', url);
  };
});

},{"108":108}],246:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var toIObject = _dereq_(117);
var toLength = _dereq_(118);

$export($export.S, 'String', {
  // 21.1.2.4 String.raw(callSite, ...substitutions)
  raw: function raw(callSite) {
    var tpl = toIObject(callSite.raw);
    var len = toLength(tpl.length);
    var aLen = arguments.length;
    var res = [];
    var i = 0;
    while (len > i) {
      res.push(String(tpl[i++]));
      if (i < aLen) res.push(String(arguments[i]));
    } return res.join('');
  }
});

},{"117":117,"118":118,"33":33}],247:[function(_dereq_,module,exports){
var $export = _dereq_(33);

$export($export.P, 'String', {
  // 21.1.3.13 String.prototype.repeat(count)
  repeat: _dereq_(110)
});

},{"110":110,"33":33}],248:[function(_dereq_,module,exports){
'use strict';
// B.2.3.11 String.prototype.small()
_dereq_(108)('small', function (createHTML) {
  return function small() {
    return createHTML(this, 'small', '', '');
  };
});

},{"108":108}],249:[function(_dereq_,module,exports){
// 21.1.3.18 String.prototype.startsWith(searchString [, position ])
'use strict';
var $export = _dereq_(33);
var toLength = _dereq_(118);
var context = _dereq_(107);
var STARTS_WITH = 'startsWith';
var $startsWith = ''[STARTS_WITH];

$export($export.P + $export.F * _dereq_(34)(STARTS_WITH), 'String', {
  startsWith: function startsWith(searchString /* , position = 0 */) {
    var that = context(this, searchString, STARTS_WITH);
    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));
    var search = String(searchString);
    return $startsWith
      ? $startsWith.call(that, search, index)
      : that.slice(index, index + search.length) === search;
  }
});

},{"107":107,"118":118,"33":33,"34":34}],250:[function(_dereq_,module,exports){
'use strict';
// B.2.3.12 String.prototype.strike()
_dereq_(108)('strike', function (createHTML) {
  return function strike() {
    return createHTML(this, 'strike', '', '');
  };
});

},{"108":108}],251:[function(_dereq_,module,exports){
'use strict';
// B.2.3.13 String.prototype.sub()
_dereq_(108)('sub', function (createHTML) {
  return function sub() {
    return createHTML(this, 'sub', '', '');
  };
});

},{"108":108}],252:[function(_dereq_,module,exports){
'use strict';
// B.2.3.14 String.prototype.sup()
_dereq_(108)('sup', function (createHTML) {
  return function sup() {
    return createHTML(this, 'sup', '', '');
  };
});

},{"108":108}],253:[function(_dereq_,module,exports){
'use strict';
// 21.1.3.25 String.prototype.trim()
_dereq_(111)('trim', function ($trim) {
  return function trim() {
    return $trim(this, 3);
  };
});

},{"111":111}],254:[function(_dereq_,module,exports){
'use strict';
// ECMAScript 6 symbols shim
var global = _dereq_(40);
var has = _dereq_(41);
var DESCRIPTORS = _dereq_(29);
var $export = _dereq_(33);
var redefine = _dereq_(94);
var META = _dereq_(66).KEY;
var $fails = _dereq_(35);
var shared = _dereq_(103);
var setToStringTag = _dereq_(101);
var uid = _dereq_(124);
var wks = _dereq_(128);
var wksExt = _dereq_(127);
var wksDefine = _dereq_(126);
var keyOf = _dereq_(59);
var enumKeys = _dereq_(32);
var isArray = _dereq_(49);
var anObject = _dereq_(7);
var toIObject = _dereq_(117);
var toPrimitive = _dereq_(120);
var createDesc = _dereq_(92);
var _create = _dereq_(71);
var gOPNExt = _dereq_(76);
var $GOPD = _dereq_(75);
var $DP = _dereq_(72);
var $keys = _dereq_(81);
var gOPD = $GOPD.f;
var dP = $DP.f;
var gOPN = gOPNExt.f;
var $Symbol = global.Symbol;
var $JSON = global.JSON;
var _stringify = $JSON && $JSON.stringify;
var PROTOTYPE = 'prototype';
var HIDDEN = wks('_hidden');
var TO_PRIMITIVE = wks('toPrimitive');
var isEnum = {}.propertyIsEnumerable;
var SymbolRegistry = shared('symbol-registry');
var AllSymbols = shared('symbols');
var OPSymbols = shared('op-symbols');
var ObjectProto = Object[PROTOTYPE];
var USE_NATIVE = typeof $Symbol == 'function';
var QObject = global.QObject;
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDesc = DESCRIPTORS && $fails(function () {
  return _create(dP({}, 'a', {
    get: function () { return dP(this, 'a', { value: 7 }).a; }
  })).a != 7;
}) ? function (it, key, D) {
  var protoDesc = gOPD(ObjectProto, key);
  if (protoDesc) delete ObjectProto[key];
  dP(it, key, D);
  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);
} : dP;

var wrap = function (tag) {
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);
  sym._k = tag;
  return sym;
};

var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  return it instanceof $Symbol;
};

var $defineProperty = function defineProperty(it, key, D) {
  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);
  anObject(it);
  key = toPrimitive(key, true);
  anObject(D);
  if (has(AllSymbols, key)) {
    if (!D.enumerable) {
      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));
      it[HIDDEN][key] = true;
    } else {
      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;
      D = _create(D, { enumerable: createDesc(0, false) });
    } return setSymbolDesc(it, key, D);
  } return dP(it, key, D);
};
var $defineProperties = function defineProperties(it, P) {
  anObject(it);
  var keys = enumKeys(P = toIObject(P));
  var i = 0;
  var l = keys.length;
  var key;
  while (l > i) $defineProperty(it, key = keys[i++], P[key]);
  return it;
};
var $create = function create(it, P) {
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);
};
var $propertyIsEnumerable = function propertyIsEnumerable(key) {
  var E = isEnum.call(this, key = toPrimitive(key, true));
  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {
  it = toIObject(it);
  key = toPrimitive(key, true);
  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;
  var D = gOPD(it, key);
  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;
  return D;
};
var $getOwnPropertyNames = function getOwnPropertyNames(it) {
  var names = gOPN(toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);
  } return result;
};
var $getOwnPropertySymbols = function getOwnPropertySymbols(it) {
  var IS_OP = it === ObjectProto;
  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);
  } return result;
};

// 19.4.1.1 Symbol([description])
if (!USE_NATIVE) {
  $Symbol = function Symbol() {
    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);
    var $set = function (value) {
      if (this === ObjectProto) $set.call(OPSymbols, value);
      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDesc(this, tag, createDesc(1, value));
    };
    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });
    return wrap(tag);
  };
  redefine($Symbol[PROTOTYPE], 'toString', function toString() {
    return this._k;
  });

  $GOPD.f = $getOwnPropertyDescriptor;
  $DP.f = $defineProperty;
  _dereq_(77).f = gOPNExt.f = $getOwnPropertyNames;
  _dereq_(82).f = $propertyIsEnumerable;
  _dereq_(78).f = $getOwnPropertySymbols;

  if (DESCRIPTORS && !_dereq_(60)) {
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);
  }

  wksExt.f = function (name) {
    return wrap(wks(name));
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });

for (var es6Symbols = (
  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'
).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);

for (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);

$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {
  // 19.4.2.1 Symbol.for(key)
  'for': function (key) {
    return has(SymbolRegistry, key += '')
      ? SymbolRegistry[key]
      : SymbolRegistry[key] = $Symbol(key);
  },
  // 19.4.2.5 Symbol.keyFor(sym)
  keyFor: function keyFor(key) {
    if (isSymbol(key)) return keyOf(SymbolRegistry, key);
    throw TypeError(key + ' is not a symbol!');
  },
  useSetter: function () { setter = true; },
  useSimple: function () { setter = false; }
});

$export($export.S + $export.F * !USE_NATIVE, 'Object', {
  // 19.1.2.2 Object.create(O [, Properties])
  create: $create,
  // 19.1.2.4 Object.defineProperty(O, P, Attributes)
  defineProperty: $defineProperty,
  // 19.1.2.3 Object.defineProperties(O, Properties)
  defineProperties: $defineProperties,
  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
  // 19.1.2.7 Object.getOwnPropertyNames(O)
  getOwnPropertyNames: $getOwnPropertyNames,
  // 19.1.2.8 Object.getOwnPropertySymbols(O)
  getOwnPropertySymbols: $getOwnPropertySymbols
});

// 24.3.2 JSON.stringify(value [, replacer [, space]])
$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {
  var S = $Symbol();
  // MS Edge converts symbol values to JSON as {}
  // WebKit converts symbol values to JSON as null
  // V8 throws on boxed symbols
  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';
})), 'JSON', {
  stringify: function stringify(it) {
    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined
    var args = [it];
    var i = 1;
    var replacer, $replacer;
    while (arguments.length > i) args.push(arguments[i++]);
    replacer = args[1];
    if (typeof replacer == 'function') $replacer = replacer;
    if ($replacer || !isArray(replacer)) replacer = function (key, value) {
      if ($replacer) value = $replacer.call(this, key, value);
      if (!isSymbol(value)) return value;
    };
    args[1] = replacer;
    return _stringify.apply($JSON, args);
  }
});

// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)
$Symbol[PROTOTYPE][TO_PRIMITIVE] || _dereq_(42)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);
// 19.4.3.5 Symbol.prototype[@@toStringTag]
setToStringTag($Symbol, 'Symbol');
// 20.2.1.9 Math[@@toStringTag]
setToStringTag(Math, 'Math', true);
// 24.3.3 JSON[@@toStringTag]
setToStringTag(global.JSON, 'JSON', true);

},{"101":101,"103":103,"117":117,"120":120,"124":124,"126":126,"127":127,"128":128,"29":29,"32":32,"33":33,"35":35,"40":40,"41":41,"42":42,"49":49,"59":59,"60":60,"66":66,"7":7,"71":71,"72":72,"75":75,"76":76,"77":77,"78":78,"81":81,"82":82,"92":92,"94":94}],255:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var $typed = _dereq_(123);
var buffer = _dereq_(122);
var anObject = _dereq_(7);
var toAbsoluteIndex = _dereq_(114);
var toLength = _dereq_(118);
var isObject = _dereq_(51);
var ArrayBuffer = _dereq_(40).ArrayBuffer;
var speciesConstructor = _dereq_(104);
var $ArrayBuffer = buffer.ArrayBuffer;
var $DataView = buffer.DataView;
var $isView = $typed.ABV && ArrayBuffer.isView;
var $slice = $ArrayBuffer.prototype.slice;
var VIEW = $typed.VIEW;
var ARRAY_BUFFER = 'ArrayBuffer';

$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), { ArrayBuffer: $ArrayBuffer });

$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {
  // 24.1.3.1 ArrayBuffer.isView(arg)
  isView: function isView(it) {
    return $isView && $isView(it) || isObject(it) && VIEW in it;
  }
});

$export($export.P + $export.U + $export.F * _dereq_(35)(function () {
  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;
}), ARRAY_BUFFER, {
  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)
  slice: function slice(start, end) {
    if ($slice !== undefined && end === undefined) return $slice.call(anObject(this), start); // FF fix
    var len = anObject(this).byteLength;
    var first = toAbsoluteIndex(start, len);
    var final = toAbsoluteIndex(end === undefined ? len : end, len);
    var result = new (speciesConstructor(this, $ArrayBuffer))(toLength(final - first));
    var viewS = new $DataView(this);
    var viewT = new $DataView(result);
    var index = 0;
    while (first < final) {
      viewT.setUint8(index++, viewS.getUint8(first++));
    } return result;
  }
});

_dereq_(100)(ARRAY_BUFFER);

},{"100":100,"104":104,"114":114,"118":118,"122":122,"123":123,"33":33,"35":35,"40":40,"51":51,"7":7}],256:[function(_dereq_,module,exports){
var $export = _dereq_(33);
$export($export.G + $export.W + $export.F * !_dereq_(123).ABV, {
  DataView: _dereq_(122).DataView
});

},{"122":122,"123":123,"33":33}],257:[function(_dereq_,module,exports){
_dereq_(121)('Float32', 4, function (init) {
  return function Float32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],258:[function(_dereq_,module,exports){
_dereq_(121)('Float64', 8, function (init) {
  return function Float64Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],259:[function(_dereq_,module,exports){
_dereq_(121)('Int16', 2, function (init) {
  return function Int16Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],260:[function(_dereq_,module,exports){
_dereq_(121)('Int32', 4, function (init) {
  return function Int32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],261:[function(_dereq_,module,exports){
_dereq_(121)('Int8', 1, function (init) {
  return function Int8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],262:[function(_dereq_,module,exports){
_dereq_(121)('Uint16', 2, function (init) {
  return function Uint16Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],263:[function(_dereq_,module,exports){
_dereq_(121)('Uint32', 4, function (init) {
  return function Uint32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],264:[function(_dereq_,module,exports){
_dereq_(121)('Uint8', 1, function (init) {
  return function Uint8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});

},{"121":121}],265:[function(_dereq_,module,exports){
_dereq_(121)('Uint8', 1, function (init) {
  return function Uint8ClampedArray(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
}, true);

},{"121":121}],266:[function(_dereq_,module,exports){
'use strict';
var each = _dereq_(12)(0);
var redefine = _dereq_(94);
var meta = _dereq_(66);
var assign = _dereq_(70);
var weak = _dereq_(21);
var isObject = _dereq_(51);
var fails = _dereq_(35);
var validate = _dereq_(125);
var WEAK_MAP = 'WeakMap';
var getWeak = meta.getWeak;
var isExtensible = Object.isExtensible;
var uncaughtFrozenStore = weak.ufstore;
var tmp = {};
var InternalMap;

var wrapper = function (get) {
  return function WeakMap() {
    return get(this, arguments.length > 0 ? arguments[0] : undefined);
  };
};

var methods = {
  // 23.3.3.3 WeakMap.prototype.get(key)
  get: function get(key) {
    if (isObject(key)) {
      var data = getWeak(key);
      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);
      return data ? data[this._i] : undefined;
    }
  },
  // 23.3.3.5 WeakMap.prototype.set(key, value)
  set: function set(key, value) {
    return weak.def(validate(this, WEAK_MAP), key, value);
  }
};

// 23.3 WeakMap Objects
var $WeakMap = module.exports = _dereq_(22)(WEAK_MAP, wrapper, methods, weak, true, true);

// IE11 WeakMap frozen keys fix
if (fails(function () { return new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7; })) {
  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);
  assign(InternalMap.prototype, methods);
  meta.NEED = true;
  each(['delete', 'has', 'get', 'set'], function (key) {
    var proto = $WeakMap.prototype;
    var method = proto[key];
    redefine(proto, key, function (a, b) {
      // store frozen objects on internal weakmap shim
      if (isObject(a) && !isExtensible(a)) {
        if (!this._f) this._f = new InternalMap();
        var result = this._f[key](a, b);
        return key == 'set' ? this : result;
      // store all the rest on native weakmap
      } return method.call(this, a, b);
    });
  });
}

},{"12":12,"125":125,"21":21,"22":22,"35":35,"51":51,"66":66,"70":70,"94":94}],267:[function(_dereq_,module,exports){
'use strict';
var weak = _dereq_(21);
var validate = _dereq_(125);
var WEAK_SET = 'WeakSet';

// 23.4 WeakSet Objects
_dereq_(22)(WEAK_SET, function (get) {
  return function WeakSet() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.4.3.1 WeakSet.prototype.add(value)
  add: function add(value) {
    return weak.def(validate(this, WEAK_SET), value, true);
  }
}, weak, false, true);

},{"125":125,"21":21,"22":22}],268:[function(_dereq_,module,exports){
'use strict';
// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap
var $export = _dereq_(33);
var flattenIntoArray = _dereq_(38);
var toObject = _dereq_(119);
var toLength = _dereq_(118);
var aFunction = _dereq_(3);
var arraySpeciesCreate = _dereq_(15);

$export($export.P, 'Array', {
  flatMap: function flatMap(callbackfn /* , thisArg */) {
    var O = toObject(this);
    var sourceLen, A;
    aFunction(callbackfn);
    sourceLen = toLength(O.length);
    A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);
    return A;
  }
});

_dereq_(5)('flatMap');

},{"118":118,"119":119,"15":15,"3":3,"33":33,"38":38,"5":5}],269:[function(_dereq_,module,exports){
'use strict';
// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten
var $export = _dereq_(33);
var flattenIntoArray = _dereq_(38);
var toObject = _dereq_(119);
var toLength = _dereq_(118);
var toInteger = _dereq_(116);
var arraySpeciesCreate = _dereq_(15);

$export($export.P, 'Array', {
  flatten: function flatten(/* depthArg = 1 */) {
    var depthArg = arguments[0];
    var O = toObject(this);
    var sourceLen = toLength(O.length);
    var A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));
    return A;
  }
});

_dereq_(5)('flatten');

},{"116":116,"118":118,"119":119,"15":15,"33":33,"38":38,"5":5}],270:[function(_dereq_,module,exports){
'use strict';
// https://github.com/tc39/Array.prototype.includes
var $export = _dereq_(33);
var $includes = _dereq_(11)(true);

$export($export.P, 'Array', {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

_dereq_(5)('includes');

},{"11":11,"33":33,"5":5}],271:[function(_dereq_,module,exports){
// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask
var $export = _dereq_(33);
var microtask = _dereq_(68)();
var process = _dereq_(40).process;
var isNode = _dereq_(18)(process) == 'process';

$export($export.G, {
  asap: function asap(fn) {
    var domain = isNode && process.domain;
    microtask(domain ? domain.bind(fn) : fn);
  }
});

},{"18":18,"33":33,"40":40,"68":68}],272:[function(_dereq_,module,exports){
// https://github.com/ljharb/proposal-is-error
var $export = _dereq_(33);
var cof = _dereq_(18);

$export($export.S, 'Error', {
  isError: function isError(it) {
    return cof(it) === 'Error';
  }
});

},{"18":18,"33":33}],273:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-global
var $export = _dereq_(33);

$export($export.G, { global: _dereq_(40) });

},{"33":33,"40":40}],274:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from
_dereq_(97)('Map');

},{"97":97}],275:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of
_dereq_(98)('Map');

},{"98":98}],276:[function(_dereq_,module,exports){
// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export = _dereq_(33);

$export($export.P + $export.R, 'Map', { toJSON: _dereq_(20)('Map') });

},{"20":20,"33":33}],277:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);

$export($export.S, 'Math', {
  clamp: function clamp(x, lower, upper) {
    return Math.min(upper, Math.max(lower, x));
  }
});

},{"33":33}],278:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);

$export($export.S, 'Math', { DEG_PER_RAD: Math.PI / 180 });

},{"33":33}],279:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);
var RAD_PER_DEG = 180 / Math.PI;

$export($export.S, 'Math', {
  degrees: function degrees(radians) {
    return radians * RAD_PER_DEG;
  }
});

},{"33":33}],280:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);
var scale = _dereq_(64);
var fround = _dereq_(62);

$export($export.S, 'Math', {
  fscale: function fscale(x, inLow, inHigh, outLow, outHigh) {
    return fround(scale(x, inLow, inHigh, outLow, outHigh));
  }
});

},{"33":33,"62":62,"64":64}],281:[function(_dereq_,module,exports){
// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = _dereq_(33);

$export($export.S, 'Math', {
  iaddh: function iaddh(x0, x1, y0, y1) {
    var $x0 = x0 >>> 0;
    var $x1 = x1 >>> 0;
    var $y0 = y0 >>> 0;
    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;
  }
});

},{"33":33}],282:[function(_dereq_,module,exports){
// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = _dereq_(33);

$export($export.S, 'Math', {
  imulh: function imulh(u, v) {
    var UINT16 = 0xffff;
    var $u = +u;
    var $v = +v;
    var u0 = $u & UINT16;
    var v0 = $v & UINT16;
    var u1 = $u >> 16;
    var v1 = $v >> 16;
    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);
    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);
  }
});

},{"33":33}],283:[function(_dereq_,module,exports){
// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = _dereq_(33);

$export($export.S, 'Math', {
  isubh: function isubh(x0, x1, y0, y1) {
    var $x0 = x0 >>> 0;
    var $x1 = x1 >>> 0;
    var $y0 = y0 >>> 0;
    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;
  }
});

},{"33":33}],284:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);

$export($export.S, 'Math', { RAD_PER_DEG: 180 / Math.PI });

},{"33":33}],285:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);
var DEG_PER_RAD = Math.PI / 180;

$export($export.S, 'Math', {
  radians: function radians(degrees) {
    return degrees * DEG_PER_RAD;
  }
});

},{"33":33}],286:[function(_dereq_,module,exports){
// https://rwaldron.github.io/proposal-math-extensions/
var $export = _dereq_(33);

$export($export.S, 'Math', { scale: _dereq_(64) });

},{"33":33,"64":64}],287:[function(_dereq_,module,exports){
// http://jfbastien.github.io/papers/Math.signbit.html
var $export = _dereq_(33);

$export($export.S, 'Math', { signbit: function signbit(x) {
  // eslint-disable-next-line no-self-compare
  return (x = +x) != x ? x : x == 0 ? 1 / x == Infinity : x > 0;
} });

},{"33":33}],288:[function(_dereq_,module,exports){
// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = _dereq_(33);

$export($export.S, 'Math', {
  umulh: function umulh(u, v) {
    var UINT16 = 0xffff;
    var $u = +u;
    var $v = +v;
    var u0 = $u & UINT16;
    var v0 = $v & UINT16;
    var u1 = $u >>> 16;
    var v1 = $v >>> 16;
    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);
    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);
  }
});

},{"33":33}],289:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toObject = _dereq_(119);
var aFunction = _dereq_(3);
var $defineProperty = _dereq_(72);

// B.2.2.2 Object.prototype.__defineGetter__(P, getter)
_dereq_(29) && $export($export.P + _dereq_(74), 'Object', {
  __defineGetter__: function __defineGetter__(P, getter) {
    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });
  }
});

},{"119":119,"29":29,"3":3,"33":33,"72":72,"74":74}],290:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toObject = _dereq_(119);
var aFunction = _dereq_(3);
var $defineProperty = _dereq_(72);

// B.2.2.3 Object.prototype.__defineSetter__(P, setter)
_dereq_(29) && $export($export.P + _dereq_(74), 'Object', {
  __defineSetter__: function __defineSetter__(P, setter) {
    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });
  }
});

},{"119":119,"29":29,"3":3,"33":33,"72":72,"74":74}],291:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-object-values-entries
var $export = _dereq_(33);
var $entries = _dereq_(84)(true);

$export($export.S, 'Object', {
  entries: function entries(it) {
    return $entries(it);
  }
});

},{"33":33,"84":84}],292:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-object-getownpropertydescriptors
var $export = _dereq_(33);
var ownKeys = _dereq_(85);
var toIObject = _dereq_(117);
var gOPD = _dereq_(75);
var createProperty = _dereq_(24);

$export($export.S, 'Object', {
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
    var O = toIObject(object);
    var getDesc = gOPD.f;
    var keys = ownKeys(O);
    var result = {};
    var i = 0;
    var key, desc;
    while (keys.length > i) {
      desc = getDesc(O, key = keys[i++]);
      if (desc !== undefined) createProperty(result, key, desc);
    }
    return result;
  }
});

},{"117":117,"24":24,"33":33,"75":75,"85":85}],293:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toObject = _dereq_(119);
var toPrimitive = _dereq_(120);
var getPrototypeOf = _dereq_(79);
var getOwnPropertyDescriptor = _dereq_(75).f;

// B.2.2.4 Object.prototype.__lookupGetter__(P)
_dereq_(29) && $export($export.P + _dereq_(74), 'Object', {
  __lookupGetter__: function __lookupGetter__(P) {
    var O = toObject(this);
    var K = toPrimitive(P, true);
    var D;
    do {
      if (D = getOwnPropertyDescriptor(O, K)) return D.get;
    } while (O = getPrototypeOf(O));
  }
});

},{"119":119,"120":120,"29":29,"33":33,"74":74,"75":75,"79":79}],294:[function(_dereq_,module,exports){
'use strict';
var $export = _dereq_(33);
var toObject = _dereq_(119);
var toPrimitive = _dereq_(120);
var getPrototypeOf = _dereq_(79);
var getOwnPropertyDescriptor = _dereq_(75).f;

// B.2.2.5 Object.prototype.__lookupSetter__(P)
_dereq_(29) && $export($export.P + _dereq_(74), 'Object', {
  __lookupSetter__: function __lookupSetter__(P) {
    var O = toObject(this);
    var K = toPrimitive(P, true);
    var D;
    do {
      if (D = getOwnPropertyDescriptor(O, K)) return D.set;
    } while (O = getPrototypeOf(O));
  }
});

},{"119":119,"120":120,"29":29,"33":33,"74":74,"75":75,"79":79}],295:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-object-values-entries
var $export = _dereq_(33);
var $values = _dereq_(84)(false);

$export($export.S, 'Object', {
  values: function values(it) {
    return $values(it);
  }
});

},{"33":33,"84":84}],296:[function(_dereq_,module,exports){
'use strict';
// https://github.com/zenparsing/es-observable
var $export = _dereq_(33);
var global = _dereq_(40);
var core = _dereq_(23);
var microtask = _dereq_(68)();
var OBSERVABLE = _dereq_(128)('observable');
var aFunction = _dereq_(3);
var anObject = _dereq_(7);
var anInstance = _dereq_(6);
var redefineAll = _dereq_(93);
var hide = _dereq_(42);
var forOf = _dereq_(39);
var RETURN = forOf.RETURN;

var getMethod = function (fn) {
  return fn == null ? undefined : aFunction(fn);
};

var cleanupSubscription = function (subscription) {
  var cleanup = subscription._c;
  if (cleanup) {
    subscription._c = undefined;
    cleanup();
  }
};

var subscriptionClosed = function (subscription) {
  return subscription._o === undefined;
};

var closeSubscription = function (subscription) {
  if (!subscriptionClosed(subscription)) {
    subscription._o = undefined;
    cleanupSubscription(subscription);
  }
};

var Subscription = function (observer, subscriber) {
  anObject(observer);
  this._c = undefined;
  this._o = observer;
  observer = new SubscriptionObserver(this);
  try {
    var cleanup = subscriber(observer);
    var subscription = cleanup;
    if (cleanup != null) {
      if (typeof cleanup.unsubscribe === 'function') cleanup = function () { subscription.unsubscribe(); };
      else aFunction(cleanup);
      this._c = cleanup;
    }
  } catch (e) {
    observer.error(e);
    return;
  } if (subscriptionClosed(this)) cleanupSubscription(this);
};

Subscription.prototype = redefineAll({}, {
  unsubscribe: function unsubscribe() { closeSubscription(this); }
});

var SubscriptionObserver = function (subscription) {
  this._s = subscription;
};

SubscriptionObserver.prototype = redefineAll({}, {
  next: function next(value) {
    var subscription = this._s;
    if (!subscriptionClosed(subscription)) {
      var observer = subscription._o;
      try {
        var m = getMethod(observer.next);
        if (m) return m.call(observer, value);
      } catch (e) {
        try {
          closeSubscription(subscription);
        } finally {
          throw e;
        }
      }
    }
  },
  error: function error(value) {
    var subscription = this._s;
    if (subscriptionClosed(subscription)) throw value;
    var observer = subscription._o;
    subscription._o = undefined;
    try {
      var m = getMethod(observer.error);
      if (!m) throw value;
      value = m.call(observer, value);
    } catch (e) {
      try {
        cleanupSubscription(subscription);
      } finally {
        throw e;
      }
    } cleanupSubscription(subscription);
    return value;
  },
  complete: function complete(value) {
    var subscription = this._s;
    if (!subscriptionClosed(subscription)) {
      var observer = subscription._o;
      subscription._o = undefined;
      try {
        var m = getMethod(observer.complete);
        value = m ? m.call(observer, value) : undefined;
      } catch (e) {
        try {
          cleanupSubscription(subscription);
        } finally {
          throw e;
        }
      } cleanupSubscription(subscription);
      return value;
    }
  }
});

var $Observable = function Observable(subscriber) {
  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);
};

redefineAll($Observable.prototype, {
  subscribe: function subscribe(observer) {
    return new Subscription(observer, this._f);
  },
  forEach: function forEach(fn) {
    var that = this;
    return new (core.Promise || global.Promise)(function (resolve, reject) {
      aFunction(fn);
      var subscription = that.subscribe({
        next: function (value) {
          try {
            return fn(value);
          } catch (e) {
            reject(e);
            subscription.unsubscribe();
          }
        },
        error: reject,
        complete: resolve
      });
    });
  }
});

redefineAll($Observable, {
  from: function from(x) {
    var C = typeof this === 'function' ? this : $Observable;
    var method = getMethod(anObject(x)[OBSERVABLE]);
    if (method) {
      var observable = anObject(method.call(x));
      return observable.constructor === C ? observable : new C(function (observer) {
        return observable.subscribe(observer);
      });
    }
    return new C(function (observer) {
      var done = false;
      microtask(function () {
        if (!done) {
          try {
            if (forOf(x, false, function (it) {
              observer.next(it);
              if (done) return RETURN;
            }) === RETURN) return;
          } catch (e) {
            if (done) throw e;
            observer.error(e);
            return;
          } observer.complete();
        }
      });
      return function () { done = true; };
    });
  },
  of: function of() {
    for (var i = 0, l = arguments.length, items = Array(l); i < l;) items[i] = arguments[i++];
    return new (typeof this === 'function' ? this : $Observable)(function (observer) {
      var done = false;
      microtask(function () {
        if (!done) {
          for (var j = 0; j < items.length; ++j) {
            observer.next(items[j]);
            if (done) return;
          } observer.complete();
        }
      });
      return function () { done = true; };
    });
  }
});

hide($Observable.prototype, OBSERVABLE, function () { return this; });

$export($export.G, { Observable: $Observable });

_dereq_(100)('Observable');

},{"100":100,"128":128,"23":23,"3":3,"33":33,"39":39,"40":40,"42":42,"6":6,"68":68,"7":7,"93":93}],297:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-promise-finally
'use strict';
var $export = _dereq_(33);
var core = _dereq_(23);
var global = _dereq_(40);
var speciesConstructor = _dereq_(104);
var promiseResolve = _dereq_(91);

$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {
  var C = speciesConstructor(this, core.Promise || global.Promise);
  var isFunction = typeof onFinally == 'function';
  return this.then(
    isFunction ? function (x) {
      return promiseResolve(C, onFinally()).then(function () { return x; });
    } : onFinally,
    isFunction ? function (e) {
      return promiseResolve(C, onFinally()).then(function () { throw e; });
    } : onFinally
  );
} });

},{"104":104,"23":23,"33":33,"40":40,"91":91}],298:[function(_dereq_,module,exports){
'use strict';
// https://github.com/tc39/proposal-promise-try
var $export = _dereq_(33);
var newPromiseCapability = _dereq_(69);
var perform = _dereq_(90);

$export($export.S, 'Promise', { 'try': function (callbackfn) {
  var promiseCapability = newPromiseCapability.f(this);
  var result = perform(callbackfn);
  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);
  return promiseCapability.promise;
} });

},{"33":33,"69":69,"90":90}],299:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var toMetaKey = metadata.key;
var ordinaryDefineOwnMetadata = metadata.set;

metadata.exp({ defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey) {
  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));
} });

},{"67":67,"7":7}],300:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var toMetaKey = metadata.key;
var getOrCreateMetadataMap = metadata.map;
var store = metadata.store;

metadata.exp({ deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {
  var targetKey = arguments.length < 3 ? undefined : toMetaKey(arguments[2]);
  var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);
  if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;
  if (metadataMap.size) return true;
  var targetMetadata = store.get(target);
  targetMetadata['delete'](targetKey);
  return !!targetMetadata.size || store['delete'](target);
} });

},{"67":67,"7":7}],301:[function(_dereq_,module,exports){
var Set = _dereq_(231);
var from = _dereq_(10);
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var getPrototypeOf = _dereq_(79);
var ordinaryOwnMetadataKeys = metadata.keys;
var toMetaKey = metadata.key;

var ordinaryMetadataKeys = function (O, P) {
  var oKeys = ordinaryOwnMetadataKeys(O, P);
  var parent = getPrototypeOf(O);
  if (parent === null) return oKeys;
  var pKeys = ordinaryMetadataKeys(parent, P);
  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;
};

metadata.exp({ getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {
  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));
} });

},{"10":10,"231":231,"67":67,"7":7,"79":79}],302:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var getPrototypeOf = _dereq_(79);
var ordinaryHasOwnMetadata = metadata.has;
var ordinaryGetOwnMetadata = metadata.get;
var toMetaKey = metadata.key;

var ordinaryGetMetadata = function (MetadataKey, O, P) {
  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);
  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);
  var parent = getPrototypeOf(O);
  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;
};

metadata.exp({ getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });

},{"67":67,"7":7,"79":79}],303:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var ordinaryOwnMetadataKeys = metadata.keys;
var toMetaKey = metadata.key;

metadata.exp({ getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {
  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));
} });

},{"67":67,"7":7}],304:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var ordinaryGetOwnMetadata = metadata.get;
var toMetaKey = metadata.key;

metadata.exp({ getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryGetOwnMetadata(metadataKey, anObject(target)
    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });

},{"67":67,"7":7}],305:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var getPrototypeOf = _dereq_(79);
var ordinaryHasOwnMetadata = metadata.has;
var toMetaKey = metadata.key;

var ordinaryHasMetadata = function (MetadataKey, O, P) {
  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);
  if (hasOwn) return true;
  var parent = getPrototypeOf(O);
  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;
};

metadata.exp({ hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });

},{"67":67,"7":7,"79":79}],306:[function(_dereq_,module,exports){
var metadata = _dereq_(67);
var anObject = _dereq_(7);
var ordinaryHasOwnMetadata = metadata.has;
var toMetaKey = metadata.key;

metadata.exp({ hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryHasOwnMetadata(metadataKey, anObject(target)
    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });

},{"67":67,"7":7}],307:[function(_dereq_,module,exports){
var $metadata = _dereq_(67);
var anObject = _dereq_(7);
var aFunction = _dereq_(3);
var toMetaKey = $metadata.key;
var ordinaryDefineOwnMetadata = $metadata.set;

$metadata.exp({ metadata: function metadata(metadataKey, metadataValue) {
  return function decorator(target, targetKey) {
    ordinaryDefineOwnMetadata(
      metadataKey, metadataValue,
      (targetKey !== undefined ? anObject : aFunction)(target),
      toMetaKey(targetKey)
    );
  };
} });

},{"3":3,"67":67,"7":7}],308:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from
_dereq_(97)('Set');

},{"97":97}],309:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of
_dereq_(98)('Set');

},{"98":98}],310:[function(_dereq_,module,exports){
// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export = _dereq_(33);

$export($export.P + $export.R, 'Set', { toJSON: _dereq_(20)('Set') });

},{"20":20,"33":33}],311:[function(_dereq_,module,exports){
'use strict';
// https://github.com/mathiasbynens/String.prototype.at
var $export = _dereq_(33);
var $at = _dereq_(106)(true);

$export($export.P, 'String', {
  at: function at(pos) {
    return $at(this, pos);
  }
});

},{"106":106,"33":33}],312:[function(_dereq_,module,exports){
'use strict';
// https://tc39.github.io/String.prototype.matchAll/
var $export = _dereq_(33);
var defined = _dereq_(28);
var toLength = _dereq_(118);
var isRegExp = _dereq_(52);
var getFlags = _dereq_(37);
var RegExpProto = RegExp.prototype;

var $RegExpStringIterator = function (regexp, string) {
  this._r = regexp;
  this._s = string;
};

_dereq_(54)($RegExpStringIterator, 'RegExp String', function next() {
  var match = this._r.exec(this._s);
  return { value: match, done: match === null };
});

$export($export.P, 'String', {
  matchAll: function matchAll(regexp) {
    defined(this);
    if (!isRegExp(regexp)) throw TypeError(regexp + ' is not a regexp!');
    var S = String(this);
    var flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp);
    var rx = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);
    rx.lastIndex = toLength(regexp.lastIndex);
    return new $RegExpStringIterator(rx, S);
  }
});

},{"118":118,"28":28,"33":33,"37":37,"52":52,"54":54}],313:[function(_dereq_,module,exports){
'use strict';
// https://github.com/tc39/proposal-string-pad-start-end
var $export = _dereq_(33);
var $pad = _dereq_(109);

$export($export.P, 'String', {
  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);
  }
});

},{"109":109,"33":33}],314:[function(_dereq_,module,exports){
'use strict';
// https://github.com/tc39/proposal-string-pad-start-end
var $export = _dereq_(33);
var $pad = _dereq_(109);

$export($export.P, 'String', {
  padStart: function padStart(maxLength /* , fillString = ' ' */) {
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);
  }
});

},{"109":109,"33":33}],315:[function(_dereq_,module,exports){
'use strict';
// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
_dereq_(111)('trimLeft', function ($trim) {
  return function trimLeft() {
    return $trim(this, 1);
  };
}, 'trimStart');

},{"111":111}],316:[function(_dereq_,module,exports){
'use strict';
// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
_dereq_(111)('trimRight', function ($trim) {
  return function trimRight() {
    return $trim(this, 2);
  };
}, 'trimEnd');

},{"111":111}],317:[function(_dereq_,module,exports){
_dereq_(126)('asyncIterator');

},{"126":126}],318:[function(_dereq_,module,exports){
_dereq_(126)('observable');

},{"126":126}],319:[function(_dereq_,module,exports){
// https://github.com/tc39/proposal-global
var $export = _dereq_(33);

$export($export.S, 'System', { global: _dereq_(40) });

},{"33":33,"40":40}],320:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from
_dereq_(97)('WeakMap');

},{"97":97}],321:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of
_dereq_(98)('WeakMap');

},{"98":98}],322:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from
_dereq_(97)('WeakSet');

},{"97":97}],323:[function(_dereq_,module,exports){
// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of
_dereq_(98)('WeakSet');

},{"98":98}],324:[function(_dereq_,module,exports){
var $iterators = _dereq_(141);
var getKeys = _dereq_(81);
var redefine = _dereq_(94);
var global = _dereq_(40);
var hide = _dereq_(42);
var Iterators = _dereq_(58);
var wks = _dereq_(128);
var ITERATOR = wks('iterator');
var TO_STRING_TAG = wks('toStringTag');
var ArrayValues = Iterators.Array;

var DOMIterables = {
  CSSRuleList: true, // TODO: Not spec compliant, should be false.
  CSSStyleDeclaration: false,
  CSSValueList: false,
  ClientRectList: false,
  DOMRectList: false,
  DOMStringList: false,
  DOMTokenList: true,
  DataTransferItemList: false,
  FileList: false,
  HTMLAllCollection: false,
  HTMLCollection: false,
  HTMLFormElement: false,
  HTMLSelectElement: false,
  MediaList: true, // TODO: Not spec compliant, should be false.
  MimeTypeArray: false,
  NamedNodeMap: false,
  NodeList: true,
  PaintRequestList: false,
  Plugin: false,
  PluginArray: false,
  SVGLengthList: false,
  SVGNumberList: false,
  SVGPathSegList: false,
  SVGPointList: false,
  SVGStringList: false,
  SVGTransformList: false,
  SourceBufferList: false,
  StyleSheetList: true, // TODO: Not spec compliant, should be false.
  TextTrackCueList: false,
  TextTrackList: false,
  TouchList: false
};

for (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {
  var NAME = collections[i];
  var explicit = DOMIterables[NAME];
  var Collection = global[NAME];
  var proto = Collection && Collection.prototype;
  var key;
  if (proto) {
    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);
    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);
    Iterators[NAME] = ArrayValues;
    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);
  }
}

},{"128":128,"141":141,"40":40,"42":42,"58":58,"81":81,"94":94}],325:[function(_dereq_,module,exports){
var $export = _dereq_(33);
var $task = _dereq_(113);
$export($export.G + $export.B, {
  setImmediate: $task.set,
  clearImmediate: $task.clear
});

},{"113":113,"33":33}],326:[function(_dereq_,module,exports){
// ie9- setTimeout & setInterval additional parameters fix
var global = _dereq_(40);
var $export = _dereq_(33);
var invoke = _dereq_(46);
var partial = _dereq_(88);
var navigator = global.navigator;
var MSIE = !!navigator && /MSIE .\./.test(navigator.userAgent); // <- dirty ie9- check
var wrap = function (set) {
  return MSIE ? function (fn, time /* , ...args */) {
    return set(invoke(
      partial,
      [].slice.call(arguments, 2),
      // eslint-disable-next-line no-new-func
      typeof fn == 'function' ? fn : Function(fn)
    ), time);
  } : set;
};
$export($export.G + $export.B + $export.F * MSIE, {
  setTimeout: wrap(global.setTimeout),
  setInterval: wrap(global.setInterval)
});

},{"33":33,"40":40,"46":46,"88":88}],327:[function(_dereq_,module,exports){
_dereq_(254);
_dereq_(191);
_dereq_(193);
_dereq_(192);
_dereq_(195);
_dereq_(197);
_dereq_(202);
_dereq_(196);
_dereq_(194);
_dereq_(204);
_dereq_(203);
_dereq_(199);
_dereq_(200);
_dereq_(198);
_dereq_(190);
_dereq_(201);
_dereq_(205);
_dereq_(206);
_dereq_(157);
_dereq_(159);
_dereq_(158);
_dereq_(208);
_dereq_(207);
_dereq_(178);
_dereq_(188);
_dereq_(189);
_dereq_(179);
_dereq_(180);
_dereq_(181);
_dereq_(182);
_dereq_(183);
_dereq_(184);
_dereq_(185);
_dereq_(186);
_dereq_(187);
_dereq_(161);
_dereq_(162);
_dereq_(163);
_dereq_(164);
_dereq_(165);
_dereq_(166);
_dereq_(167);
_dereq_(168);
_dereq_(169);
_dereq_(170);
_dereq_(171);
_dereq_(172);
_dereq_(173);
_dereq_(174);
_dereq_(175);
_dereq_(176);
_dereq_(177);
_dereq_(241);
_dereq_(246);
_dereq_(253);
_dereq_(244);
_dereq_(236);
_dereq_(237);
_dereq_(242);
_dereq_(247);
_dereq_(249);
_dereq_(232);
_dereq_(233);
_dereq_(234);
_dereq_(235);
_dereq_(238);
_dereq_(239);
_dereq_(240);
_dereq_(243);
_dereq_(245);
_dereq_(248);
_dereq_(250);
_dereq_(251);
_dereq_(252);
_dereq_(152);
_dereq_(154);
_dereq_(153);
_dereq_(156);
_dereq_(155);
_dereq_(140);
_dereq_(138);
_dereq_(145);
_dereq_(142);
_dereq_(148);
_dereq_(150);
_dereq_(137);
_dereq_(144);
_dereq_(134);
_dereq_(149);
_dereq_(132);
_dereq_(147);
_dereq_(146);
_dereq_(139);
_dereq_(143);
_dereq_(131);
_dereq_(133);
_dereq_(136);
_dereq_(135);
_dereq_(151);
_dereq_(141);
_dereq_(224);
_dereq_(230);
_dereq_(225);
_dereq_(226);
_dereq_(227);
_dereq_(228);
_dereq_(229);
_dereq_(209);
_dereq_(160);
_dereq_(231);
_dereq_(266);
_dereq_(267);
_dereq_(255);
_dereq_(256);
_dereq_(261);
_dereq_(264);
_dereq_(265);
_dereq_(259);
_dereq_(262);
_dereq_(260);
_dereq_(263);
_dereq_(257);
_dereq_(258);
_dereq_(210);
_dereq_(211);
_dereq_(212);
_dereq_(213);
_dereq_(214);
_dereq_(217);
_dereq_(215);
_dereq_(216);
_dereq_(218);
_dereq_(219);
_dereq_(220);
_dereq_(221);
_dereq_(223);
_dereq_(222);
_dereq_(270);
_dereq_(268);
_dereq_(269);
_dereq_(311);
_dereq_(314);
_dereq_(313);
_dereq_(315);
_dereq_(316);
_dereq_(312);
_dereq_(317);
_dereq_(318);
_dereq_(292);
_dereq_(295);
_dereq_(291);
_dereq_(289);
_dereq_(290);
_dereq_(293);
_dereq_(294);
_dereq_(276);
_dereq_(310);
_dereq_(275);
_dereq_(309);
_dereq_(321);
_dereq_(323);
_dereq_(274);
_dereq_(308);
_dereq_(320);
_dereq_(322);
_dereq_(273);
_dereq_(319);
_dereq_(272);
_dereq_(277);
_dereq_(278);
_dereq_(279);
_dereq_(280);
_dereq_(281);
_dereq_(283);
_dereq_(282);
_dereq_(284);
_dereq_(285);
_dereq_(286);
_dereq_(288);
_dereq_(287);
_dereq_(297);
_dereq_(298);
_dereq_(299);
_dereq_(300);
_dereq_(302);
_dereq_(301);
_dereq_(304);
_dereq_(303);
_dereq_(305);
_dereq_(306);
_dereq_(307);
_dereq_(271);
_dereq_(296);
_dereq_(326);
_dereq_(325);
_dereq_(324);
module.exports = _dereq_(23);

},{"131":131,"132":132,"133":133,"134":134,"135":135,"136":136,"137":137,"138":138,"139":139,"140":140,"141":141,"142":142,"143":143,"144":144,"145":145,"146":146,"147":147,"148":148,"149":149,"150":150,"151":151,"152":152,"153":153,"154":154,"155":155,"156":156,"157":157,"158":158,"159":159,"160":160,"161":161,"162":162,"163":163,"164":164,"165":165,"166":166,"167":167,"168":168,"169":169,"170":170,"171":171,"172":172,"173":173,"174":174,"175":175,"176":176,"177":177,"178":178,"179":179,"180":180,"181":181,"182":182,"183":183,"184":184,"185":185,"186":186,"187":187,"188":188,"189":189,"190":190,"191":191,"192":192,"193":193,"194":194,"195":195,"196":196,"197":197,"198":198,"199":199,"200":200,"201":201,"202":202,"203":203,"204":204,"205":205,"206":206,"207":207,"208":208,"209":209,"210":210,"211":211,"212":212,"213":213,"214":214,"215":215,"216":216,"217":217,"218":218,"219":219,"220":220,"221":221,"222":222,"223":223,"224":224,"225":225,"226":226,"227":227,"228":228,"229":229,"23":23,"230":230,"231":231,"232":232,"233":233,"234":234,"235":235,"236":236,"237":237,"238":238,"239":239,"240":240,"241":241,"242":242,"243":243,"244":244,"245":245,"246":246,"247":247,"248":248,"249":249,"250":250,"251":251,"252":252,"253":253,"254":254,"255":255,"256":256,"257":257,"258":258,"259":259,"260":260,"261":261,"262":262,"263":263,"264":264,"265":265,"266":266,"267":267,"268":268,"269":269,"270":270,"271":271,"272":272,"273":273,"274":274,"275":275,"276":276,"277":277,"278":278,"279":279,"280":280,"281":281,"282":282,"283":283,"284":284,"285":285,"286":286,"287":287,"288":288,"289":289,"290":290,"291":291,"292":292,"293":293,"294":294,"295":295,"296":296,"297":297,"298":298,"299":299,"300":300,"301":301,"302":302,"303":303,"304":304,"305":305,"306":306,"307":307,"308":308,"309":309,"310":310,"311":311,"312":312,"313":313,"314":314,"315":315,"316":316,"317":317,"318":318,"319":319,"320":320,"321":321,"322":322,"323":323,"324":324,"325":325,"326":326}],328:[function(_dereq_,module,exports){
(function (global){
/**
 * Copyright (c) 2014, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * https://raw.github.com/facebook/regenerator/master/LICENSE file. An
 * additional grant of patent rights can be found in the PATENTS file in
 * the same directory.
 */

!(function(global) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  var inModule = typeof module === "object";
  var runtime = global.regeneratorRuntime;
  if (runtime) {
    if (inModule) {
      // If regeneratorRuntime is defined globally and we're in a module,
      // make the exports object identical to regeneratorRuntime.
      module.exports = runtime;
    }
    // Don't bother evaluating the rest of this file if the runtime was
    // already defined globally.
    return;
  }

  // Define the runtime globally (as expected by generated code) as either
  // module.exports (if we're in a module) or a new, empty object.
  runtime = global.regeneratorRuntime = inModule ? module.exports : {};

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  runtime.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  runtime.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  runtime.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  runtime.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration. If the Promise is rejected, however, the
          // result for this iteration will be rejected with the same
          // reason. Note that rejections of yielded Promises are not
          // thrown back into the generator function, as is the case
          // when an awaited Promise is rejected. This difference in
          // behavior between yield and await is important, because it
          // allows the consumer to decide what to do with the yielded
          // rejection (swallow it and continue, manually .throw it back
          // into the generator, abandon iteration, whatever). With
          // await, by contrast, there is no opportunity to examine the
          // rejection reason outside the generator function, so the
          // only option is to throw it from the await expression, and
          // let the generator function handle the exception.
          result.value = unwrapped;
          resolve(result);
        }, reject);
      }
    }

    if (typeof global.process === "object" && global.process.domain) {
      invoke = global.process.domain.bind(invoke);
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  runtime.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  runtime.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return runtime.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        if (delegate.iterator.return) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  runtime.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  runtime.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };
})(
  // Among the various tricks for obtaining a reference to the global
  // object, this seems to be the most reliable technique that does not
  // use indirect eval (which violates Content Security Policy).
  typeof global === "object" ? global :
  typeof window === "object" ? window :
  typeof self === "object" ? self : this
);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1]);

/*
 * classList.js: Cross-browser full element.classList implementation.
 * 1.1.20170427
 *
 * By Eli Grey, http://eligrey.com
 * License: Dedicated to the public domain.
 *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md
 */

/*global self, document, DOMException */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */

if ("document" in window.self) {

// Full polyfill for browsers with no classList support
// Including IE < Edge missing SVGElement.classList
if (!("classList" in document.createElement("_")) 
	|| document.createElementNS && !("classList" in document.createElementNS("http://www.w3.org/2000/svg","g"))) {

(function (view) {

"use strict";

if (!('Element' in view)) return;

var
	  classListProp = "classList"
	, protoProp = "prototype"
	, elemCtrProto = view.Element[protoProp]
	, objCtr = Object
	, strTrim = String[protoProp].trim || function () {
		return this.replace(/^\s+|\s+$/g, "");
	}
	, arrIndexOf = Array[protoProp].indexOf || function (item) {
		var
			  i = 0
			, len = this.length
		;
		for (; i < len; i++) {
			if (i in this && this[i] === item) {
				return i;
			}
		}
		return -1;
	}
	// Vendors: please allow content code to instantiate DOMExceptions
	, DOMEx = function (type, message) {
		this.name = type;
		this.code = DOMException[type];
		this.message = message;
	}
	, checkTokenAndGetIndex = function (classList, token) {
		if (token === "") {
			throw new DOMEx(
				  "SYNTAX_ERR"
				, "An invalid or illegal string was specified"
			);
		}
		if (/\s/.test(token)) {
			throw new DOMEx(
				  "INVALID_CHARACTER_ERR"
				, "String contains an invalid character"
			);
		}
		return arrIndexOf.call(classList, token);
	}
	, ClassList = function (elem) {
		var
			  trimmedClasses = strTrim.call(elem.getAttribute("class") || "")
			, classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []
			, i = 0
			, len = classes.length
		;
		for (; i < len; i++) {
			this.push(classes[i]);
		}
		this._updateClassName = function () {
			elem.setAttribute("class", this.toString());
		};
	}
	, classListProto = ClassList[protoProp] = []
	, classListGetter = function () {
		return new ClassList(this);
	}
;
// Most DOMException implementations don't allow calling DOMException's toString()
// on non-DOMExceptions. Error's toString() is sufficient here.
DOMEx[protoProp] = Error[protoProp];
classListProto.item = function (i) {
	return this[i] || null;
};
classListProto.contains = function (token) {
	token += "";
	return checkTokenAndGetIndex(this, token) !== -1;
};
classListProto.add = function () {
	var
		  tokens = arguments
		, i = 0
		, l = tokens.length
		, token
		, updated = false
	;
	do {
		token = tokens[i] + "";
		if (checkTokenAndGetIndex(this, token) === -1) {
			this.push(token);
			updated = true;
		}
	}
	while (++i < l);

	if (updated) {
		this._updateClassName();
	}
};
classListProto.remove = function () {
	var
		  tokens = arguments
		, i = 0
		, l = tokens.length
		, token
		, updated = false
		, index
	;
	do {
		token = tokens[i] + "";
		index = checkTokenAndGetIndex(this, token);
		while (index !== -1) {
			this.splice(index, 1);
			updated = true;
			index = checkTokenAndGetIndex(this, token);
		}
	}
	while (++i < l);

	if (updated) {
		this._updateClassName();
	}
};
classListProto.toggle = function (token, force) {
	token += "";

	var
		  result = this.contains(token)
		, method = result ?
			force !== true && "remove"
		:
			force !== false && "add"
	;

	if (method) {
		this[method](token);
	}

	if (force === true || force === false) {
		return force;
	} else {
		return !result;
	}
};
classListProto.toString = function () {
	return this.join(" ");
};

if (objCtr.defineProperty) {
	var classListPropDesc = {
		  get: classListGetter
		, enumerable: true
		, configurable: true
	};
	try {
		objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
	} catch (ex) { // IE 8 doesn't support enumerable:true
		// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36
		// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected
		if (ex.number === undefined || ex.number === -0x7FF5EC54) {
			classListPropDesc.enumerable = false;
			objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
		}
	}
} else if (objCtr[protoProp].__defineGetter__) {
	elemCtrProto.__defineGetter__(classListProp, classListGetter);
}

}(window.self));

}

// There is full or partial native classList support, so just check if we need
// to normalize the add/remove and toggle APIs.

(function () {
	"use strict";

	var testElement = document.createElement("_");

	testElement.classList.add("c1", "c2");

	// Polyfill for IE 10/11 and Firefox <26, where classList.add and
	// classList.remove exist but support only one argument at a time.
	if (!testElement.classList.contains("c2")) {
		var createMethod = function(method) {
			var original = DOMTokenList.prototype[method];

			DOMTokenList.prototype[method] = function(token) {
				var i, len = arguments.length;

				for (i = 0; i < len; i++) {
					token = arguments[i];
					original.call(this, token);
				}
			};
		};
		createMethod('add');
		createMethod('remove');
	}

	testElement.classList.toggle("c3", false);

	// Polyfill for IE 10 and Firefox <24, where classList.toggle does not
	// support the second argument.
	if (testElement.classList.contains("c3")) {
		var _toggle = DOMTokenList.prototype.toggle;

		DOMTokenList.prototype.toggle = function(token, force) {
			if (1 in arguments && !this.contains(token) === !force) {
				return force;
			} else {
				return _toggle.call(this, token);
			}
		};

	}

	testElement = null;
}());

}

/*!
Copyright (C) 2013-2015 by WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function(window){
  /*! (C) WebReflection Mit Style License */
  if (document.createEvent) return;
  var
    DUNNOABOUTDOMLOADED = true,
    READYEVENTDISPATCHED = false,
    ONREADYSTATECHANGE = 'onreadystatechange',
    DOMCONTENTLOADED = 'DOMContentLoaded',
    SECRET = '__IE8__' + Math.random(),
    // Object = window.Object,
    defineProperty = Object.defineProperty ||
    // just in case ...
    function (object, property, descriptor) {
      object[property] = descriptor.value;
    },
    defineProperties = Object.defineProperties ||
    // IE8 implemented defineProperty but not the plural...
    function (object, descriptors) {
      for(var key in descriptors) {
        if (hasOwnProperty.call(descriptors, key)) {
          try {
            defineProperty(object, key, descriptors[key]);
          } catch(o_O) {
            if (window.console) {
              console.log(key + ' failed on object:', object, o_O.message);
            }
          }
        }
      }
    },
    getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor,
    hasOwnProperty = Object.prototype.hasOwnProperty,
    // here IE7 will break like a charm
    ElementPrototype = window.Element.prototype,
    TextPrototype = window.Text.prototype,
    // none of above native constructors exist/are exposed
    possiblyNativeEvent = /^[a-z]+$/,
    // ^ actually could probably be just /^[a-z]+$/
    readyStateOK = /loaded|complete/,
    types = {},
    div = document.createElement('div'),
    html = document.documentElement,
    removeAttribute = html.removeAttribute,
    setAttribute = html.setAttribute,
    valueDesc = function (value) {
      return {
        enumerable: true,
        writable: true,
        configurable: true,
        value: value
      };
    }
  ;

  function commonEventLoop(currentTarget, e, $handlers, synthetic) {
    for(var
      handler,
      continuePropagation,
      handlers = $handlers.slice(),
      evt = enrich(e, currentTarget),
      i = 0, length = handlers.length; i < length; i++
    ) {
      handler = handlers[i];
      if (typeof handler === 'object') {
        if (typeof handler.handleEvent === 'function') {
          handler.handleEvent(evt);
        }
      } else {
        handler.call(currentTarget, evt);
      }
      if (evt.stoppedImmediatePropagation) break;
    }
    continuePropagation = !evt.stoppedPropagation;
    /*
    if (continuePropagation && !synthetic && !live(currentTarget)) {
      evt.cancelBubble = true;
    }
    */
    return (
      synthetic &&
      continuePropagation &&
      currentTarget.parentNode
    ) ?
      currentTarget.parentNode.dispatchEvent(evt) :
      !evt.defaultPrevented
    ;
  }

  function commonDescriptor(get, set) {
    return {
      // if you try with enumerable: true
      // IE8 will miserably fail
      configurable: true,
      get: get,
      set: set
    };
  }

  function commonTextContent(protoDest, protoSource, property) {
    var descriptor = getOwnPropertyDescriptor(
      protoSource || protoDest, property
    );
    defineProperty(
      protoDest,
      'textContent',
      commonDescriptor(
        function () {
          return descriptor.get.call(this);
        },
        function (textContent) {
          descriptor.set.call(this, textContent);
        }
      )
    );
  }

  function enrich(e, currentTarget) {
    e.currentTarget = currentTarget;
    e.eventPhase = (
      // AT_TARGET : BUBBLING_PHASE
      e.target === e.currentTarget ? 2 : 3
    );
    return e;
  }

  function find(array, value) {
    var i = array.length;
    while(i-- && array[i] !== value);
    return i;
  }

  function getTextContent() {
    if (this.tagName === 'BR') return '\n';
    var
      textNode = this.firstChild,
      arrayContent = []
    ;
    while(textNode) {
      if (textNode.nodeType !== 8 && textNode.nodeType !== 7) {
        arrayContent.push(textNode.textContent);
      }
      textNode = textNode.nextSibling;
    }
    return arrayContent.join('');
  }

  function live(self) {
    return self.nodeType !== 9 && html.contains(self);
  }

  function onkeyup(e) {
    var evt = document.createEvent('Event');
    evt.initEvent('input', true, true);
    (e.srcElement || e.fromElement || document).dispatchEvent(evt);
  }

  function onReadyState(e) {
    if (!READYEVENTDISPATCHED && readyStateOK.test(
      document.readyState
    )) {
      READYEVENTDISPATCHED = !READYEVENTDISPATCHED;
      document.detachEvent(ONREADYSTATECHANGE, onReadyState);
      e = document.createEvent('Event');
      e.initEvent(DOMCONTENTLOADED, true, true);
      document.dispatchEvent(e);
    }
  }
  
  function getter(attr) {
    return function() {
      return html[attr] || (document.body && document.body[attr]) || 0;
    };
  }

  function setTextContent(textContent) {
    var node;
    while ((node = this.lastChild)) {
      this.removeChild(node);
    }
    /*jshint eqnull:true */
    if (textContent != null) {
      this.appendChild(document.createTextNode(textContent));
    }
  }

  function verify(self, e) {
    if (!e) {
      e = window.event;
    }
    if (!e.target) {
      e.target = e.srcElement || e.fromElement || document;
    }
    if (!e.timeStamp) {
      e.timeStamp = (new Date()).getTime();
    }
    return e;
  }

  // normalized textContent for:
  //  comment, script, style, text, title
  commonTextContent(
    window.HTMLCommentElement.prototype,
    ElementPrototype,
    'nodeValue'
  );

  commonTextContent(
    window.HTMLScriptElement.prototype,
    null,
    'text'
  );

  commonTextContent(
    TextPrototype,
    null,
    'nodeValue'
  );

  commonTextContent(
    window.HTMLTitleElement.prototype,
    null,
    'text'
  );

  defineProperty(
    window.HTMLStyleElement.prototype,
    'textContent',
    (function(descriptor){
      return commonDescriptor(
        function () {
          return descriptor.get.call(this.styleSheet);
        },
        function (textContent) {
          descriptor.set.call(this.styleSheet, textContent);
        }
      );
    }(getOwnPropertyDescriptor(window.CSSStyleSheet.prototype, 'cssText')))
  );

  var opacityre = /\b\s*alpha\s*\(\s*opacity\s*=\s*(\d+)\s*\)/;
  defineProperty(
    window.CSSStyleDeclaration.prototype,
    'opacity', {
      get: function() {
        var m = this.filter.match(opacityre);
        return m ? (m[1] / 100).toString() : '';
      },
      set: function(value) {
        this.zoom = 1;
        var found = false;
        if (value < 1) {
          value = ' alpha(opacity=' + Math.round(value * 100) + ')';
        }
        else {
          value = '';
        }
        this.filter = this.filter.replace(opacityre,
                        function() { found = true; return value; });
        if (!found && value) {
          this.filter += value;
        }
      }
    }
  );

  defineProperties(
    ElementPrototype,
    {
      // bonus
      textContent: {
        get: getTextContent,
        set: setTextContent
      },
      // http://www.w3.org/TR/ElementTraversal/#interface-elementTraversal
      firstElementChild: {
        get: function () {
          for(var
            childNodes = this.childNodes || [],
            i = 0, length = childNodes.length;
            i < length; i++
          ) {
            if (childNodes[i].nodeType == 1) return childNodes[i];
          }
        }
      },
      lastElementChild: {
        get: function () {
          for(var
            childNodes = this.childNodes || [],
            i = childNodes.length;
            i--;
          ) {
            if (childNodes[i].nodeType == 1) return childNodes[i];
          }
        }
      },
      oninput: {
        get: function () {
          return this._oninput || null;
        },
        set: function (oninput) {
          if (this._oninput) {
            this.removeEventListener('input', this._oninput);
            this._oninput = oninput;
            if (oninput) {
              this.addEventListener('input', oninput);
            }
          }
        }
      },
      previousElementSibling: {
        get: function () {
          var previousElementSibling = this.previousSibling;
          while (previousElementSibling && previousElementSibling.nodeType != 1) {
            previousElementSibling = previousElementSibling.previousSibling;
          }
          return previousElementSibling;
        }
      },
      nextElementSibling: {
        get: function () {
          var nextElementSibling = this.nextSibling;
          while (nextElementSibling && nextElementSibling.nodeType != 1) {
            nextElementSibling = nextElementSibling.nextSibling;
          }
          return nextElementSibling;
        }
      },
      childElementCount: {
        get: function () {
          for(var
            count = 0,
            childNodes = this.childNodes || [],
            i = childNodes.length; i--; count += childNodes[i].nodeType == 1
          );
          return count;
        }
      },
      /*
      // children would be an override
      // IE8 already supports them but with comments too
      // not just nodeType 1
      children: {
        get: function () {
          for(var
            children = [],
            childNodes = this.childNodes || [],
            i = 0, length = childNodes.length;
            i < length; i++
          ) {
            if (childNodes[i].nodeType == 1) {
              children.push(childNodes[i]);
            }
          }
          return children;
        }
      },
      */
      // DOM Level 2 EventTarget methods and events
      addEventListener: valueDesc(function (type, handler, capture) {
        if (typeof handler !== 'function' && typeof handler !== 'object') return;
        var
          self = this,
          ontype = 'on' + type,
          temple =  self[SECRET] ||
                      defineProperty(
                        self, SECRET, {value: {}}
                      )[SECRET],
          currentType = temple[ontype] || (temple[ontype] = {}),
          handlers  = currentType.h || (currentType.h = []),
          e, attr
        ;
        if (!hasOwnProperty.call(currentType, 'w')) {
          currentType.w = function (e) {
            // e[SECRET] is a silent notification needed to avoid
            // fired events during live test
            return e[SECRET] || commonEventLoop(self, verify(self, e), handlers, false);
          };
          // if not detected yet
          if (!hasOwnProperty.call(types, ontype)) {
            // and potentially a native event
            if(possiblyNativeEvent.test(type)) {
              // do this heavy thing
              try {
                // TODO:  should I consider tagName too so that
                //        INPUT[ontype] could be different ?
                e = document.createEventObject();
                // do not clone ever a node
                // specially a document one ...
                // use the secret to ignore them all
                e[SECRET] = true;
                // document a part if a node has never been
                // added to any other node, fireEvent might
                // behave very weirdly (read: trigger unspecified errors)
                if (self.nodeType != 9) {
                  /*jshint eqnull:true */
                  if (self.parentNode == null) {
                    div.appendChild(self);
                  }
                  if ((attr = self.getAttribute(ontype))) {
                    removeAttribute.call(self, ontype);
                  }
                }
                self.fireEvent(ontype, e);
                types[ontype] = true;
              } catch(meh) {
                types[ontype] = false;
                while (div.hasChildNodes()) {
                  div.removeChild(div.firstChild);
                }
              }
              if (attr != null) {
                setAttribute.call(self, ontype, attr);
              }
            } else {
              // no need to bother since
              // 'x-event' ain't native for sure
              types[ontype] = false;
            }
          }
          if ((currentType.n = types[ontype])) {
            self.attachEvent(ontype, currentType.w);
          }
        }
        if (find(handlers, handler) < 0) {
          handlers[capture ? 'unshift' : 'push'](handler);
        }
        if (type === 'input') {
          self.attachEvent('onkeyup', onkeyup);
        }
      }),
      dispatchEvent: valueDesc(function (e) {
        var
          self = this,
          ontype = 'on' + e.type,
          temple =  self[SECRET],
          currentType = temple && temple[ontype],
          valid = !!currentType,
          parentNode
        ;
        if (!e.target) e.target = self;
        return (valid ? (
          currentType.n /* && live(self) */ ?
            self.fireEvent(ontype, e) :
            commonEventLoop(
              self,
              e,
              currentType.h,
              true
            )
        ) : (
          (parentNode = self.parentNode) /* && live(self) */ ?
            parentNode.dispatchEvent(e) :
            true
        )), !e.defaultPrevented;
      }),
      removeEventListener: valueDesc(function (type, handler, capture) {
        if (typeof handler !== 'function' && typeof handler !== 'object') return;
        var
          self = this,
          ontype = 'on' + type,
          temple =  self[SECRET],
          currentType = temple && temple[ontype],
          handlers = currentType && currentType.h,
          i = handlers ? find(handlers, handler) : -1
        ;
        if (-1 < i) handlers.splice(i, 1);
      })
    }
  );

  /* this is not needed in IE8
  defineProperties(window.HTMLSelectElement.prototype, {
    value: {
      get: function () {
        return this.options[this.selectedIndex].value;
      }
    }
  });
  //*/

  // EventTarget methods for Text nodes too
  defineProperties(TextPrototype, {
    addEventListener: valueDesc(ElementPrototype.addEventListener),
    dispatchEvent: valueDesc(ElementPrototype.dispatchEvent),
    removeEventListener: valueDesc(ElementPrototype.removeEventListener)
  });

  defineProperties(
    window.XMLHttpRequest.prototype,
    {
      addEventListener: valueDesc(function (type, handler, capture) {
        var
          self = this,
          ontype = 'on' + type,
          temple =  self[SECRET] ||
                      defineProperty(
                        self, SECRET, {value: {}}
                      )[SECRET],
          currentType = temple[ontype] || (temple[ontype] = {}),
          handlers  = currentType.h || (currentType.h = [])
        ;
        if (find(handlers, handler) < 0) {
          if (!self[ontype]) {
            self[ontype] = function () {
              var e = document.createEvent('Event');
              e.initEvent(type, true, true);
              self.dispatchEvent(e);
            };
          }
          handlers[capture ? 'unshift' : 'push'](handler);
        }
      }),
      dispatchEvent: valueDesc(function (e) {
        var
          self = this,
          ontype = 'on' + e.type,
          temple =  self[SECRET],
          currentType = temple && temple[ontype],
          valid = !!currentType
        ;
        return valid && (
          currentType.n /* && live(self) */ ?
            self.fireEvent(ontype, e) :
            commonEventLoop(
              self,
              e,
              currentType.h,
              true
            )
        );
      }),
      removeEventListener: valueDesc(ElementPrototype.removeEventListener)
    }
  );

  var buttonGetter = getOwnPropertyDescriptor(Event.prototype, 'button').get;
  defineProperties(
    window.Event.prototype,
    {
      bubbles: valueDesc(true),
      cancelable: valueDesc(true),
      preventDefault: valueDesc(function () {
        if (this.cancelable) {
          this.returnValue = false;
        }
      }),
      stopPropagation: valueDesc(function () {
        this.stoppedPropagation = true;
        this.cancelBubble = true;
      }),
      stopImmediatePropagation: valueDesc(function () {
        this.stoppedImmediatePropagation = true;
        this.stopPropagation();
      }),
      initEvent: valueDesc(function(type, bubbles, cancelable){
        this.type = type;
        this.bubbles = !!bubbles;
        this.cancelable = !!cancelable;
        if (!this.bubbles) {
          this.stopPropagation();
        }
      }),
      pageX: {get: function(){ return this._pageX || (this._pageX = this.clientX + window.scrollX - (html.clientLeft || 0)); }},
      pageY: {get: function(){ return this._pageY || (this._pageY = this.clientY + window.scrollY - (html.clientTop || 0)); }},
      which: {get: function(){ return this.keyCode ? this.keyCode : (isNaN(this.button) ? undefined : this.button + 1); }},
      charCode: {get: function(){ return (this.keyCode && this.type == 'keypress') ? this.keyCode : 0; }},
      buttons: {get: function(){ return buttonGetter.call(this); }},
      button: {get: function() {
        var buttons = this.buttons;
        return (buttons & 1 ? 0 : (buttons & 2 ? 2 : (buttons & 4 ? 1 : undefined)));
      }},
      defaultPrevented: {get: function() {
        // if preventDefault() was never called, or returnValue not given a value
        // then returnValue is undefined
        var returnValue = this.returnValue, undef;
        return !(returnValue === undef || returnValue);
      }},
      relatedTarget: {get: function() {
        var type = this.type;
        if (type === 'mouseover') {
          return this.fromElement;
        } else if (type === 'mouseout') {
          return this.toElement;
        } else {
          return null;
        }
      }}
    }
  );

  defineProperties(
    window.HTMLDocument.prototype,
    {
      defaultView: {
        get: function () {
          return this.parentWindow;
        }
      },
      textContent: {
        get: function () {
          return this.nodeType === 11 ? getTextContent.call(this) : null;
        },
        set: function (textContent) {
          if (this.nodeType === 11) {
            setTextContent.call(this, textContent);
          }
        }
      },
      addEventListener: valueDesc(function(type, handler, capture) {
        var self = this;
        ElementPrototype.addEventListener.call(self, type, handler, capture);
        // NOTE:  it won't fire if already loaded, this is NOT a $.ready() shim!
        //        this behaves just like standard browsers
        if (
          DUNNOABOUTDOMLOADED &&
          type === DOMCONTENTLOADED &&
          !readyStateOK.test(
            self.readyState
          )
        ) {
          DUNNOABOUTDOMLOADED = false;
          self.attachEvent(ONREADYSTATECHANGE, onReadyState);
          /* global top */
          if (window == top) {
            (function gonna(e){try{
              self.documentElement.doScroll('left');
              onReadyState();
              }catch(o_O){
              setTimeout(gonna, 50);
            }}());
          }
        }
      }),
      dispatchEvent: valueDesc(ElementPrototype.dispatchEvent),
      removeEventListener: valueDesc(ElementPrototype.removeEventListener),
      createEvent: valueDesc(function(Class){
        var e;
        if (Class !== 'Event') throw new Error('unsupported ' + Class);
        e = document.createEventObject();
        e.timeStamp = (new Date()).getTime();
        return e;
      })
    }
  );

  defineProperties(
    window.Window.prototype,
    {
      getComputedStyle: valueDesc(function(){

        var // partially grabbed from jQuery and Dean's hack
          notpixel = /^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,
          position = /^(top|right|bottom|left)$/,
          re = /\-([a-z])/g,
          place = function (match, $1) {
            return $1.toUpperCase();
          }
        ;

        function ComputedStyle(_) {
          this._ = _;
        }

        ComputedStyle.prototype.getPropertyValue = function (name) {
          var
            el = this._,
            style = el.style,
            currentStyle = el.currentStyle,
            runtimeStyle = el.runtimeStyle,
            result,
            left,
            rtLeft
          ;
          if (name == 'opacity') {
            return style.opacity || '1';
          }
          name = (name === 'float' ? 'style-float' : name).replace(re, place);
          result = currentStyle ? currentStyle[name] : style[name];
          if (notpixel.test(result) && !position.test(name)) {
            left = style.left;
            rtLeft = runtimeStyle && runtimeStyle.left;
            if (rtLeft) {
              runtimeStyle.left = currentStyle.left;
            }
            style.left = name === 'fontSize' ? '1em' : result;
            result = style.pixelLeft + 'px';
            style.left = left;
            if (rtLeft) {
              runtimeStyle.left = rtLeft;
            }
          }
          /*jshint eqnull:true */
          return result == null ?
            result : ((result + '') || 'auto');
        };

        // unsupported
        function PseudoComputedStyle() {}
        PseudoComputedStyle.prototype.getPropertyValue = function () {
          return null;
        };

        return function (el, pseudo) {
          return pseudo ?
            new PseudoComputedStyle(el) :
            new ComputedStyle(el);
        };

      }()),

      addEventListener: valueDesc(function (type, handler, capture) {
        var
          self = window,
          ontype = 'on' + type,
          handlers
        ;
        if (!self[ontype]) {
          self[ontype] = function(e) {
            return commonEventLoop(self, verify(self, e), handlers, false) && undefined;
          };
        }
        handlers = self[ontype][SECRET] || (
          self[ontype][SECRET] = []
        );
        if (find(handlers, handler) < 0) {
          handlers[capture ? 'unshift' : 'push'](handler);
        }
      }),
      dispatchEvent: valueDesc(function (e) {
        var method = window['on' + e.type];
        return method ? method.call(window, e) !== false && !e.defaultPrevented : true;
      }),
      removeEventListener: valueDesc(function (type, handler, capture) {
        var
          ontype = 'on' + type,
          handlers = (window[ontype] || Object)[SECRET],
          i = handlers ? find(handlers, handler) : -1
         ;
        if (-1 < i) handlers.splice(i, 1);
      }),
      pageXOffset: {get: getter('scrollLeft')},
      pageYOffset: {get: getter('scrollTop')},
      scrollX: {get: getter('scrollLeft')},
      scrollY: {get: getter('scrollTop')},
      innerWidth: {get: getter('clientWidth')},
      innerHeight: {get: getter('clientHeight')}
    }
  );

  window.HTMLElement = window.Element;

  (function (styleSheets, HTML5Element, i) {
    for (i = 0; i < HTML5Element.length; i++) document.createElement(HTML5Element[i]);
    if (!styleSheets.length) document.createStyleSheet('');
    styleSheets[0].addRule(HTML5Element.join(','), 'display:block;');
  }(document.styleSheets, ['header', 'nav', 'section', 'article', 'aside', 'footer']));
}(this.window || global));
//
// requestAnimationFrame polyfill by Erik Mller.
//  With fixes from Paul Irish and Tino Zijdel
//
//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/
//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
//
//  MIT license
//
(function() {
    var lastTime = 0;
    var vendors = ['webkit', 'moz'];
    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
        window.cancelAnimationFrame =
            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() {
                callback(currTime + timeToCall);
            }, timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}());
var RideStylerShowcase;
(function (RideStylerShowcase) {
    var api;
    (function (api) {
        var auth;
        (function (auth) {
            function validate() {
                return api.request("auth/validate");
            }
            auth.validate = validate;
        })(auth = api.auth || (api.auth = {}));
    })(api = RideStylerShowcase.api || (RideStylerShowcase.api = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuYXV0aC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJhcGkiLCJhdXRoIiwidmFsaWRhdGUiLCJyZXF1ZXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxHQUFBO0FBQUEsS0FBQSxVQUFBQSxHQUFBLEVBQUc7QUFBQyxZQUFBQyxJQUFBO0FBQUEsU0FBQSxVQUFBQSxJQUFBLEVBQUk7QUFDakMscUJBQUFDLFFBQUEsR0FBQTtBQUNJLHVCQUFPRixJQUFJRyxPQUFKLENBQVksZUFBWixDQUFQO0FBQ0g7QUFGZUYsaUJBQUFDLFFBQUEsR0FBUUEsUUFBUjtBQUduQixTQUpnQyxFQUFBRCxPQUFBRCxJQUFBQyxJQUFBLEtBQUFELElBQUFDLElBQUEsR0FBSSxFQUFKLENBQUE7QUFJaEMsS0FKNEIsRUFBQUQsTUFBQUQsbUJBQUFDLEdBQUEsS0FBQUQsbUJBQUFDLEdBQUEsR0FBRyxFQUFILENBQUE7QUFJNUIsQ0FKRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLmF1dGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmFwaS5hdXRoIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoKSB7XG4gICAgICAgIHJldHVybiBhcGkucmVxdWVzdChcImF1dGgvdmFsaWRhdGVcIik7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var api;
    (function (api) {
        var settings;
        (function (settings_1) {
            var defaultSettings = {
                EnableSharing: true,
                SuspensionRanges: {
                    Default: {
                        Min: -4,
                        Max: 0
                    },
                    Truck4WD: {
                        Min: -4,
                        Max: 4
                    },
                    Van4WD: {
                        Min: -4,
                        Max: 4
                    }
                },
                UseRawTireDescription: false
            };
            function getSettings() {
                return RideStylerShowcase.PromiseHelper.then(api.request("organization/getsettings", {
                    Keys: ['ENABLE_SHARING', 'SUSPENSION_RANGES', 'RAWTIREDESC']
                }), function (response) {
                    var settings = response.Settings;
                    if (!settings) return defaultSettings;
                    return {
                        EnableSharing: parseBoolean(settings["ENABLE_SHARING"] || defaultSettings.EnableSharing),
                        SuspensionRanges: parseSuspensionRanges(settings["SUSPENSION_RANGES"]),
                        UseRawTireDescription: parseBoolean(settings["RAWTIREDESC"] || defaultSettings.UseRawTireDescription)
                    };
                });
            }
            settings_1.getSettings = getSettings;
            function parseBoolean(boolean) {
                // Not a string, or an empty string, return true or false
                if (typeof boolean !== 'string' || !boolean) return !!boolean;
                var firstChar = boolean[0];
                // True is: the first char being uppercase/lowercase T or Y
                if (firstChar === 'y' || firstChar === 'Y' || firstChar === 't' || firstChar === 'T') return true;
                // False is everything else
                return false;
            }
            function parseSuspensionRanges(suspensionRangesSetting) {
                if (!suspensionRangesSetting) return defaultSettings.SuspensionRanges;
                try {
                    var suspensionRanges = JSON.parse(suspensionRangesSetting);
                    return suspensionRanges;
                } catch (e) {
                    console.error(e);
                    return defaultSettings.SuspensionRanges;
                }
            }
        })(settings = api.settings || (api.settings = {}));
    })(api = RideStylerShowcase.api || (RideStylerShowcase.api = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuc2V0dGluZ3MudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiYXBpIiwic2V0dGluZ3MiLCJzZXR0aW5nc18xIiwiZGVmYXVsdFNldHRpbmdzIiwiRW5hYmxlU2hhcmluZyIsIlN1c3BlbnNpb25SYW5nZXMiLCJEZWZhdWx0IiwiTWluIiwiTWF4IiwiVHJ1Y2s0V0QiLCJWYW40V0QiLCJVc2VSYXdUaXJlRGVzY3JpcHRpb24iLCJnZXRTZXR0aW5ncyIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwicmVxdWVzdCIsIktleXMiLCJyZXNwb25zZSIsIlNldHRpbmdzIiwicGFyc2VCb29sZWFuIiwicGFyc2VTdXNwZW5zaW9uUmFuZ2VzIiwiYm9vbGVhbiIsImZpcnN0Q2hhciIsInN1c3BlbnNpb25SYW5nZXNTZXR0aW5nIiwic3VzcGVuc2lvblJhbmdlcyIsIkpTT04iLCJwYXJzZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLEdBQUE7QUFBQSxLQUFBLFVBQUFBLEdBQUEsRUFBRztBQUFDLFlBQUFDLFFBQUE7QUFBQSxTQUFBLFVBQUFDLFVBQUEsRUFBUTtBQVlyQyxnQkFBSUMsa0JBQW9EO0FBQ3BEQywrQkFBZSxJQURxQztBQUVwREMsa0NBQWtCO0FBQ2RDLDZCQUFTO0FBQ0xDLDZCQUFLLENBQUMsQ0FERDtBQUVMQyw2QkFBSztBQUZBLHFCQURLO0FBS2RDLDhCQUFVO0FBQ05GLDZCQUFLLENBQUMsQ0FEQTtBQUVOQyw2QkFBSztBQUZDLHFCQUxJO0FBU2RFLDRCQUFRO0FBQ0pILDZCQUFLLENBQUMsQ0FERjtBQUVKQyw2QkFBSztBQUZEO0FBVE0saUJBRmtDO0FBZ0JwREcsdUNBQXVCO0FBaEI2QixhQUF4RDtBQW1CQSxxQkFBQUMsV0FBQSxHQUFBO0FBQ0ksdUJBQU9iLG1CQUFBYyxhQUFBLENBQWNDLElBQWQsQ0FBbUJkLElBQUllLE9BQUosQ0FBWSwwQkFBWixFQUF3QztBQUM5REMsMEJBQU0sQ0FDRixnQkFERSxFQUVGLG1CQUZFLEVBR0YsYUFIRTtBQUR3RCxpQkFBeEMsQ0FBbkIsRUFNSCxvQkFBVztBQUNYLHdCQUFJZixXQUFXZ0IsU0FBU0MsUUFBeEI7QUFFQSx3QkFBSSxDQUFDakIsUUFBTCxFQUFlLE9BQU9FLGVBQVA7QUFFZiwyQkFBTztBQUNIQyx1Q0FBZWUsYUFBYWxCLFNBQVMsZ0JBQVQsS0FBOEJFLGdCQUFnQkMsYUFBM0QsQ0FEWjtBQUVIQywwQ0FBa0JlLHNCQUFzQm5CLFNBQVMsbUJBQVQsQ0FBdEIsQ0FGZjtBQUdIVSwrQ0FBdUJRLGFBQWFsQixTQUFTLGFBQVQsS0FBMkJFLGdCQUFnQlEscUJBQXhEO0FBSHBCLHFCQUFQO0FBS0gsaUJBaEJNLENBQVA7QUFrQkg7QUFuQmVULHVCQUFBVSxXQUFBLEdBQVdBLFdBQVg7QUFxQmhCLHFCQUFBTyxZQUFBLENBQXNCRSxPQUF0QixFQUE0QztBQUN4QztBQUNBLG9CQUFJLE9BQU9BLE9BQVAsS0FBbUIsUUFBbkIsSUFBK0IsQ0FBQ0EsT0FBcEMsRUFBNkMsT0FBTyxDQUFDLENBQUNBLE9BQVQ7QUFFN0Msb0JBQUlDLFlBQVlELFFBQVEsQ0FBUixDQUFoQjtBQUVBO0FBQ0Esb0JBQUlDLGNBQWMsR0FBZCxJQUFxQkEsY0FBYyxHQUFuQyxJQUEwQ0EsY0FBYyxHQUF4RCxJQUErREEsY0FBYyxHQUFqRixFQUFzRixPQUFPLElBQVA7QUFFdEY7QUFDQSx1QkFBTyxLQUFQO0FBQ0g7QUFFRCxxQkFBQUYscUJBQUEsQ0FBK0JHLHVCQUEvQixFQUE2RDtBQUN6RCxvQkFBSSxDQUFDQSx1QkFBTCxFQUE4QixPQUFPcEIsZ0JBQWdCRSxnQkFBdkI7QUFFOUIsb0JBQUk7QUFDQSx3QkFBSW1CLG1CQUF5RUMsS0FBS0MsS0FBTCxDQUFXSCx1QkFBWCxDQUE3RTtBQUVBLDJCQUFPQyxnQkFBUDtBQUNILGlCQUpELENBSUUsT0FBT0csQ0FBUCxFQUFVO0FBQ1JDLDRCQUFRQyxLQUFSLENBQWNGLENBQWQ7QUFFQSwyQkFBT3hCLGdCQUFnQkUsZ0JBQXZCO0FBQ0g7QUFDSjtBQUNKLFNBOUVnQyxFQUFBSixXQUFBRCxJQUFBQyxRQUFBLEtBQUFELElBQUFDLFFBQUEsR0FBUSxFQUFSLENBQUE7QUE4RWhDLEtBOUU0QixFQUFBRCxNQUFBRCxtQkFBQUMsR0FBQSxLQUFBRCxtQkFBQUMsR0FBQSxHQUFHLEVBQUgsQ0FBQTtBQThFNUIsQ0E5RUQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmFwaS5zZXR0aW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnNldHRpbmdzIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSSB7XG4gICAgICAgIEVuYWJsZVNoYXJpbmc6IGJvb2xlYW47XG4gICAgICAgIFN1c3BlbnNpb25SYW5nZXM6IHtcbiAgICAgICAgICAgIFtzdHlsZVR5cGVEcml2ZVR5cGU6c3RyaW5nXTp7XG4gICAgICAgICAgICAgICAgTWluOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgTWF4OiBudW1iZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVXNlUmF3VGlyZURlc2NyaXB0aW9uOiBib29sZWFuO1xuICAgIH1cblxuICAgIGxldCBkZWZhdWx0U2V0dGluZ3M6UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJID0ge1xuICAgICAgICBFbmFibGVTaGFyaW5nOiB0cnVlLFxuICAgICAgICBTdXNwZW5zaW9uUmFuZ2VzOiB7XG4gICAgICAgICAgICBEZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgTWluOiAtNCxcbiAgICAgICAgICAgICAgICBNYXg6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBUcnVjazRXRDoge1xuICAgICAgICAgICAgICAgIE1pbjogLTQsXG4gICAgICAgICAgICAgICAgTWF4OiA0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVmFuNFdEOiB7XG4gICAgICAgICAgICAgICAgTWluOiAtNCxcbiAgICAgICAgICAgICAgICBNYXg6IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgVXNlUmF3VGlyZURlc2NyaXB0aW9uOiBmYWxzZVxuICAgIH07XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0U2V0dGluZ3MoKTpSaWRlU3R5bGVyUHJvbWlzZTxSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5nc0Zyb21BUEksIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJvcmdhbml6YXRpb24vZ2V0c2V0dGluZ3NcIiwge1xuICAgICAgICAgICAgS2V5czogW1xuICAgICAgICAgICAgICAgICdFTkFCTEVfU0hBUklORycsXG4gICAgICAgICAgICAgICAgJ1NVU1BFTlNJT05fUkFOR0VTJyxcbiAgICAgICAgICAgICAgICAnUkFXVElSRURFU0MnXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSByZXNwb25zZS5TZXR0aW5ncztcblxuICAgICAgICAgICAgaWYgKCFzZXR0aW5ncykgcmV0dXJuIGRlZmF1bHRTZXR0aW5ncztcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBFbmFibGVTaGFyaW5nOiBwYXJzZUJvb2xlYW4oc2V0dGluZ3NbXCJFTkFCTEVfU0hBUklOR1wiXSB8fCBkZWZhdWx0U2V0dGluZ3MuRW5hYmxlU2hhcmluZyksXG4gICAgICAgICAgICAgICAgU3VzcGVuc2lvblJhbmdlczogcGFyc2VTdXNwZW5zaW9uUmFuZ2VzKHNldHRpbmdzW1wiU1VTUEVOU0lPTl9SQU5HRVNcIl0pLFxuICAgICAgICAgICAgICAgIFVzZVJhd1RpcmVEZXNjcmlwdGlvbjogcGFyc2VCb29sZWFuKHNldHRpbmdzW1wiUkFXVElSRURFU0NcIl0gfHwgZGVmYXVsdFNldHRpbmdzLlVzZVJhd1RpcmVEZXNjcmlwdGlvbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUJvb2xlYW4oYm9vbGVhbjpzdHJpbmd8Ym9vbGVhbik6Ym9vbGVhbiB7XG4gICAgICAgIC8vIE5vdCBhIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nLCByZXR1cm4gdHJ1ZSBvciBmYWxzZVxuICAgICAgICBpZiAodHlwZW9mIGJvb2xlYW4gIT09ICdzdHJpbmcnIHx8ICFib29sZWFuKSByZXR1cm4gISFib29sZWFuO1xuXG4gICAgICAgIGxldCBmaXJzdENoYXIgPSBib29sZWFuWzBdO1xuXG4gICAgICAgIC8vIFRydWUgaXM6IHRoZSBmaXJzdCBjaGFyIGJlaW5nIHVwcGVyY2FzZS9sb3dlcmNhc2UgVCBvciBZXG4gICAgICAgIGlmIChmaXJzdENoYXIgPT09ICd5JyB8fCBmaXJzdENoYXIgPT09ICdZJyB8fCBmaXJzdENoYXIgPT09ICd0JyB8fCBmaXJzdENoYXIgPT09ICdUJykgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gRmFsc2UgaXMgZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcGFyc2VTdXNwZW5zaW9uUmFuZ2VzKHN1c3BlbnNpb25SYW5nZXNTZXR0aW5nOnN0cmluZyk6UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJW1wiU3VzcGVuc2lvblJhbmdlc1wiXSB7XG4gICAgICAgIGlmICghc3VzcGVuc2lvblJhbmdlc1NldHRpbmcpIHJldHVybiBkZWZhdWx0U2V0dGluZ3MuU3VzcGVuc2lvblJhbmdlcztcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZXM6UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJW1wiU3VzcGVuc2lvblJhbmdlc1wiXSA9IEpTT04ucGFyc2Uoc3VzcGVuc2lvblJhbmdlc1NldHRpbmcpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRTZXR0aW5ncy5TdXNwZW5zaW9uUmFuZ2VzO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var api = void 0;
    (function (api) {
        /**
         * Initialize the RideStyler API by passing in a user/password combination, a user token, or a key.
         * @param settings The API initialization settings
         * @returns A promise that is resolved (or rejected) when the API is authenticated (or fails authentication)
         */
        function initialize(settings) {
            // If authentication information was passed in, let's use that
            if (settings) {
                if ('username' in settings && 'password' in settings) {
                    // Login using a username and password
                    settings = settings;
                    ridestyler.auth.start({
                        data: {
                            Username: settings.username,
                            Password: settings.password
                        },
                        callback: function callback(response) {
                            if (response.Success) api.authenticated.resolve();else api.authenticated.reject();
                        }
                    });
                    this.getURL();
                    // Skip calling validate below
                    return;
                } else if ('token' in settings || 'key' in settings) {
                    // Login using a key or token
                    ridestyler.auth.set(settings);
                }
            }
            // Validate the user's key or token
            api.auth.validate().done(function () {
                var url = ridestyler.ajax.url('', undefined);
                if (/\/api-alpha\./i.test(url)) api.environment = Environment.Alpha;else if (/\/api-beta\./i.test(url)) api.environment = Environment.Beta;else if (/\/api\./i.test(url)) api.environment = Environment.Live;else api.environment = Environment.Other;
                api.authenticated.resolve();
            }).fail(function () {
                return api.authenticated.reject();
            });
            return api.authenticated;
        }
        api.initialize = initialize;
        api.authenticated = ridestyler.promise();
        function isAuthenticated() {
            return api.authenticated.state() === 1 /* Resolved */;
        }
        api.isAuthenticated = isAuthenticated;
        function afterAuthenticated(callback) {
            if (isAuthenticated()) callback();else api.authenticated.done(function () {
                return callback();
            });
        }
        api.afterAuthenticated = afterAuthenticated;
        function request(action, data) {
            var promise = ridestyler.promise();
            ridestyler.ajax.send({
                action: action,
                data: data,
                callback: function callback(response) {
                    if (response.Success) promise.resolve(response);else promise.reject(response);
                }
            });
            return promise;
        }
        api.request = request;
        function getURL(action, data) {
            return ridestyler.ajax.url(action, data);
        }
        api.getURL = getURL;
        var Environment = void 0;
        (function (Environment) {
            Environment[Environment["Alpha"] = 0] = "Alpha";
            Environment[Environment["Beta"] = 1] = "Beta";
            Environment[Environment["Live"] = 2] = "Live";
            Environment[Environment["Other"] = 3] = "Other";
        })(Environment = api.Environment || (api.Environment = {}));
    })(api = RideStylerShowcase.api || (RideStylerShowcase.api = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiYXBpIiwiaW5pdGlhbGl6ZSIsInNldHRpbmdzIiwicmlkZXN0eWxlciIsImF1dGgiLCJzdGFydCIsImRhdGEiLCJVc2VybmFtZSIsInVzZXJuYW1lIiwiUGFzc3dvcmQiLCJwYXNzd29yZCIsImNhbGxiYWNrIiwicmVzcG9uc2UiLCJTdWNjZXNzIiwiYXV0aGVudGljYXRlZCIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRVUkwiLCJzZXQiLCJ2YWxpZGF0ZSIsImRvbmUiLCJ1cmwiLCJhamF4IiwidW5kZWZpbmVkIiwidGVzdCIsImVudmlyb25tZW50IiwiRW52aXJvbm1lbnQiLCJBbHBoYSIsIkJldGEiLCJMaXZlIiwiT3RoZXIiLCJmYWlsIiwicHJvbWlzZSIsImlzQXV0aGVudGljYXRlZCIsInN0YXRlIiwiYWZ0ZXJBdXRoZW50aWNhdGVkIiwicmVxdWVzdCIsImFjdGlvbiIsInNlbmQiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQVd4QixRQUFpQkMsWUFBakI7QUFBQSxLQUFBLFVBQWlCQSxHQUFqQixFQUFvQjtBQUNoQjs7Ozs7QUFLQSxpQkFBQUMsVUFBQSxDQUEyQkMsUUFBM0IsRUFBZ0k7QUFDNUg7QUFDQSxnQkFBSUEsUUFBSixFQUFjO0FBQ1Ysb0JBQUksY0FBY0EsUUFBZCxJQUEwQixjQUFjQSxRQUE1QyxFQUFzRDtBQUNsRDtBQUNBQSwrQkFBV0EsUUFBWDtBQUVBQywrQkFBV0MsSUFBWCxDQUFnQkMsS0FBaEIsQ0FBc0I7QUFDbEJDLDhCQUFNO0FBQ0ZDLHNDQUFVTCxTQUFTTSxRQURqQjtBQUVGQyxzQ0FBVVAsU0FBU1E7QUFGakIseUJBRFk7QUFLbEJDLGtDQUFVLGtCQUFTQyxRQUFULEVBQWlCO0FBQ3ZCLGdDQUFJQSxTQUFTQyxPQUFiLEVB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QUNBQSx3QkFBQUEsWUFBQSxNQUFBLElBQUEsQ0FBQSxJQUFBLE1BQUE7QUFDQUEsd0JBQUFBLFlBQUEsT0FBQSxJQUFBLENBQUEsSUFBQSxPQUFBO0FBQ0gsU0FMRCxFQUFZQSxjQUFBMUIsSUFBQTBCLFdBQUEsS0FBQTFCLElBQUEwQixXQUFBLEdBQVcsRUFBWCxDQUFaO0FBUUgsS0FyRkQsRUFBaUIxQixNQUFBRCxtQkFBQUMsR0FBQSxLQUFBRCxtQkFBQUMsR0FBQSxHQUFHLEVBQUgsQ0FBakI7QUFzRkgsQ0FqR0QsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmFwaS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdze31cbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VuIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzIHtcbiAgICAgICAgdG9rZW4/OnN0cmluZztcbiAgICAgICAga2V5PzpzdHJpbmc7XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5ncyB7XG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgICAgIHBhc3N3b3JkOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBhcGkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZSB0aGUgUmlkZVN0eWxlciBBUEkgYnkgcGFzc2luZyBpbiBhIHVzZXIvcGFzc3dvcmQgY29tYmluYXRpb24sIGEgdXNlciB0b2tlbiwgb3IgYSBrZXkuXG4gICAgICAgICAqIEBwYXJhbSBzZXR0aW5ncyBUaGUgQVBJIGluaXRpYWxpemF0aW9uIHNldHRpbmdzXG4gICAgICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIChvciByZWplY3RlZCkgd2hlbiB0aGUgQVBJIGlzIGF1dGhlbnRpY2F0ZWQgKG9yIGZhaWxzIGF1dGhlbnRpY2F0aW9uKVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemUoc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VufFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXIpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIC8vIElmIGF1dGhlbnRpY2F0aW9uIGluZm9ybWF0aW9uIHdhcyBwYXNzZWQgaW4sIGxldCdzIHVzZSB0aGF0XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ3VzZXJuYW1lJyBpbiBzZXR0aW5ncyAmJiAncGFzc3dvcmQnIGluIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIExvZ2luIHVzaW5nIGEgdXNlcm5hbWUgYW5kIHBhc3N3b3JkXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gc2V0dGluZ3MgYXMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcjtcblxuICAgICAgICAgICAgICAgICAgICByaWRlc3R5bGVyLmF1dGguc3RhcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJuYW1lOiBzZXR0aW5ncy51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXNzd29yZDogc2V0dGluZ3MucGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuU3VjY2VzcykgYXV0aGVudGljYXRlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBhdXRoZW50aWNhdGVkLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVSTCgpXG4gICAgICAgICAgICAgICAgICAgIC8vIFNraXAgY2FsbGluZyB2YWxpZGF0ZSBiZWxvd1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgndG9rZW4nIGluIHNldHRpbmdzIHx8ICdrZXknIGluIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIExvZ2luIHVzaW5nIGEga2V5IG9yIHRva2VuXG4gICAgICAgICAgICAgICAgICAgIHJpZGVzdHlsZXIuYXV0aC5zZXQoc2V0dGluZ3MgYXMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgdGhlIHVzZXIncyBrZXkgb3IgdG9rZW5cbiAgICAgICAgICAgIGF1dGgudmFsaWRhdGUoKVxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gcmlkZXN0eWxlci5hamF4LnVybCgnJywgdW5kZWZpbmVkKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoL1xcL2FwaS1hbHBoYVxcLi9pLnRlc3QodXJsKSkgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5BbHBoYTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoL1xcL2FwaS1iZXRhXFwuL2kudGVzdCh1cmwpKSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50LkJldGE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKC9cXC9hcGlcXC4vaS50ZXN0KHVybCkpIGVudmlyb25tZW50ID0gRW52aXJvbm1lbnQuTGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50Lk90aGVyO1xuXG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4gYXV0aGVudGljYXRlZC5yZWplY3QoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGxldCBhdXRoZW50aWNhdGVkID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKTpib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGVkLnN0YXRlKCkgPT09IHJpZGVzdHlsZXIuUmlkZVN0eWxlclByb21pc2VTdGF0ZS5SZXNvbHZlZDtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYWZ0ZXJBdXRoZW50aWNhdGVkKGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aGVudGljYXRlZCgpKSBjYWxsYmFjaygpO1xuICAgICAgICAgICAgZWxzZSBhdXRoZW50aWNhdGVkLmRvbmUoKCkgPT4gY2FsbGJhY2soKSk7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVxdWVzdDxBY3Rpb24gZXh0ZW5kcyBrZXlvZiByaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXNwb25zZU1hcHBpbmc+KGFjdGlvbjpBY3Rpb24sIGRhdGE/OnJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlcXVlc3RNYXBwaW5nW0FjdGlvbl0pIDogUmlkZVN0eWxlclByb21pc2U8cmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVzcG9uc2VNYXBwaW5nW0FjdGlvbl0+IHtcbiAgICAgICAgICAgIHR5cGUgUmVzcG9uc2UgPSByaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXNwb25zZU1hcHBpbmdbQWN0aW9uXTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlPFJlc3BvbnNlPigpO1xuICAgICAgICAgICAgICAgIHJpZGVzdHlsZXIuYWpheC5zZW5kPEFjdGlvbj4oe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlN1Y2Nlc3MpIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHByb21pc2UucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gZ2V0VVJMPEFjdGlvbiBleHRlbmRzIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSUVuZHBvaW50PihhY3Rpb246QWN0aW9uLCBkYXRhPzpyaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXF1ZXN0TWFwcGluZ1tBY3Rpb25dKSA6IHN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci5hamF4LnVybChhY3Rpb24sIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGVudW0gRW52aXJvbm1lbnQge1xuICAgICAgICAgICAgQWxwaGEsXG4gICAgICAgICAgICBCZXRhLFxuICAgICAgICAgICAgTGl2ZSxcbiAgICAgICAgICAgIE90aGVyXG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgbGV0IGVudmlyb25tZW50OkVudmlyb25tZW50O1xuICAgIH1cbn0iXX0=


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5kYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOltdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var events;
    (function (events) {
        ;

        var EventHandler = function () {
            function EventHandler() {
                _classCallCheck(this, EventHandler);

                this.eventHandlers = {};
            }
            /**
             * Listen for an event
             * @param eventName The name of the event to listen for
             * @param callback  The callback to run when the event is triggered
             */


            _createClass(EventHandler, [{
                key: 'on',
                value: function on(eventName, callback) {
                    if (eventName in this.eventHandlers === false) this.eventHandlers[eventName] = [];
                    this.eventHandlers[eventName].push(callback);
                }
                /**
                 * Stop listening for an event
                 * @param eventName The name of the event to stop listening to
                 * @param callback The callback that was originally registered
                 */

            }, {
                key: 'off',
                value: function off(eventName, callback) {
                    if (eventName in this.eventHandlers === false) return;
                    this.eventHandlers[eventName] = RideStylerShowcase.ArrayHelper.remove(this.eventHandlers[eventName], callback);
                }
                /**
                 * Trigger an event
                 * @param eventName The name of the event to trigger
                 * @param ev        The data to send to the event handlers
                 * @returns         false, if the event has been cancelled by a handler, otherwise true
                 */

            }, {
                key: 'trigger',
                value: function trigger(eventName, ev) {
                    if (typeof this.debugCallback === 'function') this.debugCallback(eventName, ev, this.eventHandlers[eventName] || []);
                    if (eventName in this.eventHandlers === false) return true;
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = this.eventHandlers[eventName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var eventHandler = _step.value;

                            if (eventHandler(ev) === false) return false;
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    return true;
                }
            }]);

            return EventHandler;
        }();

        events.EventHandler = EventHandler;
    })(events = RideStylerShowcase.events || (RideStylerShowcase.events = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5ldmVudHMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiZXZlbnRzIiwiRXZlbnRIYW5kbGVyIiwiZXZlbnRIYW5kbGVycyIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicHVzaCIsIkFycmF5SGVscGVyIiwicmVtb3ZlIiwiZXYiLCJkZWJ1Z0NhbGxiYWNrIiwiZXZlbnRIYW5kbGVyIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsTUFBQTtBQUFBLEtBQUEsVUFBQUEsTUFBQSxFQUFNO0FBdUI5Qjs7QUF2QjhCLFlBNkIvQkMsWUE3QitCO0FBNkIvQixvQ0FBQTtBQUFBOztBQUNZLHFCQUFBQyxhQUFBLEdBQWtILEVBQWxIO0FBNkNYO0FBM0NHOzs7Ozs7O0FBaEMyQjtBQUFBO0FBQUEsbUNBcUN3Q0MsU0FyQ3hDLEVBcUNzREMsUUFyQ3RELEVBcUMwSTtBQUNqSyx3QkFBSUQsYUFBYSxLQUFLRCxhQUFsQixLQUFvQyxLQUF4QyxFQUErQyxLQUFLQSxhQUFMLENBQW1CQyxTQUFuQixJQUFnQyxFQUFoQztBQUMvQyx5QkFBS0QsYUFBTCxDQUFtQkMsU0FBbkIsRUFBOEJFLElBQTlCLENBQW1DRCxRQUFuQztBQUNIO0FBRUQ7Ozs7OztBQTFDMkI7QUFBQTtBQUFBLG9DQStDeUNELFNBL0N6QyxFQStDdURDLFFBL0N2RCxFQStDMkk7QUFDbEssd0JBQUlELGFBQWEsS0FBS0QsYUFBbEIsS0FBb0MsS0FBeEMsRUFBK0M7QUFDL0MseUJBQUtBLGFBQUwsQ0FBbUJDLFNBQW5CLElBQWdDSixtQkFBQU8sV0FBQSxDQUFZQyxNQUFaLENBQW1CLEtBQUtMLGFBQUwsQ0FBbUJDLFNBQW5CLENBQW5CLEVBQWtEQyxRQUFsRCxDQUFoQztBQUNIO0FBRUQ7Ozs7Ozs7QUFwRDJCO0FBQUE7QUFBQSx3Q0EwRDZDRCxTQTFEN0MsRUEwRDJESyxFQTFEM0QsRUEwRHlHO0FBQ2hJLHdCQUFJLE9BQU8sS0FBS0MsYUFBWixLQUE4QixVQUFsQyxFQUNJLEtBQUtBLGFBQUwsQ0FBbUJOLFNBQW5CLEVBQThCSyxFQUE5QixFQUFrQyxLQUFLTixhQUFMLENBQW1CQyxTQUFuQixLQUFpQyxFQUFuRTtBQUVKLHdCQUFJQSxhQUFhLEtBQUtELGFBQWxCLEtBQW9DLEtBQXhDLEVBQStDLE9BQU8sSUFBUDtBQUppRjtBQUFBO0FBQUE7O0FBQUE7QUFNaEksNkNBQXlCLEtBQUtBLGFBQUwsQ0FBbUJDLFNBQW5CLENBQXpCLDhIQUF3RDtBQUFBLGdDQUEvQ08sWUFBK0M7O0FBQ3BELGdDQUFJQSxhQUFhRixFQUFiLE1BQXFCLEtBQXpCLEVBQWdDLE9BQU8sS0FBUDtBQUNuQztBQVIrSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVVoSSwyQkFBTyxJQUFQO0FBQ0g7QUFyRTBCOztBQUFBO0FBQUE7O0FBNkJsQlIsZUFBQUMsWUFBQSxHQUFZQSxZQUFaO0FBK0NoQixLQTVFNEIsRUFBQUQsU0FBQUQsbUJBQUFDLE1BQUEsS0FBQUQsbUJBQUFDLE1BQUEsR0FBTSxFQUFOLENBQUE7QUE0RTVCLENBNUVELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5ldmVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogQSBtYXBwaW5nIG9mIGV2ZW50cyB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQsIG1hcHBlZCB0byB0aGVpciBldmVudCBwYXJhbWV0ZXIgdHlwZVxuICAgICAqL1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nIHtcbiAgICAgICAgXCJzdGF0ZS1jaGFuZ2VkXCI6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50O1xuICAgICAgICBcImluaXRpYWxpemVkXCI6IHVuZGVmaW5lZDtcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdGVkXCI6IFJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwuU2VsZWN0ZWRWZWhpY2xlRGF0YTtcbiAgICAgICAgXCJtb2RhbC1zaG93XCI6IHsgbW9kYWw6IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIH07XG4gICAgICAgIFwibW9kYWwtaGlkZVwiOiB7IG1vZGFsOiBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCB9O1xuICAgICAgICBcInJlc2l6ZVwiOiB1bmRlZmluZWQ7XG4gICAgICAgIFwicmVzaXplZFwiOiB1bmRlZmluZWQ7XG4gICAgICAgIFwiYnJlYWtwb2ludC1jaGFuZ2VkXCI6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHlsZXMuQnJlYWtwb2ludDtcbiAgICAgICAgXCJ2ZWhpY2xlLWRlc2NyaXB0aW9uLWxvYWRlZFwiOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgXCJwb3BTdGF0ZVwiOiB1bmRlZmluZWQ7IFxuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlRXZlbnRIYW5kbGVyPERhdGFUeXBlID0gYW55PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZXYgVGhlIGV2ZW50IGRhdGFcbiAgICAgICAgICogQHJldHVybiAgIGZhbHNlIHRvIGNhbmNlbCB0aGUgZXZlbnQgc3RvcCBwcm9jZXNzaW5nIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgKGV2OiBEYXRhVHlwZSk6IGJvb2xlYW58dm9pZFxuICAgIH07XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIERlYnVnQ2FsbGJhY2sge1xuICAgICAgICA8SyBleHRlbmRzIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZz4oZXZlbnROYW1lOkssIGV2ZW50RGF0YTogUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdLCBldmVudEhhbmRsZXJzOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXJbXSk6dm9pZDtcbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyIHtcbiAgICAgICAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiB7W2V2ZW50TmFtZSBpbiBrZXlvZiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmddPzpSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXJbXX0gPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTGlzdGVuIGZvciBhbiBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gZm9yXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayAgVGhlIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWRcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBvbjxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6IEssIGNhbGxiYWNrOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXI8UmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdPik6IHZvaWQge1xuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50SGFuZGxlcnMgPT09IGZhbHNlKSB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIGFuIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHN0b3AgbGlzdGVuaW5nIHRvXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdGhhdCB3YXMgb3JpZ2luYWxseSByZWdpc3RlcmVkXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgb2ZmPEsgZXh0ZW5kcyBrZXlvZiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmc+KGV2ZW50TmFtZTogSywgY2FsbGJhY2s6IFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50SGFuZGxlcjxSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10+KTogdm9pZCB7XG4gICAgICAgICAgICBpZiAoZXZlbnROYW1lIGluIHRoaXMuZXZlbnRIYW5kbGVycyA9PT0gZmFsc2UpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdID0gQXJyYXlIZWxwZXIucmVtb3ZlKHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdLCBjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciBhbiBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byB0cmlnZ2VyXG4gICAgICAgICAqIEBwYXJhbSBldiAgICAgICAgVGhlIGRhdGEgdG8gc2VuZCB0byB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICogQHJldHVybnMgICAgICAgICBmYWxzZSwgaWYgdGhlIGV2ZW50IGhhcyBiZWVuIGNhbmNlbGxlZCBieSBhIGhhbmRsZXIsIG90aGVyd2lzZSB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgdHJpZ2dlcjxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6IEssIGV2OiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10pOiBib29sZWFuIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdDYWxsYmFjayhldmVudE5hbWUsIGV2LCB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSB8fCBbXSk7XG5cbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgaW4gdGhpcy5ldmVudEhhbmRsZXJzID09PSBmYWxzZSkgcmV0dXJuIHRydWU7XG4gICAgICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgZXZlbnRIYW5kbGVyIG9mIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbG93cyB0aGUgZGVmaW5pdGlvbiBvZiBhIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGRlYnVnZ2luZyB0cmlnZ2VyZWQgZXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgZGVidWdDYWxsYmFjazogRGVidWdDYWxsYmFjaztcbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var filters;
    (function (filters_1) {
        var FilterController = function () {
            function FilterController() {
                _classCallCheck(this, FilterController);

                this.globalFilters = new GlobalFilterProvider();
                this.tireFilters = new TireFilterProvider(this.globalFilters);
                this.wheelFilters = new WheelFilterProvider(this.globalFilters);
            }

            _createClass(FilterController, [{
                key: 'setVehicle',
                value: function setVehicle(vehicle) {
                    this.clearFilters(false);
                    this.globalFilters.setVehicle(vehicle);
                }
            }, {
                key: 'setVehicleDescription',
                value: function setVehicleDescription(vehicleDescription) {
                    this.wheelFilters.setVehicleDescription(vehicleDescription);
                    this.globalFilters.setVehicleDescription(vehicleDescription);
                }
            }, {
                key: 'clearFilters',
                value: function clearFilters(triggerChange) {
                    this.globalFilters.clear(triggerChange);
                    this.tireFilters.clear(triggerChange);
                    this.wheelFilters.clear(triggerChange);
                }
            }]);

            return FilterController;
        }();

        filters_1.FilterController = FilterController;

        var FilterProvider = function () {
            function FilterProvider(type, globalFilterProvider) {
                _classCallCheck(this, FilterProvider);

                this.type = type;
                this.currentFilters = {};
                this.globalFilterProvider = globalFilterProvider;
            }
            /**
             * Trigger the filter changed callback
             */


            _createClass(FilterProvider, [{
                key: 'triggerFilterChange',
                value: function triggerFilterChange() {
                    if (typeof this.onFiltersChanged === 'function') this.onFiltersChanged(this.getFilters());
                }
                /**
                 * Returns a filter model with the specified filter values set,
                 * without actually setting them
                 */

            }, {
                key: 'previewFilters',
                value: function previewFilters(filterValues) {
                    var globalFilters = this.globalFilterProvider ? this.globalFilterProvider.getFilters() : {};
                    var filters = {};
                    var baseFilters = this.baseFilters;
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = filterValues[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var filterValue = _step.value;
                            var key = filterValue.key,
                                value = filterValue.value;

                            this.setFilter(key, value, filters);
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    return RideStylerShowcase.ObjectHelper.assign({}, this.baseFilters, globalFilters, filters);
                }
                /**
                 * Returns the currently applied filters
                 */

            }, {
                key: 'getFilters',
                value: function getFilters() {
                    var globalFilters = this.globalFilterProvider ? this.globalFilterProvider.getFilters() : {};
                    return RideStylerShowcase.ObjectHelper.assign({}, this.baseFilters, globalFilters, this.currentFilters);
                }
                /**
                 * Retrieve the options for a filter
                 * @param filter The filter
                 */

            }, {
                key: 'retrieveOptions',
                value: function retrieveOptions(filter) {
                    return filter.retrieveOptions(this.globalFilterProvider.getFilters());
                }
                /**
                 * Set a filter option, on a specific filter model
                 * @param key The filter key to apply
                 * @param value The value to apply to the filter
                 * @param filters The filters to apply them to
                 */

            }, {
                key: 'setFilter',
                value: function setFilter(key, value) {
                    var filters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.currentFilters;

                    var filterOption = this.findFilterOption(key);
                    if (filterOption) {
                        filterOption.apply(filters, value);
                    }
                }
                /**
                 * Returns the filter option for the specified key
                 * @param key The filter key
                 */

            }, {
                key: 'findFilterOption',
                value: function findFilterOption(key) {
                    var _iteratorNormalCompletion2 = true;
                    var _didIteratorError2 = false;
                    var _iteratorError2 = undefined;

                    try {
                        for (var _iterator2 = this.filterOptions[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                            var filter = _step2.value;

                            if (filter.key === key) {
                                return filter;
                            }
                        }
                    } catch (err) {
                        _didIteratorError2 = true;
                        _iteratorError2 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                _iterator2.return();
                            }
                        } finally {
                            if (_didIteratorError2) {
                                throw _iteratorError2;
                            }
                        }
                    }

                    return undefined;
                }
            }, {
                key: 'setFilters',
                value: function setFilters(selectedFiltersOrKey, value, triggerChange) {
                    var newFilters = {};
                    var selectedFilters = void 0;
                    if (typeof selectedFiltersOrKey === 'string') {
                        selectedFilters = [{
                            key: selectedFiltersOrKey,
                            value: value
                        }];
                    } else {
                        selectedFilters = selectedFiltersOrKey;
                        if (typeof value === 'boolean') triggerChange = value;
                    }
                    var _iteratorNormalCompletion3 = true;
                    var _didIteratorError3 = false;
                    var _iteratorError3 = undefined;

                    try {
                        for (var _iterator3 = selectedFilters[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                            var selectedFilter = _step3.value;
                            var key = selectedFilter.key,
                                _value = selectedFilter.value;

                            this.setFilter(key, _value, newFilters);
                        }
                    } catch (err) {
                        _didIteratorError3 = true;
                        _iteratorError3 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                _iterator3.return();
                            }
                        } finally {
                            if (_didIteratorError3) {
                                throw _iteratorError3;
                            }
                        }
                    }

                    var hasChanged = false;
                    for (var key in newFilters) {
                        if (newFilters.hasOwnProperty(key)) {
                            var newFilterValue = newFilters[key];
                            var currentFilterValue = this.currentFilters[key];
                            if (newFilterValue !== currentFilterValue) {
                                this.currentFilters[key] = newFilterValue;
                                hasChanged = true;
                            }
                        }
                    }
                    if (typeof triggerChange === 'undefined') triggerChange = true;
                    if (hasChanged && triggerChange) this.triggerFilterChange();
                    return hasChanged;
                }
            }, {
                key: 'clear',
                value: function clear() {
                    var triggerChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

                    this.currentFilters = {};
                    if (triggerChange) this.triggerFilterChange();
                }
            }]);

            return FilterProvider;
        }();

        filters_1.FilterProvider = FilterProvider;
        var vehicleConfigFilterKey = 'vehicle-config';

        var GlobalFilterProvider = function (_FilterProvider) {
            _inherits(GlobalFilterProvider, _FilterProvider);

            function GlobalFilterProvider() {
                _classCallCheck(this, GlobalFilterProvider);

                var _this = _possibleConstructorReturn(this, (GlobalFilterProvider.__proto__ || Object.getPrototypeOf(GlobalFilterProvider)).call(this, 'global', undefined));

                _this.baseFilters = {
                    HasFitments: true,
                    HasCatalogImage: true
                };
                _this.currentFilters = {};
                _this.filterOptions = [
                // VehicleConfiguration & VehicleTireOption
                {
                    key: vehicleConfigFilterKey,
                    visible: false,
                    apply: function apply(filters, vehicle) {
                        var vehicleConfigurationID = vehicle.vehicleConfigurationID,
                            vehicleTireOptionID = vehicle.vehicleTireOptionID;

                        if (vehicleConfigurationID) filters.VehicleConfiguration = vehicleConfigurationID;
                        if (vehicleTireOptionID) filters.VehicleTireOption = vehicleTireOptionID;
                    }
                }, {
                    key: 'globalWheel',
                    apply: function apply(filters, vehicleDescription) {
                        if (vehicleDescription.HasSideImage && !vehicleDescription.HasAngledImage) filters.HasSideImage = true;
                        if (vehicleDescription.HasAngledImage && !vehicleDescription.HasSideImage) filters.HasAngledImage = true;
                    }
                }];
                return _this;
            }
            /**
            * Applies a vehicle selection to all
            * @param vehicle The vehicle to apply to filter queries
            */


            _createClass(GlobalFilterProvider, [{
                key: 'setVehicleDescription',
                value: function setVehicleDescription(vehicleDescription) {
                    this.setFilter('globalWheel', vehicleDescription);
                }
            }, {
                key: 'setVehicle',
                value: function setVehicle(vehicle) {
                    this.setFilter(vehicleConfigFilterKey, vehicle);
                }
            }, {
                key: 'getCount',
                value: function getCount() {
                    // We'll never call getCount on the GlobalFilterModel
                    throw 'Cannot count GlobalFilterModel';
                }
            }]);

            return GlobalFilterProvider;
        }(FilterProvider);

        filters_1.GlobalFilterProvider = GlobalFilterProvider;

        var TireFilterProvider = function (_FilterProvider2) {
            _inherits(TireFilterProvider, _FilterProvider2);

            function TireFilterProvider(globalFilterProvider) {
                _classCallCheck(this, TireFilterProvider);

                var _this2 = _possibleConstructorReturn(this, (TireFilterProvider.__proto__ || Object.getPrototypeOf(TireFilterProvider)).call(this, 'tire', globalFilterProvider));

                _this2.baseFilters = {
                    RequiredFitmentResourceTypes: [2 /* Catalog */
                    ]
                };
                _this2.filterOptions = [
                // Brand
                {
                    label: RideStylerShowcase.strings.getString('brands'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-brands'),
                    key: 'tire-brand',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Brands
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('tire/getbrands', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Brands, function (brand) {
                                return {
                                    label: brand.TireBrandName,
                                    value: brand.TireBrandID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.TireBrand;
                    },
                    apply: function apply(filters, tireBrandID) {
                        filters.TireBrand = tireBrandID;
                    }
                },
                // Attributes
                {
                    label: RideStylerShowcase.strings.getString('features'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('any-features'),
                    key: 'tire-model-attribute',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Speed Ratings
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('tire/getmodelattributes', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Attributes, function (attribute) {
                                return {
                                    label: attribute.TireModelAttributeName,
                                    value: attribute.TireModelAttributeID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.RequiredTireModelAttribute;
                    },
                    apply: function apply(filters, attributeID) {
                        filters.RequiredTireModelAttribute = attributeID;
                    }
                },
                // Speed Rating
                {
                    label: RideStylerShowcase.strings.getString('speed-rating'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('any-speed-ratings'),
                    key: 'tire-speed-rating',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Speed Ratings
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('tire/getspeedratings', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.SpeedRatings, function (brand) {
                                return {
                                    label: brand.TireSpeedRatingCode,
                                    value: brand.TireSpeedRatingID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.SpeedRating;
                    },
                    apply: function apply(filters, speedRatingID) {
                        filters.SpeedRating = speedRatingID;
                    }
                }];
                return _this2;
            }

            _createClass(TireFilterProvider, [{
                key: 'getCount',
                value: function getCount(filters) {
                    return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("tire/countmodels", filters), function (response) {
                        return response.Count;
                    });
                }
            }]);

            return TireFilterProvider;
        }(FilterProvider);

        filters_1.TireFilterProvider = TireFilterProvider;

        var WheelFilterProvider = function (_FilterProvider3) {
            _inherits(WheelFilterProvider, _FilterProvider3);

            function WheelFilterProvider(globalFilterProvider) {
                _classCallCheck(this, WheelFilterProvider);

                var _this3 = _possibleConstructorReturn(this, (WheelFilterProvider.__proto__ || Object.getPrototypeOf(WheelFilterProvider)).call(this, 'wheel', globalFilterProvider));

                _this3.filterOptions = [
                // Brand
                {
                    label: RideStylerShowcase.strings.getString('brands'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-brands'),
                    key: 'wheel-brand',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Brands
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('wheel/getbrands', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Brands, function (brand) {
                                return {
                                    label: brand.WheelBrandName,
                                    value: brand.WheelBrandID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.WheelBrand;
                    },
                    apply: function apply(filters, wheelBrandID) {
                        filters.WheelBrand = wheelBrandID;
                    }
                },
                // Finish
                {
                    label: RideStylerShowcase.strings.getString('finishes'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-finishes'),
                    key: 'wheel-finish',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request finishes
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('wheel/getfinishes', globalFilters), function (response) {
                            // Map finishes to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Finishes, function (finishCategory) {
                                return {
                                    label: finishCategory.WheelFinishCategoryName,
                                    value: finishCategory.WheelFinishCategoryID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.WheelFinishCategory;
                    },
                    apply: function apply(filters, wheelFinishCategoryID) {
                        filters.WheelFinishCategory = wheelFinishCategoryID;
                    }
                },
                // Diameter
                {
                    label: RideStylerShowcase.strings.getString('sizes'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-sizes'),
                    key: 'wheel-size',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request diameters
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('wheel/getdiameters', globalFilters), function (response) {
                            // Map diameters to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Diameters, function (diameter) {
                                return {
                                    label: diameter.toString(),
                                    value: diameter
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return getFitmentFilterValue(filters, 'Diameter');
                    },
                    apply: function apply(filters, diameter) {
                        if (!filters.FitmentFilters) filters.FitmentFilters = [];
                        applyFitmentFilter(filters, {
                            Diameter: diameter
                        });
                    }
                }, {
                    key: 'wheel',
                    apply: function apply(filters, vehicleDescription) {
                        if (vehicleDescription.HasSideImage && !vehicleDescription.HasAngledImage) filters.HasSideImage = true;
                        if (vehicleDescription.HasAngledImage && !vehicleDescription.HasSideImage) filters.HasAngledImage = true;
                    }
                }];
                return _this3;
            }

            _createClass(WheelFilterProvider, [{
                key: 'setVehicleDescription',
                value: function setVehicleDescription(vehicleDescription) {
                    this.setFilter('wheel', vehicleDescription);
                }
            }, {
                key: 'getCount',
                value: function getCount(filters) {
                    return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("wheel/countmodels", filters), function (response) {
                        return response.Count;
                    });
                }
            }]);

            return WheelFilterProvider;
        }(FilterProvider);

        filters_1.WheelFilterProvider = WheelFilterProvider;
        function getFitmentFilterValue(filters, key) {
            var _iteratorNormalCompletion4 = true;
            var _didIteratorError4 = false;
            var _iteratorError4 = undefined;

            try {
                for (var _iterator4 = (filters.FitmentFilters || [])[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                    var fitmentFilter = _step4.value;

                    if (fitmentFilter.GroupKey === fitmentFilterGroupKey) {
                        return fitmentFilter[key];
                    }
                }
            } catch (err) {
                _didIteratorError4 = true;
                _iteratorError4 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion4 && _iterator4.return) {
                        _iterator4.return();
                    }
                } finally {
                    if (_didIteratorError4) {
                        throw _iteratorError4;
                    }
                }
            }

            return undefined;
        }
        var fitmentFilterGroupKey = "ridestyler-showcase-filters";
        function applyFitmentFilter(filters, fitmentFilter) {
            var fitmentFilters = filters.FitmentFilters || [];
            var existingFitmentFilterGroup = void 0;
            var _iteratorNormalCompletion5 = true;
            var _didIteratorError5 = false;
            var _iteratorError5 = undefined;

            try {
                for (var _iterator5 = fitmentFilters[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                    var appliedFitmentFilter = _step5.value;

                    if (appliedFitmentFilter.GroupKey === fitmentFilterGroupKey) {
                        existingFitmentFilterGroup = appliedFitmentFilter;
                        break;
                    }
                }
            } catch (err) {
                _didIteratorError5 = true;
                _iteratorError5 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion5 && _iterator5.return) {
                        _iterator5.return();
                    }
                } finally {
                    if (_didIteratorError5) {
                        throw _iteratorError5;
                    }
                }
            }

            if (!existingFitmentFilterGroup) {
                fitmentFilter.GroupKey = fitmentFilterGroupKey;
                fitmentFilters.push(fitmentFilter);
                // We've modified the array so update the array in the filters
                filters.FitmentFilters = fitmentFilters;
            } else {
                RideStylerShowcase.ObjectHelper.assign(existingFitmentFilterGroup, fitmentFilter);
                existingFitmentFilterGroup.GroupKey = fitmentFilterGroupKey;
            }
        }
    })(filters = RideStylerShowcase.filters || (RideStylerShowcase.filters = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzLnRzIiwic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycy5qcyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJmaWx0ZXJzIiwiZmlsdGVyc18xIiwiRmlsdGVyQ29udHJvbGxlciIsImdsb2JhbEZpbHRlcnMiLCJHbG9iYWxGaWx0ZXJQcm92aWRlciIsInRpcmVGaWx0ZXJzIiwiVGlyZUZpbHRlclByb3ZpZGVyIiwid2hlZWxGaWx0ZXJzIiwiV2hlZWxGaWx0ZXJQcm92aWRlciIsInZlaGljbGUiLCJjbGVhckZpbHRlcnMiLCJzZXRWZWhpY2xlIiwidmVoaWNsZURlc2NyaXB0aW9uIiwic2V0VmVoaWNsZURlc2NyaXB0aW9uIiwidHJpZ2dlckNoYW5nZSIsImNsZWFyIiwiRmlsdGVyUHJvdmlkZXIiLCJ0eXBlIiwiZ2xvYmFsRmlsdGVyUHJvdmlkZXIiLCJjdXJyZW50RmlsdGVycyIsIm9uRmlsdGVyc0NoYW5nZWQiLCJnZXRGaWx0ZXJzIiwiZmlsdGVyVmFsdWVzIiwiYmFzZUZpbHRlcnMiLCJmaWx0ZXJWYWx1ZSIsImtleSIsInZhbHVlIiwic2V0RmlsdGVyIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiZmlsdGVyIiwicmV0cmlldmVPcHRpb25zIiwiZmlsdGVyT3B0aW9uIiwiZmluZEZpbHRlck9wdGlvbiIsImFwcGx5IiwiZmlsdGVyT3B0aW9ucyIsInVuZGVmaW5lZCIsInNlbGVjdGVkRmlsdGVyc09yS2V5IiwibmV3RmlsdGVycyIsInNlbGVjdGVkRmlsdGVycyIsInNlbGVjdGVkRmlsdGVyIiwiaGFzQ2hhbmdlZCIsImhhc093blByb3BlcnR5IiwibmV3RmlsdGVyVmFsdWUiLCJjdXJyZW50RmlsdGVyVmFsdWUiLCJ0cmlnZ2VyRmlsdGVyQ2hhbmdlIiwidmVoaWNsZUNvbmZpZ0ZpbHRlcktleSIsIkhhc0ZpdG1lbnRzIiwiSGFzQ2F0YWxvZ0ltYWdlIiwidmlzaWJsZSIsInZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ2ZWhpY2xlVGlyZU9wdGlvbklEIiwiVmVoaWNsZUNvbmZpZ3VyYXRpb24iLCJWZWhpY2xlVGlyZU9wdGlvbiIsIkhhc1NpZGVJbWFnZSIsIkhhc0FuZ2xlZEltYWdlIiwiUmVxdWlyZWRGaXRtZW50UmVzb3VyY2VUeXBlcyIsImxhYmVsIiwic3RyaW5ncyIsImdldFN0cmluZyIsInVuc2VsZWN0ZWRPcHRpb25MYWJlbCIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwiYXBpIiwicmVxdWVzdCIsIkFycmF5SGVscGVyIiwibWFwIiwicmVzcG9uc2UiLCJCcmFuZHMiLCJicmFuZCIsIlRpcmVCcmFuZE5hbWUiLCJUaXJlQnJhbmRJRCIsImdldFZhbHVlRnJvbUZpbHRlcnMiLCJUaXJlQnJhbmQiLCJ0aXJlQnJhbmRJRCIsIkF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGUiLCJUaXJlTW9kZWxBdHRyaWJ1dGVOYW1lIiwiVGlyZU1vZGVsQXR0cmlidXRlSUQiLCJSZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSIsImF0dHJpYnV0ZUlEIiwiU3BlZWRSYXRpbmdzIiwiVGlyZVNwZWVkUmF0aW5nQ29kZSIsIlRpcmVTcGVlZFJhdGluZ0lEIiwiU3BlZWRSYXRpbmciLCJzcGVlZFJhdGluZ0lEIiwiQ291bnQiLCJXaGVlbEJyYW5kTmFtZSIsIldoZWVsQnJhbmRJRCIsIldoZWVsQnJhbmQiLCJ3aGVlbEJyYW5kSUQiLCJGaW5pc2hlcyIsImZpbmlzaENhdGVnb3J5IiwiV2hlZWxGaW5pc2hDYXRlZ29yeU5hbWUiLCJXaGVlbEZpbmlzaENhdGVnb3J5SUQiLCJXaGVlbEZpbmlzaENhdGVnb3J5Iiwid2hlZWxGaW5pc2hDYXRlZ29yeUlEIiwiRGlhbWV0ZXJzIiwiZGlhbWV0ZXIiLCJ0b1N0cmluZyIsImdldEZpdG1lbnRGaWx0ZXJWYWx1ZSIsIkZpdG1lbnRGaWx0ZXJzIiwiYXBwbHlGaXRtZW50RmlsdGVyIiwiRGlhbWV0ZXIiLCJmaXRtZW50RmlsdGVyIiwiR3JvdXBLZXkiLCJmaXRtZW50RmlsdGVyR3JvdXBLZXkiLCJmaXRtZW50RmlsdGVycyIsImV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwIiwiYXBwbGllZEZpdG1lbnRGaWx0ZXIiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLE9BQUE7QUFBQSxLQUFBLFVBQUFDLFNBQUEsRUFBTztBQUFBLFlBU2hDQyxnQkFUZ0M7QUFjNUIsd0NBQUE7QUFBQTs7QUFDSSxxQkFBS0MsYUFBTCxHQUFxQixJQUFJQyxvQkFBSixFQUFyQjtBQUNBLHFCQUFLQyxXQUFMLEdBQW1CLElBQUlDLGtCQUFKLENBQXVCLEtBQUtILGFBQTVCLENBQW5CO0FBQ0EscUJBQUtJLFlBQUwsR0FBb0IsSUFBSUMsbUJBQUosQ0FBd0IsS0FBS0wsYUFBN0IsQ0FBcEI7QUFDSDs7QUFsQjJCO0FBQUE7QUFBQSwyQ0FvQlZNLE9BcEJVLEVBb0JLO0FBQzdCLHlCQUFLQyxZQUFMLENBQWtCLEtBQWxCO0FBQ0EseUJBQUtQLGFBQUwsQ0FBbUJRLFVBQW5CLENBQThCRixPQUE5QjtBQUNIO0FBdkIyQjtBQUFBO0FBQUEsc0RBeUJDRyxrQkF6QkQsRUF5QnNDO0FBQzlELHlCQUFLTCxZQUFMLENBQWtCTSxxQkFBbEIsQ0FBd0NELGtCQUF4QztBQUNBLHlCQUFLVCxhQUFMLENBQW1CVSxxQkFBbkIsQ0FBeUNELGtCQUF6QztBQUNIO0FBNUIyQjtBQUFBO0FBQUEsNkNBOEJSRSxhQTlCUSxFQThCZTtBQUN2Qyx5QkFBS1gsYUFBTCxDQUFtQlksS0FBbkIsQ0FBeUJELGFBQXpCO0FBQ0EseUJBQUtULFdBQUwsQ0FBaUJVLEtBQWpCLENBQXVCRCxhQUF2QjtBQUNBLHlCQUFLUCxZQUFMLENBQWtCUSxLQUFsQixDQUF3QkQsYUFBeEI7QUFDSDtBQWxDMkI7O0FBQUE7QUFBQTs7QUFTbkJiLGtCQUFBQyxnQkFBQSxHQUFnQkEsZ0JBQWhC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QTtBQUNBeEcsd0JBQVFxRyxjQUFSLEdBQXlCTSxjQUF6QjtBQUNILGFBTkQsTUFNTztBQUNINUcsbUNBQUE2QixZQUFBLENBQWFDLE1BQWIsQ0FBd0MrRSwwQkFBeEMsRUFBb0VKLGFBQXBFO0FBQ0FJLDJDQUEyQkgsUUFBM0IsR0FBc0NDLHFCQUF0QztBQUNIO0FBQ0o7QUFDSixLQXRnQjRCLEVBQUExRyxVQUFBRCxtQkFBQUMsT0FBQSxLQUFBRCxtQkFBQUMsT0FBQSxHQUFPLEVBQVAsQ0FBQTtBQXNnQjVCLENBdGdCRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycyB7XG4gICAgZXhwb3J0IHR5cGUgRmlsdGVyUHJvdmlkZXJUeXBlID0gJ3RpcmUnfCd3aGVlbCd8J2dsb2JhbCc7XG5cbiAgICBpbXBvcnQgV2hlZWxGaWx0ZXJNb2RlbCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuV2hlZWxGaWx0ZXJNb2RlbDtcbiAgICBpbXBvcnQgVGlyZUZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5UaXJlRmlsdGVyTW9kZWw7XG4gICAgZXhwb3J0IHR5cGUgR2xvYmFsRmlsdGVyTW9kZWwgPSBXaGVlbEZpbHRlck1vZGVsICYgVGlyZUZpbHRlck1vZGVsO1xuXG4gICAgaW1wb3J0IEZpdG1lbnRGaWx0ZXJNb2RlbCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuRml0bWVudEZpbHRlck1vZGVsO1xuXG4gICAgZXhwb3J0IGNsYXNzIEZpbHRlckNvbnRyb2xsZXIge1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZ2xvYmFsRmlsdGVyczpHbG9iYWxGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHRpcmVGaWx0ZXJzOlRpcmVGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHdoZWVsRmlsdGVyczpXaGVlbEZpbHRlclByb3ZpZGVyO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzID0gbmV3IEdsb2JhbEZpbHRlclByb3ZpZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnRpcmVGaWx0ZXJzID0gbmV3IFRpcmVGaWx0ZXJQcm92aWRlcih0aGlzLmdsb2JhbEZpbHRlcnMpO1xuICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMgPSBuZXcgV2hlZWxGaWx0ZXJQcm92aWRlcih0aGlzLmdsb2JhbEZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZlaGljbGUodmVoaWNsZTpWZWhpY2xlKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVycyhmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuc2V0VmVoaWNsZSh2ZWhpY2xlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uOlZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgY2xlYXJGaWx0ZXJzKHRyaWdnZXJDaGFuZ2U/OiBib29sZWFuKSB7XG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnRpcmVGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFZlaGljbGUge1xuICAgICAgICB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOiBzdHJpbmc7XG4gICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSUQ6IHN0cmluZztcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFZlaGljbGVEZXNjcmlwdGlvbiB7XG4gICAgICAgIEhhc1NpZGVJbWFnZTogYm9vbGVhbjtcbiAgICAgICAgSGFzQW5nbGVkSW1hZ2U6IGJvb2xlYW47XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBGaWx0ZXJWYWx1ZSB7XG4gICAgICAgIGtleTogc3RyaW5nO1xuICAgICAgICB2YWx1ZTogYW55O1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUZpbHRlcjxWYWx1ZVR5cGUsIEZpbHRlclR5cGU+IHtcbiAgICAgICAga2V5OiBzdHJpbmc7XG4gICAgICAgIGxhYmVsPzogc3RyaW5nO1xuICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgICAgIHZpc2libGU/OiBib29sZWFuO1xuXG4gICAgICAgIHJldHJpZXZlT3B0aW9ucz86IChnbG9iYWxGaWx0ZXJzOkdsb2JhbEZpbHRlck1vZGVsKSA9PiBSaWRlU3R5bGVyUHJvbWlzZTxJRmlsdGVyT3B0aW9uPFZhbHVlVHlwZT5bXSwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+O1xuICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzPzogKGZpbHRlcnM6RmlsdGVyVHlwZSkgPT4gYW55O1xuICAgICAgICBhcHBseTogKGZpbHRlcnM6RmlsdGVyVHlwZSwgdmFsdWU6VmFsdWVUeXBlKSA9PiB2b2lkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUZpbHRlck9wdGlvbjxWYWx1ZVR5cGU+IHtcbiAgICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IFZhbHVlVHlwZTtcbiAgICB9XG5cbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgRmlsdGVyUHJvdmlkZXI8RmlsdGVyVHlwZSBleHRlbmRzIG9iamVjdD4ge1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTpGaWx0ZXJQcm92aWRlclR5cGU7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmaWx0ZXJPcHRpb25zOklGaWx0ZXI8YW55LCBGaWx0ZXJUeXBlPltdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IGFwcGxpZWQgZmlsdGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRGaWx0ZXJzOkZpbHRlclR5cGU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXJyaWRhYmxlIGluIGRlcml2aW5nIGNsYXNzZXMgdG8gc2V0IGJhc2UgZmlsdGVycyBmb3IgcmVxdWVzdHNcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBiYXNlRmlsdGVyczpGaWx0ZXJUeXBlO1xuICAgICAgICBcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGdsb2JhbEZpbHRlclByb3ZpZGVyOiBHbG9iYWxGaWx0ZXJQcm92aWRlcjtcblxuICAgICAgICBjb25zdHJ1Y3Rvcih0eXBlOkZpbHRlclByb3ZpZGVyVHlwZSwgZ2xvYmFsRmlsdGVyUHJvdmlkZXI6R2xvYmFsRmlsdGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0ge30gYXMgRmlsdGVyVHlwZTtcblxuICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA9IGdsb2JhbEZpbHRlclByb3ZpZGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHNwZWNpZmllZCwgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZWFjaCB0aW1lIHRoZSBmaWx0ZXJzIGNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIG9uRmlsdGVyc0NoYW5nZWQ6KGZpbHRlcnM6RmlsdGVyVHlwZSkgPT4gdm9pZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciB0aGUgZmlsdGVyIGNoYW5nZWQgY2FsbGJhY2tcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCB0cmlnZ2VyRmlsdGVyQ2hhbmdlKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRmlsdGVyc0NoYW5nZWQgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlcnNDaGFuZ2VkKHRoaXMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgZmlsdGVyIG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBmaWx0ZXIgdmFsdWVzIHNldCwgXG4gICAgICAgICAqIHdpdGhvdXQgYWN0dWFsbHkgc2V0dGluZyB0aGVtXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgcHJldmlld0ZpbHRlcnMoZmlsdGVyVmFsdWVzOkZpbHRlclZhbHVlW10pOkZpbHRlclR5cGUge1xuICAgICAgICAgICAgY29uc3QgZ2xvYmFsRmlsdGVyczpGaWx0ZXJUeXBlID0gKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgPyBcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6IFxuICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICApIGFzIEZpbHRlclR5cGU7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJzOkZpbHRlclR5cGUgPSB7fSBhcyBGaWx0ZXJUeXBlO1xuICAgICAgICAgICAgY29uc3QgYmFzZUZpbHRlcnM6RmlsdGVyVHlwZSA9IHRoaXMuYmFzZUZpbHRlcnM7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyVmFsdWUgb2YgZmlsdGVyVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge2tleSwgdmFsdWV9ID0gZmlsdGVyVmFsdWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcihrZXksIHZhbHVlLCBmaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdEhlbHBlci5hc3NpZ248RmlsdGVyVHlwZT4oXG4gICAgICAgICAgICAgICAge30gYXMgRmlsdGVyVHlwZSxcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VGaWx0ZXJzLCBcbiAgICAgICAgICAgICAgICBnbG9iYWxGaWx0ZXJzIGFzIEZpbHRlclR5cGUsIFxuICAgICAgICAgICAgICAgIGZpbHRlcnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudGx5IGFwcGxpZWQgZmlsdGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGdldEZpbHRlcnMoKTpGaWx0ZXJUeXBlIHtcbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZpbHRlcnM6RmlsdGVyVHlwZSA9ICh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID8gXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkgOiBcbiAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgKSBhcyBGaWx0ZXJUeXBlO1xuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0SGVscGVyLmFzc2lnbjxGaWx0ZXJUeXBlPihcbiAgICAgICAgICAgICAgICB7fSBhcyBGaWx0ZXJUeXBlLFxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMsXG4gICAgICAgICAgICAgICAgZ2xvYmFsRmlsdGVycyxcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHJpZXZlIHRoZSBvcHRpb25zIGZvciBhIGZpbHRlclxuICAgICAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyByZXRyaWV2ZU9wdGlvbnM8VmFsdWVUeXBlPihmaWx0ZXI6SUZpbHRlcjxWYWx1ZVR5cGUsIEZpbHRlclR5cGU+KTpSaWRlU3R5bGVyUHJvbWlzZTxJRmlsdGVyT3B0aW9uPFZhbHVlVHlwZT5bXSwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIucmV0cmlldmVPcHRpb25zKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBhIGZpbHRlciBvcHRpb24sIG9uIGEgc3BlY2lmaWMgZmlsdGVyIG1vZGVsXG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGZpbHRlciBrZXkgdG8gYXBwbHlcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBhcHBseSB0byB0aGUgZmlsdGVyXG4gICAgICAgICAqIEBwYXJhbSBmaWx0ZXJzIFRoZSBmaWx0ZXJzIHRvIGFwcGx5IHRoZW0gdG9cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXI8VmFsdWVUeXBlID0gYW55PihrZXk6c3RyaW5nLCB2YWx1ZTpWYWx1ZVR5cGUsIGZpbHRlcnM6RmlsdGVyVHlwZSA9IHRoaXMuY3VycmVudEZpbHRlcnMpOnZvaWQge1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyT3B0aW9uID0gdGhpcy5maW5kRmlsdGVyT3B0aW9uKGtleSk7XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJPcHRpb24pIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb24uYXBwbHkoZmlsdGVycywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGZpbHRlciBvcHRpb24gZm9yIHRoZSBzcGVjaWZpZWQga2V5XG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGZpbHRlciBrZXlcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBmaW5kRmlsdGVyT3B0aW9uKGtleTpzdHJpbmcpOiBJRmlsdGVyPGFueSwgRmlsdGVyVHlwZT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWx0ZXIgb2YgdGhpcy5maWx0ZXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5rZXkgPT09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBseSBhIGxpc3Qgb2Ygc2VsZWN0ZWQgZmlsdGVyIGtleS12YWx1ZSBwYWlyc1xuICAgICAgICAgKiBAcGFyYW0gc2VsZWN0ZWRGaWx0ZXJzIEEgbGlzdCBvZiBzZWxlY3RlZCBmaWx0ZXIga2V5LXZhbHVlIHBhaXJzIHRvIGFwcGx5XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0RmlsdGVycyhzZWxlY3RlZEZpbHRlcnM6RmlsdGVyVmFsdWVbXSwgdHJpZ2dlckNoYW5nZT86IGJvb2xlYW4pOmJvb2xlYW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBseSBhIGZpbHRlclxuICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgb2YgdGhlIGZpbHRlciB0byBhcHBseVxuICAgICAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGFwcGx5IHRvIHRoZSBmaWx0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXJzKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCB0cmlnZ2VyQ2hhbmdlPzpib29sZWFuKTpib29sZWFuO1xuICAgICAgICBwdWJsaWMgc2V0RmlsdGVycyhzZWxlY3RlZEZpbHRlcnNPcktleTpGaWx0ZXJWYWx1ZVtdfHN0cmluZywgdmFsdWU/OmFueSwgdHJpZ2dlckNoYW5nZT86IGJvb2xlYW4pOmJvb2xlYW4ge1xuICAgICAgICAgICAgY29uc3QgbmV3RmlsdGVyczpGaWx0ZXJUeXBlID0ge30gYXMgRmlsdGVyVHlwZTtcblxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkRmlsdGVyczogRmlsdGVyVmFsdWVbXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RlZEZpbHRlcnNPcktleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBbe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHNlbGVjdGVkRmlsdGVyc09yS2V5LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzID0gc2VsZWN0ZWRGaWx0ZXJzT3JLZXk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB0cmlnZ2VyQ2hhbmdlID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRGaWx0ZXIgb2Ygc2VsZWN0ZWRGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge2tleSwgdmFsdWV9ID0gc2VsZWN0ZWRGaWx0ZXI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcihrZXksIHZhbHVlLCBuZXdGaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld0ZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbHRlclZhbHVlID0gbmV3RmlsdGVyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVyVmFsdWUgPSB0aGlzLmN1cnJlbnRGaWx0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmlsdGVyVmFsdWUgIT09IGN1cnJlbnRGaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyc1trZXldID0gbmV3RmlsdGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyQ2hhbmdlID09PSAndW5kZWZpbmVkJykgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCAmJiB0cmlnZ2VyQ2hhbmdlKSB0aGlzLnRyaWdnZXJGaWx0ZXJDaGFuZ2UoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Q291bnQoZmlsdGVyczpGaWx0ZXJUeXBlKTpSaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIsIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcblxuICAgICAgICBwdWJsaWMgY2xlYXIodHJpZ2dlckNoYW5nZTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fSBhcyBGaWx0ZXJUeXBlO1xuICAgICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpIHRoaXMudHJpZ2dlckZpbHRlckNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmVoaWNsZUNvbmZpZ0ZpbHRlcktleSA9ICd2ZWhpY2xlLWNvbmZpZyc7XG4gICAgZXhwb3J0IGNsYXNzIEdsb2JhbEZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8R2xvYmFsRmlsdGVyTW9kZWw+IHtcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZpbHRlck9wdGlvbnM6SUZpbHRlcjxhbnksIEdsb2JhbEZpbHRlck1vZGVsPltdO1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYmFzZUZpbHRlcnM6IEdsb2JhbEZpbHRlck1vZGVsID0ge1xuICAgICAgICAgICAgSGFzRml0bWVudHM6IHRydWUsXG4gICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCdnbG9iYWwnLCB1bmRlZmluZWQpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0ge307XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAvLyBWZWhpY2xlQ29uZmlndXJhdGlvbiAmIFZlaGljbGVUaXJlT3B0aW9uXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHZlaGljbGVDb25maWdGaWx0ZXJLZXksXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGU6VmVoaWNsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlQ29uZmlndXJhdGlvbklELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSURcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gPSB2ZWhpY2xlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZUNvbmZpZ3VyYXRpb25JRCkgZmlsdGVycy5WZWhpY2xlQ29uZmlndXJhdGlvbiA9IHZlaGljbGVDb25maWd1cmF0aW9uSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZVRpcmVPcHRpb25JRCkgZmlsdGVycy5WZWhpY2xlVGlyZU9wdGlvbiA9IHZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZ2xvYmFsV2hlZWwnLFxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UpIGZpbHRlcnMuSGFzU2lkZUltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UpIGZpbHRlcnMuSGFzQW5nbGVkSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgKiBBcHBsaWVzIGEgdmVoaWNsZSBzZWxlY3Rpb24gdG8gYWxsIFxuICAgICAgICAqIEBwYXJhbSB2ZWhpY2xlIFRoZSB2ZWhpY2xlIHRvIGFwcGx5IHRvIGZpbHRlciBxdWVyaWVzXG4gICAgICAgICovXG4gICAgICAgIFxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoJ2dsb2JhbFdoZWVsJywgdmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWZWhpY2xlKHZlaGljbGU6VmVoaWNsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIodmVoaWNsZUNvbmZpZ0ZpbHRlcktleSwgdmVoaWNsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZ2V0Q291bnQoKTpuZXZlciB7XG4gICAgICAgICAgICAvLyBXZSdsbCBuZXZlciBjYWxsIGdldENvdW50IG9uIHRoZSBHbG9iYWxGaWx0ZXJNb2RlbFxuICAgICAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjb3VudCBHbG9iYWxGaWx0ZXJNb2RlbCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgVGlyZUZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8VGlyZUZpbHRlck1vZGVsPiB7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmaWx0ZXJPcHRpb25zOklGaWx0ZXI8YW55LCBUaXJlRmlsdGVyTW9kZWw+W107XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBiYXNlRmlsdGVyczpUaXJlRmlsdGVyTW9kZWwgPSB7XG4gICAgICAgICAgICBSZXF1aXJlZEZpdG1lbnRSZXNvdXJjZVR5cGVzOiBbXG4gICAgICAgICAgICAgICAgcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5UaXJlRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nXG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3RydWN0b3IoZ2xvYmFsRmlsdGVyUHJvdmlkZXI6R2xvYmFsRmlsdGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHN1cGVyKCd0aXJlJywgZ2xvYmFsRmlsdGVyUHJvdmlkZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgLy8gQnJhbmRcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1icmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1icmFuZCcsXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IEJyYW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgndGlyZS9nZXRicmFuZHMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkJyYW5kcywgYnJhbmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJyYW5kLlRpcmVCcmFuZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuVGlyZUJyYW5kSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5UaXJlQnJhbmQsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdGlyZUJyYW5kSUQ6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlRpcmVCcmFuZCA9IHRpcmVCcmFuZElEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBBdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2ZlYXR1cmVzJyksXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FueS1mZWF0dXJlcycpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLW1vZGVsLWF0dHJpYnV0ZScsXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IFNwZWVkIFJhdGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3RpcmUvZ2V0bW9kZWxhdHRyaWJ1dGVzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5BdHRyaWJ1dGVzLCBhdHRyaWJ1dGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGF0dHJpYnV0ZS5UaXJlTW9kZWxBdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF0dHJpYnV0ZS5UaXJlTW9kZWxBdHRyaWJ1dGVJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlJlcXVpcmVkVGlyZU1vZGVsQXR0cmlidXRlLFxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGF0dHJpYnV0ZUlEOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuUmVxdWlyZWRUaXJlTW9kZWxBdHRyaWJ1dGUgPSBhdHRyaWJ1dGVJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gU3BlZWQgUmF0aW5nXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NwZWVkLXJhdGluZycpLFxuICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbnktc3BlZWQtcmF0aW5ncycpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLXNwZWVkLXJhdGluZycsXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IFNwZWVkIFJhdGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3RpcmUvZ2V0c3BlZWRyYXRpbmdzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5TcGVlZFJhdGluZ3MsIGJyYW5kID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJyYW5kLlRpcmVTcGVlZFJhdGluZ0lEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuU3BlZWRSYXRpbmcsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgc3BlZWRSYXRpbmdJRDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlNwZWVkUmF0aW5nID0gc3BlZWRSYXRpbmdJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZ2V0Q291bnQoZmlsdGVyczpUaXJlRmlsdGVyTW9kZWwpOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLkNvdW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBXaGVlbEZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8V2hlZWxGaWx0ZXJNb2RlbD4ge1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZmlsdGVyT3B0aW9uczpJRmlsdGVyPGFueSwgV2hlZWxGaWx0ZXJNb2RlbD5bXTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcjpHbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgc3VwZXIoJ3doZWVsJywgZ2xvYmFsRmlsdGVyUHJvdmlkZXIpO1xuXG4gICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgLy8gQnJhbmRcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1icmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtYnJhbmQnLFxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBCcmFuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3doZWVsL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQnJhbmRzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuV2hlZWxCcmFuZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuV2hlZWxCcmFuZElEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxCcmFuZCxcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB3aGVlbEJyYW5kSUQ6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLldoZWVsQnJhbmQgPSB3aGVlbEJyYW5kSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEZpbmlzaFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdmaW5pc2hlcycpLFxuICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtZmluaXNoZXMnKSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtZmluaXNoJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZmluaXNoZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpbmlzaGVzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgZmluaXNoZXMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkZpbmlzaGVzLCBmaW5pc2hDYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZmluaXNoQ2F0ZWdvcnkuV2hlZWxGaW5pc2hDYXRlZ29yeU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmluaXNoQ2F0ZWdvcnkuV2hlZWxGaW5pc2hDYXRlZ29yeUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxGaW5pc2hDYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB3aGVlbEZpbmlzaENhdGVnb3J5SUQ6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLldoZWVsRmluaXNoQ2F0ZWdvcnkgPSB3aGVlbEZpbmlzaENhdGVnb3J5SUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIERpYW1ldGVyXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemVzJyksXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1zaXplcycpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1zaXplJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZGlhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRkaWFtZXRlcnMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBkaWFtZXRlcnMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkRpYW1ldGVycywgZGlhbWV0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRpYW1ldGVyLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGlhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZ2V0Rml0bWVudEZpbHRlclZhbHVlKGZpbHRlcnMsICdEaWFtZXRlcicpLFxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGRpYW1ldGVyOm51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzKSBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhbWV0ZXI6IGRpYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZURlc2NyaXB0aW9uOlZlaGljbGVEZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSkgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSkgZmlsdGVycy5IYXNBbmdsZWRJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKCd3aGVlbCcsIHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBwdWJsaWMgZ2V0Q291bnQoZmlsdGVyczpXaGVlbEZpbHRlck1vZGVsKTpSaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIsIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwid2hlZWwvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEZpdG1lbnRGaWx0ZXJWYWx1ZTxGaXRtZW50RmlsdGVyS2V5IGV4dGVuZHMga2V5b2YgRml0bWVudEZpbHRlck1vZGVsPihmaWx0ZXJzOntGaXRtZW50RmlsdGVycz86IEZpdG1lbnRGaWx0ZXJNb2RlbFtdfSwga2V5OiBGaXRtZW50RmlsdGVyS2V5KTpGaXRtZW50RmlsdGVyTW9kZWxbRml0bWVudEZpbHRlcktleV0ge1xuICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnRGaWx0ZXIgb2YgZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXSkge1xuICAgICAgICAgICAgaWYgKGZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPT09IGZpdG1lbnRGaWx0ZXJHcm91cEtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXRtZW50RmlsdGVyW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGZpdG1lbnRGaWx0ZXJHcm91cEtleSA9IFwicmlkZXN0eWxlci1zaG93Y2FzZS1maWx0ZXJzXCI7XG4gICAgZnVuY3Rpb24gYXBwbHlGaXRtZW50RmlsdGVyKGZpbHRlcnM6e0ZpdG1lbnRGaWx0ZXJzPzogRml0bWVudEZpbHRlck1vZGVsW119LCBmaXRtZW50RmlsdGVyOiBGaXRtZW50RmlsdGVyTW9kZWwpIHtcbiAgICAgICAgbGV0IGZpdG1lbnRGaWx0ZXJzID0gZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXTtcbiAgICAgICAgbGV0IGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwOkZpdG1lbnRGaWx0ZXJNb2RlbDtcblxuICAgICAgICBmb3IgKGNvbnN0IGFwcGxpZWRGaXRtZW50RmlsdGVyIG9mIGZpdG1lbnRGaWx0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoYXBwbGllZEZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPT09IGZpdG1lbnRGaWx0ZXJHcm91cEtleSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwID0gYXBwbGllZEZpdG1lbnRGaWx0ZXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwKSB7XG4gICAgICAgICAgICBmaXRtZW50RmlsdGVyLkdyb3VwS2V5ID0gZml0bWVudEZpbHRlckdyb3VwS2V5O1xuICAgICAgICAgICAgZml0bWVudEZpbHRlcnMucHVzaChmaXRtZW50RmlsdGVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gV2UndmUgbW9kaWZpZWQgdGhlIGFycmF5IHNvIHVwZGF0ZSB0aGUgYXJyYXkgaW4gdGhlIGZpbHRlcnNcbiAgICAgICAgICAgIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgPSBmaXRtZW50RmlsdGVycztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdEhlbHBlci5hc3NpZ248Rml0bWVudEZpbHRlck1vZGVsPihleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCwgZml0bWVudEZpbHRlcik7XG4gICAgICAgICAgICBleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cC5Hcm91cEtleSA9IGZpdG1lbnRGaWx0ZXJHcm91cEtleTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJ2YXIgUmlkZVN0eWxlclNob3djYXNlO1xuKGZ1bmN0aW9uIChSaWRlU3R5bGVyU2hvd2Nhc2UpIHtcbiAgICB2YXIgZmlsdGVycztcbiAgICAoZnVuY3Rpb24gKGZpbHRlcnNfMSkge1xuICAgICAgICBjbGFzcyBGaWx0ZXJDb250cm9sbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycyA9IG5ldyBHbG9iYWxGaWx0ZXJQcm92aWRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMgPSBuZXcgVGlyZUZpbHRlclByb3ZpZGVyKHRoaXMuZ2xvYmFsRmlsdGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMgPSBuZXcgV2hlZWxGaWx0ZXJQcm92aWRlcih0aGlzLmdsb2JhbEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VmVoaWNsZSh2ZWhpY2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcnMoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlKHZlaGljbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMud2hlZWxGaWx0ZXJzLnNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyRmlsdGVycyh0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLkZpbHRlckNvbnRyb2xsZXIgPSBGaWx0ZXJDb250cm9sbGVyO1xuICAgICAgICBjbGFzcyBGaWx0ZXJQcm92aWRlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcih0eXBlLCBnbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgPSBnbG9iYWxGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJpZ2dlciB0aGUgZmlsdGVyIGNoYW5nZWQgY2FsbGJhY2tcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJpZ2dlckZpbHRlckNoYW5nZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25GaWx0ZXJzQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlcnNDaGFuZ2VkKHRoaXMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJucyBhIGZpbHRlciBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgZmlsdGVyIHZhbHVlcyBzZXQsXG4gICAgICAgICAgICAgKiB3aXRob3V0IGFjdHVhbGx5IHNldHRpbmcgdGhlbVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcmV2aWV3RmlsdGVycyhmaWx0ZXJWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxGaWx0ZXJzID0gKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6XG4gICAgICAgICAgICAgICAgICAgIHt9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUZpbHRlcnMgPSB0aGlzLmJhc2VGaWx0ZXJzO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyVmFsdWUgb2YgZmlsdGVyVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKGtleSwgdmFsdWUsIGZpbHRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuYmFzZUZpbHRlcnMsIGdsb2JhbEZpbHRlcnMsIGZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYXBwbGllZCBmaWx0ZXJzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRmlsdGVycyA9ICh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkgOlxuICAgICAgICAgICAgICAgICAgICB7fSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmJhc2VGaWx0ZXJzLCBnbG9iYWxGaWx0ZXJzLCB0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0cmlldmUgdGhlIG9wdGlvbnMgZm9yIGEgZmlsdGVyXG4gICAgICAgICAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zKGZpbHRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIucmV0cmlldmVPcHRpb25zKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IGEgZmlsdGVyIG9wdGlvbiwgb24gYSBzcGVjaWZpYyBmaWx0ZXIgbW9kZWxcbiAgICAgICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGZpbHRlciBrZXkgdG8gYXBwbHlcbiAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXBwbHkgdG8gdGhlIGZpbHRlclxuICAgICAgICAgICAgICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlcnMgdG8gYXBwbHkgdGhlbSB0b1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgZmlsdGVycyA9IHRoaXMuY3VycmVudEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSB0aGlzLmZpbmRGaWx0ZXJPcHRpb24oa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbi5hcHBseShmaWx0ZXJzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSBmaWx0ZXIgb3B0aW9uIGZvciB0aGUgc3BlY2lmaWVkIGtleVxuICAgICAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmaW5kRmlsdGVyT3B0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyIG9mIHRoaXMuZmlsdGVyT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRGaWx0ZXJzKHNlbGVjdGVkRmlsdGVyc09yS2V5LCB2YWx1ZSwgdHJpZ2dlckNoYW5nZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRGaWx0ZXJzO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWRGaWx0ZXJzT3JLZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBzZWxlY3RlZEZpbHRlcnNPcktleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzID0gc2VsZWN0ZWRGaWx0ZXJzT3JLZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEZpbHRlciBvZiBzZWxlY3RlZEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBzZWxlY3RlZEZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgbmV3RmlsdGVycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3RmlsdGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJWYWx1ZSA9IG5ld0ZpbHRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXJWYWx1ZSA9IHRoaXMuY3VycmVudEZpbHRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJWYWx1ZSAhPT0gY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyc1trZXldID0gbmV3RmlsdGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyQ2hhbmdlID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0NoYW5nZWQgJiYgdHJpZ2dlckNoYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhcih0cmlnZ2VyQ2hhbmdlID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLkZpbHRlclByb3ZpZGVyID0gRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGNvbnN0IHZlaGljbGVDb25maWdGaWx0ZXJLZXkgPSAndmVoaWNsZS1jb25maWcnO1xuICAgICAgICBjbGFzcyBHbG9iYWxGaWx0ZXJQcm92aWRlciBleHRlbmRzIEZpbHRlclByb3ZpZGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCdnbG9iYWwnLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIEhhc0ZpdG1lbnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlaGljbGVDb25maWd1cmF0aW9uICYgVmVoaWNsZVRpcmVPcHRpb25cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeyB2ZWhpY2xlQ29uZmlndXJhdGlvbklELCB2ZWhpY2xlVGlyZU9wdGlvbklEIH0gPSB2ZWhpY2xlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlQ29uZmlndXJhdGlvbklEKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlZlaGljbGVDb25maWd1cmF0aW9uID0gdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZVRpcmVPcHRpb25JRClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5WZWhpY2xlVGlyZU9wdGlvbiA9IHZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2dsb2JhbFdoZWVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZURlc2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuSGFzQW5nbGVkSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgKiBBcHBsaWVzIGEgdmVoaWNsZSBzZWxlY3Rpb24gdG8gYWxsXG4gICAgICAgICAgICAqIEBwYXJhbSB2ZWhpY2xlIFRoZSB2ZWhpY2xlIHRvIGFwcGx5IHRvIGZpbHRlciBxdWVyaWVzXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKCdnbG9iYWxXaGVlbCcsIHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRWZWhpY2xlKHZlaGljbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcih2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5LCB2ZWhpY2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdldENvdW50KCkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ2xsIG5ldmVyIGNhbGwgZ2V0Q291bnQgb24gdGhlIEdsb2JhbEZpbHRlck1vZGVsXG4gICAgICAgICAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjb3VudCBHbG9iYWxGaWx0ZXJNb2RlbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLkdsb2JhbEZpbHRlclByb3ZpZGVyID0gR2xvYmFsRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGNsYXNzIFRpcmVGaWx0ZXJQcm92aWRlciBleHRlbmRzIEZpbHRlclByb3ZpZGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoJ3RpcmUnLCBnbG9iYWxGaWx0ZXJQcm92aWRlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlRmlsdGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRGaXRtZW50UmVzb3VyY2VUeXBlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgMiAvKiBDYXRhbG9nICovXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnJhbmRcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWxsLWJyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1icmFuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgQnJhbmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd0aXJlL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQnJhbmRzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlQnJhbmROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5UaXJlQnJhbmRJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlRpcmVCcmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdGlyZUJyYW5kSUQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlRpcmVCcmFuZCA9IHRpcmVCcmFuZElEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBBdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2ZlYXR1cmVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYW55LWZlYXR1cmVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLW1vZGVsLWF0dHJpYnV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgndGlyZS9nZXRtb2RlbGF0dHJpYnV0ZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkF0dHJpYnV0ZXMsIGF0dHJpYnV0ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhdHRyaWJ1dGUuVGlyZU1vZGVsQXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXR0cmlidXRlLlRpcmVNb2RlbEF0dHJpYnV0ZUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuUmVxdWlyZWRUaXJlTW9kZWxBdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGF0dHJpYnV0ZUlEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5SZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSA9IGF0dHJpYnV0ZUlEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBTcGVlZCBSYXRpbmdcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc3BlZWQtcmF0aW5nJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYW55LXNwZWVkLXJhdGluZ3MnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtc3BlZWQtcmF0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBTcGVlZCBSYXRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd0aXJlL2dldHNwZWVkcmF0aW5ncycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuU3BlZWRSYXRpbmdzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlNwZWVkUmF0aW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBzcGVlZFJhdGluZ0lEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5TcGVlZFJhdGluZyA9IHNwZWVkUmF0aW5nSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0Q291bnQoZmlsdGVycykge1xuICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInRpcmUvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLkNvdW50O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbHRlcnNfMS5UaXJlRmlsdGVyUHJvdmlkZXIgPSBUaXJlRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGNsYXNzIFdoZWVsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHN1cGVyKCd3aGVlbCcsIGdsb2JhbEZpbHRlclByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC8vIEJyYW5kXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2JyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1icmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLWJyYW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBCcmFuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQnJhbmRzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5XaGVlbEJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuV2hlZWxCcmFuZElEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxCcmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgd2hlZWxCcmFuZElEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5XaGVlbEJyYW5kID0gd2hlZWxCcmFuZElEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5pc2hcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnZmluaXNoZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtZmluaXNoZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLWZpbmlzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZmluaXNoZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpbmlzaGVzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGZpbmlzaGVzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkZpbmlzaGVzLCBmaW5pc2hDYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaW5pc2hDYXRlZ29yeS5XaGVlbEZpbmlzaENhdGVnb3J5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmluaXNoQ2F0ZWdvcnkuV2hlZWxGaW5pc2hDYXRlZ29yeUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxGaW5pc2hDYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgd2hlZWxGaW5pc2hDYXRlZ29yeUlEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5XaGVlbEZpbmlzaENhdGVnb3J5ID0gd2hlZWxGaW5pc2hDYXRlZ29yeUlEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBEaWFtZXRlclxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzaXplcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1zaXplcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtc2l6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZGlhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRkaWFtZXRlcnMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgZGlhbWV0ZXJzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkRpYW1ldGVycywgZGlhbWV0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGlhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZ2V0Rml0bWVudEZpbHRlclZhbHVlKGZpbHRlcnMsICdEaWFtZXRlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBkaWFtZXRlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVycy5GaXRtZW50RmlsdGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5GaXRtZW50RmlsdGVycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYW1ldGVyOiBkaWFtZXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGVEZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuSGFzU2lkZUltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLkhhc0FuZ2xlZEltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoJ3doZWVsJywgdmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdldENvdW50KGZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLldoZWVsRmlsdGVyUHJvdmlkZXIgPSBXaGVlbEZpbHRlclByb3ZpZGVyO1xuICAgICAgICBmdW5jdGlvbiBnZXRGaXRtZW50RmlsdGVyVmFsdWUoZmlsdGVycywga2V5KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnRGaWx0ZXIgb2YgZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXSkge1xuICAgICAgICAgICAgICAgIGlmIChmaXRtZW50RmlsdGVyLkdyb3VwS2V5ID09PSBmaXRtZW50RmlsdGVyR3JvdXBLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpdG1lbnRGaWx0ZXJba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpdG1lbnRGaWx0ZXJHcm91cEtleSA9IFwicmlkZXN0eWxlci1zaG93Y2FzZS1maWx0ZXJzXCI7XG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzLCBmaXRtZW50RmlsdGVyKSB7XG4gICAgICAgICAgICBsZXQgZml0bWVudEZpbHRlcnMgPSBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzIHx8IFtdO1xuICAgICAgICAgICAgbGV0IGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhcHBsaWVkRml0bWVudEZpbHRlciBvZiBmaXRtZW50RmlsdGVycykge1xuICAgICAgICAgICAgICAgIGlmIChhcHBsaWVkRml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwID0gYXBwbGllZEZpdG1lbnRGaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBmaXRtZW50RmlsdGVyLkdyb3VwS2V5ID0gZml0bWVudEZpbHRlckdyb3VwS2V5O1xuICAgICAgICAgICAgICAgIGZpdG1lbnRGaWx0ZXJzLnB1c2goZml0bWVudEZpbHRlcik7XG4gICAgICAgICAgICAgICAgLy8gV2UndmUgbW9kaWZpZWQgdGhlIGFycmF5IHNvIHVwZGF0ZSB0aGUgYXJyYXkgaW4gdGhlIGZpbHRlcnNcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzID0gZml0bWVudEZpbHRlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbihleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCwgZml0bWVudEZpbHRlcik7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAuR3JvdXBLZXkgPSBmaXRtZW50RmlsdGVyR3JvdXBLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KShmaWx0ZXJzID0gUmlkZVN0eWxlclNob3djYXNlLmZpbHRlcnMgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzID0ge30pKTtcbn0pKFJpZGVTdHlsZXJTaG93Y2FzZSB8fCAoUmlkZVN0eWxlclNob3djYXNlID0ge30pKTtcbiJdfQ==

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var parameters;
    (function (parameters) {
        var keyValueStore = {};

        var RideStylerShowcaseParameters = function () {
            function RideStylerShowcaseParameters() {
                _classCallCheck(this, RideStylerShowcaseParameters);
            }

            _createClass(RideStylerShowcaseParameters, [{
                key: "get",
                value: function get() {
                    var currentUrl = decodeURIComponent(location.search.substr(1));
                    var splitUrl = [];
                    currentUrl.split("&").forEach(function (innerArray) {
                        splitUrl.push(innerArray.split("="));
                    });
                    keyValueStore = splitUrl.reduce(function (o, _ref) {
                        var _ref2 = _slicedToArray(_ref, 2),
                            k = _ref2[0],
                            v = _ref2[1];

                        return o[k] = v, o;
                    }, {});
                    history.pushState(keyValueStore, null, null);
                    return keyValueStore;
                }
            }, {
                key: "set",
                value: function set(stateData) {
                    var historyState = history.state;
                    var newData = Object.assign(historyState, stateData);
                    var vehicleFragments = {
                        VehicleConfiguration: stateData.currentVehicleConfigurationID,
                        TireOptionID: historyState.TireOptionID,
                        TireOptionString: historyState.TireOptionString,
                        TireModelID: !stateData.currentTire ? undefined : stateData.currentTire.TireModelID,
                        WheelModel: stateData.currentWheel == undefined ? historyState.WheelModel : stateData.currentWheel.WheelModelID,
                        WheelFitmentID: stateData.currentWheelFitment == undefined ? historyState.WheelFitmentID : stateData.currentWheelFitment.WheelFitmentID,
                        Suspension: stateData.currentSuspension !== historyState.Suspension && stateData.currentSuspension === 0 ? historyState.Suspension : stateData.currentSuspension,
                        PaintScheme: stateData.currentPaintScheme == undefined ? historyState.PaintScheme : stateData.currentPaintScheme.VehiclePaintSchemeID,
                        PaintName: stateData.currentPaintScheme == undefined ? historyState.PaintName : stateData.currentPaintScheme.SchemeName
                    };
                    vehicleFragments = JSON.parse(JSON.stringify(vehicleFragments));
                    var url = "?" + Object.keys(vehicleFragments).map(function (k) {
                        return encodeURIComponent(k) + '=' + encodeURIComponent(vehicleFragments[k]);
                    }).join('&');
                    history.pushState(newData, null, url);
                }
            }, {
                key: "popEventListener",
                value: function popEventListener(context) {
                    window.addEventListener('popstate', function (e) {
                        var historyState = e.state;
                        context.state.extendData(historyState);
                        context.activeWheelDiameterSelect();
                        context.viewport.Update({
                            VehicleConfiguration: historyState.currentVehicleConfigurationID,
                            VehicleTireOption: historyState.currentVehicleTireOptionID,
                            WheelFitment: !historyState.currentWheelFitment ? null : historyState.currentWheelFitment.WheelFitmentID,
                            Suspension: !historyState.currentSuspension ? null : historyState.currentSuspension,
                            PaintColor: !historyState.currentPaintScheme ? null : historyState.currentPaintScheme.Colors[0].Hex
                        });
                    });
                }
            }]);

            return RideStylerShowcaseParameters;
        }();

        parameters.RideStylerShowcaseParameters = RideStylerShowcaseParameters;
        ;
    })(parameters = RideStylerShowcase.parameters || (RideStylerShowcase.parameters = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5wYXJhbWV0ZXJzLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInBhcmFtZXRlcnMiLCJrZXlWYWx1ZVN0b3JlIiwiUmlkZVN0eWxlclNob3djYXNlUGFyYW1ldGVycyIsImN1cnJlbnRVcmwiLCJkZWNvZGVVUklDb21wb25lbnQiLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0ciIsInNwbGl0VXJsIiwic3BsaXQiLCJmb3JFYWNoIiwicHVzaCIsImlubmVyQXJyYXkiLCJyZWR1Y2UiLCJvIiwiayIsInYiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwic3RhdGVEYXRhIiwiaGlzdG9yeVN0YXRlIiwic3RhdGUiLCJuZXdEYXRhIiwiT2JqZWN0IiwiYXNzaWduIiwidmVoaWNsZUZyYWdtZW50cyIsIlZlaGljbGVDb25maWd1cmF0aW9uIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJUaXJlT3B0aW9uSUQiLCJUaXJlT3B0aW9uU3RyaW5nIiwiVGlyZU1vZGVsSUQiLCJjdXJyZW50VGlyZSIsInVuZGVmaW5lZCIsIldoZWVsTW9kZWwiLCJjdXJyZW50V2hlZWwiLCJXaGVlbE1vZGVsSUQiLCJXaGVlbEZpdG1lbnRJRCIsImN1cnJlbnRXaGVlbEZpdG1lbnQiLCJTdXNwZW5zaW9uIiwiY3VycmVudFN1c3BlbnNpb24iLCJQYWludFNjaGVtZSIsImN1cnJlbnRQYWludFNjaGVtZSIsIlZlaGljbGVQYWludFNjaGVtZUlEIiwiUGFpbnROYW1lIiwiU2NoZW1lTmFtZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInVybCIsImtleXMiLCJtYXAiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiY29udGV4dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZXh0ZW5kRGF0YSIsImFjdGl2ZVdoZWVsRGlhbWV0ZXJTZWxlY3QiLCJ2aWV3cG9ydCIsIlVwZGF0ZSIsIlZlaGljbGVUaXJlT3B0aW9uIiwiY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQiLCJXaGVlbEZpdG1lbnQiLCJQYWludENvbG9yIiwiQ29sb3JzIiwiSGV4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxVQUFBO0FBQUEsS0FBQSxVQUFBQSxVQUFBLEVBQVU7QUFDbkMsWUFBSUMsZ0JBQWdCLEVBQXBCOztBQURtQyxZQUduQ0MsNEJBSG1DO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxzQ0FJckI7QUFDUCx3QkFBSUMsYUFBYUMsbUJBQW1CQyxTQUFTQyxNQUFULENBQWdCQyxNQUFoQixDQUF1QixDQUF2QixDQUFuQixDQUFqQjtBQUNBLHdCQUFJQyxXQUFXLEVBQWY7QUFDQUwsK0JBQVdNLEtBQVgsQ0FBaUIsR0FBakIsRUFBc0JDLE9BQXRCLENBQThCLHNCQUFhO0FBQ3ZDRixpQ0FBU0csSUFBVCxDQUFjQyxXQUFXSCxLQUFYLENBQWlCLEdBQWpCLENBQWQ7QUFDSCxxQkFGRDtBQUlBUixvQ0FBZ0JPLFNBQVNLLE1BQVQsQ0FBZ0IsVUFBU0MsQ0FBVCxRQUFrQjtBQUFBO0FBQUEsNEJBQUxDLENBQUs7QUFBQSw0QkFBRkMsQ0FBRTs7QUFBRywrQkFBU0YsRUFBRUMsQ0FBRixJQUFLQyxDQUFMLEVBQVFGLENBQWpCO0FBQW9CLHFCQUF6RCxFQUEyRCxFQUEzRCxDQUFoQjtBQUVBRyw0QkFBUUMsU0FBUixDQUFrQmpCLGFBQWxCLEVBQWlDLElBQWpDLEVBQXVDLElBQXZDO0FBQ0EsMkJBQU9BLGFBQVA7QUFDRjtBQWY4QjtBQUFBO0FBQUEsb0NBaUJwQmtCLFNBakJvQixFQWlCWDtBQUNoQix3QkFBSUMsZUFBZUgsUUFBUUksS0FBM0I7QUFDQSx3QkFBSUMsVUFBVUMsT0FBT0MsTUFBUCxDQUFjSixZQUFkLEVBQTRCRCxTQUE1QixDQUFkO0FBRUEsd0JBQUlNLG1CQUFtQjtBQUNuQkMs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IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UucGFyYW1ldGVycyB7XHJcbiAgICB2YXIga2V5VmFsdWVTdG9yZSA9IHt9O1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYXJhbWV0ZXJzIHtcclxuICAgICAgICBwdWJsaWMgZ2V0KCkge1xyXG4gICAgICAgICAgIGxldCBjdXJyZW50VXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkpO1xyXG4gICAgICAgICAgIGxldCBzcGxpdFVybCA9IFtdO1xyXG4gICAgICAgICAgIGN1cnJlbnRVcmwuc3BsaXQoXCImXCIpLmZvckVhY2goaW5uZXJBcnJheSA9PiB7XHJcbiAgICAgICAgICAgICAgIHNwbGl0VXJsLnB1c2goaW5uZXJBcnJheS5zcGxpdChcIj1cIikpO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICBrZXlWYWx1ZVN0b3JlID0gc3BsaXRVcmwucmVkdWNlKGZ1bmN0aW9uKG8sIFtrLCB2XSkge3JldHVybiAgKG9ba109diwgbyl9LCB7fSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoa2V5VmFsdWVTdG9yZSwgbnVsbCwgbnVsbClcclxuICAgICAgICAgICByZXR1cm4ga2V5VmFsdWVTdG9yZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzZXQoc3RhdGVEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBoaXN0b3J5U3RhdGUgPSBoaXN0b3J5LnN0YXRlO1xyXG4gICAgICAgICAgICBsZXQgbmV3RGF0YSA9IE9iamVjdC5hc3NpZ24oaGlzdG9yeVN0YXRlLCBzdGF0ZURhdGEpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHZlaGljbGVGcmFnbWVudHMgPSB7XHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklELFxyXG4gICAgICAgICAgICAgICAgVGlyZU9wdGlvbklEOiBoaXN0b3J5U3RhdGUuVGlyZU9wdGlvbklELFxyXG4gICAgICAgICAgICAgICAgVGlyZU9wdGlvblN0cmluZzogaGlzdG9yeVN0YXRlLlRpcmVPcHRpb25TdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBUaXJlTW9kZWxJRDogIXN0YXRlRGF0YS5jdXJyZW50VGlyZSA/IHVuZGVmaW5lZCA6IHN0YXRlRGF0YS5jdXJyZW50VGlyZS5UaXJlTW9kZWxJRCxcclxuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgPT0gdW5kZWZpbmVkID8gaGlzdG9yeVN0YXRlLldoZWVsTW9kZWwgOiBzdGF0ZURhdGEuY3VycmVudFdoZWVsLldoZWVsTW9kZWxJRCxcclxuICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudElEOiBzdGF0ZURhdGEuY3VycmVudFdoZWVsRml0bWVudCA9PSB1bmRlZmluZWQgPyBoaXN0b3J5U3RhdGUuV2hlZWxGaXRtZW50SUQgOiBzdGF0ZURhdGEuY3VycmVudFdoZWVsRml0bWVudC5XaGVlbEZpdG1lbnRJRCxcclxuICAgICAgICAgICAgICAgIFN1c3BlbnNpb246ICAoc3RhdGVEYXRhLmN1cnJlbnRTdXNwZW5zaW9uICE9PSBoaXN0b3J5U3RhdGUuU3VzcGVuc2lvbiAmJiBzdGF0ZURhdGEuY3VycmVudFN1c3BlbnNpb24gPT09IDApID8gaGlzdG9yeVN0YXRlLlN1c3BlbnNpb24gOiBzdGF0ZURhdGEuY3VycmVudFN1c3BlbnNpb24sXHJcbiAgICAgICAgICAgICAgICBQYWludFNjaGVtZTogc3RhdGVEYXRhLmN1cnJlbnRQYWludFNjaGVtZSA9PSB1bmRlZmluZWQgPyBoaXN0b3J5U3RhdGUuUGFpbnRTY2hlbWUgOiBzdGF0ZURhdGEuY3VycmVudFBhaW50U2NoZW1lLlZlaGljbGVQYWludFNjaGVtZUlELFxyXG4gICAgICAgICAgICAgICAgUGFpbnROYW1lOiBzdGF0ZURhdGEuY3VycmVudFBhaW50U2NoZW1lID09IHVuZGVmaW5lZCA/IGhpc3RvcnlTdGF0ZS5QYWludE5hbWUgOiBzdGF0ZURhdGEuY3VycmVudFBhaW50U2NoZW1lLlNjaGVtZU5hbWUsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZlaGljbGVGcmFnbWVudHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZlaGljbGVGcmFnbWVudHMpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB1cmwgPSBcIj9cIiArIE9iamVjdC5rZXlzKHZlaGljbGVGcmFnbWVudHMpLm1hcChmdW5jdGlvbihrKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGspICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZlaGljbGVGcmFnbWVudHNba10pXHJcbiAgICAgICAgICAgIH0pLmpvaW4oJyYnKTtcclxuXHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG5ld0RhdGEsIG51bGwsIHVybCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIHBvcEV2ZW50TGlzdGVuZXIoY29udGV4dCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGlzdG9yeVN0YXRlID0gZS5zdGF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0YXRlLmV4dGVuZERhdGEoaGlzdG9yeVN0YXRlKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuYWN0aXZlV2hlZWxEaWFtZXRlclNlbGVjdCgpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC52aWV3cG9ydC5VcGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiBoaXN0b3J5U3RhdGUuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZVRpcmVPcHRpb246IGhpc3RvcnlTdGF0ZS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCxcclxuICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6ICFoaXN0b3J5U3RhdGUuY3VycmVudFdoZWVsRml0bWVudCA/IG51bGwgOiBoaXN0b3J5U3RhdGUuY3VycmVudFdoZWVsRml0bWVudC5XaGVlbEZpdG1lbnRJRCxcclxuICAgICAgICAgICAgICAgICAgICBTdXNwZW5zaW9uOiAhaGlzdG9yeVN0YXRlLmN1cnJlbnRTdXNwZW5zaW9uPyBudWxsIDogaGlzdG9yeVN0YXRlLmN1cnJlbnRTdXNwZW5zaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIFBhaW50Q29sb3I6ICFoaXN0b3J5U3RhdGUuY3VycmVudFBhaW50U2NoZW1lID8gbnVsbCA6IGhpc3RvcnlTdGF0ZS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCxcclxuICAgICAgICAgICAgICAgIH0pOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTsgIFxyXG4gICAgfTtcclxufTtcclxuIl19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var States = void 0;
    (function (States) {
        States[States["ChooseVehicle"] = 0] = "ChooseVehicle";
        States[States["Visualize"] = 1] = "Visualize";
    })(States = RideStylerShowcase.States || (RideStylerShowcase.States = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
(function (RideStylerShowcase) {
    var state;
    (function (state_1) {
        /**
         * A register holding the exit/enter callbacks for a specific state
         */
        var StateCallbackRegister = function () {
            function StateCallbackRegister(state) {
                _classCallCheck(this, StateCallbackRegister);

                this.state = state;
                this.exitCallbacks = [];
                this.enterCallbacks = [];
            }
            /**
             * Trigger all of the exit callbacks for this state. If a callback returns false,
             * skip triggering the remaining callbacks and return false;
             */


            _createClass(StateCallbackRegister, [{
                key: "triggerExitCallbacks",
                value: function triggerExitCallbacks(currentState, newState, newData) {
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = this.exitCallbacks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var exitCallback = _step.value;

                            if (exitCallback(currentState, newState, newData) === false) return false;
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    return true;
                }
                /**
                 * Trigger all of the enter callbacks for this state. If a callback returns false,
                 * skip triggering the remaining callbacks and return false;
                 */

            }, {
                key: "triggerEnterCallbacks",
                value: function triggerEnterCallbacks(oldState, currentState, newData) {
                    var _iteratorNormalCompletion2 = true;
                    var _didIteratorError2 = false;
                    var _iteratorError2 = undefined;

                    try {
                        for (var _iterator2 = this.enterCallbacks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                            var enterCallback = _step2.value;

                            if (enterCallback(oldState, currentState, newData) === false) return false;
                        }
                    } catch (err) {
                        _didIteratorError2 = true;
                        _iteratorError2 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                _iterator2.return();
                            }
                        } finally {
                            if (_didIteratorError2) {
                                throw _iteratorError2;
                            }
                        }
                    }

                    return true;
                }
            }]);

            return StateCallbackRegister;
        }();

        var RideStylerShowcaseState = function () {
            function RideStylerShowcaseState(initialState) {
                _classCallCheck(this, RideStylerShowcaseState);

                this.currentData = {
                    currentVehicleConfigurationID: undefined,
                    currentVehicleDescription: undefined,
                    vehicleHasAngledImage: undefined,
                    vehicleHasSideImage: undefined,
                    currentVehicleTireOptionDescription: undefined,
                    currentVehicleTireOptionID: undefined,
                    currentPaintScheme: undefined,
                    currentTire: undefined,
                    currentWheel: undefined,
                    currentWheelFitment: undefined,
                    currentTireOption: undefined,
                    currentVehicleDescriptionModel: undefined,
                    currentSuspension: undefined
                };
                /**
                 * A dictionary of States to StateCallbackRegisters
                 */
                this.callbacks = {};
                /**
                 * State changed callbacks
                 */
                this.changeCallbacks = [];
                /**
                 * Data changed callbacks
                 */
                this.dataChangedCallbacks = [];
                this.currentState = initialState;
            }

            _createClass(RideStylerShowcaseState, [{
                key: "getData",
                value: function getData() {
                    return this.currentData;
                }
            }, {
                key: "setData",
                value: function setData(newData) {
                    var beforeCallbacks = [],
                        afterCallbacks = [];
                    var _iteratorNormalCompletion3 = true;
                    var _didIteratorError3 = false;
                    var _iteratorError3 = undefined;

                    try {
                        for (var _iterator3 = this.dataChangedCallbacks[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                            var dataChangedCallback = _step3.value;
                            var callback = dataChangedCallback.callback,
                                before = dataChangedCallback.before;

                            if (before) beforeCallbacks.push(callback);else afterCallbacks.push(callback);
                        }
                    } catch (err) {
                        _didIteratorError3 = true;
                        _iteratorError3 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                _iterator3.return();
                            }
                        } finally {
                            if (_didIteratorError3) {
                                throw _iteratorError3;
                            }
                        }
                    }

                    var _iteratorNormalCompletion4 = true;
                    var _didIteratorError4 = false;
                    var _iteratorError4 = undefined;

                    try {
                        for (var _iterator4 = beforeCallbacks[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                            var callback = _step4.value;

                            callback(newData);
                        }
                    } catch (err) {
                        _didIteratorError4 = true;
                        _iteratorError4 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion4 && _iterator4.return) {
                                _iterator4.return();
                            }
                        } finally {
                            if (_didIteratorError4) {
                                throw _iteratorError4;
                            }
                        }
                    }

                    this.currentData = newData;
                    var _iteratorNormalCompletion5 = true;
                    var _didIteratorError5 = false;
                    var _iteratorError5 = undefined;

                    try {
                        for (var _iterator5 = afterCallbacks[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                            var _callback = _step5.value;

                            _callback(this.currentData);
                        }
                    } catch (err) {
                        _didIteratorError5 = true;
                        _iteratorError5 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion5 && _iterator5.return) {
                                _iterator5.return();
                            }
                        } finally {
                            if (_didIteratorError5) {
                                throw _iteratorError5;
                            }
                        }
                    }
                }
            }, {
                key: "extendData",
                value: function extendData(dataExtension) {
                    var hasChanged = false;
                    var newData = {};
                    var currentData = this.currentData;
                    for (var key in currentData) {
                        if (currentData.hasOwnProperty(key)) {
                            var currentValue = currentData[key];
                            var newValue = dataExtension[key];
                            if (key in dataExtension && currentValue !== newValue) {
                                hasChanged = true;
                                newData[key] = newValue;
                            } else {
                                newData[key] = currentValue;
                            }
                        }
                    }
                    if (hasChanged) {
                        this.setData(newData);
                    }
                    return this.currentData;
                }
                /**
                 * Returns an exiting callback register for the specified state or creates
                 * a new one
                 * @param state The state to return a callback register for
                 */

            }, {
                key: "callbacksForState",
                value: function callbacksForState(state) {
                    if (state in this.callbacks) return this.callbacks[state];
                    return this.callbacks[state] = new StateCallbackRegister(state);
                }
                /**
                 * Register a callback that is triggered when exiting a specific state
                 * @param state The state to register a exit callback for
                 * @param callback The callback to execute when exiting the state
                 */

            }, {
                key: "onExit",
                value: function onExit(state, callback) {
                    this.callbacksForState(state).exitCallbacks.push(callback);
                }
                /**
                 * Register a callback that is triggered when entering a specific state
                 * @param state The state to register an enter callback for
                 * @param callback The callback to execute when entering the state
                 */

            }, {
                key: "onEnter",
                value: function onEnter(state, callback) {
                    this.callbacksForState(state).enterCallbacks.push(callback);
                }
                /**
                 * Register a function to call when the state has been changed
                 * @param callback The callback to run
                 */

            }, {
                key: "onChange",
                value: function onChange(callback) {
                    this.changeCallbacks.push(callback);
                }
                /**
                 * Register a function to be called before the state data has been changed.
                 * This allows callback functions to modify the data before it's sent to other callbacks.
                 * @param callback The callback to run
                 */

            }, {
                key: "beforeDataChange",
                value: function beforeDataChange(callback) {
                    this.dataChangedCallbacks.push({
                        callback: callback,
                        before: true
                    });
                }
                /**
                 * Register a function to be called after the state data has changed
                 * @param callback The callback to run
                 */

            }, {
                key: "afterDataChange",
                value: function afterDataChange(callback) {
                    this.dataChangedCallbacks.push({
                        callback: callback,
                        before: false
                    });
                }
            }, {
                key: "changeState",
                value: function changeState(newState, newData) {
                    if (this.currentState === newState) return;
                    var previousState = this.currentState;
                    // Set our state data
                    if (newData) this.setData(newData);
                    var stateChangedEvent = {
                        oldState: previousState,
                        newState: newState,
                        newData: this.currentData
                    };
                    if (typeof this.debugCallback === 'function') this.debugCallback(stateChangedEvent, false);
                    // Trigger the state-changed event, cancel state change if cancelled
                    var _iteratorNormalCompletion6 = true;
                    var _didIteratorError6 = false;
                    var _iteratorError6 = undefined;

                    try {
                        for (var _iterator6 = this.changeCallbacks[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
                            var callback = _step6.value;

                            if (!callback(stateChangedEvent)) return;
                        }
                        // Trigger exit callbacks
                    } catch (err) {
                        _didIteratorError6 = true;
                        _iteratorError6 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion6 && _iterator6.return) {
                                _iterator6.return();
                            }
                        } finally {
                            if (_didIteratorError6) {
                                throw _iteratorError6;
                            }
                        }
                    }

                    if (this.callbacksForState(previousState).triggerExitCallbacks(previousState, newState, this.currentData) === false) {
                        // One of the exit callbacks canceled the state change
                        return;
                    }
                    // Trigger enter callbacks
                    if (this.callbacksForState(newState).triggerEnterCallbacks(previousState, newState, this.currentData) === false) {
                        // One of the enter callbacks canceled the state change
                        return;
                    }
                    if (typeof this.debugCallback === 'function') this.debugCallback(stateChangedEvent, true);
                    // All of the callbacks have been ran, change the state
                    this.currentState = newState;
                }
            }]);

            return RideStylerShowcaseState;
        }();

        state_1.RideStylerShowcaseState = RideStylerShowcaseState;
    })(state = RideStylerShowcase.state || (RideStylerShowcase.state = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdGF0ZS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJTdGF0ZXMiLCJzdGF0ZSIsInN0YXRlXzEiLCJTdGF0ZUNhbGxiYWNrUmVnaXN0ZXIiLCJleGl0Q2FsbGJhY2tzIiwiZW50ZXJDYWxsYmFja3MiLCJjdXJyZW50U3RhdGUiLCJuZXdTdGF0ZSIsIm5ld0RhdGEiLCJleGl0Q2FsbGJhY2siLCJvbGRTdGF0ZSIsImVudGVyQ2FsbGJhY2siLCJSaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZSIsImluaXRpYWxTdGF0ZSIsImN1cnJlbnREYXRhIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ1bmRlZmluZWQiLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uIiwidmVoaWNsZUhhc0FuZ2xlZEltYWdlIiwidmVoaWNsZUhhc1NpZGVJbWFnZSIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQiLCJjdXJyZW50UGFpbnRTY2hlbWUiLCJjdXJyZW50VGlyZSIsImN1cnJlbnRXaGVlbCIsImN1cnJlbnRXaGVlbEZpdG1lbnQiLCJjdXJyZW50VGlyZU9wdGlvbiIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCIsImN1cnJlbnRTdXNwZW5zaW9uIiwiY2FsbGJhY2tzIiwiY2hhbmdlQ2FsbGJhY2tzIiwiZGF0YUNoYW5nZWRDYWxsYmFja3MiLCJiZWZvcmVDYWxsYmFja3MiLCJhZnRlckNhbGxiYWNrcyIsImRhdGFDaGFuZ2VkQ2FsbGJhY2siLCJjYWxsYmFjayIsImJlZm9yZSIsInB1c2giLCJkYXRhRXh0ZW5zaW9uIiwiaGFzQ2hhbmdlZCIsImtleSIsImhhc093blByb3BlcnR5IiwiY3VycmVudFZhbHVlIiwibmV3VmFsdWUiLCJzZXREYXRhIiwiY2FsbGJhY2tzRm9yU3RhdGUiLCJwcmV2aW91c1N0YXRlIiwic3RhdGVDaGFuZ2VkRXZlbnQiLCJkZWJ1Z0NhbGxiYWNrIiwidHJpZ2dlckV4aXRDYWxsYmFja3MiLCJ0cmlnZ2VyRW50ZXJDYWxsYmFja3MiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBWUMsZUFBWjtBQUFBLEtBQUEsVUFBWUEsTUFBWixFQUFrQjtBQUNkQSxlQUFBQSxPQUFBLGVBQUEsSUFBQSxDQUFBLElBQUEsZUFBQTtBQUNBQSxlQUFBQSxPQUFBLFdBQUEsSUFBQSxDQUFBLElBQUEsV0FBQTtBQUNILEtBSEQsRUFBWUEsU0FBQUQsbUJBQUFDLE1BQUEsS0FBQUQsbUJBQUFDLE1BQUEsR0FBTSxFQUFOLENBQVo7QUFJSCxDQUxELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBVjtBQU9BLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBRSxLQUFBO0FBQUEsS0FBQSxVQUFBQyxPQUFBLEVBQUs7QUF5RDlCOzs7QUF6RDhCLFlBNEQ5QkMscUJBNUQ4QjtBQWlFMUIsMkNBQVlGLEtBQVosRUFBd0I7QUFBQTs7QUFDcEIscUJBQUtBLEtBQUwsR0FBYUEsS0FBYjtBQUNBLHFCQUFLRyxhQUFMLEdBQXFCLEVBQXJCO0FBQ0EscUJBQUtDLGNBQUwsR0FBc0IsRUFBdEI7QUFDSDtBQUVEOzs7Ozs7QUF2RTBCO0FBQUE7QUFBQSxxREEyRUxDLFlBM0VLLEVBMkVnQkMsUUEzRWhCLEVBMkVpQ0MsT0EzRWpDLEVBMkVrRDtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUN4RSw2Q0FBeUIsS0FBS0osYUFBOUIsOEhBQTZDO0FBQUEsZ0NBQXBDSyxZQUFvQzs7QUFDekMsZ0NBQUlBLGFBQWFILFlBQWIsRUFBMkJDLFFBQTNCLEVBQXFDQyxPQUFyQyxNQUFrRCxLQUF0RCxFQUNJLE9BQU8sS0FBUDtBQUNQO0FBSnVFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFzQjNDLHdCQUFJLEtBQUtGLGlCQUFMLENBQXVCQyxhQUF2QixFQUFzQ0csb0JBQXRDLENBQTJESCxhQUEzRCxFQUEwRXZDLFFBQTFFLEVBQW9GLEtBQUtPLFdBQXpGLE1BQTBHLEtBQTlHLEVBQXFIO0FBQ2pIO0FBQ0E7QUFDSDtBQUVEO0FBQ0Esd0JBQUksS0FBSytCLGlCQUFMLENBQXVCdEMsUUFBdkIsRUFBaUMyQyxxQkFBakMsQ0FBdURKLGFBQXZELEVBQXNFdkMsUUFBdEUsRUFBZ0YsS0FBS08sV0FBckYsTUFBc0csS0FBMUcsRUFBaUg7QUFDN0c7QUFDQTtBQUNIO0FBRUQsd0JBQUksT0FBTyxLQUFLa0MsYUFBWixLQUE4QixVQUFsQyxFQUE4QyxLQUFLQSxhQUFMLENBQW1CRCxpQkFBbkIsRUFBc0MsSUFBdEM7QUFFOUM7QUFDQSx5QkFBS3pDLFlBQUwsR0FBb0JDLFFBQXBCO0FBQ0g7QUFuVHlCOztBQUFBO0FBQUE7O0FBMEhqQkwsZ0JBQUFVLHVCQUFBLEdBQXVCQSx1QkFBdkI7QUE2TGhCLEtBdlQ0QixFQUFBWCxRQUFBRixtQkFBQUUsS0FBQSxLQUFBRixtQkFBQUUsS0FBQSxHQUFLLEVBQUwsQ0FBQTtBQXVUNUIsQ0F2VEQsRUFBVUYsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnN0YXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IGVudW0gU3RhdGVzIHtcbiAgICAgICAgQ2hvb3NlVmVoaWNsZSA9IDAsXG4gICAgICAgIFZpc3VhbGl6ZSA9IDFcbiAgICB9XG59XG5cbm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RhdGUge1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVDaGFuZ2VkRXZlbnQge1xuICAgICAgICBvbGRTdGF0ZTogU3RhdGVzO1xuICAgICAgICBuZXdTdGF0ZTogU3RhdGVzO1xuICAgICAgICBuZXdEYXRhOiBTdGF0ZURhdGFcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlQ2hhbmdlZENhbGxiYWNrIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBldmVudCAgVGhlIHN0YXRlIGNoYW5nZWQgZXZlbnRcbiAgICAgICAgICogQHJldHVybiAgICAgICBJZiByZXR1cm5pbmcgZmFsc2UsIGNhbmNlbCB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAqL1xuICAgICAgICAoZXZlbnQ6U3RhdGVDaGFuZ2VkRXZlbnQpOiBib29sZWFuO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVDaGFuZ2VkQ2FsbGJhY2sge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGV2ZW50ICBUaGUgc3RhdGUgY2hhbmdlZCBldmVudFxuICAgICAgICAgKiBAcmV0dXJuICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIChldmVudDpTdGF0ZUNoYW5nZWRFdmVudCk6IGJvb2xlYW47XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBEZWJ1Z1N0YXRlQ2FsbGJhY2sge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGV2ZW50ICAgIFRoZSBzdGF0ZSBjaGFuZ2VkIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSBmaW5pc2hlZCBJZiBmYWxzZSwgdGhlIHN0YXRlIGNoYW5nZSBpcyBiZWdpbm5pbmcsIG90aGVyd2lzZSB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAqICAgICAgICAgICAgICAgICBoYXMgZmluaXNoZWRcbiAgICAgICAgICovXG4gICAgICAgIChldmVudDpTdGF0ZUNoYW5nZWRFdmVudCwgZmluaXNoZWQ6Ym9vbGVhbik6IHZvaWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUV4aXRDYWxsYmFjayB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gY3VycmVudFN0YXRlICBUaGUgc3RhdGUgYmVpbmcgY2hhbmdlZCBmcm9tXG4gICAgICAgICAqIEBwYXJhbSBuZXdTdGF0ZSAgICAgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIHRvXG4gICAgICAgICAqIEByZXR1cm4gICAgICAgICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIChjdXJyZW50U3RhdGU6U3RhdGVzLCBuZXdTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKTogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlRW50ZXJDYWxsYmFjayB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gb2xkU3RhdGUgICAgICBUaGUgc3RhdGUgYmVpbmcgY2hhbmdlZCBmcm9tXG4gICAgICAgICAqIEBwYXJhbSBjdXJyZW50U3RhdGUgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIHRvXG4gICAgICAgICAqIEByZXR1cm4gICAgICAgICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIChvbGRTdGF0ZTpTdGF0ZXMsIGN1cnJlbnRTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKTogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlRGF0YUNoYW5nZWRDYWxsYmFjayB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbmV3RGF0YSBUaGUgbmV3IHN0YXRlIGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIChuZXdEYXRhOlN0YXRlRGF0YSk6IHZvaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSByZWdpc3RlciBob2xkaW5nIHRoZSBleGl0L2VudGVyIGNhbGxiYWNrcyBmb3IgYSBzcGVjaWZpYyBzdGF0ZVxuICAgICAqL1xuICAgIGNsYXNzIFN0YXRlQ2FsbGJhY2tSZWdpc3RlciB7XG4gICAgICAgIHN0YXRlOlN0YXRlcztcbiAgICAgICAgZXhpdENhbGxiYWNrczogU3RhdGVFeGl0Q2FsbGJhY2tbXTtcbiAgICAgICAgZW50ZXJDYWxsYmFja3M6IFN0YXRlRW50ZXJDYWxsYmFja1tdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXRlOlN0YXRlcykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgdGhpcy5leGl0Q2FsbGJhY2tzID0gW107XG4gICAgICAgICAgICB0aGlzLmVudGVyQ2FsbGJhY2tzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciBhbGwgb2YgdGhlIGV4aXQgY2FsbGJhY2tzIGZvciB0aGlzIHN0YXRlLiBJZiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2UsXG4gICAgICAgICAqIHNraXAgdHJpZ2dlcmluZyB0aGUgcmVtYWluaW5nIGNhbGxiYWNrcyBhbmQgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgKi9cbiAgICAgICAgdHJpZ2dlckV4aXRDYWxsYmFja3MoY3VycmVudFN0YXRlOlN0YXRlcywgbmV3U3RhdGU6U3RhdGVzLCBuZXdEYXRhOlN0YXRlRGF0YSkgOiBib29sZWFuIHtcbiAgICAgICAgICAgIGZvciAobGV0IGV4aXRDYWxsYmFjayBvZiB0aGlzLmV4aXRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhpdENhbGxiYWNrKGN1cnJlbnRTdGF0ZSwgbmV3U3RhdGUsIG5ld0RhdGEpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXIgYWxsIG9mIHRoZSBlbnRlciBjYWxsYmFja3MgZm9yIHRoaXMgc3RhdGUuIElmIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZSxcbiAgICAgICAgICogc2tpcCB0cmlnZ2VyaW5nIHRoZSByZW1haW5pbmcgY2FsbGJhY2tzIGFuZCByZXR1cm4gZmFsc2U7XG4gICAgICAgICAqL1xuICAgICAgICB0cmlnZ2VyRW50ZXJDYWxsYmFja3Mob2xkU3RhdGU6U3RhdGVzLCBjdXJyZW50U3RhdGU6U3RhdGVzLCBuZXdEYXRhOlN0YXRlRGF0YSkgOiBib29sZWFuIHtcbiAgICAgICAgICAgIGZvciAobGV0IGVudGVyQ2FsbGJhY2sgb2YgdGhpcy5lbnRlckNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIGlmIChlbnRlckNhbGxiYWNrKG9sZFN0YXRlLCBjdXJyZW50U3RhdGUsIG5ld0RhdGEpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVEYXRhIHtcbiAgICAgICAgY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ6IHN0cmluZztcbiAgICAgICAgY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVEZXNjcmlwdGlvbk1vZGVsO1xuXG4gICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEOiBzdHJpbmc7XG4gICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgICAgICAgdmVoaWNsZUhhc1NpZGVJbWFnZTogYm9vbGVhbjtcbiAgICAgICAgdmVoaWNsZUhhc0FuZ2xlZEltYWdlOiBib29sZWFuO1xuXG4gICAgICAgIGN1cnJlbnRQYWludFNjaGVtZTogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgY3VycmVudFdoZWVsOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgY3VycmVudFdoZWVsRml0bWVudDogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgY3VycmVudFRpcmU6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWw7XG4gICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uTW9kZWw7XG4gICAgICAgIFxuICAgICAgICBjdXJyZW50U3VzcGVuc2lvbjogbnVtYmVyO1xuICAgIH1cblxuICAgIGV4cG9ydCB0eXBlIFBhcnRpYWxTdGF0ZURhdGEgPSB7XG4gICAgICAgIFtQIGluIGtleW9mIFN0YXRlRGF0YV0/OiBTdGF0ZURhdGFbUF07XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY3VycmVudFN0YXRlOlN0YXRlcztcblxuICAgICAgICBjb25zdHJ1Y3RvciAoaW5pdGlhbFN0YXRlOlN0YXRlcykge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBpbml0aWFsU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGN1cnJlbnREYXRhOlN0YXRlRGF0YSA9IHtcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2ZWhpY2xlSGFzQW5nbGVkSW1hZ2U6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY3VycmVudFBhaW50U2NoZW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50VGlyZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY3VycmVudFdoZWVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50U3VzcGVuc2lvbjogdW5kZWZpbmVkXG4gICAgICAgIH07XG5cbiAgICAgICAgcHVibGljIGdldERhdGEoKSB7IHJldHVybiB0aGlzLmN1cnJlbnREYXRhOyB9XG5cbiAgICAgICAgcHVibGljIHNldERhdGEobmV3RGF0YTpTdGF0ZURhdGEpIHtcbiAgICAgICAgICAgIGxldCBiZWZvcmVDYWxsYmFja3M6U3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrW10gPSBbXSxcbiAgICAgICAgICAgICAgICBhZnRlckNhbGxiYWNrczpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2tbXSA9IFtdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGxldCBkYXRhQ2hhbmdlZENhbGxiYWNrIG9mIHRoaXMuZGF0YUNoYW5nZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICBsZXQge2NhbGxiYWNrLCBiZWZvcmV9ID0gZGF0YUNoYW5nZWRDYWxsYmFjaztcblxuICAgICAgICAgICAgICAgIGlmIChiZWZvcmUpIGJlZm9yZUNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBlbHNlIGFmdGVyQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBiZWZvcmVDYWxsYmFja3MpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3RGF0YSk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEgPSBuZXdEYXRhO1xuICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIGFmdGVyQ2FsbGJhY2tzKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuY3VycmVudERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHB1YmxpYyBleHRlbmREYXRhKGRhdGFFeHRlbnNpb246UGFydGlhbFN0YXRlRGF0YSk6IFN0YXRlRGF0YSB7XG4gICAgICAgICAgICBsZXQgaGFzQ2hhbmdlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IG5ld0RhdGE6IFBhcnRpYWxTdGF0ZURhdGEgPSB7fTsgXG4gICAgICAgICAgICBsZXQgY3VycmVudERhdGE6IFN0YXRlRGF0YSA9IHRoaXMuY3VycmVudERhdGE7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBjdXJyZW50RGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBjdXJyZW50RGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBkYXRhRXh0ZW5zaW9uW2tleV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIGRhdGFFeHRlbnNpb24gJiYgY3VycmVudFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhW2tleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGFba2V5XSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERhdGEobmV3RGF0YSBhcyBTdGF0ZURhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGRpY3Rpb25hcnkgb2YgU3RhdGVzIHRvIFN0YXRlQ2FsbGJhY2tSZWdpc3RlcnNcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgY2FsbGJhY2tzOiB7W3N0YXRlOiBudW1iZXJdOiBTdGF0ZUNhbGxiYWNrUmVnaXN0ZXJ9ID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXRlIGNoYW5nZWQgY2FsbGJhY2tzXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGNoYW5nZUNhbGxiYWNrczpTdGF0ZUNoYW5nZWRDYWxsYmFja1tdID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERhdGEgY2hhbmdlZCBjYWxsYmFja3NcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgZGF0YUNoYW5nZWRDYWxsYmFja3M6e2NhbGxiYWNrOlN0YXRlRGF0YUNoYW5nZWRDYWxsYmFjaywgYmVmb3JlOmJvb2xlYW59W10gPSBbXTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYW4gZXhpdGluZyBjYWxsYmFjayByZWdpc3RlciBmb3IgdGhlIHNwZWNpZmllZCBzdGF0ZSBvciBjcmVhdGVzXG4gICAgICAgICAqIGEgbmV3IG9uZVxuICAgICAgICAgKiBAcGFyYW0gc3RhdGUgVGhlIHN0YXRlIHRvIHJldHVybiBhIGNhbGxiYWNrIHJlZ2lzdGVyIGZvclxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjYWxsYmFja3NGb3JTdGF0ZShzdGF0ZTogU3RhdGVzKTpTdGF0ZUNhbGxiYWNrUmVnaXN0ZXJcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHN0YXRlIGluIHRoaXMuY2FsbGJhY2tzKSByZXR1cm4gdGhpcy5jYWxsYmFja3Nbc3RhdGVdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzW3N0YXRlXSA9IG5ldyBTdGF0ZUNhbGxiYWNrUmVnaXN0ZXIoc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgdGhhdCBpcyB0cmlnZ2VyZWQgd2hlbiBleGl0aW5nIGEgc3BlY2lmaWMgc3RhdGVcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byByZWdpc3RlciBhIGV4aXQgY2FsbGJhY2sgZm9yXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIGV4aXRpbmcgdGhlIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBvbkV4aXQgKHN0YXRlOlN0YXRlcywgY2FsbGJhY2s6U3RhdGVFeGl0Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzRm9yU3RhdGUoc3RhdGUpLmV4aXRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayB0aGF0IGlzIHRyaWdnZXJlZCB3aGVuIGVudGVyaW5nIGEgc3BlY2lmaWMgc3RhdGVcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byByZWdpc3RlciBhbiBlbnRlciBjYWxsYmFjayBmb3JcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlIHdoZW4gZW50ZXJpbmcgdGhlIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBvbkVudGVyKHN0YXRlOlN0YXRlcywgY2FsbGJhY2s6U3RhdGVFbnRlckNhbGxiYWNrKSAge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NGb3JTdGF0ZShzdGF0ZSkuZW50ZXJDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHN0YXRlIGhhcyBiZWVuIGNoYW5nZWRcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW5cbiAgICAgICAgICovXG4gICAgICAgIG9uQ2hhbmdlKGNhbGxiYWNrOlN0YXRlQ2hhbmdlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBiZWZvcmUgdGhlIHN0YXRlIGRhdGEgaGFzIGJlZW4gY2hhbmdlZC5cbiAgICAgICAgICogVGhpcyBhbGxvd3MgY2FsbGJhY2sgZnVuY3Rpb25zIHRvIG1vZGlmeSB0aGUgZGF0YSBiZWZvcmUgaXQncyBzZW50IHRvIG90aGVyIGNhbGxiYWNrcy5cbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW5cbiAgICAgICAgICovXG4gICAgICAgIGJlZm9yZURhdGFDaGFuZ2UoY2FsbGJhY2s6U3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFuZ2VkQ2FsbGJhY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICBiZWZvcmU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFmdGVyIHRoZSBzdGF0ZSBkYXRhIGhhcyBjaGFuZ2VkXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gcnVuXG4gICAgICAgICAqL1xuICAgICAgICBhZnRlckRhdGFDaGFuZ2UoY2FsbGJhY2s6U3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFuZ2VkQ2FsbGJhY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYW5nZVN0YXRlKG5ld1N0YXRlOlN0YXRlcywgbmV3RGF0YT86U3RhdGVEYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RhdGUgPT09IG5ld1N0YXRlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGxldCBwcmV2aW91c1N0YXRlID0gdGhpcy5jdXJyZW50U3RhdGU7XG5cbiAgICAgICAgICAgIC8vIFNldCBvdXIgc3RhdGUgZGF0YVxuICAgICAgICAgICAgaWYgKG5ld0RhdGEpIHRoaXMuc2V0RGF0YShuZXdEYXRhKTtcblxuICAgICAgICAgICAgdmFyIHN0YXRlQ2hhbmdlZEV2ZW50OlN0YXRlQ2hhbmdlZEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIG9sZFN0YXRlOiBwcmV2aW91c1N0YXRlLFxuICAgICAgICAgICAgICAgIG5ld1N0YXRlOiBuZXdTdGF0ZSxcbiAgICAgICAgICAgICAgICBuZXdEYXRhOiB0aGlzLmN1cnJlbnREYXRhXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWdDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5kZWJ1Z0NhbGxiYWNrKHN0YXRlQ2hhbmdlZEV2ZW50LCBmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHN0YXRlLWNoYW5nZWQgZXZlbnQsIGNhbmNlbCBzdGF0ZSBjaGFuZ2UgaWYgY2FuY2VsbGVkXG4gICAgICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiB0aGlzLmNoYW5nZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2soc3RhdGVDaGFuZ2VkRXZlbnQpKSByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgZXhpdCBjYWxsYmFja3NcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbGxiYWNrc0ZvclN0YXRlKHByZXZpb3VzU3RhdGUpLnRyaWdnZXJFeGl0Q2FsbGJhY2tzKHByZXZpb3VzU3RhdGUsIG5ld1N0YXRlLCB0aGlzLmN1cnJlbnREYXRhKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmUgb2YgdGhlIGV4aXQgY2FsbGJhY2tzIGNhbmNlbGVkIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgZW50ZXIgY2FsbGJhY2tzXG4gICAgICAgICAgICBpZiAodGhpcy5jYWxsYmFja3NGb3JTdGF0ZShuZXdTdGF0ZSkudHJpZ2dlckVudGVyQ2FsbGJhY2tzKHByZXZpb3VzU3RhdGUsIG5ld1N0YXRlLCB0aGlzLmN1cnJlbnREYXRhKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmUgb2YgdGhlIGVudGVyIGNhbGxiYWNrcyBjYW5jZWxlZCB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWdDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5kZWJ1Z0NhbGxiYWNrKHN0YXRlQ2hhbmdlZEV2ZW50LCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gQWxsIG9mIHRoZSBjYWxsYmFja3MgaGF2ZSBiZWVuIHJhbiwgY2hhbmdlIHRoZSBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlYnVnQ2FsbGJhY2s6IERlYnVnU3RhdGVDYWxsYmFjaztcbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var defaultLanguageFormatProvider = {
        currency: function currency(number, symbol) {
            return symbol + (+number.toFixed(2)).toLocaleString();
        }
    };
    /**
     * A list of acceptable languages
     */
    var LanguageKeys = void 0;
    (function (LanguageKeys) {
        LanguageKeys[LanguageKeys["En"] = 0] = "En";
    })(LanguageKeys = RideStylerShowcase.LanguageKeys || (RideStylerShowcase.LanguageKeys = {}));
    /**
     * An internal structure for holding language data
     */

    var LanguageRegister = function () {
        /**
         * Create a register for a language
         * @param language The language definition
         */
        function LanguageRegister(language) {
            _classCallCheck(this, LanguageRegister);

            this.language = language;
            this.format = language.format;
        }
        /**
         * Get a key from the language dictionary
         * @param key The string key
         */


        _createClass(LanguageRegister, [{
            key: "getString",
            value: function getString(key) {
                return this.language[key];
            }
        }]);

        return LanguageRegister;
    }();
    /**
     * The default language to use if one is not provided to getStrings
     */


    var defaultLanguage = void 0;
    /**
     * An internal list of all registered languages and their strings
     */
    var languageRegisters = {};
    var strings = void 0;
    (function (strings) {
        /**
         * Register a language to be used in the showcase
         * @param languageKey The key of the language you are registering
         * @param language The language provider
         */
        function registerLanguage(languageKey, language, setAsDefault) {
            // Set default format provider
            if (!language.format) language.format = defaultLanguageFormatProvider;else for (var key in defaultLanguageFormatProvider) {
                // If the defaultLanguageProvider has a format function that is missing on the language's format provider,
                // implement it in the language's format provider
                if (defaultLanguageFormatProvider.hasOwnProperty(key) && key in language.format === false) {
                    language.format[key] = defaultLanguageFormatProvider[key];
                }
            }
            var languageRegister = languageRegisters[languageKey] = new LanguageRegister(language);
            if (setAsDefault || !defaultLanguage) defaultLanguage = languageRegister;
        }
        strings.registerLanguage = registerLanguage;
        /**
         * Set a language to be used by default, when no key is passed into getStrings
         * @param languageKey The language key to use by default
         * @returns true, if the language is registered and set as default; otherwise false
         */
        function setDefaultLanguage(languageKey) {
            if (languageKey in languageRegisters) {
                defaultLanguage = languageRegisters[languageKey];
                return true;
            }
            return false;
        }
        strings.setDefaultLanguage = setDefaultLanguage;
        /**
         * Tells you whether or not a language is registered
         * @param languageKey The key for the language
         */
        function languageIsRegistered(languageKey) {
            return languageKey in languageRegisters;
        }
        strings.languageIsRegistered = languageIsRegistered;
        /**
         * Returns the specified language, or the default language if it could not be found
         * @param languageKey The key of the language to retrieve
         */
        function getLanguage(languageKey) {
            return languageKey in languageRegisters ? languageRegisters[languageKey] : defaultLanguage;
        }
        /**
         * Get a string from the registered strings
         * @param key The string key to return a string for
         * @param languageKey The language you want to use
         */
        function getString(key, languageKey) {
            var languageRegister = getLanguage(languageKey);
            var string = void 0;
            // If we don't have a language, or could not get the string from the register 
            if (!(string = languageRegister.getString(key))) return key;
            return string;
        }
        strings.getString = getString;
        function format(languageKey) {
            return getLanguage(languageKey).format;
        }
        strings.format = format;
    })(strings = RideStylerShowcase.strings || (RideStylerShowcase.strings = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyIiwiY3VycmVuY3kiLCJudW1iZXIiLCJzeW1ib2wiLCJ0b0ZpeGVkIiwidG9Mb2NhbGVTdHJpbmciLCJMYW5ndWFnZUtleXMiLCJMYW5ndWFnZVJlZ2lzdGVyIiwibGFuZ3VhZ2UiLCJmb3JtYXQiLCJrZXkiLCJkZWZhdWx0TGFuZ3VhZ2UiLCJsYW5ndWFnZVJlZ2lzdGVycyIsInN0cmluZ3MiLCJyZWdpc3Rlckxhbmd1YWdlIiwibGFuZ3VhZ2VLZXkiLCJzZXRBc0RlZmF1bHQiLCJoYXNPd25Qcm9wZXJ0eSIsImxhbmd1YWdlUmVnaXN0ZXIiLCJzZXREZWZhdWx0TGFuZ3VhZ2UiLCJsYW5ndWFnZUlzUmVnaXN0ZXJlZCIsImdldExhbmd1YWdlIiwiZ2V0U3RyaW5nIiwic3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBeUR4QixRQUFJQyxnQ0FBK0Q7QUFDL0RDLGtCQUFVLGtCQUFDQyxNQUFELEVBQVNDLE1BQVQsRUFBbUI7QUFDekIsbUJBQU9BLFNBQVMsQ0FBQyxDQUFDRCxPQUFPRSxPQUFQLENBQWUsQ0FBZixDQUFGLEVBQXFCQyxjQUFyQixFQUFoQjtBQUNIO0FBSDhELEtBQW5FO0FBc0JBOzs7QUFHQSxRQUFZQyxxQkFBWjtBQUFBLEtBQUEsVUFBWUEsWUFBWixFQUF3QjtBQUNwQkEscUJBQUFBLGFBQUEsSUFBQSxJQUFBLENBQUEsSUFBQSxJQUFBO0FBQ0gsS0FGRCxFQUFZQSxlQUFBUCxtQkFBQU8sWUFBQSxLQUFBUCxtQkFBQU8sWUFBQSxHQUFZLEVBQVosQ0FBWjtBQUlBOzs7O0FBdEZ3QixRQXlGeEJDLGdCQXpGd0I7QUE2RnBCOzs7O0FBSUEsa0NBQVlDLFFBQVosRUFBcUM7QUFBQTs7QUFDakMsaUJBQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0EsaUJBQUtDLE1BQUwsR0FBY0QsU0FBU0MsTUFBdkI7QUFDSDtBQUVEOzs7Ozs7QUF0R29CO0FBQUE7QUFBQSxzQ0EwR1ZDLEdBMUdVLEVBMEdJO0FBQ3BCLHVCQUFPLEtBQUtGLFFBQUwsQ0FBY0UsR0FBZCxDQUFQO0FBQ0g7QUE1R21COztBQUFBO0FBQUE7QUErR3hCOzs7OztBQUdBLFFBQUlDLHdCQUFKO0FBRUE7OztBQUdBLFFBQUlDLG9CQUE2RCxFQUFqRTtBQUVBLFFBQWlCQyxnQkFBakI7QUFBQSxLQUFBLFVBQWlCQSxPQUFqQixFQUF3QjtBQUNwQjs7Ozs7QUFLQSxpQkFBQUMsZ0JBQUEsQ0FBaUNDLFdBQWpDLEVBQTJEUCxRQUEzRCxFQUFzRlEsWUFBdEYsRUFBNEc7QUFDeEc7QUFDQSxnQkFBSSxDQUFDUixTQUFTQyxNQUFkLEVBQXNCRCxTQUFTQyxNQUFULEdBQWtCVCw2QkFBbEIsQ0FBdEIsS0FDSyxLQUFLLElBQUlVLEdBQVQsSUFBZ0JWLDZCQUFoQixFQUErQztBQUNoRDtBQUNBO0FBQ0Esb0JBQUlBLDhCQUE4QmlCLGNBQTlCLENBQTZDUCxHQUE3QyxLQUFxREEsT0FBT0YsU0FBU0MsTUFBaEIsS0FBMkIsS0FBcEYsRUFBMkY7QUFDdkZELDZCQUFTQyxNQUFULENBQWdCQyxHQUFoQixJQUF1QlYsOEJBQThCVSxHQUE5QixDQUF2QjtBQUNIO0FBQ0o7QUFFRCxnQkFBSVEsbUJBQW1CTixrQkFBa0JHLFdBQWxCLElBQWlDLElBQUlSLGdCQUFKLENBQXFCQyxRQUFyQixDQUF4RDtBQUVBLGdCQUFJUSxnQkFBZ0IsQ0FBQ0wsZUFBckIsRUFBc0NBLGtCQUFrQk8sZ0JBQWxCO0FBQ3pDO0FBZGVMLGdCQUFBQyxnQkFBQSxHQUFnQkEsZ0JBQWhCO0FBZ0JoQjs7Ozs7QUFLQSxpQkFBQUssa0JBQUEsQ0FBbUNKLFdBQW5DLEVBQTJEO0FBQ3ZELGdCQUFJQSxlQUFlSCxpQkFBbkIsRUFBc0M7QUFDbENELGtDQUFrQkMsa0JBQWtCRyxXQUFsQixDQUFsQjtBQUNBLHVCQUFPLElBQVA7QUFDSDtBQUVELG1CQUFPLEtBQVA7QUFDSDtBQVBlRixnQkFBQU0sa0JBQUEsR0FBa0JBLGtCQUFsQjtBQVNoQjs7OztBQUlBLGlCQUFBQyxvQkFBQSxDQUFxQ0wsV0FBckMsRUFBNkQ7QUFDekQsbUJBQU9BLGVBQWVILGlCQUF0QjtBQUNIO0FBRmVDLGdCQUFBTyxvQkFBQSxHQUFvQkEsb0JBQXBCO0FBSWhCOzs7O0FBSUEsaUJBQUFDLFdBQUEsQ0FBcUJOLFdBQXJCLEVBQThDO0FBQzFDLG1CQUFPQSxlQUFlSCxpQkFBZixHQUNIQSxrQkFBa0JHLFdBQWxCLENBREcsR0FFSEosZUFGSjtBQUdIO0FBRUQ7Ozs7O0FBS0EsaUJBQUFXLFNBQUEsQ0FBMEJaLEdBQTFCLEVBQTBDSyxXQUExQyxFQUFtRTtBQUMvRCxnQkFBSUcsbUJBQW9DRyxZQUFZTixXQUFaLENBQXhDO0FBQ0EsZ0JBQUlRLGVBQUo7QUFFQTtBQUNBLGdCQUFJLEVBQUVBLFNBQVNMLGlCQUFpQkksU0FBakIsQ0FBMkJaLEdBQTNCLENBQVgsQ0FBSixFQUNBLE9BQU9BLEdBQVA7QUFFQSxtQkFBT2EsTUFBUDtBQUNIO0FBVGVWLGdCQUFBUyxTQUFBLEdBQVNBLFNBQVQ7QUFXaEIsaUJBQUFiLE1BQUEsQ0FBdUJNLFdBQXZCLEVBQWdEO0FBQzVDLG1CQUFPTSxZQUFZTixXQUFaLEVBQXlCTixNQUFoQztBQUNIO0FBRmVJLGdCQUFBSixNQUFBLEdBQU1BLE1BQU47QUFHbkIsS0F6RUQsRUFBaUJJLFVBQUFkLG1CQUFBYyxPQUFBLEtBQUFkLG1CQUFBYyxPQUFBLEdBQU8sRUFBUCxDQUFqQjtBQTBFSCxDQW5NRCxFQUFVZCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBhbGwgb2Ygb3VyIGFjY2VwdGFibGUgc3RyaW5nIGtleXNcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBTdHJpbmdLZXlzID0gXG4gICAgICAgIFwidmVoaWNsZS1zZWxlY3QtdmlzdWFsaXplLWludHJvXCIgfFxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXNoYXJlLWludHJvXCIgfFxuICAgICAgICBcInNlbGVjdC15b3VyLXZlaGljbGVcIiB8XG4gICAgICAgIFwidGlyZXNcIiB8XG4gICAgICAgIFwid2hlZWxzXCIgfFxuICAgICAgICBcInN1c3BlbnNpb25cIiB8XG4gICAgICAgIFwicGFpbnRcIiB8XG4gICAgICAgIFwiZnJvbnRcIiB8XG4gICAgICAgIFwicmVhclwiIHxcbiAgICAgICAgXCJ2ZWhpY2xlLWRldGFpbHNcIiB8XG4gICAgICAgIFwiY2hhbmdlLXZlaGljbGVcIiB8XG4gICAgICAgIFwid2hlZWwtZGV0YWlsc1wiIHxcbiAgICAgICAgXCJ0aXJlLWRldGFpbHNcIiB8XG4gICAgICAgICdzZWxlY3QtcGFpbnQnIHxcbiAgICAgICAgJ3NlbGVjdC13aGVlbHMnIHxcbiAgICAgICAgJ3NlbGVjdC10aXJlcycgfFxuICAgICAgICAnYWRqdXN0LXN1c3BlbnNpb24nIHxcbiAgICAgICAgJ2NoYW5nZS13aGVlbC1zaXplJyB8XG4gICAgICAgICduby1yZXN1bHRzJyB8XG4gICAgICAgICduby13aGVlbC1yZXN1bHRzJyB8IFxuICAgICAgICAnd2hlZWwtZmVhdHVyZXMtc3BlY3MnIHxcbiAgICAgICAgJ3NoYXJlLW15LXZlaGljbGUnIHxcbiAgICAgICAgJ3NoYXJlLWluc3RydWN0aW9ucycgfFxuICAgICAgICAnbm8tZGVzY3JpcHRpb24td2hlZWwnIHxcbiAgICAgICAgJ3Nob3ctc3BlY3MnIHxcbiAgICAgICAgJ2NhbGwnIHwgXG4gICAgICAgICdzaXplJyB8XG4gICAgICAgICdvZmZzZXQnIHxcbiAgICAgICAgJ2JvbHQtcGF0dGVybicgfFxuICAgICAgICAnY2VudGVyYm9yZScgfCBcbiAgICAgICAgJ3ByaWNlJyB8XG4gICAgICAgICdpdGVtLW51bWJlcicgfFxuICAgICAgICAnYnJhbmRzJyB8XG4gICAgICAgICdmaW5pc2hlcycgfCBcbiAgICAgICAgJ3NpemVzJyB8IFxuICAgICAgICAnYWxsJyB8XG4gICAgICAgICdhbGwtYnJhbmRzJyB8XG4gICAgICAgICdhbGwtZmluaXNoZXMnIHwgXG4gICAgICAgICdhbGwtc2l6ZXMnIHwgXG4gICAgICAgICdmaWx0ZXItcmVzdWx0cycgfFxuICAgICAgICAnbG9hZGluZy1lbGxpcHNpcycgfFxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtd2hlZWxzJyB8XG4gICAgICAgICdzaG93LWNvdW50LWZvcm1hdC10aXJlcycgfFxuICAgICAgICAnc3BlY2lmaWNhdGlvbnMnIHwgXG4gICAgICAgICdzcGVlZC1yYXRpbmcnIHwgXG4gICAgICAgICdhbnktc3BlZWQtcmF0aW5ncycgfCBcbiAgICAgICAgJ2ZlYXR1cmVzJyB8IFxuICAgICAgICAnYW55LWZlYXR1cmVzJyB8XG4gICAgICAgICdmaW5pc2gnIHxcbiAgICAgICAgJ3N1bW1hcnknIHxcbiAgICAgICAgJ2NoZWNrLW91dC1teS12ZWhpY2xlJztcblxuICAgIGxldCBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjpJU3RyaW5nc0xhbmd1YWdlRm9ybWF0UHJvdmlkZXIgPSB7XG4gICAgICAgIGN1cnJlbmN5OiAobnVtYmVyLCBzeW1ib2wpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2wgKyAoK251bWJlci50b0ZpeGVkKDIpKS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHdoYXQgYSBzdHJpbmdzIGRpY3Rpb25hcnkgc2hvdWxkIGxvb2sgbGlrZVxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIElTdHJpbmdzTGFuZ3VhZ2VEaWN0aW9uYXJ5ID0ge1xuICAgICAgICBbc3RyaW5nS2V5IGluIFN0cmluZ0tleXNdOnN0cmluZztcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlciB7XG4gICAgICAgIGN1cnJlbmN5PzogKGFtb3VudDpudW1iZXIsIHN5bWJvbDpzdHJpbmcpID0+IHN0cmluZztcbiAgICB9XG5cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVN0cmluZ3NMYW5ndWFnZSBleHRlbmRzIElTdHJpbmdzTGFuZ3VhZ2VEaWN0aW9uYXJ5IHtcbiAgICAgICAgZm9ybWF0PzogSVN0cmluZ3NMYW5ndWFnZUZvcm1hdFByb3ZpZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBhY2NlcHRhYmxlIGxhbmd1YWdlc1xuICAgICAqL1xuICAgIGV4cG9ydCBlbnVtIExhbmd1YWdlS2V5cyB7XG4gICAgICAgIEVuXG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFuIGludGVybmFsIHN0cnVjdHVyZSBmb3IgaG9sZGluZyBsYW5ndWFnZSBkYXRhXG4gICAgICovXG4gICAgY2xhc3MgTGFuZ3VhZ2VSZWdpc3RlciB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgbGFuZ3VhZ2U6IElTdHJpbmdzTGFuZ3VhZ2U7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmb3JtYXQ6IElTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgcmVnaXN0ZXIgZm9yIGEgbGFuZ3VhZ2VcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlIFRoZSBsYW5ndWFnZSBkZWZpbml0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihsYW5ndWFnZTpJU3RyaW5nc0xhbmd1YWdlKSB7XG4gICAgICAgICAgICB0aGlzLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGxhbmd1YWdlLmZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBrZXkgZnJvbSB0aGUgbGFuZ3VhZ2UgZGljdGlvbmFyeVxuICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBzdHJpbmcga2V5XG4gICAgICAgICAqL1xuICAgICAgICBnZXRTdHJpbmcoa2V5OlN0cmluZ0tleXMpOnN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYW5ndWFnZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgbGFuZ3VhZ2UgdG8gdXNlIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQgdG8gZ2V0U3RyaW5nc1xuICAgICAqL1xuICAgIGxldCBkZWZhdWx0TGFuZ3VhZ2U6TGFuZ3VhZ2VSZWdpc3RlcjtcblxuICAgIC8qKlxuICAgICAqIEFuIGludGVybmFsIGxpc3Qgb2YgYWxsIHJlZ2lzdGVyZWQgbGFuZ3VhZ2VzIGFuZCB0aGVpciBzdHJpbmdzXG4gICAgICovXG4gICAgbGV0IGxhbmd1YWdlUmVnaXN0ZXJzOiB7W2xhbmd1YWdlS2V5Om51bWJlcl06TGFuZ3VhZ2VSZWdpc3Rlcn0gPSB7fVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBzdHJpbmdzIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgbGFuZ3VhZ2UgdG8gYmUgdXNlZCBpbiB0aGUgc2hvd2Nhc2VcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBrZXkgb2YgdGhlIGxhbmd1YWdlIHlvdSBhcmUgcmVnaXN0ZXJpbmdcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlIFRoZSBsYW5ndWFnZSBwcm92aWRlclxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTGFuZ3VhZ2UobGFuZ3VhZ2VLZXk6TGFuZ3VhZ2VLZXlzLCBsYW5ndWFnZTpJU3RyaW5nc0xhbmd1YWdlLCBzZXRBc0RlZmF1bHQ/OiBib29sZWFuKSB7XG4gICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCBmb3JtYXQgcHJvdmlkZXJcbiAgICAgICAgICAgIGlmICghbGFuZ3VhZ2UuZm9ybWF0KSBsYW5ndWFnZS5mb3JtYXQgPSBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjtcbiAgICAgICAgICAgIGVsc2UgZm9yIChsZXQga2V5IGluIGRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRlZmF1bHRMYW5ndWFnZVByb3ZpZGVyIGhhcyBhIGZvcm1hdCBmdW5jdGlvbiB0aGF0IGlzIG1pc3Npbmcgb24gdGhlIGxhbmd1YWdlJ3MgZm9ybWF0IHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIC8vIGltcGxlbWVudCBpdCBpbiB0aGUgbGFuZ3VhZ2UncyBmb3JtYXQgcHJvdmlkZXJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXIuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkgaW4gbGFuZ3VhZ2UuZm9ybWF0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZS5mb3JtYXRba2V5XSA9IGRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbGFuZ3VhZ2VSZWdpc3RlciA9IGxhbmd1YWdlUmVnaXN0ZXJzW2xhbmd1YWdlS2V5XSA9IG5ldyBMYW5ndWFnZVJlZ2lzdGVyKGxhbmd1YWdlKTtcblxuICAgICAgICAgICAgaWYgKHNldEFzRGVmYXVsdCB8fCAhZGVmYXVsdExhbmd1YWdlKSBkZWZhdWx0TGFuZ3VhZ2UgPSBsYW5ndWFnZVJlZ2lzdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBhIGxhbmd1YWdlIHRvIGJlIHVzZWQgYnkgZGVmYXVsdCwgd2hlbiBubyBrZXkgaXMgcGFzc2VkIGludG8gZ2V0U3RyaW5nc1xuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGxhbmd1YWdlIGtleSB0byB1c2UgYnkgZGVmYXVsdFxuICAgICAgICAgKiBAcmV0dXJucyB0cnVlLCBpZiB0aGUgbGFuZ3VhZ2UgaXMgcmVnaXN0ZXJlZCBhbmQgc2V0IGFzIGRlZmF1bHQ7IG90aGVyd2lzZSBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRMYW5ndWFnZShsYW5ndWFnZUtleTpMYW5ndWFnZUtleXMpOmJvb2xlYW4ge1xuICAgICAgICAgICAgaWYgKGxhbmd1YWdlS2V5IGluIGxhbmd1YWdlUmVnaXN0ZXJzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdExhbmd1YWdlID0gbGFuZ3VhZ2VSZWdpc3RlcnNbbGFuZ3VhZ2VLZXldO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGVsbHMgeW91IHdoZXRoZXIgb3Igbm90IGEgbGFuZ3VhZ2UgaXMgcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGtleSBmb3IgdGhlIGxhbmd1YWdlXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gbGFuZ3VhZ2VJc1JlZ2lzdGVyZWQobGFuZ3VhZ2VLZXk6TGFuZ3VhZ2VLZXlzKTpib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZUtleSBpbiBsYW5ndWFnZVJlZ2lzdGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBzcGVjaWZpZWQgbGFuZ3VhZ2UsIG9yIHRoZSBkZWZhdWx0IGxhbmd1YWdlIGlmIGl0IGNvdWxkIG5vdCBiZSBmb3VuZFxuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGtleSBvZiB0aGUgbGFuZ3VhZ2UgdG8gcmV0cmlldmVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldExhbmd1YWdlKGxhbmd1YWdlS2V5PzpMYW5ndWFnZUtleXMpOkxhbmd1YWdlUmVnaXN0ZXIge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmd1YWdlS2V5IGluIGxhbmd1YWdlUmVnaXN0ZXJzID9cbiAgICAgICAgICAgICAgICBsYW5ndWFnZVJlZ2lzdGVyc1tsYW5ndWFnZUtleV0gOlxuICAgICAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBzdHJpbmcgZnJvbSB0aGUgcmVnaXN0ZXJlZCBzdHJpbmdzXG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIHN0cmluZyBrZXkgdG8gcmV0dXJuIGEgc3RyaW5nIGZvclxuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGxhbmd1YWdlIHlvdSB3YW50IHRvIHVzZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmluZyhrZXk6U3RyaW5nS2V5cywgbGFuZ3VhZ2VLZXk/Okxhbmd1YWdlS2V5cyk6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBsYW5ndWFnZVJlZ2lzdGVyOkxhbmd1YWdlUmVnaXN0ZXIgPSBnZXRMYW5ndWFnZShsYW5ndWFnZUtleSk7XG4gICAgICAgICAgICBsZXQgc3RyaW5nOnN0cmluZztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIGxhbmd1YWdlLCBvciBjb3VsZCBub3QgZ2V0IHRoZSBzdHJpbmcgZnJvbSB0aGUgcmVnaXN0ZXIgXG4gICAgICAgICAgICBpZiAoIShzdHJpbmcgPSBsYW5ndWFnZVJlZ2lzdGVyLmdldFN0cmluZyhrZXkpKSlcbiAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBmb3JtYXQobGFuZ3VhZ2VLZXk/Okxhbmd1YWdlS2V5cyk6SVN0cmluZ3NMYW5ndWFnZUZvcm1hdFByb3ZpZGVyIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRMYW5ndWFnZShsYW5ndWFnZUtleSkuZm9ybWF0O1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var styles;
    (function (styles) {
        var widthBreakpoints = [['phone-portrait', 0], ['phone-landscape', 420], ['tablet', 768], ['phone-landscape', 812], ['tablet', 824], ['desktop', 992], ['desktop-xl', 1200], ['tv', 1600]];

        var StyleManager = function () {
            function StyleManager(element) {
                _classCallCheck(this, StyleManager);

                this.element = element;
                this.initialized = ridestyler.promise();
                this.initializeBreakpoints();
                this.watchSize();
                this.initializeCSS();
                this.resolveOnDOMLoad();
                this.initializeStyleClasses();
            }

            _createClass(StyleManager, [{
                key: 'resolveOnDOMLoad',
                value: function resolveOnDOMLoad() {
                    var _this = this;

                    if (document.readyState === 'complete') {
                        // The DOM is already loaded
                        this.initialized.resolve();
                        return;
                    }
                    // Wait for the DOM to load
                    window.addEventListener('load', function () {
                        return _this.initialized.resolve();
                    }, false);
                }
                /**
                 * Load the CSS from {@link RideStylerShowcase.css} into the first HEAD element
                 * found in the document of the container
                 */

            }, {
                key: 'initializeCSS',
                value: function initializeCSS() {
                    if (!RideStylerShowcase.StyleHelper.isOffsetPositioned(this.element)) this.element.style.position = 'relative';
                    if ('css' in RideStylerShowcase === false) return;
                    var containerDocument = this.element.ownerDocument;
                    var head = containerDocument.getElementsByTagName("head").item(0);
                    // If we don't have a HEAD element, create one and add it to the DOM
                    if (!head) {
                        head = document.createElement('head');
                        containerDocument.documentElement.insertBefore(head, containerDocument.firstChild);
                    }
                    var stylesheet = document.createElement('style');
                    // Add our CSS to the stylesheet
                    stylesheet.appendChild(document.createTextNode(RideStylerShowcase.css));
                    // Add the CSS to the header before the first HEAD element
                    head.insertBefore(stylesheet, RideStylerShowcase.HTMLHelper.firstChildWithTag(head, "STYLE"));
                    // Remove the CSS from our object so it's not specified twice
                    delete RideStylerShowcase.css;
                }
            }, {
                key: 'initializeStyleClasses',
                value: function initializeStyleClasses() {
                    if (RideStylerShowcase.StyleHelper.isTouchDevice) this.element.classList.add('is-touch');
                }
            }, {
                key: 'initializeBreakpoints',
                value: function initializeBreakpoints() {
                    var _this2 = this;

                    // Make sure our breakpoints are sorted
                    widthBreakpoints.sort(function (a, b) {
                        return a[1] - b[1];
                    });
                    this.applyBreakpointClasses();
                    switch (document.readyState) {
                        case "loading":
                            RideStylerShowcase.HTMLHelper.getDocument(this.element).addEventListener("DOMContentLoaded", function () {
                                return _this2.applyBreakpointClasses();
                            });
                        case "interactive":
                            RideStylerShowcase.HTMLHelper.getWindow(this.element).addEventListener("load", function () {
                                return _this2.applyBreakpointClasses();
                            });
                    }
                }
            }, {
                key: 'resize',
                value: function resize() {
                    this.applyBreakpointClasses();
                    if (typeof this.onResize === 'function') this.onResize();
                }
            }, {
                key: 'resized',
                value: function resized() {
                    if (typeof this.onResized === 'function') this.onResized();
                }
            }, {
                key: 'breakpointChanged',
                value: function breakpointChanged(newBreakpoint) {
                    if (typeof this.onBreakpointChanged === 'function') this.onBreakpointChanged(newBreakpoint);
                }
            }, {
                key: 'watchSize',
                value: function watchSize() {
                    var _this3 = this;

                    var element = this.element;
                    var timer = void 0;
                    var resizedEventDelay = 200;
                    var elementSize = {
                        width: element.clientWidth,
                        height: element.clientHeight
                    };
                    RideStylerShowcase.HTMLHelper.getWindow(element).addEventListener('resize', function () {
                        var newElementSize = {
                            width: element.clientWidth,
                            height: element.clientHeight
                        };
                        if (newElementSize.width !== elementSize.width || newElementSize.height !== elementSize.height) {
                            // The element's size has changed
                            elementSize = newElementSize;
                            _this3.resize();
                            clearTimeout(timer);
                            timer = setTimeout(function () {
                                _this3.resized();
                            }, resizedEventDelay);
                        }
                    }, false);
                }
            }, {
                key: 'getCurrentBreakpoint',
                value: function getCurrentBreakpoint() {
                    return this.currentBreakpoint;
                }
            }, {
                key: 'applyBreakpointClasses',
                value: function applyBreakpointClasses() {
                    var element = this.element;
                    var height = element.offsetHeight;
                    var width = element.offsetWidth;
                    // Don't run if we don't have a height or width yet
                    if (!height || !width) return;
                    var newBreakpoint = void 0;
                    // The new breakpoint is the next lowest value in the array
                    {
                        var i = void 0;
                        for (i = widthBreakpoints.length - 1; i >= 0; i--) {
                            if (widthBreakpoints[i][1] <= width) break;
                        }newBreakpoint = i >= 0 ? widthBreakpoints[i] : undefined;
                    }
                    // If the current breakpoint hasn't changed, don't run the rest of this logic
                    if (newBreakpoint === this.currentBreakpoint) return;
                    // Set our current breakpoint to the newly defined one
                    this.currentBreakpoint = newBreakpoint;
                    var originalClassName = element.className;
                    var className = originalClassName;
                    // Remove any breakpoint classes from the element's class
                    className = className.replace(/\bridestyler-showcase-breakpoint-.+?(?= |$)/gi, "").trim();
                    // Add in the breakpoint class if we have one
                    if (newBreakpoint) {
                        className += ' ridestyler-showcase-breakpoint-' + newBreakpoint[0];
                    }
                    // If the className hasn't changed do nothing
                    if (className === originalClassName) return;
                    element.className = className;
                    this.breakpointChanged(newBreakpoint);
                }
            }]);

            return StyleManager;
        }();

        styles.StyleManager = StyleManager;
    })(styles = RideStylerShowcase.styles || (RideStylerShowcase.styles = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHlsZXMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwic3R5bGVzIiwid2lkdGhCcmVha3BvaW50cyIsIlN0eWxlTWFuYWdlciIsImVsZW1lbnQiLCJpbml0aWFsaXplZCIsInJpZGVzdHlsZXIiLCJwcm9taXNlIiwiaW5pdGlhbGl6ZUJyZWFrcG9pbnRzIiwid2F0Y2hTaXplIiwiaW5pdGlhbGl6ZUNTUyIsInJlc29sdmVPbkRPTUxvYWQiLCJpbml0aWFsaXplU3R5bGVDbGFzc2VzIiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwicmVzb2x2ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJTdHlsZUhlbHBlciIsImlzT2Zmc2V0UG9zaXRpb25lZCIsInN0eWxlIiwicG9zaXRpb24iLCJjb250YWluZXJEb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJoZWFkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpdGVtIiwiY3JlYXRlRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJzdHlsZXNoZWV0IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImNzcyIsIkhUTUxIZWxwZXIiLCJmaXJzdENoaWxkV2l0aFRhZyIsImlzVG91Y2hEZXZpY2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb3J0IiwiYSIsImIiLCJhcHBseUJyZWFrcG9pbnRDbGFzc2VzIiwiZ2V0RG9jdW1lbnQiLCJnZXRXaW5kb3ciLCJvblJlc2l6ZSIsIm9uUmVzaXplZCIsIm5ld0JyZWFrcG9pbnQiLCJvbkJyZWFrcG9pbnRDaGFuZ2VkIiwidGltZXIiLCJyZXNpemVkRXZlbnREZWxheSIsImVsZW1lbnRTaXplIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsIm5ld0VsZW1lbnRTaXplIiwicmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInJlc2l6ZWQiLCJjdXJyZW50QnJlYWtwb2ludCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiaSIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9yaWdpbmFsQ2xhc3NOYW1lIiwiY2xhc3NOYW1lIiwicmVwbGFjZSIsInRyaW0iLCJicmVha3BvaW50Q2hhbmdlZCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLE1BQUE7QUFBQSxLQUFBLFVBQUFBLE1BQUEsRUFBTTtBQUkvQixZQUFJQyxtQkFBZ0MsQ0FDaEMsQ0FBQyxnQkFBRCxFQUFtQixDQUFuQixDQURnQyxFQUVoQyxDQUFDLGlCQUFELEVBQW9CLEdBQXBCLENBRmdDLEVBR2hDLENBQUMsUUFBRCxFQUFXLEdBQVgsQ0FIZ0MsRUFJaEMsQ0FBQyxpQkFBRCxFQUFvQixHQUFwQixDQUpnQyxFQUtoQyxDQUFDLFFBQUQsRUFBVyxHQUFYLENBTGdDLEVBTWhDLENBQUMsU0FBRCxFQUFZLEdBQVosQ0FOZ0MsRUFPaEMsQ0FBQyxZQUFELEVBQWUsSUFBZixDQVBnQyxFQVFoQyxDQUFDLElBQUQsRUFBTyxJQUFQLENBUmdDLENBQXBDOztBQUorQixZQWUvQkMsWUFmK0I7QUFrQjNCLGtDQUFhQyxPQUFiLEVBQWdDO0FBQUE7O0FBQzVCLHFCQUFLQSxPQUFMLEdBQWVBLE9BQWY7QUFFQSxxQkFBS0MsV0FBTCxHQUFtQkMsV0FBV0MsT0FBWCxFQUFuQjtBQUVBLHFCQUFLQyxxQkFBTDtBQUNBLHFCQUFLQyxTQUFMO0FBQ0EscUJBQUtDLGFBQUw7QUFDQSxxQkFBS0MsZ0JBQUw7QUFDQSxxQkFBS0Msc0JBQUw7QUFDSDs7QUE1QjBCO0FBQUE7QUFBQSxtREFnQ0g7QUFBQTs7QUFDcEIsd0JBQUlDLFNBQVNDLFVBQVQsS0FBd0IsVUFBNUIsRUFBd0M7QUFDcEM7QUFDQSw2QkFBS1QsV0FBTCxDQUFpQlUsT0FBakI7QUFFQTtB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LENBQWpCLEVBQW9CLENBQXBCLEtBQTBCWixLQUE5QixFQUNJO0FBRlIseUJBSUFMLGdCQUFnQmlCLEtBQUssQ0FBTCxHQUFTL0QsaUJBQWlCK0QsQ0FBakIsQ0FBVCxHQUErQkUsU0FBL0M7QUFDSDtBQUVEO0FBQ0Esd0JBQUluQixrQkFBa0IsS0FBS2MsaUJBQTNCLEVBQThDO0FBRTlDO0FBQ0EseUJBQUtBLGlCQUFMLEdBQXlCZCxhQUF6QjtBQUVBLHdCQUFNb0Isb0JBQW9CaEUsUUFBUWlFLFNBQWxDO0FBQ0Esd0JBQUlBLFlBQVlELGlCQUFoQjtBQUVBO0FBQ0FDLGdDQUFZQSxVQUFVQyxPQUFWLENBQWtCLCtDQUFsQixFQUFtRSxFQUFuRSxFQUF1RUMsSUFBdkUsRUFBWjtBQUVBO0FBQ0Esd0JBQUl2QixhQUFKLEVBQW1CO0FBQ2ZxQixxQ0FBYSxxQ0FBcUNyQixjQUFjLENBQWQsQ0FBbEQ7QUFDSDtBQUVEO0FBQ0Esd0JBQUlxQixjQUFjRCxpQkFBbEIsRUFBcUM7QUFFckNoRSw0QkFBUWlFLFNBQVIsR0FBb0JBLFNBQXBCO0FBQ0EseUJBQUtHLGlCQUFMLENBQXVCeEIsYUFBdkI7QUFDSDtBQWxOMEI7O0FBQUE7QUFBQTs7QUFlbEIvQyxlQUFBRSxZQUFBLEdBQVlBLFlBQVo7QUFxTWhCLEtBcE40QixFQUFBRixTQUFBRCxtQkFBQUMsTUFBQSxLQUFBRCxtQkFBQUMsTUFBQSxHQUFNLEVBQU4sQ0FBQTtBQW9ONUIsQ0FwTkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnN0eWxlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3R5bGVzIHtcbiAgICBleHBvcnQgdHlwZSBCcmVha3BvaW50S2V5ID0gJ3Bob25lLXBvcnRyYWl0JyB8ICdwaG9uZS1sYW5kc2NhcGUnIHwgJ3RhYmxldCcgfCAnZGVza3RvcCcgfCAnZGVza3RvcC14bCcgfCAndHYnO1xuICAgIGV4cG9ydCB0eXBlIEJyZWFrcG9pbnQgPSBbQnJlYWtwb2ludEtleSwgbnVtYmVyXTtcbiAgICBcbiAgICBsZXQgd2lkdGhCcmVha3BvaW50czpCcmVha3BvaW50W10gPSBbXG4gICAgICAgIFsncGhvbmUtcG9ydHJhaXQnLCAwXSxcbiAgICAgICAgWydwaG9uZS1sYW5kc2NhcGUnLCA0MjBdLFxuICAgICAgICBbJ3RhYmxldCcsIDc2OF0sXG4gICAgICAgIFsncGhvbmUtbGFuZHNjYXBlJywgODEyXSxcbiAgICAgICAgWyd0YWJsZXQnLCA4MjRdLFxuICAgICAgICBbJ2Rlc2t0b3AnLCA5OTJdLFxuICAgICAgICBbJ2Rlc2t0b3AteGwnLCAxMjAwXSxcbiAgICAgICAgWyd0dicsIDE2MDBdXG4gICAgXTtcblxuICAgIGV4cG9ydCBjbGFzcyBTdHlsZU1hbmFnZXIge1xuICAgICAgICBlbGVtZW50OkhUTUxFbGVtZW50O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yIChlbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJyZWFrcG9pbnRzKCk7XG4gICAgICAgICAgICB0aGlzLndhdGNoU2l6ZSgpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ1NTKCk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVPbkRPTUxvYWQoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0eWxlQ2xhc3NlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGluaXRpYWxpemVkOlJpZGVTdHlsZXJQcm9taXNlO1xuXG4gICAgICAgIHByaXZhdGUgcmVzb2x2ZU9uRE9NTG9hZCgpIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIERPTSBpcyBhbHJlYWR5IGxvYWRlZFxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQucmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgRE9NIHRvIGxvYWRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gdGhpcy5pbml0aWFsaXplZC5yZXNvbHZlKCksIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkIHRoZSBDU1MgZnJvbSB7QGxpbmsgUmlkZVN0eWxlclNob3djYXNlLmNzc30gaW50byB0aGUgZmlyc3QgSEVBRCBlbGVtZW50XG4gICAgICAgICAqIGZvdW5kIGluIHRoZSBkb2N1bWVudCBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVDU1MoKSB7XG4gICAgICAgICAgICBpZiAoIVN0eWxlSGVscGVyLmlzT2Zmc2V0UG9zaXRpb25lZCh0aGlzLmVsZW1lbnQpKVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG5cbiAgICAgICAgICAgIGlmICgnY3NzJyBpbiBSaWRlU3R5bGVyU2hvd2Nhc2UgPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGxldCBjb250YWluZXJEb2N1bWVudCA9IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgICAgICAgICAgbGV0IGhlYWQgPSBjb250YWluZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIikuaXRlbSgwKTtcblxuICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIEhFQUQgZWxlbWVudCwgY3JlYXRlIG9uZSBhbmQgYWRkIGl0IHRvIHRoZSBET01cbiAgICAgICAgICAgIGlmICghaGVhZCkge1xuICAgICAgICAgICAgICAgIGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoZWFkJyk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lmluc2VydEJlZm9yZShoZWFkLCBjb250YWluZXJEb2N1bWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHN0eWxlc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgICAgICAgICAvLyBBZGQgb3VyIENTUyB0byB0aGUgc3R5bGVzaGVldFxuICAgICAgICAgICAgc3R5bGVzaGVldC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShSaWRlU3R5bGVyU2hvd2Nhc2UuY3NzKSk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgQ1NTIHRvIHRoZSBoZWFkZXIgYmVmb3JlIHRoZSBmaXJzdCBIRUFEIGVsZW1lbnRcbiAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlc2hlZXQsIEhUTUxIZWxwZXIuZmlyc3RDaGlsZFdpdGhUYWcoaGVhZCwgXCJTVFlMRVwiKSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgQ1NTIGZyb20gb3VyIG9iamVjdCBzbyBpdCdzIG5vdCBzcGVjaWZpZWQgdHdpY2VcbiAgICAgICAgICAgIGRlbGV0ZSBSaWRlU3R5bGVyU2hvd2Nhc2UuY3NzO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplU3R5bGVDbGFzc2VzKCkge1xuICAgICAgICAgICAgaWYgKFN0eWxlSGVscGVyLmlzVG91Y2hEZXZpY2UpXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLXRvdWNoJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVCcmVha3BvaW50cygpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgYnJlYWtwb2ludHMgYXJlIHNvcnRlZFxuICAgICAgICAgICAgd2lkdGhCcmVha3BvaW50cy5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYVsxXSAtIGJbMV07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hcHBseUJyZWFrcG9pbnRDbGFzc2VzKCk7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZG9jdW1lbnQucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsb2FkaW5nXCI6XG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuZ2V0RG9jdW1lbnQodGhpcy5lbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB0aGlzLmFwcGx5QnJlYWtwb2ludENsYXNzZXMoKSk7XG4gICAgICAgICAgICAgICAgY2FzZSBcImludGVyYWN0aXZlXCI6XG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuZ2V0V2luZG93KHRoaXMuZWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gdGhpcy5hcHBseUJyZWFrcG9pbnRDbGFzc2VzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByZXNpemUoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5QnJlYWtwb2ludENsYXNzZXMoKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uUmVzaXplID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uUmVzaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHJlc2l6ZWQoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNpemVkID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uUmVzaXplZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBicmVha3BvaW50Q2hhbmdlZChuZXdCcmVha3BvaW50OkJyZWFrcG9pbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkJyZWFrcG9pbnRDaGFuZ2VkID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uQnJlYWtwb2ludENoYW5nZWQobmV3QnJlYWtwb2ludCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayBlYWNoIHRpbWUgdGhlIGVsZW1lbnQgaXMgcmVzaXplZFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIG9uUmVzaXplOiAoKSA9PiB2b2lkO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNhbGxiYWNrIGZvciBhZnRlciB0aGUgdXNlciBpcyBkb25lIHJlc2l6aW5nIHRoZSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgb25SZXNpemVkOiAoKSA9PiB2b2lkO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNhbGxiYWNrIGZvciBhZnRlciB0aGUgYnJlYWtwb2ludCBoYXMgY2hhbmdlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIG9uQnJlYWtwb2ludENoYW5nZWQ6IChuZXdCcmVha3BvaW50OkJyZWFrcG9pbnQpID0+IHZvaWQ7XG5cbiAgICAgICAgcHJpdmF0ZSB3YXRjaFNpemUoKSB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudDpIVE1MRWxlbWVudCA9IHRoaXMuZWxlbWVudDtcblxuICAgICAgICAgICAgbGV0IHRpbWVyOm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IHJlc2l6ZWRFdmVudERlbGF5ID0gMjAwO1xuXG4gICAgICAgICAgICBsZXQgZWxlbWVudFNpemUgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmNsaWVudEhlaWdodFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5nZXRXaW5kb3coZWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXdFbGVtZW50U2l6ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKG5ld0VsZW1lbnRTaXplLndpZHRoICE9PSBlbGVtZW50U2l6ZS53aWR0aCB8fCBuZXdFbGVtZW50U2l6ZS5oZWlnaHQgIT09IGVsZW1lbnRTaXplLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCdzIHNpemUgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplZCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCByZXNpemVkRXZlbnREZWxheSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBhcHBsaWVkIGJyZWFrcG9pbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgY3VycmVudEJyZWFrcG9pbnQ6QnJlYWtwb2ludDtcblxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudEJyZWFrcG9pbnQoKTpCcmVha3BvaW50IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRCcmVha3BvaW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBhcHBseUJyZWFrcG9pbnRDbGFzc2VzKCkge1xuICAgICAgICAgICAgbGV0IGVsZW1lbnQ6SFRNTEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICAgIC8vIERvbid0IHJ1biBpZiB3ZSBkb24ndCBoYXZlIGEgaGVpZ2h0IG9yIHdpZHRoIHlldFxuICAgICAgICAgICAgaWYgKCFoZWlnaHQgfHwgIXdpZHRoKSByZXR1cm47XG5cbiAgICAgICAgICAgIGxldCBuZXdCcmVha3BvaW50OkJyZWFrcG9pbnQ7XG5cbiAgICAgICAgICAgIC8vIFRoZSBuZXcgYnJlYWtwb2ludCBpcyB0aGUgbmV4dCBsb3dlc3QgdmFsdWUgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGk6bnVtYmVyO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IHdpZHRoQnJlYWtwb2ludHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aWR0aEJyZWFrcG9pbnRzW2ldWzFdIDw9IHdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBuZXdCcmVha3BvaW50ID0gaSA+PSAwID8gd2lkdGhCcmVha3BvaW50c1tpXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCBoYXNuJ3QgY2hhbmdlZCwgZG9uJ3QgcnVuIHRoZSByZXN0IG9mIHRoaXMgbG9naWNcbiAgICAgICAgICAgIGlmIChuZXdCcmVha3BvaW50ID09PSB0aGlzLmN1cnJlbnRCcmVha3BvaW50KSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIFNldCBvdXIgY3VycmVudCBicmVha3BvaW50IHRvIHRoZSBuZXdseSBkZWZpbmVkIG9uZVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9IG5ld0JyZWFrcG9pbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWVcbiAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBvcmlnaW5hbENsYXNzTmFtZTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIGFueSBicmVha3BvaW50IGNsYXNzZXMgZnJvbSB0aGUgZWxlbWVudCdzIGNsYXNzXG4gICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUucmVwbGFjZSgvXFxicmlkZXN0eWxlci1zaG93Y2FzZS1icmVha3BvaW50LS4rPyg/PSB8JCkvZ2ksIFwiXCIpLnRyaW0oKTtcblxuICAgICAgICAgICAgLy8gQWRkIGluIHRoZSBicmVha3BvaW50IGNsYXNzIGlmIHdlIGhhdmUgb25lXG4gICAgICAgICAgICBpZiAobmV3QnJlYWtwb2ludCkge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSArPSAnIHJpZGVzdHlsZXItc2hvd2Nhc2UtYnJlYWtwb2ludC0nICsgbmV3QnJlYWtwb2ludFswXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgdGhlIGNsYXNzTmFtZSBoYXNuJ3QgY2hhbmdlZCBkbyBub3RoaW5nXG4gICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09PSBvcmlnaW5hbENsYXNzTmFtZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgICAgIHRoaXMuYnJlYWtwb2ludENoYW5nZWQobmV3QnJlYWtwb2ludCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseInstance = function () {
        function RideStylerShowcaseInstance(container, settings) {
            _classCallCheck(this, RideStylerShowcaseInstance);

            this.activeLoadingSessionKeys = [];
            this.settings = settings || {};
            this.settings.debug = this.settings.debug || {};
            this.events = new RideStylerShowcase.events.EventHandler();
            if (this.settings.debug.events === true) this.events.debugCallback = function (name, e, handlers) {
                if (name === 'resize') return;
                console.log('[RideStylerShowcase Event] Name: ' + name + ' Data:', e, handlers);
            };
            if (container) {
                if (typeof container === 'string') {
                    container = document.getElementById(container);
                    if (!container) console.error('The ID "' + container + '" could not be found in the DOM.');
                }
                this.initialize(container);
            }
        }
        /**
         * Register the main components used by the showcase
         */


        _createClass(RideStylerShowcaseInstance, [{
            key: 'registerComponents',
            value: function registerComponents() {
                var eventHandler = this.events;
                // Register other components to be displayed
                this.otherComponents = [new RideStylerShowcase.RideStylerShowcaseBackground(this)];
                // Register our mapping of states to main components
                this.stateComponentMapping = {};
                this.stateComponentMapping[RideStylerShowcase.States.ChooseVehicle] = new RideStylerShowcase.RideStylerShowcaseVehicleSelection(this);
                this.stateComponentMapping[RideStylerShowcase.States.Visualize] = new RideStylerShowcase.RideStylerShowcaseVehicleVisualization(this);
                // Generate mainComponents from the stateComponentMapping
                this.mainComponents = [];
                for (var state in this.stateComponentMapping) {
                    this.mainComponents.push(this.stateComponentMapping[state]);
                }
            }
            /**
             * Set the container of this showcase instance and initialize (or re-initialize) it
             * @param container The container to initialize this showcase in
             */

        }, {
            key: 'initialize',
            value: function initialize(container) {
                var _this = this;

                if (!container) throw "Cannot initialize showcase without a container to put it in.";
                this.container = RideStylerShowcase.ObjectHelper.assign(container, {
                    ridestylerShowcase: this
                });
                this.initializeParameters();
                this.initializeState();
                this.registerComponents();
                RideStylerShowcase.api.initialize(this.settings);
                this.initializeStyle();
                this.initializeFilters();
                this.initializeComponents();
                this.events.on("vehicle-selected", function (selection) {
                    var vehicleSelectionState = {
                        currentVehicleConfigurationID: selection.VehicleConfiguration,
                        currentVehicleDescription: selection.VehicleDescription,
                        currentVehicleTireOptionID: selection.TireOptionID,
                        currentVehicleTireOptionDescription: selection.TireOptionString,
                        currentPaintScheme: selection.PaintScheme || undefined,
                        vehicleHasAngledImage: selection.vehicleHasAngledImage || undefined,
                        vehicleHasSideImage: selection.vehicleHasSideImage || undefined,
                        currentTire: selection.currentTire || undefined,
                        currentWheel: selection.currentWheel || undefined,
                        currentWheelFitment: selection.currentWheelFitment || undefined,
                        currentTireOption: selection.currentTireOption || undefined,
                        currentVehicleDescriptionModel: selection.currentVehicleDescriptionModel || undefined,
                        currentSuspension: selection.currentSuspension || undefined
                    };
                    _this.state.changeState(RideStylerShowcase.States.Visualize, vehicleSelectionState);
                    return true;
                });
                var settingsRetrieved = RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.authenticated, function () {
                    return RideStylerShowcase.api.settings.getSettings().done(function (settingsFromAPI) {
                        _this.settingsFromAPI = settingsFromAPI;
                    });
                });
                RideStylerShowcase.PromiseHelper.all([this.style.initialized, settingsRetrieved]).done(function () {
                    _this.events.trigger('initialized', undefined);
                });
                this.onStateChanged({
                    newState: this.state.currentState,
                    oldState: undefined,
                    newData: undefined
                });
            }
        }, {
            key: 'initializeState',
            value: function initializeState() {
                var _this2 = this;

                this.state = new RideStylerShowcase.state.RideStylerShowcaseState(RideStylerShowcase.States.ChooseVehicle);
                if (this.settings.debug.state === true) this.state.debugCallback = function (e, finished) {
                    var finishedString = finished ? 'Finished' : 'Beginning';
                    var stateChange = "to " + RideStylerShowcase.States[e.newState];
                    if (typeof e.oldState === 'number') {
                        stateChange = "from " + RideStylerShowcase.States[e.oldState] + " " + stateChange;
                    }
                    console.log('[RideStylerShowcase State] ' + stateChange + ' ' + finishedString, e);
                };
                this.state.onChange(function (e) {
                    return _this2.events.trigger("state-changed", e) && _this2.onStateChanged(e);
                });
            }
        }, {
            key: 'initializeStyle',
            value: function initializeStyle() {
                var _this3 = this;

                this.style = new RideStylerShowcase.styles.StyleManager(this.container);
                this.style.onResize = function () {
                    return _this3.events.trigger('resize', undefined);
                };
                this.style.onResized = function () {
                    return _this3.events.trigger('resized', undefined);
                };
                this.style.onBreakpointChanged = function (newBreakpoint) {
                    return _this3.events.trigger('breakpoint-changed', newBreakpoint);
                };
                if (!this.container.classList.contains('ridestyler-showcase')) this.container.classList.add('ridestyler-showcase');
            }
        }, {
            key: 'initializeParameters',
            value: function initializeParameters() {
                this.parameters = new RideStylerShowcase.parameters.RideStylerShowcaseParameters();
            }
        }, {
            key: 'initializeFilters',
            value: function initializeFilters() {
                var _this4 = this;

                this.filters = new RideStylerShowcase.filters.FilterController();
                this.events.on("vehicle-selected", function (selection) {
                    _this4.filters.setVehicle({
                        vehicleConfigurationID: selection.VehicleConfiguration,
                        vehicleTireOptionID: selection.TireOptionID
                    });
                });
                this.events.on("vehicle-description-loaded", function (selectedVehicle) {
                    _this4.filters.setVehicleDescription({
                        HasSideImage: selectedVehicle.HasSideImage,
                        HasAngledImage: selectedVehicle.HasAngledImage
                    });
                });
            }
        }, {
            key: 'initializeComponents',
            value: function initializeComponents() {
                var container = this.container;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.otherComponents[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var component = _step.value;

                        container.appendChild(component.component);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.mainComponents[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var _component = _step2.value;

                        _component.setVisible(false);
                        container.appendChild(_component.component);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
        }, {
            key: 'onStateChanged',
            value: function onStateChanged(ev) {
                this.updateCurrentComponent(ev);
                return true;
            }
        }, {
            key: 'updateCurrentComponent',
            value: function updateCurrentComponent(ev) {
                var newComponent = this.stateComponentMapping[ev.newState];
                var oldComponent = undefined;
                var stateClassPrefix = 'ridestyler-showcase-state-';
                if (typeof ev.oldState === 'number') {
                    oldComponent = this.stateComponentMapping[ev.oldState];
                    this.container.classList.remove(stateClassPrefix + RideStylerShowcase.States[ev.oldState].toLowerCase());
                }
                this.container.classList.add(stateClassPrefix + RideStylerShowcase.States[ev.newState].toLowerCase());
                if (oldComponent && oldComponent.isVisible()) {
                    oldComponent.hide(function () {
                        newComponent.show();
                    });
                } else {
                    newComponent.show();
                }
            }
        }]);

        return RideStylerShowcaseInstance;
    }();

    RideStylerShowcase.RideStylerShowcaseInstance = RideStylerShowcaseInstance;
    function create(container, settings) {
        return new RideStylerShowcaseInstance(container, settings);
    }
    RideStylerShowcase.create = create;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSIsImNvbnRhaW5lciIsInNldHRpbmdzIiwiYWN0aXZlTG9hZGluZ1Nlc3Npb25LZXlzIiwiZGVidWciLCJldmVudHMiLCJFdmVudEhhbmRsZXIiLCJkZWJ1Z0NhbGxiYWNrIiwibmFtZSIsImUiLCJoYW5kbGVycyIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZXJyb3IiLCJpbml0aWFsaXplIiwiZXZlbnRIYW5kbGVyIiwib3RoZXJDb21wb25lbnRzIiwiUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCIsInN0YXRlQ29tcG9uZW50TWFwcGluZyIsIlN0YXRlcyIsIkNob29zZVZlaGljbGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlU2VsZWN0aW9uIiwiVmlzdWFsaXplIiwiUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24iLCJtYWluQ29tcG9uZW50cyIsInN0YXRlIiwicHVzaCIsIk9iamVjdEhlbHBlciIsImFzc2lnbiIsInJpZGVzdHlsZXJTaG93Y2FzZSIsImluaXRpYWxpemVQYXJhbWV0ZXJzIiwiaW5pdGlhbGl6ZVN0YXRlIiwicmVnaXN0ZXJDb21wb25lbnRzIiwiYXBpIiwiaW5pdGlhbGl6ZVN0eWxlIiwiaW5pdGlhbGl6ZUZpbHRlcnMiLCJpbml0aWFsaXplQ29tcG9uZW50cyIsIm9uIiwidmVoaWNsZVNlbGVjdGlvblN0YXRlIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJzZWxlY3Rpb24iLCJWZWhpY2xlQ29uZmlndXJhdGlvbiIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb24iLCJWZWhpY2xlRGVzY3JpcHRpb24iLCJjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCIsIlRpcmVPcHRpb25JRCIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiVGlyZU9wdGlvblN0cmluZyIsImN1cnJlbnRQYWludFNjaGVtZSIsIlBhaW50U2NoZW1lIiwidW5kZWZpbmVkIiwidmVoaWNsZUhhc0FuZ2xlZEltYWdlIiwidmVoaWNsZUhhc1NpZGVJbWFnZSIsImN1cnJlbnRUaXJlIiwiY3VycmVudFdoZWVsIiwiY3VycmVudFdoZWVsRml0bWVudCIsImN1cnJlbnRUaXJlT3B0aW9uIiwiY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsIiwiY3VycmVudFN1c3BlbnNpb24iLCJjaGFuZ2VTdGF0ZSIsInNldHRpbmdzUmV0cmlldmVkIiwiUHJvbWlzZUhlbHBlciIsInRoZW4iLCJhdXRoZW50aWNhdGVkIiwiZ2V0U2V0dGluZ3MiLCJkb25lIiwic2V0dGluZ3NGcm9tQVBJIiwiYWxsIiwic3R5bGUiLCJpbml0aWFsaXplZCIsInRyaWdnZXIiLCJvblN0YXRlQ2hhbmdlZCIsIm5ld1N0YXRlIiwiY3VycmVudFN0YXRlIiwib2xkU3RhdGUiLCJuZXdEYXRhIiwiUmlkZVN0eWxlclNob3djYXNlU3RhdGUiLCJmaW5pc2hlZCIsImZpbmlzaGVkU3RyaW5nIiwic3RhdGVDaGFuZ2UiLCJvbkNoYW5nZSIsInN0eWxlcyIsIlN0eWxlTWFuYWdlciIsIm9uUmVzaXplIiwib25SZXNpemVkIiwib25CcmVha3BvaW50Q2hhbmdlZCIsIm5ld0JyZWFrcG9pbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsInBhcmFtZXRlcnMiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQYXJhbWV0ZXJzIiwiZmlsdGVycyIsIkZpbHRlckNvbnRyb2xsZXIiLCJzZXRWZWhpY2xlIiwidmVoaWNsZUNvbmZpZ3VyYXRpb25JRCIsInZlaGljbGVUaXJlT3B0aW9uSUQiLCJzZXRWZWhpY2xlRGVzY3JpcHRpb24iLCJIYXNTaWRlSW1hZ2UiLCJzZWxlY3RlZFZlaGljbGUiLCJIYXNBbmdsZWRJbWFnZSIsImNvbXBvbmVudCIsImFwcGVuZENoaWxkIiwic2V0VmlzaWJsZSIsImV2IiwidXBkYXRlQ3VycmVudENvbXBvbmVudCIsIm5ld0NvbXBvbmVudCIsIm9sZENvbXBvbmVudCIsInN0YXRlQ2xhc3NQcmVmaXgiLCJyZW1vdmUiLCJ0b0xvd2VyQ2FzZSIsImlzVmlzaWJsZSIsImhpZGUiLCJzaG93IiwiY3JlYXRlIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUEsUUFnQnhCQywwQkFoQndCO0FBOEZwQiw0Q0FBb0JDLFNBQXBCLEVBQXNEQyxRQUF0RCxFQUEwRjtBQUFBOztBQWtMbEYsaUJBQUFDLHdCQUFBLEdBQXFDLEVBQXJDO0FBakxKLGlCQUFLRCxRQUFMLEdBQWdCQSxZQUFZLEVBQTVCO0FBQ0EsaUJBQUtBLFFBQUwsQ0FBY0UsS0FBZCxHQUFzQixLQUFLRixRQUFMLENBQWNFLEtBQWQsSUFBdUIsRUFBN0M7QUFFQSxpQkFBS0MsTUFBTCxHQUFjLElBQUlOLG1CQUFBTSxNQUFBLENBQU9DLFlBQVgsRUFBZDtBQUVBLGdCQUFJLEtBQUtKLFFBQUwsQ0FBY0UsS0FBZCxDQUFvQkMsTUFBcEIsS0FBK0IsSUFBbkMsRUFDSSxLQUFLQSxNQUFMLENBQVlFLGFBQVosR0FBNEIsVUFBVUMsSUFBVixFQUFnQkMsQ0FBaEIsRUFBbUJDLFFBQW5CLEVBQTJCO0FBQ25ELG9CQUFJRixTQUFTLFFBQWIsRUFBdUI7QUFFdkJHLHdCQUFRQyxHQUFSLHVDQUFnREosSUFBaEQsYUFBOERDLENBQTlELEVBQWlFQyxRQUFqRTtBQUNILGFBSkQ7QUFNSixnQkFBSVQsU0FBSixFQUFlO0FBQ1gsb0JBQUksT0FBT0EsU0FBUCxLQUFxQixRQUF6QixFQUFtQztBQUMvQkEsZ0NBQVlZLFNBQVNDLGNBQVQsQ0FBd0JiLFNBQXhCLENBQVo7QUFFQSx3QkFBSSxDQUFDQSxTQUFMLEVBQWdCVSxRQUFRSSxLQUFSLENBQWMsYUFBYWQsU0FBYixHQUF5QixrQ0FBdkM7QUFD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OlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25zIHtcbiAgICAgICAgZGVidWc/OiB7XG4gICAgICAgICAgICBldmVudHM/OmJvb2xlYW47XG4gICAgICAgICAgICBzdGF0ZT86Ym9vbGVhbjtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBleHBvcnQgdHlwZSBSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncyA9IFxuICAgICAgICAoUmlkZVN0eWxlclNob3djYXNlT3B0aW9ucyAmIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VuKSB8IFxuICAgICAgICAoUmlkZVN0eWxlclNob3djYXNlT3B0aW9ucyAmIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXIpO1xuXG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VDb250YWluZXIgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJpZGVzdHlsZXJTaG93Y2FzZTogUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIGNvbnRhaW5lciBmb3IgdGhlIHNob3djYXNlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29udGFpbmVyOiBSaWRlU3R5bGVyU2hvd2Nhc2VDb250YWluZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIGNvbXBvbmVudHMgKHNjcmVlbnMgZm9yIGV4YW1wbGUpIHRvIGJlIHJlbmRlcmVkIGluIHRoZSBzaG93Y2FzZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBtYWluQ29tcG9uZW50czogTWFpbkNvbXBvbmVudEJhc2VbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogT3RoZXIgY29tcG9uZW50cyB0byBiZSByZW5kZXJlZCBpbiB0aGUgc2hvd2Nhc2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgb3RoZXJDb21wb25lbnRzOiBDb21wb25lbnRCYXNlW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiBzdGF0ZXMgdG8gbWFpbiBjb21wb25lbnRzXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHN0YXRlQ29tcG9uZW50TWFwcGluZzoge1tzdGF0ZTogbnVtYmVyXTpNYWluQ29tcG9uZW50QmFzZX07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgdmlzaWJsZSBtYWluIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50TWFpbkNvbXBvbmVudDogTWFpbkNvbXBvbmVudEJhc2U7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN0YXRlIGhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzdGF0ZTpzdGF0ZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN0eWxlIG1hbmFnZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzdHlsZTpzdHlsZXMuU3R5bGVNYW5hZ2VyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGV2ZW50czpldmVudHMuRXZlbnRIYW5kbGVyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXJsIGNoZWNrIGhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBwYXJhbWV0ZXJzOnBhcmFtZXRlcnMuUmlkZVN0eWxlclNob3djYXNlUGFyYW1ldGVyczsgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXR0aW5ncyBzcGVjaWZpZWQgd2hlbiB0aGUgc2hvd2Nhc2Ugd2FzIGNyZWF0ZWRcbiAgICAgICAgICovXG5cbiAgICAgICAgcHVibGljIHNldHRpbmdzOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXR0aW5ncyBsb2FkZWQgZnJvbSB0aGUgQVBJXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0dGluZ3NGcm9tQVBJOmFwaS5zZXR0aW5ncy5SaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5nc0Zyb21BUEk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmaWx0ZXIgY29udHJvbGxlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGZpbHRlcnM6ZmlsdGVycy5GaWx0ZXJDb250cm9sbGVyO1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGRvIG5vdCBpbml0aWFsaXplIGl0XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgUmlkZVN0eWxlciBTaG93Y2FzZSBpbnN0YW5jZSBhbmQgaW5pdGlhbGl6ZSBpdCBpbnNpZGUgYSBjb250YWluZXIgd2l0aCB0aGUgc3BlY2lmaWVkIElEXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXJJRCBTcGVjaWZpZXMgdGhlIElEIG9mIHRoZSBjb250YWluZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hvd2Nhc2UgaW5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb250YWluZXJJRDogc3RyaW5nLCBzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBpbml0aWFsaXplIGl0IGluc2lkZSB0aGUgc3BlY2lmaWVkIGNvbnRhaW5lclxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFNwZWNpZmllcyB0aGUgZWxlbWVudCB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yIChjb250YWluZXI6IEhUTUxFbGVtZW50LCBzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MpO1xuXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvciAoY29udGFpbmVyPzogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kZWJ1ZyA9IHRoaXMuc2V0dGluZ3MuZGVidWcgfHwge307XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IGV2ZW50cy5FdmVudEhhbmRsZXIoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWcuZXZlbnRzID09PSB0cnVlKVxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmRlYnVnQ2FsbGJhY2sgPSBmdW5jdGlvbiAobmFtZSwgZSwgaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdyZXNpemUnKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSaWRlU3R5bGVyU2hvd2Nhc2UgRXZlbnRdIE5hbWU6ICR7bmFtZX0gRGF0YTpgLCBlLCBoYW5kbGVycyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbmVyKSBjb25zb2xlLmVycm9yKCdUaGUgSUQgXCInICsgY29udGFpbmVyICsgJ1wiIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgRE9NLicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZShjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIHRoZSBtYWluIGNvbXBvbmVudHMgdXNlZCBieSB0aGUgc2hvd2Nhc2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJDb21wb25lbnRzKCk6IHZvaWQge1xuICAgICAgICAgICAgbGV0IGV2ZW50SGFuZGxlciA9IHRoaXMuZXZlbnRzO1xuXG4gICAgICAgICAgICAvLyBSZWdpc3RlciBvdGhlciBjb21wb25lbnRzIHRvIGJlIGRpc3BsYXllZFxuICAgICAgICAgICAgdGhpcy5vdGhlckNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQodGhpcylcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG91ciBtYXBwaW5nIG9mIHN0YXRlcyB0byBtYWluIGNvbXBvbmVudHNcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nID0ge307XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tTdGF0ZXMuQ2hvb3NlVmVoaWNsZV0gPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW1N0YXRlcy5WaXN1YWxpemVdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBtYWluQ29tcG9uZW50cyBmcm9tIHRoZSBzdGF0ZUNvbXBvbmVudE1hcHBpbmdcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHN0YXRlIGluIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbXBvbmVudHMucHVzaCh0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tzdGF0ZV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgY29udGFpbmVyIG9mIHRoaXMgc2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgKG9yIHJlLWluaXRpYWxpemUpIGl0XG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBpbml0aWFsaXplIHRoaXMgc2hvd2Nhc2UgaW5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIDogdm9pZCB7XG5cbiAgICAgICAgICAgIGlmICghY29udGFpbmVyKSB0aHJvdyBcIkNhbm5vdCBpbml0aWFsaXplIHNob3djYXNlIHdpdGhvdXQgYSBjb250YWluZXIgdG8gcHV0IGl0IGluLlwiO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IE9iamVjdEhlbHBlci5hc3NpZ24oY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgcmlkZXN0eWxlclNob3djYXNlOiB0aGlzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhcmFtZXRlcnMoKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU3RhdGUoKTtcblxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNvbXBvbmVudHMoKTtcblxuICAgICAgICAgICAgYXBpLmluaXRpYWxpemUodGhpcy5zZXR0aW5ncyk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0eWxlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZpbHRlcnMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29tcG9uZW50cygpO1xuXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbihcInZlaGljbGUtc2VsZWN0ZWRcIiwgc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdmVoaWNsZVNlbGVjdGlvblN0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc2VsZWN0aW9uLlZlaGljbGVDb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOiBzZWxlY3Rpb24uVmVoaWNsZURlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDogc2VsZWN0aW9uLlRpcmVPcHRpb25JRCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHNlbGVjdGlvbi5UaXJlT3B0aW9uU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFpbnRTY2hlbWU6IHNlbGVjdGlvbi5QYWludFNjaGVtZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogc2VsZWN0aW9uLnZlaGljbGVIYXNBbmdsZWRJbWFnZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHNlbGVjdGlvbi52ZWhpY2xlSGFzU2lkZUltYWdlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IHNlbGVjdGlvbi5jdXJyZW50VGlyZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbDogc2VsZWN0aW9uLmN1cnJlbnRXaGVlbCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IHNlbGVjdGlvbi5jdXJyZW50V2hlZWxGaXRtZW50IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmVPcHRpb246IHNlbGVjdGlvbi5jdXJyZW50VGlyZU9wdGlvbiB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogc2VsZWN0aW9uLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdXNwZW5zaW9uOiBzZWxlY3Rpb24uY3VycmVudFN1c3BlbnNpb24gfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNoYW5nZVN0YXRlKFN0YXRlcy5WaXN1YWxpemUsIHZlaGljbGVTZWxlY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHNldHRpbmdzUmV0cmlldmVkID0gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5hdXRoZW50aWNhdGVkLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5zZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRvbmUoc2V0dGluZ3NGcm9tQVBJID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc0Zyb21BUEkgPSBzZXR0aW5nc0Zyb21BUEk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwoW3RoaXMuc3R5bGUuaW5pdGlhbGl6ZWQsIHNldHRpbmdzUmV0cmlldmVkXSkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignaW5pdGlhbGl6ZWQnLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZWQoe1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICAgICAgICBvbGRTdGF0ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG5ld0RhdGE6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBuZXcgc3RhdGUuUmlkZVN0eWxlclNob3djYXNlU3RhdGUoU3RhdGVzLkNob29zZVZlaGljbGUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Zy5zdGF0ZSA9PT0gdHJ1ZSkgdGhpcy5zdGF0ZS5kZWJ1Z0NhbGxiYWNrID0gZnVuY3Rpb24oZSwgZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmluaXNoZWRTdHJpbmcgPSBmaW5pc2hlZCA/ICdGaW5pc2hlZCcgOiAnQmVnaW5uaW5nJztcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGVDaGFuZ2UgPSBcInRvIFwiICsgU3RhdGVzW2UubmV3U3RhdGVdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLm9sZFN0YXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZUNoYW5nZSA9IFwiZnJvbSBcIiArIFN0YXRlc1tlLm9sZFN0YXRlXSArIFwiIFwiICsgc3RhdGVDaGFuZ2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSaWRlU3R5bGVyU2hvd2Nhc2UgU3RhdGVdICR7c3RhdGVDaGFuZ2V9ICR7ZmluaXNoZWRTdHJpbmd9YCwgZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm9uQ2hhbmdlKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLnRyaWdnZXIoXCJzdGF0ZS1jaGFuZ2VkXCIsIGUpICYmIHRoaXMub25TdGF0ZUNoYW5nZWQoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVN0eWxlKCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBzdHlsZXMuU3R5bGVNYW5hZ2VyKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25SZXNpemUgPSAoKSA9PiB0aGlzLmV2ZW50cy50cmlnZ2VyKCdyZXNpemUnLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5vblJlc2l6ZWQgPSAoKSA9PiB0aGlzLmV2ZW50cy50cmlnZ2VyKCdyZXNpemVkJywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25CcmVha3BvaW50Q2hhbmdlZCA9IG5ld0JyZWFrcG9pbnQgPT4gdGhpcy5ldmVudHMudHJpZ2dlcignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdyaWRlc3R5bGVyLXNob3djYXNlJykpXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplUGFyYW1ldGVycygpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IG5ldyBwYXJhbWV0ZXJzLlJpZGVTdHlsZXJTaG93Y2FzZVBhcmFtZXRlcnMoKTtcblxuICAgICAgICB9O1xuXG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplRmlsdGVycygpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IG5ldyBmaWx0ZXJzLkZpbHRlckNvbnRyb2xsZXIoKTtcblxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnNldFZlaGljbGUoe1xuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOiBzZWxlY3Rpb24uVmVoaWNsZUNvbmZpZ3VyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSUQ6IHNlbGVjdGlvbi5UaXJlT3B0aW9uSURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbihcInZlaGljbGUtZGVzY3JpcHRpb24tbG9hZGVkXCIsIHNlbGVjdGVkVmVoaWNsZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnNldFZlaGljbGVEZXNjcmlwdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIEhhc1NpZGVJbWFnZTogc2VsZWN0ZWRWZWhpY2xlLkhhc1NpZGVJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgSGFzQW5nbGVkSW1hZ2U6IHNlbGVjdGVkVmVoaWNsZS5IYXNBbmdsZWRJbWFnZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVDb21wb25lbnRzKCkge1xuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5vdGhlckNvbXBvbmVudHMpXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5tYWluQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29tcG9uZW50LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByaXZhdGUgb25TdGF0ZUNoYW5nZWQoZXY6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50KTpib29sZWFuIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudENvbXBvbmVudChldik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYWN0aXZlTG9hZGluZ1Nlc3Npb25LZXlzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ3VycmVudENvbXBvbmVudChldjpzdGF0ZS5TdGF0ZUNoYW5nZWRFdmVudCkge1xuICAgICAgICAgICAgbGV0IG5ld0NvbXBvbmVudDpNYWluQ29tcG9uZW50QmFzZSA9IHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW2V2Lm5ld1N0YXRlXTtcbiAgICAgICAgICAgIGxldCBvbGRDb21wb25lbnQ6TWFpbkNvbXBvbmVudEJhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNsYXNzUHJlZml4ID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc3RhdGUtJztcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBldi5vbGRTdGF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBvbGRDb21wb25lbnQgPSB0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tldi5vbGRTdGF0ZV07XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShzdGF0ZUNsYXNzUHJlZml4ICsgU3RhdGVzW2V2Lm9sZFN0YXRlXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChzdGF0ZUNsYXNzUHJlZml4ICsgU3RhdGVzW2V2Lm5ld1N0YXRlXS50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgICAgaWYgKG9sZENvbXBvbmVudCAmJiBvbGRDb21wb25lbnQuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICBvbGRDb21wb25lbnQuaGlkZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBkbyBub3QgaW5pdGlhbGl6ZSBpdFxuICAgICAqIEBwYXJhbSBzZXR0aW5nc1xuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBJRFxuICAgICAqIEBwYXJhbSBjb250YWluZXJJRCBTcGVjaWZpZXMgdGhlIElEIG9mIHRoZSBjb250YWluZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hvd2Nhc2UgaW5cbiAgICAgKiBAcGFyYW0gc2V0dGluZ3NcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlKGNvbnRhaW5lcklEOiBzdHJpbmcsIHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBpbml0aWFsaXplIGl0IGluc2lkZSB0aGUgc3BlY2lmaWVkIGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSBjb250YWluZXIgU3BlY2lmaWVzIHRoZSBlbGVtZW50IHRvIGluaXRpYWxpemUgdGhlIHNob3djYXNlIGluXG4gICAgICogQHBhcmFtIHNldHRpbmdzXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSAoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUgKGNvbnRhaW5lcj86IGFueSwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UoY29udGFpbmVyLCBzZXR0aW5ncyk7XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ComponentBase = function () {
        function ComponentBase(showcaseInstance) {
            _classCallCheck(this, ComponentBase);

            this.showcase = showcaseInstance;
            this.events = showcaseInstance.events;
            this.state = showcaseInstance.state;
            this.parameters = showcaseInstance.parameters;
            this.initializeComponent();
        }
        /**
         * A overridable function called after the base component is initialized
         * @virtual
         */


        _createClass(ComponentBase, [{
            key: "initializeComponent",
            value: function initializeComponent() {}
        }]);

        return ComponentBase;
    }();

    RideStylerShowcase.ComponentBase = ComponentBase;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ29tcG9uZW50QmFzZS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJDb21wb25lbnRCYXNlIiwic2hvd2Nhc2VJbnN0YW5jZSIsInNob3djYXNlIiwiZXZlbnRzIiwic3RhdGUiLCJwYXJhbWV0ZXJzIiwiaW5pdGlhbGl6ZUNvbXBvbmVudCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFBLFFBQ3hCQyxhQUR3QjtBQUVwQiwrQkFBYUMsZ0JBQWIsRUFBeUQ7QUFBQTs7QUFDckQsaUJBQUtDLFFBQUwsR0FBZ0JELGdCQUFoQjtBQUNBLGlCQUFLRSxNQUFMLEdBQWNGLGlCQUFpQkUsTUFBL0I7QUFDQSxpQkFBS0MsS0FBTCxHQUFhSCxpQkFBaUJHLEtBQTlCO0FBQ0EsaUJBQUtDLFVBQUwsR0FBa0JKLGlCQUFpQkksVUFBbkM7QUFFQSxpQkFBS0MsbUJBQUw7QUFDSDtBQVlEOzs7Ozs7QUFyQm9CO0FBQUE7QUFBQSxrREF5QlMsQ0FBSztBQXpCZDs7QUFBQTtBQUFBOztBQUNGUCx1QkFBQUMsYUFBQSxHQUFhQSxhQUFiO0FBMEJ6QixDQTNCRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL0NvbXBvbmVudEJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50QmFzZSBpbXBsZW1lbnRzIElDb21wb25lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvciAoc2hvd2Nhc2VJbnN0YW5jZTogUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd2Nhc2UgPSBzaG93Y2FzZUluc3RhbmNlO1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBzaG93Y2FzZUluc3RhbmNlLmV2ZW50cztcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBzaG93Y2FzZUluc3RhbmNlLnN0YXRlO1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gc2hvd2Nhc2VJbnN0YW5jZS5wYXJhbWV0ZXJzO1xuXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb21wb25lbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IHNob3djYXNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlO1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZXZlbnRzOmV2ZW50cy5FdmVudEhhbmRsZXI7XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBzdGF0ZTpzdGF0ZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZTtcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IHBhcmFtZXRlcnM6cGFyYW1ldGVycy5SaWRlU3R5bGVyU2hvd2Nhc2VQYXJhbWV0ZXJzO1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIGVsZW1lbnQgZm9yIHRoaXMgY29tcG9uZW50XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvdmVycmlkYWJsZSBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgdGhlIGJhc2UgY29tcG9uZW50IGlzIGluaXRpYWxpemVkXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHt9XG4gICAgfVxufSJdfQ==


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvSUNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var MainComponentBase = function (_RideStylerShowcase$C) {
        _inherits(MainComponentBase, _RideStylerShowcase$C);

        function MainComponentBase(showcaseInstance) {
            _classCallCheck(this, MainComponentBase);

            var _this = _possibleConstructorReturn(this, (MainComponentBase.__proto__ || Object.getPrototypeOf(MainComponentBase)).call(this, showcaseInstance));

            _this.component = document.createElement('div');
            _this.component.classList.add('ridestyler-showcase-main-component');
            if (RideStylerShowcase.StyleHelper.transitionsSupported) _this.component.addEventListener(RideStylerShowcase.StyleHelper.transitionEndEvent, function (e) {
                // Only transitions on this component element
                if (e.target !== _this.component) return;
                _this.onTransitionEnd();
            });
            _this.setVisible(false);
            _this.buildComponent(_this.component);
            _this.initializeMainComponent();
            return _this;
        }
        /**
         * A overridable function called after the base component is constructed
         * @virtual
         */


        _createClass(MainComponentBase, [{
            key: 'initializeComponent',
            value: function initializeComponent() {}
            /**
             * A overridable function called after the main component is constructed
             * @virtual
             */

        }, {
            key: 'initializeMainComponent',
            value: function initializeMainComponent() {}
            /**
             * Whether or not this component is visible
             * @return true, if this component is visible, otherwise false
             */

        }, {
            key: 'isVisible',
            value: function isVisible() {
                return this._visible;
            }
            /**
             * Hide/show the component without animation
             * @param visible If true, show the component, otherwise hide the component
             */

        }, {
            key: 'setVisible',
            value: function setVisible(visible) {
                var _this2 = this;

                if (this._visible === visible) return;
                this._visible = visible;
                this.setVisibleStyling(visible);
                RideStylerShowcase.StyleHelper.skipTransition(this.component, function () {
                    return visible ? _this2.show() : _this2.hide();
                });
            }
        }, {
            key: 'setVisibleStyling',
            value: function setVisibleStyling(visible) {
                var styles = this.component.style;
                if (visible) {
                    styles.visibility = 'visible';
                    styles.top = '';
                } else {
                    styles.visibility = 'hidden';
                    styles.top = '1000%';
                }
            }
        }, {
            key: 'callWhenDoneAnimating',
            value: function callWhenDoneAnimating(callback) {
                var _this3 = this;

                // Call the callback after the view has been animated in 
                if (this._animating) RideStylerShowcase.StyleHelper.onNextTransitionEnd(this.component, function () {
                    return callback.call(_this3);
                });else callback.call(this);
            }
            /**
             * Called before this component is shown
             * @virtual
             */

        }, {
            key: 'onShow',
            value: function onShow() {}
            /**
             * Called before this component is shown but after it has received dimensions
             */

        }, {
            key: 'onDisplay',
            value: function onDisplay() {}
            /**
             * Called after the component is shown
             * @virtual
             */

        }, {
            key: 'onShown',
            value: function onShown() {}
            /**
             * Called before the component is hidden
             * @virtual
             */

        }, {
            key: 'onHide',
            value: function onHide() {}
            /**
             * Called after the component is hidden
             * @virtual
             */

        }, {
            key: 'onHidden',
            value: function onHidden() {}
            /**
             * Animate the component into the view
             */

        }, {
            key: 'show',
            value: function show(callback) {
                var _this4 = this;

                if (this.component.classList.contains('in')) {
                    // The component is already visible, trigger the callback as needed
                    this._visible = true;
                    if (typeof callback === 'function') {
                        this.callWhenDoneAnimating(callback);
                    }
                    return;
                }
                if (this._animating) {
                    // This view is animating out, show it after it's done
                    RideStylerShowcase.StyleHelper.onNextTransitionEnd(this.component, function () {
                        return _this4.show(callback);
                    });
                    return;
                }
                this._visible = true;
                this._animating = RideStylerShowcase.StyleHelper.transitionsSupported;
                this.onShow();
                this.setVisibleStyling(true);
                RideStylerShowcase.StyleHelper.triggerReflow(this.component);
                this.onDisplay();
                this.callWhenDoneAnimating(function () {
                    this.onShown();
                    if (typeof callback === 'function') callback.call(this);
                });
                this.component.classList.add('in');
            }
            /**
             * Animate the component out of the view
             */

        }, {
            key: 'hide',
            value: function hide(callback) {
                var _this5 = this;

                if (!this.component.classList.contains('in')) {
                    // Already hidden
                    this._visible = false;
                    if (typeof callback === 'function') {
                        this.callWhenDoneAnimating(callback);
                    }
                    return;
                }
                if (this._animating) {
                    // This view is animating in, show it after it's done
                    RideStylerShowcase.StyleHelper.onNextTransitionEnd(this.component, function () {
                        return _this5.hide(callback);
                    });
                    return;
                }
                this._visible = false;
                this._animating = RideStylerShowcase.StyleHelper.transitionsSupported;
                this.onHide();
                this.callWhenDoneAnimating(function () {
                    this.onHidden();
                    if (typeof callback === 'function') callback.call(this);
                });
                this.component.classList.remove('in');
                if (!RideStylerShowcase.StyleHelper.transitionsSupported) this.setVisibleStyling(false);
            }
            /**
             * Hide components after transition out
             */

        }, {
            key: 'onTransitionEnd',
            value: function onTransitionEnd() {
                if (!this.component.classList.contains('in')) this.setVisibleStyling(false);
                this._animating = false;
            }
        }]);

        return MainComponentBase;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.MainComponentBase = MainComponentBase;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvTWFpbkNvbXBvbmVudEJhc2UudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiTWFpbkNvbXBvbmVudEJhc2UiLCJzaG93Y2FzZUluc3RhbmNlIiwiY29tcG9uZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiU3R5bGVIZWxwZXIiLCJ0cmFuc2l0aW9uc1N1cHBvcnRlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0cmFuc2l0aW9uRW5kRXZlbnQiLCJlIiwidGFyZ2V0Iiwib25UcmFuc2l0aW9uRW5kIiwic2V0VmlzaWJsZSIsImJ1aWxkQ29tcG9uZW50IiwiaW5pdGlhbGl6ZU1haW5Db21wb25lbnQiLCJfdmlzaWJsZSIsInZpc2libGUiLCJzZXRWaXNpYmxlU3R5bGluZyIsInNraXBUcmFuc2l0aW9uIiwic2hvdyIsImhpZGUiLCJzdHlsZXMiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJ0b3AiLCJjYWxsYmFjayIsIl9hbmltYXRpbmciLCJvbk5leHRUcmFuc2l0aW9uRW5kIiwiY2FsbCIsImNvbnRhaW5zIiwiY2FsbFdoZW5Eb25lQW5pbWF0aW5nIiwib25TaG93IiwidHJpZ2dlclJlZmxvdyIsIm9uRGlzcGxheSIsIm9uU2hvd24iLCJvbkhpZGUiLCJvbkhpZGRlbiIsInJlbW92ZSIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUEsUUFDeEJDLGlCQUR3QjtBQUFBOztBQUlwQixtQ0FBWUMsZ0JBQVosRUFBdUQ7QUFBQTs7QUFBQSw4SUFDN0NBLGdCQUQ2Qzs7QUFHbkQsa0JBQUtDLFNBQUwsR0FBaUJDLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBakI7QUFDQSxrQkFBS0YsU0FBTCxDQUFlRyxTQUFmLENBQXlCQyxHQUF6QixDQUE2QixvQ0FB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QW9CLFVBQXhCLEVBQ0lBLFNBQVNHLElBQVQsQ0FBYyxJQUFkO0FBQ1AsaUJBTEQ7QUFPQSxxQkFBSzVCLFNBQUwsQ0FBZUcsU0FBZixDQUF5QmtDLE1BQXpCLENBQWdDLElBQWhDO0FBRUEsb0JBQUksQ0FBQ3hDLG1CQUFBUSxXQUFBLENBQVlDLG9CQUFqQixFQUNJLEtBQUtXLGlCQUFMLENBQXVCLEtBQXZCO0FBQ1A7QUFFRDs7OztBQS9Mb0I7QUFBQTtBQUFBLDhDQWtNTDtBQUNYLG9CQUFJLENBQUMsS0FBS2pCLFNBQUwsQ0FBZUcsU0FBZixDQUF5QjBCLFFBQXpCLENBQWtDLElBQWxDLENBQUwsRUFDSSxLQUFLWixpQkFBTCxDQUF1QixLQUF2QjtBQUVKLHFCQUFLUyxVQUFMLEdBQWtCLEtBQWxCO0FBQ0g7QUF2TW1COztBQUFBO0FBQUEsTUFDd0I3QixtQkFBQXlDLGFBRHhCOztBQUNGekMsdUJBQUFDLGlCQUFBLEdBQWlCQSxpQkFBakI7QUF3TXpCLENBek1ELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvTWFpbkNvbXBvbmVudEJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWFpbkNvbXBvbmVudEJhc2UgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtbWFpbi1jb21wb25lbnQnKTtcblxuICAgICAgICAgICAgaWYgKFN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkKVxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoU3R5bGVIZWxwZXIudHJhbnNpdGlvbkVuZEV2ZW50LCBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB0cmFuc2l0aW9ucyBvbiB0aGlzIGNvbXBvbmVudCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcy5jb21wb25lbnQpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5idWlsZENvbXBvbmVudCh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZU1haW5Db21wb25lbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciB0aGUgYmFzZSBjb21wb25lbnQgaXMgY29uc3RydWN0ZWRcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge31cblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvdmVycmlkYWJsZSBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgdGhlIG1haW4gY29tcG9uZW50IGlzIGNvbnN0cnVjdGVkXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZU1haW5Db21wb25lbnQoKSB7fVxuXG4gICAgICAgIHByaXZhdGUgX3Zpc2libGU6IGJvb2xlYW47XG4gICAgICAgIHByaXZhdGUgX2FuaW1hdGluZzogYm9vbGVhbjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGNvbnRhaW5lciBUaGUgY29udGFpbmVyIHRvIGJ1aWxkIHRoZSBjb21wb25lbnQgaW5cbiAgICAgICAgICovXG5cbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcjpIVE1MRWxlbWVudCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9uZW50IGlzIHZpc2libGVcbiAgICAgICAgICogQHJldHVybiB0cnVlLCBpZiB0aGlzIGNvbXBvbmVudCBpcyB2aXNpYmxlLCBvdGhlcndpc2UgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGlzVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92aXNpYmxlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUvc2hvdyB0aGUgY29tcG9uZW50IHdpdGhvdXQgYW5pbWF0aW9uXG4gICAgICAgICAqIEBwYXJhbSB2aXNpYmxlIElmIHRydWUsIHNob3cgdGhlIGNvbXBvbmVudCwgb3RoZXJ3aXNlIGhpZGUgdGhlIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0VmlzaWJsZSh2aXNpYmxlOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl92aXNpYmxlID09PSB2aXNpYmxlKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlU3R5bGluZyh2aXNpYmxlKVxuXG4gICAgICAgICAgICBTdHlsZUhlbHBlci5za2lwVHJhbnNpdGlvbih0aGlzLmNvbXBvbmVudCwgKCkgPT4gdmlzaWJsZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZXRWaXNpYmxlU3R5bGluZyh2aXNpYmxlOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGxldCBzdHlsZXMgPSB0aGlzLmNvbXBvbmVudC5zdHlsZTtcblxuICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBzdHlsZXMudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgICAgICAgICBzdHlsZXMudG9wID0gJyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlcy52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgc3R5bGVzLnRvcCA9ICcxMDAwJSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjazoodGhpczp0aGlzKT0+dm9pZCkge1xuICAgICAgICAgICAgLy8gQ2FsbCB0aGUgY2FsbGJhY2sgYWZ0ZXIgdGhlIHZpZXcgaGFzIGJlZW4gYW5pbWF0ZWQgaW4gXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiBjYWxsYmFjay5jYWxsKHRoaXMpKTtcbiAgICAgICAgICAgIGVsc2UgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgYmVmb3JlIHRoaXMgY29tcG9uZW50IGlzIHNob3duXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93KCkge31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhpcyBjb21wb25lbnQgaXMgc2hvd24gYnV0IGFmdGVyIGl0IGhhcyByZWNlaXZlZCBkaW1lbnNpb25zXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25EaXNwbGF5KCkge31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBhZnRlciB0aGUgY29tcG9uZW50IGlzIHNob3duXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93bigpe31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBoaWRkZW5cbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGUoKSB7fVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgaGlkZGVuXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25IaWRkZW4oKSB7fVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbmltYXRlIHRoZSBjb21wb25lbnQgaW50byB0aGUgdmlld1xuICAgICAgICAgKi9cbiAgICAgICAgc2hvdyhjYWxsYmFjaz86KHRoaXM6dGhpcyk9PnZvaWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luJykpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgY29tcG9uZW50IGlzIGFscmVhZHkgdmlzaWJsZSwgdHJpZ2dlciB0aGUgY2FsbGJhY2sgYXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbFdoZW5Eb25lQW5pbWF0aW5nKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9hbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHZpZXcgaXMgYW5pbWF0aW5nIG91dCwgc2hvdyBpdCBhZnRlciBpdCdzIGRvbmVcbiAgICAgICAgICAgICAgICBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiB0aGlzLnNob3coY2FsbGJhY2spKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW5nID0gU3R5bGVIZWxwZXIudHJhbnNpdGlvbnNTdXBwb3J0ZWQ7XG5cblxuICAgICAgICAgICAgdGhpcy5vblNob3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlU3R5bGluZyh0cnVlKTtcblxuICAgICAgICAgICAgU3R5bGVIZWxwZXIudHJpZ2dlclJlZmxvdyh0aGlzLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIHRoaXMub25EaXNwbGF5KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2FsbFdoZW5Eb25lQW5pbWF0aW5nKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hvd24oKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuaW1hdGUgdGhlIGNvbXBvbmVudCBvdXQgb2YgdGhlIHZpZXdcbiAgICAgICAgICovXG4gICAgICAgIGhpZGUoY2FsbGJhY2s/Oih0aGlzOnRoaXMpPT52b2lkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5jb250YWlucygnaW4nKSkge1xuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgaGlkZGVuXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2aWV3IGlzIGFuaW1hdGluZyBpbiwgc2hvdyBpdCBhZnRlciBpdCdzIGRvbmVcbiAgICAgICAgICAgICAgICBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiB0aGlzLmhpZGUoY2FsbGJhY2spKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IFN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhpZGRlbigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QucmVtb3ZlKCdpbicpO1xuXG4gICAgICAgICAgICBpZiAoIVN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkKVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZVN0eWxpbmcoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUgY29tcG9uZW50cyBhZnRlciB0cmFuc2l0aW9uIG91dFxuICAgICAgICAgKi9cbiAgICAgICAgb25UcmFuc2l0aW9uRW5kKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luJykpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlU3R5bGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var defaultSize = {
        width: 200,
        height: 200
    };
    var minimumSize = {
        width: 50,
        height: 50
    };
    var maximumSize = {
        width: 800,
        height: 800
    };
    var defaultPosition = {
        PositionY: 0 /* Near */
        , PositionX: 0 /* Near */ // Left
    };

    var ResizeableResourceImage = function () {
        /**
         * @param container The container to render the image in
         * @param options
         */
        function ResizeableResourceImage(container, options) {
            var _this = this;

            _classCallCheck(this, ResizeableResourceImage);

            this.resizeCallback = function () {
                _this.update();
            };
            this.container = container;
            this.action = options.action;
            this.image = document.createElement('img');
            this.container.appendChild(this.image);
            this.events = [];
            if (options.transitionClass) {
                this.image.classList.add(options.transitionClass);
                this.useTransitions = true;
            }
            this.transitionInClass = options.transitionInClass;
            if (typeof options.padding === 'undefined') this.padding = RideStylerShowcase.StyleHelper.calculatePadding;else if (options.padding === false) this.padding = { width: 0, height: 0 };else this.padding = options.padding;
            this.imageLoadCallback = options.onLoad;
            this.imageErrorCallback = options.onError;
            this.image.addEventListener('error', function (error) {
                return _this.onImageError(error);
            });
            this.image.addEventListener('load', function (event) {
                return _this.onImageLoad(event);
            });
            if (_typeof(options.baseInstructions) === 'object') this.baseInstructions = options.baseInstructions;
            if (this.instructions && options.loadInitially !== false) this.update(this.instructions);
            if (options.listenToWindowResize !== false) {
                var timeout = void 0;
                var waitMs = 500;
                var resizeCallback = function resizeCallback() {
                    clearTimeout(timeout);
                    timeout = setTimeout(function () {
                        _this.update();
                    }, waitMs);
                };
                window.addEventListener('resize', resizeCallback, false);
                this.events.push([window, 'resize', resizeCallback]);
            }
        }
        /**
         * Call this function after the component will no longer be used
         * to remove any internally attached event handlers
         */


        _createClass(ResizeableResourceImage, [{
            key: 'destroy',
            value: function destroy() {
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.events[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var registeredEvent = _step.value;

                        var _registeredEvent = _slicedToArray(registeredEvent, 3),
                            target = _registeredEvent[0],
                            eventType = _registeredEvent[1],
                            listener = _registeredEvent[2];

                        target.removeEventListener(eventType, listener);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
            /**
             * Attached to the image error event
             * @param errorEvent The error event
             */

        }, {
            key: 'onImageError',
            value: function onImageError(errorEvent) {
                if (typeof this.imageErrorCallback === 'function') this.imageErrorCallback(this.image, errorEvent);
            }
            /**
             * Attached to the image load event
             * @param event The image load event
             */

        }, {
            key: 'onImageLoad',
            value: function onImageLoad(event) {
                if (typeof this.imageLoadCallback === 'function') this.imageLoadCallback(this.image, event);
                if (!this.visible) this.show();
            }
            /**
             * Show the image
             */

        }, {
            key: 'show',
            value: function show() {
                var _this2 = this;

                if (this.visible) return;
                if (this.useTransitions) {
                    RideStylerShowcase.VisibilityHelper.show(this.image, this.transitionInClass).done(function () {
                        if (typeof _this2.imageDisplayCallback === 'function') _this2.imageDisplayCallback(_this2.image);
                    });
                }
                this.visible = true;
            }
            /**
             * Calculate the size of the image from the container
             */

        }, {
            key: 'calculateRenderSize',
            value: function calculateRenderSize() {
                // Grab the size of the container
                var _container = this.container,
                    clientWidth = _container.clientWidth,
                    clientHeight = _container.clientHeight;
                // Return default size if the container was not able to be detected

                if (!clientHeight || !clientWidth) return defaultSize;
                // Grab the padding size
                var padding = typeof this.padding === 'function' ? this.padding(this.container) : this.padding;
                // The detected size of the container minus padding
                var detectedSize = {
                    width: clientWidth - padding.width,
                    height: clientHeight - padding.height
                };
                // Get the pixel ratio for retina screens
                var pixelRatio = window.devicePixelRatio || 1;
                // Adjust the detected size to account for pixel ratio
                detectedSize.width *= pixelRatio;
                detectedSize.height *= pixelRatio;
                return RideStylerShowcase.BoxHelper.floor(RideStylerShowcase.BoxHelper.bound(detectedSize, minimumSize, maximumSize));
            }
        }, {
            key: 'sizeIsDifferent',
            value: function sizeIsDifferent(box) {
                if (!this.currentSize) return true;
                var _currentSize = this.currentSize,
                    thisWidth = _currentSize.width,
                    thisHeight = _currentSize.height;
                var boxWidth = box.width,
                    boxHeight = box.height;

                return thisWidth !== boxWidth || thisHeight !== boxHeight;
            }
            /**
             * Update or create the image
             * @param instructions New instructions to render the image with
             */

        }, {
            key: 'update',
            value: function update(instructions) {
                var needsUpdate = false;
                // Update instructions
                if (instructions && this.instructions !== instructions) {
                    this.instructions = instructions;
                    needsUpdate = true;
                }
                // Update size
                {
                    var renderSize = this.calculateRenderSize();
                    if (this.sizeIsDifferent(renderSize)) {
                        this.currentSize = renderSize;
                        needsUpdate = true;
                    }
                }
                if (needsUpdate) {
                    var _currentSize2 = this.currentSize,
                        width = _currentSize2.width,
                        height = _currentSize2.height;

                    this.image.src = ridestyler.ajax.url(this.action, RideStylerShowcase.ObjectHelper.assign({
                        Width: width,
                        Height: height
                    }, defaultPosition, this.baseInstructions, this.instructions));
                }
            }
        }]);

        return ResizeableResourceImage;
    }();

    RideStylerShowcase.ResizeableResourceImage = ResizeableResourceImage;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmVzaXplYWJsZVJlc291cmNlSW1hZ2UudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiZGVmYXVsdFNpemUiLCJ3aWR0aCIsImhlaWdodCIsIm1pbmltdW1TaXplIiwibWF4aW11bVNpemUiLCJkZWZhdWx0UG9zaXRpb24iLCJQb3NpdGlvblkiLCJQb3NpdGlvblgiLCJSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSIsImNvbnRhaW5lciIsIm9wdGlvbnMiLCJyZXNpemVDYWxsYmFjayIsInVwZGF0ZSIsImFjdGlvbiIsImltYWdlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJldmVudHMiLCJ0cmFuc2l0aW9uQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1c2VUcmFuc2l0aW9ucyIsInRyYW5zaXRpb25JbkNsYXNzIiwicGFkZGluZyIsIlN0eWxlSGVscGVyIiwiY2FsY3VsYXRlUGFkZGluZyIsImltYWdlTG9hZENhbGxiYWNrIiwib25Mb2FkIiwiaW1hZ2VFcnJvckNhbGxiYWNrIiwib25FcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkltYWdlRXJyb3IiLCJlcnJvciIsIm9uSW1hZ2VMb2FkIiwiZXZlbnQiLCJiYXNlSW5zdHJ1Y3Rpb25zIiwiaW5zdHJ1Y3Rpb25zIiwibG9hZEluaXRpYWxseSIsImxpc3RlblRvV2luZG93UmVzaXplIiwidGltZW91dCIsIndhaXRNcyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJwdXNoIiwicmVnaXN0ZXJlZEV2ZW50IiwidGFyZ2V0IiwiZXZlbnRUeXBlIiwibGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXJyb3JFdmVudCIsInZpc2libGUiLCJzaG93IiwiVmlzaWJpbGl0eUhlbHBlciIsImRvbmUiLCJpbWFnZURpc3BsYXlDYWxsYmFjayIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiZGV0ZWN0ZWRTaXplIiwicGl4ZWxSYXRpbyIsImRldmljZVBpeGVsUmF0aW8iLCJCb3hIZWxwZXIiLCJmbG9vciIsImJvdW5kIiwiYm94IiwiY3VycmVudFNpemUiLCJ0aGlzV2lkdGgiLCJ0aGlzSGVpZ2h0IiwiYm94V2lkdGgiLCJib3hIZWlnaHQiLCJuZWVkc1VwZGF0ZSIsInJlbmRlclNpemUiLCJjYWxjdWxhdGVSZW5kZXJTaXplIiwic2l6ZUlzRGlmZmVyZW50Iiwic3JjIiwicmlkZXN0eWxlciIsImFqYXgiLCJ1cmwiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJXaWR0aCIsIkhlaWdodCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFHeEIsUUFBTUMsY0FBa0I7QUFDcEJDLGVBQU8sR0FEYTtBQUVwQkMsZ0JBQVE7QUFGWSxLQUF4QjtBQUtBLFFBQU1DLGNBQWtCO0FBQ3BCRixlQUFPLEVBRGE7QUFFcEJDLGdCQUFRO0FBRlksS0FBeEI7QUFLQSxRQUFNRSxjQUFrQjtBQUNwQkgsZUFBTyxHQURhO0FBRXBCQyxnQkFBUTtBQUZZLEtBQXhCO0FBS0EsUUFBTUcsa0JBQXlEO0FBQzNEQyxtQkFBUyxDQURrRCxDQUNsRDtBQURrRCxVQUUzREMsV0FBUyxDQUZrRCxDQUVsRCxVQUZrRCxDQUVSO0FBRlEsS0FBL0Q7O0FBbEJ3QixRQXVCeEJDLHVCQXZCd0I7QUFnR3BCOzs7O0FBSUEseUNBQVlDLFNBQVosRUFBbUNDLE9BQW5DLEVBdUVDO0FBQUE7O0FBQUE7O0FBNkRPLGlCQUFBQyxjQUFBLEdBQWlCLFlBQUs7QUFDMUIsc0JBQUtDLE1BQUw7QUFDSCxhQUZPO0FBNURKLGlCQUFLSCxTQUFMLEdBQWlCQSxTQUFqQjtBQUVBLGlCQUFLSSxNQUFMLEdBQWNILFFBQVFHLE1BQXRCO0FBRUEsaUJBQUtDLEtBQUwsR0FBYUMsU0FBU0MsYUFBVCxDQUF1QixLQUF2QixDQUFiO0FBQ0EsaUJBQUtQLFNBQUws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QUFBQSx3QkFDREMsTUFEQyxpQkFDREEsTUFEQzs7QUFHYix5QkFBS1ksS0FBTCxDQUFXNkQsR0FBWCxHQUFpQkMsV0FBV0MsSUFBWCxDQUFnQkMsR0FBaEIsQ0FBb0IsS0FBS2pFLE1BQXpCLEVBQWlDZCxtQkFBQWdGLFlBQUEsQ0FBYUMsTUFBYixDQUFvQjtBQUNsRUMsK0JBQU9oRixLQUQyRDtBQUVsRWlGLGdDQUFRaEY7QUFGMEQscUJBQXBCLEVBRy9DRyxlQUgrQyxFQUc5QixLQUFLK0IsZ0JBSHlCLEVBR1AsS0FBS0MsWUFIRSxDQUFqQyxDQUFqQjtBQUlIO0FBQ0o7QUE5Vm1COztBQUFBO0FBQUE7O0FBdUJYdEMsdUJBQUFTLHVCQUFBLEdBQXVCQSx1QkFBdkI7QUFnV2hCLENBdlhELEVBQVVULHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgQm94ID0gUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuQm94O1xuXG4gICAgY29uc3QgZGVmYXVsdFNpemU6Qm94ID0ge1xuICAgICAgICB3aWR0aDogMjAwLFxuICAgICAgICBoZWlnaHQ6IDIwMFxuICAgIH07XG5cbiAgICBjb25zdCBtaW5pbXVtU2l6ZTpCb3ggPSB7XG4gICAgICAgIHdpZHRoOiA1MCxcbiAgICAgICAgaGVpZ2h0OiA1MFxuICAgIH07XG5cbiAgICBjb25zdCBtYXhpbXVtU2l6ZTpCb3ggPSB7XG4gICAgICAgIHdpZHRoOiA4MDAsXG4gICAgICAgIGhlaWdodDogODAwXG4gICAgfTtcblxuICAgIGNvbnN0IGRlZmF1bHRQb3NpdGlvbjpyaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUmVuZGVyUmVxdWVzdCA9IHtcbiAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uTmVhciwgLy8gVG9wLFxuICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5OZWFyICAvLyBMZWZ0XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFxuICAgICAgICBFbmRwb2ludCBleHRlbmRzIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSUVuZHBvaW50LFxuICAgICAgICBJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucyBleHRlbmRzIHJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlcXVlc3RNYXBwaW5nW0VuZHBvaW50XXxyaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUmVuZGVyUmVxdWVzdFxuICAgICAgICAgICAgID0gcmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVxdWVzdE1hcHBpbmdbRW5kcG9pbnRdXG4gICAgPiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBib3VuZGluZyBjb250YWluZXIgZm9yIHRoZSBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGltYWdlOkhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgZGV0ZWN0ZWQgc2l6ZSBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGN1cnJlbnRTaXplOkJveDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFJpZGVTdHlsZXIgQVBJIGFjdGlvbiB0byBjYWxsIHRvIHJlbmRlciB0aGUgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgYWN0aW9uOkVuZHBvaW50O1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIGJhc2UgaW5zdHJ1Y3Rpb25zIHRvIHJlbmRlciB0aGUgdmVoaWNsZSB3aXRoXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGJhc2VJbnN0cnVjdGlvbnM6SW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IGluc3RydWN0aW9ucy9wYXJhbWV0ZXJzIHRvIHJlbmRlciB0aGUgaW1hZ2Ugd2l0aFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBpbnN0cnVjdGlvbnM6SW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUgdGhlIGltYWdlIGlzIHZpc2libGUgKG9yIHRyYW5zaXRpb25pbmcgdG8gYmUgdmlzaWJsZSlcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdmlzaWJsZTpib29sZWFuO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCB0cmFuc2l0aW9ucyBzaG91bGQgYmUgdXNlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB1c2VUcmFuc2l0aW9uczpib29sZWFuO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2xhc3MgdG8gYXR0YWNoIHRvIHRoZSBlbGVtZW50IHRvIHNob3cgaXQgd2l0aCBhIHRyYW5zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdHJhbnNpdGlvbkluQ2xhc3M6c3RyaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNhbGxiYWNrIHRvIGF0dGFjaCB0byB0aGUgaW1hZ2UgbG9hZCBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBpbWFnZUxvYWRDYWxsYmFjazpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUxvYWRDYWxsYmFjaztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayB0byBhdHRhY2ggdG8gdGhlIGltYWdlIGVycm9yIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGltYWdlRXJyb3JDYWxsYmFjazpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUVycm9yQ2FsbGJhY2s7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBpbWFnZSBpcyBkaXNwbGF5ZWRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgaW1hZ2VEaXNwbGF5Q2FsbGJhY2s6UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFdmVudENhbGxiYWNrO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcGFkZGluZyBvZiB0aGUgY29udGFpbmVyIG9yIHBhZGRpbmcgY2FsY3VsYXRvclxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwYWRkaW5nOiBCb3h8UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuUGFkZGluZ0NhbGN1bGF0b3I7XG5cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBldmVudHM6W0V2ZW50VGFyZ2V0LHN0cmluZyxFdmVudExpc3RlbmVyXVtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gcmVuZGVyIHRoZSBpbWFnZSBpblxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoY29udGFpbmVyOkhUTUxFbGVtZW50LCBvcHRpb25zOntcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGltYWdlIGVuZHBvaW50XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFjdGlvbjogRW5kcG9pbnQsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW5zdHJ1Y3Rpb25zIGZvciByZW5kZXJpbmcgdGhlIGltYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGluc3RydWN0aW9ucz86IEltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJhc2UgaW5zdHJ1Y3Rpb25zIGZvciByZW5kZXJpbmcgdGhlIGltYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGJhc2VJbnN0cnVjdGlvbnM/OiBJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucyxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCBsb2FkIHRoZSBpbWFnZSB3aGVuIGZpcnN0IGNyZWF0ZWRcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvYWRJbml0aWFsbHk/OiBib29sZWFuO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIGxpc3RlbiB0byB0aGUgd2luZG93IHJlc2l6ZSBldmVudFxuICAgICAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaXN0ZW5Ub1dpbmRvd1Jlc2l6ZT86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQSBmdW5jdGlvbiB0byBjYWxsIGVhY2ggdGltZSB0aGUgaW1hZ2UgaXMgbG9hZGVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uTG9hZD86IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlTG9hZENhbGxiYWNrO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBpbWFnZSBoYXMgYW4gZXJyb3IgbG9hZGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvbkVycm9yPzogUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFcnJvckNhbGxiYWNrO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBpbWFnZSBpcyBmdWxseSB2aXNpYmxlIChhZnRlciBhbnkgdHJhbnNpdGlvbnMpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uRGlzcGxheWVkPzogUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFdmVudENhbGxiYWNrO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBwYWRkaW5nIGZvciB0aGUgY29udGFpbmVyIHRvIGRpc3BsYXkgdGhlIGltYWdlIGluLiBJZiBub3Qgc3BlY2lmaWVkXG4gICAgICAgICAgICAgKiBpdCB3aWxsIGJlIGNhbGN1bGF0ZWQuIElmIGZhbHNlIHBhZGRpbmcgd2lsbCBub3QgYmUgY2FsY3VsYXRlZC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcGFkZGluZz86IGZhbHNlfFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkJveHxSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5QYWRkaW5nQ2FsY3VsYXRvcjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiBzcGVjaWZpZWQgdXNlIHRoZSBmb2xsb3dpbmcgdHJhbnNpdGlvbiBjbGFzcyB0byBkaXNwbGF5IHRoZSBpbWFnZS5cbiAgICAgICAgICAgICAqIElmIHVuc3BlY2lmaWVkIGRvbid0IHVzZSB0cmFuc2l0aW9uc1xuICAgICAgICAgICAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRyYW5zaXRpb25DbGFzcz86IHN0cmluZztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgY2xhc3MgdG8gYXBwbHkgdG8gdGhlIGltYWdlIHRvIHRyYW5zaXRpb24gaXQgXCJpblwiXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBcImluXCJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJhbnNpdGlvbkluQ2xhc3M/OiBzdHJpbmc7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGRlZmF1bHQgc2l6ZSBhdCB3aGljaCB0byByZW5kZXIgdGhlIGltYWdlIGlmIG9uZSBjYW5ub3RcbiAgICAgICAgICAgICAqIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCB7XCJ3aWR0aFwiOiAyMDAsIFwiaGVpZ2h0XCI6IDIwMH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGVmYXVsdFNpemU/OiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG51bWJlclxuICAgICAgICAgICAgfVxuICAgICAgICB9KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSBvcHRpb25zLmFjdGlvbjtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbWFnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gW107XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb25DbGFzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2UuY2xhc3NMaXN0LmFkZChvcHRpb25zLnRyYW5zaXRpb25DbGFzcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VUcmFuc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbkluQ2xhc3MgPSBvcHRpb25zLnRyYW5zaXRpb25JbkNsYXNzO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucGFkZGluZyA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMucGFkZGluZyA9IFN0eWxlSGVscGVyLmNhbGN1bGF0ZVBhZGRpbmc7XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnBhZGRpbmcgPT09IGZhbHNlKSB0aGlzLnBhZGRpbmcgPSB7d2lkdGg6IDAsIGhlaWdodDogMH07XG4gICAgICAgICAgICBlbHNlIHRoaXMucGFkZGluZyA9IG9wdGlvbnMucGFkZGluZztcblxuICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRDYWxsYmFjayA9IG9wdGlvbnMub25Mb2FkO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUVycm9yQ2FsbGJhY2sgPSBvcHRpb25zLm9uRXJyb3I7XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvciA9PiB0aGlzLm9uSW1hZ2VFcnJvcihlcnJvcikpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZXZlbnQgPT4gdGhpcy5vbkltYWdlTG9hZChldmVudCkpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYmFzZUluc3RydWN0aW9ucyA9PT0gJ29iamVjdCcpIHRoaXMuYmFzZUluc3RydWN0aW9ucyA9IG9wdGlvbnMuYmFzZUluc3RydWN0aW9uc1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbnMgJiYgb3B0aW9ucy5sb2FkSW5pdGlhbGx5ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLmluc3RydWN0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxpc3RlblRvV2luZG93UmVzaXplICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCB0aW1lb3V0Om51bWJlcjtcbiAgICAgICAgICAgICAgICBjb25zdCB3YWl0TXMgPSA1MDA7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgd2FpdE1zKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goW3dpbmRvdywgJ3Jlc2l6ZScsIHJlc2l6ZUNhbGxiYWNrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbCB0aGlzIGZ1bmN0aW9uIGFmdGVyIHRoZSBjb21wb25lbnQgd2lsbCBubyBsb25nZXIgYmUgdXNlZFxuICAgICAgICAgKiB0byByZW1vdmUgYW55IGludGVybmFsbHkgYXR0YWNoZWQgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBkZXN0cm95KCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCByZWdpc3RlcmVkRXZlbnQgb2YgdGhpcy5ldmVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgW3RhcmdldCwgZXZlbnRUeXBlLCBsaXN0ZW5lcl0gPSByZWdpc3RlcmVkRXZlbnQ7XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgcmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaGVkIHRvIHRoZSBpbWFnZSBlcnJvciBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXJyb3JFdmVudCBUaGUgZXJyb3IgZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgb25JbWFnZUVycm9yKGVycm9yRXZlbnQ6RXJyb3JFdmVudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltYWdlRXJyb3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUVycm9yQ2FsbGJhY2sodGhpcy5pbWFnZSwgZXJyb3JFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoZWQgdG8gdGhlIGltYWdlIGxvYWQgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IFRoZSBpbWFnZSBsb2FkIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG9uSW1hZ2VMb2FkKGV2ZW50OkV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW1hZ2VMb2FkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VMb2FkQ2FsbGJhY2sodGhpcy5pbWFnZSwgZXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMudmlzaWJsZSkgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvdyB0aGUgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgc2hvdygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGUpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHRoaXMudXNlVHJhbnNpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBWaXNpYmlsaXR5SGVscGVyLnNob3codGhpcy5pbWFnZSwgdGhpcy50cmFuc2l0aW9uSW5DbGFzcykuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbWFnZURpc3BsYXlDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGlzcGxheUNhbGxiYWNrKHRoaXMuaW1hZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgc2l6ZSBvZiB0aGUgaW1hZ2UgZnJvbSB0aGUgY29udGFpbmVyXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGNhbGN1bGF0ZVJlbmRlclNpemUoKTpCb3gge1xuICAgICAgICAgICAgLy8gR3JhYiB0aGUgc2l6ZSBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICBsZXQge2NsaWVudFdpZHRoLCBjbGllbnRIZWlnaHR9ID0gdGhpcy5jb250YWluZXI7XG5cbiAgICAgICAgICAgIC8vIFJldHVybiBkZWZhdWx0IHNpemUgaWYgdGhlIGNvbnRhaW5lciB3YXMgbm90IGFibGUgdG8gYmUgZGV0ZWN0ZWRcbiAgICAgICAgICAgIGlmICghY2xpZW50SGVpZ2h0IHx8ICFjbGllbnRXaWR0aCkgcmV0dXJuIGRlZmF1bHRTaXplO1xuXG4gICAgICAgICAgICAvLyBHcmFiIHRoZSBwYWRkaW5nIHNpemVcbiAgICAgICAgICAgIGxldCBwYWRkaW5nOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkJveCA9IHR5cGVvZiB0aGlzLnBhZGRpbmcgPT09ICdmdW5jdGlvbicgPyBcbiAgICAgICAgICAgICAgICB0aGlzLnBhZGRpbmcodGhpcy5jb250YWluZXIpIDpcbiAgICAgICAgICAgICAgICB0aGlzLnBhZGRpbmc7XG5cbiAgICAgICAgICAgIC8vIFRoZSBkZXRlY3RlZCBzaXplIG9mIHRoZSBjb250YWluZXIgbWludXMgcGFkZGluZ1xuICAgICAgICAgICAgbGV0IGRldGVjdGVkU2l6ZTpCb3ggPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGNsaWVudFdpZHRoIC0gcGFkZGluZy53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNsaWVudEhlaWdodCAtIHBhZGRpbmcuaGVpZ2h0XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBpeGVsIHJhdGlvIGZvciByZXRpbmEgc2NyZWVuc1xuICAgICAgICAgICAgbGV0IHBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuXG4gICAgICAgICAgICAvLyBBZGp1c3QgdGhlIGRldGVjdGVkIHNpemUgdG8gYWNjb3VudCBmb3IgcGl4ZWwgcmF0aW9cbiAgICAgICAgICAgIGRldGVjdGVkU2l6ZS53aWR0aCAqPSBwaXhlbFJhdGlvO1xuICAgICAgICAgICAgZGV0ZWN0ZWRTaXplLmhlaWdodCAqPSBwaXhlbFJhdGlvO1xuXG4gICAgICAgICAgICByZXR1cm4gQm94SGVscGVyLmZsb29yKEJveEhlbHBlci5ib3VuZChkZXRlY3RlZFNpemUsIG1pbmltdW1TaXplLCBtYXhpbXVtU2l6ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzaXplSXNEaWZmZXJlbnQoYm94OiBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5Cb3gpOmJvb2xlYW4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTaXplKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpc1dpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpc0hlaWdodFxuICAgICAgICAgICAgfSA9IHRoaXMuY3VycmVudFNpemU7XG5cbiAgICAgICAgICAgIGxldCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGJveFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogYm94SGVpZ2h0XG4gICAgICAgICAgICB9ID0gYm94O1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpc1dpZHRoICE9PSBib3hXaWR0aCB8fCB0aGlzSGVpZ2h0ICE9PSBib3hIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIG9yIGNyZWF0ZSB0aGUgaW1hZ2VcbiAgICAgICAgICogQHBhcmFtIGluc3RydWN0aW9ucyBOZXcgaW5zdHJ1Y3Rpb25zIHRvIHJlbmRlciB0aGUgaW1hZ2Ugd2l0aFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHVwZGF0ZShpbnN0cnVjdGlvbnM/OkltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICBsZXQgbmVlZHNVcGRhdGU6Ym9vbGVhbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgaW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb25zICYmIHRoaXMuaW5zdHJ1Y3Rpb25zICE9PSBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucztcbiAgICAgICAgICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBzaXplXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbmRlclNpemU6Qm94ID0gdGhpcy5jYWxjdWxhdGVSZW5kZXJTaXplKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXplSXNEaWZmZXJlbnQocmVuZGVyU2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2l6ZSA9IHJlbmRlclNpemU7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIGxldCB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLmN1cnJlbnRTaXplO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSByaWRlc3R5bGVyLmFqYXgudXJsKHRoaXMuYWN0aW9uLCBPYmplY3RIZWxwZXIuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgV2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBIZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgICAgIH0sIGRlZmF1bHRQb3NpdGlvbiwgdGhpcy5iYXNlSW5zdHJ1Y3Rpb25zLCB0aGlzLmluc3RydWN0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQm94IHtcbiAgICAgICAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VFdmVudENhbGxiYWNrIHtcbiAgICAgICAgICAgIChpbWFnZTpIVE1MSW1hZ2VFbGVtZW50KTp2b2lkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEltYWdlTG9hZENhbGxiYWNrIGV4dGVuZHMgSW1hZ2VFdmVudENhbGxiYWNrIHtcbiAgICAgICAgICAgIChpbWFnZTpIVE1MSW1hZ2VFbGVtZW50LCBldmVudDpFdmVudCk6dm9pZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBJbWFnZUVycm9yQ2FsbGJhY2sgZXh0ZW5kcyBJbWFnZUV2ZW50Q2FsbGJhY2sge1xuICAgICAgICAgICAgKGltYWdlOkhUTUxJbWFnZUVsZW1lbnQsIGV2ZW50OkVycm9yRXZlbnQpOnZvaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFBhZGRpbmdDYWxjdWxhdG9yIHtcbiAgICAgICAgICAgIChjb250YWluZXI6RWxlbWVudCk6Qm94O1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseBackground = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseBackground, _RideStylerShowcase$C);

        function RideStylerShowcaseBackground() {
            _classCallCheck(this, RideStylerShowcaseBackground);

            return _possibleConstructorReturn(this, (RideStylerShowcaseBackground.__proto__ || Object.getPrototypeOf(RideStylerShowcaseBackground)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseBackground, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var backgroundElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-background'
                });
                var backgroundTexture = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-background-texture',
                    appendTo: backgroundElement
                });
                this.component = backgroundElement;
            }
        }]);

        return RideStylerShowcaseBackground;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseBackground = RideStylerShowcaseBackground;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCYWNrZ3JvdW5kIiwiYmFja2dyb3VuZEVsZW1lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJhY2tncm91bmRUZXh0dXJlIiwiYXBwZW5kVG8iLCJjb21wb25lbnQiLCJDb21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFBLFFBQ3hCQyw0QkFEd0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLGtEQUlTO0FBQ3pCLG9CQUFJQyxvQkFBb0JGLG1CQUFBRyxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDcERDLCtCQUFXO0FBRHlDLGlCQUFoQyxDQUF4QjtBQUlBLG9CQUFJQyxvQkFBb0JOLG1CQUFBRyxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDcERDLCtCQUFXLHdDQUR5QztBQUVwREUsOEJBQVVMO0FBRjBDLGlCQUFoQyxDQUF4QjtBQUtBLHFCQUFLTSxTQUFMLEdBQWlCTixpQkFBakI7QUFDSDtBQWZtQjs7QUFBQTtBQUFBLE1BQzBCRixtQkFBQVMsYUFEMUI7O0FBQ1hULHVCQUFBQyw0QkFBQSxHQUE0QkEsNEJBQTVCO0FBZ0JoQixDQWpCRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb21wb25lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB2YXIgYmFja2dyb3VuZEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWJhY2tncm91bmQnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRUZXh0dXJlID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1iYWNrZ3JvdW5kLXRleHR1cmUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBiYWNrZ3JvdW5kRWxlbWVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gYmFja2dyb3VuZEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-button-picker';
    var optionClass = className + '-option';
    var activeClass = optionClass + '-active';
    var optionsCount = 1;

    var RideStylerShowcaseButtonPicker = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseButtonPicker, _RideStylerShowcase$C);

        function RideStylerShowcaseButtonPicker(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseButtonPicker);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseButtonPicker.__proto__ || Object.getPrototypeOf(RideStylerShowcaseButtonPicker)).call(this, showcaseInstance));

            _this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className,
                style: {
                    height: '2.5em'
                }
            });
            RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className + '-title',
                text: options.title,
                appendTo: _this.component
            }).addEventListener('click', function () {
                _this.optionContainer.style.opacity = _this.optionContainer.style.opacity == '0' ? '1' : '0';
                _this.optionContainer.style.transform = _this.optionContainer.style.transform == 'scaleY(0)' ? 'scaleY(1)' : 'scaleY(0)';
                _this.optionContainer.style.height = _this.optionContainer.style.height == '0px' ? 'auto' : '0px';
                switch (optionsCount) {
                    case 1:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '4.5em' : '2.5em';
                        break;
                    case 2:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '7em' : '2.5em';
                        break;
                    case 3:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '9.25em' : '2.5em';
                        break;
                    case 4:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '11.25em' : '2.5em';
                        break;
                    default:
                        _this.component.style.height = '2.5em';
                }
            });
            _this.optionContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className + '-option-container',
                appendTo: _this.component,
                style: {
                    opacity: '0',
                    height: '0px',
                    transform: 'scaleY(0)'
                }
            });
            _this.optionContainer.addEventListener('click', function (event) {
                _this.onOptionClick(event);
            });
            _this.optionContainer.addEventListener('DOMNodeInserted', function () {
                _this.optionContainer.style.opacity = '1';
                _this.optionContainer.style.transform = 'scaleY(1)';
                _this.optionContainer.style.height = 'auto';
                switch (optionsCount) {
                    case 1:
                        _this.component.style.height = '4.5em';
                        break;
                    case 2:
                        _this.component.style.height = '7em';
                        break;
                    case 3:
                        _this.component.style.height = '9.25em';
                        break;
                    case 4:
                        _this.component.style.height = '11.25em';
                        break;
                    default:
                        _this.component.style.height = '2.5em';
                        _this.optionContainer.style.opacity = '0';
                        _this.optionContainer.style.transform = 'scaleY(0)';
                        _this.optionContainer.style.height = '0px';
                }
            });
            return _this;
        }

        _createClass(RideStylerShowcaseButtonPicker, [{
            key: 'setOptions',
            value: function setOptions(options) {
                RideStylerShowcase.HTMLHelper.empty(this.optionContainer);
                optionsCount = options.length;
                var fragment = document.createDocumentFragment();
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = options[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var option = _step.value;

                        var optionElement = Object.assign(RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: optionClass,
                            text: option.label
                        }), {
                            value: option.value
                        });
                        if (option.active) optionElement.classList.add(activeClass);
                        fragment.appendChild(optionElement);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                this.optionContainer.appendChild(fragment);
            }
        }, {
            key: 'onOptionClick',
            value: function onOptionClick(event) {
                var currentTarget = event.target;
                // Iterate through parents until we've reached the bound element
                while (currentTarget !== this.optionContainer) {
                    if (currentTarget.classList.contains(optionClass)) {
                        // An option was clicked
                        // Remove the active class from the old option
                        var _iteratorNormalCompletion2 = true;
                        var _didIteratorError2 = false;
                        var _iteratorError2 = undefined;

                        try {
                            for (var _iterator2 = RideStylerShowcase.HTMLHelper.childrenWithClasses(this.optionContainer, activeClass)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                                var child = _step2.value;

                                child.classList.remove(activeClass);
                            } // Add it to the new one
                        } catch (err) {
                            _didIteratorError2 = true;
                            _iteratorError2 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                    _iterator2.return();
                                }
                            } finally {
                                if (_didIteratorError2) {
                                    throw _iteratorError2;
                                }
                            }
                        }

                        currentTarget.classList.add(activeClass);
                        if (typeof this.optionSelectedCallback === 'function') this.optionSelectedCallback(currentTarget.value);
                        return;
                    }
                    currentTarget = currentTarget.parentElement;
                }
            }
        }]);

        return RideStylerShowcaseButtonPicker;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseButtonPicker = RideStylerShowcaseButtonPicker;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsIm9wdGlvbkNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJvcHRpb25zQ291bnQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIiLCJzaG93Y2FzZUluc3RhbmNlIiwib3B0aW9ucyIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJoZWlnaHQiLCJ0ZXh0IiwidGl0bGUiLCJhcHBlbmRUbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcHRpb25Db250YWluZXIiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwib25PcHRpb25DbGljayIsImV2ZW50IiwiZW1wdHkiLCJsZW5ndGgiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsIm9wdGlvbiIsIm9wdGlvbkVsZW1lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJsYWJlbCIsInZhbHVlIiwiYWN0aXZlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJjaGlsZHJlbldpdGhDbGFzc2VzIiwiY2hpbGQiLCJyZW1vdmUiLCJvcHRpb25TZWxlY3RlZENhbGxiYWNrIiwicGFyZW50RWxlbWVudCIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVksbUNBQWxCO0FBQ0EsUUFBTUMsY0FBY0QsWUFBWSxTQUFoQztBQUNBLFFBQU1FLGNBQWNELGNBQWMsU0FBbEM7QUFDQSxRQUFNRSxlQUFlLENBQXJCOztBQUp3QixRQU14QkMsOEJBTndCO0FBQUE7O0FBVXBCLGdE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WixLQUF1QyxVQUEzQyxFQUNJLEtBQUtBLHNCQUFMLENBQTZCTixjQUFrRUwsS0FBL0Y7QUFFSjtBQUNIO0FBRURLLG9DQUFnQkEsY0FBY08sYUFBOUI7QUFDSDtBQUNKO0FBcEltQjs7QUFBQTtBQUFBLE1BTStCNUMsbUJBQUE2QyxhQU4vQjs7QUFNWDdDLHVCQUFBSyw4QkFBQSxHQUE4QkEsOEJBQTlCO0FBa0poQixDQXhKRCxFQUFVTCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXInO1xuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gY2xhc3NOYW1lICsgJy1vcHRpb24nO1xuICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWFjdGl2ZSc7XG4gICAgbGV0ICAgb3B0aW9uc0NvdW50ID0gMTtcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8VD4gZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHVibGljIG9wdGlvbkNsaWNrZWQ6IGJvb2xlYW47IFxuICAgICAgICBwcml2YXRlIG9wdGlvbkNvbnRhaW5lcjpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOiBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIuU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzIuNWVtJyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnLFxuICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbnMudGl0bGUsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9PSAnMCcgPyAnMScgOiAnMCc7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID09ICdzY2FsZVkoMCknID8gJ3NjYWxlWSgxKScgOiAnc2NhbGVZKDApJztcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPT0gJzBweCcgPyAnYXV0bycgOiAnMHB4JztcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9PSAnMi41ZW0nID8gJzQuNWVtJyA6ICcyLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnN2VtJyA6ICcyLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnOS4yNWVtJyA6ICcyLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnMTEuMjVlbScgOiAnMi41ZW0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnMi41ZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW9wdGlvbi1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAnMCcsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWSgwKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wdGlvbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVZKDEpJztcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnYXV0byc7ICBcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICc0LjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzdlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzkuMjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzExLjI1ZW0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnMi41ZW0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVkoMCknO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiBcbiAgICAgICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLk9wdGlvbjxUPltdKSB7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgb3B0aW9uc0NvdW50ID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbkVsZW1lbnQ6UmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLk9wdGlvbkVsZW1lbnQ8VD4gPSBPYmplY3QuYXNzaWduKEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb24ubGFiZWxcbiAgICAgICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmFjdGl2ZSkgb3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcblxuICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uT3B0aW9uQ2xpY2soZXZlbnQ6TW91c2VFdmVudCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6SFRNTEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBwYXJlbnRzIHVudGlsIHdlJ3ZlIHJlYWNoZWQgdGhlIGJvdW5kIGVsZW1lbnRcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLm9wdGlvbkNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25DbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQW4gb3B0aW9uIHdhcyBjbGlja2VkXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBhY3RpdmUgY2xhc3MgZnJvbSB0aGUgb2xkIG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBIVE1MSGVscGVyLmNoaWxkcmVuV2l0aENsYXNzZXModGhpcy5vcHRpb25Db250YWluZXIsIGFjdGl2ZUNsYXNzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgbmV3IG9uZVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoYWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25TZWxlY3RlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25TZWxlY3RlZENhbGxiYWNrKChjdXJyZW50VGFyZ2V0IGFzIFJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5PcHRpb25FbGVtZW50PFQ+KS52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgb3B0aW9uU2VsZWN0ZWRDYWxsYmFjazogKHZhbHVlOlQpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzIHtcbiAgICAgICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbkVsZW1lbnQ8VD4gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgICAgICB2YWx1ZTogVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uPFQ+IHtcbiAgICAgICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICAgICAgICB2YWx1ZTogVDtcbiAgICAgICAgICAgIGFjdGl2ZT86IGJvb2xlYW47XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseChangeWheelSize = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseChangeWheelSize, _RideStylerShowcase$R);

        function RideStylerShowcaseChangeWheelSize(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseChangeWheelSize);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseChangeWheelSize.__proto__ || Object.getPrototypeOf(RideStylerShowcaseChangeWheelSize)).call(this, showcaseInstance, {
                title: RideStylerShowcase.strings.getString('change-wheel-size')
            }));

            _this.component.classList.add('ridestyler-showcase-change-wheel-size');
            return _this;
        }

        _createClass(RideStylerShowcaseChangeWheelSize, [{
            key: 'setFitmentOptions',
            value: function setFitmentOptions(fitments, activeFitment) {
                var seenDiameters = {};
                var diameterFitments = [];
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = fitments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var fitment = _step.value;

                        var diameter = fitment.DiameterMin;
                        if (diameter in seenDiameters === false) {
                            seenDiameters[diameter] = true;
                            diameterFitments.push([diameter, fitment]);
                        }
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                diameterFitments.sort(function (a, b) {
                    return a[0] - b[0];
                });
                if (diameterFitments.length === 1) {
                    this.component.style.display = 'none';
                }
                this.setOptions(RideStylerShowcase.ArrayHelper.map(diameterFitments, function (diameterFitment) {
                    return {
                        label: diameterFitment[0] + '',
                        value: diameterFitment[1],
                        active: diameterFitment[1] === activeFitment
                    };
                }));
            }
        }]);

        return RideStylerShowcaseChangeWheelSize;
    }(RideStylerShowcase.RideStylerShowcaseButtonPicker);

    RideStylerShowcase.RideStylerShowcaseChangeWheelSize = RideStylerShowcaseChangeWheelSize;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSIsInNob3djYXNlSW5zdGFuY2UiLCJ0aXRsZSIsInN0cmluZ3MiLCJnZXRTdHJpbmciLCJjb21wb25lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJmaXRtZW50cyIsImFjdGl2ZUZpdG1lbnQiLCJzZWVuRGlhbWV0ZXJzIiwiZGlhbWV0ZXJGaXRtZW50cyIsImZpdG1lbnQiLCJkaWFtZXRlciIsIkRpYW1ldGVyTWluIiwicHVzaCIsInNvcnQiLCJhIiwiYiIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNldE9wdGlvbnMiLCJBcnJheUhlbHBlciIsIm1hcCIsImxhYmVsIiwiZGlhbWV0ZXJGaXRtZW50IiwidmFsdWUiLCJhY3RpdmUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUEsUUFFeEJDLGlDQUZ3QjtBQUFBOztBQUdwQixtREFBWUMsZ0JBQVosRUFBdUQ7QUFBQTs7QUFBQSw4S0FDN0NBLGdCQUQ2QyxFQUMzQjtBQUNwQkMsdUJBQU9ILG1CQUFBSSxPQUFBLENBQVFDLFNBQVIsQ0FBa0IsbUJBQWxCO0FBRGEsYUFEMkI7O0FBS25ELGtCQUFLQyxTQUFMLENBQWVDLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCLHVDQUE3QjtBQUxtRDtBQU10RDs7QUFUbUI7QUFBQTtBQUFBLDhDQVdLQyxRQVhMLEVBVzhDQyxhQVg5QyxFQVd5RjtBQUN6RyxvQkFBSUMsZ0JBQWdCLEVBQXBCO0FBQ0Esb0JBQUlDLG1CQUEyRCxFQUEvRDtBQUZ5RztBQUFBO0FBQUE7O0FBQUE7QUFJekcseUNBQW9CSCxRQUFwQiw4SEFBOEI7QUFBQSw0QkFBckJJLE9BQXFCOztBQUMxQiw0QkFBSUMsV0FBV0QsUUFBUUUsV0FBdkI7QUFFQSw0QkFBSUQsWUFBWUgsYUFBWixLQUE4QixLQUFsQyxFQUF5QztBQUNyQ0EsMENBQWNHLFFBQWQsSUFBMEIsSUFBMUI7QUFFQUYsNkNBQWlCSSxJQUFqQixDQUFzQixDQUFDRixRQUFELEVBQVdELE9BQVgsQ0FBdEI7QUFDSDtBQUNKO0FBWndHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBY3pHRCxpQ0FBaUJLLElBQWpCLENBQXNCLFVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFjO0FBQ2hDLDJCQUFPRCxFQUFFLENBQUYsSUFBT0MsRUFBRSxDQUFGLENBQWQ7QUFDSCxpQkFGRDtBQUlBLG9CQUFJUCxpQkFBaUJRLE1BQWpCLEtBQTRCLENBQWhDLEVBQW1DO0FBQy9CLHlCQUFLZCxTQUFMLENBQWVlLEtBQWYsQ0FBcUJDLE9BQXJCLEdBQStCLE1BQS9CO0FBQ0g7QUFFRCxxQkFBS0MsVUFBTCxDQUFnQnZCLG1CQUFBd0IsV0FBQSxDQUFZQyxHQUFaLENBQWdCYixnQkFBaEIsRUFBa0MsMkJBQWtCO0FBQ2hFLDJCQUFPO0FBQ0hjLCtCQUFPQyxnQkFBZ0IsQ0FBaEIsSUFBcUIsR0FEekI7QUFFSEMsK0JBQU9ELGdCQUFnQixDQUFoQixDQUZKO0FBR0hFLGdDQUFRRixnQkFBZ0IsQ0FBaEIsTUFBdUJqQjtBQUg1QixxQkFBUDtBQUtILGlCQU5lLENBQWhCO0FBT0g7QUF4Q21COztBQUFBO0FBQUEsTUFFK0JWLG1CQUFBOEIsOEJBRi9COztBQUVYOUIsdUJBQUFDLGlDQUFBLEdBQWlDQSxpQ0FBakM7QUF3Q2hCLENBMUNELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbD4ge1xuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2Utd2hlZWwtc2l6ZScpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jaGFuZ2Utd2hlZWwtc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzOldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSwgYWN0aXZlRml0bWVudD86V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCkge1xuICAgICAgICAgICAgbGV0IHNlZW5EaWFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGxldCBkaWFtZXRlckZpdG1lbnRzOltudW1iZXIsV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbF1bXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBmaXRtZW50IG9mIGZpdG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpYW1ldGVyID0gZml0bWVudC5EaWFtZXRlck1pbjtcblxuICAgICAgICAgICAgICAgIGlmIChkaWFtZXRlciBpbiBzZWVuRGlhbWV0ZXJzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWVuRGlhbWV0ZXJzW2RpYW1ldGVyXSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5wdXNoKFtkaWFtZXRlciwgZml0bWVudF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChkaWFtZXRlckZpdG1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9ucyhBcnJheUhlbHBlci5tYXAoZGlhbWV0ZXJGaXRtZW50cywgZGlhbWV0ZXJGaXRtZW50ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXJGaXRtZW50WzBdICsgJ+KAsycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlckZpdG1lbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZGlhbWV0ZXJGaXRtZW50WzFdID09PSBhY3RpdmVGaXRtZW50XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var modalClass = 'ridestyler-showcase-modal';
    var backdropClass = modalClass + '-backdrop';

    var RideStylerShowcaseModal = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseModal, _RideStylerShowcase$C);

        function RideStylerShowcaseModal(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseModal);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseModal)).call(this, showcaseInstance));

            _this.options = options;
            // Create the backdrop if needed
            _this.createBackdropIfNeeded();
            // Create the modal
            _this.buildModal();
            // Modals start off hidden until shown
            _this.setVisibility(false);
            // Modals are appended to the showcase container
            _this.parent = showcaseInstance.container;
            _this.parent.appendChild(_this.component);
            return _this;
        }
        /**
         * Build the modal DOM structure
         */


        _createClass(RideStylerShowcaseModal, [{
            key: 'buildModal',
            value: function buildModal() {
                var _this2 = this;

                this.component = Object.assign(RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: modalClass
                }), {
                    modal: this
                });
                if (this.options.full) this.component.classList.add(modalClass + '-full');
                RideStylerShowcase.HTMLHelper.createElement('button', {
                    className: modalClass + '-close',
                    appendTo: this.component
                }).addEventListener('click', function () {
                    _this2.hide();
                });
                if (this.options.actions) this.buildActions(this.options.actions);
            }
        }, {
            key: 'buildActions',
            value: function buildActions(actions) {
                var _this3 = this;

                var actionContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: modalClass + '-actions',
                    appendTo: this.component
                });

                var _loop = function _loop(action) {
                    var actionButton = RideStylerShowcase.HTMLHelper.createButton(RideStylerShowcase.ObjectHelper.assign({
                        appendTo: actionContainer
                    }, action));
                    actionButton.addEventListener('click', function () {
                        if (typeof action.action === 'function') action.action();else if (action.action === 'hide-modal') {
                            _this3.hide();
                        }
                    });
                };

                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = actions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var action = _step.value;

                        _loop(action);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
            /**
             * Called when this modal is layed-out and about to transition in
             * @virtual
             */

        }, {
            key: 'onShow',
            value: function onShow() {
                this.events.trigger('modal-show', { modal: this });
            }
            /**
             * Called when this modal is visible
             * @virtual
             */

        }, {
            key: 'onShown',
            value: function onShown() {}
            /**
             * Called when this modal is about to transition out
             * @virtual
             */

        }, {
            key: 'onHide',
            value: function onHide() {
                this.events.trigger('modal-hide', { modal: this });
            }
            /**
             * Called when this modal is hidden
             * @virtual
             */

        }, {
            key: 'onHidden',
            value: function onHidden() {
                if (this.options.removeOnHidden) {
                    this.parent.removeChild(this.component);
                }
            }
        }, {
            key: 'show',
            value: function show() {
                var _this4 = this;

                var promise = RideStylerShowcase.VisibilityHelper.show(this.component);
                this.onShow();
                promise.done(function () {
                    return _this4.onShown();
                });
                return promise;
            }
        }, {
            key: 'hide',
            value: function hide() {
                var _this5 = this;

                var promise = RideStylerShowcase.VisibilityHelper.hide(this.component);
                this.onHide();
                promise.done(function () {
                    return _this5.onHidden();
                });
                return promise;
            }
        }, {
            key: 'setVisibility',
            value: function setVisibility(visible) {
                RideStylerShowcase.VisibilityHelper.setVisibility(this.component, visible);
            }
            /**
             * Creates the backdrop if needed
             */

        }, {
            key: 'createBackdropIfNeeded',
            value: function createBackdropIfNeeded() {
                // If there's no previously existing backdrop create a new one
                if (!RideStylerShowcase.HTMLHelper.hasChildWithClass(this.showcase.container, backdropClass)) new RideStylerShowcaseModalBackdrop(this.showcase);
            }
        }]);

        return RideStylerShowcaseModal;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseModal = RideStylerShowcaseModal;

    var RideStylerShowcaseModalBackdrop = function (_RideStylerShowcase$C2) {
        _inherits(RideStylerShowcaseModalBackdrop, _RideStylerShowcase$C2);

        function RideStylerShowcaseModalBackdrop(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseModalBackdrop);

            // Create the backdrop
            var _this6 = _possibleConstructorReturn(this, (RideStylerShowcaseModalBackdrop.__proto__ || Object.getPrototypeOf(RideStylerShowcaseModalBackdrop)).call(this, showcaseInstance));

            _this6.buildBackdrop();
            // The backdrop starts off hidden
            _this6.setVisibility(false);
            // Append the backdrop to the showcase container
            showcaseInstance.container.appendChild(_this6.component);
            return _this6;
        }

        _createClass(RideStylerShowcaseModalBackdrop, [{
            key: 'buildBackdrop',
            value: function buildBackdrop() {
                var _this7 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', backdropClass);
                this.component.addEventListener('click', function () {
                    var topVisibleModal = RideStylerShowcase.HTMLHelper.lastSiblingWithClass(_this7.component, modalClass, 'in');
                    if (topVisibleModal) {
                        topVisibleModal.modal.hide();
                    }
                });
            }
        }, {
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this8 = this;

                this.events.on('modal-show', function (event) {
                    _this8.update();
                });
                this.events.on('modal-hide', function (event) {
                    _this8.update();
                });
            }
            /**
             * Hide or show the backdrop based off the number of visible modals
             */

        }, {
            key: 'update',
            value: function update() {
                var hasVisibleModal = RideStylerShowcase.HTMLHelper.hasSiblingWithClass(this.component, modalClass, 'in');
                this[hasVisibleModal ? 'show' : 'hide']();
            }
        }, {
            key: 'show',
            value: function show() {
                return RideStylerShowcase.VisibilityHelper.show(this.component);
            }
        }, {
            key: 'hide',
            value: function hide() {
                return RideStylerShowcase.VisibilityHelper.hide(this.component);
            }
        }, {
            key: 'setVisibility',
            value: function setVisibility(visible) {
                RideStylerShowcase.VisibilityHelper.setVisibility(this.component, visible);
            }
        }]);

        return RideStylerShowcaseModalBackdrop;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseModalBackdrop = RideStylerShowcaseModalBackdrop;
    (function (RideStylerShowcaseModal) {
        ;
    })(RideStylerShowcaseModal = RideStylerShowcase.RideStylerShowcaseModal || (RideStylerShowcase.RideStylerShowcaseModal = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlTW9kYWwudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwibW9kYWxDbGFzcyIsImJhY2tkcm9wQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCIsInNob3djYXNlSW5zdGFuY2UiLCJvcHRpb25zIiwiY3JlYXRlQmFja2Ryb3BJZk5lZWRlZCIsImJ1aWxkTW9kYWwiLCJzZXRWaXNpYmlsaXR5IiwicGFyZW50IiwiY29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJjb21wb25lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm1vZGFsIiwiZnVsbCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZFRvIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJhY3Rpb25zIiwiYnVpbGRBY3Rpb25zIiwiYWN0aW9uQ29udGFpbmVyIiwiYWN0aW9uIiwiYWN0aW9uQnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwiT2JqZWN0SGVscGVyIiwiZXZlbnRzIiwidHJpZ2dlciIsInJlbW92ZU9uSGlkZGVuIiwicmVtb3ZlQ2hpbGQiLCJwcm9taXNlIiwiVmlzaWJpbGl0eUhlbHBlciIsInNob3ciLCJvblNob3ciLCJkb25lIiwib25TaG93biIsIm9uSGlkZSIsIm9uSGlkZGVuIiwidmlzaWJsZSIsImhhc0NoaWxkV2l0aENsYXNzIiwic2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbEJhY2tkcm9wIiwiQ29tcG9uZW50QmFzZSIsImJ1aWxkQmFja2Ryb3AiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwidG9wVmlzaWJsZU1vZGFsIiwibGFzdFNpYmxpbmdXaXRoQ2xhc3MiLCJvbiIsInVwZGF0ZSIsImhhc1Zpc2libGVNb2RhbCIsImhhc1NpYmxpbmdXaXRoQ2xhc3MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7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bUJBQVgsQ0FBK0IsS0FBSzVDLFNBQXBDLEVBQStDWCxVQUEvQyxFQUEyRCxJQUEzRCxDQUE5QjtBQUVBLHFCQUFLc0Qsa0JBQWtCLE1BQWxCLEdBQTJCLE1BQWhDO0FBQ0g7QUFoTW1CO0FBQUE7QUFBQSxtQ0FrTVQ7QUFDUCx1QkFBT3ZELG1CQUFBcUMsZ0JBQUEsQ0FBaUJDLElBQWpCLENBQXNCLEtBQUsxQixTQUEzQixDQUFQO0FBQ0g7QUFwTW1CO0FBQUE7QUFBQSxtQ0FzTVQ7QUFDUCx1QkFBT1osbUJBQUFxQyxnQkFBQSxDQUFpQmIsSUFBakIsQ0FBc0IsS0FBS1osU0FBM0IsQ0FBUDtBQUNIO0FBeE1tQjtBQUFBO0FBQUEsMENBME1DZ0MsT0ExTUQsRUEwTWlCO0FBQ2pDNUMsbUNBQUFxQyxnQkFBQSxDQUFpQjdCLGFBQWpCLENBQStCLEtBQUtJLFNBQXBDLEVBQStDZ0MsT0FBL0M7QUFDSDtBQTVNbUI7O0FBQUE7QUFBQSxNQXFKNkI1QyxtQkFBQWdELGFBcko3Qjs7QUFxSlhoRCx1QkFBQStDLCtCQUFBLEdBQStCQSwrQkFBL0I7QUEwRGIsS0FBQSxVQUFpQjVDLHVCQUFqQixFQUF3QztBQUduQztBQWtCSixLQXJCRCxFQUFpQkEsMEJBQUFILG1CQUFBRyx1QkFBQSxLQUFBSCxtQkFBQUcsdUJBQUEsR0FBdUIsRUFBdkIsQ0FBakI7QUFzQkgsQ0FyT0QsRUFBVUgsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IG1vZGFsQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1tb2RhbCc7XG4gICAgY29uc3QgYmFja2Ryb3BDbGFzcyA9IG1vZGFsQ2xhc3MgKyAnLWJhY2tkcm9wJztcblxuICAgIGltcG9ydCBBY3Rpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC5BY3Rpb247XG4gICAgaW1wb3J0IE9wdGlvbnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC5PcHRpb25zO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFpbiBtb2RhbCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgZGlzcGxheWVkIGJhY2tkcm9wXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgYmFja2Ryb3A6IEhUTUxFbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhcmVudCBlbGVtZW50IG9mIHRoZSBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBwYXJlbnQ6Tm9kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcHRpb25zIHRoYXQgdGhlIG1vZGFsIHdhcyBjcmVhdGVkIHdpdGhcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBvcHRpb25zOiBPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6IE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGJhY2tkcm9wIGlmIG5lZWRlZFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVCYWNrZHJvcElmTmVlZGVkKCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbW9kYWxcbiAgICAgICAgICAgIHRoaXMuYnVpbGRNb2RhbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2RhbHMgc3RhcnQgb2ZmIGhpZGRlbiB1bnRpbCBzaG93blxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gTW9kYWxzIGFyZSBhcHBlbmRlZCB0byB0aGUgc2hvd2Nhc2UgY29udGFpbmVyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHNob3djYXNlSW5zdGFuY2UuY29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1aWxkIHRoZSBtb2RhbCBET00gc3RydWN0dXJlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYnVpbGRNb2RhbCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gT2JqZWN0LmFzc2lnbihIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG1vZGFsQ2xhc3NcbiAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgbW9kYWw6IHRoaXNcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZ1bGwpIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQobW9kYWxDbGFzcyArICctZnVsbCcpXG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogbW9kYWxDbGFzcyArICctY2xvc2UnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hY3Rpb25zKVxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRBY3Rpb25zKHRoaXMub3B0aW9ucy5hY3Rpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRBY3Rpb25zKGFjdGlvbnM6IEFjdGlvbltdKSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBtb2RhbENsYXNzICsgJy1hY3Rpb25zJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25CdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbihPYmplY3RIZWxwZXIuYXNzaWduPEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uT3B0aW9ucz4oe1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogYWN0aW9uQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgfSwgYWN0aW9uKSk7XG5cbiAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykgYWN0aW9uLmFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24uYWN0aW9uID09PSAnaGlkZS1tb2RhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyBsYXllZC1vdXQgYW5kIGFib3V0IHRvIHRyYW5zaXRpb24gaW5cbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvblNob3coKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdtb2RhbC1zaG93JywgeyBtb2RhbDogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyB2aXNpYmxlXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93bigpIHtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyBhYm91dCB0byB0cmFuc2l0aW9uIG91dFxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoJ21vZGFsLWhpZGUnLCB7IG1vZGFsOiB0aGlzIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiB0aGlzIG1vZGFsIGlzIGhpZGRlblxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZW1vdmVPbkhpZGRlbikge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzaG93KCk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICAgICAgbGV0IHByb21pc2UgPSBWaXNpYmlsaXR5SGVscGVyLnNob3codGhpcy5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLm9uU2hvdygpO1xuICAgICAgICAgICAgcHJvbWlzZS5kb25lKCgpID0+IHRoaXMub25TaG93bigpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaGlkZSgpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gVmlzaWJpbGl0eUhlbHBlci5oaWRlKHRoaXMuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgdGhpcy5vbkhpZGUoKTtcbiAgICAgICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiB0aGlzLm9uSGlkZGVuKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmlsaXR5KHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eSh0aGlzLmNvbXBvbmVudCwgdmlzaWJsZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyB0aGUgYmFja2Ryb3AgaWYgbmVlZGVkXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGNyZWF0ZUJhY2tkcm9wSWZOZWVkZWQoKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHByZXZpb3VzbHkgZXhpc3RpbmcgYmFja2Ryb3AgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgaWYgKCFIVE1MSGVscGVyLmhhc0NoaWxkV2l0aENsYXNzKHRoaXMuc2hvd2Nhc2UuY29udGFpbmVyLCBiYWNrZHJvcENsYXNzKSlcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlTW9kYWxCYWNrZHJvcCh0aGlzLnNob3djYXNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbEJhY2tkcm9wIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGJhY2tkcm9wXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQmFja2Ryb3AoKTtcblxuICAgICAgICAgICAgLy8gVGhlIGJhY2tkcm9wIHN0YXJ0cyBvZmYgaGlkZGVuXG4gICAgICAgICAgICB0aGlzLnNldFZpc2liaWxpdHkoZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGJhY2tkcm9wIHRvIHRoZSBzaG93Y2FzZSBjb250YWluZXJcbiAgICAgICAgICAgIHNob3djYXNlSW5zdGFuY2UuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRCYWNrZHJvcCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBiYWNrZHJvcENsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcFZpc2libGVNb2RhbCA9IEhUTUxIZWxwZXIubGFzdFNpYmxpbmdXaXRoQ2xhc3M8UmlkZVN0eWxlclNob3djYXNlTW9kYWwuTW9kYWxFbGVtZW50Pih0aGlzLmNvbXBvbmVudCwgbW9kYWxDbGFzcywgJ2luJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodG9wVmlzaWJsZU1vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcFZpc2libGVNb2RhbC5tb2RhbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdtb2RhbC1zaG93JywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ21vZGFsLWhpZGUnLCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUgb3Igc2hvdyB0aGUgYmFja2Ryb3AgYmFzZWQgb2ZmIHRoZSBudW1iZXIgb2YgdmlzaWJsZSBtb2RhbHNcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdXBkYXRlKCkge1xuICAgICAgICAgICAgbGV0IGhhc1Zpc2libGVNb2RhbDpib29sZWFuID0gSFRNTEhlbHBlci5oYXNTaWJsaW5nV2l0aENsYXNzKHRoaXMuY29tcG9uZW50LCBtb2RhbENsYXNzLCAnaW4nKTtcblxuICAgICAgICAgICAgdGhpc1toYXNWaXNpYmxlTW9kYWwgPyAnc2hvdycgOiAnaGlkZSddKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIHJldHVybiBWaXNpYmlsaXR5SGVscGVyLnNob3codGhpcy5jb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwdWJsaWMgaGlkZSgpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIHJldHVybiBWaXNpYmlsaXR5SGVscGVyLmhpZGUodGhpcy5jb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZpc2liaWxpdHkodmlzaWJsZTogYm9vbGVhbikge1xuICAgICAgICAgICAgVmlzaWJpbGl0eUhlbHBlci5zZXRWaXNpYmlsaXR5KHRoaXMuY29tcG9uZW50LCB2aXNpYmxlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE1vZGFsRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50e1xuICAgICAgICAgICAgbW9kYWw6IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsXG4gICAgICAgIH07XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBBY3Rpb24gZXh0ZW5kcyBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbk9wdGlvbnMge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgYWN0aW9uIHRvIHByZWZvcm0gd2hlbiB0aGlzIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFjdGlvbjogJ2hpZGUtbW9kYWwnfEZ1bmN0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHRoZSBtb2RhbCB3aWxsIHJlbW92ZSBpdHNlbGYgZnJvbSB0aGUgRE9NIHdoZW4gaXQncyBoaWRkZW5cbiAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuPzogYm9vbGVhbjtcblxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgZGlzcGxheSB0aGlzIG1vZGFsIHNob3VsZCB0YWtlIHVwIHRoZSBmdWxsIHNpemUgb2YgdGhlIHNob3djYXNlXG4gICAgICAgICAgICBmdWxsPzogYm9vbGVhbjtcblxuICAgICAgICAgICAgYWN0aW9ucz86IEFjdGlvbltdO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var optionMenuClass = 'ridestyler-showcase-option-menu';
    var optionMenuOptionClass = optionMenuClass + '-option';
    var optionMenuOptionActiveClass = optionMenuOptionClass + '-active';
    var optionMenuLoadingClass = optionMenuClass + '-loading';

    var RideStylerShowcaseOptionMenu = function () {
        function RideStylerShowcaseOptionMenu(name, options) {
            var _this = this;

            _classCallCheck(this, RideStylerShowcaseOptionMenu);

            this.name = name;
            this.component = RideStylerShowcase.HTMLHelper.createElement({
                className: optionMenuClass
            });
            this.component.addEventListener('click', function (clickEvent) {
                return _this.onClicked(clickEvent);
            });
            if (options) this.setOptions(options);else this.setLoading(true);
        }

        _createClass(RideStylerShowcaseOptionMenu, [{
            key: 'setLoading',
            value: function setLoading(loading) {
                this.component.classList.toggle(optionMenuLoadingClass, loading);
            }
        }, {
            key: 'generateOptionElement',
            value: function generateOptionElement(option) {
                var optionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionMenuOptionClass,
                    text: option.label
                });
                optionElement.value = option.value;
                return optionElement;
            }
        }, {
            key: 'clearOptions',
            value: function clearOptions() {
                RideStylerShowcase.HTMLHelper.empty(this.component);
            }
        }, {
            key: 'appendOptions',
            value: function appendOptions(options) {
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = options[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var option = _step.value;

                        this.component.appendChild(this.generateOptionElement(option));
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'setOptions',
            value: function setOptions(options) {
                this.clearOptions();
                this.appendOptions(options);
                this.setLoading(false);
            }
        }, {
            key: 'setValue',
            value: function setValue(value) {
                for (var index = 0; index < this.component.children.length; index++) {
                    var optionElement = this.component.children[index];
                    var active = optionElement.value === value;
                    optionElement.classList.toggle(optionMenuOptionActiveClass, active);
                    if (active) this.value = value;
                }
            }
        }, {
            key: 'onClicked',
            value: function onClicked(clickEvent) {
                var target = clickEvent.target;
                if (!target.classList.contains(optionMenuOptionClass)) return; // The click was not on an option
                if (target.classList.contains(optionMenuOptionActiveClass)) return; // The click was on an active option
                var previouslySelectedOption = RideStylerShowcase.HTMLHelper.firstChildWithClass(this.component, optionMenuOptionActiveClass);
                var newSelectedOption = target;
                if (previouslySelectedOption) previouslySelectedOption.classList.remove(optionMenuOptionActiveClass);
                newSelectedOption.classList.add(optionMenuOptionActiveClass);
                this.value = newSelectedOption.value;
                if (typeof this.onChange === 'function') this.onChange(newSelectedOption.value);
            }
        }]);

        return RideStylerShowcaseOptionMenu;
    }();

    RideStylerShowcase.RideStylerShowcaseOptionMenu = RideStylerShowcaseOptionMenu;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJvcHRpb25NZW51Q2xhc3MiLCJvcHRpb25NZW51T3B0aW9uQ2xhc3MiLCJvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MiLCJvcHRpb25NZW51TG9hZGluZ0NsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudSIsIm5hbWUiLCJvcHRpb25zIiwiY29tcG9uZW50IiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwib25DbGlja2VkIiwiY2xpY2tFdmVudCIsInNldE9wdGlvbnMiLCJzZXRMb2FkaW5nIiwibG9hZGluZyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm9wdGlvbiIsIm9wdGlvbkVsZW1lbnQiLCJ0ZXh0IiwibGFiZWwiLCJ2YWx1ZSIsImVtcHR5IiwiYXBwZW5kQ2hpbGQiLCJnZW5lcmF0ZU9wdGlvbkVsZW1lbnQiLCJjbGVhck9wdGlvbnMiLCJhcHBlbmRPcHRpb25zIiwiaW5kZXgiLCJjaGlsZHJlbiIsImxlbmd0aCIsImFjdGl2ZSIsInRhcmdldCIsImNvbnRhaW5zIiwicHJldmlvdXNseVNlbGVjdGVkT3B0aW9uIiwiZmlyc3RDaGlsZFdpdGhDbGFzcyIsIm5ld1NlbGVjdGVkT3B0aW9uIiwicmVtb3ZlIiwiYWRkIiwib25DaGFuZ2UiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsa0JBQWtCLGlDQUF4QjtBQUNBLFFBQU1DLHdCQUF3QkQsa0JBQWtCLFNBQWhEO0FBQ0EsUUFBTUUsOEJBQThCRCx3QkFBd0IsU0FBNUQ7QUFDQSxRQUFNRSx5QkFBeUJILGtCQUFrQixVQUFqRDs7QUFKd0IsUUFTeEJJLDRCQVR3QjtBQWVw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QUNBLG9CQUFJbUMsb0JBQWtDSixNQUF0QztBQUVBLG9CQUFJRSx3QkFBSixFQUE4QkEseUJBQXlCbEIsU0FBekIsQ0FBbUNxQixNQUFuQyxDQUEwQ3BDLDJCQUExQztBQUM5Qm1DLGtDQUFrQnBCLFNBQWxCLENBQTRCc0IsR0FBNUIsQ0FBZ0NyQywyQkFBaEM7QUFFQSxxQkFBS3FCLEtBQUwsR0FBYWMsa0JBQWtCZCxLQUEvQjtBQUVBLG9CQUFJLE9BQU8sS0FBS2lCLFFBQVosS0FBeUIsVUFBN0IsRUFBeUMsS0FBS0EsUUFBTCxDQUFjSCxrQkFBa0JkLEtBQWhDO0FBQzVDO0FBdkZtQjs7QUFBQTtBQUFBOztBQVNYeEIsdUJBQUFLLDRCQUFBLEdBQTRCQSw0QkFBNUI7QUEyRmhCLENBcEdELEVBQVVMLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IG9wdGlvbk1lbnVDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLW9wdGlvbi1tZW51JztcbiAgICBjb25zdCBvcHRpb25NZW51T3B0aW9uQ2xhc3MgPSBvcHRpb25NZW51Q2xhc3MgKyAnLW9wdGlvbic7XG4gICAgY29uc3Qgb3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzID0gb3B0aW9uTWVudU9wdGlvbkNsYXNzICsgJy1hY3RpdmUnO1xuICAgIGNvbnN0IG9wdGlvbk1lbnVMb2FkaW5nQ2xhc3MgPSBvcHRpb25NZW51Q2xhc3MgKyAnLWxvYWRpbmcnO1xuXG4gICAgaW1wb3J0IE9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUuT3B0aW9uO1xuICAgIGltcG9ydCBPcHRpb25FbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS5PcHRpb25FbGVtZW50O1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUgaW1wbGVtZW50cyBJQ29tcG9uZW50IHtcbiAgICAgICAgY29tcG9uZW50OkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBuYW1lOnN0cmluZztcbiAgICAgICAgcHVibGljIHZhbHVlOmFueTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0cnVjdG9yKG5hbWU6c3RyaW5nLCBvcHRpb25zPzogT3B0aW9uW10pIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbk1lbnVDbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tFdmVudCA9PiB0aGlzLm9uQ2xpY2tlZChjbGlja0V2ZW50KSk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zKSB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICBlbHNlIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRMb2FkaW5nKGxvYWRpbmc6Ym9vbGVhbikge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25NZW51TG9hZGluZ0NsYXNzLCBsb2FkaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhdGVPcHRpb25FbGVtZW50KG9wdGlvbjpPcHRpb24pOkhUTUxFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCBvcHRpb25FbGVtZW50Ok9wdGlvbkVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbk1lbnVPcHRpb25DbGFzcyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb24ubGFiZWxcbiAgICAgICAgICAgIH0pIGFzIE9wdGlvbkVsZW1lbnQ7XG5cbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBvcHRpb24udmFsdWU7XG5cbiAgICAgICAgICAgIHJldHVybiBvcHRpb25FbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjbGVhck9wdGlvbnMoKSB7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYXBwZW5kT3B0aW9ucyhvcHRpb25zOiBPcHRpb25bXSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVPcHRpb25FbGVtZW50KG9wdGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogT3B0aW9uW10pIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbi5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gdGhpcy5jb21wb25lbnQuY2hpbGRyZW5baW5kZXhdIGFzIE9wdGlvbkVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gb3B0aW9uRWxlbWVudC52YWx1ZSA9PT0gdmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcywgYWN0aXZlKTtcblxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmUpIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBvbkNoYW5nZToobmV3VmFsdWU6YW55KT0+dm9pZDtcblxuICAgICAgICBwcml2YXRlIG9uQ2xpY2tlZChjbGlja0V2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0OkhUTUxFbGVtZW50ID0gY2xpY2tFdmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25NZW51T3B0aW9uQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgbm90IG9uIGFuIG9wdGlvblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKSkgcmV0dXJuOyAvLyBUaGUgY2xpY2sgd2FzIG9uIGFuIGFjdGl2ZSBvcHRpb25cblxuICAgICAgICAgICAgbGV0IHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbjpPcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5maXJzdENoaWxkV2l0aENsYXNzKHRoaXMuY29tcG9uZW50LCBvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgbGV0IG5ld1NlbGVjdGVkT3B0aW9uOk9wdGlvbkVsZW1lbnQgPSB0YXJnZXQgYXMgT3B0aW9uRWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbikgcHJldmlvdXNseVNlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgIG5ld1NlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdC5hZGQob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1NlbGVjdGVkT3B0aW9uLnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHRoaXMub25DaGFuZ2UobmV3U2VsZWN0ZWRPcHRpb24udmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51IHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb24ge1xuICAgICAgICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgICAgICAgIHZhbHVlOiBhbnk7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbkVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgICAgICB2YWx1ZT86IGFueTtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var prevButtonClass = 'ridestyler-showcase-pagination-prev';
    var nextButtonClass = 'ridestyler-showcase-pagination-next';
    var optionClass = 'ridestyler-showcase-pagination-option';
    var optionSelectedClass = optionClass + '-selected';
    var optionLoadingClass = optionClass + '-loading';
    var optionLoaderClass = optionClass + '-loader';
    var noResultsClass = optionClass + '-no-results';

    var RideStylerShowcasePaginationComponent = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcasePaginationComponent, _RideStylerShowcase$C);

        function RideStylerShowcasePaginationComponent() {
            _classCallCheck(this, RideStylerShowcasePaginationComponent);

            /**
             * If true, this has more results that it can load
             */
            var _this = _possibleConstructorReturn(this, (RideStylerShowcasePaginationComponent.__proto__ || Object.getPrototypeOf(RideStylerShowcasePaginationComponent)).apply(this, arguments));

            _this.hasMoreResults = true;
            /**
             * If true, this is loading
             */
            _this.isLoading = false;
            /**
             * If true, the first load is being preformed or hasn't been preformed yet.
             */
            _this.isFirstLoad = true;
            /**
             * Set this to false to not show the no results message
             */
            _this.enableShowNoResults = true;
            return _this;
        }

        _createClass(RideStylerShowcasePaginationComponent, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-pagination'
                });
                this.optionContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-pagination-wrapper',
                    appendTo: this.component
                });
                this.prevButton = RideStylerShowcase.HTMLHelper.createElement('button', {
                    className: prevButtonClass,
                    appendTo: this.component,
                    append: RideStylerShowcase.HTMLHelper.createIcon('chevron-left')
                });
                this.nextButton = RideStylerShowcase.HTMLHelper.createElement('button', {
                    className: nextButtonClass,
                    appendTo: this.component,
                    append: RideStylerShowcase.HTMLHelper.createIcon('chevron-right')
                });
                // Listen for clicks on options
                this.component.addEventListener('click', function (event) {
                    return _this2.onComponentClick(event);
                });
                // Run clear options to get the loader
                this.clearOptions();
                // Load pagination after this component has been setup
                setTimeout(function () {
                    return _this2.loadMore();
                }, 0);
                RideStylerShowcase.ScrollHelper.attachWheelListener(this.component, function (event) {
                    var delta = event.deltaX || event.deltaY;
                    var _optionContainer = _this2.optionContainer,
                        scrollLeft = _optionContainer.scrollLeft,
                        scrollWidth = _optionContainer.scrollWidth,
                        offsetWidth = _optionContainer.offsetWidth;

                    var newValue = Math.min(scrollLeft + delta, scrollWidth - offsetWidth);
                    _this2.optionContainer.scrollLeft = newValue;
                    _this2.touchScrollHandler.setValues(newValue, 0);
                    _this2.onScroll();
                });
                this.touchScrollHandler = new Impetus({
                    source: this.optionContainer,
                    bounce: false,
                    multiplier: -1,
                    update: function update(x, y) {
                        _this2.optionContainer.scrollLeft = Math.floor(x);
                        _this2.optionContainer.scrollTop = y;
                        _this2.onScroll();
                    },
                    boundY: [0, 0]
                });
            }
        }, {
            key: 'loadMore',
            value: function loadMore() {
                var _this3 = this;

                return this._loadMore().always(function () {
                    _this3.clearOptionLoader();
                    _this3.updateBounds();
                });
            }
        }, {
            key: 'updateBounds',
            value: function updateBounds() {
                var _optionContainer2 = this.optionContainer,
                    scrollWidth = _optionContainer2.scrollWidth,
                    offsetWidth = _optionContainer2.offsetWidth;

                this.touchScrollHandler.setBoundX([0, scrollWidth - offsetWidth]);
            }
        }, {
            key: 'onScroll',
            value: function onScroll() {
                this.updatePaginationButtons();
                var optionContainer = this.optionContainer;
                var reachedEndTolerance = 10;
                if (optionContainer.scrollLeft >= optionContainer.scrollWidth - optionContainer.offsetWidth - reachedEndTolerance) {
                    this.onEndVisible();
                }
                this.updateBounds();
            }
        }, {
            key: 'onEndVisible',
            value: function onEndVisible() {
                if (!this.isLoading && this.hasMoreResults) {
                    this.addOptionLoader();
                    this.updateBounds();
                    this.loadMore();
                }
            }
        }, {
            key: 'onComponentClick',
            value: function onComponentClick(event) {
                var currentTarget = event.target;
                // Iterate through parents until we've reached the bound element
                while (currentTarget !== this.component) {
                    if (currentTarget.classList.contains(optionClass)) {
                        this.onOptionClick(currentTarget);
                        return;
                    } else if (currentTarget === this.prevButton) {
                        this.previousPage();
                        return;
                    } else if (currentTarget === this.nextButton) {
                        this.nextPage();
                        return;
                    }
                    currentTarget = currentTarget.parentElement;
                }
            }
        }, {
            key: 'updatePaginationButtons',
            value: function updatePaginationButtons() {
                var optionContainer = this.optionContainer;
                this.prevButton.disabled = optionContainer.scrollLeft === 0;
                this.nextButton.disabled = optionContainer.scrollLeft >= optionContainer.scrollWidth - optionContainer.clientWidth - 1;
            }
            /**
             * Adds a spinner to the end of the list indicating something is loading
             */

        }, {
            key: 'addOptionLoader',
            value: function addOptionLoader() {
                this.optionContainer.appendChild(RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionClass + ' ' + optionLoaderClass
                }));
            }
        }, {
            key: 'clearOptionLoader',
            value: function clearOptionLoader() {
                RideStylerShowcase.HTMLHelper.removeChildrenWithClasses(this.optionContainer, optionLoaderClass);
            }
        }, {
            key: 'addOptionElements',
            value: function addOptionElements(elements) {
                var hasNoResults = false;
                if (elements instanceof DocumentFragment) {
                    hasNoResults = elements.childNodes.length === 0;
                    this.optionContainer.appendChild(elements);
                } else if (elements instanceof Node) {
                    this.optionContainer.appendChild(elements);
                } else {
                    if (!elements.length) {
                        hasNoResults = true;
                    } else {
                        var _iteratorNormalCompletion = true;
                        var _didIteratorError = false;
                        var _iteratorError = undefined;

                        try {
                            for (var _iterator = elements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                                var element = _step.value;

                                this.optionContainer.appendChild(element);
                            }
                        } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion && _iterator.return) {
                                    _iterator.return();
                                }
                            } finally {
                                if (_didIteratorError) {
                                    throw _iteratorError;
                                }
                            }
                        }
                    }
                }
                if (hasNoResults) {
                    this.showNoResults();
                }
                this.clearOptionLoader();
                this.update();
                this.isFirstLoad = false;
            }
        }, {
            key: 'showNoResults',
            value: function showNoResults() {
                this.noResultsElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionClass + ' ' + noResultsClass,
                    text: RideStylerShowcase.strings.getString('no-results'),
                    appendTo: this.optionContainer
                });
            }
        }, {
            key: 'clearOptions',
            value: function clearOptions() {
                RideStylerShowcase.HTMLHelper.empty(this.optionContainer);
                this.addOptionLoader();
                this.isFirstLoad = true;
            }
        }, {
            key: 'update',
            value: function update() {
                this.updatePaginationButtons();
                this.updateBounds();
            }
        }, {
            key: 'scrollTo',
            value: function scrollTo(newLeft) {
                var _this4 = this;

                var startLeft = this.optionContainer.scrollLeft;
                var duration = Math.abs(startLeft - newLeft) / 2;
                TinyAnimate.animate(startLeft, newLeft, duration, function (currentLeft) {
                    _this4.optionContainer.scrollLeft = currentLeft;
                    _this4.touchScrollHandler.setValues(newLeft, 0);
                }, 'easeOutCubic', function () {
                    return _this4.update();
                });
            }
        }, {
            key: 'previousPage',
            value: function previousPage() {
                this.scrollTo(this.optionContainer.scrollLeft - this.optionContainer.clientWidth);
            }
        }, {
            key: 'nextPage',
            value: function nextPage() {
                this.scrollTo(this.optionContainer.scrollLeft + this.optionContainer.clientWidth);
                var optionContainer = this.optionContainer;
                var reachedEndTolerance = 5;
                if (optionContainer.scrollLeft >= optionContainer.scrollWidth - optionContainer.offsetWidth - reachedEndTolerance) {
                    this.onEndVisible();
                }
                this.updateBounds();
            }
        }, {
            key: 'selectOption',
            value: function selectOption(optionElement) {
                if (this.selectedOption === optionElement) return; // Already selected
                var oldOptionElement = this.selectedOption;
                if (oldOptionElement) oldOptionElement.classList.remove(optionSelectedClass, optionLoadingClass);
                optionElement.classList.add(optionSelectedClass);
                this.selectedOption = optionElement;
            }
            /**
             * Set or remove the loading class from the currently selected option
             * @param isLoading If true, add the loading class, otherwise remove it
             */

        }, {
            key: 'setOptionIsLoading',
            value: function setOptionIsLoading(isLoading) {
                if (!this.selectedOption) return;
                this.selectedOption.classList[isLoading ? 'add' : 'remove'](optionLoadingClass);
            }
            /**
             * Called when an option element is clicked on.
             * @param optionElement The option element that was clicked on
             */

        }, {
            key: 'onOptionClick',
            value: function onOptionClick(optionElement) {
                this.selectOption(optionElement);
            }
        }]);

        return RideStylerShowcasePaginationComponent;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcasePaginationComponent = RideStylerShowcasePaginationComponent;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudC50cyIsInNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50LmpzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInByZXZCdXR0b25DbGFzcyIsIm5leHRCdXR0b25DbGFzcyIsIm9wdGlvbkNsYXNzIiwib3B0aW9uU2VsZWN0ZWRDbGFzcyIsIm9wdGlvbkxvYWRpbmdDbGFzcyIsIm9wdGlvbkxvYWRlckNsYXNzIiwibm9SZXN1bHRzQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IiwiYXJndW1lbnRzIiwiaGFzTW9yZVJlc3VsdHMiLCJpc0xvYWRpbmciLCJpc0ZpcnN0TG9hZCIsImVuYWJsZVNob3dOb1Jlc3VsdHMiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm9wdGlvbkNvbnRhaW5lciIsImFwcGVuZFRvIiwicHJldkJ1dHRvbiIsImFwcGVuZCIsImNyZWF0ZUljb24iLCJuZXh0QnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ29tcG9uZW50Q2xpY2siLCJldmVudCIsImNsZWFyT3B0aW9ucyIsInNldFRpbWVvdXQiLCJsb2FkTW9yZSIsIlNjcm9sbEhlbHBlciIsImF0dGFjaFdoZWVsTGlzdGVuZXIiLCJkZWx0YSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbExlZnQiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwibmV3VmFsdWUiLCJNYXRoIiwibWluIiwidG91Y2hTY3JvbGxIYW5kbGVyIiwic2V0VmFsdWVzIiwib25TY3JvbGwiLCJJbXBldHVzIiwic291cmNlIiwiYm91bmNlIiwibXVsdGlwbGllciIsInVwZGF0ZSIsIngiLCJ5IiwiZmxvb3IiLCJzY3JvbGxUb3AiLCJib3VuZFkiLCJfbG9hZE1vcmUiLCJhbHdheXMiLCJjbGVhck9wdGlvbkxvYWRlciIsInVwZGF0ZUJvdW5kcyIsInNldEJvdW5kWCIsInVwZGF0ZVBhZ2luYXRpb25CdXR0b25zIiwicmVhY2hlZEVuZFRvbGVyYW5jZSIsIm9uRW5kVmlzaWJsZSIsImFkZE9wdGlvbkxvYWRlciIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm9uT3B0aW9uQ2xpY2siLCJwcmV2aW91c1BhZ2UiLCJuZXh0UGFnZSIsInBhcmVudEVsZW1lbnQiLCJkaXNhYmxlZCIsImNsaWVudFdpZHRoIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzIiwiZWxlbWVudHMiLCJoYXNOb1Jlc3VsdHMiLCJEb2N1bWVudEZyYWdtZW50IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsIk5vZGUiLCJlbGVtZW50Iiwic2hvd05vUmVzdWx0cyIsIm5vUmVzdWx0c0VsZW1lbnQiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImVtcHR5IiwibmV3TGVmdCIsInN0YXJ0TGVmdCIsImR1cmF0aW9uIiwiYWJzIiwiVGlueUFuaW1hdGUiLCJhbmltYXRlIiwiY3VycmVudExlZnQiLCJzY3JvbGxUbyIsIm9wdGlvbkVsZW1lbnQiLCJzZWxlY3RlZE9wdGlvbiIsIm9sZE9wdGlvbkVsZW1lbnQiLCJyZW1vdmUiLCJhZGQiLCJzZWxlY3RPcHRpb24iLCJDb21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFNQyxrQkFBa0IscUNBQXhCO0FBQ0EsUUFBTUMsa0JBQWtCLHFDQUF4QjtBQUNBLFFBQU1DLGNBQWMsdUNBQXBCO0FBQ0EsUUFBTUMsc0JBQXNCRCxjQUFjLFdBQTFDO0FBQ0EsUUFBTUUscUJBQXFCRixjQUFjLFVBQXpDO0FBQ0EsUUFBTUcsb0JBQW9CSCxjQUFjLFNBQXhD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ekMsb0JBQUksS0FBS0MsY0FBTCxLQUF3QkQsYUFBNUIsRUFBMkMsT0FERixDQUNVO0FBQ25ELG9CQUFJRSxtQkFBbUIsS0FBS0QsY0FBNUI7QUFFQSxvQkFBSUMsZ0JBQUosRUFDSUEsaUJBQWlCakMsU0FBakIsQ0FBMkJrQyxNQUEzQixDQUFrQy9GLG1CQUFsQyxFQUF1REMsa0JBQXZEO0FBRUoyRiw4QkFBYy9CLFNBQWQsQ0FBd0JtQyxHQUF4QixDQUE0QmhHLG1CQUE1QjtBQUVBLHFCQUFLNkYsY0FBTCxHQUFzQkQsYUFBdEI7QUFDSDtBQUVEOzs7OztBQS9Qb0I7QUFBQTtBQUFBLCtDQW1RTXJGLFNBblFOLEVBbVF1QjtBQUN2QyxvQkFBSSxDQUFDLEtBQUtzRixjQUFWLEVBQTBCO0FBRTFCLHFCQUFLQSxjQUFMLENBQW9CaEMsU0FBcEIsQ0FBOEJ0RCxZQUFZLEtBQVosR0FBb0IsUUFBbEQsRUFBNEROLGtCQUE1RDtBQUNIO0FBRUQ7Ozs7O0FBelFvQjtBQUFBO0FBQUEsMENBNlFJMkYsYUE3UUosRUE2UTZCO0FBQzdDLHFCQUFLSyxZQUFMLENBQWtCTCxhQUFsQjtBQUNIO0FBL1FtQjs7QUFBQTtBQUFBLE1BUzRDaEcsbUJBQUFzRyxhQVQ1Qzs7QUFTRnRHLHVCQUFBUSxxQ0FBQSxHQUFxQ0EscUNBQXJDO0FBd1F6QixDQWpSRCxFQUFVUix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBwcmV2QnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLXByZXYnO1xuICAgIGNvbnN0IG5leHRCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tbmV4dCc7XG4gICAgY29uc3Qgb3B0aW9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbic7XG4gICAgY29uc3Qgb3B0aW9uU2VsZWN0ZWRDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1zZWxlY3RlZCc7XG4gICAgY29uc3Qgb3B0aW9uTG9hZGluZ0NsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWxvYWRpbmcnO1xuICAgIGNvbnN0IG9wdGlvbkxvYWRlckNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWxvYWRlcic7XG4gICAgY29uc3Qgbm9SZXN1bHRzQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbm8tcmVzdWx0cydcblxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByb3RlY3RlZCBvcHRpb25Db250YWluZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIHNlbGVjdGVkT3B0aW9uOkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBwcmV2QnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgbmV4dEJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgdG91Y2hTY3JvbGxIYW5kbGVyOkltcGV0dXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIHRoaXMgaGFzIG1vcmUgcmVzdWx0cyB0aGF0IGl0IGNhbiBsb2FkXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaGFzTW9yZVJlc3VsdHM6IGJvb2xlYW4gPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgdGhpcyBpcyBsb2FkaW5nXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaXNMb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCB0aGUgZmlyc3QgbG9hZCBpcyBiZWluZyBwcmVmb3JtZWQgb3IgaGFzbid0IGJlZW4gcHJlZm9ybWVkIHlldC5cbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBpc0ZpcnN0TG9hZDpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGlzIHRvIGZhbHNlIHRvIG5vdCBzaG93IHRoZSBubyByZXN1bHRzIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBlbmFibGVTaG93Tm9SZXN1bHRzOmJvb2xlYW4gPSB0cnVlO1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLXdyYXBwZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnByZXZCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHByZXZCdXR0b25DbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBIVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tbGVmdCcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBuZXh0QnV0dG9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLXJpZ2h0JylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNsaWNrcyBvbiBvcHRpb25zXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25Db21wb25lbnRDbGljayhldmVudCkpO1xuXG4gICAgICAgICAgICAvLyBSdW4gY2xlYXIgb3B0aW9ucyB0byBnZXQgdGhlIGxvYWRlclxuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcblxuICAgICAgICAgICAgLy8gTG9hZCBwYWdpbmF0aW9uIGFmdGVyIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIHNldHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZE1vcmUoKSwgMCk7XG5cbiAgICAgICAgICAgIFNjcm9sbEhlbHBlci5hdHRhY2hXaGVlbExpc3RlbmVyKHRoaXMuY29tcG9uZW50LCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBldmVudC5kZWx0YVggfHwgZXZlbnQuZGVsdGFZO1xuICAgICAgICAgICAgICAgIGNvbnN0IHtzY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGh9ID0gdGhpcy5vcHRpb25Db250YWluZXI7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IE1hdGgubWluKHNjcm9sbExlZnQgKyBkZWx0YSwgc2Nyb2xsV2lkdGggLSBvZmZzZXRXaWR0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA9IG5ld1ZhbHVlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld1ZhbHVlLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIgPSBuZXcgSW1wZXR1cyh7XG4gICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLm9wdGlvbkNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBib3VuY2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG11bHRpcGxpZXI6IC0xLFxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKHgsIHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA9IE1hdGguZmxvb3IoeCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbFRvcCA9IHk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm91bmRZOiBbMCwgMF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcGxlbWVudCB0aGlzIHRvIGxvYWQgYWRkaXRpb25hbCByZXN1bHRzXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2xvYWRNb3JlKCk6UmlkZVN0eWxlclByb21pc2U7XG4gICAgICAgIHB1YmxpYyBsb2FkTW9yZSgpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkTW9yZSgpLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB1cGRhdGVCb3VuZHMoKSB7XG4gICAgICAgICAgICBjb25zdCB7c2Nyb2xsV2lkdGgsIG9mZnNldFdpZHRofSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0Qm91bmRYKFswLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoXSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uU2Nyb2xsKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xuXG4gICAgICAgICAgICBsZXQgb3B0aW9uQ29udGFpbmVyID0gdGhpcy5vcHRpb25Db250YWluZXI7XG4gICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gMTA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIub2Zmc2V0V2lkdGggLSByZWFjaGVkRW5kVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkVuZFZpc2libGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgb25FbmRWaXNpYmxlKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTG9hZGluZyAmJiB0aGlzLmhhc01vcmVSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25Db21wb25lbnRDbGljayhldmVudDpNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRhcmdldDpIVE1MRWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHBhcmVudHMgdW50aWwgd2UndmUgcmVhY2hlZCB0aGUgYm91bmQgZWxlbWVudFxuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRUYXJnZXQgIT09IHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbkNsYXNzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3B0aW9uQ2xpY2soY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHRoaXMucHJldkJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLm5leHRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0UGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldCA9IGN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcblxuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPT09IDA7XG4gICAgICAgICAgICB0aGlzLm5leHRCdXR0b24uZGlzYWJsZWQgPSBvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIuY2xpZW50V2lkdGggLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgYSBzcGlubmVyIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3QgaW5kaWNhdGluZyBzb21ldGhpbmcgaXMgbG9hZGluZ1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGFkZE9wdGlvbkxvYWRlcigpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBvcHRpb25Mb2FkZXJDbGFzc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGNsZWFyT3B0aW9uTG9hZGVyKCkge1xuICAgICAgICAgICAgSFRNTEhlbHBlci5yZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzKHRoaXMub3B0aW9uQ29udGFpbmVyLCBvcHRpb25Mb2FkZXJDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0T3B0aW9uRWxlbWVudFZhbHVlKGVsZW1lbnQ6SFRNTEVsZW1lbnQpOiBzdHJpbmc7IFxuXG4gICAgICAgIHByb3RlY3RlZCBhZGRPcHRpb25FbGVtZW50cyhlbGVtZW50czpOb2RlW118Tm9kZSkge1xuICAgXG4gICAgICAgICAgICBsZXQgaGFzTm9SZXN1bHRzID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSBlbGVtZW50cy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRzIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTm9SZXN1bHRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGVsZW1lbnRzIGFzIE5vZGVbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc05vUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd05vUmVzdWx0cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9uTG9hZGVyKCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBub1Jlc3VsdHNFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgc2hvd05vUmVzdWx0cygpIHtcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBub1Jlc3VsdHNDbGFzcyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnbm8tcmVzdWx0cycpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLm9wdGlvbkNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgY2xlYXJPcHRpb25zKCkge1xuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdXBkYXRlKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzY3JvbGxUbyhuZXdMZWZ0Om51bWJlcikge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRMZWZ0ID0gdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gTWF0aC5hYnMoc3RhcnRMZWZ0IC0gbmV3TGVmdCkgLyAyXG5cbiAgICAgICAgICAgIFRpbnlBbmltYXRlLmFuaW1hdGUoc3RhcnRMZWZ0LCBuZXdMZWZ0LCBkdXJhdGlvbiwgY3VycmVudExlZnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBjdXJyZW50TGVmdFxuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyLnNldFZhbHVlcyhuZXdMZWZ0LCAwKTtcbiAgICAgICAgICAgIH0sICdlYXNlT3V0Q3ViaWMnLCAoKSA9PiB0aGlzLnVwZGF0ZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBwcmV2aW91c1BhZ2UoKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvKHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgLSB0aGlzLm9wdGlvbkNvbnRhaW5lci5jbGllbnRXaWR0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgbmV4dFBhZ2UoKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvKHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgKyB0aGlzLm9wdGlvbkNvbnRhaW5lci5jbGllbnRXaWR0aCk7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRFbmRUb2xlcmFuY2UgPSA1O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIub2Zmc2V0V2lkdGggLSByZWFjaGVkRW5kVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FbmRWaXNpYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uID09PSBvcHRpb25FbGVtZW50KSByZXR1cm47IC8vIEFscmVhZHkgc2VsZWN0ZWRcbiAgICAgICAgICAgIGxldCBvbGRPcHRpb25FbGVtZW50ID0gdGhpcy5zZWxlY3RlZE9wdGlvbjtcblxuICAgICAgICAgICAgaWYgKG9sZE9wdGlvbkVsZW1lbnQpXG4gICAgICAgICAgICAgICAgb2xkT3B0aW9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKG9wdGlvblNlbGVjdGVkQ2xhc3MsIG9wdGlvbkxvYWRpbmdDbGFzcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25TZWxlY3RlZENsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IG9wdGlvbkVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9yIHJlbW92ZSB0aGUgbG9hZGluZyBjbGFzcyBmcm9tIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uXG4gICAgICAgICAqIEBwYXJhbSBpc0xvYWRpbmcgSWYgdHJ1ZSwgYWRkIHRoZSBsb2FkaW5nIGNsYXNzLCBvdGhlcndpc2UgcmVtb3ZlIGl0XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0T3B0aW9uSXNMb2FkaW5nKGlzTG9hZGluZzpib29sZWFuKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRPcHRpb24pIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbi5jbGFzc0xpc3RbaXNMb2FkaW5nID8gJ2FkZCcgOiAncmVtb3ZlJ10ob3B0aW9uTG9hZGluZ0NsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiBhbiBvcHRpb24gZWxlbWVudCBpcyBjbGlja2VkIG9uLlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uRWxlbWVudCBUaGUgb3B0aW9uIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZCBvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uT3B0aW9uQ2xpY2sob3B0aW9uRWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24ob3B0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwidmFyIFJpZGVTdHlsZXJTaG93Y2FzZTtcbihmdW5jdGlvbiAoUmlkZVN0eWxlclNob3djYXNlKSB7XG4gICAgY29uc3QgcHJldkJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1wcmV2JztcbiAgICBjb25zdCBuZXh0QnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW5leHQnO1xuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24nO1xuICAgIGNvbnN0IG9wdGlvblNlbGVjdGVkQ2xhc3MgPSBvcHRpb25DbGFzcyArICctc2VsZWN0ZWQnO1xuICAgIGNvbnN0IG9wdGlvbkxvYWRpbmdDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1sb2FkaW5nJztcbiAgICBjb25zdCBvcHRpb25Mb2FkZXJDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1sb2FkZXInO1xuICAgIGNvbnN0IG5vUmVzdWx0c0NsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLW5vLXJlc3VsdHMnO1xuICAgIGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2UuQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgdGhpcyBoYXMgbW9yZSByZXN1bHRzIHRoYXQgaXQgY2FuIGxvYWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5oYXNNb3JlUmVzdWx0cyA9IHRydWU7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIHRoaXMgaXMgbG9hZGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCB0aGUgZmlyc3QgbG9hZCBpcyBiZWluZyBwcmVmb3JtZWQgb3IgaGFzbid0IGJlZW4gcHJlZm9ybWVkIHlldC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCB0aGlzIHRvIGZhbHNlIHRvIG5vdCBzaG93IHRoZSBubyByZXN1bHRzIG1lc3NhZ2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5lbmFibGVTaG93Tm9SZXN1bHRzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lciA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24td3JhcHBlcicsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByZXZCdXR0b24gPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcmV2QnV0dG9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlSWNvbignY2hldnJvbi1sZWZ0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogbmV4dEJ1dHRvbkNsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tcmlnaHQnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNsaWNrcyBvbiBvcHRpb25zXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25Db21wb25lbnRDbGljayhldmVudCkpO1xuICAgICAgICAgICAgLy8gUnVuIGNsZWFyIG9wdGlvbnMgdG8gZ2V0IHRoZSBsb2FkZXJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XG4gICAgICAgICAgICAvLyBMb2FkIHBhZ2luYXRpb24gYWZ0ZXIgdGhpcyBjb21wb25lbnQgaGFzIGJlZW4gc2V0dXBcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkTW9yZSgpLCAwKTtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5TY3JvbGxIZWxwZXIuYXR0YWNoV2hlZWxMaXN0ZW5lcih0aGlzLmNvbXBvbmVudCwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGFYIHx8IGV2ZW50LmRlbHRhWTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNjcm9sbExlZnQsIHNjcm9sbFdpZHRoLCBvZmZzZXRXaWR0aCB9ID0gdGhpcy5vcHRpb25Db250YWluZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBNYXRoLm1pbihzY3JvbGxMZWZ0ICsgZGVsdGEsIHNjcm9sbFdpZHRoIC0gb2Zmc2V0V2lkdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3VmFsdWUsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIgPSBuZXcgSW1wZXR1cyh7XG4gICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLm9wdGlvbkNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBib3VuY2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG11bHRpcGxpZXI6IC0xLFxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKHgsIHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA9IE1hdGguZmxvb3IoeCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbFRvcCA9IHk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvdW5kWTogWzAsIDBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2FkTW9yZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkTW9yZSgpLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVCb3VuZHMoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNjcm9sbFdpZHRoLCBvZmZzZXRXaWR0aCB9ID0gdGhpcy5vcHRpb25Db250YWluZXI7XG4gICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRCb3VuZFgoWzAsIHNjcm9sbFdpZHRoIC0gb2Zmc2V0V2lkdGhdKTtcbiAgICAgICAgfVxuICAgICAgICBvblNjcm9sbCgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKTtcbiAgICAgICAgICAgIGxldCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRFbmRUb2xlcmFuY2UgPSAxMDtcbiAgICAgICAgICAgIGlmIChvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIub2Zmc2V0V2lkdGggLSByZWFjaGVkRW5kVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkVuZFZpc2libGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgb25FbmRWaXNpYmxlKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTG9hZGluZyAmJiB0aGlzLmhhc01vcmVSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvbkNvbXBvbmVudENsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBwYXJlbnRzIHVudGlsIHdlJ3ZlIHJlYWNoZWQgdGhlIGJvdW5kIGVsZW1lbnRcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25DbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wdGlvbkNsaWNrKGN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHRoaXMucHJldkJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHRoaXMubmV4dEJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldCA9IGN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPT09IDA7XG4gICAgICAgICAgICB0aGlzLm5leHRCdXR0b24uZGlzYWJsZWQgPSBvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIuY2xpZW50V2lkdGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIGEgc3Bpbm5lciB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IGluZGljYXRpbmcgc29tZXRoaW5nIGlzIGxvYWRpbmdcbiAgICAgICAgICovXG4gICAgICAgIGFkZE9wdGlvbkxvYWRlcigpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzICsgJyAnICsgb3B0aW9uTG9hZGVyQ2xhc3NcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck9wdGlvbkxvYWRlcigpIHtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLnJlbW92ZUNoaWxkcmVuV2l0aENsYXNzZXModGhpcy5vcHRpb25Db250YWluZXIsIG9wdGlvbkxvYWRlckNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICBhZGRPcHRpb25FbGVtZW50cyhlbGVtZW50cykge1xuICAgICAgICAgICAgbGV0IGhhc05vUmVzdWx0cyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIGhhc05vUmVzdWx0cyA9IGVsZW1lbnRzLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVsZW1lbnRzIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc05vUmVzdWx0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGVsZW1lbnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc05vUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd05vUmVzdWx0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBzaG93Tm9SZXN1bHRzKCkge1xuICAgICAgICAgICAgdGhpcy5ub1Jlc3VsdHNFbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBub1Jlc3VsdHNDbGFzcyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ25vLXJlc3VsdHMnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5vcHRpb25Db250YWluZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyT3B0aW9ucygpIHtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uTG9hZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIHNjcm9sbFRvKG5ld0xlZnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0TGVmdCA9IHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGguYWJzKHN0YXJ0TGVmdCAtIG5ld0xlZnQpIC8gMjtcbiAgICAgICAgICAgIFRpbnlBbmltYXRlLmFuaW1hdGUoc3RhcnRMZWZ0LCBuZXdMZWZ0LCBkdXJhdGlvbiwgY3VycmVudExlZnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBjdXJyZW50TGVmdDtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3TGVmdCwgMCk7XG4gICAgICAgICAgICB9LCAnZWFzZU91dEN1YmljJywgKCkgPT4gdGhpcy51cGRhdGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXNQYWdlKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0IC0gdGhpcy5vcHRpb25Db250YWluZXIuY2xpZW50V2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIG5leHRQYWdlKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ICsgdGhpcy5vcHRpb25Db250YWluZXIuY2xpZW50V2lkdGgpO1xuICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgY29uc3QgcmVhY2hlZEVuZFRvbGVyYW5jZSA9IDU7XG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FbmRWaXNpYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGVjdE9wdGlvbihvcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbiA9PT0gb3B0aW9uRWxlbWVudClcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIEFscmVhZHkgc2VsZWN0ZWRcbiAgICAgICAgICAgIGxldCBvbGRPcHRpb25FbGVtZW50ID0gdGhpcy5zZWxlY3RlZE9wdGlvbjtcbiAgICAgICAgICAgIGlmIChvbGRPcHRpb25FbGVtZW50KVxuICAgICAgICAgICAgICAgIG9sZE9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShvcHRpb25TZWxlY3RlZENsYXNzLCBvcHRpb25Mb2FkaW5nQ2xhc3MpO1xuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKG9wdGlvblNlbGVjdGVkQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IG9wdGlvbkVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvciByZW1vdmUgdGhlIGxvYWRpbmcgY2xhc3MgZnJvbSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvblxuICAgICAgICAgKiBAcGFyYW0gaXNMb2FkaW5nIElmIHRydWUsIGFkZCB0aGUgbG9hZGluZyBjbGFzcywgb3RoZXJ3aXNlIHJlbW92ZSBpdFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0T3B0aW9uSXNMb2FkaW5nKGlzTG9hZGluZykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkT3B0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24uY2xhc3NMaXN0W2lzTG9hZGluZyA/ICdhZGQnIDogJ3JlbW92ZSddKG9wdGlvbkxvYWRpbmdDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIGFuIG9wdGlvbiBlbGVtZW50IGlzIGNsaWNrZWQgb24uXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25FbGVtZW50IFRoZSBvcHRpb24gZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkIG9uXG4gICAgICAgICAqL1xuICAgICAgICBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50ID0gUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudDtcbn0pKFJpZGVTdHlsZXJTaG93Y2FzZSB8fCAoUmlkZVN0eWxlclNob3djYXNlID0ge30pKTtcbiJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var resultsPerRequest = 20;

    var RideStylerShowcasePaintSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcasePaintSelector, _RideStylerShowcase$R);

        function RideStylerShowcasePaintSelector(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcasePaintSelector);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcasePaintSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcasePaintSelector)).call(this, showcaseInstance));

            var _showcaseInstance$sta = showcaseInstance.state.getData(),
                currentVehicleConfigurationID = _showcaseInstance$sta.currentVehicleConfigurationID;

            _this.vehicleConfigurationID = currentVehicleConfigurationID;
            return _this;
        }

        _createClass(RideStylerShowcasePaintSelector, [{
            key: '_loadMore',
            value: function _loadMore() {
                var _this2 = this;

                this.hasMoreResults = false;
                this.isLoading = true;
                // Load paint schemes for the vehicle
                return RideStylerShowcase.api.request("vehicle/getpaintschemedescriptions", {
                    VehicleConfiguration: this.vehicleConfigurationID
                }).done(function (response) {
                    return _this2.createOptions(response.Schemes);
                }).always(function () {
                    return _this2.isLoading = false;
                });
            }
        }, {
            key: 'createOptions',
            value: function createOptions(schemes) {
                // Create a fragment so we add all options to the element at once
                var fragment = document.createDocumentFragment();
                // Create each option and add it to the fragment
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = schemes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var scheme = _step.value;

                        var option = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option ridestyler-showcase-paint-option',
                            appendTo: fragment
                        });
                        option.paintScheme = scheme;
                        // The main color to be represented in the swatch
                        // TODO: multi-color paint schemes
                        var color = scheme.Colors[0];
                        // "swatch": The display of the paint color
                        var swatch = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-display ridestyler-showcase-paint-swatch',
                            style: {
                                backgroundColor: color.Hex
                            },
                            appendTo: option
                        });
                        // The name of the paint scheme as the label
                        var name = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label',
                            text: scheme.SchemeName,
                            appendTo: option
                        });
                        // Attributes of the color for the secondary label
                        var attributes = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label-secondary',
                            text: RideStylerShowcasePaintSelector.createAttributeLabel(color.Attributes),
                            appendTo: option
                        });
                    }
                    // Clear out our slideWrapper of all elements
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                RideStylerShowcase.HTMLHelper.empty(this.optionContainer);
                // Add all options to the slideWrapper at once
                this.optionContainer.appendChild(fragment);
                this.update();
            }
        }, {
            key: 'onOptionClick',
            value: function onOptionClick(optionElement) {
                var paintScheme = optionElement.paintScheme;
                if (paintScheme) {
                    _get(RideStylerShowcasePaintSelector.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcasePaintSelector.prototype), 'onOptionClick', this).call(this, optionElement);
                    this.state.extendData({
                        currentPaintScheme: paintScheme
                    });
                    if (typeof this.onPaintSchemeSelected === 'function') {
                        this.onPaintSchemeSelected(paintScheme);
                    }
                }
            }
        }], [{
            key: 'createAttributeLabel',
            value: function createAttributeLabel(attributes) {
                var defaultAttributeString = 'Glossy';
                if (attributes === 0 /* None */) return defaultAttributeString;
                var stringAttributes = [];
                // Add each selected paint attribute flag for the color to the list
                if (attributes && 4 /* Matte */ === 4 /* Matte */) stringAttributes.push('Matte');
                if (attributes && 1 /* Metallic */ === 1 /* Metallic */) stringAttributes.push('Metallic');
                if (attributes && 2 /* Pearlescent */ === 2 /* Pearlescent */) stringAttributes.push('Pearlescent');
                if (stringAttributes.length === 0) return defaultAttributeString;
                return stringAttributes.join(', ');
            }
        }]);

        return RideStylerShowcasePaintSelector;
    }(RideStylerShowcase.RideStylerShowcasePaginationComponent);

    RideStylerShowcase.RideStylerShowcasePaintSelector = RideStylerShowcasePaintSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3Rvci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJyZXN1bHRzUGVyUmVxdWVzdCIsIlJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IiLCJzaG93Y2FzZUluc3RhbmNlIiwic3RhdGUiLCJnZXREYXRhIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ2ZWhpY2xlQ29uZmlndXJhdGlvbklEIiwiaGFzTW9yZVJlc3VsdHMiLCJpc0xvYWRpbmciLCJhcGkiLCJyZXF1ZXN0IiwiVmVoaWNsZUNvbmZpZ3VyYXRpb24iLCJkb25lIiwiY3JlYXRlT3B0aW9ucyIsInJlc3BvbnNlIiwiU2NoZW1lcyIsImFsd2F5cyIsInNjaGVtZXMiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInNjaGVtZSIsIm9wdGlvbiIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kVG8iLCJwYWludFNjaGVtZSIsImNvbG9yIiwiQ29sb3JzIiwic3dhdGNoIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJIZXgiLCJuYW1lIiwidGV4dCIsIlNjaGVtZU5hbWUiLCJhdHRyaWJ1dGVzIiwiY3JlYXRlQXR0cmlidXRlTGFiZWwiLCJBdHRyaWJ1dGVzIiwiZW1wdHkiLCJvcHRpb25Db250YWluZXIiLCJhcHBlbmRDaGlsZCIsInVwZGF0ZSIsIm9wdGlvbkVsZW1lbnQiLCJleHRlbmREYXRhIiwiY3VycmVudFBhaW50U2NoZW1lIiwib25QYWludFNjaGVtZVNlbGVjdGVkIiwiZGVmYXVsdEF0dHJpYnV0ZVN0cmluZyIsInN0cmluZ0F0dHJpYnV0ZXMiLCJwdXNoIiwibGVuZ3RoIiwiam9pbiIsIlJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQiXSwibWFwcGlu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Q0FBc0I7QUFDbEJDLDRDQUFvQm5CO0FBREYscUJBQXRCO0FBSUEsd0JBQUksT0FBTyxLQUFLb0IscUJBQVosS0FBc0MsVUFBMUMsRUFBc0Q7QUFDbEQsNkJBQUtBLHFCQUFMLENBQTJCcEIsV0FBM0I7QUFDSDtBQUNKO0FBQ0o7QUFqR21CO0FBQUE7QUFBQSxpREFtR2dCVSxVQW5HaEIsRUFtR3dFO0FBQ3hGLG9CQUFNVyx5QkFBeUIsUUFBL0I7QUFFQSxvQkFBSVgsZUFBVSxDQUFkLENBQWMsVUFBZCxFQUFnRCxPQUFPVyxzQkFBUDtBQUVoRCxvQkFBSUMsbUJBQTRCLEVBQWhDO0FBRUE7QUFDQSxvQkFBSVosY0FBYyxFQUFBLFdBQUEsS0FBQSxDQUFsQixDQUFrQixXQUFsQixFQUFpRlksaUJBQWlCQyxJQUFqQixDQUFzQixPQUF0QjtBQUNqRixvQkFBSWIsY0FBYyxFQUFBLGNBQUEsS0FBQSxDQUFsQixDQUFrQixjQUFsQixFQUF1RlksaUJBQWlCQyxJQUFqQixDQUFzQixVQUF0QjtBQUN2RixvQkFBSWIsY0FBYyxFQUFBLGlCQUFBLEtBQUEsQ0FBbEIsQ0FBa0IsaUJBQWxCLEVBQTZGWSxpQkFBaUJDLElBQWpCLENBQXNCLGFBQXRCO0FBRTdGLG9CQUFJRCxpQkFBaUJFLE1BQWpCLEtBQTRCLENBQWhDLEVBQW1DLE9BQU9ILHNCQUFQO0FBRW5DLHVCQUFPQyxpQkFBaUJHLElBQWpCLENBQXNCLElBQXRCLENBQVA7QUFDSDtBQWxIbUI7O0FBQUE7QUFBQSxNQVU2QnJELG1CQUFBc0QscUNBVjdCOztBQVVYdEQsdUJBQUFFLCtCQUFBLEdBQStCQSwrQkFBL0I7QUEwR2hCLENBcEhELEVBQVVGLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUGFpbnRBdHRyaWJ1dGVzO1xuICAgIGltcG9ydCBWZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsID0gcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbDtcblxuICAgIGNvbnN0IHJlc3VsdHNQZXJSZXF1ZXN0ID0gMjA7XG5cbiAgICBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTY2hlbWVPcHRpb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICBwYWludFNjaGVtZT86IFZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWw7XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOnN0cmluZztcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgY29uc3Qge2N1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEfSA9IHNob3djYXNlSW5zdGFuY2Uuc3RhdGUuZ2V0RGF0YSgpO1xuXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBfbG9hZE1vcmUoKSB7XG4gICAgICAgICAgICB0aGlzLmhhc01vcmVSZXN1bHRzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIExvYWQgcGFpbnQgc2NoZW1lcyBmb3IgdGhlIHZlaGljbGVcbiAgICAgICAgICAgIHJldHVybiBhcGkucmVxdWVzdChcInZlaGljbGUvZ2V0cGFpbnRzY2hlbWVkZXNjcmlwdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSURcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmRvbmUocmVzcG9uc2UgPT4gdGhpcy5jcmVhdGVPcHRpb25zKHJlc3BvbnNlLlNjaGVtZXMpKVxuICAgICAgICAgICAgICAgIC5hbHdheXMoKCkgPT4gdGhpcy5pc0xvYWRpbmcgPSBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGNyZWF0ZU9wdGlvbnMoc2NoZW1lczpWZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsW10pIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGZyYWdtZW50IHNvIHdlIGFkZCBhbGwgb3B0aW9ucyB0byB0aGUgZWxlbWVudCBhdCBvbmNlXG4gICAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBlYWNoIG9wdGlvbiBhbmQgYWRkIGl0IHRvIHRoZSBmcmFnbWVudFxuICAgICAgICAgICAgZm9yIChsZXQgc2NoZW1lIG9mIHNjaGVtZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24gcmlkZXN0eWxlci1zaG93Y2FzZS1wYWludC1vcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogZnJhZ21lbnRcbiAgICAgICAgICAgICAgICB9KSBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNjaGVtZU9wdGlvbkVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICBvcHRpb24ucGFpbnRTY2hlbWUgPSBzY2hlbWU7XG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgbWFpbiBjb2xvciB0byBiZSByZXByZXNlbnRlZCBpbiB0aGUgc3dhdGNoXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogbXVsdGktY29sb3IgcGFpbnQgc2NoZW1lc1xuICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IHNjaGVtZS5Db2xvcnNbMF07XG5cbiAgICAgICAgICAgICAgICAvLyBcInN3YXRjaFwiOiBUaGUgZGlzcGxheSBvZiB0aGUgcGFpbnQgY29sb3JcbiAgICAgICAgICAgICAgICBsZXQgc3dhdGNoID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tZGlzcGxheSByaWRlc3R5bGVyLXNob3djYXNlLXBhaW50LXN3YXRjaCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLkhleFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgbmFtZSBvZiB0aGUgcGFpbnQgc2NoZW1lIGFzIHRoZSBsYWJlbFxuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzY2hlbWUuU2NoZW1lTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQXR0cmlidXRlcyBvZiB0aGUgY29sb3IgZm9yIHRoZSBzZWNvbmRhcnkgbGFiZWxcbiAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlcyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXNlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IuY3JlYXRlQXR0cmlidXRlTGFiZWwoY29sb3IuQXR0cmlidXRlcyksXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xlYXIgb3V0IG91ciBzbGlkZVdyYXBwZXIgb2YgYWxsIGVsZW1lbnRzXG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgIC8vIEFkZCBhbGwgb3B0aW9ucyB0byB0aGUgc2xpZGVXcmFwcGVyIGF0IG9uY2VcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBvblBhaW50U2NoZW1lU2VsZWN0ZWQ6IChwYWludFNjaGVtZTpWZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsKT0+dm9pZDtcbiAgICAgICAgcHJvdGVjdGVkIG9uT3B0aW9uQ2xpY2sob3B0aW9uRWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHBhaW50U2NoZW1lID0gKG9wdGlvbkVsZW1lbnQgYXMgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTY2hlbWVPcHRpb25FbGVtZW50KS5wYWludFNjaGVtZTtcblxuICAgICAgICAgICAgaWYgKHBhaW50U2NoZW1lKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIub25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWludFNjaGVtZTogcGFpbnRTY2hlbWVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vblBhaW50U2NoZW1lU2VsZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblBhaW50U2NoZW1lU2VsZWN0ZWQocGFpbnRTY2hlbWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlQXR0cmlidXRlTGFiZWwoYXR0cmlidXRlczpyaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVQYWludEF0dHJpYnV0ZXMpOnN0cmluZyB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0QXR0cmlidXRlU3RyaW5nID0gJ0dsb3NzeSc7XG5cbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk5vbmUpIHJldHVybiBkZWZhdWx0QXR0cmlidXRlU3RyaW5nO1xuXG4gICAgICAgICAgICBsZXQgc3RyaW5nQXR0cmlidXRlczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgZWFjaCBzZWxlY3RlZCBwYWludCBhdHRyaWJ1dGUgZmxhZyBmb3IgdGhlIGNvbG9yIHRvIHRoZSBsaXN0XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk1hdHRlID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk1hdHRlKSBzdHJpbmdBdHRyaWJ1dGVzLnB1c2goJ01hdHRlJyk7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk1ldGFsbGljID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk1ldGFsbGljKSBzdHJpbmdBdHRyaWJ1dGVzLnB1c2goJ01ldGFsbGljJyk7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLlBlYXJsZXNjZW50ID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLlBlYXJsZXNjZW50KSBzdHJpbmdBdHRyaWJ1dGVzLnB1c2goJ1BlYXJsZXNjZW50Jyk7XG5cbiAgICAgICAgICAgIGlmIChzdHJpbmdBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGRlZmF1bHRBdHRyaWJ1dGVTdHJpbmc7XG5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdBdHRyaWJ1dGVzLmpvaW4oJywgJyk7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var popoverClass = 'ridestyler-showcase-popover';
    var popoverInClass = 'in';

    var RideStylerShowcasePopover = function () {
        function RideStylerShowcasePopover() {
            _classCallCheck(this, RideStylerShowcasePopover);

            this.component = RideStylerShowcase.HTMLHelper.createElement({
                className: popoverClass
            });
        }

        _createClass(RideStylerShowcasePopover, [{
            key: 'show',
            value: function show() {
                this.setVisible(true);
            }
        }, {
            key: 'hide',
            value: function hide() {
                this.setVisible(false);
            }
        }, {
            key: 'setVisible',
            value: function setVisible(visible) {
                this.component.classList.toggle(popoverInClass, visible);
            }
        }, {
            key: 'isVisible',
            value: function isVisible() {
                return this.component.classList.contains(popoverInClass);
            }
        }, {
            key: 'toggle',
            value: function toggle() {
                this.setVisible(this.isVisible() ? false : true);
            }
        }]);

        return RideStylerShowcasePopover;
    }();

    RideStylerShowcase.RideStylerShowcasePopover = RideStylerShowcasePopover;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUG9wb3Zlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJwb3BvdmVyQ2xhc3MiLCJwb3BvdmVySW5DbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNldFZpc2libGUiLCJ2aXNpYmxlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJpc1Zpc2libGUiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsZUFBZSw2QkFBckI7QUFDQSxRQUFNQyxpQkFBaUIsSUFBdkI7O0FBRndCLFFBSXhCQyx5QkFKd0I7QUFPcEIsNkNBQUE7QUFBQTs7QUFDSSxpQkFBS0MsU0FBTCxHQUFpQkosbUJBQUFLLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QjtBQUN0Q0MsMkJBQVdOO0FBRDJCLGFBQXpCLENBQWpCO0FBR0g7O0FBWG1CO0FBQUE7QUFBQSxtQ0FhVDtBQUNQLHFCQUFLTyxVQUFMLENBQWdCLElBQWhCO0FBQ0g7QUFmbUI7QUFBQTtBQUFBLG1DQWlCVDtBQUNQLHFCQUFLQSxVQUFMLENBQWdCLEtBQWhCO0FBQ0g7QUFuQm1CO0FBQUE7QUFBQSx1Q0FxQkZDLE9BckJFLEVBcUJhO0FBQzdCLHFCQUFLTCxTQUFMLENBQWVNLFNBQWYsQ0FBeUJDLE1BQXpCLENBQWdDVCxjQUFoQyxFQUFnRE8sT0FBaEQ7QUFDSDtBQXZCbUI7QUFBQTtBQUFBLHdDQXlCSjtBQUNaLHVCQUFPLEtBQUtMLFNBQUwsQ0FBZU0sU0FBZixDQUF5QkUsUUFBekIsQ0FBa0NWLGNBQWxDLENBQVA7QUFDSDtBQTNCbUI7QUFBQTtBQUFBLHFDQTZCUDtBQUNULHFCQUFLTSxVQUFMLENBQWdCLEtBQUtLLFNBQUwsS0FBbUIsS0FBbkIsR0FBMkIsSUFBM0M7QUFDSDtBQS9CbUI7O0FBQUE7QUFBQTs7QUFJWGIsdUJBQUFHLHlCQUFBLEdBQXlCQSx5QkFBekI7QUE2QmhCLENBakNELEVBQVVILHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUG9wb3Zlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IHBvcG92ZXJDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBvcG92ZXInO1xuICAgIGNvbnN0IHBvcG92ZXJJbkNsYXNzID0gJ2luJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyIHtcbiAgICAgICAgcHVibGljIGNvbXBvbmVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHBvcG92ZXJDbGFzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBoaWRlKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmxlKHZpc2libGU6Ym9vbGVhbikge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LnRvZ2dsZShwb3BvdmVySW5DbGFzcywgdmlzaWJsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlKCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHBvcG92ZXJJbkNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB0b2dnbGUoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUodGhpcy5pc1Zpc2libGUoKSA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var productModalClass = 'ridestyler-showcase-product-modal';
    var titleClass = productModalClass + '-title';
    var pageClass = productModalClass + '-page';

    var RideStylerShowcaseProductModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseProductModal, _RideStylerShowcase$R);

        function RideStylerShowcaseProductModal(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseProductModal);

            return _possibleConstructorReturn(this, (RideStylerShowcaseProductModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductModal)).call(this, showcaseInstance, {
                removeOnHidden: true
            }));
        }

        _createClass(RideStylerShowcaseProductModal, [{
            key: 'buildModal',
            value: function buildModal() {
                var _this2 = this;

                _get(RideStylerShowcaseProductModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductModal.prototype), 'buildModal', this).call(this);
                this.component.classList.add(productModalClass);
                this.toggleButton = new RideStylerShowcase.RideStylerShowcaseToggleButton(this.showcase);
                this.toggleButton.onChanged = function (value) {
                    // Show the correct page when the toggle button is changed
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = _this2.pages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var page = _step.value;

                            if (page.label === value) {
                                _this2.showPage(page);
                                return;
                            }
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }
                };
                this.component.appendChild(this.toggleButton.component);
                RideStylerShowcase.HTMLHelper.createElement('h1', {
                    className: titleClass,
                    appendTo: this.component,
                    append: [this.brandTitleElement = RideStylerShowcase.HTMLHelper.createElementWithClass('span', titleClass + '-brand'), this.titleElement = RideStylerShowcase.HTMLHelper.createElement('span'), this.subtitleElement = RideStylerShowcase.HTMLHelper.createElementWithClass('span', titleClass + '-subtitle')]
                });
                this.summaryContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: productModalClass + '-summary-container'
                });
                this.imageContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: productModalClass + '-image',
                    appendTo: this.summaryContainer
                });
                this.image = this.createImage();
                this.summaryElement = RideStylerShowcase.HTMLHelper.createElement({
                    className: productModalClass + '-summary',
                    appendTo: this.summaryContainer
                });
                this.addPage({
                    label: RideStylerShowcase.strings.getString('summary'),
                    container: this.summaryContainer
                }, true);
            }
            /**
             * Add a new page to the product modal and toggle button
             * @param page The new page
             * @param setVisible If true, show the page after adding it
             */

        }, {
            key: 'addPage',
            value: function addPage(page) {
                var setVisible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

                if (!this.pages) this.pages = [];
                this.pages.push(page);
                this.toggleButton.addOption({
                    label: page.label,
                    value: page.label
                });
                if (setVisible) this.showPage(page);else RideStylerShowcase.VisibilityHelper.setVisibility(page.container, false);
                page.container.classList.add(pageClass);
                this.component.appendChild(page.container);
            }
            /**
             * Set the page as visible and hide the other pages, update the state of the toggle button
             * @param newPage The page to show
             */

        }, {
            key: 'showPage',
            value: function showPage(newPage) {
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.pages[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var page = _step2.value;

                        RideStylerShowcase.VisibilityHelper.setVisibility(page.container, page === newPage);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                this.toggleButton.setValue(newPage.label);
            }
        }, {
            key: 'onHidden',
            value: function onHidden() {
                this.image.destroy();
            }
        }]);

        return RideStylerShowcaseProductModal;
    }(RideStylerShowcase.RideStylerShowcaseModal);

    RideStylerShowcase.RideStylerShowcaseProductModal = RideStylerShowcaseProductModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInByb2R1Y3RNb2RhbENsYXNzIiwidGl0bGVDbGFzcyIsInBhZ2VDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCIsInNob3djYXNlSW5zdGFuY2UiLCJyZW1vdmVPbkhpZGRlbiIsImNvbXBvbmVudCIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZUJ1dHRvbiIsIlJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbiIsInNob3djYXNlIiwib25DaGFuZ2VkIiwicGFnZXMiLCJwYWdlIiwibGFiZWwiLCJ2YWx1ZSIsInNob3dQYWdlIiwiYXBwZW5kQ2hpbGQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZFRvIiwiYXBwZW5kIiwiYnJhbmRUaXRsZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwidGl0bGVFbGVtZW50Iiwic3VidGl0bGVFbGVtZW50Iiwic3VtbWFyeUNvbnRhaW5lciIsImltYWdlQ29udGFpbmVyIiwiaW1hZ2UiLCJjcmVhdGVJbWFnZSIsInN1bW1hcnlFbGVtZW50IiwiYWRkUGFnZSIsInN0cmluZ3MiLCJnZXRTdHJpbmciLCJjb250YWluZXIiLCJzZXRWaXNpYmxlIiwicHVzaCIsImFkZE9wdGlvbiIsIlZpc2liaWxpdHlIZWxwZXIiLCJzZXRWaXNpYmlsaXR5IiwibmV3UGFnZSIsInNldFZhbHVlIiwiZGVzdHJveSIsIlJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBR3hCLFFBQU1DLG9CQUFvQixtQ0FBMUI7QUFDQSxRQUFNQyxhQUFhRCxvQkFBb0IsUUFBdkM7QUFDQSxR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SixFQUFnQixLQUFLcEIsUUFBTCxDQUFjSCxJQUFkLEVBQWhCLEtBQ0tmLG1CQUFBeUMsZ0JBQUEsQ0FBaUJDLGFBQWpCLENBQStCM0IsS0FBS3NCLFNBQXBDLEVBQStDLEtBQS9DO0FBRUx0QixxQkFBS3NCLFNBQUwsQ0FBZTdCLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCTixTQUE3QjtBQUVBLHFCQUFLSSxTQUFMLENBQWVZLFdBQWYsQ0FBMkJKLEtBQUtzQixTQUFoQztBQUNIO0FBRUQ7Ozs7O0FBeEdvQjtBQUFBO0FBQUEscUNBNEdETSxPQTVHQyxFQTRHVztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUMzQiwwQ0FBbUIsS0FBSzdCLEtBQXhCO0FBQUEsNEJBQVdDLElBQVg7O0FBQ0lmLDJDQUFBeUMsZ0JBQUEsQ0FBaUJDLGFBQWpCLENBQStCM0IsS0FBS3NCLFNBQXBDLEVBQStDdEIsU0FBUzRCLE9BQXhEO0FBREo7QUFEMkI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFJM0IscUJBQUtqQyxZQUFMLENBQWtCa0MsUUFBbEIsQ0FBMkJELFFBQVEzQixLQUFuQztBQUNIO0FBakhtQjtBQUFBO0FBQUEsdUNBbUhGO0FBQ2QscUJBQUtlLEtBQUwsQ0FBV2MsT0FBWDtBQUNIO0FBckhtQjs7QUFBQTtBQUFBLE1BT3FDN0MsbUJBQUE4Qyx1QkFQckM7O0FBT0Y5Qyx1QkFBQUksOEJBQUEsR0FBOEJBLDhCQUE5QjtBQThIekIsQ0FySUQsRUFBVUosdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgUGFnZSA9IFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbC5QYWdlO1xuXG4gICAgY29uc3QgcHJvZHVjdE1vZGFsQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wcm9kdWN0LW1vZGFsJztcbiAgICBjb25zdCB0aXRsZUNsYXNzID0gcHJvZHVjdE1vZGFsQ2xhc3MgKyAnLXRpdGxlJztcbiAgICBjb25zdCBwYWdlQ2xhc3MgPSBwcm9kdWN0TW9kYWxDbGFzcyArICctcGFnZSc7XG5cbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBwcm90ZWN0ZWQgdGl0bGVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgYnJhbmRUaXRsZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBzdWJ0aXRsZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBzdW1tYXJ5RWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIHN1bW1hcnlDb250YWluZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIHRvZ2dsZUJ1dHRvbjpSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b247XG4gICAgICAgIFxuICAgICAgICBwcm90ZWN0ZWQgaW1hZ2VDb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBpbWFnZTpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxhbnk+O1xuXG4gICAgICAgIHByb3RlY3RlZCBwYWdlczpQYWdlW107XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBidWlsZE1vZGFsKCkge1xuICAgICAgICAgICAgc3VwZXIuYnVpbGRNb2RhbCgpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKHByb2R1Y3RNb2RhbENsYXNzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uKHRoaXMuc2hvd2Nhc2UpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24ub25DaGFuZ2VkID0gdmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFNob3cgdGhlIGNvcnJlY3QgcGFnZSB3aGVuIHRoZSB0b2dnbGUgYnV0dG9uIGlzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgdGhpcy5wYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZS5sYWJlbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BhZ2UocGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy50b2dnbGVCdXR0b24uY29tcG9uZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRpdGxlQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJyYW5kVGl0bGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdzcGFuJywgdGl0bGVDbGFzcyArICctYnJhbmQnKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJ0aXRsZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ3NwYW4nLCB0aXRsZUNsYXNzICsgJy1zdWJ0aXRsZScpXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeUNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcm9kdWN0TW9kYWxDbGFzcyArICctc3VtbWFyeS1jb250YWluZXInXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcm9kdWN0TW9kYWxDbGFzcyArICctaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnN1bW1hcnlDb250YWluZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlID0gdGhpcy5jcmVhdGVJbWFnZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHByb2R1Y3RNb2RhbENsYXNzICsgJy1zdW1tYXJ5JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5zdW1tYXJ5Q29udGFpbmVyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3N1bW1hcnknKSxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuc3VtbWFyeUNvbnRhaW5lclxuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIHRoZSBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSBlbGVtZW50IGZvciB0aGlzIHByb2R1Y3RcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVJbWFnZSgpOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPGFueT47XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBhIG5ldyBwYWdlIHRvIHRoZSBwcm9kdWN0IG1vZGFsIGFuZCB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAqIEBwYXJhbSBwYWdlIFRoZSBuZXcgcGFnZVxuICAgICAgICAgKiBAcGFyYW0gc2V0VmlzaWJsZSBJZiB0cnVlLCBzaG93IHRoZSBwYWdlIGFmdGVyIGFkZGluZyBpdFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGFkZFBhZ2UocGFnZTpQYWdlLCBzZXRWaXNpYmxlOmJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VzKSB0aGlzLnBhZ2VzID0gW107XG5cbiAgICAgICAgICAgIHRoaXMucGFnZXMucHVzaChwYWdlKTtcblxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYWRkT3B0aW9uKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogcGFnZS5sYWJlbCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFnZS5sYWJlbFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzZXRWaXNpYmxlKSB0aGlzLnNob3dQYWdlKHBhZ2UpO1xuICAgICAgICAgICAgZWxzZSBWaXNpYmlsaXR5SGVscGVyLnNldFZpc2liaWxpdHkocGFnZS5jb250YWluZXIsIGZhbHNlKTtcblxuICAgICAgICAgICAgcGFnZS5jb250YWluZXIuY2xhc3NMaXN0LmFkZChwYWdlQ2xhc3MpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChwYWdlLmNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBwYWdlIGFzIHZpc2libGUgYW5kIGhpZGUgdGhlIG90aGVyIHBhZ2VzLCB1cGRhdGUgdGhlIHN0YXRlIG9mIHRoZSB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAqIEBwYXJhbSBuZXdQYWdlIFRoZSBwYWdlIHRvIHNob3dcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBzaG93UGFnZShuZXdQYWdlOlBhZ2UpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiB0aGlzLnBhZ2VzKVxuICAgICAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eShwYWdlLmNvbnRhaW5lciwgcGFnZSA9PT0gbmV3UGFnZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnNldFZhbHVlKG5ld1BhZ2UubGFiZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xuICAgICAgICAgICAgdGhpcy5pbWFnZS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBjb250YWluZXIgdG8gc2hvdyB3aGVuIHRoZSBwYWdlIGlzIGFjdGl2YXRlZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGxhYmVsIHRvIHNob3cgZm9yIHRoZSBjb250YWluZXIgaW4gdGhlIHRvZ2dsZSBidXR0b25cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGFiZWw6c3RyaW5nO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseProductSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseProductSelector, _RideStylerShowcase$R);

        function RideStylerShowcaseProductSelector() {
            _classCallCheck(this, RideStylerShowcaseProductSelector);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseProductSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductSelector)).apply(this, arguments));

            _this.resultsPerLoad = 50;
            _this.count = -1;
            _this.index = 0;
            return _this;
        }

        _createClass(RideStylerShowcaseProductSelector, [{
            key: '_loadMore',
            value: function _loadMore() {
                var _this2 = this;

                this.isLoading = true;
                var countPromise = void 0;
                if (this.count > -1) {
                    countPromise = RideStylerShowcase.PromiseHelper.resolved(this.count);
                } else {
                    countPromise = this.countResults(this.currentFilters);
                }
                var resultsPerLoad = this.resultsPerLoad;
                return RideStylerShowcase.PromiseHelper.then(countPromise, function (productCount) {
                    _this2.count = productCount;
                    var filters = RideStylerShowcase.ObjectHelper.assign({
                        Start: _this2.index,
                        Count: resultsPerLoad
                    }, _this2.currentFilters);
                    return _this2.getResults(filters).done(function (products) {
                        _this2.index += resultsPerLoad;
                        _this2.hasMoreResults = _this2.index < _this2.count;
                        _this2.createOptions(products);
                    });
                }).always(function () {
                    _this2.isLoading = false;
                });
            }
            /**
             * Set filters and reload
             * @param newFilters The new filters
             */

        }, {
            key: 'setFilters',
            value: function setFilters(newFilters) {
                this.clearOptions();
                // Reset our count
                this.count = -1;
                // Reset our index
                this.index = 0;
                // Set our filters
                this.currentFilters = RideStylerShowcase.ObjectHelper.assign({}, this.currentFilters, newFilters);
                // Load first result set
                this.loadMore();
            }
            /**
             * Update filters and reload
             * @param filterUpdates The filter properties to update
             */

        }, {
            key: 'updateFilters',
            value: function updateFilters(filterUpdates) {
                this.setFilters(RideStylerShowcase.ObjectHelper.assign({}, this.currentFilters, filterUpdates));
            }
        }, {
            key: 'createOptions',
            value: function createOptions(products) {
                var fragment = document.createDocumentFragment();
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = products[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var product = _step.value;

                        if (!this.productFilter(product)) continue;
                        var option = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option',
                            appendTo: fragment
                        });
                        option.product = product;
                        // Image
                        {
                            var imageSource = this.productImageSource(product);
                            if (imageSource) {
                                RideStylerShowcase.HTMLHelper.createElement('img', {
                                    className: 'ridestyler-showcase-pagination-option-display',
                                    appendTo: option,
                                    properties: {
                                        src: imageSource
                                    }
                                });
                            }
                        }
                        var productImageLabels = this.productImageLabels(product);
                        RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label',
                            text: productImageLabels.primary,
                            appendTo: option
                        });
                        if (productImageLabels.secondary) RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label-secondary',
                            text: productImageLabels.secondary,
                            appendTo: option
                        });
                        if (productImageLabels.tertiary) RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label-tertiary',
                            text: productImageLabels.tertiary,
                            appendTo: option
                        });
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                this.addOptionElements(fragment);
            }
        }, {
            key: 'onOptionClick',
            value: function onOptionClick(optionElement) {
                var product = optionElement.product;
                if (product) {
                    _get(RideStylerShowcaseProductSelector.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductSelector.prototype), 'onOptionClick', this).call(this, optionElement);
                    this.onProductClick(product);
                }
            }
        }, {
            key: 'onProductClick',
            value: function onProductClick(product) {
                if (typeof this.productSelectedCallback === 'function') {
                    this.productSelectedCallback(product);
                }
            }
        }]);

        return RideStylerShowcaseProductSelector;
    }(RideStylerShowcase.RideStylerShowcasePaginationComponent);

    RideStylerShowcase.RideStylerShowcaseProductSelector = RideStylerShowcaseProductSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yLnRzIiwic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvci5qcyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3IiLCJhcmd1bWVudHMiLCJyZXN1bHRzUGVyTG9hZCIsImNvdW50IiwiaW5kZXgiLCJpc0xvYWRpbmciLCJjb3VudFByb21pc2UiLCJQcm9taXNlSGVscGVyIiwicmVzb2x2ZWQiLCJjb3VudFJlc3VsdHMiLCJjdXJyZW50RmlsdGVycyIsInRoZW4iLCJwcm9kdWN0Q291bnQiLCJmaWx0ZXJzIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiU3RhcnQiLCJDb3VudCIsImdldFJlc3VsdHMiLCJkb25lIiwiaGFzTW9yZVJlc3VsdHMiLCJjcmVhdGVPcHRpb25zIiwicHJvZHVjdHMiLCJhbHdheXMiLCJuZXdGaWx0ZXJzIiwiY2xlYXJPcHRpb25zIiwibG9hZE1vcmUiLCJmaWx0ZXJVcGRhdGVzIiwic2V0RmlsdGVycyIsImZyYWdtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwicHJvZHVjdCIsInByb2R1Y3RGaWx0ZXIiLCJvcHRpb24iLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZFRvIiwiaW1hZ2VTb3VyY2UiLCJwcm9kdWN0SW1hZ2VTb3VyY2UiLCJwcm9wZXJ0aWVzIiwic3JjIiwicHJvZHVjdEltYWdlTGFiZWxzIiwidGV4dCIsInByaW1hcnkiLCJzZWNvbmRhcnkiLCJ0ZXJ0aWFyeSIsImFkZE9wdGlvbkVsZW1lbnRzIiwib3B0aW9uRWxlbWVudCIsIm9uUHJvZHVjdENsaWNrIiwicHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2siLCJSaWRlU3R5bGVyU2hv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LGFBQXBCO0FBQ0EseUJBQUtDLGNBQUwsQ0FBb0JsQixPQUFwQjtBQUNIO0FBQ0o7QUF2Sm1CO0FBQUE7QUFBQSwyQ0EySktBLE9BM0pMLEVBMkpxQjtBQUNyQyxvQkFBSSxPQUFPLEtBQUttQix1QkFBWixLQUF3QyxVQUE1QyxFQUF3RDtBQUNwRCx5QkFBS0EsdUJBQUwsQ0FBNkJuQixPQUE3QjtBQUNIO0FBQ0o7QUEvSm1COztBQUFBO0FBQUEsTUFJaUhqQyxtQkFBQXFELHFDQUpqSDs7QUFJRnJELHVCQUFBQyxpQ0FBQSxHQUFpQ0EsaUNBQWpDO0FBNkp6QixDQWpLRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdEVsZW1lbnQ8VD4gZXh0ZW5kcyBOb2RlIHtcbiAgICAgICAgcHJvZHVjdD86IFQ7XG4gICAgfVxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3I8RGF0YVR5cGUsRmlsdGVyVHlwZSBleHRlbmRzIHJpZGVzdHlsZXIuUmVxdWVzdHMuQWN0aW9uUmVxdWVzdFBhZ2VkTW9kZWw+IGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCB7XG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50RmlsdGVyczogRmlsdGVyVHlwZTtcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlZmF1bHRGaWx0ZXJzOiBGaWx0ZXJUeXBlO1xuXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSByZXN1bHRzUGVyTG9hZCA9IDUwO1xuXG4gICAgICAgIHByb3RlY3RlZCBjb3VudDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJvdGVjdGVkIGluZGV4Om51bWJlciA9IDA7XG5cbiAgICAgICAgcHJvdGVjdGVkIF9sb2FkTW9yZSgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGNvdW50UHJvbWlzZTpSaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIscmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgY291bnRQcm9taXNlID0gUHJvbWlzZUhlbHBlci5yZXNvbHZlZCh0aGlzLmNvdW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY291bnRQcm9taXNlID0gdGhpcy5jb3VudFJlc3VsdHModGhpcy5jdXJyZW50RmlsdGVycyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHNQZXJMb2FkID0gdGhpcy5yZXN1bHRzUGVyTG9hZDtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihjb3VudFByb21pc2UsIHByb2R1Y3RDb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IHByb2R1Y3RDb3VudDtcblxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzOkZpbHRlclR5cGUgPSBPYmplY3RIZWxwZXIuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIENvdW50OiByZXN1bHRzUGVyTG9hZFxuICAgICAgICAgICAgICAgIH0sIHRoaXMuY3VycmVudEZpbHRlcnMpIGFzIEZpbHRlclR5cGU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cyhmaWx0ZXJzKS5kb25lKHByb2R1Y3RzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCArPSByZXN1bHRzUGVyTG9hZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNNb3JlUmVzdWx0cyA9IHRoaXMuaW5kZXggPCB0aGlzLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU9wdGlvbnMocHJvZHVjdHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY291bnRSZXN1bHRzKGZpbHRlcnM6IEZpbHRlclR5cGUpIDogUmlkZVN0eWxlclByb21pc2U8bnVtYmVyLHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldFJlc3VsdHMoZmlsdGVyczogRmlsdGVyVHlwZSkgOiBSaWRlU3R5bGVyUHJvbWlzZTxEYXRhVHlwZVtdLHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IGZpbHRlcnMgYW5kIHJlbG9hZFxuICAgICAgICAgKiBAcGFyYW0gbmV3RmlsdGVycyBUaGUgbmV3IGZpbHRlcnNcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXJzKG5ld0ZpbHRlcnM6IEZpbHRlclR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc2V0IG91ciBjb3VudFxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IC0xO1xuXG4gICAgICAgICAgICAvLyBSZXNldCBvdXIgaW5kZXhcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXG4gICAgICAgICAgICAvLyBTZXQgb3VyIGZpbHRlcnNcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSBPYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCBuZXdGaWx0ZXJzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTG9hZCBmaXJzdCByZXN1bHQgc2V0XG4gICAgICAgICAgICB0aGlzLmxvYWRNb3JlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGZpbHRlcnMgYW5kIHJlbG9hZFxuICAgICAgICAgKiBAcGFyYW0gZmlsdGVyVXBkYXRlcyBUaGUgZmlsdGVyIHByb3BlcnRpZXMgdG8gdXBkYXRlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgdXBkYXRlRmlsdGVycyhmaWx0ZXJVcGRhdGVzOiBGaWx0ZXJUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEZpbHRlcnMoT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgZmlsdGVyVXBkYXRlcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgZmFsc2UgaWYgdGhlIHByb2R1Y3Qgc2hvdWxkIG5vdCBiZSBkaXNwbGF5ZWQgaW4gdGhlIGxpc3RcbiAgICAgICAgICogQHBhcmFtIHByb2R1Y3QgVGhlIHByb2R1Y3RcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwcm9kdWN0RmlsdGVyKHByb2R1Y3Q6IERhdGFUeXBlKTpib29sZWFuO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIFVSTCBmb3IgdGhlIHByb2R1Y3Qgb3IgZmFsc2UtaXNoIGlmIHRoZXJlIGlzIG5vdCBvbmVcbiAgICAgICAgICogQHBhcmFtIHByb2R1Y3QgVGhlIHByb2R1Y3RcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdDogRGF0YVR5cGUpOnN0cmluZztcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IHByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0OiBEYXRhVHlwZSk6e1xuICAgICAgICAgICAgcHJpbWFyeTogc3RyaW5nO1xuICAgICAgICAgICAgc2Vjb25kYXJ5Pzogc3RyaW5nO1xuICAgICAgICAgICAgdGVydGlhcnk/OiBzdHJpbmc7XG4gICAgICAgIH07XG5cbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVPcHRpb25zKHByb2R1Y3RzOiBEYXRhVHlwZVtdKSB7XG4gICAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHByb2R1Y3Qgb2YgcHJvZHVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvZHVjdEZpbHRlcihwcm9kdWN0KSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogZnJhZ21lbnRcbiAgICAgICAgICAgICAgICB9KSBhcyBQcm9kdWN0RWxlbWVudDxEYXRhVHlwZT47XG5cbiAgICAgICAgICAgICAgICBvcHRpb24ucHJvZHVjdCA9IHByb2R1Y3Q7XG5cbiAgICAgICAgICAgICAgICAvLyBJbWFnZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlU291cmNlID0gdGhpcy5wcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlU291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWRpc3BsYXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IGltYWdlU291cmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgcHJvZHVjdEltYWdlTGFiZWxzID0gdGhpcy5wcm9kdWN0SW1hZ2VMYWJlbHMocHJvZHVjdCk7XG5cbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb2R1Y3RJbWFnZUxhYmVscy5wcmltYXJ5LFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXNlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0SW1hZ2VMYWJlbHMudGVydGlhcnkpXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC10ZXJ0aWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMudGVydGlhcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkVsZW1lbnRzKGZyYWdtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gKG9wdGlvbkVsZW1lbnQgYXMgUHJvZHVjdEVsZW1lbnQ8RGF0YVR5cGU+KS5wcm9kdWN0O1xuXG4gICAgICAgICAgICBpZiAocHJvZHVjdCkge1xuICAgICAgICAgICAgICAgIHN1cGVyLm9uT3B0aW9uQ2xpY2sob3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblByb2R1Y3RDbGljayhwcm9kdWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBwcm9kdWN0U2VsZWN0ZWRDYWxsYmFjazogKHByb2R1Y3Q6RGF0YVR5cGUpPT52b2lkO1xuXG4gICAgICAgIHByb3RlY3RlZCBvblByb2R1Y3RDbGljayhwcm9kdWN0OkRhdGFUeXBlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrKHByb2R1Y3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzUGVyTG9hZCA9IDUwO1xuICAgICAgICAgICAgdGhpcy5jb3VudCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgX2xvYWRNb3JlKCkge1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IGNvdW50UHJvbWlzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBjb3VudFByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci5yZXNvbHZlZCh0aGlzLmNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvdW50UHJvbWlzZSA9IHRoaXMuY291bnRSZXN1bHRzKHRoaXMuY3VycmVudEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0c1BlckxvYWQgPSB0aGlzLnJlc3VsdHNQZXJMb2FkO1xuICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oY291bnRQcm9taXNlLCBwcm9kdWN0Q291bnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBwcm9kdWN0Q291bnQ7XG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlcnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBDb3VudDogcmVzdWx0c1BlckxvYWRcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXN1bHRzKGZpbHRlcnMpLmRvbmUocHJvZHVjdHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ICs9IHJlc3VsdHNQZXJMb2FkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc01vcmVSZXN1bHRzID0gdGhpcy5pbmRleCA8IHRoaXMuY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlT3B0aW9ucyhwcm9kdWN0cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IGZpbHRlcnMgYW5kIHJlbG9hZFxuICAgICAgICAgKiBAcGFyYW0gbmV3RmlsdGVycyBUaGUgbmV3IGZpbHRlcnNcbiAgICAgICAgICovXG4gICAgICAgIHNldEZpbHRlcnMobmV3RmlsdGVycykge1xuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcbiAgICAgICAgICAgIC8vIFJlc2V0IG91ciBjb3VudFxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IC0xO1xuICAgICAgICAgICAgLy8gUmVzZXQgb3VyIGluZGV4XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIC8vIFNldCBvdXIgZmlsdGVyc1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCBuZXdGaWx0ZXJzKTtcbiAgICAgICAgICAgIC8vIExvYWQgZmlyc3QgcmVzdWx0IHNldFxuICAgICAgICAgICAgdGhpcy5sb2FkTW9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgZmlsdGVycyBhbmQgcmVsb2FkXG4gICAgICAgICAqIEBwYXJhbSBmaWx0ZXJVcGRhdGVzIFRoZSBmaWx0ZXIgcHJvcGVydGllcyB0byB1cGRhdGVcbiAgICAgICAgICovXG4gICAgICAgIHVwZGF0ZUZpbHRlcnMoZmlsdGVyVXBkYXRlcykge1xuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCBmaWx0ZXJVcGRhdGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlYXRlT3B0aW9ucyhwcm9kdWN0cykge1xuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9kdWN0RmlsdGVyKHByb2R1Y3QpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGZyYWdtZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICAgICAgICAgIC8vIEltYWdlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VTb3VyY2UgPSB0aGlzLnByb2R1Y3RJbWFnZVNvdXJjZShwcm9kdWN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlU291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdpbWcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1kaXNwbGF5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBpbWFnZVNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0SW1hZ2VMYWJlbHMgPSB0aGlzLnByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0KTtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMucHJpbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXNlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnRlcnRpYXJ5KVxuICAgICAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXRlcnRpYXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb2R1Y3RJbWFnZUxhYmVscy50ZXJ0aWFyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkVsZW1lbnRzKGZyYWdtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gb3B0aW9uRWxlbWVudC5wcm9kdWN0O1xuICAgICAgICAgICAgaWYgKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICBzdXBlci5vbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9kdWN0Q2xpY2socHJvZHVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25Qcm9kdWN0Q2xpY2socHJvZHVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayhwcm9kdWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yID0gUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yO1xufSkoUmlkZVN0eWxlclNob3djYXNlIHx8IChSaWRlU3R5bGVyU2hvd2Nhc2UgPSB7fSkpO1xuIl19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-qr-display';

    var RideStylerShowcaseQRCodeComponent = function () {
        function RideStylerShowcaseQRCodeComponent(link) {
            _classCallCheck(this, RideStylerShowcaseQRCodeComponent);

            this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className
            });
            this.qrCodeElement = RideStylerShowcase.HTMLHelper.createElement('a', {
                className: className + '-image',
                appendTo: this.component,
                properties: {
                    target: '_blank'
                }
            });
            this.qrCode = new QRCode(this.qrCodeElement);
            if (link) this.displayURL(link);
        }

        _createClass(RideStylerShowcaseQRCodeComponent, [{
            key: 'displayURL',
            value: function displayURL(url) {
                this.qrCodeElement.href = url;
                this.qrCode.makeCode(url);
            }
        }]);

        return RideStylerShowcaseQRCodeComponent;
    }();

    RideStylerShowcase.RideStylerShowcaseQRCodeComponent = RideStylerShowcaseQRCodeComponent;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50LnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCIsImxpbmsiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsInFyQ29kZUVsZW1lbnQiLCJhcHBlbmRUbyIsInByb3BlcnRpZXMiLCJ0YXJnZXQiLCJxckNvZGUiLCJRUkNvZGUiLCJkaXNwbGF5VVJMIiwidXJsIiwiaHJlZiIsIm1ha2VDb2RlIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVksZ0NBQWxCOztBQUR3QixRQUd4QkMsaUNBSHdCO0FBU3BCLG1EQUFZQyxJQUFaLEVBQXdCO0FBQUE7O0FBQ3BCLGlCQUFLQyxTQUFMLEdBQWlCSixtQkFBQUssVUFBQSxDQUFXQyxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQzdDTCwyQkFBV0E7QUFEa0MsYUFBaEMsQ0FBakI7QUFJQSxpQkFBS00sYUFBTCxHQUFxQlAsbUJBQUFLLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixHQUF6QixFQUE4QjtBQUMvQ0wsMkJBQVdBLFlBQVksUUFEd0I7QUFFL0NPLDBCQUFVLEtBQUtKLFNBRmdDO0FBRy9DSyw0QkFBWTtBQUNSQyw0QkFBUTtBQURBO0FBSG1DLGFBQTlCLENBQXJCO0FBUUEsaUJBQUtDLE1BQUwsR0FBYyxJQUFJQyxNQUFKLENBQVcsS0FBS0wsYUFBaEIsQ0FBZDtBQUVBLGdCQUFJSixJQUFKLEVBQVUsS0FBS1UsVUFBTCxDQUFnQlYsSUFBaEI7QUFDYjs7QUF6Qm1CO0FBQUE7QUFBQSx1Q0EyQkZXLEdBM0JFLEVBMkJRO0FBQ3hCLHFCQUFLUCxhQUFMLENBQW1CUSxJQUFuQixHQUEwQkQsR0FBMUI7QUFDQSxxQkFBS0gsTUFBTCxDQUFZSyxRQUFaLENBQXFCRixHQUFyQjtBQUNIO0FBOUJtQjs7QUFBQTtBQUFBOztBQUdYZCx1QkFBQUUsaUNBQUEsR0FBaUNBLGlDQUFqQztBQTZCaEIsQ0FoQ0QsRUFBVUYsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1xci1kaXNwbGF5JztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQgaW1wbGVtZW50cyBJQ29tcG9uZW50IHtcbiAgICAgICAgcHJpdmF0ZSBxckNvZGVFbGVtZW50OkhUTUxBbmNob3JFbGVtZW50O1xuICAgICAgICBwcml2YXRlIHFyQ29kZTpRUkNvZGU7XG5cbiAgICAgICAgcHVibGljIGNvbXBvbmVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihsaW5rPzpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnFyQ29kZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLWltYWdlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucXJDb2RlID0gbmV3IFFSQ29kZSh0aGlzLnFyQ29kZUVsZW1lbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobGluaykgdGhpcy5kaXNwbGF5VVJMKGxpbmspO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGRpc3BsYXlVUkwodXJsOnN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5xckNvZGVFbGVtZW50LmhyZWYgPSB1cmw7XG4gICAgICAgICAgICB0aGlzLnFyQ29kZS5tYWtlQ29kZSh1cmwpO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var share;
    (function (share) {
        var buttonClass = 'ridestyler-showcase-share-button';

        var ShareButton = function () {
            function ShareButton(settings) {
                var _this = this;

                _classCallCheck(this, ShareButton);

                this.component = RideStylerShowcase.HTMLHelper.createButton({
                    className: buttonClass
                });
                if (settings.className) this.component.classList.add(settings.className);
                if (settings.title) this.component.title = settings.title;
                this.component.addEventListener('click', function () {
                    return _this.onClick();
                });
            }
            /**
             * Update the URL for this share button to share
             * @param url The URL to share
             */


            _createClass(ShareButton, [{
                key: 'setURL',
                value: function setURL(url) {
                    this.currentURL = url;
                }
                /**
                 * Attach tags to the message being shared
                 * @param tags The tags to attach to the message
                 */

            }, {
                key: 'setTags',
                value: function setTags(tags) {
                    this.tags = tags;
                }
                /**
                 * Set a message to share with the URL
                 * @param message The message to share along with the URL
                 */

            }, {
                key: 'setMessage',
                value: function setMessage(message) {
                    this.message = message;
                }
                /**
                 * Called every time the share button is clicked
                 * @virtual
                 */

            }, {
                key: 'onClick',
                value: function onClick() {
                    if (!this.currentURL) return;
                    this.share();
                }
                /**
                 * Share the current URL
                 * @virtual
                 */

            }, {
                key: 'share',
                value: function share() {}
            }, {
                key: 'openNewWindow',
                value: function openNewWindow(url, settings) {
                    settings = settings || {};
                    var defaultHeight = 420,
                        defaultWidth = 550;
                    var width = settings.width || defaultWidth,
                        height = settings.height || defaultHeight;
                    var screenHeight = screen.height,
                        screenWidth = screen.width;
                    var top = screenHeight > height ? Math.round(screenHeight / 2 - height / 2) : 0,
                        left = Math.round(screenWidth / 2 - width / 2);
                    var target = settings.target || 'share';
                    var windowSettings = [];
                    var addSetting = function addSetting(name, value) {
                        return windowSettings.push(name + '=' + value);
                    };
                    var addBooleanSetting = function addBooleanSetting(name, enabled, enabledByDefault) {
                        if (typeof enabled !== 'boolean') enabled = enabledByDefault;
                        addSetting(name, enabled ? 'yes' : 'no');
                    };
                    addBooleanSetting('scrollbars', settings.enableScrollbars, true);
                    addBooleanSetting('resizable', settings.enableResizeable, true);
                    addBooleanSetting('toolbar', settings.enableToolbar, false);
                    addBooleanSetting('location', settings.enableLocation, true);
                    addSetting('width', width.toString());
                    addSetting('height', height.toString());
                    addSetting('top', top.toString());
                    addSetting('left', left.toString());
                    window.open(url, target, target !== '_blank' ? windowSettings.join(',') : '');
                }
            }, {
                key: 'getShareRedirectURL',
                value: function getShareRedirectURL() {
                    var appURL = 'https://app.ridestyler.net';
                    if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Alpha) appURL = 'http://app-alpha.ridestyler.net';else if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Beta) appURL = 'http://app-beta.ridestyler.net';
                    return appURL + '/shared.html';
                }
            }]);

            return ShareButton;
        }();

        share.ShareButton = ShareButton;
        var twitterIntentURL = '';

        var TwitterShareButton = function (_ShareButton) {
            _inherits(TwitterShareButton, _ShareButton);

            function TwitterShareButton() {
                _classCallCheck(this, TwitterShareButton);

                return _possibleConstructorReturn(this, (TwitterShareButton.__proto__ || Object.getPrototypeOf(TwitterShareButton)).call(this, {
                    className: buttonClass + '-twitter',
                    title: 'Twitter'
                }));
            }
            /**
             * Share the current URL via Twitter
             */


            _createClass(TwitterShareButton, [{
                key: 'share',
                value: function share() {
                    var url = 'https://twitter.com/intent/tweet?';
                    var twitterIntentParameters = ['url=' + encodeURIComponent(this.currentURL)];
                    if (this.message) twitterIntentParameters.push('text=' + encodeURIComponent(this.message));
                    if (this.tags && this.tags.length) twitterIntentParameters.push('hashtags=' + RideStylerShowcase.ArrayHelper.map(this.tags, function (tag) {
                        return encodeURIComponent(tag);
                    }).join(','));
                    url += twitterIntentParameters.join('&');
                    this.openNewWindow(url);
                }
            }]);

            return TwitterShareButton;
        }(ShareButton);

        share.TwitterShareButton = TwitterShareButton;

        var FacebookShareButton = function (_ShareButton2) {
            _inherits(FacebookShareButton, _ShareButton2);

            function FacebookShareButton() {
                _classCallCheck(this, FacebookShareButton);

                return _possibleConstructorReturn(this, (FacebookShareButton.__proto__ || Object.getPrototypeOf(FacebookShareButton)).call(this, {
                    className: buttonClass + '-facebook',
                    title: 'Facebook'
                }));
            }
            /**
             * Share the current URL via Facebook
             */


            _createClass(FacebookShareButton, [{
                key: 'share',
                value: function share() {
                    var url = 'https://www.facebook.com/dialog/share?';
                    var facebookDialogParameters = ['app_id=1576380412582845', 'display=popup', 'href=' + encodeURIComponent(this.currentURL), 'redirect_uri=' + encodeURIComponent(this.getShareRedirectURL())];
                    // Facebook only lets you specify one hashtag, so we use the first
                    if (this.tags && this.tags.length) facebookDialogParameters.push('hashtag=' + encodeURIComponent('#' + this.tags[0]));
                    url += facebookDialogParameters.join('&');
                    this.openNewWindow(url);
                }
            }]);

            return FacebookShareButton;
        }(ShareButton);

        share.FacebookShareButton = FacebookShareButton;

        var NewWindowShareButton = function (_ShareButton3) {
            _inherits(NewWindowShareButton, _ShareButton3);

            function NewWindowShareButton() {
                _classCallCheck(this, NewWindowShareButton);

                return _possibleConstructorReturn(this, (NewWindowShareButton.__proto__ || Object.getPrototypeOf(NewWindowShareButton)).call(this, {
                    className: buttonClass + '-link'
                }));
            }
            /**
             * Share the current URL by opening it in a new window
             */


            _createClass(NewWindowShareButton, [{
                key: 'share',
                value: function share() {
                    this.openNewWindow(this.currentURL, {
                        target: '_blank'
                    });
                }
            }]);

            return NewWindowShareButton;
        }(ShareButton);

        share.NewWindowShareButton = NewWindowShareButton;

        var QRShareButton = function (_ShareButton4) {
            _inherits(QRShareButton, _ShareButton4);

            function QRShareButton() {
                _classCallCheck(this, QRShareButton);

                var _this5 = _possibleConstructorReturn(this, (QRShareButton.__proto__ || Object.getPrototypeOf(QRShareButton)).call(this, {
                    className: buttonClass + '-qr-code'
                }));

                _this5.popover = new RideStylerShowcase.RideStylerShowcasePopover();
                _this5.component.appendChild(_this5.popover.component);
                _this5.qrCode = new RideStylerShowcase.RideStylerShowcaseQRCodeComponent();
                _this5.popover.component.appendChild(_this5.qrCode.component);
                return _this5;
            }

            _createClass(QRShareButton, [{
                key: 'setURL',
                value: function setURL(url) {
                    _get(QRShareButton.prototype.__proto__ || Object.getPrototypeOf(QRShareButton.prototype), 'setURL', this).call(this, url);
                    this.qrCode.displayURL(url);
                }
            }, {
                key: 'onClick',
                value: function onClick() {
                    this.popover.toggle();
                }
            }]);

            return QRShareButton;
        }(ShareButton);

        share.QRShareButton = QRShareButton;
    })(share = RideStylerShowcase.share || (RideStylerShowcase.share = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU2hhcmVCdXR0b24udHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwic2hhcmUiLCJidXR0b25DbGFzcyIsIlNoYXJlQnV0dG9uIiwic2V0dGluZ3MiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlQnV0dG9uIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwidGl0bGUiLCJhZGRFdmVudExpc3RlbmVyIiwib25DbGljayIsInVybCIsImN1cnJlbnRVUkwiLCJ0YWdzIiwibWVzc2FnZSIsImRlZmF1bHRIZWlnaHQiLCJkZWZhdWx0V2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsInNjcmVlbkhlaWdodCIsInNjcmVlbiIsInNjcmVlbldpZHRoIiwidG9wIiwiTWF0aCIsInJvdW5kIiwibGVmdCIsInRhcmdldCIsIndpbmRvd1NldHRpbmdzIiwiYWRkU2V0dGluZyIsIm5hbWUiLCJ2YWx1ZSIsInB1c2giLCJhZGRCb29sZWFuU2V0dGluZyIsImVuYWJsZWQiLCJlbmFibGVkQnlEZWZhdWx0IiwiZW5hYmxlU2Nyb2xsYmFycyIsImVuYWJsZVJlc2l6ZWFibGUiLCJlbmFibGVUb29sYmFyIiwiZW5hYmxlTG9jYXRpb24iLCJ0b1N0cmluZyIsIndpbmRvdyIsIm9wZW4iLCJqb2luIiwiYXBwVVJMIiwiYXBpIiwiZW52aXJvbm1lbnQiLCJFbnZpcm9ubWVudCIsIkFscGhhIiwiQmV0YSIsInR3aXR0ZXJJbnRlbnRVUkwiLCJUd2l0dGVyU2hhcmVCdXR0b24iLCJ0d2l0dGVySW50ZW50UGFyYW1ldGVycyIsImVuY29kZVVSSUNvbXBvbmVudCIsImxlbmd0aCIsIkFycmF5SGVscGVyIiwibWFwIiwidGFnIiwib3Blbk5ld1dpbmRvdyIsIkZhY2Vib29rU2hhcmVCdXR0b24iLCJmYWNlYm9va0RpYWxvZ1BhcmFtZXRlcnMiLCJnZXRTaGFyZVJlZGlyZWN0VVJMIiwiTmV3V2luZG93U2hhcmVCdXR0b24iLCJRUlNoYXJlQnV0dG9uIiwicG9wb3ZlciIsIlJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIiLCJhcHBlbmRDaGlsZCIsInFyQ29kZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCIsImRpc3BsYXlVUkwiLCJ0b2dnbGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxLQUFBO0FBQUEsS0FBQSxVQUFBQSxLQUFBLEVBQUs7QUFDOUIsWUFBTUMsY0FBYyxrQ0FBcEI7O0FBRDhCLFlBRzlCQyxXQUg4QjtBQXFCMUIsaUNBQVlDLFFBQVosRUFBeUM7QUFBQTs7QUFBQTs7QUFDckMscUJBQUtDLFNBQUwsR0FBaUJMLG1CQUFBTSxVQUFBLENBQVdDLFlBQVgsQ0FBd0I7QUFDckNDLCtCQUFXTjtBQUQwQixpQkFBeEIsQ0FBakI7QUFJQSxvQkFBSUUsU0FBU0ksU0FBYixFQUF3QixLQUFLSCxTQUFMLENBQWVJLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCTixTQUFTSSxTQUF0QztBQUN4QixvQkFBSUosU0FBU08sS0FBYixFQUFvQixLQUFLTixTQUFMLENBQWVNLEtBQWYsR0FBdUJQLFNBQVNPLEtBQWhDO0FBRXBCLHFCQUFLTixTQUFMLENBQWVPLGdCQUFmLENBQWdDLE9BQWhDLEVBQXlDO0FBQUEsMkJBQU0sTUFBS0MsT0FBTCxFQUFOO0FBQUEsaUJBQXpDO0FBQ0g7QUFFRDs7Ozs7O0FBaEMwQjtBQUFBO0FBQUEsdUNBb0NaQyxHQXBDWSxFQW9DRjtBQUNwQix5QkFBS0MsVUFBTCxHQUFrQkQsR0FBbEI7QUFDSDtBQUVEOzs7OztBQXhDMEI7QUFBQTtBQUFBLHdDQTRDWEUsSUE1Q1csRUE0Q0U7QUFDeEIseUJBQUtBLElBQUwsR0FBWUEsSUFBWjtBQUNIO0FBRUQ7Ozs7O0FBaEQwQjtBQUFBO0FBQUEsMkNBb0RSQyxPQXBEUSxFQW9ETTtBQUM1Qix5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QUNBLHVCQUFLSixPQUFMLENBQWE3RCxTQUFiLENBQXVCK0QsV0FBdkIsQ0FBbUMsT0FBS0MsTUFBTCxDQUFZaEUsU0FBL0M7QUFUSjtBQVVDOztBQWxPeUI7QUFBQTtBQUFBLHVDQW9PWlMsR0FwT1ksRUFvT0Y7QUFDcEIseUlBQWFBLEdBQWI7QUFFQSx5QkFBS3VELE1BQUwsQ0FBWUUsVUFBWixDQUF1QnpELEdBQXZCO0FBQ0g7QUF4T3lCO0FBQUE7QUFBQSwwQ0EwT1o7QUFDVix5QkFBS29ELE9BQUwsQ0FBYU0sTUFBYjtBQUNIO0FBNU95Qjs7QUFBQTtBQUFBLFVBb05LckUsV0FwTkw7O0FBb05qQkYsY0FBQWdFLGFBQUEsR0FBYUEsYUFBYjtBQTBCaEIsS0E5TzRCLEVBQUFoRSxRQUFBRCxtQkFBQUMsS0FBQSxLQUFBRCxtQkFBQUMsS0FBQSxHQUFLLEVBQUwsQ0FBQTtBQThPNUIsQ0E5T0QsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZUJ1dHRvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc2hhcmUge1xuICAgIGNvbnN0IGJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUtYnV0dG9uJ1xuXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYXJlQnV0dG9uIGltcGxlbWVudHMgSUNvbXBvbmVudCB7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBjb21wb25lbnQ6SFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgVVJMIHRvIHNoYXJlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudFVSTDpzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0YWdzIHRvIGF0dGFjaCB0byB0aGUgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIHRhZ3M6c3RyaW5nW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZXh0IHRvIHNoYXJlIHdpdGggdGhlIFVSTFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG1lc3NhZ2U6c3RyaW5nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOlNoYXJlQnV0dG9uLlNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmNsYXNzTmFtZSkgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5jbGFzc05hbWUpO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRpdGxlKSB0aGlzLmNvbXBvbmVudC50aXRsZSA9IHNldHRpbmdzLnRpdGxlO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub25DbGljaygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgdGhlIFVSTCBmb3IgdGhpcyBzaGFyZSBidXR0b24gdG8gc2hhcmVcbiAgICAgICAgICogQHBhcmFtIHVybCBUaGUgVVJMIHRvIHNoYXJlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0VVJMKHVybDpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFVSTCA9IHVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRhY2ggdGFncyB0byB0aGUgbWVzc2FnZSBiZWluZyBzaGFyZWRcbiAgICAgICAgICogQHBhcmFtIHRhZ3MgVGhlIHRhZ3MgdG8gYXR0YWNoIHRvIHRoZSBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0VGFncyh0YWdzOnN0cmluZ1tdKSB7XG4gICAgICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBhIG1lc3NhZ2UgdG8gc2hhcmUgd2l0aCB0aGUgVVJMXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHNoYXJlIGFsb25nIHdpdGggdGhlIFVSTFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldE1lc3NhZ2UobWVzc2FnZTpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHNoYXJlIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25DbGljaygpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50VVJMKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuc2hhcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkxcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHt9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9wZW5OZXdXaW5kb3codXJsOnN0cmluZywgc2V0dGluZ3M/OntcbiAgICAgICAgICAgIHdpZHRoPzogbnVtYmVyLFxuICAgICAgICAgICAgaGVpZ2h0PzogbnVtYmVyLFxuICAgICAgICAgICAgZW5hYmxlU2Nyb2xsYmFycz86IGJvb2xlYW4sXG4gICAgICAgICAgICBlbmFibGVSZXNpemVhYmxlPzogYm9vbGVhbixcbiAgICAgICAgICAgIGVuYWJsZVRvb2xiYXI/OiBib29sZWFuLFxuICAgICAgICAgICAgZW5hYmxlTG9jYXRpb24/OiBib29sZWFuLFxuICAgICAgICAgICAgdGFyZ2V0Pzogc3RyaW5nXG4gICAgICAgIH0pIHtcbiAgICAgICAgICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XG5cbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA0MjAsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0V2lkdGggPSA1NTA7XG5cbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gc2V0dGluZ3Mud2lkdGggfHwgZGVmYXVsdFdpZHRoLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gc2V0dGluZ3MuaGVpZ2h0IHx8IGRlZmF1bHRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IHNjcmVlbi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICBzY3JlZW5XaWR0aCA9IHNjcmVlbi53aWR0aDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdG9wID0gc2NyZWVuSGVpZ2h0ID4gaGVpZ2h0ID8gTWF0aC5yb3VuZCgoc2NyZWVuSGVpZ2h0IC8gMikgLSAoaGVpZ2h0IC8gMikpIDogMCxcbiAgICAgICAgICAgICAgICAgIGxlZnQgPSBNYXRoLnJvdW5kKChzY3JlZW5XaWR0aCAvIDIpIC0gKHdpZHRoIC8gMikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBzZXR0aW5ncy50YXJnZXQgfHwgJ3NoYXJlJztcblxuICAgICAgICAgICAgY29uc3Qgd2luZG93U2V0dGluZ3M6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGFkZFNldHRpbmcgPSAobmFtZTpzdHJpbmcsIHZhbHVlOnN0cmluZykgPT4gd2luZG93U2V0dGluZ3MucHVzaChuYW1lICsgJz0nICsgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgYWRkQm9vbGVhblNldHRpbmcgPSAobmFtZTpzdHJpbmcsIGVuYWJsZWQ6Ym9vbGVhbiwgZW5hYmxlZEJ5RGVmYXVsdDpib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbmFibGVkICE9PSAnYm9vbGVhbicpIGVuYWJsZWQgPSBlbmFibGVkQnlEZWZhdWx0O1xuXG4gICAgICAgICAgICAgICAgYWRkU2V0dGluZyhuYW1lLCBlbmFibGVkID8gJ3llcycgOiAnbm8nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGFkZEJvb2xlYW5TZXR0aW5nKCdzY3JvbGxiYXJzJywgc2V0dGluZ3MuZW5hYmxlU2Nyb2xsYmFycywgdHJ1ZSk7XG4gICAgICAgICAgICBhZGRCb29sZWFuU2V0dGluZygncmVzaXphYmxlJywgc2V0dGluZ3MuZW5hYmxlUmVzaXplYWJsZSwgdHJ1ZSk7XG4gICAgICAgICAgICBhZGRCb29sZWFuU2V0dGluZygndG9vbGJhcicsIHNldHRpbmdzLmVuYWJsZVRvb2xiYXIsIGZhbHNlKTtcbiAgICAgICAgICAgIGFkZEJvb2xlYW5TZXR0aW5nKCdsb2NhdGlvbicsIHNldHRpbmdzLmVuYWJsZUxvY2F0aW9uLCB0cnVlKTtcblxuICAgICAgICAgICAgYWRkU2V0dGluZygnd2lkdGgnLCB3aWR0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ2hlaWdodCcsIGhlaWdodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ3RvcCcsIHRvcC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ2xlZnQnLCBsZWZ0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwsIHRhcmdldCwgdGFyZ2V0ICE9PSAnX2JsYW5rJyA/IHdpbmRvd1NldHRpbmdzLmpvaW4oJywnKSA6ICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZXRTaGFyZVJlZGlyZWN0VVJMKCk6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBhcHBVUkwgPSAnaHR0cHM6Ly9hcHAucmlkZXN0eWxlci5uZXQnO1xuXG4gICAgICAgICAgICBpZiAoYXBpLmVudmlyb25tZW50ID09PSBhcGkuRW52aXJvbm1lbnQuQWxwaGEpIGFwcFVSTCA9ICdodHRwOi8vYXBwLWFscGhhLnJpZGVzdHlsZXIubmV0JztcbiAgICAgICAgICAgIGVsc2UgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkJldGEpIGFwcFVSTCA9ICdodHRwOi8vYXBwLWJldGEucmlkZXN0eWxlci5uZXQnO1xuXG4gICAgICAgICAgICByZXR1cm4gYXBwVVJMICsgJy9zaGFyZWQuaHRtbCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBTZXR0aW5ncyB7XG4gICAgICAgICAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICB0aXRsZT86IHN0cmluZztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHR3aXR0ZXJJbnRlbnRVUkwgPSAnJztcbiAgICBleHBvcnQgY2xhc3MgVHdpdHRlclNoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzICsgJy10d2l0dGVyJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1R3aXR0ZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkwgdmlhIFR3aXR0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/JztcbiAgICAgICAgICAgIGxldCB0d2l0dGVySW50ZW50UGFyYW1ldGVycyA9IFtcbiAgICAgICAgICAgICAgICAndXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jdXJyZW50VVJMKVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZSkgXG4gICAgICAgICAgICAgICAgdHdpdHRlckludGVudFBhcmFtZXRlcnMucHVzaCgndGV4dD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMubWVzc2FnZSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy50YWdzICYmIHRoaXMudGFncy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdHdpdHRlckludGVudFBhcmFtZXRlcnMucHVzaCgnaGFzaHRhZ3M9JyArIEFycmF5SGVscGVyLm1hcCh0aGlzLnRhZ3MsIHRhZyA9PiBlbmNvZGVVUklDb21wb25lbnQodGFnKSkuam9pbignLCcpKTtcblxuICAgICAgICAgICAgdXJsICs9IHR3aXR0ZXJJbnRlbnRQYXJhbWV0ZXJzLmpvaW4oJyYnKTtcblxuICAgICAgICAgICAgdGhpcy5vcGVuTmV3V2luZG93KHVybCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgRmFjZWJvb2tTaGFyZUJ1dHRvbiBleHRlbmRzIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBidXR0b25DbGFzcyArICctZmFjZWJvb2snLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFjZWJvb2snXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYXJlIHRoZSBjdXJyZW50IFVSTCB2aWEgRmFjZWJvb2tcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2RpYWxvZy9zaGFyZT8nO1xuICAgICAgICAgICAgbGV0IGZhY2Vib29rRGlhbG9nUGFyYW1ldGVycyA9IFtcbiAgICAgICAgICAgICAgICAnYXBwX2lkPTE1NzYzODA0MTI1ODI4NDUnLFxuICAgICAgICAgICAgICAgICdkaXNwbGF5PXBvcHVwJyxcbiAgICAgICAgICAgICAgICAnaHJlZj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY3VycmVudFVSTCksXG4gICAgICAgICAgICAgICAgJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZ2V0U2hhcmVSZWRpcmVjdFVSTCgpKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmFjZWJvb2sgb25seSBsZXRzIHlvdSBzcGVjaWZ5IG9uZSBoYXNodGFnLCBzbyB3ZSB1c2UgdGhlIGZpcnN0XG4gICAgICAgICAgICBpZiAodGhpcy50YWdzICYmIHRoaXMudGFncy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZmFjZWJvb2tEaWFsb2dQYXJhbWV0ZXJzLnB1c2goJ2hhc2h0YWc9JyArIGVuY29kZVVSSUNvbXBvbmVudCgnIycgKyB0aGlzLnRhZ3NbMF0pKTtcblxuICAgICAgICAgICAgdXJsICs9IGZhY2Vib29rRGlhbG9nUGFyYW1ldGVycy5qb2luKCcmJyk7XG5cbiAgICAgICAgICAgIHRoaXMub3Blbk5ld1dpbmRvdyh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIE5ld1dpbmRvd1NoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzICsgJy1saW5rJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkwgYnkgb3BlbmluZyBpdCBpbiBhIG5ldyB3aW5kb3dcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHtcbiAgICAgICAgICAgIHRoaXMub3Blbk5ld1dpbmRvdyh0aGlzLmN1cnJlbnRVUkwsIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBRUlNoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBwcml2YXRlIHBvcG92ZXI6UmlkZVN0eWxlclNob3djYXNlUG9wb3ZlcjtcbiAgICAgICAgcHJpdmF0ZSBxckNvZGU6UmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYnV0dG9uQ2xhc3MgKyAnLXFyLWNvZGUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5wb3BvdmVyID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMucG9wb3Zlci5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLnFyQ29kZSA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQoKTtcbiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5xckNvZGUuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRVUkwodXJsOnN0cmluZykge1xuICAgICAgICAgICAgc3VwZXIuc2V0VVJMKHVybCk7XG5cbiAgICAgICAgICAgIHRoaXMucXJDb2RlLmRpc3BsYXlVUkwodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBvbkNsaWNrKCkge1xuICAgICAgICAgICAgdGhpcy5wb3BvdmVyLnRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var shareModalClass = 'ridestyler-showcase-share';

    var RideStylerShowcaseShareModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseShareModal, _RideStylerShowcase$R);

        function RideStylerShowcaseShareModal(showcaseInstance, vehicleRenderInstructions) {
            _classCallCheck(this, RideStylerShowcaseShareModal);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseShareModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal)).call(this, showcaseInstance, {
                removeOnHidden: true,
                full: true
            }));

            _this.imageType = 2 /* Angle */;
            _this.resizedCallback = function () {
                return _this.updateViewport();
            };
            // Copy the render instructions
            _this.vehicleRenderInstructions = Object.assign({}, vehicleRenderInstructions);
            _this.onInstructionsChanged();
            return _this;
        }
        /**
         * Build the DOM structure
         */


        _createClass(RideStylerShowcaseShareModal, [{
            key: 'buildModal',
            value: function buildModal() {
                var _this2 = this;

                _get(RideStylerShowcaseShareModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal.prototype), 'buildModal', this).call(this);
                this.component.classList.add(shareModalClass);
                var background = new RideStylerShowcase.RideStylerShowcaseBackground(this.showcase);
                this.component.appendChild(background.component);
                RideStylerShowcase.HTMLHelper.createElement('h1', {
                    appendTo: this.component,
                    text: RideStylerShowcase.strings.getString('share-my-vehicle')
                });
                // Instructions
                RideStylerShowcase.HTMLHelper.createElement('p', {
                    className: 'ridestyler-showcase-share-instructions',
                    text: RideStylerShowcase.strings.getString('share-instructions'),
                    appendTo: this.component
                });
                this.createShareButtons();
                // Rotate UI
                if (this.canSwitchAngle()) {
                    this.rotateElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: 'ridestyler-showcase-rotate-vehicle',
                        appendTo: this.component
                    });
                    this.rotateElement.addEventListener('click', function () {
                        return _this2.switchAngle();
                    });
                }
            }
        }, {
            key: 'createShareButtons',
            value: function createShareButtons() {
                this.shareButtons = [new RideStylerShowcase.share.FacebookShareButton(), new RideStylerShowcase.share.TwitterShareButton(), new RideStylerShowcase.share.QRShareButton(), new RideStylerShowcase.share.NewWindowShareButton()];
                var shareButtonContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: shareModalClass + '-buttons',
                    appendTo: this.component
                });
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.shareButtons[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var shareButton = _step.value;

                        shareButtonContainer.appendChild(shareButton.component);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'onShow',
            value: function onShow() {
                _get(RideStylerShowcaseShareModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal.prototype), 'onShow', this).call(this);
                this.setupViewport();
                this.events.on('resized', this.resizedCallback);
            }
        }, {
            key: 'onHidden',
            value: function onHidden() {
                _get(RideStylerShowcaseShareModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal.prototype), 'onHidden', this).call(this);
                this.events.off('resized', this.resizedCallback);
            }
        }, {
            key: 'updateViewport',
            value: function updateViewport() {
                this.vehicleViewport.Update(this.vehicleRenderInstructions);
            }
        }, {
            key: 'getShareURL',
            value: function getShareURL() {
                var appURL = 'https://app.ridestyler.net';
                if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Alpha) appURL = 'http://app-alpha.ridestyler.net';else if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Beta) appURL = 'http://app-beta.ridestyler.net';
                var sharePath = '/share.cshtml?';
                var shareParams = ridestyler.utils.toParamString(RideStylerShowcase.ObjectHelper.assign(ridestyler.auth.authenticateData(null), this.vehicleRenderInstructions));
                return appURL + sharePath + shareParams;
            }
        }, {
            key: 'setupViewport',
            value: function setupViewport() {
                var _this3 = this;

                var viewportElement = RideStylerShowcase.HTMLHelper.createElementWithClass('div', 'ridestyler-showcase-viewport');
                this.component.appendChild(viewportElement);
                viewportElement.addEventListener('click', function () {
                    return _this3.switchAngle();
                });
                this.vehicleViewport = new RideStylerViewport(viewportElement);
                var viewportUpdated = this.vehicleViewport.Update(this.vehicleRenderInstructions);
                if (this.rotateElement) viewportUpdated.done(function () {
                    _this3.rotateElement.classList.add('in');
                });
            }
        }, {
            key: 'canSwitchAngle',
            value: function canSwitchAngle() {
                var _state$getData = this.state.getData(),
                    currentVehicleDescriptionModel = _state$getData.currentVehicleDescriptionModel;

                return currentVehicleDescriptionModel.HasAngledImage && currentVehicleDescriptionModel.HasSideImage;
            }
        }, {
            key: 'onInstructionsChanged',
            value: function onInstructionsChanged() {
                var _this4 = this;

                var shareURL = this.getShareURL();
                this.setEnabled(false);
                RideStylerShowcase.api.request("link/create", {
                    URL: this.getShareURL()
                }).done(function (response) {
                    _this4.updateURL(response.ShortURL);
                    _this4.setEnabled(true);
                });
            }
        }, {
            key: 'setEnabled',
            value: function setEnabled(enabled) {
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.shareButtons[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var shareButton = _step2.value;

                        shareButton.component.disabled = !enabled;
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
        }, {
            key: 'updateURL',
            value: function updateURL(shareURL) {
                var shareTags = ['vehicle'];
                var shareMessage = RideStylerShowcase.strings.getString('check-out-my-vehicle');
                if (this.vehicleRenderInstructions.WheelFitment) shareTags.push('wheels');
                // Update the share buttons
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = this.shareButtons[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var shareButton = _step3.value;

                        shareButton.setURL(shareURL);
                        shareButton.setTags(shareTags);
                        shareButton.setMessage(shareMessage);
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }
            }
        }, {
            key: 'switchAngle',
            value: function switchAngle() {
                if (!this.canSwitchAngle() || this.state.getData().currentWheel.HasSideImage === false) return;
                if (this.imageType === 2 /* Angle */) this.imageType = 1 /* Side */;else this.imageType = 2 /* Angle */;
                this.vehicleRenderInstructions.Type = this.imageType;
                this.vehicleViewport.Update({
                    Type: this.imageType
                });
                this.onInstructionsChanged();
            }
        }]);

        return RideStylerShowcaseShareModal;
    }(RideStylerShowcase.RideStylerShowcaseModal);

    RideStylerShowcase.RideStylerShowcaseShareModal = RideStylerShowcaseShareModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJzaGFyZU1vZGFsQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsIiwic2hvd2Nhc2VJbnN0YW5jZSIsInZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMiLCJyZW1vdmVPbkhpZGRlbiIsImZ1bGwiLCJpbWFnZVR5cGUiLCJyZXNpemVkQ2FsbGJhY2siLCJ1cGRhdGVWaWV3cG9ydCIsIk9iamVjdCIsImFzc2lnbiIsIm9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCIsImNvbXBvbmVudCIsImNsYXNzTGlzdCIsImFkZCIsImJhY2tncm91bmQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCYWNrZ3JvdW5kIiwic2hvd2Nhc2UiLCJhcHBlbmRDaGlsZCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kVG8iLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImNsYXNzTmFtZSIsImNyZWF0ZVNoYXJlQnV0dG9ucyIsImNhblN3aXRjaEFuZ2xlIiwicm90YXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2l0Y2hBbmdsZSIsInNoYXJlQnV0dG9ucyIsInNoYXJlIiwiRmFjZWJvb2tTaGFyZUJ1dHRvbiIsIlR3aXR0ZXJTaGFyZUJ1dHRvbiIsIlFSU2hhcmVCdXR0b24iLCJOZXdXaW5kb3dTaGFyZUJ1dHRvbiIsInNoYXJlQnV0dG9uQ29udGFpbmVyIiwic2hhcmVCdXR0b24iLCJzZXR1cFZpZXdwb3J0IiwiZXZlbnRzIiwib24iLCJvZmYiLCJ2ZWhpY2xlVmlld3BvcnQiLCJVcGRhdGUiLCJhcHBVUkwiLCJhcGkiLCJlbnZpcm9ubWVudCIsIkVudmlyb25tZW50IiwiQWxwaGEiLCJCZXRhIiwic2hhcmVQYXRoIiwic2hhcmVQYXJhbXMiLCJyaWRlc3R5bGVyIiwidXRpbHMiLCJ0b1BhcmFtU3RyaW5nIiwiT2JqZWN0SGVscGVyIiwiYXV0aCIsImF1dGhlbnRpY2F0ZURhdGEiLCJ2aWV3cG9ydEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwiUmlkZVN0eWxlclZpZXdwb3J0Iiwidmlld3BvcnRVcGRhdGVkIiwiZG9uZSIsInN0YXRlIiwiZ2V0RGF0YSIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCIsIkhhc0FuZ2xlZEltYWdlIiwiSGFzU2lkZUltYWdlIiwic2hhcmVVUkwiLCJnZXRTaGFyZVVSTCIsInNldEVuYWJsZWQiLCJyZXF1ZXN0IiwiVVJMIiwidXBkYXRlVVJMIiwicmVzcG9uc2UiLCJTaG9ydFVSTCIsImVuYWJsZWQiLCJkaXNhYmxlZCIsInNoYXJlVGFncyIsInNoYXJlTWVzc2FnZSIsIldoZWVsRml0bWVudCIsInB1c2giLCJzZXRVUkwiLCJzZXRUYWdzIiwic2V0TWVzc2FnZSIsImN1cnJlbnRXaGVlbCIsIlR5cGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFNQyxrQkFBa0IsMkJBQXhCOztBQUR3QixRQUV4QkMsNEJBRndCO0FBQUE7O0FBTXBCLDhDQUFZQyxnQkFBWixFQUEwREMseUJBQTFELEVBQWlJO0FBQUE7O0FBQUEsb0tBQ3ZIRCxnQkFEdUgsRUFDckc7QUFDcEJFLGdDQUFnQixJQURJO0FBRXBCQyxzQkFBTTtBQUZjLGFBRHFHOztBQWV6SCxrQkFBQUMsU0FBQSxHQUFTLENBQVQsQ0FBUyxXQUFUO0FBcUVBLGtCQUFBQyxlQUFBLEdBQWtCO0FBQUEsdUJBQU0sTUFBS0MsY0FBTCxFQUFOO0FBQUEsYUFBbEI7QUE5RUo7QUFDQSxrQkFBS0wseUJBQUwsR0FBaUNNLE9BQU9DLE1BQVAsQ0FBYyxFQUFkLEVBQWtCUCx5QkFBbEIsQ0FBakM7QUFDQSxrQkFBS1EscUJBQUw7QUFSNkg7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QXpDLG9DQUFZK0MsVUFBWixDQUF1QkwsWUFBdkI7QUFDSDtBQVg0QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWWhDO0FBdEttQjtBQUFBO0FBQUEsMENBd0tEO0FBQ2Ysb0JBQUksQ0FBQyxLQUFLckQsY0FBTCxFQUFELElBQTBCLEtBQUtxQyxLQUFMLENBQVdDLE9BQVgsR0FBcUJxQixZQUFyQixDQUFrQ2xCLFlBQWxDLEtBQW1ELEtBQWpGLEVBQXdGO0FBRXhGLG9CQUFJLEtBQUs5RCxTQUFMLEtBQWMsQ0FBbEIsQ0FBa0IsV0FBbEIsRUFDSSxLQUFLQSxTQUFMLEdBQWMsQ0FBZCxDQUFjLFVBQWQsQ0FESixLQUdJLEtBQUtBLFNBQUwsR0FBYyxDQUFkLENBQWMsV0FBZDtBQUVKLHFCQUFLSCx5QkFBTCxDQUErQm9GLElBQS9CLEdBQXNDLEtBQUtqRixTQUEzQztBQUVBLHFCQUFLcUMsZUFBTCxDQUFxQkMsTUFBckIsQ0FBNEI7QUFDeEIyQywwQkFBTSxLQUFLakY7QUFEYSxpQkFBNUI7QUFHQSxxQkFBS0sscUJBQUw7QUFDSDtBQXRMbUI7O0FBQUE7QUFBQSxNQUUwQlosbUJBQUF5Rix1QkFGMUI7O0FBRVh6Rix1QkFBQUUsNEJBQUEsR0FBNEJBLDRCQUE1QjtBQXNMaEIsQ0F4TEQsRUFBVUYsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3Qgc2hhcmVNb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUnO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM6cmlkZXN0eWxlci5SZXF1ZXN0cy5WZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zO1xuICAgICAgICBwcml2YXRlIHNoYXJlQnV0dG9uczpzaGFyZS5TaGFyZUJ1dHRvbltdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6IFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCB2ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zOnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZ1bGw6IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDb3B5IHRoZSByZW5kZXIgaW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB2ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMub25JbnN0cnVjdGlvbnNDaGFuZ2VkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHZlaGljbGVWaWV3cG9ydDogUmlkZVN0eWxlclZpZXdwb3J0O1xuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSByb3RhdGVFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgICAgICBwcml2YXRlIGltYWdlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdWlsZCB0aGUgRE9NIHN0cnVjdHVyZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkTW9kYWwoKSB7XG4gICAgICAgICAgICBzdXBlci5idWlsZE1vZGFsKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoc2hhcmVNb2RhbENsYXNzKTtcblxuICAgICAgICAgICAgbGV0IGJhY2tncm91bmQgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCh0aGlzLnNob3djYXNlKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKGJhY2tncm91bmQuY29tcG9uZW50KTsgICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEluc3RydWN0aW9uc1xuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdwJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUtaW5zdHJ1Y3Rpb25zJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2hhcmUtaW5zdHJ1Y3Rpb25zJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTaGFyZUJ1dHRvbnMoKTtcblxuICAgICAgICAgICAgLy8gUm90YXRlIFVJXG4gICAgICAgICAgICBpZiAodGhpcy5jYW5Td2l0Y2hBbmdsZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN3aXRjaEFuZ2xlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTaGFyZUJ1dHRvbnMoKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXJlQnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuRmFjZWJvb2tTaGFyZUJ1dHRvbigpLFxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5Ud2l0dGVyU2hhcmVCdXR0b24oKSxcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuUVJTaGFyZUJ1dHRvbigpLFxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5OZXdXaW5kb3dTaGFyZUJ1dHRvbigpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBjb25zdCBzaGFyZUJ1dHRvbkNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBzaGFyZU1vZGFsQ2xhc3MgKyAnLWJ1dHRvbnMnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIFxuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHNoYXJlQnV0dG9uLmNvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByb3RlY3RlZCBvblNob3coKSB7XG4gICAgICAgICAgICBzdXBlci5vblNob3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXR1cFZpZXdwb3J0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgdGhpcy5yZXNpemVkQ2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xuICAgICAgICAgICAgc3VwZXIub25IaWRkZW4oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5ldmVudHMub2ZmKCdyZXNpemVkJywgdGhpcy5yZXNpemVkQ2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByZXNpemVkQ2FsbGJhY2sgPSAoKSA9PiB0aGlzLnVwZGF0ZVZpZXdwb3J0KCk7XG4gICAgICAgIHByaXZhdGUgdXBkYXRlVmlld3BvcnQoKSB7IHRoaXMudmVoaWNsZVZpZXdwb3J0LlVwZGF0ZSh0aGlzLnZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMpOyB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRTaGFyZVVSTCgpOnN0cmluZyB7XG4gICAgICAgICAgICBsZXQgYXBwVVJMID0gJ2h0dHBzOi8vYXBwLnJpZGVzdHlsZXIubmV0JztcblxuICAgICAgICAgICAgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkFscGhhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1hbHBoYS5yaWRlc3R5bGVyLm5ldCc7XG4gICAgICAgICAgICBlbHNlIGlmIChhcGkuZW52aXJvbm1lbnQgPT09IGFwaS5FbnZpcm9ubWVudC5CZXRhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1iZXRhLnJpZGVzdHlsZXIubmV0JztcblxuICAgICAgICAgICAgY29uc3Qgc2hhcmVQYXRoID0gJy9zaGFyZS5jc2h0bWw/JztcblxuICAgICAgICAgICAgY29uc3Qgc2hhcmVQYXJhbXMgPSByaWRlc3R5bGVyLnV0aWxzLnRvUGFyYW1TdHJpbmcoXG4gICAgICAgICAgICAgICAgT2JqZWN0SGVscGVyLmFzc2lnbihcbiAgICAgICAgICAgICAgICAgICAgcmlkZXN0eWxlci5hdXRoLmF1dGhlbnRpY2F0ZURhdGEobnVsbCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9uc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiBhcHBVUkwgKyBzaGFyZVBhdGggKyBzaGFyZVBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFZpZXdwb3J0KCkge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgJ3JpZGVzdHlsZXItc2hvd2Nhc2Utdmlld3BvcnQnKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHZpZXdwb3J0RWxlbWVudCk7XG5cbiAgICAgICAgICAgIHZpZXdwb3J0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc3dpdGNoQW5nbGUoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVZpZXdwb3J0ID0gbmV3IFJpZGVTdHlsZXJWaWV3cG9ydCh2aWV3cG9ydEVsZW1lbnQpO1xuXG4gICAgICAgICAgICBsZXQgdmlld3BvcnRVcGRhdGVkID0gdGhpcy52ZWhpY2xlVmlld3BvcnQuVXBkYXRlKHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdGF0ZUVsZW1lbnQpIHZpZXdwb3J0VXBkYXRlZC5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBwcml2YXRlIGNhblN3aXRjaEFuZ2xlKCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbFxuICAgICAgICAgICAgfSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNTaWRlSW1hZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlVVJMID0gdGhpcy5nZXRTaGFyZVVSTCgpO1xuXG4gICAgICAgICAgICB0aGlzLnNldEVuYWJsZWQoZmFsc2UpO1xuXG4gICAgICAgICAgICBhcGkucmVxdWVzdChcImxpbmsvY3JlYXRlXCIsIHtcbiAgICAgICAgICAgICAgICBVUkw6IHRoaXMuZ2V0U2hhcmVVUkwoKVxuICAgICAgICAgICAgfSkuZG9uZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVVUkwocmVzcG9uc2UuU2hvcnRVUkwpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZXRFbmFibGVkKGVuYWJsZWQ6Ym9vbGVhbikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzaGFyZUJ1dHRvbiBvZiB0aGlzLnNoYXJlQnV0dG9ucykge1xuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLmNvbXBvbmVudC5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVVUkwoc2hhcmVVUkw6c3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFyZVRhZ3M6c3RyaW5nW10gPSBbJ3ZlaGljbGUnXTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlTWVzc2FnZSA9IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGVjay1vdXQtbXktdmVoaWNsZScpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zLldoZWVsRml0bWVudCkgc2hhcmVUYWdzLnB1c2goJ3doZWVscycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNoYXJlIGJ1dHRvbnNcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRVUkwoc2hhcmVVUkwpO1xuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLnNldFRhZ3Moc2hhcmVUYWdzKTtcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRNZXNzYWdlKHNoYXJlTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHN3aXRjaEFuZ2xlKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblN3aXRjaEFuZ2xlKCkgfHwgdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsLkhhc1NpZGVJbWFnZSA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGUpXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuU2lkZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zLlR5cGUgPSB0aGlzLmltYWdlVHlwZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlVmlld3BvcnQuVXBkYXRlKHtcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-suspension-selector';
    var elementClassName = 'ridestyler-showcase-suspension-selector-element';
    var defaultSuspensionRange = {
        Min: -4,
        Max: 0
    };

    var RideStylerShowcaseSuspensionSelector = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseSuspensionSelector, _RideStylerShowcase$C);

        function RideStylerShowcaseSuspensionSelector() {
            _classCallCheck(this, RideStylerShowcaseSuspensionSelector);

            return _possibleConstructorReturn(this, (RideStylerShowcaseSuspensionSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseSuspensionSelector)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseSuspensionSelector, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className
                });
                var stateData = this.state.getData();
                var vehicleDescription = stateData.currentVehicleDescriptionModel;
                var suspensionOptions = {
                    min: defaultSuspensionRange.Min,
                    max: defaultSuspensionRange.Max,
                    start: stateData.currentSuspension || 0,
                    step: 1,
                    decimalPlaces: 1,
                    unitAbbreviation: ''
                };
                // Retrieve suspension from API settings
                {
                    var suspensionRanges = this.showcase.settingsFromAPI.SuspensionRanges;
                    var StyleType = vehicleDescription.StyleType,
                        DriveType = vehicleDescription.DriveType;

                    var suspensionRangeKey = StyleType + DriveType;
                    if (suspensionRangeKey in suspensionRanges === false) suspensionRangeKey = 'Default';
                    var suspensionRange = suspensionRanges[suspensionRangeKey] || defaultSuspensionRange;
                    suspensionOptions.min = suspensionRange.Min;
                    suspensionOptions.max = suspensionRange.Max;
                }
                this.frontAndRear = new NoUISuspensionElement(this.showcase, RideStylerShowcase.ObjectHelper.assign({
                    label: RideStylerShowcase.strings.getString('suspension')
                }, suspensionOptions));
                this.frontAndRear.suspensionChangedCallback = function () {
                    if (typeof _this2.suspensionChangeCallback === 'function') _this2.suspensionChangeCallback({
                        Suspension: _this2.frontAndRear.value
                    });
                };
                this.component.appendChild(this.frontAndRear.component);
                // let frontOptions:SuspensionUIElementOptions = ObjectHelper.assign({
                //     label: strings.getString('front')
                // }, suspensionOptions);
                // this.front = new NoUISuspensionElement(this.showcase, frontOptions);
                // let rearOptions:SuspensionUIElementOptions = ObjectHelper.assign({
                //     label: strings.getString('rear')
                // }, suspensionOptions);
                // this.rear = new NoUISuspensionElement(this.showcase, rearOptions);
                // this.component.appendChild(this.front.component);
                // this.component.appendChild(this.rear.component);
                // this.front.suspensionChangedCallback = this.rear.suspensionChangedCallback = () => {
                //     if (typeof this.suspensionChangeCallback === 'function') {
                //         this.suspensionChangeCallback({
                //             SuspensionFront: this.front.value,
                //             SuspensionRear: this.rear.value
                //         });
                //     }
                // };
            }
        }]);

        return RideStylerShowcaseSuspensionSelector;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseSuspensionSelector = RideStylerShowcaseSuspensionSelector;
    /**
     * A general interface for UI components that modify suspension
     */

    var SuspensionUIElement = function (_RideStylerShowcase$C2) {
        _inherits(SuspensionUIElement, _RideStylerShowcase$C2);

        function SuspensionUIElement(showcaseInstance, options) {
            _classCallCheck(this, SuspensionUIElement);

            var _this3 = _possibleConstructorReturn(this, (SuspensionUIElement.__proto__ || Object.getPrototypeOf(SuspensionUIElement)).call(this, showcaseInstance));

            _this3.options = options;
            _this3.value = options.start;
            return _this3;
        }

        _createClass(SuspensionUIElement, [{
            key: 'onSuspensionChanged',
            value: function onSuspensionChanged(newValue) {
                this.value = newValue;
                this.state.extendData({
                    currentSuspension: this.value
                });
                if (typeof this.suspensionChangedCallback === 'function') this.suspensionChangedCallback(newValue);
            }
        }]);

        return SuspensionUIElement;
    }(RideStylerShowcase.ComponentBase);

    var NoUISuspensionElement = function (_SuspensionUIElement) {
        _inherits(NoUISuspensionElement, _SuspensionUIElement);

        function NoUISuspensionElement(showcaseInstance, options) {
            _classCallCheck(this, NoUISuspensionElement);

            var _this4 = _possibleConstructorReturn(this, (NoUISuspensionElement.__proto__ || Object.getPrototypeOf(NoUISuspensionElement)).call(this, showcaseInstance, options));

            _this4.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: elementClassName,
                append: RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: elementClassName + '-label',
                    text: options.label
                })
            });
            var sliderElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: elementClassName + '-slider',
                appendTo: _this4.component
            });
            noUiSlider.create(sliderElement, {
                start: options.start,
                range: {
                    min: options.min,
                    max: options.max
                },
                step: options.step,
                pips: {
                    mode: 'steps',
                    format: function () {
                        var postfix = options.unitAbbreviation;
                        var decimalPlaces = options.decimalPlaces;
                        return {
                            to: function to(value) {
                                return value.toFixed(decimalPlaces) + postfix;
                            },
                            from: function from(value) {
                                return parseFloat(value.replace(new RegExp(RideStylerShowcase.StringHelper.escapeRegExp(postfix) + '$'), ""));
                            }
                        };
                    }()
                }
            });
            _this4.sliderElement = sliderElement;
            _this4.slider = _this4.sliderElement.noUiSlider;
            _this4.slider.on('update', function (formattedValues, handle, values) {
                _this4.onSuspensionChanged(values[0]);
            });
            return _this4;
        }

        return NoUISuspensionElement;
    }(SuspensionUIElement);
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsImVsZW1lbnRDbGFzc05hbWUiLCJkZWZhdWx0U3VzcGVuc2lvblJhbmdlIiwiTWluIiwiTWF4IiwiUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yIiwiY29tcG9uZW50IiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJzdGF0ZURhdGEiLCJzdGF0ZSIsImdldERhdGEiLCJ2ZWhpY2xlRGVzY3JpcHRpb24iLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWwiLCJzdXNwZW5zaW9uT3B0aW9ucyIsIm1pbiIsIm1heCIsInN0YXJ0IiwiY3VycmVudFN1c3BlbnNpb24iLCJzdGVwIiwiZGVjaW1hbFBsYWNlcyIsInVuaXRBYmJyZXZpYXRpb24iLCJzdXNwZW5zaW9uUmFuZ2VzIiwic2hvd2Nhc2UiLCJzZXR0aW5nc0Zyb21BUEkiLCJTdXNwZW5zaW9uUmFuZ2VzIiwiU3R5bGVUeXBlIiwiRHJpdmVUeXBlIiwic3VzcGVuc2lvblJhbmdlS2V5Iiwic3VzcGVuc2lvblJhbmdlIiwiZnJvbnRBbmRSZWFyIiwiTm9VSVN1c3BlbnNpb25FbGVtZW50IiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwibGFiZWwiLCJzdHJpbmdzIiwiZ2V0U3RyaW5nIiwic3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayIsInN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayIsIlN1c3BlbnNpb24iLCJ2YWx1ZSIsImFwcGVuZENoaWxkIiwiQ29tcG9uZW50QmFzZSIsIlN1c3BlbnNpb25VSUVsZW1lbnQiLCJzaG93Y2FzZUluc3RhbmNlIiwib3B0aW9ucyIsIm5ld1ZhbHVlIiwiZXh0ZW5kRGF0YSIsImFwcGVuZCIsInRleHQiLCJzbGlkZXJFbGVtZW50IiwiYXBwZW5kVG8iLCJub1VpU2xpZGVyIiwiY3JlYXRlIiwicmFuZ2UiLCJwaXBzIiwibW9kZSIsImZvcm1hdCIsInBvc3RmaXgiLCJ0byIsInRvRml4ZWQiLCJmcm9tIiwicGFyc2VGbG9hdCIsInJlcGxhY2UiLCJSZWdFeHAiLCJTdHJpbmdIZWxwZXIiLCJlc2NhcGVSZWdFeHAiLCJzbGlkZXIiLCJvbiIsImZvcm1hdHRlZFZhbHVlcyIsImhhbmRsZSIsInZhbHVlcyIsIm9uU3VzcGVuc2lvbkNoYW5nZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVkseUNBQWxCO0FBQ0EsUUFBTUMsbUJBQW1CLGlEQUF6QjtBQUVBLFFBQU1DLHlCQUF5QjtBQUMzQkMsYUFBSyxDQUFDLENBRHFCO0FBRTNCQyxhQUFLO0FBRnNCLEtBQS9COztBQUp3QixRQVN4QkMsb0NBVHdCO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxrREFjUztBQUFBOztBQUN6QixxQkFBS0MsU0FBTCxHQUFpQlAsbUJBQUFRLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixLQUF6QixFQUFnQztBQUM3Q1IsK0JBQVdBO0FBRGtDLGlCQUFoQyxDQUFqQjtBQUdBLG9CQUFJUyxZQUFZLEtBQUtDLEtBQUwsQ0FBV0MsT0FBWCxFQUFoQjtBQUNBLG9CQUFJQyxxQkFBcUJILFVBQVVJLDhCQUFuQztBQUNBLG9CQUFJQyxvQkFBc0M7QUFDdENDLHlCQUFLYix1QkFBdUJDLEdBRFU7QUFFdENhLHlCQUFLZCx1QkFBdUJFLEdBRlU7QUFHdENhLDJCQUFPUixVQUFVUyxpQkFBVixJQUErQixDQUhBO0FBSXRDQywwQkFBTSxDQUpnQztBQUt0Q0MsbUNBQWUsQ0FMdUI7QUFNdENDLHNDQUFrQjtBQU5vQixpQkFBMUM7QUFTQTtBQUNBO0FBQ0ksd0JBQUlDLG1CQUFtQixLQUFLQyxRQUFMLENBQWNDLGVBQWQsQ0FBOEJDLGdCQUFyRDtBQURK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L1JpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXN1c3BlbnNpb24tc2VsZWN0b3InO1xuICAgIGNvbnN0IGVsZW1lbnRDbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zdXNwZW5zaW9uLXNlbGVjdG9yLWVsZW1lbnQnO1xuXG4gICAgY29uc3QgZGVmYXVsdFN1c3BlbnNpb25SYW5nZSA9IHtcbiAgICAgICAgTWluOiAtNCxcbiAgICAgICAgTWF4OiAwXG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3RvciBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICAvLyBwcml2YXRlIGZyb250OlN1c3BlbnNpb25VSUVsZW1lbnQ7XG4gICAgICAgIC8vIHByaXZhdGUgcmVhcjpTdXNwZW5zaW9uVUlFbGVtZW50O1xuICAgICAgICBwcml2YXRlIGZyb250QW5kUmVhcjpTdXNwZW5zaW9uVUlFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uT3B0aW9uczpTdXNwZW5zaW9uT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBtaW46IGRlZmF1bHRTdXNwZW5zaW9uUmFuZ2UuTWluLFxuICAgICAgICAgICAgICAgIG1heDogZGVmYXVsdFN1c3BlbnNpb25SYW5nZS5NYXgsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbiB8fCAwLFxuICAgICAgICAgICAgICAgIHN0ZXA6IDEsXG4gICAgICAgICAgICAgICAgZGVjaW1hbFBsYWNlczogMSxcbiAgICAgICAgICAgICAgICB1bml0QWJicmV2aWF0aW9uOiAn4oCzJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUmV0cmlldmUgc3VzcGVuc2lvbiBmcm9tIEFQSSBzZXR0aW5nc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VzID0gdGhpcy5zaG93Y2FzZS5zZXR0aW5nc0Zyb21BUEkuU3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgICAgICAgICBsZXQge1N0eWxlVHlwZSxEcml2ZVR5cGV9ID0gdmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VLZXkgPSBTdHlsZVR5cGUgKyBEcml2ZVR5cGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2lvblJhbmdlS2V5IGluIHN1c3BlbnNpb25SYW5nZXMgPT09IGZhbHNlKSBzdXNwZW5zaW9uUmFuZ2VLZXkgPSAnRGVmYXVsdCc7XG4gICAgICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZSA9IHN1c3BlbnNpb25SYW5nZXNbc3VzcGVuc2lvblJhbmdlS2V5XSB8fCBkZWZhdWx0U3VzcGVuc2lvblJhbmdlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb25PcHRpb25zLm1pbiA9IHN1c3BlbnNpb25SYW5nZS5NaW47XG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbk9wdGlvbnMubWF4ID0gc3VzcGVuc2lvblJhbmdlLk1heDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mcm9udEFuZFJlYXIgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXG4gICAgICAgICAgICB9LCBzdXNwZW5zaW9uT3B0aW9ucykpO1xuXG4gICAgICAgICAgICB0aGlzLmZyb250QW5kUmVhci5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN1c3BlbnNpb246IHRoaXMuZnJvbnRBbmRSZWFyLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5mcm9udEFuZFJlYXIuY29tcG9uZW50KTtcblxuXG4gICAgICAgICAgICAvLyBsZXQgZnJvbnRPcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zID0gT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAvLyAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdmcm9udCcpXG4gICAgICAgICAgICAvLyB9LCBzdXNwZW5zaW9uT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMuZnJvbnQgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIGZyb250T3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIGxldCByZWFyT3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygncmVhcicpXG4gICAgICAgICAgICAvLyB9LCBzdXNwZW5zaW9uT3B0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHRoaXMucmVhciA9IG5ldyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQodGhpcy5zaG93Y2FzZSwgcmVhck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLmZyb250LmNvbXBvbmVudCk7XG4gICAgICAgICAgICAvLyB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnJlYXIuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgLy8gdGhpcy5mcm9udC5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gdGhpcy5yZWFyLnN1c3BlbnNpb25DaGFuZ2VkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKHR5cGVvZiB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayh7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBTdXNwZW5zaW9uRnJvbnQ6IHRoaXMuZnJvbnQudmFsdWUsXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBTdXNwZW5zaW9uUmVhcjogdGhpcy5yZWFyLnZhbHVlXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBzdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2s6IChyZW5kZXJSZXF1ZXN0Q2hhbmdlOnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykgPT4gdm9pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGdlbmVyYWwgaW50ZXJmYWNlIGZvciBVSSBjb21wb25lbnRzIHRoYXQgbW9kaWZ5IHN1c3BlbnNpb25cbiAgICAgKi9cbiAgICBhYnN0cmFjdCBjbGFzcyBTdXNwZW5zaW9uVUlFbGVtZW50IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByb3RlY3RlZCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zO1xuICAgICAgICBcbiAgICAgICAgcHVibGljIHZhbHVlOm51bWJlcjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gb3B0aW9ucy5zdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBvblN1c3BlbnNpb25DaGFuZ2VkKG5ld1ZhbHVlOm51bWJlcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdXNwZW5zaW9uOiB0aGlzLnZhbHVlXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrOiAobmV3U3VzcGVuc2lvbjpudW1iZXIpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgaW50ZXJmYWNlIFN1c3BlbnNpb25PcHRpb25zIHtcbiAgICAgICAgbWluOiBudW1iZXI7XG4gICAgICAgIG1heDogbnVtYmVyO1xuICAgICAgICBzdGFydDogbnVtYmVyO1xuICAgICAgICBzdGVwOiBudW1iZXI7XG4gICAgICAgIGRlY2ltYWxQbGFjZXM6IG51bWJlcjtcbiAgICAgICAgdW5pdEFiYnJldmlhdGlvbjogc3RyaW5nO1xuICAgIH1cblxuICAgIGludGVyZmFjZSBTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyBleHRlbmRzIFN1c3BlbnNpb25PcHRpb25zIHtcbiAgICAgICAgbGFiZWw6IHN0cmluZztcbiAgICB9XG5cbiAgICBjbGFzcyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQgZXh0ZW5kcyBTdXNwZW5zaW9uVUlFbGVtZW50IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzbGlkZXJFbGVtZW50Om5vVWlTbGlkZXIuSW5zdGFuY2U7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2xpZGVyOm5vVWlTbGlkZXIubm9VaVNsaWRlcjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlciAoc2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBlbGVtZW50Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSArICctbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLmxhYmVsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgc2xpZGVyRWxlbWVudDpIVE1MRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSArICctc2xpZGVyJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShzbGlkZXJFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IG9wdGlvbnMuc3RhcnQsXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgbWluOiBvcHRpb25zLm1pbixcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBvcHRpb25zLm1heFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RlcDogb3B0aW9ucy5zdGVwLFxuICAgICAgICAgICAgICAgIHBpcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3N0ZXBzJyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3RmaXg6c3RyaW5nID0gb3B0aW9ucy51bml0QWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlY2ltYWxQbGFjZXM6bnVtYmVyID0gb3B0aW9ucy5kZWNpbWFsUGxhY2VzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAodmFsdWU6bnVtYmVyKSA9PiB2YWx1ZS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgcG9zdGZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAodmFsdWU6c3RyaW5nKSA9PiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChTdHJpbmdIZWxwZXIuZXNjYXBlUmVnRXhwKHBvc3RmaXgpICsgJyQnKSwgXCJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyRWxlbWVudCA9IChzbGlkZXJFbGVtZW50IGFzIG5vVWlTbGlkZXIuSW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIgPSB0aGlzLnNsaWRlckVsZW1lbnQubm9VaVNsaWRlcjtcblxuICAgICAgICAgICAgdGhpcy5zbGlkZXIub24oJ3VwZGF0ZScsIChmb3JtYXR0ZWRWYWx1ZXMsIGhhbmRsZSwgdmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN1c3BlbnNpb25DaGFuZ2VkKHZhbHVlc1swXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var barClass = 'ridestyler-showcase-tab-bar';
    var tabClass = barClass + '-tab';
    var tabBackgroundClass = tabClass + '-background';
    var activeTabClass = tabClass + '-active';
    var modeClass = barClass + '-';

    var RideStylerShowcaseTabBar = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseTabBar, _RideStylerShowcase$C);

        function RideStylerShowcaseTabBar() {
            _classCallCheck(this, RideStylerShowcaseTabBar);

            return _possibleConstructorReturn(this, (RideStylerShowcaseTabBar.__proto__ || Object.getPrototypeOf(RideStylerShowcaseTabBar)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseTabBar, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: barClass
                });
                this.setMode('vertical');
                this.component.addEventListener("click", function (e) {
                    return _this2.onClick(e);
                });
            }
        }, {
            key: 'setMode',
            value: function setMode(mode) {
                var _this3 = this;

                // Do nothing if the modes are the same
                if (this.mode === mode) return;
                var toggle = function toggle(className, force) {
                    return _this3.component.classList.toggle(className, force);
                };
                // Remove the current mode class
                if (typeof this.mode === 'string') toggle(modeClass + this.mode, false);
                // Set the new mode
                this.mode = mode;
                // Add the current mode class
                toggle(modeClass + mode, true);
                // Update the tabs' mode
                this.updateTabDisplay();
            }
        }, {
            key: 'updateTabDisplay',
            value: function updateTabDisplay() {
                if (!this.tabs) return;
                var tabPercent = 100 / this.tabs.length + '%';
                var mode = this.mode;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.tabs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var tab = _step.value;

                        if (mode === 'vertical') {
                            tab.element.style.height = tabPercent;
                            tab.element.style.width = '';
                        } else {
                            tab.element.style.height = '';
                            tab.element.style.width = tabPercent;
                        }
                        tab.updateBackgroundPolygon(mode);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'setTabs',
            value: function setTabs(tabsOrTabCreateOptions) {
                var tabs = void 0;
                if (tabsOrTabCreateOptions.length === 0) {
                    tabs = [];
                } else if (tabsOrTabCreateOptions[0] instanceof RideStylerShowcaseTabBar.Tab) {
                    tabs = tabsOrTabCreateOptions;
                } else {
                    tabs = new Array(tabsOrTabCreateOptions.length);
                    for (var index = 0; index < tabsOrTabCreateOptions.length; index++) {
                        var createOptions = tabsOrTabCreateOptions[index];
                        tabs[index] = new RideStylerShowcaseTabBar.Tab(createOptions);
                    }
                }
                this.tabs = RideStylerShowcase.ArrayHelper.copy(tabs);
                RideStylerShowcase.HTMLHelper.empty(this.component);
                var tabPercent = 100 / tabs.length + '%';
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = tabs[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var tab = _step2.value;

                        this.component.appendChild(tab.element);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                this.updateTabDisplay();
                this.currentTab = undefined;
                this.setActiveTab(tabs[0]);
            }
        }, {
            key: 'clearActiveTab',
            value: function clearActiveTab() {
                this.setActiveTab(undefined);
            }
        }, {
            key: 'setActiveTab',
            value: function setActiveTab(newTab) {
                var oldTab = this.currentTab;
                if (oldTab === newTab) return;
                this.currentTab = newTab;
                // Switch the active class
                {
                    if (oldTab) oldTab.element.classList.remove(activeTabClass);
                    if (newTab) newTab.element.classList.add(activeTabClass);
                }
                // Send off the callback
                if (newTab && typeof this.tabSwitchedCallback === 'function') this.tabSwitchedCallback({
                    oldTab: oldTab,
                    newTab: newTab
                });
            }
        }, {
            key: 'onClick',
            value: function onClick(e) {
                var clickTarget = e.target;
                var currentElement = clickTarget;
                // Go up through the parent elements until we reach the tab bar
                while (currentElement !== this.component) {
                    // If the current element is a tab
                    if (currentElement.classList.contains(tabClass)) {
                        this.onTabClick(this.tabForElement(currentElement));
                        return;
                    }
                    currentElement = currentElement.parentElement;
                }
            }
        }, {
            key: 'onTabClick',
            value: function onTabClick(tab) {
                if (!tab) return;
                this.setActiveTab(tab);
            }
        }, {
            key: 'tabForLabel',
            value: function tabForLabel(label) {
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = this.tabs[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var tab = _step3.value;

                        if (tab.label === label) {
                            return tab;
                        }
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }

                return undefined;
            }
        }, {
            key: 'tabForElement',
            value: function tabForElement(element) {
                var _iteratorNormalCompletion4 = true;
                var _didIteratorError4 = false;
                var _iteratorError4 = undefined;

                try {
                    for (var _iterator4 = this.tabs[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                        var tab = _step4.value;

                        if (tab.element === element) {
                            return tab;
                        }
                    }
                } catch (err) {
                    _didIteratorError4 = true;
                    _iteratorError4 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion4 && _iterator4.return) {
                            _iterator4.return();
                        }
                    } finally {
                        if (_didIteratorError4) {
                            throw _iteratorError4;
                        }
                    }
                }

                return undefined;
            }
        }]);

        return RideStylerShowcaseTabBar;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseTabBar = RideStylerShowcaseTabBar;
    (function (RideStylerShowcaseTabBar) {
        var Tab = function () {
            function Tab(createOptions) {
                _classCallCheck(this, Tab);

                this.label = createOptions.label;
                this.iconClass = createOptions.icon;
                this.key = createOptions.key;
                this.backgroundMode = 'horizontal';
                this.element = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: tabClass
                });
                RideStylerShowcase.HTMLHelper.createIcon({
                    icon: createOptions.icon,
                    appendTo: this.element,
                    wrap: RideStylerShowcase.HTMLHelper.createElementWithClass('div', tabClass + '-icon')
                });
                var background = RideStylerShowcase.HTMLHelper.createElement({
                    className: tabBackgroundClass,
                    appendTo: this.element
                });
                if (RideStylerShowcase.StyleHelper.svgSupported) {
                    RideStylerShowcase.HTMLHelper.createSVGElement('svg', {
                        attributes: {
                            width: '100%',
                            height: '100%',
                            preserveAspectRatio: 'none',
                            viewBox: '0 0 100 100'
                        },
                        append: this.backgroundPolygon = RideStylerShowcase.HTMLHelper.createSVGElement('polygon', {
                            attributes: {
                                fill: 'black'
                            }
                        }),
                        appendTo: background
                    });
                } else {
                    background.classList.add(tabBackgroundClass + '-nosvg');
                }
                this.element.title = createOptions.label;
            }

            _createClass(Tab, [{
                key: 'updateBackgroundPolygon',
                value: function updateBackgroundPolygon(mode) {
                    if (!this.backgroundPolygon) return;
                    /**
                     * The height in percentage of the triangle size
                     */
                    var triangleHeight = mode === 'vertical' ? 30 : 15;
                    /**
                     * The width in percentage of the triangle size
                     */
                    var triangleWidth = mode === 'vertical' ? 15 : 30;
                    this.backgroundPolygon.setAttribute('points', mode === 'vertical' ? '0,0 100,0 100,' + (50 - triangleHeight / 2) + ' ' + (100 - triangleWidth) + ',50 100,' + (50 + triangleHeight / 2) + ' 100,100 0,100' : '0,0 ' + (50 - triangleHeight / 2) + ',0 50,' + triangleHeight + ' ' + (50 + triangleHeight / 2) + ',0 100,0 100,100, 0,100');
                }
            }]);

            return Tab;
        }();

        RideStylerShowcaseTabBar.Tab = Tab;
    })(RideStylerShowcaseTabBar = RideStylerShowcase.RideStylerShowcaseTabBar || (RideStylerShowcase.RideStylerShowcaseTabBar = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImJhckNsYXNzIiwidGFiQ2xhc3MiLCJ0YWJCYWNrZ3JvdW5kQ2xhc3MiLCJhY3RpdmVUYWJDbGFzcyIsIm1vZGVDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic2V0TW9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkNsaWNrIiwiZSIsIm1vZGUiLCJ0b2dnbGUiLCJmb3JjZSIsImNsYXNzTGlzdCIsInVwZGF0ZVRhYkRpc3BsYXkiLCJ0YWJzIiwidGFiUGVyY2VudCIsImxlbmd0aCIsInRhYiIsImVsZW1lbnQiLCJzdHlsZSIsImhlaWdodCIsIndpZHRoIiwidXBkYXRlQmFja2dyb3VuZFBvbHlnb24iLCJ0YWJzT3JUYWJDcmVhdGVPcHRpb25zIiwiVGFiIiwiQXJyYXkiLCJpbmRleCIsImNyZWF0ZU9wdGlvbnMiLCJBcnJheUhlbHBlciIsImNvcHkiLCJlbXB0eSIsImFwcGVuZENoaWxkIiwiY3VycmVudFRhYiIsInVuZGVmaW5lZCIsInNldEFjdGl2ZVRhYiIsIm5ld1RhYiIsIm9sZFRhYiIsInJlbW92ZSIsImFkZCIsInRhYlN3aXRjaGVkQ2FsbGJhY2siLCJjbGlja1RhcmdldCIsInRhcmdldCIsImN1cnJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJvblRhYkNsaWNrIiwidGFiRm9yRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJsYWJlbCIsIkNvbXBvbmVudEJhc2UiLCJpY29uQ2xhc3MiLCJpY29uIiwia2V5IiwiYmFja2dyb3VuZE1vZGUiLCJjcmVhdGVJY29uIiwiYXBwZW5kVG8iLCJ3cmFwIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImJhY2tncm91bmQiLCJTdHlsZUhlbHBlciIsInN2Z1N1cHBvcnRlZCIsImNyZWF0ZVNWR0VsZW1lbnQiLCJhdHRyaWJ1dGVzIiwicHJlc2VydmVBc3BlY3RSYXRpbyIsInZpZXdCb3giLCJhcHBlbmQiLCJiYWNrZ3JvdW5kUG9seWdvbiIsImZpbGwiLCJ0aXRsZSIsInRyaWFuZ2xlSGVpZ2h0IiwidHJpYW5nbGVXaWR0aCIsInNldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsV0FBVyw2QkFBakI7QUFDQSxRQUFNQyxXQUFXRCxXQUFXLE1BQTVCO0FBQ0EsUUFBTUUscUJBQXFCRCxXQUFXLGFBQXRDO0FBQ0EsUUFBTUUsaUJBQWlCRixXQUFXLFNBQWxDO0FBQ0EsUUFBTUcsWUFBWUosV0FBVyxHQUE3Qjs7QUFMd0IsUUFPeEJLLHdCQVB3QjtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUEsa0RBUVM7QUFBQTs7QUFDekIscUJBQUtDLFNBQUwsR0FBaUJQLG1CQUFBUSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDN0NDLCtCQUFXVDtBQURrQyxpQkFBaEMsQ0FBakI7QUFJQSxxQkFBS1UsT0FBTCxDQUFhLFVBQWI7QUFFQSxxQkFBS0osU0FBTCxDQUFlSyxnQkFBZixDQUFnQyxPQUFoQyxFQUF5QztBQUFBLDJCQUFLLE9BQUtDLE9BQUwsQ0FBYUMsQ0FBYixDQUFMO0FBQUEsaUJBQXpDO0FBQ0g7QUFoQm1CO0FBQUE7QUFBQSxvQ0F3QkxDLElBeEJLLEVBd0I4QjtBQUFBOztBQUM5QztBQUNBLG9CQUFJLEtBQUtBLElBQUwsS0FBY0EsSUFBbEIsRUFBd0I7QUFFeEIsb0JBQU1DLFNBQVMsU0FBVEEsTUFBUyxDQUFDTixTQUFELEVBQW1CTyxLQUFuQjtBQUFBLDJCQUFxQyxPQUFLVixTQUFMLENBQWVXLFNBQWYsQ0FBeUJGLE1BQXpCLENBQWdDTixTQUFoQyxFQUEyQ08sS0FBM0Ms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R0FBc0IsRUFBdEIsR0FBMkIsRUFBakQ7QUFFQSx5QkFBS3dELGlCQUFMLENBQXVCSyxZQUF2QixDQUFvQyxRQUFwQyxFQUE4QzdELFNBQVMsVUFBVCx1QkFDekIsS0FBRzJELGlCQUFlLENBRE8sV0FDRixNQUFJQyxhQURGLGtCQUMwQixLQUFHRCxpQkFBZSxDQUQ1QyxpQ0FFbkMsS0FBR0EsaUJBQWUsQ0FGaUIsZUFFUEEsY0FGTyxVQUVXLEtBQUdBLGlCQUFlLENBRjdCLDZCQUE5QztBQUlIO0FBdkZnQzs7QUFBQTtBQUFBOztBQWtCeEJwRSxpQ0FBQXdCLEdBQUEsR0FBR0EsR0FBSDtBQXVFaEIsS0F6RkQsRUFBaUJ4QiwyQkFBQU4sbUJBQUFNLHdCQUFBLEtBQUFOLG1CQUFBTSx3QkFBQSxHQUF3QixFQUF4QixDQUFqQjtBQTBGSCxDQWhRRCxFQUFVTix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGJhckNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdGFiLWJhcic7XG4gICAgY29uc3QgdGFiQ2xhc3MgPSBiYXJDbGFzcyArICctdGFiJztcbiAgICBjb25zdCB0YWJCYWNrZ3JvdW5kQ2xhc3MgPSB0YWJDbGFzcyArICctYmFja2dyb3VuZCc7XG4gICAgY29uc3QgYWN0aXZlVGFiQ2xhc3MgPSB0YWJDbGFzcyArICctYWN0aXZlJztcbiAgICBjb25zdCBtb2RlQ2xhc3MgPSBiYXJDbGFzcyArICctJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYmFyQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3ZlcnRpY2FsJyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHRoaXMub25DbGljayhlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG1vZGU6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5Nb2RlO1xuXG4gICAgICAgIHB1YmxpYyB0YWJTd2l0Y2hlZENhbGxiYWNrOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiU3dpdGNoZWRDYWxsYmFjaztcbiAgICAgICAgcHVibGljIHRhYnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdO1xuICAgICAgICBwdWJsaWMgY3VycmVudFRhYjpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiO1xuXG4gICAgICAgIHB1YmxpYyBzZXRNb2RlKG1vZGU6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5Nb2RlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZSBtb2RlcyBhcmUgdGhlIHNhbWVcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09IG1vZGUpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgdG9nZ2xlID0gKGNsYXNzTmFtZTpzdHJpbmcsIGZvcmNlOmJvb2xlYW4pID0+IHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBmb3JjZSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBtb2RlIGNsYXNzXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubW9kZSA9PT0gJ3N0cmluZycpIHRvZ2dsZShtb2RlQ2xhc3MgKyB0aGlzLm1vZGUsIGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gU2V0IHRoZSBuZXcgbW9kZVxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBjdXJyZW50IG1vZGUgY2xhc3NcbiAgICAgICAgICAgIHRvZ2dsZShtb2RlQ2xhc3MgKyBtb2RlLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YWJzJyBtb2RlXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkRpc3BsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVUYWJEaXNwbGF5KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRhYnMpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFiUGVyY2VudCA9ICgxMDAvdGhpcy50YWJzLmxlbmd0aCkgKyAnJSc7XG4gICAgICAgICAgICBjb25zdCBtb2RlID0gdGhpcy5tb2RlO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YWIgb2YgdGhpcy50YWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGFiUGVyY2VudDtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YWIuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUud2lkdGggPSB0YWJQZXJjZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0YWIudXBkYXRlQmFja2dyb3VuZFBvbHlnb24obW9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VGFicyh0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJDcmVhdGVPcHRpb25zW10pO1xuICAgICAgICBwdWJsaWMgc2V0VGFicyh0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXSk7XG4gICAgICAgIHB1YmxpYyBzZXRUYWJzKHRhYnNPclRhYkNyZWF0ZU9wdGlvbnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdfFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJDcmVhdGVPcHRpb25zW10pIHtcbiAgICAgICAgICAgIGxldCB0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXTtcblxuICAgICAgICAgICAgaWYgKHRhYnNPclRhYkNyZWF0ZU9wdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFicyA9IFtdO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJzT3JUYWJDcmVhdGVPcHRpb25zWzBdIGluc3RhbmNlb2YgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYikge1xuICAgICAgICAgICAgICAgIHRhYnMgPSB0YWJzT3JUYWJDcmVhdGVPcHRpb25zIGFzIFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFicyA9IG5ldyBBcnJheSh0YWJzT3JUYWJDcmVhdGVPcHRpb25zLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGFic09yVGFiQ3JlYXRlT3B0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNyZWF0ZU9wdGlvbnMgPSB0YWJzT3JUYWJDcmVhdGVPcHRpb25zW2luZGV4XSBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiQ3JlYXRlT3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgdGFic1tpbmRleF0gPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYihjcmVhdGVPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudGFicyA9IEFycmF5SGVscGVyLmNvcHkodGFicyk7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICBsZXQgdGFiUGVyY2VudCA9ICgxMDAvdGFicy5sZW5ndGgpICsgJyUnO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGFicykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRhYi5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJEaXNwbGF5KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHRhYnNbMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGNsZWFyQWN0aXZlVGFiKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRBY3RpdmVUYWIobmV3VGFiOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIpIHtcbiAgICAgICAgICAgIGxldCBvbGRUYWIgPSB0aGlzLmN1cnJlbnRUYWI7XG5cbiAgICAgICAgICAgIGlmIChvbGRUYWIgPT09IG5ld1RhYikgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBuZXdUYWI7XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0aGUgYWN0aXZlIGNsYXNzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFRhYilcbiAgICAgICAgICAgICAgICAgICAgb2xkVGFiLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShhY3RpdmVUYWJDbGFzcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG5ld1RhYilcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFiLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChhY3RpdmVUYWJDbGFzcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNlbmQgb2ZmIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKG5ld1RhYiAmJiB0eXBlb2YgdGhpcy50YWJTd2l0Y2hlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRoaXMudGFiU3dpdGNoZWRDYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgIG9sZFRhYjogb2xkVGFiLFxuICAgICAgICAgICAgICAgICAgICBuZXdUYWI6IG5ld1RhYlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvbkNsaWNrKGU6TW91c2VFdmVudCkge1xuICAgICAgICAgICAgbGV0IGNsaWNrVGFyZ2V0OkhUTUxFbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBsZXQgY3VycmVudEVsZW1lbnQ6SFRNTEVsZW1lbnQgPSBjbGlja1RhcmdldDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR28gdXAgdGhyb3VnaCB0aGUgcGFyZW50IGVsZW1lbnRzIHVudGlsIHdlIHJlYWNoIHRoZSB0YWIgYmFyXG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQgIT09IHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgZWxlbWVudCBpcyBhIHRhYlxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnModGFiQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25UYWJDbGljayh0aGlzLnRhYkZvckVsZW1lbnQoY3VycmVudEVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25UYWJDbGljayh0YWI6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYikge1xuICAgICAgICAgICAgaWYgKCF0YWIpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIodGFiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB0YWJGb3JMYWJlbChsYWJlbDpzdHJpbmcpOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFiIG9mIHRoaXMudGFicykge1xuICAgICAgICAgICAgICAgIGlmICh0YWIubGFiZWwgPT09IGxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHRhYkZvckVsZW1lbnQoZWxlbWVudDpIVE1MRWxlbWVudCk6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYiB7XG4gICAgICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGhpcy50YWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhYi5lbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIge1xuICAgICAgICBleHBvcnQgdHlwZSBNb2RlID0gJ2hvcml6b250YWwnIHwgJ3ZlcnRpY2FsJztcblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFRhYlN3aXRjaGVkRXZlbnQge1xuICAgICAgICAgICAgbmV3VGFiOlRhYjtcbiAgICAgICAgICAgIG9sZFRhYjpUYWI7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFRhYlN3aXRjaGVkQ2FsbGJhY2sge1xuICAgICAgICAgICAgKHRoaXM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLCBldmVudDpUYWJTd2l0Y2hlZEV2ZW50KTp2b2lkO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBUYWJDcmVhdGVPcHRpb25zIHtcbiAgICAgICAgICAgIGljb246c3RyaW5nO1xuICAgICAgICAgICAgbGFiZWw6c3RyaW5nO1xuICAgICAgICAgICAga2V5OnN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBjbGFzcyBUYWIge1xuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGljb25DbGFzczpzdHJpbmc7XG4gICAgICAgICAgICBwdWJsaWMgcmVhZG9ubHkgbGFiZWw6c3RyaW5nO1xuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBwdWJsaWMgcmVhZG9ubHkga2V5OnN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJpdmF0ZSBiYWNrZ3JvdW5kTW9kZTpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuTW9kZTtcbiAgICAgICAgICAgIHByaXZhdGUgcmVhZG9ubHkgYmFja2dyb3VuZFBvbHlnb246U1ZHUG9seWdvbkVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGNyZWF0ZU9wdGlvbnM6VGFiQ3JlYXRlT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMubGFiZWwgPSBjcmVhdGVPcHRpb25zLmxhYmVsO1xuICAgICAgICAgICAgICAgIHRoaXMuaWNvbkNsYXNzID0gY3JlYXRlT3B0aW9ucy5pY29uO1xuICAgICAgICAgICAgICAgIHRoaXMua2V5ID0gY3JlYXRlT3B0aW9ucy5rZXk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRNb2RlID0gJ2hvcml6b250YWwnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGFiQ2xhc3NcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlSWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGljb246IGNyZWF0ZU9wdGlvbnMuaWNvbixcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgd3JhcDogSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCB0YWJDbGFzcyArICctaWNvbicpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiYWNrZ3JvdW5kID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0YWJCYWNrZ3JvdW5kQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmVsZW1lbnRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChTdHlsZUhlbHBlci5zdmdTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVTVkdFbGVtZW50KCdzdmcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogJzAgMCAxMDAgMTAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogKHRoaXMuYmFja2dyb3VuZFBvbHlnb24gPSBIVE1MSGVscGVyLmNyZWF0ZVNWR0VsZW1lbnQoJ3BvbHlnb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAnYmxhY2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC5jbGFzc0xpc3QuYWRkKHRhYkJhY2tncm91bmRDbGFzcyArICctbm9zdmcnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudGl0bGUgPSBjcmVhdGVPcHRpb25zLmxhYmVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwdWJsaWMgdXBkYXRlQmFja2dyb3VuZFBvbHlnb24obW9kZTogUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLk1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYmFja2dyb3VuZFBvbHlnb24pIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoZSBoZWlnaHQgaW4gcGVyY2VudGFnZSBvZiB0aGUgdHJpYW5nbGUgc2l6ZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyaWFuZ2xlSGVpZ2h0ID0gbW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IDMwIDogMTU7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhlIHdpZHRoIGluIHBlcmNlbnRhZ2Ugb2YgdGhlIHRyaWFuZ2xlIHNpemVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCB0cmlhbmdsZVdpZHRoID0gbW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IDE1IDogMzA7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRQb2x5Z29uLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgbW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IFxuICAgICAgICAgICAgICAgICAgICBgMCwwIDEwMCwwIDEwMCwkezUwLXRyaWFuZ2xlSGVpZ2h0LzJ9ICR7MTAwLXRyaWFuZ2xlV2lkdGh9LDUwIDEwMCwkezUwK3RyaWFuZ2xlSGVpZ2h0LzJ9IDEwMCwxMDAgMCwxMDBgIDpcbiAgICAgICAgICAgICAgICAgICAgYDAsMCAkezUwLXRyaWFuZ2xlSGVpZ2h0LzJ9LDAgNTAsJHt0cmlhbmdsZUhlaWdodH0gJHs1MCt0cmlhbmdsZUhlaWdodC8yfSwwIDEwMCwwIDEwMCwxMDAsIDAsMTAwYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var tableClass = 'ridestyler-showcase-table';
    var headClass = tableClass + '-head';
    var bodyClass = tableClass + '-body';
    var bodyLoadingClass = bodyClass + '-loading';
    var containerClass = tableClass + '-container';

    var RideStylerShowcaseTable = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseTable, _RideStylerShowcase$C);

        function RideStylerShowcaseTable(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseTable);

            options = RideStylerShowcase.ObjectHelper.assign({}, options);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseTable.__proto__ || Object.getPrototypeOf(RideStylerShowcaseTable)).call(this, showcaseInstance));

            _this.options = options;
            _this.columns = options.columns;
            var table = RideStylerShowcase.HTMLHelper.createElement('table', {
                appendTo: _this.component,
                className: tableClass
            });
            var thead = RideStylerShowcase.HTMLHelper.createElement('thead', {
                appendTo: table,
                className: headClass
            });
            _this.tbody = RideStylerShowcase.HTMLHelper.createElement('tbody', {
                appendTo: table,
                className: bodyClass
            });
            _this.generateHeaders(thead);
            _this.component = table;
            if (options.rows) _this.appendRows(options.rows);else if (options.startLoading) _this.setLoading(true);
            return _this;
        }

        _createClass(RideStylerShowcaseTable, [{
            key: 'generateHeaderCell',
            value: function generateHeaderCell(column) {
                var header = column.header;
                if (typeof header === 'function') {
                    var generatedHeader = header(column);
                    return typeof generatedHeader === 'string' ? RideStylerShowcase.HTMLHelper.createElement('th', {
                        text: generatedHeader
                    }) : generatedHeader;
                }
                var th = RideStylerShowcase.HTMLHelper.createElement('th', {
                    text: header
                });
                return th;
            }
        }, {
            key: 'generateHeaders',
            value: function generateHeaders(thead) {
                var headerRow = RideStylerShowcase.HTMLHelper.createElement('tr');
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.columns[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var column = _step.value;

                        headerRow.appendChild(this.generateHeaderCell(column));
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                thead.appendChild(headerRow);
            }
        }, {
            key: 'generateRowCell',
            value: function generateRowCell(row, column) {
                var cell = column.cell;
                if (typeof cell === 'function') {
                    var generatedCell = cell(row, column);
                    return typeof generatedCell === 'string' ? RideStylerShowcase.HTMLHelper.createElement('td', {
                        text: generatedCell
                    }) : generatedCell;
                }
                var td = RideStylerShowcase.HTMLHelper.createElement('td', {
                    text: row[cell].toString()
                });
                return td;
            }
        }, {
            key: 'generateRow',
            value: function generateRow(row) {
                var tr = RideStylerShowcase.HTMLHelper.createElement('tr');
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.columns[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var column = _step2.value;

                        tr.appendChild(this.generateRowCell(row, column));
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                return tr;
            }
        }, {
            key: 'appendRows',
            value: function appendRows(rows) {
                this.setLoading(false);
                var rowsFragment = document.createDocumentFragment();
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = rows[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var row = _step3.value;

                        rowsFragment.appendChild(this.generateRow(row));
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }

                this.tbody.appendChild(rowsFragment);
            }
        }, {
            key: 'setLoading',
            value: function setLoading(loading) {
                this.tbody.classList.toggle(bodyLoadingClass, loading);
            }
        }], [{
            key: 'formatCell',
            value: function formatCell(object, key, postfix) {
                var string = object[key].toString();
                return RideStylerShowcase.HTMLHelper.createElement('td', {
                    text: string ? postfix ? string + postfix : string : RideStylerShowcaseTable.emptyCellString
                });
            }
        }]);

        return RideStylerShowcaseTable;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcaseTable.emptyCellString = '-';
    RideStylerShowcase.RideStylerShowcaseTable = RideStylerShowcaseTable;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGFibGUudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwidGFibGVDbGFzcyIsImhlYWRDbGFzcyIsImJvZHlDbGFzcyIsImJvZHlMb2FkaW5nQ2xhc3MiLCJjb250YWluZXJDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIiwic2hvd2Nhc2VJbnN0YW5jZSIsIm9wdGlvbnMiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJjb2x1bW5zIiwidGFibGUiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZFRvIiwiY29tcG9uZW50IiwiY2xhc3NOYW1lIiwidGhlYWQiLCJ0Ym9keSIsImdlbmVyYXRlSGVhZGVycyIsInJvd3MiLCJhcHBlbmRSb3dzIiwic3RhcnRMb2FkaW5nIiwic2V0TG9hZGluZyIsImNvbHVtbiIsImhlYWRlciIsImdlbmVyYXRlZEhlYWRlciIsInRleHQiLCJ0aCIsImhlYWRlclJvdyIsImFwcGVuZENoaWxkIiwiZ2VuZXJhdGVIZWFkZXJDZWxsIiwicm93IiwiY2VsbCIsImdlbmVyYXRlZENlbGwiLCJ0ZCIsInRvU3RyaW5nIiwidHIiLCJnZW5lcmF0ZVJvd0NlbGwiLCJyb3dzRnJhZ21lbnQiLCJkb2N1bWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJnZW5lcmF0ZVJvdyIsImxvYWRpbmciLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvYmplY3QiLCJrZXkiLCJwb3N0Zml4Iiwic3RyaW5nIiwiZW1wdHlDZWxsU3RyaW5nIiwiQ29tcG9uZW50QmFzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFJeEIsUUFBTUMsYUFBYSwyQkFBbkI7QUFDQSxRQUFNQyxZQUFZRCxhQUFhLE9BQS9CO0FBQ0EsUUFBTUUsWUFBWUYsYUFBYSxPQUEvQjtB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QUFBO0FBQUEsdUNBdUhDSSxPQXZIRCxFQXVIZ0I7QUFDaEMscUJBQUt6QixLQUFMLENBQVcwQixTQUFYLENBQXFCQyxNQUFyQixDQUE0QjFDLGdCQUE1QixFQUE4Q3dDLE9BQTlDO0FBQ0g7QUF6SG1CO0FBQUE7QUFBQSx1Q0EySFFHLE1BM0hSLEVBMkhtQkMsR0EzSG5CLEVBMkhnQ0MsT0EzSGhDLEVBMkgrQztBQUMvRCxvQkFBSUMsU0FBZ0JILE9BQU9DLEdBQVAsRUFBWVgsUUFBWixFQUFwQjtBQUVBLHVCQUFPckMsbUJBQUFhLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixJQUF6QixFQUErQjtBQUNsQ2MsMEJBQU1zQixTQUFVRCxVQUFVQyxTQUFTRCxPQUFuQixHQUE2QkMsTUFBdkMsR0FBaUQ1Qyx3QkFBd0I2QztBQUQ3QyxpQkFBL0IsQ0FBUDtBQUdIO0FBakltQjs7QUFBQTtBQUFBLE1BVThCbkQsbUJBQUFvRCxhQVY5Qjs7QUFnQk45Qyw0QkFBQTZDLGVBQUEsR0FBeUIsR0FBekI7QUFOTG5ELHVCQUFBTSx1QkFBQSxHQUF1QkEsdUJBQXZCO0FBeUpoQixDQW5LRCxFQUFVTix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IENvbHVtbiA9IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLkNvbHVtbjtcbiAgICBpbXBvcnQgT3B0aW9ucyA9IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLk9wdGlvbnM7XG5cbiAgICBjb25zdCB0YWJsZUNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdGFibGUnO1xuICAgIGNvbnN0IGhlYWRDbGFzcyA9IHRhYmxlQ2xhc3MgKyAnLWhlYWQnO1xuICAgIGNvbnN0IGJvZHlDbGFzcyA9IHRhYmxlQ2xhc3MgKyAnLWJvZHknO1xuICAgIGNvbnN0IGJvZHlMb2FkaW5nQ2xhc3MgPSBib2R5Q2xhc3MgKyAnLWxvYWRpbmcnO1xuICAgIGNvbnN0IGNvbnRhaW5lckNsYXNzID0gdGFibGVDbGFzcyArICctY29udGFpbmVyJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxSb3dUeXBlPiBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb3B0aW9uczpPcHRpb25zPFJvd1R5cGU+O1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY29sdW1uczpDb2x1bW48Um93VHlwZT5bXTtcblxuICAgICAgICBwcm90ZWN0ZWQgdGJvZHk6SFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XG5cbiAgICAgICAgcHVibGljIHN0YXRpYyBlbXB0eUNlbGxTdHJpbmc6c3RyaW5nID0gJy0nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6T3B0aW9uczxSb3dUeXBlPikge1xuICAgICAgICAgICAgb3B0aW9ucyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe1xuXG4gICAgICAgICAgICB9LCBvcHRpb25zKSBcblxuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBvcHRpb25zLmNvbHVtbnM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB0YWJsZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGFibGVDbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCB0aGVhZCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGhlYWQnLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRhYmxlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogaGVhZENsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50Ym9keSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGJvZHknLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRhYmxlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYm9keUNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUhlYWRlcnModGhlYWQpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHRhYmxlO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yb3dzKSB0aGlzLmFwcGVuZFJvd3Mob3B0aW9ucy5yb3dzKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuc3RhcnRMb2FkaW5nKSB0aGlzLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZ2VuZXJhdGVIZWFkZXJDZWxsKGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUhlYWRlckNlbGxFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBjb2x1bW4uaGVhZGVyO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGhlYWRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0ZWRIZWFkZXIgPSBoZWFkZXIoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZ2VuZXJhdGVkSGVhZGVyID09PSAnc3RyaW5nJyA/IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGgnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGdlbmVyYXRlZEhlYWRlclxuICAgICAgICAgICAgICAgIH0pIDogZ2VuZXJhdGVkSGVhZGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdGggPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RoJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGhlYWRlclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZW5lcmF0ZUhlYWRlcnModGhlYWQ6SFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBoZWFkZXJSb3cgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZUhlYWRlckNlbGwoY29sdW1uKSk7ICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGVhZC5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdlbmVyYXRlUm93Q2VsbChyb3c6Um93VHlwZSwgY29sdW1uOkNvbHVtbjxSb3dUeXBlPik6SFRNTFRhYmxlQ2VsbEVsZW1lbnQge1xuICAgICAgICAgICAgbGV0IGNlbGwgPSBjb2x1bW4uY2VsbDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRlZENlbGwgPSAoY2VsbCBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5DZWxsR2VuZXJhdG9yPFJvd1R5cGU+KShyb3csIGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGdlbmVyYXRlZENlbGwgPT09ICdzdHJpbmcnID8gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2VuZXJhdGVkQ2VsbFxuICAgICAgICAgICAgICAgIH0pIDogZ2VuZXJhdGVkQ2VsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRkID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiByb3dbY2VsbCBhcyBrZXlvZiBSb3dUeXBlXS50b1N0cmluZygpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRkO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdlbmVyYXRlUm93KHJvdzpSb3dUeXBlKTpIVE1MVGFibGVSb3dFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCB0ciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVSb3dDZWxsKHJvdywgY29sdW1uKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBhcHBlbmRSb3dzKHJvd3M6Um93VHlwZVtdKSB7XG4gICAgICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICBsZXQgcm93c0ZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCByb3cgb2Ygcm93cykge1xuICAgICAgICAgICAgICAgIHJvd3NGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlUm93KHJvdykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRib2R5LmFwcGVuZENoaWxkKHJvd3NGcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc2V0TG9hZGluZyhsb2FkaW5nOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMudGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShib2R5TG9hZGluZ0NsYXNzLCBsb2FkaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0Q2VsbDxUPihvYmplY3Q6IFQsIGtleTprZXlvZiBULCBwb3N0Zml4PzpzdHJpbmcpOkhUTUxUYWJsZUNlbGxFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCBzdHJpbmc6c3RyaW5nID0gb2JqZWN0W2tleV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nID8gKHBvc3RmaXggPyBzdHJpbmcgKyBwb3N0Zml4IDogc3RyaW5nKSA6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmVtcHR5Q2VsbFN0cmluZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBIZWFkZXJHZW5lcmF0b3I8Um93VHlwZT4ge1xuICAgICAgICAgICAgKGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUhlYWRlckNlbGxFbGVtZW50fHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQ2VsbEdlbmVyYXRvcjxSb3dUeXBlPiB7XG4gICAgICAgICAgICAocm93OlJvd1R5cGUsIGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUNlbGxFbGVtZW50fHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uPFJvd1R5cGU+IHtcbiAgICAgICAgICAgIGhlYWRlcjogc3RyaW5nfEhlYWRlckdlbmVyYXRvcjxSb3dUeXBlPjtcbiAgICAgICAgICAgIGNlbGw6IGtleW9mIFJvd1R5cGV8Q2VsbEdlbmVyYXRvcjxSb3dUeXBlPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uczxSb3dUeXBlPiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbHVtbiBzZXR0aW5nc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb2x1bW5zOiBDb2x1bW48Um93VHlwZT5bXTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSb3dzIHRvIGluaXRpYWxpemUgdGhlIHRhYmxlIHdpdGhcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcm93cz86IFJvd1R5cGVbXTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCBzdGFydCB0aGUgdGFibGUgaW4gdGhlIGxvYWRpbmcgc3RhdGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RhcnRMb2FkaW5nPzogYm9vbGVhbjtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseTireSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseTireSelector, _RideStylerShowcase$R);

        function RideStylerShowcaseTireSelector(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseTireSelector);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseTireSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseTireSelector)).call(this, showcaseInstance));

            var stateData = showcaseInstance.state.getData();
            _this.supportedVehicleImagery = {
                angled: stateData.vehicleHasAngledImage,
                side: stateData.vehicleHasSideImage
            };
            _this.vehicleTireOptionID = stateData.currentVehicleTireOptionID;
            _this.defaultFilters = {
                VehicleTireOption: _this.vehicleTireOptionID,
                HasCatalogImage: true
            };
            _this.currentFilters = RideStylerShowcase.ObjectHelper.assign({}, _this.defaultFilters);
            return _this;
        }

        _createClass(RideStylerShowcaseTireSelector, [{
            key: "countResults",
            value: function countResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("tire/countmodels", filters), function (response) {
                    return response.Count;
                });
            }
        }, {
            key: "getResults",
            value: function getResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("tire/getmodeldescriptions", filters), function (response) {
                    return response.Models;
                });
            }
        }, {
            key: "productFilter",
            value: function productFilter(product) {
                return true;
            }
        }, {
            key: "productImageSource",
            value: function productImageSource(product) {
                return ridestyler.tire.image({
                    TireFitmentResourceType: 2 /* Catalog */
                    , TireModel: product.TireModelID,
                    Width: 100,
                    Height: 100,
                    PositionX: 1 /* Center */
                    , PositionY: 1 /* Center */
                    , IncludeShadow: true
                });
            }
        }, {
            key: "productImageLabels",
            value: function productImageLabels(product) {
                return {
                    primary: product.TireBrandName,
                    secondary: product.TireModelName,
                    tertiary: product.Attributes && product.Attributes.length ? product.Attributes.join(', ') : ''
                };
            }
        }]);

        return RideStylerShowcaseTireSelector;
    }(RideStylerShowcase.RideStylerShowcaseProductSelector);

    RideStylerShowcase.RideStylerShowcaseTireSelector = RideStylerShowcaseTireSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvciIsInNob3djYXNlSW5zdGFuY2UiLCJzdGF0ZURhdGEiLCJzdGF0ZSIsImdldERhdGEiLCJzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeSIsImFuZ2xlZCIsInZlaGljbGVIYXNBbmdsZWRJbWFnZSIsInNpZGUiLCJ2ZWhpY2xlSGFzU2lkZUltYWdlIiwidmVoaWNsZVRpcmVPcHRpb25JRCIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEIiwiZGVmYXVsdEZpbHRlcnMiLCJWZWhpY2xlVGlyZU9wdGlvbiIsIkhhc0NhdGFsb2dJbWFnZSIsImN1cnJlbnRGaWx0ZXJzIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiZmlsdGVycyIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwiYXBpIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiQ291bnQiLCJNb2RlbHMiLCJwcm9kdWN0IiwicmlkZXN0eWxlciIsInRpcmUiLCJpbWFnZSIsIlRpcmVGaXRtZW50UmVzb3VyY2VUeXBlIiwiVGlyZU1vZGVsIiwiVGlyZU1vZGVsSUQiLCJXaWR0aCIsIkhlaWdodCIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIkluY2x1ZGVTaGFkb3ciLCJwcmltYXJ5IiwiVGlyZUJyYW5kTmFtZSIsInNlY29uZGFyeSIsIlRpcmVNb2RlbE5hbWUiLCJ0ZXJ0aWFyeSIsIkF0dHJpYnV0ZXMiLCJsZW5ndGgiLCJqb2luIiwiUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFBLFFBSXhCQyw4QkFKd0I7QUFBQTs7QUFjcEIsZ0RBQVlDLGdCQUFaLEVBQXVEO0FBQUE7O0FBQUEsd0tBQzdDQSxnQkFENkM7O0FBR25ELGdCQUFJQyxZQUFZRCxpQkFBaUJFLEtBQWpCLENBQXVCQyxPQUF2QixFQUFoQjtBQUVBLGtCQUFLQyx1QkFBTCxHQUErQjtBQUMzQkMsd0JBQVFKLFVBQVVLLHFCQURTO0FBRTNCQyxzQkFBTU4sVUFBVU87QUFGVyxhQUEvQjtBQUtBLGtCQUFLQyxtQkFBTCxHQUEyQlIsVUFBVVMsMEJBQXJDO0FBQ0Esa0JBQUtDLGNBQUwsR0FBc0I7QUFDbEJDLG1DQUFtQixNQUFLSCxtQkFETjtBQUVsQkksaUNBQWlCO0FBRkMsYUFBdEI7QUFJQSxrQkFBS0MsY0FBTCxHQUFzQmhCLG1CQUFBaUIsWUFBQSxDQUFhQyxNQUFiLENBQW9CLEVBQXBCLEVBQXdCLE1BQUtMLGNBQTdCLENBQXRCO0FBZm1EO0FBZ0J0RDs7QUE5Qm1CO0FBQUE7QUFBQSx5Q0FnQ0dNLE9BaENILEVBZ0MyQjtBQUMzQyx1QkFBT25CLG1CQUFBb0IsYUFBQSxDQUFjQyxJQUFkLENBQW1CckIsbUJBQUFzQixHQUFBLENBQUlDLE9BQUosQ0FBWSxrQkFBWixFQUFnQ0osT0FBaEMsQ0FBbkIsRUFBNkQ7QUFBQSwyQkFBWUssU0FBU0MsS0FBckI7QUFBQSxpQkFBN0QsQ0FBUDtBQUNIO0FBbENtQjtBQUFBO0FBQUEsdUNBbUNDTixPQW5DRCxFQW1DeUI7QUFDekMsdUJBQU9uQixtQkFBQW9CLGFBQUEsQ0FBY0MsSUFBZCxDQUFtQnJCLG1CQUFBc0IsR0FBQSxDQUFJQyxPQUFKLENBQVksMkJBQVosRUFBeUNKLE9BQXpDLENBQW5CLEVBQXNFO0FBQUEsMkJBQVlLLFNBQVNFLE1BQXJCO0FBQUEsaUJBQXRFLENBQVA7QUFDSDtBQXJDbUI7QUFBQTtBQUFBLDBDQXNDSUMsT0F0Q0osRUFzQ3NDO0FBQ3RELHVCQUFPLElBQVA7QUFDSDtBQXhDbUI7QUFBQTtBQUFBLCtDQXlDU0EsT0F6Q1QsRUF5QzJDO0FBQzNELHVCQUFPQyxXQUFXQyxJQUFYLENBQWdCQyxLQUFoQixDQUFzQjtBQUN6QkMsNkNBQXVCLENBREUsQ0FDRjtBQURFLHNCQUV6QkMsV0FBV0wsUUFBUU0sV0FGTTtBQUd6QkMsMkJBQU8sR0FIa0I7QUFJekJDLDRCQUFRLEdBSmlCO0FBS3pCQywrQkFBUyxDQUxnQixDQUtoQjtBQUxnQixzQkFNekJDLFdBQVMsQ0FOZ0IsQ0FNaEI7QUFOZ0Isc0JBT3pCQyxlQUFlO0FBUFUsaUJBQXRCLENBQVA7QUFTSDtBQW5EbUI7QUFBQTtBQUFBLCtDQW9EU1gsT0FwRFQsRUFvRDJDO0FBQzNELHVCQUFPO0FBQ0hZLDZCQUFTWixRQUFRYSxhQURkO0FBRUhDLCtCQUFXZCxRQUFRZSxhQUZoQjtBQUdIQyw4QkFBVWhCLFFBQVFpQixVQUFSLElBQXNCakIsUUFBUWlCLFVBQVIsQ0FBbUJDLE1BQXpDLEdBQ05sQixRQUFRaUIsVUFBUixDQUFtQkUsSUFBbkIsQ0FBd0IsSUFBeEIsQ0FETSxHQUMwQjtBQUpqQyxpQkFBUDtBQU1IO0FBM0RtQjs7QUFBQTtBQUFBLE1BSTRCOUMsbUJBQUErQyxpQ0FKNUI7O0FBSVgvQyx1QkFBQUMsOEJBQUEsR0FBOEJBLDhCQUE5QjtBQTBEaEIsQ0E5REQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgVGlyZUZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5UaXJlRmlsdGVyTW9kZWw7XG4gICAgaW1wb3J0IFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5UaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvcjxUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsLCBUaXJlRmlsdGVyTW9kZWw+IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB2ZWhpY2xlVGlyZU9wdGlvbklEOnN0cmluZztcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeToge1xuICAgICAgICAgICAgYW5nbGVkOiBib29sZWFuO1xuICAgICAgICAgICAgc2lkZTogYm9vbGVhbjtcbiAgICAgICAgfTtcblxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGVmYXVsdEZpbHRlcnM6IFRpcmVGaWx0ZXJNb2RlbDtcbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRGaWx0ZXJzOiBUaXJlRmlsdGVyTW9kZWw7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSBzaG93Y2FzZUluc3RhbmNlLnN0YXRlLmdldERhdGEoKTtcblxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeSA9IHtcbiAgICAgICAgICAgICAgICBhbmdsZWQ6IHN0YXRlRGF0YS52ZWhpY2xlSGFzQW5nbGVkSW1hZ2UsXG4gICAgICAgICAgICAgICAgc2lkZTogc3RhdGVEYXRhLnZlaGljbGVIYXNTaWRlSW1hZ2VcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEZpbHRlcnMgPSB7XG4gICAgICAgICAgICAgICAgVmVoaWNsZVRpcmVPcHRpb246IHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCxcbiAgICAgICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0gT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0RmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgY291bnRSZXN1bHRzKGZpbHRlcnM6IFRpcmVGaWx0ZXJNb2RlbCk6IHJpZGVzdHlsZXIuUmlkZVN0eWxlclByb21pc2U8bnVtYmVyLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcInRpcmUvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHJlc3BvbnNlLkNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UmVzdWx0cyhmaWx0ZXJzOiBUaXJlRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWxbXSwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ0aXJlL2dldG1vZGVsZGVzY3JpcHRpb25zXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiByZXNwb25zZS5Nb2RlbHMpO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0RmlsdGVyKHByb2R1Y3Q6IFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdDogVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IHN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci50aXJlLmltYWdlKHtcbiAgICAgICAgICAgICAgICBUaXJlRml0bWVudFJlc291cmNlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5UaXJlRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxuICAgICAgICAgICAgICAgIFRpcmVNb2RlbDogcHJvZHVjdC5UaXJlTW9kZWxJRCxcbiAgICAgICAgICAgICAgICBXaWR0aDogMTAwLFxuICAgICAgICAgICAgICAgIEhlaWdodDogMTAwLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXG4gICAgICAgICAgICAgICAgSW5jbHVkZVNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0OiBUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogeyBwcmltYXJ5OiBzdHJpbmc7IHNlY29uZGFyeT86IHN0cmluZzsgdGVydGlhcnk/OiBzdHJpbmc7IH0ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5OiBwcm9kdWN0LlRpcmVCcmFuZE5hbWUsXG4gICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiBwcm9kdWN0LlRpcmVNb2RlbE5hbWUsXG4gICAgICAgICAgICAgICAgdGVydGlhcnk6IHByb2R1Y3QuQXR0cmlidXRlcyAmJiBwcm9kdWN0LkF0dHJpYnV0ZXMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5BdHRyaWJ1dGVzLmpvaW4oJywgJykgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var toggleButtonClass = 'ridestyler-showcase-toggle-button';
    var optionClass = toggleButtonClass + '-option';
    var optionActiveClass = optionClass + '-active';

    var RideStylerShowcaseToggleButton = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseToggleButton, _RideStylerShowcase$C);

        function RideStylerShowcaseToggleButton() {
            _classCallCheck(this, RideStylerShowcaseToggleButton);

            return _possibleConstructorReturn(this, (RideStylerShowcaseToggleButton.__proto__ || Object.getPrototypeOf(RideStylerShowcaseToggleButton)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseToggleButton, [{
            key: 'initializeComponent',

            /**
             * Create the DOM for the toggle button
             *
             * @override
             */
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement({
                    className: toggleButtonClass
                });
                this.component.addEventListener('click', function (clickEvent) {
                    return _this2.onClicked(clickEvent);
                });
            }
            /**
             * Called when the toggle button is clicked on
             */

        }, {
            key: 'onClicked',
            value: function onClicked(clickEvent) {
                var target = clickEvent.target;
                if (!target.classList.contains(optionClass)) return; // The click was not on an option
                if (target.classList.contains(optionActiveClass)) return; // The click was on an active option
                this.selectOptionElement(target);
            }
        }, {
            key: 'selectOptionElement',
            value: function selectOptionElement(optionElement) {
                var triggerChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

                var newValue = optionElement.value;
                if (this.value === newValue) return;
                this.value = newValue;
                for (var childIndex = 0; childIndex < this.component.children.length; childIndex++) {
                    var childOptionElement = this.component.children[childIndex];
                    childOptionElement.classList.toggle(optionActiveClass, childOptionElement === optionElement);
                }
                if (typeof this.onChanged === 'function' && triggerChange) this.onChanged(newValue);
            }
        }, {
            key: 'setValue',
            value: function setValue(value) {
                if (this.value === value) return;
                for (var childIndex = 0; childIndex < this.component.children.length; childIndex++) {
                    var childOptionElement = this.component.children[childIndex];
                    if (childOptionElement.value === value) {
                        this.selectOptionElement(childOptionElement);
                        return;
                    }
                }
            }
        }, {
            key: 'setOptions',
            value: function setOptions(options) {
                RideStylerShowcase.HTMLHelper.empty(this.component);
                this.value = undefined;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = options[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var option = _step.value;

                        this.addOption(option);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'addOption',
            value: function addOption(option) {
                var optionElement = RideStylerShowcase.ObjectHelper.assign(RideStylerShowcase.HTMLHelper.createElement('span', {
                    className: optionClass,
                    text: option.label,
                    appendTo: this.component
                }), {
                    value: option.value
                });
                if (this.value === undefined) this.selectOptionElement(optionElement, false);
            }
        }]);

        return RideStylerShowcaseToggleButton;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseToggleButton = RideStylerShowcaseToggleButton;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInRvZ2dsZUJ1dHRvbkNsYXNzIiwib3B0aW9uQ2xhc3MiLCJvcHRpb25BY3RpdmVDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbiIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2tlZCIsImNsaWNrRXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNlbGVjdE9wdGlvbkVsZW1lbnQiLCJvcHRpb25FbGVtZW50IiwidHJpZ2dlckNoYW5nZSIsIm5ld1ZhbHVlIiwidmFsdWUiLCJjaGlsZEluZGV4IiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZE9wdGlvbkVsZW1lbnQiLCJ0b2dnbGUiLCJvbkNoYW5nZWQiLCJvcHRpb25zIiwiZW1wdHkiLCJ1bmRlZmluZWQiLCJvcHRpb24iLCJhZGRPcHRpb24iLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJ0ZXh0IiwibGFiZWwiLCJhcHBlbmRUbyIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBS3hCLFFBQU1DLG9CQUFvQixtQ0FBMUI7QUFDQSxRQUFNQyxjQUFjRCxvQkFBb0IsU0FBeEM7QUFDQSxRQUFNRSxvQkFBb0JELGNBQWMsU0FBeEM7O0FBUHdCLFFBUXhCRSw4QkFSd0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFtQnBCOzs7OztBQW5Cb0Isa0RBd0JTO0FBQUE7O0FBQ3pCLHFCQUFLQyxTQUFMLEdBQWlCTCxtQkFBQU0sVUFBQSxDQUFXQyxhQUFYLENBQXlCO0FBQ3RD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ZVMsU0FBbkIsRUFBOEIsS0FBS2IsbUJBQUwsQ0FBeUJDLGFBQXpCLEVBQXdDLEtBQXhDO0FBQ2pDO0FBM0ZtQjs7QUFBQTtBQUFBLE1BUTRCaEIsbUJBQUFvQyxhQVI1Qjs7QUFRWHBDLHVCQUFBSSw4QkFBQSxHQUE4QkEsOEJBQTlCO0FBb0doQixDQTVHRCxFQUFVSix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBPcHRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24uT3B0aW9uO1xuICAgIGltcG9ydCBPcHRpb25FbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uLk9wdGlvbkVsZW1lbnQ7XG4gICAgaW1wb3J0IE9wdGlvbkNoYW5nZWRDYWxsYmFjayA9IFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi5PcHRpb25DaGFuZ2VkQ2FsbGJhY2s7XG5cbiAgICBjb25zdCB0b2dnbGVCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXRvZ2dsZS1idXR0b24nO1xuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gdG9nZ2xlQnV0dG9uQ2xhc3MgKyAnLW9wdGlvbic7XG4gICAgY29uc3Qgb3B0aW9uQWN0aXZlQ2xhc3MgPSBvcHRpb25DbGFzcyArICctYWN0aXZlJztcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHZhbHVlOnN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoIGEgY2hhbmdlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgdmFsdWUgaXMgY2hhbmdlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIG9uQ2hhbmdlZDpPcHRpb25DaGFuZ2VkQ2FsbGJhY2s7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgRE9NIGZvciB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgKiBcbiAgICAgICAgICogQG92ZXJyaWRlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRvZ2dsZUJ1dHRvbkNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0V2ZW50ID0+IHRoaXMub25DbGlja2VkKGNsaWNrRXZlbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiB0aGUgdG9nZ2xlIGJ1dHRvbiBpcyBjbGlja2VkIG9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG9uQ2xpY2tlZChjbGlja0V2ZW50Ok1vdXNlRXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldDpIVE1MRWxlbWVudCA9IGNsaWNrRXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgbm90IG9uIGFuIG9wdGlvblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQWN0aXZlQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgb24gYW4gYWN0aXZlIG9wdGlvblxuXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbkVsZW1lbnQodGFyZ2V0IGFzIE9wdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZWxlY3RPcHRpb25FbGVtZW50KG9wdGlvbkVsZW1lbnQ6T3B0aW9uRWxlbWVudCwgdHJpZ2dlckNoYW5nZTpib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWU6c3RyaW5nID0gb3B0aW9uRWxlbWVudC52YWx1ZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IG5ld1ZhbHVlKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbi5sZW5ndGg7IGNoaWxkSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkT3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gdGhpcy5jb21wb25lbnQuY2hpbGRyZW5bY2hpbGRJbmRleF0gYXMgT3B0aW9uRWxlbWVudDtcbiAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25BY3RpdmVDbGFzcywgY2hpbGRPcHRpb25FbGVtZW50ID09PSBvcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJyAmJiB0cmlnZ2VyQ2hhbmdlKSB0aGlzLm9uQ2hhbmdlZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmFsdWUodmFsdWU6c3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gdmFsdWUpIHJldHVybjtcblxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbi5sZW5ndGg7IGNoaWxkSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkT3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gdGhpcy5jb21wb25lbnQuY2hpbGRyZW5bY2hpbGRJbmRleF0gYXMgT3B0aW9uRWxlbWVudDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRPcHRpb25FbGVtZW50LnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbkVsZW1lbnQoY2hpbGRPcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6T3B0aW9uW10pIHtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5jb21wb25lbnQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uKG9wdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgYWRkT3B0aW9uKG9wdGlvbjpPcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQ6T3B0aW9uRWxlbWVudCA9IE9iamVjdEhlbHBlci5hc3NpZ24oSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogb3B0aW9uLmxhYmVsLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCkgdGhpcy5zZWxlY3RPcHRpb25FbGVtZW50KG9wdGlvbkVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uQ2hhbmdlZENhbGxiYWNrIHtcbiAgICAgICAgICAgICh2YWx1ZTpzdHJpbmcpOnZvaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbiB7XG4gICAgICAgICAgICBsYWJlbDpzdHJpbmc7XG4gICAgICAgICAgICB2YWx1ZTpzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseVehicleSelection = function (_RideStylerShowcase$M) {
        _inherits(RideStylerShowcaseVehicleSelection, _RideStylerShowcase$M);

        function RideStylerShowcaseVehicleSelection() {
            _classCallCheck(this, RideStylerShowcaseVehicleSelection);

            return _possibleConstructorReturn(this, (RideStylerShowcaseVehicleSelection.__proto__ || Object.getPrototypeOf(RideStylerShowcaseVehicleSelection)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseVehicleSelection, [{
            key: 'initializeMainComponent',
            value: function initializeMainComponent() {
                var _this2 = this;

                this.modal = new RideStylerVehicleSelectionModal({
                    container: function container() {
                        return _this2.component.parentElement;
                    },
                    callback: function callback(selection) {
                        if (selection.FinalSelectionMade) {
                            _this2.onVehicleSelected(selection.Vehicle);
                        }
                    },
                    ImageSettings: function ImageSettings(options) {
                        return _this2.generateVehiclePreviewSettings();
                    },
                    IncludeOETireOption: true
                });
                RideStylerShowcase.api.afterAuthenticated(function () {
                    return _this2.onAuthenticated();
                });
            }
        }, {
            key: 'buildComponent',
            value: function buildComponent(container) {
                var _this3 = this;

                //URL CHECK LOGIC
                container.classList.add('ridestyler-showcase-vehicle-selection');
                this.contentContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-content ridestyler-showcase-vehicle-selection-content',
                    appendTo: container
                });
                this.buildCopy();
                this.chooseVehicleButton = RideStylerShowcase.HTMLHelper.createButton({
                    text: RideStylerShowcase.strings.getString('select-your-vehicle'),
                    appendTo: this.contentContainer,
                    disabled: true,
                    large: true,
                    id: 'ridestyler-showcase-select-your-vehicle',
                    wrap: RideStylerShowcase.HTMLHelper.createElementWithID('div', 'ridestyler-showcase-select-your-vehicle-wrapper')
                });
                this.chooseVehicleButton.addEventListener('click', function () {
                    _this3.modal.Show();
                });
            }
        }, {
            key: 'buildCopy',
            value: function buildCopy() {
                function emboldenFirstWord(string) {
                    var firstWord = RideStylerShowcase.StringHelper.getFirstWord(string);
                    var remainingString = string.substr(firstWord.length);
                    return [RideStylerShowcase.HTMLHelper.createElementWithText('strong', firstWord), RideStylerShowcase.HTMLHelper.createTextElement(remainingString)];
                }
                var visualizeString = RideStylerShowcase.HTMLHelper.createElement('h1', {
                    append: emboldenFirstWord(RideStylerShowcase.strings.getString("vehicle-select-visualize-intro")),
                    appendTo: this.contentContainer
                });
                var shareString = RideStylerShowcase.HTMLHelper.createElement('h1', {
                    append: emboldenFirstWord(RideStylerShowcase.strings.getString("vehicle-select-share-intro")),
                    appendTo: this.contentContainer
                });
            }
        }, {
            key: 'onAuthenticated',
            value: function onAuthenticated() {
                var _this4 = this;

                this.chooseVehicleButton.disabled = false;
                RideStylerShowcase.api.request("wheel/getmodels", {
                    Count: 3,
                    HasCatalogImage: true
                }).done(function (response) {
                    return _this4.showWheels(response.Models);
                });
            }
        }, {
            key: 'onVehicleSelected',
            value: function onVehicleSelected(selection) {
                // The user has selected a vehicle using the vehicle selection modal.
                // Now we need to obtain a OE tire option for them.
                this.events.trigger("vehicle-selected", selection);
                history.pushState(selection, null, null);
            }
            /**
             * Show the passed in wheel models in the wheel showcase section of the vehicle selection screen
             * @param models The wheel models to show
             */

        }, {
            key: 'showWheels',
            value: function showWheels(models) {
                var wheelContainer = void 0;
                if (!this.wheelContainer) {
                    wheelContainer = this.wheelContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: 'ridestyler-showcase-vehicle-selection-wheel-showcase',
                        appendTo: this.component
                    });
                } else {
                    wheelContainer = this.wheelContainer;
                    RideStylerShowcase.HTMLHelper.empty(wheelContainer);
                }
                var modelImages = [];
                var onModelImageLoad = function onModelImageLoad() {
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = modelImages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var modelImage = _step.value;

                            if (!modelImage.complete) return;
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    wheelContainer.style.opacity = '1';
                };
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = models[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var model = _step2.value;

                        var modelImageSource = ridestyler.wheel.image({
                            WheelModel: model.WheelModelID,
                            Width: 400,
                            Height: 400,
                            PositionX: 1 /* Center */
                            , PositionY: 1 /* Center */
                            , WheelFitmentResourceType: 3 /* Catalog */
                            , IncludeShadow: true
                        });
                        var modelImage = RideStylerShowcase.HTMLHelper.createElement('img');
                        modelImage.className = 'ridestyler-showcase-vehicle-selection-wheel-showcase-image';
                        modelImage.addEventListener('load', onModelImageLoad);
                        modelImages.push();
                        modelImage.src = modelImageSource;
                        wheelContainer.appendChild(modelImage);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
        }, {
            key: 'generateVehiclePreviewSettings',
            value: function generateVehiclePreviewSettings() {
                var scale = Math.max(window.devicePixelRatio || 0, 1);
                var container = this.component;
                var widthToHeight = .5;
                var maxRequestResolution = 1920;
                // Width is 80% of the container width
                var width = container.clientWidth * .80;
                // Width is 500 if not found
                if (!width) width = 500;
                // Apply our scale
                width *= scale;
                // Limit width to max request resolution
                if (width > maxRequestResolution) width = maxRequestResolution;
                // Determine height
                var height = width * widthToHeight;
                return {
                    Width: ~~width,
                    Height: ~~height
                };
            }
        }]);

        return RideStylerShowcaseVehicleSelection;
    }(RideStylerShowcase.MainComponentBase);

    RideStylerShowcase.RideStylerShowcaseVehicleSelection = RideStylerShowcaseVehicleSelection;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbi50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlU2VsZWN0aW9uIiwibW9kYWwiLCJSaWRlU3R5bGVyVmVoaWNsZVNlbGVjdGlvbk1vZGFsIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwicGFyZW50RWxlbWVudCIsImNhbGxiYWNrIiwic2VsZWN0aW9uIiwiRmluYWxTZWxlY3Rpb25NYWRlIiwib25WZWhpY2xlU2VsZWN0ZWQiLCJWZWhpY2xlIiwiSW1hZ2VTZXR0aW5ncyIsImdlbmVyYXRlVmVoaWNsZVByZXZpZXdTZXR0aW5ncyIsIkluY2x1ZGVPRVRpcmVPcHRpb24iLCJhcGkiLCJhZnRlckF1dGhlbnRpY2F0ZWQiLCJvbkF1dGhlbnRpY2F0ZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjb250ZW50Q29udGFpbmVyIiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRUbyIsImJ1aWxkQ29weSIsImNob29zZVZlaGljbGVCdXR0b24iLCJjcmVhdGVCdXR0b24iLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImRpc2FibGVkIiwibGFyZ2UiLCJpZCIsIndyYXAiLCJjcmVhdGVFbGVtZW50V2l0aElEIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNob3ciLCJlbWJvbGRlbkZpcnN0V29yZCIsInN0cmluZyIsImZpcnN0V29yZCIsIlN0cmluZ0hlbHBlciIsImdldEZpcnN0V29yZCIsInJlbWFpbmluZ1N0cmluZyIsInN1YnN0ciIsImxlbmd0aCIsImNyZWF0ZUVsZW1lbnRXaXRoVGV4dCIsImNyZWF0ZVRleHRFbGVtZW50IiwidmlzdWFsaXplU3RyaW5nIiwiYXBwZW5kIiwic2hhcmVTdHJpbmciLCJyZXF1ZXN0IiwiQ291bnQiLCJIYXNDYXRhbG9nSW1hZ2UiLCJkb25lIiwic2hvd1doZWVscyIsInJlc3BvbnNlIiwiTW9kZWxzIiwiZXZlbnRzIiwidHJpZ2dlciIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJtb2RlbHMiLCJ3aGVlbENvbnRhaW5lciIsImVtcHR5IiwibW9kZWxJbWFnZXMiLCJvbk1vZGVsSW1hZ2VMb2FkIiwibW9kZWxJbWFnZSIsImNvbXBsZXRlIiwic3R5bGUiLCJvcGFjaXR5IiwibW9kZWwiLCJtb2RlbEltYWdlU291cmNlIiwicmlkZXN0eWxlciIsIndoZWVsIiwiaW1hZ2UiLCJXaGVlbE1vZGVsIiwiV2hlZWxNb2RlbElEIiwiV2lkdGgiLCJIZWlnaHQiLCJQb3NpdGlvblgiLCJQb3NpdGlvblkiLCJXaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGUiLCJJbmNsdWRlU2hhZG93IiwicHVzaCIsInNyYyIsImFwcGVuZENoaWxkIiwic2NhbGUiLCJNYXRoIiwibWF4Iiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsIndpZHRoVG9IZWlnaHQiLCJtYXhSZXF1ZXN0UmVzb2x1dGlvbiIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJNYWluQ29tcG9uZW50QmFzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQSxRQUN4QkMsa0NBRHdCO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxzREFPYTtBQUFBOztBQUM3QixxQkFBS0MsS0FBTCxHQUFhLElBQUlDLCtCQUFKLENBQW9DO0FBQzdDQywrQkFBVztBQUFBLCtCQUFNLE9BQUtDLFNBQUwsQ0FBZUMsYUFBckI7QUFBQSxxQkFEa0M7QUFFN0NDLDhCQUFVLGtCQUFDQyxTQUFELEVBQWM7QUFDcEIsNEJBQUlBLFVBQVVDLGtCQUFkLEVBQWtDO0FBQzlCLG1DQUFLQyxpQkFBTCxDQUF1QkYsVUFBVUcsT0FBakM7QUFDSDtBQUNKLHFCQU40QztBQU83Q0MsbUNBQWU7QUFB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QyxrQ0FBQSxHQUFrQ0Esa0NBQWxDO0FBbUtoQixDQXBLRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVTZWxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbiBleHRlbmRzIE1haW5Db21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJpdmF0ZSBjaG9vc2VWZWhpY2xlQnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBwcml2YXRlIGNvbnRlbnRDb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgd2hlZWxDb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgbW9kYWw6UmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZU1haW5Db21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsID0gbmV3IFJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwoe1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogKCkgPT4gdGhpcy5jb21wb25lbnQucGFyZW50RWxlbWVudCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKHNlbGVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uLkZpbmFsU2VsZWN0aW9uTWFkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVTZWxlY3RlZChzZWxlY3Rpb24uVmVoaWNsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIEltYWdlU2V0dGluZ3M6IG9wdGlvbnMgPT4gdGhpcy5nZW5lcmF0ZVZlaGljbGVQcmV2aWV3U2V0dGluZ3MoKSxcbiAgICAgICAgICAgICAgICBJbmNsdWRlT0VUaXJlT3B0aW9uOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXBpLmFmdGVyQXV0aGVudGljYXRlZCgoKSA9PiB0aGlzLm9uQXV0aGVudGljYXRlZCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBidWlsZENvbXBvbmVudChjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cbiAgICAgICAgICAgIC8vVVJMIENIRUNLIExPR0lDXG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdyaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uJyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudENvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY29udGVudCByaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uLWNvbnRlbnQnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBjb250YWluZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQ29weSgpO1xuXG4gICAgICAgICAgICB0aGlzLmNob29zZVZlaGljbGVCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC15b3VyLXZlaGljbGUnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb250ZW50Q29udGFpbmVyLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhcmdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkOiAncmlkZXN0eWxlci1zaG93Y2FzZS1zZWxlY3QteW91ci12ZWhpY2xlJyxcbiAgICAgICAgICAgICAgICB3cmFwOiBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoSUQoJ2RpdicsICdyaWRlc3R5bGVyLXNob3djYXNlLXNlbGVjdC15b3VyLXZlaGljbGUtd3JhcHBlcicpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jaG9vc2VWZWhpY2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kYWwuU2hvdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkQ29weSgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVtYm9sZGVuRmlyc3RXb3JkIChzdHJpbmc6c3RyaW5nKSA6IFtIVE1MRWxlbWVudCwgVGV4dF0ge1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdFdvcmQgPSBTdHJpbmdIZWxwZXIuZ2V0Rmlyc3RXb3JkKHN0cmluZyk7XG4gICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZ1N0cmluZyA9IHN0cmluZy5zdWJzdHIoZmlyc3RXb3JkLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoVGV4dCgnc3Ryb25nJywgZmlyc3RXb3JkKSxcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVUZXh0RWxlbWVudChyZW1haW5pbmdTdHJpbmcpXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHZpc3VhbGl6ZVN0cmluZyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaDEnLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kOiBlbWJvbGRlbkZpcnN0V29yZChzdHJpbmdzLmdldFN0cmluZyhcInZlaGljbGUtc2VsZWN0LXZpc3VhbGl6ZS1pbnRyb1wiKSksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29udGVudENvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgc2hhcmVTdHJpbmcgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2gxJywge1xuICAgICAgICAgICAgICAgIGFwcGVuZDogZW1ib2xkZW5GaXJzdFdvcmQoc3RyaW5ncy5nZXRTdHJpbmcoXCJ2ZWhpY2xlLXNlbGVjdC1zaGFyZS1pbnRyb1wiKSksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29udGVudENvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlVmVoaWNsZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBhcGkucmVxdWVzdChcIndoZWVsL2dldG1vZGVsc1wiLCB7XG4gICAgICAgICAgICAgICAgQ291bnQ6IDMsXG4gICAgICAgICAgICAgICAgSGFzQ2F0YWxvZ0ltYWdlOiB0cnVlXG4gICAgICAgICAgICB9KS5kb25lKHJlc3BvbnNlID0+IHRoaXMuc2hvd1doZWVscyhyZXNwb25zZS5Nb2RlbHMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25WZWhpY2xlU2VsZWN0ZWQoc2VsZWN0aW9uOlJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwuU2VsZWN0ZWRWZWhpY2xlRGF0YSkge1xuICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzIHNlbGVjdGVkIGEgdmVoaWNsZSB1c2luZyB0aGUgdmVoaWNsZSBzZWxlY3Rpb24gbW9kYWwuXG4gICAgICAgICAgICAvLyBOb3cgd2UgbmVlZCB0byBvYnRhaW4gYSBPRSB0aXJlIG9wdGlvbiBmb3IgdGhlbS5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbik7XG4gICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShzZWxlY3Rpb24sIG51bGwsIG51bGwpXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvdyB0aGUgcGFzc2VkIGluIHdoZWVsIG1vZGVscyBpbiB0aGUgd2hlZWwgc2hvd2Nhc2Ugc2VjdGlvbiBvZiB0aGUgdmVoaWNsZSBzZWxlY3Rpb24gc2NyZWVuXG4gICAgICAgICAqIEBwYXJhbSBtb2RlbHMgVGhlIHdoZWVsIG1vZGVscyB0byBzaG93XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHNob3dXaGVlbHMobW9kZWxzOnJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxNb2RlbERhdGFPYmplY3RbXSkge1xuICAgICAgICAgICAgbGV0IHdoZWVsQ29udGFpbmVyOkhUTUxFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2hlZWxDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB3aGVlbENvbnRhaW5lciA9IHRoaXMud2hlZWxDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS12ZWhpY2xlLXNlbGVjdGlvbi13aGVlbC1zaG93Y2FzZScsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGVlbENvbnRhaW5lciA9IHRoaXMud2hlZWxDb250YWluZXI7XG5cbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHdoZWVsQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG1vZGVsSW1hZ2VzOkhUTUxJbWFnZUVsZW1lbnRbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IG9uTW9kZWxJbWFnZUxvYWQgPSBmdW5jdGlvbiAodGhpczpIVE1MSW1hZ2VFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbW9kZWxJbWFnZSBvZiBtb2RlbEltYWdlcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2RlbEltYWdlLmNvbXBsZXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZWVsQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmb3IgKGxldCBtb2RlbCBvZiBtb2RlbHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgbW9kZWxJbWFnZVNvdXJjZSA9IHJpZGVzdHlsZXIud2hlZWwuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBtb2RlbC5XaGVlbE1vZGVsSUQsXG4gICAgICAgICAgICAgICAgICAgIFdpZHRoOiA0MDAsXG4gICAgICAgICAgICAgICAgICAgIEhlaWdodDogNDAwLFxuICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxuICAgICAgICAgICAgICAgICAgICBJbmNsdWRlU2hhZG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IG1vZGVsSW1hZ2UgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2UuY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1zZWxlY3Rpb24td2hlZWwtc2hvd2Nhc2UtaW1hZ2UnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTW9kZWxJbWFnZUxvYWQpO1xuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2VzLnB1c2goICk7XG5cbiAgICAgICAgICAgICAgICBtb2RlbEltYWdlLnNyYyA9IG1vZGVsSW1hZ2VTb3VyY2U7XG4gICAgICAgICAgICAgICAgd2hlZWxDb250YWluZXIuYXBwZW5kQ2hpbGQobW9kZWxJbWFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdlbmVyYXRlVmVoaWNsZVByZXZpZXdTZXR0aW5ncygpOnJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VSZW5kZXJSZXF1ZXN0IHtcbiAgICAgICAgICAgIGxldCBzY2FsZSA9IE1hdGgubWF4KHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDAsIDEpO1xuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB3aWR0aFRvSGVpZ2h0ID0gLjU7XG4gICAgICAgICAgICBjb25zdCBtYXhSZXF1ZXN0UmVzb2x1dGlvbiA9IDE5MjA7XG5cbiAgICAgICAgICAgIC8vIFdpZHRoIGlzIDgwJSBvZiB0aGUgY29udGFpbmVyIHdpZHRoXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGggKiAuODA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdpZHRoIGlzIDUwMCBpZiBub3QgZm91bmRcbiAgICAgICAgICAgIGlmICghd2lkdGgpIHdpZHRoID0gNTAwO1xuXG4gICAgICAgICAgICAvLyBBcHBseSBvdXIgc2NhbGVcbiAgICAgICAgICAgIHdpZHRoICo9IHNjYWxlO1xuXG4gICAgICAgICAgICAvLyBMaW1pdCB3aWR0aCB0byBtYXggcmVxdWVzdCByZXNvbHV0aW9uXG4gICAgICAgICAgICBpZiAod2lkdGggPiBtYXhSZXF1ZXN0UmVzb2x1dGlvbikgd2lkdGggPSBtYXhSZXF1ZXN0UmVzb2x1dGlvbjtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGhlaWdodFxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHdpZHRoICogd2lkdGhUb0hlaWdodDtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBXaWR0aDogfn53aWR0aCxcbiAgICAgICAgICAgICAgICBIZWlnaHQ6IH5+aGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var customizationsClass = 'ridestyler-showcase-customizations';
    var loadingClass = customizationsClass + '-loading';

    var RideStylerShowcaseVehicleVisualization = function (_RideStylerShowcase$M) {
        _inherits(RideStylerShowcaseVehicleVisualization, _RideStylerShowcase$M);

        function RideStylerShowcaseVehicleVisualization() {
            _classCallCheck(this, RideStylerShowcaseVehicleVisualization);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseVehicleVisualization.__proto__ || Object.getPrototypeOf(RideStylerShowcaseVehicleVisualization)).apply(this, arguments));

            _this.productSelector = RideStylerShowcase.RideStylerShowcaseProductSelector;
            _this.customizationComponentOrder = ['paint', 'wheels', 'tires', 'suspension'];
            _this.customizationComponentSettings = {
                paint: {
                    title: RideStylerShowcase.strings.getString('select-paint'),
                    showFilterButton: false,
                    enabled: true
                },
                wheels: {
                    title: RideStylerShowcase.strings.getString('select-wheels'),
                    showFilterButton: true,
                    enabled: true
                },
                tires: {
                    title: RideStylerShowcase.strings.getString('select-tires'),
                    showFilterButton: true,
                    enabled: true
                },
                suspension: {
                    title: RideStylerShowcase.strings.getString('adjust-suspension'),
                    showFilterButton: false,
                    enabled: true
                }
            };
            _this.resultsArr = [];
            return _this;
        }

        _createClass(RideStylerShowcaseVehicleVisualization, [{
            key: 'buildComponent',
            value: function buildComponent(container) {
                var _this2 = this;

                // Wait for initialization before creating the viewport because it detects
                // the offset positioning of the viewport element when created and our CSS
                // isn't guaranteed to be loaded until the initialized event
                this.events.on('initialized', function () {
                    _this2.setupViewport(container);
                    // Setup initial tab layout
                    _this2.updateTabLayout();
                    //Checks to see if there is a vehicle in the url and parses the data to make the API calls
                    if (location.search.indexOf('VehicleConfiguration') !== -1) {
                        _this2.loadUrlData(_this2.parameters.get());
                    }
                    _this2.events.on('vehicle-selected', function () {
                        if (_this2.vehicleDifferentFromState()) _this2.viewport.Reset();
                    });
                    // Hide the share button if sharing is disabled
                    if (!_this2.showcase.settingsFromAPI.EnableSharing) shareButton.style.display = 'none';
                    var countTireBrands = RideStylerShowcase.api.request("tire/countbrands", _this2.showcase.filters.tireFilters.getFilters());
                    var countWheelBrands = RideStylerShowcase.api.request("wheel/countbrands", _this2.showcase.filters.wheelFilters.getFilters());
                    RideStylerShowcase.PromiseHelper.all([countTireBrands, countWheelBrands]).done(function (results) {
                        var tireBrandCount = results[0].Count;
                        var wheelBrandCount = results[1].Count;
                        if (!tireBrandCount) _this2.customizationComponentSettings.tires.enabled = false;
                        if (!wheelBrandCount) _this2.customizationComponentSettings.wheels.enabled = false;
                        _this2.updateTabs();
                    });
                });
                this.setupTabs();
                //Sets the diameter to state, updates the viewport, and pushes the description to the url
                this.changeWheelSize = new RideStylerShowcase.RideStylerShowcaseChangeWheelSize(this.showcase);
                this.changeWheelSize.optionSelectedCallback = function (newOption) {
                    _this2.state.extendData({
                        currentWheelFitment: newOption
                    });
                    _this2.updateViewport({
                        WheelFitment: newOption.WheelFitmentID
                    });
                    _this2.parameters.set(_this2.state.getData());
                };
                this.components = [this.vehicleDetails = new RideStylerShowcase.VehicleDetails(this.showcase), new RideStylerShowcase.WheelDetails(this.showcase), new RideStylerShowcase.TireDetails(this.showcase), this.tabBar, this.changeWheelSize];
                this.customizationComponentContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: customizationsClass,
                    appendTo: this.component
                });
                // Append any sub components
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.components[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var component = _step.value;

                        this.component.appendChild(component.component);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                this.rotateElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-rotate-vehicle',
                    appendTo: this.component
                });
                this.rotateElement.addEventListener('click', function () {
                    _this2.switchAngle();
                });
                RideStylerShowcase.HTMLHelper.createElement({
                    className: 'ridestyler-showcase-customization-component-title-container',
                    appendTo: this.component,
                    append: [this.titleElement = RideStylerShowcase.HTMLHelper.createElement({
                        className: 'ridestyler-showcase-customization-component-title',
                        appendTo: this.component
                    }), this.filterButton = RideStylerShowcase.HTMLHelper.createButton({
                        text: RideStylerShowcase.strings.getString('filter-results'),
                        skinny: true
                    })]
                });
                this.filterButton.addEventListener('click', function () {
                    _this2.showFilters();
                });
                var shareButton = RideStylerShowcase.HTMLHelper.createButton({
                    className: 'ridestyler-share-my-vehicle-button',
                    text: RideStylerShowcase.strings.getString('share-my-vehicle'),
                    appendTo: this.component,
                    style: {
                        opacity: '1'
                    },
                    disabled: true
                });
                shareButton.addEventListener('click', function () {
                    new RideStylerShowcase.RideStylerShowcaseShareModal(_this2.showcase, _this2.currentRenderInstructions).show();
                });
                this.state.afterDataChange(function (stateData) {
                    shareButton.disabled = stateData.currentWheel ? false : true;
                });
                // Start listening for resize events
                this.events.on('resized', function () {
                    if (_this2.isVisible()) {
                        _this2.updateViewport();
                    }
                });
                // Start listening for breakpoint changes
                this.events.on('breakpoint-changed', function (newBreakpoint) {
                    _this2.updateTabLayout();
                });
                this.vehicleDetails.paintSwatchClickCallback = function () {
                    _this2.setActiveCustomizationComponent(_this2.customizationComponents.paint);
                };
            }
        }, {
            key: 'setupViewport',
            value: function setupViewport(container) {
                var _this3 = this;

                var viewportElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-viewport',
                    appendTo: container
                });
                viewportElement.addEventListener('click', function () {
                    _this3.switchAngle();
                });
                this.viewport = new RideStylerViewport(viewportElement);
                this.parameters.popEventListener(this);
            }
            //takes in the URL data and returns an updated Viewport

        }, {
            key: 'loadUrlData',
            value: function loadUrlData(urlObject) {
                var context = this;
                var Descriptions = {
                    VehicleConfiguration: function VehicleConfiguration(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request("vehicle/getdescriptions", { VehicleConfiguration: urlObject.VehicleConfiguration });
                        promise.done(function (r) {
                            if (r.Success && r.Descriptions.length > 0) {
                                vehicleSelectArgs.VehicleConfiguration = r.Descriptions[0].ConfigurationID;
                                vehicleSelectArgs.VehicleDescription = r.Descriptions[0].FullDescription;
                            }
                        });
                        return promise;
                    },
                    TireOptionID: function TireOptionID(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request('vehicle/gettireoptiondetails', { VehicleConfiguration: urlObject.VehicleConfiguration });
                        promise.done(function (r) {
                            if (r.Success && r.Details.length > 0) {
                                vehicleSelectArgs.TireOptionID = r.Details[0].TireOptionID;
                                vehicleSelectArgs.TireOptionString = r.Details[0].Front.Description;
                                context.targetDiameter = r.Details[0].Front.InsideDiameter;
                            }
                        });
                        return promise;
                    },
                    TireModelID: function TireModelID(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request("tire/getmodeldescriptions", { TireModel: urlObject.TireModelID });
                        promise.done(function (r) {
                            if (r.Success && r.Models.length > 0) {
                                vehicleSelectArgs.currentTire = r.Models[0];
                            }
                        });
                        return promise;
                    },
                    PaintName: function PaintName(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request("vehicle/getpaintschemedescriptions", { VehiclePaintScheme: urlObject.PaintScheme });
                        promise.done(function (r) {
                            if (r.Success && r.Schemes.length > 0) {
                                var _iteratorNormalCompletion2 = true;
                                var _didIteratorError2 = false;
                                var _iteratorError2 = undefined;

                                try {
                                    for (var _iterator2 = r.Schemes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                                        var scheme = _step2.value;

                                        if (scheme.SchemeName == urlObject.PaintName) {
                                            vehicleSelectArgs.PaintScheme = scheme;
                                            break;
                                        }
                                    }
                                } catch (err) {
                                    _didIteratorError2 = true;
                                    _iteratorError2 = err;
                                } finally {
                                    try {
                                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                            _iterator2.return();
                                        }
                                    } finally {
                                        if (_didIteratorError2) {
                                            throw _iteratorError2;
                                        }
                                    }
                                }
                            }
                        });
                        return promise;
                    },
                    WheelModel: function WheelModel(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request("wheel/getmodeldescriptions", { WheelModel: urlObject.WheelModel });
                        promise.done(function (r) {
                            if (r.Success && r.Models.length > 0) {
                                vehicleSelectArgs.currentWheel = r.Models[0];
                            }
                        });
                        return promise;
                    },
                    WheelFitments: function WheelFitments(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request("wheel/getfitmentdescriptions", { VehicleConfiguration: urlObject.VehicleConfiguration, WheelModel: urlObject.WheelModel });
                        promise.done(function (r) {
                            context.getBestFitment(urlObject, r);
                        });
                    },
                    WheelFitmentID: function WheelFitmentID(vehicleSelectArgs) {
                        var promise = RideStylerShowcase.api.request("wheel/getfitmentdescriptions", { WheelFitments: urlObject.WheelFitmentID });
                        promise.done(function (r) {
                            if (r.Success && r.Fitments.length > 0) {
                                vehicleSelectArgs.currentWheelFitment = r.Fitments[0];
                                context.activeWheelDiameterSelect(r);
                            }
                        });
                        return promise;
                    }
                };
                this.promiseBuilder(urlObject, Descriptions);
            }
        }, {
            key: 'promiseBuilder',
            value: function promiseBuilder(urlObject, Descriptions) {
                var promArr = [];
                var vehicleSelectArgs = {
                    ImageUrl: '',
                    currentSuspension: Number(urlObject.Suspension)
                };
                for (var key in Descriptions) {
                    if (urlObject.hasOwnProperty(key)) {
                        promArr.push(Descriptions[key](vehicleSelectArgs));
                        if (key == 'WheelModel') promArr.push(Descriptions.WheelFitments(vehicleSelectArgs));
                    }
                }
                var context = this;
                RideStylerShowcase.PromiseHelper.all(promArr).done(function () {
                    context.events.trigger("vehicle-selected", vehicleSelectArgs);
                });
            }
            //Removes the active class in the 'wheel size' tab
            //appends it to the proper element and updates the state

        }, {
            key: 'activeWheelDiameterSelect',
            value: function activeWheelDiameterSelect(results) {
                var currentWheelDiameter = !results ? this.state.getData().currentWheelFitment.DiameterMin + '' : results.Fitments[0].DiameterMin + '';
                var wheelSizeActive = document.getElementsByClassName('ridestyler-showcase-button-picker-option-active')[0];
                wheelSizeActive.classList.remove('ridestyler-showcase-button-picker-option-active');
                var wheelSizeList = document.getElementsByClassName('ridestyler-showcase-button-picker-option');
                var currentSize = void 0;
                for (var i = 0; i < wheelSizeList.length; i++) {
                    if (wheelSizeList[i].innerHTML === currentWheelDiameter) {
                        currentSize = wheelSizeList[i];
                    }
                }
                this.state.extendData({
                    currentWheelFitment: !results ? this.state.getData().currentWheelFitment : results.Fitments[0]
                });
                currentSize.classList.add('ridestyler-showcase-button-picker-option-active');
            }
        }, {
            key: 'updateTabs',
            value: function updateTabs() {
                var tabs = [];
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = this.customizationComponentOrder[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var key = _step3.value;

                        // Skip disabled components
                        if (!this.customizationComponentSettings[key].enabled) continue;
                        tabs.push(this.tabs[key]);
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }

                this.tabBar.setTabs(tabs);
                this.updateTabLayout();
            }
        }, {
            key: 'updateTabLayout',
            value: function updateTabLayout() {
                var currentBreakpoint = this.showcase.style.getCurrentBreakpoint();
                var horizontal = currentBreakpoint && currentBreakpoint[0] === 'phone-portrait';
                this.tabBar.setMode(horizontal ? 'horizontal' : 'vertical');
            }
        }, {
            key: 'setupTabs',
            value: function setupTabs() {
                var _this4 = this;

                this.tabBar = new RideStylerShowcase.RideStylerShowcaseTabBar(this.showcase);
                // Define our tabs
                this.tabs = {
                    paint: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'paint',
                        key: 'paint',
                        label: RideStylerShowcase.strings.getString('paint')
                    }),
                    wheels: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'wheel',
                        key: 'wheels',
                        label: RideStylerShowcase.strings.getString('wheels')
                    }),
                    tires: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'tire',
                        key: 'tires',
                        label: RideStylerShowcase.strings.getString('tires')
                    }),
                    suspension: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'suspension',
                        key: 'suspension',
                        label: RideStylerShowcase.strings.getString('suspension')
                    })
                };
                // Switch the bottom view, the customization component when a tab is clicked on
                this.tabBar.tabSwitchedCallback = function (e) {
                    var newTab = e.newTab;
                    var key = newTab.key;
                    if (_this4.customizationComponents && key in _this4.customizationComponents) {
                        _this4.setActiveCustomizationComponent(_this4.customizationComponents[key]);
                    }
                };
            }
        }, {
            key: 'vehicleDifferentFromState',
            value: function vehicleDifferentFromState() {
                var stateData = this.state.getData();
                if (!stateData.currentVehicleConfigurationID || !stateData.currentVehicleTireOptionID) {
                    console.error('Trying to show the visualize screen without a vehicle configuration or tire option.');
                }
                var vehicleChanged = !RideStylerShowcase.GUIDHelper.areEqual(stateData.currentVehicleConfigurationID, this.vehicleConfigurationID);
                var tireOptionChanged = !RideStylerShowcase.GUIDHelper.areEqual(stateData.currentVehicleTireOptionID, this.vehicleTireOptionID);
                return vehicleChanged || tireOptionChanged;
            }
        }, {
            key: 'onDisplay',
            value: function onDisplay() {
                if (this.vehicleDifferentFromState()) {
                    var stateData = this.state.getData();
                    this.vehicleConfigurationID = stateData.currentVehicleConfigurationID;
                    this.vehicleDescription = stateData.currentVehicleDescription;
                    this.vehicleTireOptionID = stateData.currentVehicleTireOptionID;
                    this.vehicleTireOptionDescription = stateData.currentVehicleTireOptionDescription;
                    this.tabBar.clearActiveTab();
                    this.onVehicleChanged();
                    this.parameters.set(this.state.getData());
                }
            }
        }, {
            key: 'onVehicleChanged',
            value: function onVehicleChanged() {
                var _this5 = this;

                RideStylerShowcase.HTMLHelper.empty(this.customizationComponentContainer);
                // Set the customization container as loading while we're loading additional information
                // about the vehicle
                this.customizationComponentContainer.classList.add(loadingClass);
                this.updateTabs();
                // Deselect any active tab
                this.tabBar.clearActiveTab();
                this.rotateElement.classList.remove('in');
                // Load the vehicle's description model
                var getVehicleDescription = RideStylerShowcase.api.request("vehicle/getdescriptions", {
                    Count: 1,
                    VehicleConfiguration: this.vehicleConfigurationID
                });
                var getVehicleTireOption = RideStylerShowcase.api.request('vehicle/gettireoptiondetails', {
                    VehicleConfiguration: this.vehicleConfigurationID
                });
                RideStylerShowcase.PromiseHelper.all([getVehicleDescription, getVehicleTireOption]).done(function (responses) {
                    var vehicleDescription = _this5.vehicleDescriptionModel = responses[0].Descriptions[0];
                    var vehicleTireOption = void 0;
                    var selectedTireOptionID = RideStylerShowcase.GUIDHelper.parse(_this5.vehicleTireOptionID);
                    var _iteratorNormalCompletion4 = true;
                    var _didIteratorError4 = false;
                    var _iteratorError4 = undefined;

                    try {
                        for (var _iterator4 = responses[1].Details[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                            var tireOption = _step4.value;

                            if (RideStylerShowcase.GUIDHelper.areEqual(tireOption.TireOptionID, selectedTireOptionID)) {
                                vehicleTireOption = tireOption;
                                break;
                            }
                        }
                    } catch (err) {
                        _didIteratorError4 = true;
                        _iteratorError4 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion4 && _iterator4.return) {
                                _iterator4.return();
                            }
                        } finally {
                            if (_didIteratorError4) {
                                throw _iteratorError4;
                            }
                        }
                    }

                    _this5.vehicleTireOption = vehicleTireOption;
                    _this5.state.extendData({
                        vehicleHasAngledImage: vehicleDescription.HasAngledImage,
                        vehicleHasSideImage: vehicleDescription.HasSideImage,
                        currentTireOption: vehicleTireOption,
                        currentVehicleDescriptionModel: vehicleDescription
                    });
                    _this5.initializeForNewVehicle();
                });
            }
        }, {
            key: 'initializeForNewVehicle',
            value: function initializeForNewVehicle() {
                var _this6 = this;

                this.events.trigger("vehicle-description-loaded", this.vehicleDescriptionModel);
                this.currentRenderInstructions = {};
                this.tabBar.setActiveTab(this.tabs.paint);
                // Create the components that will be switched with the tabs
                this.customizationComponents = {
                    paint: new RideStylerShowcase.RideStylerShowcasePaintSelector(this.showcase),
                    wheels: new RideStylerShowcase.RideStylerShowcaseWheelSelector(this.showcase),
                    tires: new RideStylerShowcase.RideStylerShowcaseTireSelector(this.showcase),
                    suspension: new RideStylerShowcase.RideStylerShowcaseSuspensionSelector(this.showcase)
                };
                this.customizationComponents.wheels.setFilters(this.showcase.filters.wheelFilters.getFilters());
                this.showcase.filters.wheelFilters.onFiltersChanged = function (filters) {
                    _this6.customizationComponents.wheels.setFilters(filters);
                };
                this.showcase.filters.tireFilters.onFiltersChanged = function (filters) {
                    _this6.customizationComponents.tires.setFilters(filters);
                };
                this.customizationComponents.paint.onPaintSchemeSelected = function (paintScheme) {
                    _this6.state.extendData({ currentPaintScheme: paintScheme });
                    _this6.customizationComponents.paint.setOptionIsLoading(true);
                    _this6.updateViewport({ PaintColor: paintScheme.Colors[0].Hex }).always(function () {
                        _this6.customizationComponents.paint.setOptionIsLoading(false);
                        _this6.parameters.set(_this6.state.getData());
                    });
                };
                this.customizationComponents.wheels.productSelectedCallback = function (model) {
                    _this6.customizationComponents.wheels.setOptionIsLoading(true);
                    var canRenderOnCurrentAngle = _this6.imageType === 2 /* Angle */ && model.HasAngleImage || _this6.imageType === 1 /* Side */ && model.HasSideImage;
                    if (!canRenderOnCurrentAngle) _this6.switchAngle();
                    RideStylerShowcase.api.request('wheel/getfitmentdescriptions', {
                        VehicleConfiguration: _this6.vehicleConfigurationID,
                        WheelModel: model.WheelModelID,
                        IncludePricing: true
                    }).done(function (response) {
                        var fitments = response.Fitments;
                        var bestFitment = undefined;
                        var targetDiameter = _this6.vehicleTireOption.Front.InsideDiameter;
                        fitments.sort(function (a, b) {
                            var aDiff = Math.abs(a.DiameterMin - targetDiameter);
                            var bDiff = Math.abs(b.DiameterMin - targetDiameter);
                            return aDiff - bDiff;
                        });
                        bestFitment = fitments[0];
                        _this6.state.extendData({
                            currentWheel: model,
                            currentWheelFitment: bestFitment
                        });
                        _this6.changeWheelSize.setFitmentOptions(fitments, bestFitment);
                        _this6.changeWheelSize.component.style.display = '';
                        _this6.updateViewport({
                            WheelFitment: bestFitment.WheelFitmentID
                        }).always(function () {
                            _this6.customizationComponents.wheels.setOptionIsLoading(false);
                        });
                        _this6.parameters.set(_this6.state.getData());
                    }).fail(function () {
                        return _this6.customizationComponents.wheels.setOptionIsLoading(false);
                    });
                };
                this.customizationComponents.tires.productSelectedCallback = function (model) {
                    _this6.state.extendData({
                        currentTire: model
                    });
                    _this6.parameters.set(_this6.state.getData());
                };
                this.customizationComponents.suspension.suspensionChangeCallback = function (renderUpdate) {
                    _this6.state.extendData({ currentSuspension: renderUpdate.Suspension });
                    _this6.updateViewport(renderUpdate);
                    _this6.parameters.set(_this6.state.getData());
                    console.log('this.state.getData()2', _this6.state.getData());
                };
                this.setActiveCustomizationComponent(this.customizationComponents.wheels);
                var _iteratorNormalCompletion5 = true;
                var _didIteratorError5 = false;
                var _iteratorError5 = undefined;

                try {
                    for (var _iterator5 = RideStylerShowcase.ObjectHelper.getValues(this.customizationComponents)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                        var customizationComponent = _step5.value;

                        customizationComponent.component.classList.add('ridestyler-showcase-customization-component');
                        this.customizationComponentContainer.appendChild(customizationComponent.component);
                    }
                } catch (err) {
                    _didIteratorError5 = true;
                    _iteratorError5 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion5 && _iterator5.return) {
                            _iterator5.return();
                        }
                    } finally {
                        if (_didIteratorError5) {
                            throw _iteratorError5;
                        }
                    }
                }

                this.imageType = 2 /* Angle */;
                if (!this.vehicleDescriptionModel.HasAngledImage) this.imageType = 1 /* Side */;
                this.rotateElement.style.display = this.canSwitchAngle() ? '' : 'none';
                var stateData = this.state.getData();
                this.updateViewport({
                    VehicleConfiguration: this.vehicleConfigurationID,
                    WheelFitment: !stateData.currentWheelFitment ? undefined : stateData.currentWheelFitment.WheelFitmentID,
                    PaintColor: !stateData.currentPaintScheme ? undefined : stateData.currentPaintScheme.Colors[0].Hex,
                    VehicleTireOption: this.vehicleTireOptionID,
                    PositionX: 1 /* Center */
                    , PositionY: 2 /* Far */
                    , Suspension: !stateData.currentSuspension ? undefined : stateData.currentSuspension,
                    Type: this.imageType
                }).done(function () {
                    _this6.rotateElement.classList.add('in');
                    _this6.parameters.set(_this6.state.getData());
                });
                this.customizationComponentContainer.classList.remove(loadingClass);
            }
        }, {
            key: 'setActiveCustomizationComponent',
            value: function setActiveCustomizationComponent(customizationComponent) {
                var stateData = this.state.getData();
                var componentKey = this.getComponentKey(customizationComponent);
                var settings = this.customizationComponentSettings[componentKey];
                var tab = this.tabs[componentKey];
                if (tab) {
                    this.tabBar.setActiveTab(tab);
                }
                if (this.activeCustomizationComponent) {
                    this.activeCustomizationComponent.component.classList.remove('in');
                }
                customizationComponent.component.classList.add('in');
                this.activeCustomizationComponent = customizationComponent;
                if (typeof customizationComponent.update === 'function') customizationComponent.update();
                this.changeWheelSize.component.style.display = customizationComponent instanceof RideStylerShowcase.RideStylerShowcaseWheelSelector && stateData.currentWheel ? '' : 'none';
                this.filterButton.style.display = settings.showFilterButton ? '' : 'none';
                RideStylerShowcase.HTMLHelper.setText(this.titleElement, settings.title);
            }
        }, {
            key: 'getComponentKey',
            value: function getComponentKey(customizationComponent) {
                for (var key in this.customizationComponents) {
                    var component = this.customizationComponents[key];
                    if (component === customizationComponent) {
                        return key;
                    }
                }
            }
        }, {
            key: 'updateViewport',
            value: function updateViewport(instructions) {
                Object.assign(this.currentRenderInstructions, instructions);
                return this.viewport.Update(instructions);
            }
        }, {
            key: 'canSwitchAngle',
            value: function canSwitchAngle() {
                return this.vehicleDescriptionModel.HasAngledImage && this.vehicleDescriptionModel.HasSideImage;
            }
            //Returns fitments for wheel state

        }, {
            key: 'getBestFitment',
            value: function getBestFitment(urlObject, results) {
                var fitments = results.Fitments;
                var bestFitment = undefined;
                fitments.sort(function (a, b) {
                    var aDiff = Math.abs(a.DiameterMin - this.targetDiameter);
                    var bDiff = Math.abs(b.DiameterMin - this.targetDiameter);
                    return aDiff - bDiff;
                });
                bestFitment = fitments[0];
                this.changeWheelSize.setFitmentOptions(fitments, bestFitment);
                this.changeWheelSize.component.style.display = '';
            }
        }, {
            key: 'showFilters',
            value: function showFilters() {
                var activeCustomizationComponent = this.activeCustomizationComponent;
                var filterModal = void 0;
                if (activeCustomizationComponent === this.customizationComponents.tires) {
                    filterModal = new RideStylerShowcase.RideStylerShowcaseFilterModal(this.showcase, {
                        filterProvider: this.showcase.filters.tireFilters,
                        showCountTextFormat: RideStylerShowcase.strings.getString('show-count-format-tires')
                    });
                } else if (activeCustomizationComponent === this.customizationComponents.wheels) {
                    filterModal = new RideStylerShowcase.RideStylerShowcaseFilterModal(this.showcase, {
                        filterProvider: this.showcase.filters.wheelFilters,
                        showCountTextFormat: RideStylerShowcase.strings.getString('show-count-format-wheels')
                    });
                }
                if (filterModal) {
                    filterModal.show();
                }
            }
            //Chnages angled view of vehicle

        }, {
            key: 'switchAngle',
            value: function switchAngle() {
                if (!this.canSwitchAngle() || this.state.getData().currentWheel.HasSideImage === false) return;
                if (this.imageType === 2 /* Angle */) {
                        this.imageType = 1 /* Side */;
                    } else this.imageType = 2 /* Angle */;
                this.updateViewport({
                    Type: this.imageType
                });
            }
        }]);

        return RideStylerShowcaseVehicleVisualization;
    }(RideStylerShowcase.MainComponentBase);

    RideStylerShowcase.RideStylerShowcaseVehicleVisualization = RideStylerShowcaseVehicleVisualization;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24udHMiLCJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24uanMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiY3VzdG9taXphdGlvbnNDbGFzcyIsImxvYWRpbmdDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uIiwiYXJndW1lbnRzIiwicHJvZHVjdFNlbGVjdG9yIiwiUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yIiwiY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyIiwiY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzIiwicGFpbnQiLCJ0aXRsZSIsInN0cmluZ3MiLCJnZXRTdHJpbmciLCJzaG93RmlsdGVyQnV0dG9uIiwiZW5hYmxlZCIsIndoZWVscyIsInRpcmVzIiwic3VzcGVuc2lvbiIsInJlc3VsdHNBcnIiLCJjb250YWluZXIiLCJldmVudHMiLCJvbiIsInNldHVwVmlld3BvcnQiLCJ1cGRhdGVUYWJMYXlvdXQiLCJsb2NhdGlvbiIsInNlYXJjaCIsImluZGV4T2YiLCJsb2FkVXJsRGF0YSIsInBhcmFtZXRlcnMiLCJnZXQiLCJ2ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlIiwidmlld3BvcnQiLCJSZXNldCIsInNob3djYXNlIiwic2V0dGluZ3NGcm9tQVBJIiwiRW5hYmxlU2hhcmluZyIsInNoYXJlQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5IiwiY291bnRUaXJlQnJhbmRzIiwiYXBpIiwicmVxdWVzdCIsImZpbHRlcnMiLCJ0aXJlRmlsdGVycyIsImdldEZpbHRlcnMiLCJjb3VudFdoZWVsQnJhbmRzIiwid2hlZWxGaWx0ZXJzIiwiUHJvbWlzZUhlbHBlciIsImFsbCIsImRvbmUiLCJ0aXJlQnJhbmRDb3VudCIsInJlc3VsdHMiLCJDb3VudCIsIndoZWVsQnJhbmRDb3VudCIsInVwZGF0ZVRhYnMiLCJzZXR1cFRhYnMiLCJjaGFuZ2VXaGVlbFNpemUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUiLCJvcHRpb25TZWxlY3RlZENhbGxiYWNrIiwic3RhdGUiLCJleHRlbmREYXRhIiwiY3VycmVudFdoZWVsRml0bWVudCIsIm5ld09wdGlvbiIsInVwZGF0ZVZpZXdwb3J0IiwiV2hlZWxGaXRtZW50IiwiV2hlZWxGaXRtZW50SUQiLCJzZXQiLCJnZXREYXRhIiwiY29tcG9uZW50cyIsInZlaGljbGVEZXRhaWxzIiwiVmVoaWNsZURldGFpbHMiLCJXaGVlbERldGFpbHMiLCJUaXJlRGV0YWlscyIsInRhYkJhciIsImN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZFRvIiwiY29tcG9uZW50IiwiYXBwZW5kQ2hpbGQiLCJyb3RhdGVFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN3aXRjaEFuZ2xlIiwiYXBwZW5kIiwidGl0bGVFbGVtZW50IiwiZmlsdGVyQnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwidGV4dCIsInNraW5ueSIsInNob3dGaWx0ZXJzIiwib3BhY2l0eSIsImRpc2FibGVkIiwiUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbCIsImN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMiLCJzaG93IiwiYWZ0ZXJEYXRhQ2hhbmdlIiwic3RhdGVEYXRhIiwiY3VycmVudFdoZWVsIiwiaXNWaXNpYmxlIiwicGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrIiwic2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCIsImN1c3RvbWl6YXRpb25Db21wb25lbnRzIiwidmlld3BvcnRFbGVtZW50IiwiUmlkZVN0eWxlclZpZXdwb3J0IiwicG9wRXZlbnRMaXN0ZW5lciIsInVybE9iamVjdCIsImNvbnRleHQiLCJEZXNjcmlwdGlvbnMiLCJWZWhpY2xlQ29uZmlndXJhdGlvbiIsInZlaGljbGVTZWxlY3RBcmdzIiwicHJvbWlzZSIsInIiLCJTdWNjZXNzIiwibGVuZ3RoIiwiQ29uZmlndXJhdGlvbklEIiwiVmVoaWNsZURlc2NyaXB0aW9uIiwiRnVsbERlc2NyaXB0aW9uIiwiVGlyZU9wdGlvbklEIiwiRGV0YWlscyIsIlRpcmVPcHRpb25TdHJpbmciLCJGcm9udCIsIkRlc2NyaXB0aW9uIiwidGFyZ2V0RGlhbWV0ZXIiLCJJbnNpZGVEaWFtZXRlciIsIlRpcmVNb2RlbElEIiwiVGlyZU1vZGVsIiwiTW9kZWxzIiwiY3VycmVudFRpcmUiLCJQYWludE5hbWUiLCJWZWhpY2xlUGFpbnRTY2hlbWUiLCJQYWludFNjaGVtZSIsIlNjaGVtZXMiLCJzY2hlbWUiLCJTY2hlbWVOYW1lIiwiV2hlZWxNb2RlbCIsIldoZWVsRml0bWVudHMiLCJnZXRCZXN0Rml0bWVudCIsIkZpdG1lbnRzIiwiYWN0aXZlV2hlZWxEaWFtZXRlclNlbGVjdCIsInByb21pc2VCdWlsZGVyIiwicHJvbUFyciIsIkltYWdlVXJsIiwiY3VycmVudFN1c3BlbnNpb24iLCJOdW1iZXIiLCJTdXNwZW5zaW9uIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwidHJpZ2dlciIsImN1cnJlbnRXaGVlbERpYW1ldGVyIiwiRGlhbWV0ZXJNaW4iLCJ3aGVlbFNpemVBY3RpdmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ3aGVlbFNpemVMaXN0IiwiY3VycmVudFNpemUiLCJpIiwiaW5uZXJIVE1MIiwiYWRkIiwidGFicyIsInNldFRhYnMiLCJjdXJyZW50QnJlYWtwb2ludCIsImdldEN1cnJlbnRCcmVha3BvaW50IiwiaG9yaXpvbnRhbCIsInNldE1vZGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIiLCJUYWIiLCJpY29uIiwibGFiZWwiLCJ0YWJTd2l0Y2hlZENhbGxiYWNrIiwibmV3VGFiIiwiZSIsImN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEIiwiY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQiLCJjb25zb2xlIiwiZXJyb3IiLCJ2ZWhpY2xlQ2hhbmdlZCIsIkdVSURIZWxwZXIiLCJhcmVFcXVhbCIsInZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ0aXJlT3B0aW9uQ2hhbmdlZCIsInZlaGljbGVUaXJlT3B0aW9uSUQiLCJ2ZWhpY2xlRGVzY3JpcHRpb24iLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uIiwidmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbiIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiY2xlYXJBY3RpdmVUYWIiLCJvblZlaGljbGVDaGFuZ2VkIiwiZW1wdHkiLCJnZXRWZWhpY2xlRGVzY3JpcHRpb24iLCJnZXRWZWhpY2xlVGlyZU9wdGlvbiIsInZlaGljbGVEZXNjcmlwdGlvbk1vZGVsIiwicmVzcG9uc2VzIiwidmVoaWNsZVRpcmVPcHRpb24iLCJzZWxlY3RlZFRpcmVPcHRpb25JRCIsInBhcnNlIiwidGlyZU9wdGlvbiIsInZlaGljbGVIYXNBbmdsZWRJbWFnZSIsIkhhc0FuZ2xlZEltYWdlIiwidmVoaWNsZUhhc1NpZGVJbWFnZSIsIkhhc1NpZGVJbWFnZSIsImN1cnJlbnRUaXJlT3B0aW9uIiwiY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsIiwiaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUiLCJzZXRBY3RpdmVUYWIiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yIiwiUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciIsIlJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvciIsIlJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3RvciIsInNldEZpbHRlcnMiLCJvbkZpbHRlcnNDaGFuZ2VkIiwib25QYWludFNjaGVtZVNlbGVjdGVkIiwiY3VycmVudFBhaW50U2NoZW1lIiwicGFpbnRTY2hlbWUiLCJzZXRPcHRpb25Jc0xvYWRpbmciLCJQYWludENvbG9yIiwiQ29sb3JzIiwiSGV4IiwiYWx3YXlzIiwicHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2siLCJjYW5SZW5kZXJPbkN1cnJlbnRBbmdsZSIsImltYWdlVHlwZSIsIm1vZGVsIiwiSGFzQW5nbGVJbWFnZSIsIldoZWVsTW9kZWxJRCIsIkluY2x1ZGVQcmljaW5nIiwiZml0bWVudHMiLCJyZXNwb25zZSIsImJlc3RGaXRtZW50IiwidW5kZWZpbmVkIiwic29ydCIsImEiLCJiIiwiYURpZmYiLCJNYXRoIiwiYWJzIiwiYkRpZmYiLCJzZXRGaXRtZW50T3B0aW9ucyIsImZhaWwiLCJzdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2siLCJyZW5kZXJVcGRhdGUiLCJsb2ciLCJPYmplY3RIZWxwZXIiLCJnZXRWYWx1ZXMiLCJjdXN0b21pemF0aW9uQ29tcG9uZW50IiwiY2FuU3dpdGNoQW5nbGUiLCJWZWhpY2xlVGlyZU9wdGlvbiIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIlR5cGUiLCJjb21wb25lbnRLZXkiLCJnZXRDb21wb25lbnRLZXkiLCJzZXR0aW5ncyIsInRhYiIsImFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQiLCJ1cGRhdGUiLCJzZXRUZXh0IiwiaW5zdHJ1Y3Rpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwiVXBkYXRlIiwiZmlsdGVyTW9kYWwiLCJSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCIsImZpbHRlclByb3ZpZGVyIiwic2hvd0NvdW50VGV4dEZvcm1hdCIsIk1haW5Db21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUl4QixRQUFNQyxzQkFBc0Isb0NBQTVCO0FBQ0EsUUFBTUMsZUFBZUQsc0JBQXNCLFVBQTNDOztBQUx3QixRQVN4QkUsc0NBVHdCO0FBQUE7O0FBU3hCLDBEQUFBO0FBQUE7O0FBQUEs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QUFJcVAsaUNBQWlDLEtBQUszSix1QkFBTCxDQUE2QnZGLE1BQWxFLEVBQTBFO0FBQzdFeVAsa0NBQWMsSUFBSXhRLG1CQUFBeVEsNkJBQUosQ0FBa0MsS0FBS3hPLFFBQXZDLEVBQWlEO0FBQzNEeU8sd0NBQWdCLEtBQUt6TyxRQUFMLENBQWNTLE9BQWQsQ0FBc0JJLFlBRHFCO0FBRTNENk4sNkNBQXFCM1EsbUJBQUFXLE9BQUEsQ0FBUUMsU0FBUixDQUFrQiwwQkFBbEI7QUFGc0MscUJBQWpELENBQWQ7QUFJSDtBQUVELG9CQUFJNFAsV0FBSixFQUFpQjtBQUNiQSxnQ0FBWXpLLElBQVo7QUFDSDtBQUNKO0FBRUQ7O0FBdHRCb0I7QUFBQTtBQUFBLDBDQXV0QkQ7QUFDZixvQkFBSSxDQUFDLEtBQUt5SixjQUFMLEVBQUQsSUFBMEIsS0FBSzdMLEtBQUwsQ0FBV1EsT0FBWCxHQUFxQitCLFlBQXJCLENBQWtDeUcsWUFBbEMsS0FBbUQsS0FBakYsRUFBd0Y7QUFFeEYsb0JBQUksS0FBS3FCLFNBQUwsS0FBYyxDQUFsQixDQUFrQixXQUFsQixFQUF5RTtBQUVyRSw2QkFBS0EsU0FBTCxHQUFjLENBQWQsQ0FBYyxVQUFkO0FBQ0gscUJBSEQsTUFLSSxLQUFLQSxTQUFMLEdBQWMsQ0FBZCxDQUFjLFdBQWQ7QUFFSixxQkFBS2pLLGNBQUwsQ0FBb0I7QUFDaEI2TCwwQkFBTSxLQUFLNUI7QUFESyxpQkFBcEI7QUFHSDtBQXB1Qm1COztBQUFBO0FBQUEsTUFTb0NoTyxtQkFBQTRRLGlCQVRwQzs7QUFTWDVRLHVCQUFBRyxzQ0FBQSxHQUFzQ0Esc0NBQXRDO0FBbXVCaEIsQ0E1dUJELEVBQVVILHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgVGFiID0gUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYjtcbiAgICBcblxuICAgIGNvbnN0IGN1c3RvbWl6YXRpb25zQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9ucyc7XG4gICAgY29uc3QgbG9hZGluZ0NsYXNzID0gY3VzdG9taXphdGlvbnNDbGFzcyArICctbG9hZGluZyc7XG5cbiAgICB0eXBlIGN1c3RvbWl6YXRpb25Db21wb25lbnRLZXlzID0gJ3BhaW50JyB8ICd3aGVlbHMnIHwgJ3RpcmVzJyB8ICdzdXNwZW5zaW9uJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlVmlzdWFsaXphdGlvbiBleHRlbmRzIE1haW5Db21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJpdmF0ZSBwcm9kdWN0U2VsZWN0b3IgPSBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3I7XG4gICAgICAgIHByaXZhdGUgdmlld3BvcnQ6UmlkZVN0eWxlclZpZXdwb3J0O1xuICAgICAgICBwcml2YXRlIHRhYkJhcjpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXI7XG4gICAgICAgIHByaXZhdGUgY2hhbmdlV2hlZWxTaXplOlJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZTtcblxuICAgICAgICBwcml2YXRlIHRpdGxlRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSByb3RhdGVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcml2YXRlIGZpbHRlckJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSBzaGFyZUJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgICAgICBwcml2YXRlIHZlaGljbGVEZXRhaWxzOlZlaGljbGVEZXRhaWxzO1xuXG4gICAgICAgIHByaXZhdGUgdGFiczoge1xuICAgICAgICAgICAgW2tleSBpbiBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c106IFRhYjtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyOmN1c3RvbWl6YXRpb25Db21wb25lbnRLZXlzW10gPSBbJ3BhaW50JywgJ3doZWVscycsICd0aXJlcycsICdzdXNwZW5zaW9uJ107XG4gICAgICAgIFxuICAgICAgICBwcml2YXRlIGN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudHM6e1xuICAgICAgICAgICAgcGFpbnQ6IFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3I7XG4gICAgICAgICAgICB3aGVlbHM6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsU2VsZWN0b3I7XG4gICAgICAgICAgICB0aXJlczogUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yO1xuICAgICAgICAgICAgc3VzcGVuc2lvbjogUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yO1xuICAgICAgICB9O1xuXG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzOiB7XG4gICAgICAgICAgICBba2V5IGluIGN1c3RvbWl6YXRpb25Db21wb25lbnRLZXlzXTogQ3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzO1xuICAgICAgICB9ID0ge1xuICAgICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC1wYWludCcpLFxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3aGVlbHM6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC13aGVlbHMnKSxcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aXJlczoge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXRpcmVzJyksXG4gICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VzcGVuc2lvbjoge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldFN0cmluZygnYWRqdXN0LXN1c3BlbnNpb24nKSxcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHJlc3VsdHNBcnI6QXJyYXk8YW55PiA9IFtdO1xuXG4gICAgICAgIHByaXZhdGUgY29tcG9uZW50czpJQ29tcG9uZW50W107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmVoaWNsZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOnN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIHZlaGljbGVcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZURlc2NyaXB0aW9uOnN0cmluZztcblxuICAgICAgICBwcml2YXRlIHRhcmdldERpYW1ldGVyOm51bWJlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIEltYWdlIFR5cGUgZm9yIGRpc3BsYXlpbmcgd2hhdCBhbmdsZSB0aGUgY2FyIGlzIGJlaW5nIHZpZXdlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBpbWFnZVR5cGU6cmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgT0UgdGlyZSBvcHRpb24gZm9yIHRoZSB2ZWhpY2xlXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVUaXJlT3B0aW9uSUQ6c3RyaW5nOyBcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZXNjcmlwdGlvbiBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIE9FIHRpcmUgb3B0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246c3RyaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IHNlbGVjdGVkIE9FIHRpcmUgb3B0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVUaXJlT3B0aW9uOnJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb25Nb2RlbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRlc2NyaXB0aW9uIG1vZGVsIG9mIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIHZlaGljbGUsXG4gICAgICAgICAqIGxvYWRlZCBmcm9tIHRoZSBBUElcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVEZXNjcmlwdGlvbk1vZGVsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVuZGVyIGluc3RydWN0aW9ucyBmb3IgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmVoaWNsZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zOiByaWRlc3R5bGVyLlJlcXVlc3RzLlZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM7XG5cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGluaXRpYWxpemF0aW9uIGJlZm9yZSBjcmVhdGluZyB0aGUgdmlld3BvcnQgYmVjYXVzZSBpdCBkZXRlY3RzXG4gICAgICAgICAgICAvLyB0aGUgb2Zmc2V0IHBvc2l0aW9uaW5nIG9mIHRoZSB2aWV3cG9ydCBlbGVtZW50IHdoZW4gY3JlYXRlZCBhbmQgb3VyIENTU1xuICAgICAgICAgICAgLy8gaXNuJ3QgZ3VhcmFudGVlZCB0byBiZSBsb2FkZWQgdW50aWwgdGhlIGluaXRpYWxpemVkIGV2ZW50XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdpbml0aWFsaXplZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgaW5pdGlhbCB0YWIgbGF5b3V0XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcblxuICAgICAgICAgICAgICAgIC8vQ2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhIHZlaGljbGUgaW4gdGhlIHVybCBhbmQgcGFyc2VzIHRoZSBkYXRhIHRvIG1ha2UgdGhlIEFQSSBjYWxsc1xuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2guaW5kZXhPZignVmVoaWNsZUNvbmZpZ3VyYXRpb24nKSAhPT0gLTEgKSB7ICAgICBcbiAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRVcmxEYXRhKHRoaXMucGFyYW1ldGVycy5nZXQoKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ3ZlaGljbGUtc2VsZWN0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnQuUmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2hhcmUgYnV0dG9uIGlmIHNoYXJpbmcgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvd2Nhc2Uuc2V0dGluZ3NGcm9tQVBJLkVuYWJsZVNoYXJpbmcpXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50VGlyZUJyYW5kcyA9IGFwaS5yZXF1ZXN0KFwidGlyZS9jb3VudGJyYW5kc1wiLCB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgICAgICBsZXQgY291bnRXaGVlbEJyYW5kcyA9IGFwaS5yZXF1ZXN0KFwid2hlZWwvY291bnRicmFuZHNcIiwgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xuXG4gICAgICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwoW2NvdW50VGlyZUJyYW5kcywgY291bnRXaGVlbEJyYW5kc10pLmRvbmUocmVzdWx0cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aXJlQnJhbmRDb3VudCA9IHJlc3VsdHNbMF0uQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEJyYW5kQ291bnQgPSByZXN1bHRzWzFdLkNvdW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGlyZUJyYW5kQ291bnQpIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLnRpcmVzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aGVlbEJyYW5kQ291bnQpIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLndoZWVscy5lbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5zZXR1cFRhYnMoKTtcblxuICAgICAgICAgICAgICAgIC8vU2V0cyB0aGUgZGlhbWV0ZXIgdG8gc3RhdGUsIHVwZGF0ZXMgdGhlIHZpZXdwb3J0LCBhbmQgcHVzaGVzIHRoZSBkZXNjcmlwdGlvbiB0byB0aGUgdXJsXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZSA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5vcHRpb25TZWxlY3RlZENhbGxiYWNrID0gbmV3T3B0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiBuZXdPcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiBuZXdPcHRpb24uV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscyA9IG5ldyBWZWhpY2xlRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBuZXcgV2hlZWxEZXRhaWxzKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIG5ldyBUaXJlRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhcixcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjdXN0b21pemF0aW9uc0NsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEFwcGVuZCBhbnkgc3ViIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChjb21wb25lbnQuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1yb3RhdGUtdmVoaWNsZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdmaWx0ZXItcmVzdWx0cycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbm55OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbHRlcnMoKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGxldCBzaGFyZUJ1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNoYXJlLW15LXZlaGljbGUtYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2hhcmUtbXktdmVoaWNsZScpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAnMSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2hhcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwodGhpcy5zaG93Y2FzZSwgdGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zKS5zaG93KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2Uoc3RhdGVEYXRhID0+IHtcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5kaXNhYmxlZCA9IHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvLyBTdGFydCBsaXN0ZW5pbmcgZm9yIHJlc2l6ZSBldmVudHNcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciBicmVha3BvaW50IGNoYW5nZXNcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdicmVha3BvaW50LWNoYW5nZWQnLCBuZXdCcmVha3BvaW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudmVoaWNsZURldGFpbHMucGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2V0dXBWaWV3cG9ydChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgdmlld3BvcnRFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS12aWV3cG9ydCcsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IGNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZpZXdwb3J0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEFuZ2xlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydCA9IG5ldyBSaWRlU3R5bGVyVmlld3BvcnQodmlld3BvcnRFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5wb3BFdmVudExpc3RlbmVyKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy90YWtlcyBpbiB0aGUgVVJMIGRhdGEgYW5kIHJldHVybnMgYW4gdXBkYXRlZCBWaWV3cG9ydFxuICAgICAgICBwcml2YXRlIGxvYWRVcmxEYXRhKHVybE9iamVjdCkge1xuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgbGV0IERlc2NyaXB0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogZnVuY3Rpb24odmVoaWNsZVNlbGVjdEFyZ3MpIHsgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldGRlc2NyaXB0aW9uc1wiLCB7IFZlaGljbGVDb25maWd1cmF0aW9uOiB1cmxPYmplY3QuVmVoaWNsZUNvbmZpZ3VyYXRpb24gfSk7IFxuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5EZXNjcmlwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlZlaGljbGVDb25maWd1cmF0aW9uID0gci5EZXNjcmlwdGlvbnNbMF0uQ29uZmlndXJhdGlvbklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlZlaGljbGVEZXNjcmlwdGlvbiA9IHIuRGVzY3JpcHRpb25zWzBdLkZ1bGxEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBUaXJlT3B0aW9uSUQ6ICBmdW5jdGlvbih2ZWhpY2xlU2VsZWN0QXJncykgeyBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBhcGkucmVxdWVzdCgndmVoaWNsZS9nZXR0aXJlb3B0aW9uZGV0YWlscycsIHtWZWhpY2xlQ29uZmlndXJhdGlvbjogdXJsT2JqZWN0LlZlaGljbGVDb25maWd1cmF0aW9ufSk7IFxuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5EZXRhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5UaXJlT3B0aW9uSUQgPSByLkRldGFpbHNbMF0uVGlyZU9wdGlvbklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlRpcmVPcHRpb25TdHJpbmcgPSByLkRldGFpbHNbMF0uRnJvbnQuRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC50YXJnZXREaWFtZXRlciA9IHIuRGV0YWlsc1swXS5Gcm9udC5JbnNpZGVEaWFtZXRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBUaXJlTW9kZWxJRDogIGZ1bmN0aW9uKHZlaGljbGVTZWxlY3RBcmdzKSB7IFxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IGFwaS5yZXF1ZXN0KFwidGlyZS9nZXRtb2RlbGRlc2NyaXB0aW9uc1wiLCB7VGlyZU1vZGVsOiB1cmxPYmplY3QuVGlyZU1vZGVsSUR9KTtcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5jdXJyZW50VGlyZSA9IHIuTW9kZWxzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlOyBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFBhaW50TmFtZTogIGZ1bmN0aW9uKHZlaGljbGVTZWxlY3RBcmdzKSB7IFxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IGFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRwYWludHNjaGVtZWRlc2NyaXB0aW9uc1wiLCB7VmVoaWNsZVBhaW50U2NoZW1lOiB1cmxPYmplY3QuUGFpbnRTY2hlbWV9KTsgXG5cbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuU3VjY2VzcyAmJiByLlNjaGVtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgc2NoZW1lIG9mIHIuU2NoZW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1lLlNjaGVtZU5hbWUgPT0gdXJsT2JqZWN0LlBhaW50TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuUGFpbnRTY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogIGZ1bmN0aW9uKHZlaGljbGVTZWxlY3RBcmdzKSB7IFxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwge1doZWVsTW9kZWw6IHVybE9iamVjdC5XaGVlbE1vZGVsfSk7IFxuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLmN1cnJlbnRXaGVlbCA9IHIuTW9kZWxzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnRzOiAgZnVuY3Rpb24odmVoaWNsZVNlbGVjdEFyZ3MpIHsgXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9taXNlID0gYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRmaXRtZW50ZGVzY3JpcHRpb25zXCIsIHtWZWhpY2xlQ29uZmlndXJhdGlvbjogdXJsT2JqZWN0LlZlaGljbGVDb25maWd1cmF0aW9uLCBXaGVlbE1vZGVsOiB1cmxPYmplY3QuV2hlZWxNb2RlbH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZ2V0QmVzdEZpdG1lbnQodXJsT2JqZWN0LCByKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudElEOiAgZnVuY3Rpb24odmVoaWNsZVNlbGVjdEFyZ3MpIHsgXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9taXNlID0gYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRmaXRtZW50ZGVzY3JpcHRpb25zXCIsIHtXaGVlbEZpdG1lbnRzOiB1cmxPYmplY3QuV2hlZWxGaXRtZW50SUR9KTsgXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuU3VjY2VzcyAmJiByLkZpdG1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLmN1cnJlbnRXaGVlbEZpdG1lbnQgPSByLkZpdG1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hY3RpdmVXaGVlbERpYW1ldGVyU2VsZWN0KHIpO1xuICAgICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9taXNlQnVpbGRlcih1cmxPYmplY3QsIERlc2NyaXB0aW9ucyk7XG4gICAgICAgIH0gICAgXG5cbiAgICAgICAgcHJpdmF0ZSBwcm9taXNlQnVpbGRlcih1cmxPYmplY3QsIERlc2NyaXB0aW9ucyl7XG4gICAgICAgICAgICBsZXQgcHJvbUFyciA9IFtdO1xuICAgICAgICAgICAgbGV0IHZlaGljbGVTZWxlY3RBcmdzID0ge1xuICAgICAgICAgICAgICAgIEltYWdlVXJsOiAnJyxcbiAgICAgICAgICAgICAgICBjdXJyZW50U3VzcGVuc2lvbjogTnVtYmVyKHVybE9iamVjdC5TdXNwZW5zaW9uKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIERlc2NyaXB0aW9ucykgeyAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh1cmxPYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9tQXJyLnB1c2goRGVzY3JpcHRpb25zW2tleV0odmVoaWNsZVNlbGVjdEFyZ3MpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSAnV2hlZWxNb2RlbCcpIHByb21BcnIucHVzaChEZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50cyh2ZWhpY2xlU2VsZWN0QXJncykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwocHJvbUFycikuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1zZWxlY3RlZFwiLCB2ZWhpY2xlU2VsZWN0QXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBcblxuICAgICAgICAvL1JlbW92ZXMgdGhlIGFjdGl2ZSBjbGFzcyBpbiB0aGUgJ3doZWVsIHNpemUnIHRhYlxuICAgICAgICAvL2FwcGVuZHMgaXQgdG8gdGhlIHByb3BlciBlbGVtZW50IGFuZCB1cGRhdGVzIHRoZSBzdGF0ZVxuICAgICAgICBwdWJsaWMgYWN0aXZlV2hlZWxEaWFtZXRlclNlbGVjdChyZXN1bHRzKXtcbiAgICAgICAgICAgIGxldCBjdXJyZW50V2hlZWxEaWFtZXRlciA9ICFyZXN1bHRzID8gdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1pbiArICfigLMnIDogcmVzdWx0cy5GaXRtZW50c1swXS5EaWFtZXRlck1pbiArICfigLMnO1xuICAgICAgICAgICAgbGV0IHdoZWVsU2l6ZUFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYnV0dG9uLXBpY2tlci1vcHRpb24tYWN0aXZlJylbMF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdoZWVsU2l6ZUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXItb3B0aW9uLWFjdGl2ZScpOyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB3aGVlbFNpemVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbicpXG4gICAgICAgICAgICBsZXQgY3VycmVudFNpemU7IFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdoZWVsU2l6ZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKHdoZWVsU2l6ZUxpc3RbaV0uaW5uZXJIVE1MID09PSBjdXJyZW50V2hlZWxEaWFtZXRlcikge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTaXplID0gd2hlZWxTaXplTGlzdFtpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6ICFyZXN1bHRzID8gdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsRml0bWVudCA6IHJlc3VsdHMuRml0bWVudHNbMF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjdXJyZW50U2l6ZS5jbGFzc0xpc3QuYWRkKCdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXItb3B0aW9uLWFjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVUYWJzKCkge1xuICAgICAgICAgICAgbGV0IHRhYnM6VGFiW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50T3JkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGRpc2FibGVkIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzW2tleV0uZW5hYmxlZCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICB0YWJzLnB1c2godGhpcy50YWJzW2tleV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRUYWJzKHRhYnMpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlVGFiTGF5b3V0KCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEJyZWFrcG9pbnQgPSB0aGlzLnNob3djYXNlLnN0eWxlLmdldEN1cnJlbnRCcmVha3BvaW50KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGhvcml6b250YWw6Ym9vbGVhbiA9IGN1cnJlbnRCcmVha3BvaW50ICYmIGN1cnJlbnRCcmVha3BvaW50WzBdID09PSAncGhvbmUtcG9ydHJhaXQnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRNb2RlKGhvcml6b250YWwgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2V0dXBUYWJzKCkge1xuICAgICAgICAgICAgdGhpcy50YWJCYXIgID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhcih0aGlzLnNob3djYXNlKTtcblxuICAgICAgICAgICAgLy8gRGVmaW5lIG91ciB0YWJzXG4gICAgICAgICAgICB0aGlzLnRhYnMgPSB7XG4gICAgICAgICAgICAgICAgcGFpbnQ6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3BhaW50JyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFpbnQnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3BhaW50JylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB3aGVlbHM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3doZWVsJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWxzJyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCd3aGVlbHMnKVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRpcmVzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICd0aXJlJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZXMnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3RpcmVzJylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdzdXNwZW5zaW9uJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnc3VzcGVuc2lvbicsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0aGUgYm90dG9tIHZpZXcsIHRoZSBjdXN0b21pemF0aW9uIGNvbXBvbmVudCB3aGVuIGEgdGFiIGlzIGNsaWNrZWQgb25cbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnRhYlN3aXRjaGVkQ2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWIgPSBlLm5ld1RhYjtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBuZXdUYWIua2V5O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzICYmIGtleSBpbiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBpZiAoIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCB8fCAhc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIHNob3cgdGhlIHZpc3VhbGl6ZSBzY3JlZW4gd2l0aG91dCBhIHZlaGljbGUgY29uZmlndXJhdGlvbiBvciB0aXJlIG9wdGlvbi4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHZlaGljbGVDaGFuZ2VkID0gIUdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklELCB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQpO1xuICAgICAgICAgICAgbGV0IHRpcmVPcHRpb25DaGFuZ2VkID0gIUdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklELCB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQpO1xuXG4gICAgICAgICAgICByZXR1cm4gdmVoaWNsZUNoYW5nZWQgfHwgdGlyZU9wdGlvbkNoYW5nZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgb25EaXNwbGF5KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmVoaWNsZURpZmZlcmVudEZyb21TdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRFxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb247ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb24gPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIuY2xlYXJBY3RpdmVUYWIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVmVoaWNsZUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvblZlaGljbGVDaGFuZ2VkKCkge1xuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIpO1xuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGN1c3RvbWl6YXRpb24gY29udGFpbmVyIGFzIGxvYWRpbmcgd2hpbGUgd2UncmUgbG9hZGluZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gICAgICAgICAgICAvLyBhYm91dCB0aGUgdmVoaWNsZVxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQobG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XG5cbiAgICAgICAgICAgIC8vIERlc2VsZWN0IGFueSBhY3RpdmUgdGFiXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xuXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcblxuICAgICAgICAgICAgLy8gTG9hZCB0aGUgdmVoaWNsZSdzIGRlc2NyaXB0aW9uIG1vZGVsXG4gICAgICAgICAgICBsZXQgZ2V0VmVoaWNsZURlc2NyaXB0aW9uID0gYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldGRlc2NyaXB0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAgQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBnZXRWZWhpY2xlVGlyZU9wdGlvbiA9IGFwaS5yZXF1ZXN0KCd2ZWhpY2xlL2dldHRpcmVvcHRpb25kZXRhaWxzJywge1xuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSURcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBQcm9taXNlSGVscGVyLmFsbChbZ2V0VmVoaWNsZURlc2NyaXB0aW9uLCBnZXRWZWhpY2xlVGlyZU9wdGlvbl0pLmRvbmUocmVzcG9uc2VzID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCA9IHJlc3BvbnNlc1swXS5EZXNjcmlwdGlvbnNbMF07XG4gICAgICAgICAgICAgICAgbGV0IHZlaGljbGVUaXJlT3B0aW9uOnJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRUaXJlT3B0aW9uSUQ6R3VpZCA9IEdVSURIZWxwZXIucGFyc2UodGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEKTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHRpcmVPcHRpb24gb2YgcmVzcG9uc2VzWzFdLkRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEdVSURIZWxwZXIuYXJlRXF1YWwodGlyZU9wdGlvbi5UaXJlT3B0aW9uSUQsIHNlbGVjdGVkVGlyZU9wdGlvbklEKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlVGlyZU9wdGlvbiA9IHRpcmVPcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb24gPSB2ZWhpY2xlVGlyZU9wdGlvbjtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlLFxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiB2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdmVoaWNsZVRpcmVPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogdmVoaWNsZURlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplRm9yTmV3VmVoaWNsZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoXCJ2ZWhpY2xlLWRlc2NyaXB0aW9uLWxvYWRlZFwiLCB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0QWN0aXZlVGFiKHRoaXMudGFicy5wYWludCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29tcG9uZW50cyB0aGF0IHdpbGwgYmUgc3dpdGNoZWQgd2l0aCB0aGUgdGFic1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cyA9IHtcbiAgICAgICAgICAgICAgICBwYWludDogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgd2hlZWxzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3Rvcih0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB0aXJlczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3Rvcih0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRGaWx0ZXJzKHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMuZ2V0RmlsdGVycygpKTtcblxuICAgICAgICAgICAgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5vbkZpbHRlcnNDaGFuZ2VkID0gZmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycy5vbkZpbHRlcnNDaGFuZ2VkID0gZmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5vblBhaW50U2NoZW1lU2VsZWN0ZWQgPSBwYWludFNjaGVtZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtjdXJyZW50UGFpbnRTY2hlbWU6IHBhaW50U2NoZW1lfSlcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtQYWludENvbG9yOiBwYWludFNjaGVtZS5Db2xvcnNbMF0uSGV4fSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjYW5SZW5kZXJPbkN1cnJlbnRBbmdsZSA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGUgJiYgbW9kZWwuSGFzQW5nbGVJbWFnZSB8fFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9PT0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLlNpZGUgJiYgbW9kZWwuSGFzU2lkZUltYWdlO1xuICAgICAgICAgICAgICAgIGlmICghY2FuUmVuZGVyT25DdXJyZW50QW5nbGUpIHRoaXMuc3dpdGNoQW5nbGUoKTtcblxuICAgICAgICAgICAgICAgIGFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRmaXRtZW50ZGVzY3JpcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklELFxuICAgICAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBtb2RlbC5XaGVlbE1vZGVsSUQsXG4gICAgICAgICAgICAgICAgICAgIEluY2x1ZGVQcmljaW5nOiB0cnVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZG9uZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXRtZW50czpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsW10gPSByZXNwb25zZS5GaXRtZW50cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJlc3RGaXRtZW50OnJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXREaWFtZXRlciA9IHRoaXMudmVoaWNsZVRpcmVPcHRpb24uRnJvbnQuSW5zaWRlRGlhbWV0ZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSxiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhRGlmZiA9IE1hdGguYWJzKGEuRGlhbWV0ZXJNaW4gLSB0YXJnZXREaWFtZXRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiRGlmZiA9IE1hdGguYWJzKGIuRGlhbWV0ZXJNaW4gLSB0YXJnZXREaWFtZXRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhRGlmZiAtIGJEaWZmO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBiZXN0Rml0bWVudCA9IGZpdG1lbnRzWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWw6IG1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsRml0bWVudDogYmVzdEZpdG1lbnRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplLnNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzLCBiZXN0Rml0bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplLmNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiBiZXN0Rml0bWVudC5XaGVlbEZpdG1lbnRJRFxuICAgICAgICAgICAgICAgICAgICB9KS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpKTsgICBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPSBtb2RlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IG1vZGVsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMuc3VzcGVuc2lvbi5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPSByZW5kZXJVcGRhdGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7Y3VycmVudFN1c3BlbnNpb246IHJlbmRlclVwZGF0ZS5TdXNwZW5zaW9uIH0pXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydChyZW5kZXJVcGRhdGUpXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5zdGF0ZS5nZXREYXRhKCkyJywgdGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY3VzdG9taXphdGlvbkNvbXBvbmVudCBvZiBPYmplY3RIZWxwZXIuZ2V0VmFsdWVzPElDb21wb25lbnQ+KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMpKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5hcHBlbmRDaGlsZChjdXN0b21pemF0aW9uQ29tcG9uZW50LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzQW5nbGVkSW1hZ2UpIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLlNpZGU7XG5cbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdGhpcy5jYW5Td2l0Y2hBbmdsZSgpID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHsgXG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcbiAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6ICFzdGF0ZURhdGEuY3VycmVudFdoZWVsRml0bWVudCA/IHVuZGVmaW5lZCA6IHN0YXRlRGF0YS5jdXJyZW50V2hlZWxGaXRtZW50LldoZWVsRml0bWVudElELFxuICAgICAgICAgICAgICAgIFBhaW50Q29sb3I6ICFzdGF0ZURhdGEuY3VycmVudFBhaW50U2NoZW1lID8gdW5kZWZpbmVkIDogc3RhdGVEYXRhLmN1cnJlbnRQYWludFNjaGVtZS5Db2xvcnNbMF0uSGV4LFxuICAgICAgICAgICAgICAgIFZlaGljbGVUaXJlT3B0aW9uOiB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQsXG4gICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkZhcixcbiAgICAgICAgICAgICAgICBTdXNwZW5zaW9uOiAhc3RhdGVEYXRhLmN1cnJlbnRTdXNwZW5zaW9uID8gdW5kZWZpbmVkIDogc3RhdGVEYXRhLmN1cnJlbnRTdXNwZW5zaW9uLFxuICAgICAgICAgICAgICAgIFR5cGU6IHRoaXMuaW1hZ2VUeXBlXG4gICAgICAgICAgICB9KS5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShsb2FkaW5nQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBhY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50OklDb21wb25lbnQ7XG4gICAgICAgIHByaXZhdGUgc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudChjdXN0b21pemF0aW9uQ29tcG9uZW50OklDb21wb25lbnQpIHtcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgIGxldCBjb21wb25lbnRLZXk6c3RyaW5nID0gdGhpcy5nZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBzZXR0aW5nczpDdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3MgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgbGV0IHRhYjpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiID0gdGhpcy50YWJzW2NvbXBvbmVudEtleV07XG5cbiAgICAgICAgICAgIGlmICh0YWIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRBY3RpdmVUYWIodGFiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9IGN1c3RvbWl6YXRpb25Db21wb25lbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGN1c3RvbWl6YXRpb25Db21wb25lbnQgYXMgUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCkudXBkYXRlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIChjdXN0b21pemF0aW9uQ29tcG9uZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQpLnVwZGF0ZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9IFxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQgaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yICYmIHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgPyBcbiAgICAgICAgICAgICAgICAnJyA6ICdub25lJztcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9IHNldHRpbmdzLnNob3dGaWx0ZXJCdXR0b24gPyAnJyA6ICdub25lJztcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMudGl0bGVFbGVtZW50LCBzZXR0aW5ncy50aXRsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50OklDb21wb25lbnQpOnN0cmluZyB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzW2tleV07XG5cbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50ID09PSBjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVWaWV3cG9ydChpbnN0cnVjdGlvbnM/OnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykge1xuICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0LlVwZGF0ZShpbnN0cnVjdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjYW5Td2l0Y2hBbmdsZSgpOmJvb2xlYW4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzQW5nbGVkSW1hZ2UgJiYgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNTaWRlSW1hZ2UgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9SZXR1cm5zIGZpdG1lbnRzIGZvciB3aGVlbCBzdGF0ZVxuICAgICAgICBwcml2YXRlIGdldEJlc3RGaXRtZW50KHVybE9iamVjdCwgcmVzdWx0cyl7ICAgICAgICBcbiAgICAgICAgICAgIGxldCBmaXRtZW50czpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsW10gPSByZXN1bHRzLkZpdG1lbnRzO1xuICAgICAgICAgICAgbGV0IGJlc3RGaXRtZW50OnJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZpdG1lbnRzLnNvcnQoZnVuY3Rpb24gKGEsYikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFEaWZmID0gTWF0aC5hYnMoYS5EaWFtZXRlck1pbiAtIHRoaXMudGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJEaWZmID0gTWF0aC5hYnMoYi5EaWFtZXRlck1pbiAtIHRoaXMudGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhRGlmZiAtIGJEaWZmO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJlc3RGaXRtZW50ID0gZml0bWVudHNbMF07XG5cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplLnNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzLCBiZXN0Rml0bWVudCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzaG93RmlsdGVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ7XG4gICAgICAgICAgICBsZXQgZmlsdGVyTW9kYWw6UmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWw8YW55LCBhbnk+O1xuXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcykge1xuICAgICAgICAgICAgICAgIGZpbHRlck1vZGFsID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsKHRoaXMuc2hvd2Nhc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUHJvdmlkZXI6IHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXRpcmVzJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q291bnRUZXh0Rm9ybWF0OiBzdHJpbmdzLmdldFN0cmluZygnc2hvdy1jb3VudC1mb3JtYXQtd2hlZWxzJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpbHRlck1vZGFsKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9DaG5hZ2VzIGFuZ2xlZCB2aWV3IG9mIHZlaGljbGVcbiAgICAgICAgcHJpdmF0ZSBzd2l0Y2hBbmdsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5Td2l0Y2hBbmdsZSgpIHx8IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbC5IYXNTaWRlSW1hZ2UgPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlVHlwZSA9PT0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5TaWRlOyAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcmZhY2UgQ3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzIHtcbiAgICAgICAgdGl0bGU6c3RyaW5nO1xuICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBib29sZWFuO1xuICAgICAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIH1cbn0iLCJ2YXIgUmlkZVN0eWxlclNob3djYXNlO1xuKGZ1bmN0aW9uIChSaWRlU3R5bGVyU2hvd2Nhc2UpIHtcbiAgICBjb25zdCBjdXN0b21pemF0aW9uc0NsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbnMnO1xuICAgIGNvbnN0IGxvYWRpbmdDbGFzcyA9IGN1c3RvbWl6YXRpb25zQ2xhc3MgKyAnLWxvYWRpbmcnO1xuICAgIGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlLk1haW5Db21wb25lbnRCYXNlIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0b3IgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50T3JkZXIgPSBbJ3BhaW50JywgJ3doZWVscycsICd0aXJlcycsICdzdXNwZW5zaW9uJ107XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICBwYWludDoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3QtcGFpbnQnKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdoZWVsczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3Qtd2hlZWxzJyksXG4gICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRpcmVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC10aXJlcycpLFxuICAgICAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FkanVzdC1zdXNwZW5zaW9uJyksXG4gICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0c0FyciA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgLy8gV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gYmVmb3JlIGNyZWF0aW5nIHRoZSB2aWV3cG9ydCBiZWNhdXNlIGl0IGRldGVjdHNcbiAgICAgICAgICAgIC8vIHRoZSBvZmZzZXQgcG9zaXRpb25pbmcgb2YgdGhlIHZpZXdwb3J0IGVsZW1lbnQgd2hlbiBjcmVhdGVkIGFuZCBvdXIgQ1NTXG4gICAgICAgICAgICAvLyBpc24ndCBndWFyYW50ZWVkIHRvIGJlIGxvYWRlZCB1bnRpbCB0aGUgaW5pdGlhbGl6ZWQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdpbml0aWFsaXplZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAvLyBTZXR1cCBpbml0aWFsIHRhYiBsYXlvdXRcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICAgICAgICAgIC8vQ2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhIHZlaGljbGUgaW4gdGhlIHVybCBhbmQgcGFyc2VzIHRoZSBkYXRhIHRvIG1ha2UgdGhlIEFQSSBjYWxsc1xuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2guaW5kZXhPZignVmVoaWNsZUNvbmZpZ3VyYXRpb24nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVXJsRGF0YSh0aGlzLnBhcmFtZXRlcnMuZ2V0KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vbigndmVoaWNsZS1zZWxlY3RlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmVoaWNsZURpZmZlcmVudEZyb21TdGF0ZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5SZXNldCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEhpZGUgdGhlIHNoYXJlIGJ1dHRvbiBpZiBzaGFyaW5nIGlzIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3djYXNlLnNldHRpbmdzRnJvbUFQSS5FbmFibGVTaGFyaW5nKVxuICAgICAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudFRpcmVCcmFuZHMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudFdoZWVsQnJhbmRzID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwid2hlZWwvY291bnRicmFuZHNcIiwgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLmFsbChbY291bnRUaXJlQnJhbmRzLCBjb3VudFdoZWVsQnJhbmRzXSkuZG9uZShyZXN1bHRzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpcmVCcmFuZENvdW50ID0gcmVzdWx0c1swXS5Db3VudDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdoZWVsQnJhbmRDb3VudCA9IHJlc3VsdHNbMV0uQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGlyZUJyYW5kQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy50aXJlcy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2hlZWxCcmFuZENvdW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3Mud2hlZWxzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBUYWJzKCk7XG4gICAgICAgICAgICAvL1NldHMgdGhlIGRpYW1ldGVyIHRvIHN0YXRlLCB1cGRhdGVzIHRoZSB2aWV3cG9ydCwgYW5kIHB1c2hlcyB0aGUgZGVzY3JpcHRpb24gdG8gdGhlIHVybFxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSh0aGlzLnNob3djYXNlKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplLm9wdGlvblNlbGVjdGVkQ2FsbGJhY2sgPSBuZXdPcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IG5ld09wdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoe1xuICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6IG5ld09wdGlvbi5XaGVlbEZpdG1lbnRJRFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVEZXRhaWxzID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5WZWhpY2xlRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlLldoZWVsRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlLlRpcmVEZXRhaWxzKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3VzdG9taXphdGlvbnNDbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQXBwZW5kIGFueSBzdWIgY29tcG9uZW50c1xuICAgICAgICAgICAgZm9yIChsZXQgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb24tY29tcG9uZW50LXRpdGxlLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudC10aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnZmlsdGVyLXJlc3VsdHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5ueTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RmlsdGVycygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgc2hhcmVCdXR0b24gPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hhcmUtbXktdmVoaWNsZS1idXR0b24nLFxuICAgICAgICAgICAgICAgIHRleHQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2hhcmUtbXktdmVoaWNsZScpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAnMSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNoYXJlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbCh0aGlzLnNob3djYXNlLCB0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMpLnNob3coKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2Uoc3RhdGVEYXRhID0+IHtcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5kaXNhYmxlZCA9IHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGxpc3RlbmluZyBmb3IgcmVzaXplIGV2ZW50c1xuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ3Jlc2l6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciBicmVha3BvaW50IGNoYW5nZXNcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdicmVha3BvaW50LWNoYW5nZWQnLCBuZXdCcmVha3BvaW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnZlaGljbGVEZXRhaWxzLnBhaW50U3dhdGNoQ2xpY2tDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHNldHVwVmlld3BvcnQoY29udGFpbmVyKSB7XG4gICAgICAgICAgICBsZXQgdmlld3BvcnRFbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utdmlld3BvcnQnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBjb250YWluZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmlld3BvcnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydCA9IG5ldyBSaWRlU3R5bGVyVmlld3BvcnQodmlld3BvcnRFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5wb3BFdmVudExpc3RlbmVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vdGFrZXMgaW4gdGhlIFVSTCBkYXRhIGFuZCByZXR1cm5zIGFuIHVwZGF0ZWQgVmlld3BvcnRcbiAgICAgICAgbG9hZFVybERhdGEodXJsT2JqZWN0KSB7XG4gICAgICAgICAgICBsZXQgY29udGV4dCA9IHRoaXM7XG4gICAgICAgICAgICBsZXQgRGVzY3JpcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiBmdW5jdGlvbiAodmVoaWNsZVNlbGVjdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldGRlc2NyaXB0aW9uc1wiLCB7IFZlaGljbGVDb25maWd1cmF0aW9uOiB1cmxPYmplY3QuVmVoaWNsZUNvbmZpZ3VyYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5EZXNjcmlwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlZlaGljbGVDb25maWd1cmF0aW9uID0gci5EZXNjcmlwdGlvbnNbMF0uQ29uZmlndXJhdGlvbklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlZlaGljbGVEZXNjcmlwdGlvbiA9IHIuRGVzY3JpcHRpb25zWzBdLkZ1bGxEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgVGlyZU9wdGlvbklEOiBmdW5jdGlvbiAodmVoaWNsZVNlbGVjdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3ZlaGljbGUvZ2V0dGlyZW9wdGlvbmRldGFpbHMnLCB7IFZlaGljbGVDb25maWd1cmF0aW9uOiB1cmxPYmplY3QuVmVoaWNsZUNvbmZpZ3VyYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5EZXRhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5UaXJlT3B0aW9uSUQgPSByLkRldGFpbHNbMF0uVGlyZU9wdGlvbklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlRpcmVPcHRpb25TdHJpbmcgPSByLkRldGFpbHNbMF0uRnJvbnQuRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC50YXJnZXREaWFtZXRlciA9IHIuRGV0YWlsc1swXS5Gcm9udC5JbnNpZGVEaWFtZXRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgVGlyZU1vZGVsSUQ6IGZ1bmN0aW9uICh2ZWhpY2xlU2VsZWN0QXJncykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInRpcmUvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwgeyBUaXJlTW9kZWw6IHVybE9iamVjdC5UaXJlTW9kZWxJRCB9KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuU3VjY2VzcyAmJiByLk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuY3VycmVudFRpcmUgPSByLk1vZGVsc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgUGFpbnROYW1lOiBmdW5jdGlvbiAodmVoaWNsZVNlbGVjdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldHBhaW50c2NoZW1lZGVzY3JpcHRpb25zXCIsIHsgVmVoaWNsZVBhaW50U2NoZW1lOiB1cmxPYmplY3QuUGFpbnRTY2hlbWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5TY2hlbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzY2hlbWUgb2Ygci5TY2hlbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY2hlbWUuU2NoZW1lTmFtZSA9PSB1cmxPYmplY3QuUGFpbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5QYWludFNjaGVtZSA9IHNjaGVtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBmdW5jdGlvbiAodmVoaWNsZVNlbGVjdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRtb2RlbGRlc2NyaXB0aW9uc1wiLCB7IFdoZWVsTW9kZWw6IHVybE9iamVjdC5XaGVlbE1vZGVsIH0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5jdXJyZW50V2hlZWwgPSByLk1vZGVsc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50czogZnVuY3Rpb24gKHZlaGljbGVTZWxlY3RBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9uc1wiLCB7IFZlaGljbGVDb25maWd1cmF0aW9uOiB1cmxPYmplY3QuVmVoaWNsZUNvbmZpZ3VyYXRpb24sIFdoZWVsTW9kZWw6IHVybE9iamVjdC5XaGVlbE1vZGVsIH0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldEJlc3RGaXRtZW50KHVybE9iamVjdCwgcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50SUQ6IGZ1bmN0aW9uICh2ZWhpY2xlU2VsZWN0QXJncykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcIndoZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnNcIiwgeyBXaGVlbEZpdG1lbnRzOiB1cmxPYmplY3QuV2hlZWxGaXRtZW50SUQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5GaXRtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuY3VycmVudFdoZWVsRml0bWVudCA9IHIuRml0bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hY3RpdmVXaGVlbERpYW1ldGVyU2VsZWN0KHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucHJvbWlzZUJ1aWxkZXIodXJsT2JqZWN0LCBEZXNjcmlwdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2VCdWlsZGVyKHVybE9iamVjdCwgRGVzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBsZXQgcHJvbUFyciA9IFtdO1xuICAgICAgICAgICAgbGV0IHZlaGljbGVTZWxlY3RBcmdzID0ge1xuICAgICAgICAgICAgICAgIEltYWdlVXJsOiAnJyxcbiAgICAgICAgICAgICAgICBjdXJyZW50U3VzcGVuc2lvbjogTnVtYmVyKHVybE9iamVjdC5TdXNwZW5zaW9uKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBEZXNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodXJsT2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbUFyci5wdXNoKERlc2NyaXB0aW9uc1trZXldKHZlaGljbGVTZWxlY3RBcmdzKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gJ1doZWVsTW9kZWwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbUFyci5wdXNoKERlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnRzKHZlaGljbGVTZWxlY3RBcmdzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIuYWxsKHByb21BcnIpLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZXZlbnRzLnRyaWdnZXIoXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHZlaGljbGVTZWxlY3RBcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vUmVtb3ZlcyB0aGUgYWN0aXZlIGNsYXNzIGluIHRoZSAnd2hlZWwgc2l6ZScgdGFiXG4gICAgICAgIC8vYXBwZW5kcyBpdCB0byB0aGUgcHJvcGVyIGVsZW1lbnQgYW5kIHVwZGF0ZXMgdGhlIHN0YXRlXG4gICAgICAgIGFjdGl2ZVdoZWVsRGlhbWV0ZXJTZWxlY3QocmVzdWx0cykge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRXaGVlbERpYW1ldGVyID0gIXJlc3VsdHMgPyB0aGlzLnN0YXRlLmdldERhdGEoKS5jdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWluICsgJ+KAsycgOiByZXN1bHRzLkZpdG1lbnRzWzBdLkRpYW1ldGVyTWluICsgJ+KAsyc7XG4gICAgICAgICAgICBsZXQgd2hlZWxTaXplQWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbi1hY3RpdmUnKVswXTtcbiAgICAgICAgICAgIHdoZWVsU2l6ZUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXItb3B0aW9uLWFjdGl2ZScpO1xuICAgICAgICAgICAgbGV0IHdoZWVsU2l6ZUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXItb3B0aW9uJyk7XG4gICAgICAgICAgICBsZXQgY3VycmVudFNpemU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdoZWVsU2l6ZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAod2hlZWxTaXplTGlzdFtpXS5pbm5lckhUTUwgPT09IGN1cnJlbnRXaGVlbERpYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTaXplID0gd2hlZWxTaXplTGlzdFtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6ICFyZXN1bHRzID8gdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsRml0bWVudCA6IHJlc3VsdHMuRml0bWVudHNbMF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3VycmVudFNpemUuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbi1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVUYWJzKCkge1xuICAgICAgICAgICAgbGV0IHRhYnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCBkaXNhYmxlZCBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1trZXldLmVuYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIHRhYnMucHVzaCh0aGlzLnRhYnNba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRUYWJzKHRhYnMpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVUYWJMYXlvdXQoKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QnJlYWtwb2ludCA9IHRoaXMuc2hvd2Nhc2Uuc3R5bGUuZ2V0Q3VycmVudEJyZWFrcG9pbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGhvcml6b250YWwgPSBjdXJyZW50QnJlYWtwb2ludCAmJiBjdXJyZW50QnJlYWtwb2ludFswXSA9PT0gJ3Bob25lLXBvcnRyYWl0JztcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldE1vZGUoaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCcpO1xuICAgICAgICB9XG4gICAgICAgIHNldHVwVGFicygpIHtcbiAgICAgICAgICAgIHRoaXMudGFiQmFyID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgICAgICAvLyBEZWZpbmUgb3VyIHRhYnNcbiAgICAgICAgICAgIHRoaXMudGFicyA9IHtcbiAgICAgICAgICAgICAgICBwYWludDogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3BhaW50JyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFpbnQnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdwYWludCcpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgd2hlZWxzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnd2hlZWwnLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbHMnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCd3aGVlbHMnKVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRpcmVzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAndGlyZScsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmVzJyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygndGlyZXMnKVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb246IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdzdXNwZW5zaW9uJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnc3VzcGVuc2lvbicsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3N1c3BlbnNpb24nKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gU3dpdGNoIHRoZSBib3R0b20gdmlldywgdGhlIGN1c3RvbWl6YXRpb24gY29tcG9uZW50IHdoZW4gYSB0YWIgaXMgY2xpY2tlZCBvblxuICAgICAgICAgICAgdGhpcy50YWJCYXIudGFiU3dpdGNoZWRDYWxsYmFjayA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RhYiA9IGUubmV3VGFiO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IG5ld1RhYi5rZXk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMgJiYga2V5IGluIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkge1xuICAgICAgICAgICAgbGV0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQgfHwgIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyeWluZyB0byBzaG93IHRoZSB2aXN1YWxpemUgc2NyZWVuIHdpdGhvdXQgYSB2ZWhpY2xlIGNvbmZpZ3VyYXRpb24gb3IgdGlyZSBvcHRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdmVoaWNsZUNoYW5nZWQgPSAhUmlkZVN0eWxlclNob3djYXNlLkdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklELCB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQpO1xuICAgICAgICAgICAgbGV0IHRpcmVPcHRpb25DaGFuZ2VkID0gIVJpZGVTdHlsZXJTaG93Y2FzZS5HVUlESGVscGVyLmFyZUVxdWFsKHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCwgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEKTtcbiAgICAgICAgICAgIHJldHVybiB2ZWhpY2xlQ2hhbmdlZCB8fCB0aXJlT3B0aW9uQ2hhbmdlZDtcbiAgICAgICAgfVxuICAgICAgICBvbkRpc3BsYXkoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEO1xuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEO1xuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbiA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xuICAgICAgICAgICAgICAgIHRoaXMub25WZWhpY2xlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9uVmVoaWNsZUNoYW5nZWQoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5lbXB0eSh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIpO1xuICAgICAgICAgICAgLy8gU2V0IHRoZSBjdXN0b21pemF0aW9uIGNvbnRhaW5lciBhcyBsb2FkaW5nIHdoaWxlIHdlJ3JlIGxvYWRpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICAgICAgICAgICAgLy8gYWJvdXQgdGhlIHZlaGljbGVcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGxvYWRpbmdDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYnMoKTtcbiAgICAgICAgICAgIC8vIERlc2VsZWN0IGFueSBhY3RpdmUgdGFiXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XG4gICAgICAgICAgICAvLyBMb2FkIHRoZSB2ZWhpY2xlJ3MgZGVzY3JpcHRpb24gbW9kZWxcbiAgICAgICAgICAgIGxldCBnZXRWZWhpY2xlRGVzY3JpcHRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldGRlc2NyaXB0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAgQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgZ2V0VmVoaWNsZVRpcmVPcHRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3ZlaGljbGUvZ2V0dGlyZW9wdGlvbmRldGFpbHMnLCB7XG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci5hbGwoW2dldFZlaGljbGVEZXNjcmlwdGlvbiwgZ2V0VmVoaWNsZVRpcmVPcHRpb25dKS5kb25lKHJlc3BvbnNlcyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHZlaGljbGVEZXNjcmlwdGlvbiA9IHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwgPSByZXNwb25zZXNbMF0uRGVzY3JpcHRpb25zWzBdO1xuICAgICAgICAgICAgICAgIGxldCB2ZWhpY2xlVGlyZU9wdGlvbjtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRUaXJlT3B0aW9uSUQgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuR1VJREhlbHBlci5wYXJzZSh0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHRpcmVPcHRpb24gb2YgcmVzcG9uc2VzWzFdLkRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJpZGVTdHlsZXJTaG93Y2FzZS5HVUlESGVscGVyLmFyZUVxdWFsKHRpcmVPcHRpb24uVGlyZU9wdGlvbklELCBzZWxlY3RlZFRpcmVPcHRpb25JRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uID0gdGlyZU9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb24gPSB2ZWhpY2xlVGlyZU9wdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzQW5nbGVkSW1hZ2U6IHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgdmVoaWNsZUhhc1NpZGVJbWFnZTogdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmVPcHRpb246IHZlaGljbGVUaXJlT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHZlaGljbGVEZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVGb3JOZXdWZWhpY2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsaXplRm9yTmV3VmVoaWNsZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoXCJ2ZWhpY2xlLWRlc2NyaXB0aW9uLWxvYWRlZFwiLCB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0QWN0aXZlVGFiKHRoaXMudGFicy5wYWludCk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbXBvbmVudHMgdGhhdCB3aWxsIGJlIHN3aXRjaGVkIHdpdGggdGhlIHRhYnNcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICAgICAgcGFpbnQ6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3Rvcih0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB3aGVlbHM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3Rvcih0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB0aXJlczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbjogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdXNwZW5zaW9uU2VsZWN0b3IodGhpcy5zaG93Y2FzZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRGaWx0ZXJzKHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldEZpbHRlcnMoZmlsdGVycyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLnRpcmVGaWx0ZXJzLm9uRmlsdGVyc0NoYW5nZWQgPSBmaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnRpcmVzLnNldEZpbHRlcnMoZmlsdGVycyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5vblBhaW50U2NoZW1lU2VsZWN0ZWQgPSBwYWludFNjaGVtZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHsgY3VycmVudFBhaW50U2NoZW1lOiBwYWludFNjaGVtZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHsgUGFpbnRDb2xvcjogcGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCB9KS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrID0gbW9kZWwgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5SZW5kZXJPbkN1cnJlbnRBbmdsZSA9IHRoaXMuaW1hZ2VUeXBlID09PSAyIC8qIEFuZ2xlICovICYmIG1vZGVsLkhhc0FuZ2xlSW1hZ2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPT09IDEgLyogU2lkZSAqLyAmJiBtb2RlbC5IYXNTaWRlSW1hZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFjYW5SZW5kZXJPbkN1cnJlbnRBbmdsZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xuICAgICAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgnd2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogbW9kZWwuV2hlZWxNb2RlbElELFxuICAgICAgICAgICAgICAgICAgICBJbmNsdWRlUHJpY2luZzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpdG1lbnRzID0gcmVzcG9uc2UuRml0bWVudHM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiZXN0Rml0bWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldERpYW1ldGVyID0gdGhpcy52ZWhpY2xlVGlyZU9wdGlvbi5Gcm9udC5JbnNpZGVEaWFtZXRlcjtcbiAgICAgICAgICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYURpZmYgPSBNYXRoLmFicyhhLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYkRpZmYgPSBNYXRoLmFicyhiLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFEaWZmIC0gYkRpZmY7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBiZXN0Rml0bWVudCA9IGZpdG1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsOiBtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5zZXRGaXRtZW50T3B0aW9ucyhmaXRtZW50cywgYmVzdEZpdG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogYmVzdEZpdG1lbnQuV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnRpcmVzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrID0gbW9kZWwgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaXJlOiBtb2RlbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMuc3VzcGVuc2lvbi5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPSByZW5kZXJVcGRhdGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7IGN1cnJlbnRTdXNwZW5zaW9uOiByZW5kZXJVcGRhdGUuU3VzcGVuc2lvbiB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHJlbmRlclVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuc3RhdGUuZ2V0RGF0YSgpMicsIHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMpO1xuICAgICAgICAgICAgZm9yIChsZXQgY3VzdG9taXphdGlvbkNvbXBvbmVudCBvZiBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmdldFZhbHVlcyh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIuYXBwZW5kQ2hpbGQoY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAyIC8qIEFuZ2xlICovO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlKVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gMSAvKiBTaWRlICovO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB0aGlzLmNhblN3aXRjaEFuZ2xlKCkgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoe1xuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiAhc3RhdGVEYXRhLmN1cnJlbnRXaGVlbEZpdG1lbnQgPyB1bmRlZmluZWQgOiBzdGF0ZURhdGEuY3VycmVudFdoZWVsRml0bWVudC5XaGVlbEZpdG1lbnRJRCxcbiAgICAgICAgICAgICAgICBQYWludENvbG9yOiAhc3RhdGVEYXRhLmN1cnJlbnRQYWludFNjaGVtZSA/IHVuZGVmaW5lZCA6IHN0YXRlRGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCxcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogMSAvKiBDZW50ZXIgKi8sXG4gICAgICAgICAgICAgICAgUG9zaXRpb25ZOiAyIC8qIEZhciAqLyxcbiAgICAgICAgICAgICAgICBTdXNwZW5zaW9uOiAhc3RhdGVEYXRhLmN1cnJlbnRTdXNwZW5zaW9uID8gdW5kZWZpbmVkIDogc3RhdGVEYXRhLmN1cnJlbnRTdXNwZW5zaW9uLFxuICAgICAgICAgICAgICAgIFR5cGU6IHRoaXMuaW1hZ2VUeXBlXG4gICAgICAgICAgICB9KS5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUobG9hZGluZ0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KGN1c3RvbWl6YXRpb25Db21wb25lbnQpIHtcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgIGxldCBjb21wb25lbnRLZXkgPSB0aGlzLmdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50KTtcbiAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzW2NvbXBvbmVudEtleV07XG4gICAgICAgICAgICBsZXQgdGFiID0gdGhpcy50YWJzW2NvbXBvbmVudEtleV07XG4gICAgICAgICAgICBpZiAodGFiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0QWN0aXZlVGFiKHRhYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50LmNvbXBvbmVudC5jbGFzc0xpc3QucmVtb3ZlKCdpbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9IGN1c3RvbWl6YXRpb25Db21wb25lbnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGN1c3RvbWl6YXRpb25Db21wb25lbnQudXBkYXRlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudCBpbnN0YW5jZW9mIFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yICYmIHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgP1xuICAgICAgICAgICAgICAgICAgICAnJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBzZXR0aW5ncy5zaG93RmlsdGVyQnV0dG9uID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMudGl0bGVFbGVtZW50LCBzZXR0aW5ncy50aXRsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q29tcG9uZW50S2V5KGN1c3RvbWl6YXRpb25Db21wb25lbnQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHNba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50ID09PSBjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVZpZXdwb3J0KGluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMsIGluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydC5VcGRhdGUoaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYW5Td2l0Y2hBbmdsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzU2lkZUltYWdlO1xuICAgICAgICB9XG4gICAgICAgIC8vUmV0dXJucyBmaXRtZW50cyBmb3Igd2hlZWwgc3RhdGVcbiAgICAgICAgZ2V0QmVzdEZpdG1lbnQodXJsT2JqZWN0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICBsZXQgZml0bWVudHMgPSByZXN1bHRzLkZpdG1lbnRzO1xuICAgICAgICAgICAgbGV0IGJlc3RGaXRtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFEaWZmID0gTWF0aC5hYnMoYS5EaWFtZXRlck1pbiAtIHRoaXMudGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJEaWZmID0gTWF0aC5hYnMoYi5EaWFtZXRlck1pbiAtIHRoaXMudGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhRGlmZiAtIGJEaWZmO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBiZXN0Rml0bWVudCA9IGZpdG1lbnRzWzBdO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuc2V0Rml0bWVudE9wdGlvbnMoZml0bWVudHMsIGJlc3RGaXRtZW50KTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplLmNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgc2hvd0ZpbHRlcnMoKSB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50ID0gdGhpcy5hY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50O1xuICAgICAgICAgICAgbGV0IGZpbHRlck1vZGFsO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPT09IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwodGhpcy5zaG93Y2FzZSwge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJQcm92aWRlcjogdGhpcy5zaG93Y2FzZS5maWx0ZXJzLnRpcmVGaWx0ZXJzLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q291bnRUZXh0Rm9ybWF0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXRpcmVzJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPT09IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsKHRoaXMuc2hvd2Nhc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUHJvdmlkZXI6IHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3VudFRleHRGb3JtYXQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2hvdy1jb3VudC1mb3JtYXQtd2hlZWxzJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWx0ZXJNb2RhbCkge1xuICAgICAgICAgICAgICAgIGZpbHRlck1vZGFsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL0NobmFnZXMgYW5nbGVkIHZpZXcgb2YgdmVoaWNsZVxuICAgICAgICBzd2l0Y2hBbmdsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5Td2l0Y2hBbmdsZSgpIHx8IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbC5IYXNTaWRlSW1hZ2UgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlVHlwZSA9PT0gMiAvKiBBbmdsZSAqLykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gMSAvKiBTaWRlICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gMiAvKiBBbmdsZSAqLztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoe1xuICAgICAgICAgICAgICAgIFR5cGU6IHRoaXMuaW1hZ2VUeXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlVmlzdWFsaXphdGlvbjtcbn0pKFJpZGVTdHlsZXJTaG93Y2FzZSB8fCAoUmlkZVN0eWxlclNob3djYXNlID0ge30pKTtcbiJdfQ==


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmlld3BvcnQuanMiLCJzb3VyY2VzQ29udGVudCI6W119

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseWheelModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseWheelModal, _RideStylerShowcase$R);

        function RideStylerShowcaseWheelModal(showcaseInstance, wheelModel) {
            _classCallCheck(this, RideStylerShowcaseWheelModal);

            // Image
            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseWheelModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseWheelModal)).call(this, showcaseInstance));

            _this.image.update({
                WheelFitmentResourceType: 3 /* Catalog */
                , WheelModel: wheelModel.WheelModelID
            });
            // Brand
            RideStylerShowcase.HTMLHelper.setText(_this.brandTitleElement, wheelModel.WheelBrandName);
            // Model Name
            RideStylerShowcase.HTMLHelper.setText(_this.titleElement, wheelModel.WheelModelName);
            // Finish
            RideStylerShowcase.HTMLHelper.setText(_this.subtitleElement, wheelModel.WheelModelFinishDescription);
            // Summary Table
            _this.summaryTable = new RideStylerShowcase.RideStylerShowcaseTable(_this.showcase, {
                columns: [{
                    header: RideStylerShowcase.strings.getString('size'),
                    cell: 'size'
                }, {
                    header: RideStylerShowcase.strings.getString('price'),
                    cell: 'price'
                }],
                startLoading: true
            });
            _this.summaryElement.appendChild(_this.summaryTable.component);
            _this.buildSpecsPage();
            RideStylerShowcase.api.request('wheel/getfitmentdescriptions', {
                WheelModel: wheelModel.WheelModelID,
                IncludePromotions: true,
                IncludePricing: true
            }).done(function (response) {
                _this.summaryTable.appendRows(_this.buildSummaryTable(response.Fitments));
                _this.specsTable.appendRows(response.Fitments);
            });
            return _this;
        }

        _createClass(RideStylerShowcaseWheelModal, [{
            key: 'buildSummaryTable',
            value: function buildSummaryTable(fitments) {
                var allSizePriceCombinations = [];
                // Get a list of each fitment size/price combination
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = fitments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var fitment = _step.value;

                        var fitmentPrice = RideStylerShowcaseWheelModal.getFitmentRetailPriceDataObject(fitment);
                        var fitmentPriceAmount = fitmentPrice ? fitmentPrice.WheelPricingAmount : undefined;
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMin,
                            width: fitment.WidthMin,
                            price: fitmentPriceAmount
                        });
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMin,
                            width: fitment.WidthMax,
                            price: fitmentPriceAmount
                        });
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMax,
                            width: fitment.WidthMin,
                            price: fitmentPriceAmount
                        });
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMax,
                            width: fitment.WidthMax,
                            price: fitmentPriceAmount
                        });
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                var sizePriceRanges = {};
                // Generate price ranges for each unique size description created above
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = allSizePriceCombinations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var sizePriceCombo = _step2.value;
                        var diameter = sizePriceCombo.diameter,
                            price = sizePriceCombo.price,
                            width = sizePriceCombo.width;

                        var size = diameter + ' x ' + width;
                        var priceRange = void 0;
                        if (size in sizePriceRanges === false) {
                            priceRange = sizePriceRanges[size] = {
                                min: Infinity,
                                max: -Infinity
                            };
                        } else {
                            priceRange = sizePriceRanges[size];
                        }
                        if (price) {
                            RideStylerShowcase.NumberHelper.extendRange(price, priceRange);
                        }
                    }
                    // Translate sizePriceRanges into SummaryTableRows
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                var summaryTableRows = [];
                var priceIsUnspecified = function priceIsUnspecified(price) {
                    // Price must be a number, and not +- infinity
                    return typeof price !== 'number' || isNaN(price) || price === Infinity || price === -Infinity;
                };
                for (var size in sizePriceRanges) {
                    if (!sizePriceRanges.hasOwnProperty(size)) continue;
                    var priceRange = sizePriceRanges[size];
                    var priceString = void 0;
                    if (priceIsUnspecified(priceRange.min) || priceIsUnspecified(priceRange.max)) {
                        priceString = RideStylerShowcase.strings.getString('call');
                    } else {
                        if (priceRange.min === priceRange.max) priceString = RideStylerShowcase.strings.format().currency(priceRange.min, '$');else priceString = RideStylerShowcase.strings.format().currency(priceRange.min, '$') + ' - ' + RideStylerShowcase.strings.format().currency(priceRange.max, '$');
                    }
                    summaryTableRows.push({
                        size: size,
                        price: priceString
                    });
                }
                return summaryTableRows;
            }
        }, {
            key: 'buildSpecsPage',
            value: function buildSpecsPage() {
                this.specsTable = new RideStylerShowcase.RideStylerShowcaseTable(this.showcase, {
                    columns: [{
                        header: RideStylerShowcase.strings.getString('size'),
                        cell: RideStylerShowcaseWheelModal.getFitmentSizeDescription
                    }, {
                        header: RideStylerShowcase.strings.getString('offset'),
                        cell: function cell(fitment) {
                            return RideStylerShowcase.RideStylerShowcaseTable.formatCell(fitment, 'OffsetMin', 'mm');
                        }
                    }, {
                        header: RideStylerShowcase.strings.getString('bolt-pattern'),
                        cell: 'BoltPatternDescription'
                    }, {
                        header: RideStylerShowcase.strings.getString('centerbore'),
                        cell: function cell(fitment) {
                            return RideStylerShowcase.RideStylerShowcaseTable.formatCell(fitment, 'CenterboreMM', 'mm');
                        }
                    }, {
                        header: 'Price',
                        cell: RideStylerShowcaseWheelModal.getFitmentPrice
                    }, {
                        header: RideStylerShowcase.strings.getString('item-number'),
                        cell: RideStylerShowcaseWheelModal.getFitmentItemNumber
                    }]
                });
                var specsContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: 'scrollable',
                    append: this.specsTable.component
                });
                this.addPage({
                    container: specsContainer,
                    label: RideStylerShowcase.strings.getString('specifications')
                });
            }
        }, {
            key: 'createImage',
            value: function createImage() {
                return new RideStylerShowcase.ResizeableResourceImage(this.imageContainer, {
                    action: "wheel/image",
                    baseInstructions: {
                        PositionX: 1 /* Center */
                        , PositionY: 0 /* Near */
                        , IncludeShadow: true
                    }
                });
            }
        }], [{
            key: 'getFitmentRetailPriceDataObject',
            value: function getFitmentRetailPriceDataObject(fitment) {
                return fitment.Pricing && fitment.Pricing['Retail'] || undefined;
            }
        }, {
            key: 'getFitmentSizeDescription',
            value: function getFitmentSizeDescription(fitment) {
                var DiameterMin = fitment.DiameterMin,
                    WidthMin = fitment.WidthMin;

                if (!DiameterMin || !WidthMin) return RideStylerShowcase.RideStylerShowcaseTable.emptyCellString;
                return DiameterMin + '\u2033 x ' + WidthMin;
            }
        }, {
            key: 'getFitmentPrice',
            value: function getFitmentPrice(fitment) {
                var noPriceString = RideStylerShowcase.strings.getString('call');
                var retailPriceDataObject = RideStylerShowcaseWheelModal.getFitmentRetailPriceDataObject(fitment);
                if (!retailPriceDataObject) return noPriceString;
                var price = retailPriceDataObject.WheelPricingAmount;
                return price ? RideStylerShowcase.strings.format().currency(price, '$') : noPriceString;
            }
        }, {
            key: 'getFitmentItemNumber',
            value: function getFitmentItemNumber(fitment) {
                var retailPriceDataObject = RideStylerShowcaseWheelModal.getFitmentRetailPriceDataObject(fitment);
                var itemNumber = void 0;
                // Item number is the retail pricing item number by default
                if (retailPriceDataObject) itemNumber = retailPriceDataObject.WheelPricingItemNumber;
                // If there's no retail pricing, or the retail price doesn't have a item number use the fitment's part number
                if (!itemNumber) itemNumber = fitment.PartNumber;
                return itemNumber || RideStylerShowcase.RideStylerShowcaseTable.emptyCellString;
            }
        }]);

        return RideStylerShowcaseWheelModal;
    }(RideStylerShowcase.RideStylerShowcaseProductModal);

    RideStylerShowcase.RideStylerShowcaseWheelModal = RideStylerShowcaseWheelModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsIiwic2hvd2Nhc2VJbnN0YW5jZSIsIndoZWVsTW9kZWwiLCJpbWFnZSIsInVwZGF0ZSIsIldoZWVsRml0bWVudFJlc291cmNlVHlwZSIsIldoZWVsTW9kZWwiLCJXaGVlbE1vZGVsSUQiLCJIVE1MSGVscGVyIiwic2V0VGV4dCIsImJyYW5kVGl0bGVFbGVtZW50IiwiV2hlZWxCcmFuZE5hbWUiLCJ0aXRsZUVsZW1lbnQiLCJXaGVlbE1vZGVsTmFtZSIsInN1YnRpdGxlRWxlbWVudCIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsInN1bW1hcnlUYWJsZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIiwic2hvd2Nhc2UiLCJjb2x1bW5zIiwiaGVhZGVyIiwic3RyaW5ncyIsImdldFN0cmluZyIsImNlbGwiLCJzdGFydExvYWRpbmciLCJzdW1tYXJ5RWxlbWVudCIsImFwcGVuZENoaWxkIiwiY29tcG9uZW50IiwiYnVpbGRTcGVjc1BhZ2UiLCJhcGkiLCJyZXF1ZXN0IiwiSW5jbHVkZVByb21vdGlvbnMiLCJJbmNsdWRlUHJpY2luZyIsImRvbmUiLCJhcHBlbmRSb3dzIiwiYnVpbGRTdW1tYXJ5VGFibGUiLCJyZXNwb25zZSIsIkZpdG1lbnRzIiwic3BlY3NUYWJsZSIsImZpdG1lbnRzIiwiYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zIiwiZml0bWVudCIsImZpdG1lbnRQcmljZSIsImdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QiLCJmaXRtZW50UHJpY2VBbW91bnQiLCJXaGVlbFByaWNpbmdBbW91bnQiLCJ1bmRlZmluZWQiLCJwdXNoIiwiZGlhbWV0ZXIiLCJEaWFtZXRlck1pbiIsIndpZHRoIiwiV2lkdGhNaW4iLCJwcmljZSIsIldpZHRoTWF4IiwiRGlhbWV0ZXJNYXgiLCJzaXplUHJpY2VSYW5nZXMiLCJzaXplUHJpY2VDb21ibyIsInNpemUiLCJwcmljZVJhbmdlIiwibWluIiwiSW5maW5pdHkiLCJtYXgiLCJOdW1iZXJIZWxwZXIiLCJleHRlbmRSYW5nZSIsInN1bW1hcnlUYWJsZVJvd3MiLCJwcmljZUlzVW5zcGVjaWZpZWQiLCJpc05hTiIsImhhc093blByb3BlcnR5IiwicHJpY2VTdHJpbmciLCJmb3JtYXQiLCJjdXJyZW5jeSIsImdldEZpdG1lbnRTaXplRGVzY3JpcHRpb24iLCJmb3JtYXRDZWxsIiwiZ2V0Rml0bWVudFByaWNlIiwiZ2V0Rml0bWVudEl0ZW1OdW1iZXIiLCJzcGVjc0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmQiLCJhZGRQYWdlIiwiY29udGFpbmVyIiwibGFiZWwiLCJSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSIsImltYWdlQ29udGFpbmVyIiwiYWN0aW9uIiwiYmFzZUluc3RydWN0aW9ucyIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIkluY2x1ZGVTaGFkb3ciLCJQcmljaW5nIiwiZW1wdHlDZWxsU3RyaW5nIiwibm9QcmljZVN0cmluZyIsInJldGFpbFByaWNlRGF0YU9iamVjdCIsIml0ZW1OdW1iZXIiLCJXaGVlbFByaWNpbmdJdGVtTnVtYmVyIiwiUGFydE51bWJlciIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQSxRQUl4QkMsNEJBSndCO0FBQUE7O0FBVXBCLDhDQUFZQyxnQkFBWixFQUF5REMsVUFBekQsRUFBOEY7QUFBQTs7QUFHMUY7QUFIMEYsb0tBQ3BGRCxnQkFEb0Y7O0FBSTFGLGtCQUFLRSxLQUFMLENBQVdDLE1BQVgsQ0FBa0I7QUFDZEMsMENBQXdCLENBRFYsQ0FDVTtBQURWLGtCQUVkQyxZQUFZ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Qix1QkFBQSxDQUF3QnlFLGVBQTdDO0FBQ0g7QUF4T21COztBQUFBO0FBQUEsTUFJMEIzRixtQkFBQWlHLDhCQUoxQjs7QUFJWGpHLHVCQUFBQyw0QkFBQSxHQUE0QkEsNEJBQTVCO0FBZ1BoQixDQXBQRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbFxuICAgIGltcG9ydCBXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsID0gcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbDtcbiAgICBpbXBvcnQgV2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxQcmljaW5nRGF0YU9iamVjdDtcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbCBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCB7XG4gICAgICAgIHByb3RlY3RlZCBpbWFnZTpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxcIndoZWVsL2ltYWdlXCI+O1xuXG4gICAgICAgIHByaXZhdGUgc3BlY3NUYWJsZTogUmlkZVN0eWxlclNob3djYXNlVGFibGU8V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbD47XG4gICAgICAgIHByaXZhdGUgc3VtbWFyeVRhYmxlOlJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFN1bW1hcnlUYWJsZVJvdz47XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSwgd2hlZWxNb2RlbDpXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIC8vIEltYWdlXG4gICAgICAgICAgICB0aGlzLmltYWdlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IHdoZWVsTW9kZWwuV2hlZWxNb2RlbElEXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQnJhbmRcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLmJyYW5kVGl0bGVFbGVtZW50LCB3aGVlbE1vZGVsLldoZWVsQnJhbmROYW1lKTtcblxuICAgICAgICAgICAgLy8gTW9kZWwgTmFtZVxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMudGl0bGVFbGVtZW50LCB3aGVlbE1vZGVsLldoZWVsTW9kZWxOYW1lKTtcblxuICAgICAgICAgICAgLy8gRmluaXNoXG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy5zdWJ0aXRsZUVsZW1lbnQsIHdoZWVsTW9kZWwuV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uKTtcblxuICAgICAgICAgICAgLy8gU3VtbWFyeSBUYWJsZVxuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5VGFibGUgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFibGU8U3VtbWFyeVRhYmxlUm93Pih0aGlzLnNob3djYXNlLCB7XG4gICAgICAgICAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzaXplJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsOiAnc2l6ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygncHJpY2UnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6ICdwcmljZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3RhcnRMb2FkaW5nOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnN1bW1hcnlUYWJsZS5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLmJ1aWxkU3BlY3NQYWdlKCk7XG5cbiAgICAgICAgICAgIGFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRmaXRtZW50ZGVzY3JpcHRpb25zJywge1xuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IHdoZWVsTW9kZWwuV2hlZWxNb2RlbElELFxuICAgICAgICAgICAgICAgIEluY2x1ZGVQcm9tb3Rpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIEluY2x1ZGVQcmljaW5nOiB0cnVlXG4gICAgICAgICAgICB9KS5kb25lKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1bW1hcnlUYWJsZS5hcHBlbmRSb3dzKHRoaXMuYnVpbGRTdW1tYXJ5VGFibGUocmVzcG9uc2UuRml0bWVudHMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNwZWNzVGFibGUuYXBwZW5kUm93cyhyZXNwb25zZS5GaXRtZW50cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRTdW1tYXJ5VGFibGUoZml0bWVudHM6IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSk6U3VtbWFyeVRhYmxlUm93W10ge1xuICAgICAgICAgICAgY29uc3QgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zOntkaWFtZXRlcjogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBwcmljZTpudW1iZXJ9W10gPSBbXTtcblxuICAgICAgICAgICAgLy8gR2V0IGEgbGlzdCBvZiBlYWNoIGZpdG1lbnQgc2l6ZS9wcmljZSBjb21iaW5hdGlvblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaXRtZW50IG9mIGZpdG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpdG1lbnRQcmljZSA9IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFJldGFpbFByaWNlRGF0YU9iamVjdChmaXRtZW50KTtcbiAgICAgICAgICAgICAgICBsZXQgZml0bWVudFByaWNlQW1vdW50ID0gZml0bWVudFByaWNlID8gZml0bWVudFByaWNlLldoZWVsUHJpY2luZ0Ftb3VudCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWluLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZml0bWVudC5XaWR0aE1pbixcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGZpdG1lbnRQcmljZUFtb3VudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFsbFNpemVQcmljZUNvbWJpbmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXI6IGZpdG1lbnQuRGlhbWV0ZXJNaW4sXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWF4LFxuICAgICAgICAgICAgICAgICAgICBwcmljZTogZml0bWVudFByaWNlQW1vdW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkaWFtZXRlcjogZml0bWVudC5EaWFtZXRlck1heCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGZpdG1lbnQuV2lkdGhNaW4sXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBmaXRtZW50UHJpY2VBbW91bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWF4LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZml0bWVudC5XaWR0aE1heCxcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGZpdG1lbnRQcmljZUFtb3VudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzaXplUHJpY2VSYW5nZXM6e1xuICAgICAgICAgICAgICAgIFtzaXplOnN0cmluZ106UHJpY2VSYW5nZVxuICAgICAgICAgICAgfSA9IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBwcmljZSByYW5nZXMgZm9yIGVhY2ggdW5pcXVlIHNpemUgZGVzY3JpcHRpb24gY3JlYXRlZCBhYm92ZVxuICAgICAgICAgICAgZm9yIChjb25zdCBzaXplUHJpY2VDb21ibyBvZiBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7ZGlhbWV0ZXIsIHByaWNlLCB3aWR0aH0gPSBzaXplUHJpY2VDb21ibztcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplOnN0cmluZyA9IGRpYW1ldGVyICsgJ+KAsyB4ICcgKyB3aWR0aDtcblxuICAgICAgICAgICAgICAgIGxldCBwcmljZVJhbmdlOlByaWNlUmFuZ2U7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2l6ZSBpbiBzaXplUHJpY2VSYW5nZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IEluZmluaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAtSW5maW5pdHlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcmljZVJhbmdlID0gc2l6ZVByaWNlUmFuZ2VzW3NpemVdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwcmljZSkge1xuICAgICAgICAgICAgICAgICAgICBOdW1iZXJIZWxwZXIuZXh0ZW5kUmFuZ2UocHJpY2UsIHByaWNlUmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJhbnNsYXRlIHNpemVQcmljZVJhbmdlcyBpbnRvIFN1bW1hcnlUYWJsZVJvd3NcbiAgICAgICAgICAgIGxldCBzdW1tYXJ5VGFibGVSb3dzOlN1bW1hcnlUYWJsZVJvd1tdID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0IHByaWNlSXNVbnNwZWNpZmllZCA9IChwcmljZTpudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQcmljZSBtdXN0IGJlIGEgbnVtYmVyLCBhbmQgbm90ICstIGluZmluaXR5XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBwcmljZSAhPT0gJ251bWJlcicgfHwgaXNOYU4ocHJpY2UpIHx8IHByaWNlID09PSBJbmZpbml0eSB8fCBwcmljZSA9PT0gLUluZmluaXR5O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBzaXplIGluIHNpemVQcmljZVJhbmdlcykge1xuICAgICAgICAgICAgICAgIGlmICghc2l6ZVByaWNlUmFuZ2VzLmhhc093blByb3BlcnR5KHNpemUpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV07XG5cbiAgICAgICAgICAgICAgICBsZXQgcHJpY2VTdHJpbmc6c3RyaW5nO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByaWNlSXNVbnNwZWNpZmllZChwcmljZVJhbmdlLm1pbikgfHwgcHJpY2VJc1Vuc3BlY2lmaWVkKHByaWNlUmFuZ2UubWF4KSkge1xuICAgICAgICAgICAgICAgICAgICBwcmljZVN0cmluZyA9IHN0cmluZ3MuZ2V0U3RyaW5nKCdjYWxsJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaWNlUmFuZ2UubWluID09PSBwcmljZVJhbmdlLm1heCkgcHJpY2VTdHJpbmcgPSBzdHJpbmdzLmZvcm1hdCgpLmN1cnJlbmN5KHByaWNlUmFuZ2UubWluLCAnJCcpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHByaWNlU3RyaW5nID0gc3RyaW5ncy5mb3JtYXQoKS5jdXJyZW5jeShwcmljZVJhbmdlLm1pbiwgJyQnKSArICcgLSAnICsgc3RyaW5ncy5mb3JtYXQoKS5jdXJyZW5jeShwcmljZVJhbmdlLm1heCwgJyQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzdW1tYXJ5VGFibGVSb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJpY2VTdHJpbmdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHN1bW1hcnlUYWJsZVJvd3M7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkU3BlY3NQYWdlKCkge1xuICAgICAgICAgICAgdGhpcy5zcGVjc1RhYmxlID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWw+KHRoaXMuc2hvd2Nhc2UsIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFNpemVEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICB9LCBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnb2Zmc2V0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsOiBmaXRtZW50ID0+IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmZvcm1hdENlbGwoZml0bWVudCwgJ09mZnNldE1pbicsICdtbScpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ2JvbHQtcGF0dGVybicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogJ0JvbHRQYXR0ZXJuRGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ2NlbnRlcmJvcmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IGZpdG1lbnQgPT4gUmlkZVN0eWxlclNob3djYXNlVGFibGUuZm9ybWF0Q2VsbChmaXRtZW50LCAnQ2VudGVyYm9yZU1NJywgJ21tJylcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiAnUHJpY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50UHJpY2VcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnaXRlbS1udW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudEl0ZW1OdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzcGVjc0NvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2Nyb2xsYWJsZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiB0aGlzLnNwZWNzVGFibGUuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlKHtcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHNwZWNzQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3BlY2lmaWNhdGlvbnMnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgY3JlYXRlSW1hZ2UoKTpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxcIndoZWVsL2ltYWdlXCI+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzaXplYWJsZVJlc291cmNlSW1hZ2U8XCJ3aGVlbC9pbWFnZVwiPih0aGlzLmltYWdlQ29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcIndoZWVsL2ltYWdlXCIsXG4gICAgICAgICAgICAgICAgYmFzZUluc3RydWN0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLk5lYXIsXG4gICAgICAgICAgICAgICAgICAgIEluY2x1ZGVTaGFkb3c6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QoZml0bWVudDogV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6V2hlZWxQcmljaW5nRGF0YU9iamVjdCB7XG4gICAgICAgICAgICByZXR1cm4gZml0bWVudC5QcmljaW5nICYmIGZpdG1lbnQuUHJpY2luZ1snUmV0YWlsJ10gfHwgdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0Rml0bWVudFNpemVEZXNjcmlwdGlvbihmaXRtZW50OldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwpOnN0cmluZyB7XG4gICAgICAgICAgICBsZXQge0RpYW1ldGVyTWluLCBXaWR0aE1pbn0gPSBmaXRtZW50O1xuXG4gICAgICAgICAgICBpZiAoIURpYW1ldGVyTWluIHx8ICFXaWR0aE1pbikgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmVtcHR5Q2VsbFN0cmluZztcblxuICAgICAgICAgICAgcmV0dXJuIGAke0RpYW1ldGVyTWlufeKAsyB4ICR7V2lkdGhNaW59YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRQcmljZShmaXRtZW50OiBXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsKTpzdHJpbmcge1xuICAgICAgICAgICAgY29uc3Qgbm9QcmljZVN0cmluZyA9IHN0cmluZ3MuZ2V0U3RyaW5nKCdjYWxsJyk7XG4gICAgICAgICAgICBsZXQgcmV0YWlsUHJpY2VEYXRhT2JqZWN0OldoZWVsUHJpY2luZ0RhdGFPYmplY3QgPSBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsLmdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QoZml0bWVudCk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIXJldGFpbFByaWNlRGF0YU9iamVjdCkgcmV0dXJuIG5vUHJpY2VTdHJpbmc7XG4gICAgXG4gICAgICAgICAgICBsZXQgcHJpY2U6bnVtYmVyID0gcmV0YWlsUHJpY2VEYXRhT2JqZWN0LldoZWVsUHJpY2luZ0Ftb3VudDtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBwcmljZSA/IHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2UsICckJykgOiBub1ByaWNlU3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0Rml0bWVudEl0ZW1OdW1iZXIoZml0bWVudDogV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCByZXRhaWxQcmljZURhdGFPYmplY3Q6V2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFJldGFpbFByaWNlRGF0YU9iamVjdChmaXRtZW50KTtcblxuICAgICAgICAgICAgbGV0IGl0ZW1OdW1iZXI6c3RyaW5nO1xuXG4gICAgICAgICAgICAvLyBJdGVtIG51bWJlciBpcyB0aGUgcmV0YWlsIHByaWNpbmcgaXRlbSBudW1iZXIgYnkgZGVmYXVsdFxuICAgICAgICAgICAgaWYgKHJldGFpbFByaWNlRGF0YU9iamVjdCkgaXRlbU51bWJlciA9IHJldGFpbFByaWNlRGF0YU9iamVjdC5XaGVlbFByaWNpbmdJdGVtTnVtYmVyO1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyByZXRhaWwgcHJpY2luZywgb3IgdGhlIHJldGFpbCBwcmljZSBkb2Vzbid0IGhhdmUgYSBpdGVtIG51bWJlciB1c2UgdGhlIGZpdG1lbnQncyBwYXJ0IG51bWJlclxuICAgICAgICAgICAgaWYgKCFpdGVtTnVtYmVyKSBpdGVtTnVtYmVyID0gZml0bWVudC5QYXJ0TnVtYmVyO1xuXG4gICAgICAgICAgICByZXR1cm4gaXRlbU51bWJlciB8fCBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5lbXB0eUNlbGxTdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcmZhY2UgUHJpY2VSYW5nZSB7XG4gICAgICAgIG1pbjogbnVtYmVyLFxuICAgICAgICBtYXg6IG51bWJlclxuICAgIH1cblxuICAgIGludGVyZmFjZSBTdW1tYXJ5VGFibGVSb3cge1xuICAgICAgICBzaXplOiBzdHJpbmc7XG4gICAgICAgIHByaWNlOiBzdHJpbmc7XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var optionClass = 'ridestyler-showcase-pagination-option';
    var noResultsClass = optionClass + '-no-results';

    var RideStylerShowcaseWheelSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseWheelSelector, _RideStylerShowcase$R);

        function RideStylerShowcaseWheelSelector(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseWheelSelector);

            return _possibleConstructorReturn(this, (RideStylerShowcaseWheelSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseWheelSelector)).call(this, showcaseInstance));
        }

        _createClass(RideStylerShowcaseWheelSelector, [{
            key: 'showNoResults',
            value: function showNoResults() {
                var _this2 = this;

                this.noResultsElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionClass + ' ' + noResultsClass,
                    text: RideStylerShowcase.strings.getString('no-wheel-results') + ' ',
                    appendTo: this.optionContainer
                });
                RideStylerShowcase.HTMLHelper.createButton({
                    appendTo: this.noResultsElement,
                    text: RideStylerShowcase.strings.getString('change-vehicle'),
                    link: true
                }).addEventListener('click', function () {
                    _this2.state.changeState(RideStylerShowcase.States.ChooseVehicle);
                });
            }
        }, {
            key: 'countResults',
            value: function countResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("wheel/countmodels", filters), function (response) {
                    return response.Count;
                });
            }
        }, {
            key: 'getResults',
            value: function getResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("wheel/getmodeldescriptions", RideStylerShowcase.ObjectHelper.assign({
                    IncludeMetaKeys: ['Description', 'Highlights'],
                    HasFitments: true
                }, filters)), function (response) {
                    return response.Models;
                });
            }
        }, {
            key: 'productFilter',
            value: function productFilter(product) {
                return true;
            }
        }, {
            key: 'productImageSource',
            value: function productImageSource(product) {
                return ridestyler.wheel.image({
                    WheelFitmentResourceType: 3 /* Catalog */
                    , WheelModel: product.WheelModelID,
                    Width: 100,
                    Height: 100,
                    PositionX: 1 /* Center */
                    , PositionY: 1 /* Center */
                    , IncludeShadow: true
                });
            }
        }, {
            key: 'productImageLabels',
            value: function productImageLabels(product) {
                return {
                    primary: product.WheelBrandName,
                    secondary: product.WheelModelName,
                    tertiary: product.WheelModelFinishDescription
                };
            }
        }]);

        return RideStylerShowcaseWheelSelector;
    }(RideStylerShowcase.RideStylerShowcaseProductSelector);

    RideStylerShowcase.RideStylerShowcaseWheelSelector = RideStylerShowcaseWheelSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3Rvci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJvcHRpb25DbGFzcyIsIm5vUmVzdWx0c0NsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciIsInNob3djYXNlSW5zdGFuY2UiLCJub1Jlc3VsdHNFbGVtZW50IiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImFwcGVuZFRvIiwib3B0aW9uQ29udGFpbmVyIiwiY3JlYXRlQnV0dG9uIiwibGluayIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0ZSIsImNoYW5nZVN0YXRlIiwiU3RhdGVzIiwiQ2hvb3NlVmVoaWNsZSIsImZpbHRlcnMiLCJQcm9taXNlSGVscGVyIiwidGhlbiIsImFwaSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIkNvdW50IiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiSW5jbHVkZU1ldGFLZXlzIiwiSGFzRml0bWVudHMiLCJNb2RlbHMiLCJwcm9kdWN0IiwicmlkZXN0eWxlciIsIndoZWVsIiwiaW1hZ2UiLCJXaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGUiLCJXaGVlbE1vZGVsIiwiV2hlZWxNb2RlbElEIiwiV2lkdGgiLCJIZWlnaHQiLCJQb3NpdGlvblgiLCJQb3NpdGlvblkiLCJJbmNsdWRlU2hhZG93IiwicHJpbWFyeSIsIldoZWVsQnJhbmROYW1lIiwic2Vjb25kYXJ5IiwiV2hlZWxNb2RlbE5hbWUiLCJ0ZXJ0aWFyeSIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFLeEIsUUFBTUMsY0FBYyx1Q0FBcEI7QUFDQSxRQUFNQyxpQkFBaUJELGNBQWMsYUFBckM7O0FBTndCLFFBUXhCRSwrQkFSd0I7QUFBQTs7QUFrQnBCLGlEQUFZQyxnQkFBWixFQUF1RDtBQUFBOztBQUFBLHFLQUM3Q0EsZ0JBRDZDO0FBRXREOztBQXBCbUI7QUFBQTtBQUFBLDRDQXNCRztBQUFBOztBQUNuQixxQkFBS0MsZ0JBQUwsR0FBd0JMLG1CQUFBTSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDcERDLCtCQUFXUCxjQUFjLEdBQWQsR0FBb0JDLGNBRHFCO0FBRXBETywwQkFBTVQsbUJBQUFVLE9BQUEsQ0FBUUMsU0FBUixDQUFrQixrQkFBbEIsSUFBd0MsR0FGTTtBQUdwREMsOEJBQVUsS0FBS0M7QUFIcUMsaUJBQWhDLENBQXhCO0FBTUFiLG1DQUFBTSxVQUFBLENBQVdRLFlBQVgsQ0FBd0I7QUFDcEJGLDhCQUFVLEtBQUtQLGdCQURLO0FBRXBCSSwwQkFBTVQsbUJBQUFVLE9BQUEsQ0FBUUMsU0FBUixDQUFrQixnQkFBbEIsQ0FGYztBQUdwQkksMEJBQU07QUFIYyxpQkFBeEIsRUFJR0MsZ0JBSkgsQ0FJb0IsT0FKcEIsRUFJNkIsWUFBSztBQUM5QiwyQkFBS0MsS0FBTCxDQUFXQyxXQUFYLENBQXVCbEIsbUJBQUFtQixNQUFBLENBQU9DLGFBQTlCO0FBQ0gsaUJBTkQ7QUFPSDtBQXBDbUI7QUFBQTtBQUFBLHlDQXNDR0MsT0F0Q0gsRUFzQzRCO0FBQzVDLHVCQUFPckIsbUJBQUFzQixhQUFBLENBQWNDLElBQWQsQ0FBbUJ2QixtQkFBQXdCLEdBQUEsQ0FBSUMsT0FBSixDQUFZLG1CQUFaLEVBQWlDSixPQUFqQyxDQUFuQixFQUE4RDtBQUFBLDJCQUFZSyxTQUFTQyxLQUFyQjtBQUFBLGlCQUE5RCxDQUFQO0FBQ0g7QUF4Q21CO0FBQUE7QUFBQSx1Q0F5Q0NOLE9BekNELEVBeUMwQjtBQUMxQyx1QkFBT3JCLG1CQUFBc0IsYUFBQSxDQUFjQyxJQUFkLENBQW1CdkIsbUJBQUF3QixHQUFBLENBQUlDLE9BQUosQ0FBWSw0QkFBWixFQUEwQ3pCLG1CQUFBNEIsWUFBQSxDQUFhQyxNQUFiLENBQXVDO0FBQ3ZHQyxxQ0FBaUIsQ0FDYixhQURhLEVBRWIsWUFGYSxDQURzRjtBQUt2R0MsaUNBQWE7QUFMMEYsaUJBQXZDLEVBTWpFVixPQU5pRSxDQUExQyxDQUFuQixFQU1PO0FBQUEsMkJBQVlLLFNBQVNNLE1BQXJCO0FBQUEsaUJBTlAsQ0FBUDtBQU9IO0FBakRtQjtBQUFBO0FBQUEsMENBa0RJQyxPQWxESixFQWtEdUM7QUFDdkQsdUJBQU8sSUFBUDtBQUNIO0FBcERtQjtBQUFBO0FBQUEsK0NBcURTQSxPQXJEVCxFQXFENEM7QUFDNUQsdUJBQU9DLFdBQVdDLEtBQVgsQ0FBaUJDLEtBQWpCLENBQXVCO0FBQzFCQyw4Q0FBd0IsQ0FERSxDQUNGO0FBREUsc0JBRTFCQyxZQUFZTCxRQUFRTSxZQUZNO0FBRzFCQywyQkFBTyxHQUhtQjtBQUkxQkMsNEJBQVEsR0FKa0I7QUFLMUJDLCtCQUFTLENBTGlCLENBS2pCO0FBTGlCLHNCQU0xQkMsV0FBUyxDQU5pQixDQU1qQjtBQU5pQixzQkFPMUJDLGVBQWU7QUFQVyxpQkFBdkIsQ0FBUDtBQVNIO0FBL0RtQjtBQUFBO0FBQUEsK0NBZ0VTWCxPQWhFVCxFQWdFNEM7QUFDNUQsdUJBQU87QUFDSFksNkJBQVNaLFFBQVFhLGNBRGQ7QUFFSEMsK0JBQVdkLFFBQVFlLGNBRmhCO0FBR0hDLDhCQUFVaEIsUUFBUWlCO0FBSGYsaUJBQVA7QUFLSDtBQXRFbUI7O0FBQUE7QUFBQSxNQVE2QmxELG1CQUFBbUQsaUNBUjdCOztBQVFYbkQsdUJBQUFHLCtCQUFBLEdBQStCQSwrQkFBL0I7QUFnRWhCLENBeEVELEVBQVVILHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBXaGVlbEZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5XaGVlbEZpbHRlck1vZGVsO1xuICAgIGltcG9ydCBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsO1xuICAgIGltcG9ydCBXaGVlbE1vZGVsUmVxdWVzdCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuV2hlZWxNb2RlbERlc2NyaXB0aW9uUmVxdWVzdE1vZGVsO1xuXG4gICAgY29uc3Qgb3B0aW9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbic7XG4gICAgY29uc3Qgbm9SZXN1bHRzQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbm8tcmVzdWx0cydcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yPFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsLCBXaGVlbEZpbHRlck1vZGVsPiB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc3VwcG9ydGVkVmVoaWNsZUltYWdlcnk6IHtcbiAgICAgICAgICAgIGFuZ2xlZDogYm9vbGVhbjtcbiAgICAgICAgICAgIHNpZGU6IGJvb2xlYW47XG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlZmF1bHRGaWx0ZXJzOiBXaGVlbEZpbHRlck1vZGVsO1xuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudEZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWw7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc2hvd05vUmVzdWx0cygpIHtcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBub1Jlc3VsdHNDbGFzcyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnbm8td2hlZWwtcmVzdWx0cycpICsgJyAnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLm9wdGlvbkNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5ub1Jlc3VsdHNFbGVtZW50LFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2UtdmVoaWNsZScpLFxuICAgICAgICAgICAgICAgIGxpbms6IHRydWVcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY2hhbmdlU3RhdGUoU3RhdGVzLkNob29zZVZlaGljbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgY291bnRSZXN1bHRzKGZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4gcmVzcG9uc2UuQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBnZXRSZXN1bHRzKGZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsW10sIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwgT2JqZWN0SGVscGVyLmFzc2lnbjxXaGVlbE1vZGVsUmVxdWVzdD4oe1xuICAgICAgICAgICAgICAgIEluY2x1ZGVNZXRhS2V5czogW1xuICAgICAgICAgICAgICAgICAgICAnRGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAnSGlnaGxpZ2h0cydcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIEhhc0ZpdG1lbnRzOiB0cnVlXG4gICAgICAgICAgICB9LCBmaWx0ZXJzKSksIHJlc3BvbnNlID0+IHJlc3BvbnNlLk1vZGVscyk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RGaWx0ZXIocHJvZHVjdDogV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdDogV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHJpZGVzdHlsZXIud2hlZWwuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudFJlc291cmNlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5XaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGUuQ2F0YWxvZyxcbiAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBwcm9kdWN0LldoZWVsTW9kZWxJRCxcbiAgICAgICAgICAgICAgICBXaWR0aDogMTAwLFxuICAgICAgICAgICAgICAgIEhlaWdodDogMTAwLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXG4gICAgICAgICAgICAgICAgSW5jbHVkZVNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0OiBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IHsgcHJpbWFyeTogc3RyaW5nOyBzZWNvbmRhcnk/OiBzdHJpbmc7IHRlcnRpYXJ5Pzogc3RyaW5nOyB9IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeTogcHJvZHVjdC5XaGVlbEJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICBzZWNvbmRhcnk6IHByb2R1Y3QuV2hlZWxNb2RlbE5hbWUsXG4gICAgICAgICAgICAgICAgdGVydGlhcnk6IHByb2R1Y3QuV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-tire-details';

    var TireDetails = function (_RideStylerShowcase$C) {
        _inherits(TireDetails, _RideStylerShowcase$C);

        function TireDetails() {
            _classCallCheck(this, TireDetails);

            return _possibleConstructorReturn(this, (TireDetails.__proto__ || Object.getPrototypeOf(TireDetails)).apply(this, arguments));
        }

        _createClass(TireDetails, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', className + " ridestyler-showcase-details");
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-title' + " ridestyler-showcase-details-title",
                    text: RideStylerShowcase.strings.getString('tire-details'),
                    appendTo: this.component
                });
                this.tireNameElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-name',
                    appendTo: this.component
                });
                this.tireDescriptionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-description ridestyler-showcase-details-secondary',
                    appendTo: this.component
                });
                this.state.afterDataChange(function (data) {
                    return _this2.onDataChange(data);
                });
            }
        }, {
            key: 'onDataChange',
            value: function onDataChange(data) {
                var currentTire = data.currentTire;
                this.component.style.display = currentTire ? '' : 'none';
                if (currentTire) {
                    RideStylerShowcase.HTMLHelper.setText(this.tireNameElement, currentTire.TireBrandName + ' ' + currentTire.TireModelName);
                    RideStylerShowcase.HTMLHelper.setText(this.tireDescriptionElement, currentTire.Attributes && currentTire.Attributes.length ? currentTire.Attributes.join(', ') : '');
                }
            }
        }]);

        return TireDetails;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.TireDetails = TireDetails;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVGlyZURldGFpbHMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiY2xhc3NOYW1lIiwiVGlyZURldGFpbHMiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImFwcGVuZFRvIiwidGlyZU5hbWVFbGVtZW50IiwidGlyZURlc2NyaXB0aW9uRWxlbWVudCIsInN0YXRlIiwiYWZ0ZXJEYXRhQ2hhbmdlIiwib25EYXRhQ2hhbmdlIiwiZGF0YSIsImN1cnJlbnRUaXJlIiwic3R5bGUiLCJkaXNwbGF5Iiwic2V0VGV4dCIsIlRpcmVCcmFuZE5hbWUiLCJUaXJlTW9kZWxOYW1lIiwiQXR0cmlidXRlcyIsImxlbmd0aCIsImpvaW4iLCJDb21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFNQyxZQUFZLGtDQUFsQjs7QUFEd0IsUUFHeEJDLFdBSHdCO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxrREFPUztBQUFBOztBQUN6QixxQkFBS0MsU0FBTCxHQUFpQkgsbUJBQUFJLFVBQUEsQ0FBV0Msc0JBQVgsQ0FBa0MsS0FBbEMsRUFBeUNKLFlBQVksOEJBQXJELENBQWpCO0FBRUFELG1DQUFBSSxVQUFBLENBQVdFLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDNUJMLCtCQUFXQSxZQUFZLFFBQVosR0FBdUIsb0NBRE47QUFFNUJNLDBCQUFNUCxtQkFBQVEsT0FBQSxDQUFRQyxTQUFSLENBQWtCLGNBQWxCLENBRnNCO0FBRzVCQyw4QkFBVSxLQUFLUDtBQUhhLGlCQUFoQztBQU1BLHFCQUFLUSxlQUFMLEdBQXVCWCxtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQ25ETCwrQkFBV0EsWUFBWSxPQUQ0QjtBQUVuRFMsOEJBQVUsS0FBS1A7QUFGb0MsaUJBQWhDLENBQXZCO0FBS0EscUJBQUtTLHNCQUFMLEdBQThCWixtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQzFETCwrQkFBV0EsWUFBWSxvREFEbUM7QUFFMURTLDhCQUFVLEtBQUtQO0FBRjJDLGlCQUFoQyxDQUE5QjtBQUtBLHFCQUFLVSxLQUFMLENBQVdDLGVBQVgsQ0FBMkI7QUFBQSwyQkFBUSxPQUFLQyxZQUFMLENBQWtCQyxJQUFsQixDQUFSO0FBQUEsaUJBQTNCO0FBQ0g7QUEzQm1CO0FBQUE7QUFBQSx5Q0E2QkNBLElBN0JELEVBNkJxQjtBQUNyQyxvQkFBTUMsY0FBY0QsS0FBS0MsV0FBekI7QUFFQSxxQkFBS2QsU0FBTCxDQUFlZSxLQUFmLENBQXFCQyxPQUFyQixHQUErQkYsY0FBYyxFQUFkLEdBQW1CLE1BQWxEO0FBRUEsb0JBQUlBLFdBQUosRUFBaUI7QUFDYmpCLHVDQUFBSSxVQUFBLENBQVdnQixPQUFYLENBQW1CLEtBQUtULGVBQXhCLEVBQXlDTSxZQUFZSSxhQUFaLEdBQTRCLEdBQTVCLEdBQWtDSixZQUFZSyxhQUF2RjtBQUNBdEIsdUNBQUFJLFVBQUEsQ0FBV2dCLE9BQVgsQ0FBbUIsS0FBS1Isc0JBQXhCLEVBQWdESyxZQUFZTSxVQUFaLElBQTBCTixZQUFZTSxVQUFaLENBQXVCQyxNQUFqRCxHQUM1Q1AsWUFBWU0sVUFBWixDQUF1QkUsSUFBdkIsQ0FBNEIsSUFBNUIsQ0FENEMsR0FDUixFQUR4QztBQUVIO0FBQ0o7QUF2Q21COztBQUFBO0FBQUEsTUFHU3pCLG1CQUFBMEIsYUFIVDs7QUFHWDFCLHVCQUFBRSxXQUFBLEdBQVdBLFdBQVg7QUFzQ2hCLENBekNELEVBQVVGLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvVGlyZURldGFpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS10aXJlLWRldGFpbHMnXG5cbiAgICBleHBvcnQgY2xhc3MgVGlyZURldGFpbHMgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJpdmF0ZSB0aXJlTmFtZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgdGlyZURlc2NyaXB0aW9uRWxlbWVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBjbGFzc05hbWUgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHNcIik7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy10aXRsZScgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtdGl0bGVcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygndGlyZS1kZXRhaWxzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50aXJlTmFtZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctbmFtZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50aXJlRGVzY3JpcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLWRlc2NyaXB0aW9uIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKGRhdGEgPT4gdGhpcy5vbkRhdGFDaGFuZ2UoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvbkRhdGFDaGFuZ2UoZGF0YTpzdGF0ZS5TdGF0ZURhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaXJlID0gZGF0YS5jdXJyZW50VGlyZTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9IGN1cnJlbnRUaXJlID8gJycgOiAnbm9uZSc7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50VGlyZSkge1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpcmVOYW1lRWxlbWVudCwgY3VycmVudFRpcmUuVGlyZUJyYW5kTmFtZSArICcgJyArIGN1cnJlbnRUaXJlLlRpcmVNb2RlbE5hbWUpO1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpcmVEZXNjcmlwdGlvbkVsZW1lbnQsIGN1cnJlbnRUaXJlLkF0dHJpYnV0ZXMgJiYgY3VycmVudFRpcmUuQXR0cmlidXRlcy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZS5BdHRyaWJ1dGVzLmpvaW4oJywgJykgOiAnJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-vehicle-details';
    var firstPaintColor = '#999';

    var VehicleDetails = function (_RideStylerShowcase$C) {
        _inherits(VehicleDetails, _RideStylerShowcase$C);

        function VehicleDetails() {
            _classCallCheck(this, VehicleDetails);

            return _possibleConstructorReturn(this, (VehicleDetails.__proto__ || Object.getPrototypeOf(VehicleDetails)).apply(this, arguments));
        }

        _createClass(VehicleDetails, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', className + " ridestyler-showcase-details");
                // Title
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-title' + " ridestyler-showcase-details-title",
                    text: RideStylerShowcase.strings.getString('vehicle-details'),
                    appendTo: this.component
                });
                // Vehicle Description/Paint Swatch Container
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-vehicle',
                    append: [
                    // Paint Swatch
                    this.vehiclePaintSwatchElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: className + '-vehicle-swatch ridestyler-showcase-paint-swatch',
                        style: {
                            backgroundColor: firstPaintColor
                        }
                    }),
                    // Vehicle Description
                    this.vehicleDescriptionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: className + '-vehicle-details'
                    })],
                    appendTo: this.component
                });
                // Tire Size
                this.tireSizeElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-tire-size ridestyler-showcase-details-secondary',
                    appendTo: this.component
                });
                // Change Vehicle Button
                RideStylerShowcase.HTMLHelper.createButton({
                    className: className + '-change-vehicle',
                    appendTo: this.component,
                    text: RideStylerShowcase.strings.getString('change-vehicle'),
                    link: true
                }).addEventListener('click', function () {
                    _this2.state.changeState(RideStylerShowcase.States.ChooseVehicle);
                    history.pushState(null, null, ' ');
                });
                // Listen for data changes
                this.state.afterDataChange(function (data) {
                    return _this2.onDataChange(data);
                });
                // Switch to paint when clicking on the paint swatch
                this.vehiclePaintSwatchElement.addEventListener('click', function () {
                    if (typeof _this2.paintSwatchClickCallback === 'function') _this2.paintSwatchClickCallback();
                });
            }
        }, {
            key: 'onDataChange',
            value: function onDataChange(data) {
                var vehicleDescription = data.currentVehicleDescription;
                var shortVehicleDescription = vehicleDescription !== undefined && vehicleDescription.length > 40 ? vehicleDescription.substring(0, 38) + '...' : vehicleDescription;
                this.vehiclePaintSwatchElement.style.backgroundColor = data.currentPaintScheme ? !data.currentPaintScheme.Colors ? data.currentPaintScheme : data.currentPaintScheme.Colors[0].Hex : firstPaintColor;
                RideStylerShowcase.HTMLHelper.setText(this.vehicleDescriptionElement, shortVehicleDescription);
                RideStylerShowcase.HTMLHelper.setText(this.tireSizeElement, data.currentVehicleTireOptionDescription);
            }
        }]);

        return VehicleDetails;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.VehicleDetails = VehicleDetails;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVmVoaWNsZURldGFpbHMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiY2xhc3NOYW1lIiwiZmlyc3RQYWludENvbG9yIiwiVmVoaWNsZURldGFpbHMiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImFwcGVuZFRvIiwiYXBwZW5kIiwidmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwidmVoaWNsZURlc2NyaXB0aW9uRWxlbWVudCIsInRpcmVTaXplRWxlbWVudCIsImNyZWF0ZUJ1dHRvbiIsImxpbmsiLCJhZGRFdmVudExpc3RlbmVyIiwic3RhdGUiLCJjaGFuZ2VTdGF0ZSIsIlN0YXRlcyIsIkNob29zZVZlaGljbGUiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiYWZ0ZXJEYXRhQ2hhbmdlIiwib25EYXRhQ2hhbmdlIiwiZGF0YSIsInBhaW50U3dhdGNoQ2xpY2tDYWxsYmFjayIsInZlaGljbGVEZXNjcmlwdGlvbiIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb24iLCJzaG9ydFZlaGljbGVEZXNjcmlwdGlvbiIsInVuZGVmaW5lZCIsImxlbmd0aCIsInN1YnN0cmluZyIsImN1cnJlbnRQYWludFNjaGVtZSIsIkNvbG9ycyIsIkhleCIsInNldFRleHQiLCJjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbiIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVkscUNBQWxCO0FBQ0EsUUFBTUMsa0JBQWtCLE1BQXhCOztBQUZ3QixRQUl4QkMsY0FKd0I7QUFBQTs7QUFBQTtBQUFBOztB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QUFXbUMsT0FBWCxDQUFtQixLQUFLeEIseUJBQXhCLEVBQW1EaUIsdUJBQW5EO0FBQ0FqQyxtQ0FBQUssVUFBQSxDQUFXbUMsT0FBWCxDQUFtQixLQUFLdkIsZUFBeEIsRUFBeUNZLEtBQUtZLG1DQUE5QztBQUNIO0FBM0ZtQjs7QUFBQTtBQUFBLE1BSVl6QyxtQkFBQTBDLGFBSlo7O0FBSVgxQyx1QkFBQUcsY0FBQSxHQUFjQSxjQUFkO0FBeUZoQixDQTdGRCxFQUFVSCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1ZlaGljbGVEZXRhaWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1kZXRhaWxzJ1xuICAgIGNvbnN0IGZpcnN0UGFpbnRDb2xvciA9ICcjOTk5JztcblxuICAgIGV4cG9ydCBjbGFzcyBWZWhpY2xlRGV0YWlscyBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmVoaWNsZSBkZXNjcmlwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb25FbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhaW50IHN3YXRjaCBuZXh0IHRvIHRoZSB2ZWhpY2xlIGRlc2NyaXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVQYWludFN3YXRjaEVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGlyZSBzaXplXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHRpcmVTaXplRWxlbWVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBjbGFzc05hbWUgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHNcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRpdGxlXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3ZlaGljbGUtZGV0YWlscycpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFZlaGljbGUgRGVzY3JpcHRpb24vUGFpbnQgU3dhdGNoIENvbnRhaW5lclxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFpbnQgU3dhdGNoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXZlaGljbGUtc3dhdGNoIHJpZGVzdHlsZXItc2hvd2Nhc2UtcGFpbnQtc3dhdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBmaXJzdFBhaW50Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVoaWNsZSBEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy12ZWhpY2xlLWRldGFpbHMnXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFRpcmUgU2l6ZVxuICAgICAgICAgICAgdGhpcy50aXJlU2l6ZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGlyZS1zaXplIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSBWZWhpY2xlIEJ1dHRvblxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1jaGFuZ2UtdmVoaWNsZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2UtdmVoaWNsZScpLFxuICAgICAgICAgICAgICAgIGxpbms6IHRydWVcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY2hhbmdlU3RhdGUoU3RhdGVzLkNob29zZVZlaGljbGUpO1xuICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsICcgJylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGRhdGEgY2hhbmdlc1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2UoZGF0YSA9PiB0aGlzLm9uRGF0YUNoYW5nZShkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0byBwYWludCB3aGVuIGNsaWNraW5nIG9uIHRoZSBwYWludCBzd2F0Y2hcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbCBiYWNrIGZvciB3aGVuIHRoZSBwYWludCBzd2F0Y2ggd2FzIGNsaWNrZWQgb25cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBwYWludFN3YXRjaENsaWNrQ2FsbGJhY2s6KCkgPT4gdm9pZDtcblxuICAgICAgICBwcml2YXRlIG9uRGF0YUNoYW5nZShkYXRhOnN0YXRlLlN0YXRlRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgdmVoaWNsZURlc2NyaXB0aW9uID0gZGF0YS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgY29uc3Qgc2hvcnRWZWhpY2xlRGVzY3JpcHRpb24gPSAgKHZlaGljbGVEZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHZlaGljbGVEZXNjcmlwdGlvbi5sZW5ndGggPiA0MCkgPyB2ZWhpY2xlRGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDM4KSArICcuLi4nIDogdmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVQYWludFN3YXRjaEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZGF0YS5jdXJyZW50UGFpbnRTY2hlbWUgPyAoIWRhdGEuY3VycmVudFBhaW50U2NoZW1lLkNvbG9ycyA/IGRhdGEuY3VycmVudFBhaW50U2NoZW1lIDogZGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCkgIDogZmlyc3RQYWludENvbG9yO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy52ZWhpY2xlRGVzY3JpcHRpb25FbGVtZW50LCBzaG9ydFZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXJlU2l6ZUVsZW1lbnQsIGRhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-wheel-details';

    var WheelDetails = function (_RideStylerShowcase$C) {
        _inherits(WheelDetails, _RideStylerShowcase$C);

        function WheelDetails() {
            _classCallCheck(this, WheelDetails);

            return _possibleConstructorReturn(this, (WheelDetails.__proto__ || Object.getPrototypeOf(WheelDetails)).apply(this, arguments));
        }

        _createClass(WheelDetails, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', className + " ridestyler-showcase-details");
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-title' + " ridestyler-showcase-details-title",
                    text: RideStylerShowcase.strings.getString('wheel-details'),
                    appendTo: this.component
                });
                this.wheelNameElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-name',
                    appendTo: this.component
                });
                this.wheelDescriptionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-description ridestyler-showcase-details-secondary',
                    appendTo: this.component
                });
                RideStylerShowcase.HTMLHelper.createButton({
                    className: className + '-features-specs',
                    appendTo: this.component,
                    text: RideStylerShowcase.strings.getString('wheel-features-specs'),
                    link: true
                }).addEventListener('click', function () {
                    _this2.showWheelModal();
                });
                this.state.afterDataChange(function (data) {
                    return _this2.onDataChange(data);
                });
            }
        }, {
            key: 'showWheelModal',
            value: function showWheelModal() {
                var stateData = this.state.getData();
                new RideStylerShowcase.RideStylerShowcaseWheelModal(this.showcase, stateData.currentWheel).show();
            }
        }, {
            key: 'onDataChange',
            value: function onDataChange(data) {
                var currentWheel = data.currentWheel;
                var currentWheelFitment = data.currentWheelFitment;
                this.component.style.display = currentWheel ? '' : 'none';
                if (currentWheel) {
                    RideStylerShowcase.HTMLHelper.setText(this.wheelNameElement, currentWheel.WheelBrandName + ' ' + currentWheel.WheelModelName);
                    if (currentWheelFitment) {
                        var diameter = currentWheelFitment.DiameterMin.toString() + '';
                        if (currentWheelFitment.DiameterMin !== currentWheelFitment.DiameterMax) diameter = '(' + currentWheelFitment.DiameterMin + '-' + currentWheelFitment.DiameterMax + ')';
                        RideStylerShowcase.HTMLHelper.setText(this.wheelDescriptionElement, diameter + ' ' + currentWheel.WheelModelFinishDescription);
                    } else {
                        RideStylerShowcase.HTMLHelper.setText(this.wheelDescriptionElement, currentWheel.WheelModelFinishDescription);
                    }
                }
            }
        }]);

        return WheelDetails;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.WheelDetails = WheelDetails;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvV2hlZWxEZXRhaWxzLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsIldoZWVsRGV0YWlscyIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwiY3JlYXRlRWxlbWVudCIsInRleHQiLCJzdHJpbmdzIiwiZ2V0U3RyaW5nIiwiYXBwZW5kVG8iLCJ3aGVlbE5hbWVFbGVtZW50Iiwid2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQiLCJjcmVhdGVCdXR0b24iLCJsaW5rIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dXaGVlbE1vZGFsIiwic3RhdGUiLCJhZnRlckRhdGFDaGFuZ2UiLCJvbkRhdGFDaGFuZ2UiLCJkYXRhIiwic3RhdGVEYXRhIiwiZ2V0RGF0YSIsIlJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwiLCJzaG93Y2FzZSIsImN1cnJlbnRXaGVlbCIsInNob3ciLCJjdXJyZW50V2hlZWxGaXRtZW50Iiwic3R5bGUiLCJkaXNwbGF5Iiwic2V0VGV4dCIsIldoZWVsQnJhbmROYW1lIiwiV2hlZWxNb2RlbE5hbWUiLCJkaWFtZXRlciIsIkRpYW1ldGVyTWluIiwidG9TdHJpbmciLCJEaWFtZXRlck1heCIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVksbUNBQWxCOztBQUR3QixRQUd4QkMsWUFId0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLGtEQU9TO0FBQUE7O0FBQ3pCLHFCQUFLQyxTQUFMLEdBQWlCSCxtQkFBQUksVUFBQSxDQUFXQyxzQkFBWCxDQUFrQyxLQUFsQyxFQUF5Q0osWUFBWSw4QkFBckQsQ0FBakI7QUFFQUQsbUNBQUFJLFVBQUEsQ0FBV0UsYUFBWCxDQUF5QixLQUF6QixFQUFnQztBQUM1QkwsK0JBQVdBLFlBQVksUUFBWixHQUF1QixvQ0FETjtBQUU1Qk0sMEJBQU1QLG1CQUFBUSxPQUFBLENBQVFDLFNBQVIsQ0FBa0IsZUFBbEIsQ0FGc0I7QUFHNUJDLDhCQUFVLEtBQUtQO0FBSGEsaUJBQWhDO0FBTUEscUJBQUtRLGdCQUFMLEdBQXdCWCxtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQ3BETCwrQkFBV0EsWUFBWSxPQUQ2QjtBQUVwRFMsOEJBQVUsS0FBS1A7QUFGcUMsaUJBQWhDLENBQXhCO0FBS0EscUJBQUtTLHVCQUFMLEdBQStCWixtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQzNETCwrQkFBV0EsWUFBWSxvREFEb0M7QUFFM0RTLDhCQUFVLEtBQUtQO0FBRjRDLGlCQUFoQyxDQUEvQjtBQUtBSCxtQ0FBQUksVUFBQSxDQUFXUyxZQUFYLENBQXdCO0FBQ3BCWiwrQkFBV0EsWUFBWSxpQkFESDtBQUVwQlMsOEJBQVUsS0FBS1AsU0FGSztBQUdwQkksMEJBQU1QLG1CQUFBUSxPQUFBLENBQVFDLFNBQVIsQ0FBa0Isc0JBQWxCLENBSGM7QUFJcEJLLDBCQUFNO0FBSmMsaUJBQXhCLEVBS0dDLGdCQUxILENBS29CLE9BTHBCLEVBSzZCLFlBQUs7QUFDOUIsMkJBQUtDLGNBQUw7QUFDSCxpQkFQRDtBQVNBLHFCQUFLQyxLQUFMLENBQVdDLGVBQVgsQ0FBMkI7QUFBQSwyQkFBUSxPQUFLQyxZQUFMLENBQWtCQyxJQUFsQixDQUFSO0FBQUEsaUJBQTNCO0FBQ0g7QUFwQ21CO0FBQUE7QUFBQSw2Q0FzQ0k7QUFDcEIsb0JBQU1DLFlBQVksS0FBS0osS0FBTCxDQUFXSyxPQUFYLEVBQWxCO0FBRUEsb0JBQUl0QixtQkFBQXVCLDRCQUFKLENBQWlDLEtBQUtDLFFBQXRDLEVBQWdESCxVQUFVSSxZQUExRCxFQUF3RUMsSUFBeEU7QUFDSDtBQTFDbUI7QUFBQTtBQUFBLHlDQTRDR04sSUE1Q0gsRUE0Q3VCO0FBQ3ZDLG9CQUFNSyxlQUFlTCxLQUFLSyxZQUExQjtBQUNBLG9CQUFNRSxzQkFBc0JQLEtBQUtPLG1CQUFqQztBQUVBLHFCQUFLeEIsU0FBTCxDQUFleUIsS0FBZixDQUFxQkMsT0FBckIsR0FBK0JKLGVBQWUsRUFBZixHQUFvQixNQUFuRDtBQUVBLG9CQUFJQSxZQUFKLEVBQWtCO0FBQ2R6Qix1Q0FBQUksVUFBQSxDQUFXMEIsT0FBWCxDQUFtQixLQUFLbkIsZ0JBQXhCLEVBQTBDYyxhQUFhTSxjQUFiLEdBQThCLEdBQTlCLEdBQW9DTixhQUFhTyxjQUEzRjtBQUVBLHdCQUFJTCxtQkFBSixFQUF5QjtBQUNyQiw0QkFBSU0sV0FBa0JOLG9CQUFvQk8sV0FBcEIsQ0FBZ0NDLFFBQWhDLEtBQTZDLEdBQW5FO0FBRUEsNEJBQUlSLG9CQUFvQk8sV0FBcEIsS0FBb0NQLG9CQUFvQlMsV0FBNUQsRUFDSUgsV0FBVyxNQUFNTixvQkFBb0JPLFdBQTFCLEdBQXdDLEdBQXhDLEdBQThDUCxvQkFBb0JTLFdBQWxFLEdBQWdGLElBQTNGO0FBRUpwQywyQ0FBQUksVUFBQSxDQUFXMEIsT0FBWCxDQUFtQixLQUFLbEIsdUJBQXhCLEVBQWlEcUIsV0FBVyxHQUFYLEdBQWlCUixhQUFhWSwyQkFBL0U7QUFDSCxxQkFQRCxNQU9PO0FBQ0hyQywyQ0FBQUksVUFBQSxDQUFXMEIsT0FBWCxDQUFtQixLQUFLbEIsdUJBQXhCLEVBQWlEYSxhQUFhWSwyQkFBOUQ7QUFDSDtBQUNKO0FBQ0o7QUFoRW1COztBQUFBO0FBQUEsTUFHVXJDLG1CQUFBc0MsYUFIVjs7QUFHWHRDLHVCQUFBRSxZQUFBLEdBQVlBLFlBQVo7QUErRGhCLENBbEVELEVBQVVGLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvV2hlZWxEZXRhaWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utd2hlZWwtZGV0YWlscydcblxuICAgIGV4cG9ydCBjbGFzcyBXaGVlbERldGFpbHMgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbE5hbWVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcml2YXRlIHdoZWVsRGVzY3JpcHRpb25FbGVtZW50OkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ2RpdicsIGNsYXNzTmFtZSArIFwiIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlsc1wiKTtcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXRpdGxlJyArIFwiIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy10aXRsZVwiLFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCd3aGVlbC1kZXRhaWxzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy53aGVlbE5hbWVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW5hbWUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMud2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctZGVzY3JpcHRpb24gcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXNlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1mZWF0dXJlcy1zcGVjcycsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCd3aGVlbC1mZWF0dXJlcy1zcGVjcycpLFxuICAgICAgICAgICAgICAgIGxpbms6IHRydWVcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1doZWVsTW9kYWwoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFmdGVyRGF0YUNoYW5nZShkYXRhID0+IHRoaXMub25EYXRhQ2hhbmdlKGRhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzaG93V2hlZWxNb2RhbCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuXG4gICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbCh0aGlzLnNob3djYXNlLCBzdGF0ZURhdGEuY3VycmVudFdoZWVsKS5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgb25EYXRhQ2hhbmdlKGRhdGE6c3RhdGUuU3RhdGVEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50V2hlZWwgPSBkYXRhLmN1cnJlbnRXaGVlbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRXaGVlbEZpdG1lbnQgPSBkYXRhLmN1cnJlbnRXaGVlbEZpdG1lbnQ7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBjdXJyZW50V2hlZWwgPyAnJyA6ICdub25lJztcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXaGVlbCkge1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLndoZWVsTmFtZUVsZW1lbnQsIGN1cnJlbnRXaGVlbC5XaGVlbEJyYW5kTmFtZSArICcgJyArIGN1cnJlbnRXaGVlbC5XaGVlbE1vZGVsTmFtZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRXaGVlbEZpdG1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpYW1ldGVyOnN0cmluZyA9IGN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNaW4udG9TdHJpbmcoKSArICfigLMnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWluICE9PSBjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXIgPSAnKCcgKyBjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWluICsgJy0nICsgY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1heCArICcp4oCzJztcblxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy53aGVlbERlc2NyaXB0aW9uRWxlbWVudCwgZGlhbWV0ZXIgKyAnICcgKyBjdXJyZW50V2hlZWwuV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy53aGVlbERlc2NyaXB0aW9uRWxlbWVudCwgY3VycmVudFdoZWVsLldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var filterModalClass = 'ridestyler-showcase-filter-modal';
    var filterModalMenuTitleClass = filterModalClass + '-menu-title';
    var countFormatToken = '{count}';

    var RideStylerShowcaseFilterModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseFilterModal, _RideStylerShowcase$R);

        function RideStylerShowcaseFilterModal(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseFilterModal);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseFilterModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseFilterModal)).call(this, showcaseInstance, {
                removeOnHidden: true
            }));

            _this.filterProvider = options.filterProvider;
            _this.showCountTextFormat = options.showCountTextFormat;
            _this.component.classList.add(filterModalClass);
            _this.buildShowButton();
            _this.buildFilterMenus().done(function () {
                _this.updateCount();
            });
            _this.component.appendChild(_this.showButton);
            return _this;
        }

        _createClass(RideStylerShowcaseFilterModal, [{
            key: 'buildFilterMenus',
            value: function buildFilterMenus() {
                var _this2 = this;

                var menusContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: filterModalClass + '-menus',
                    appendTo: this.component
                });
                var filterProvider = this.filterProvider;
                var menuLoadedPromises = [];
                var currentFilters = filterProvider.getFilters();
                this.menus = [];

                var _loop = function _loop(filterOption) {
                    // Don't show non-visible filter options or filter options without labels
                    if (!(filterOption.visible !== false && filterOption.label)) return 'continue';
                    var menu = new RideStylerShowcase.RideStylerShowcaseOptionMenu(filterOption.key);
                    var menuContainer = RideStylerShowcase.HTMLHelper.createElement({
                        className: filterModalClass + '-menu-container',
                        appendTo: menusContainer,
                        append: [RideStylerShowcase.HTMLHelper.createElement({
                            className: filterModalMenuTitleClass,
                            text: filterOption.label
                        }), menu.component]
                    });
                    var menuLoadedPromise = filterProvider.retrieveOptions(filterOption).done(function (options) {
                        options.unshift({
                            label: filterOption.unselectedOptionLabel || RideStylerShowcase.strings.getString('all'),
                            value: undefined
                        });
                        menu.setOptions(options);
                        if (typeof filterOption.getValueFromFilters === 'function') menu.setValue(filterOption.getValueFromFilters(currentFilters));else menu.setValue(undefined);
                    });
                    menu.onChange = function () {
                        _this2.updateCount();
                    };
                    menuLoadedPromises.push(menuLoadedPromise);
                    _this2.menus.push(menu);
                };

                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = filterProvider.filterOptions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var filterOption = _step.value;

                        var _ret = _loop(filterOption);

                        if (_ret === 'continue') continue;
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                return RideStylerShowcase.PromiseHelper.all(menuLoadedPromises);
            }
        }, {
            key: 'buildShowButton',
            value: function buildShowButton() {
                var _this3 = this;

                this.showButton = RideStylerShowcase.HTMLHelper.createButton({
                    large: true,
                    disabled: true,
                    text: RideStylerShowcase.strings.getString('loading-ellipsis')
                });
                this.showButton.addEventListener('click', function () {
                    _this3.filterProvider.setFilters(_this3.getValues());
                    _this3.hide();
                });
            }
        }, {
            key: 'getValues',
            value: function getValues() {
                var values = [];
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.menus[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var _menu = _step2.value;

                        values.push({
                            key: _menu.name,
                            value: _menu.value
                        });
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                return values;
            }
        }, {
            key: 'getFilters',
            value: function getFilters() {
                return this.filterProvider.previewFilters(this.getValues());
            }
        }, {
            key: 'updateCount',
            value: function updateCount() {
                var _this4 = this;

                this.setCountText(false);
                this.filterProvider.getCount(this.getFilters()).done(function (count) {
                    _this4.setCountText(count);
                });
            }
        }, {
            key: 'setCountText',
            value: function setCountText(count) {
                if (count === false) {
                    RideStylerShowcase.HTMLHelper.setText(this.showButton, RideStylerShowcase.strings.getString('loading-ellipsis'));
                    this.showButton.disabled = true;
                } else {
                    RideStylerShowcase.HTMLHelper.setText(this.showButton, this.showCountTextFormat.replace(countFormatToken, count.toString()));
                    this.showButton.disabled = count === 0;
                }
            }
        }]);

        return RideStylerShowcaseFilterModal;
    }(RideStylerShowcase.RideStylerShowcaseModal);

    RideStylerShowcase.RideStylerShowcaseFilterModal = RideStylerShowcaseFilterModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvbW9kYWxzL1JpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImZpbHRlck1vZGFsQ2xhc3MiLCJmaWx0ZXJNb2RhbE1lbnVUaXRsZUNsYXNzIiwiY291bnRGb3JtYXRUb2tlbiIsIlJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsIiwic2hvd2Nhc2VJbnN0YW5jZSIsIm9wdGlvbnMiLCJyZW1vdmVPbkhpZGRlbiIsImZpbHRlclByb3ZpZGVyIiwic2hvd0NvdW50VGV4dEZvcm1hdCIsImNvbXBvbmVudCIsImNsYXNzTGlzdCIsImFkZCIsImJ1aWxkU2hvd0J1dHRvbiIsImJ1aWxkRmlsdGVyTWVudXMiLCJkb25lIiwidXBkYXRlQ291bnQiLCJhcHBlbmRDaGlsZCIsInNob3dCdXR0b24iLCJtZW51c0NvbnRhaW5lciIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kVG8iLCJtZW51TG9hZGVkUHJvbWlzZXMiLCJjdXJyZW50RmlsdGVycyIsImdldEZpbHRlcnMiLCJtZW51cyIsImZpbHRlck9wdGlvbiIsInZpc2libGUiLCJsYWJlbCIsIm1lbnUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51Iiwia2V5IiwibWVudUNvbnRhaW5lciIsImFwcGVuZCIsInRleHQiLCJtZW51TG9hZGVkUHJvbWlzZSIsInJldHJpZXZlT3B0aW9ucyIsInVuc2hpZnQiLCJ1bnNlbGVjdGVkT3B0aW9uTGFiZWwiLCJzdHJpbmdzIiwiZ2V0U3RyaW5nIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJzZXRPcHRpb25zIiwiZ2V0VmFsdWVGcm9tRmlsdGVycyIsInNldFZhbHVlIiwib25DaGFuZ2UiLCJwdXNoIiwiZmlsdGVyT3B0aW9ucyIsIlByb21pc2VIZWxwZXIiLCJhbGwiLCJjcmVhdGVCdXR0b24iLCJsYXJnZSIsImRpc2FibGVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEZpbHRlcnMiLCJnZXRWYWx1ZXMiLCJoaWRlIiwidmFsdWVzIiwibmFtZSIsInByZXZpZXdGaWx0ZXJzIiwic2V0Q291bnRUZXh0IiwiZ2V0Q291bnQiLCJjb3VudCIsInNldFRleHQiLCJyZXBsYWNlIiwidG9TdHJpbmciLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFHeEIsUUFBTUMsbUJBQW1CLGtDQUF6QjtBQUNBLFFBQU1DLDRCQUE0QkQsbUJBQW1CLGFBQXJEO0FBRUEsUUFBTUUsbUJBQW1CLFNBQXpCOztBQU53QixRQVF4QkMsNkJBUndCO0FBQUE7O0FBZXBCLCtDQUFZQyxnQkFBWixFQUF5REMsT0FBekQsRUFBMkg7QUFBQTs7QUFBQSxzS0FDakhELGdCQURpSCxFQUMvRjtBQUNwQkUsZ0NBQWdCO0FBREksYUFEK0Y7O0FBS3ZILGtCQUFLQyxjQUFMLEdBQXNCRixRQUFRRSxjQUE5QjtBQUNBLGtCQUFLQyxtQkFBTCxHQUEyQkgsUUFBUUcsbUJBQW5DO0FBRUEsa0JBQUtDLFNBQUwsQ0FBZUMsU0FBZixDQUF5QkMsR0FBekIsQ0FBNkJYLGdCQUE3QjtBQUVBLGtCQUFLWSxlQUFMO0FBRUEsa0JBQUtDLGdCQUFMLEdBQXdCQyxJQUF4QixDQUE2QixZQUFLO0FBQzlCLHNCQUFLQyxXQUFMO0FBQ0gsYUFGRDtBQUlBLGtCQUFLTixTQUFMLENBQWVPLFdBQWYsQ0FBMkIsTUFBS0MsVUFBaEM7QUFoQnVIO0FBaUIxSDs7QUFoQ21CO0FBQUE7QUFBQSwrQ0FrQ0k7QUFBQTs7QUFDcEIsb0JBQU1DLGlCQUFpQm5CLG1CQUFBb0IsVUFBQSxDQUFXQyxhQUFYLENBQXlCO0FBQzVDQywrQkFBV3JCLG1CQUFtQixRQURjO0FBRTVDc0IsOEJBQVUsS0FBS2I7QUFGNkIsaUJBQXpCLENBQXZCO0FBS0Esb0JBQU1GLGlCQUFpQixL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QkEsNkJBQTdCO0FBb0poQixDQTVKRCxFQUFVSix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL21vZGFscy9SaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBGaWx0ZXJQcm92aWRlciA9IGZpbHRlcnMuRmlsdGVyUHJvdmlkZXI7XG5cbiAgICBjb25zdCBmaWx0ZXJNb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtZmlsdGVyLW1vZGFsJztcbiAgICBjb25zdCBmaWx0ZXJNb2RhbE1lbnVUaXRsZUNsYXNzID0gZmlsdGVyTW9kYWxDbGFzcyArICctbWVudS10aXRsZSc7XG5cbiAgICBjb25zdCBjb3VudEZvcm1hdFRva2VuID0gJ3tjb3VudH0nO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsPEZpbHRlclR5cGUgZXh0ZW5kcyBvYmplY3QsIEZpbHRlclByb3ZpZGVyVHlwZSBleHRlbmRzIEZpbHRlclByb3ZpZGVyPEZpbHRlclR5cGU+PiBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBmaWx0ZXJQcm92aWRlcjogRmlsdGVyUHJvdmlkZXJUeXBlO1xuICAgICAgICBwcml2YXRlIG1lbnVzOiBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51W107XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2hvd0NvdW50VGV4dEZvcm1hdDpzdHJpbmc7XG5cbiAgICAgICAgcHJpdmF0ZSBzaG93QnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6IFJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsLk9wdGlvbnM8RmlsdGVyUHJvdmlkZXJUeXBlPikge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJQcm92aWRlciA9IG9wdGlvbnMuZmlsdGVyUHJvdmlkZXI7XG4gICAgICAgICAgICB0aGlzLnNob3dDb3VudFRleHRGb3JtYXQgPSBvcHRpb25zLnNob3dDb3VudFRleHRGb3JtYXQ7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoZmlsdGVyTW9kYWxDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMuYnVpbGRTaG93QnV0dG9uKCk7XG5cbiAgICAgICAgICAgIHRoaXMuYnVpbGRGaWx0ZXJNZW51cygpLmRvbmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ291bnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnNob3dCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBidWlsZEZpbHRlck1lbnVzKCk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICAgICAgY29uc3QgbWVudXNDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmlsdGVyTW9kYWxDbGFzcyArICctbWVudXMnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclByb3ZpZGVyID0gdGhpcy5maWx0ZXJQcm92aWRlcjtcbiAgICAgICAgICAgIGNvbnN0IG1lbnVMb2FkZWRQcm9taXNlcyA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVycyA9IGZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKTtcblxuICAgICAgICAgICAgdGhpcy5tZW51cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlck9wdGlvbiBvZiBmaWx0ZXJQcm92aWRlci5maWx0ZXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3Qgc2hvdyBub24tdmlzaWJsZSBmaWx0ZXIgb3B0aW9ucyBvciBmaWx0ZXIgb3B0aW9ucyB3aXRob3V0IGxhYmVsc1xuICAgICAgICAgICAgICAgIGlmICghKGZpbHRlck9wdGlvbi52aXNpYmxlICE9PSBmYWxzZSAmJiBmaWx0ZXJPcHRpb24ubGFiZWwpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgbWVudTpSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51ID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUoZmlsdGVyT3B0aW9uLmtleSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtZW51Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBmaWx0ZXJNb2RhbENsYXNzICsgJy1tZW51LWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBtZW51c0NvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmlsdGVyTW9kYWxNZW51VGl0bGVDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmaWx0ZXJPcHRpb24ubGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5jb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbGV0IG1lbnVMb2FkZWRQcm9taXNlID0gZmlsdGVyUHJvdmlkZXIucmV0cmlldmVPcHRpb25zKGZpbHRlck9wdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmRvbmUob3B0aW9ucyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnVuc2hpZnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaWx0ZXJPcHRpb24udW5zZWxlY3RlZE9wdGlvbkxhYmVsIHx8IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbHRlck9wdGlvbi5nZXRWYWx1ZUZyb21GaWx0ZXJzID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0VmFsdWUoZmlsdGVyT3B0aW9uLmdldFZhbHVlRnJvbUZpbHRlcnMoY3VycmVudEZpbHRlcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zZXRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1lbnUub25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ291bnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbWVudUxvYWRlZFByb21pc2VzLnB1c2gobWVudUxvYWRlZFByb21pc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudXMucHVzaChtZW51KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuYWxsKG1lbnVMb2FkZWRQcm9taXNlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkU2hvd0J1dHRvbigpOnZvaWQge1xuICAgICAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGxhcmdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdsb2FkaW5nLWVsbGlwc2lzJylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNob3dCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJQcm92aWRlci5zZXRGaWx0ZXJzKHRoaXMuZ2V0VmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldFZhbHVlcygpOmZpbHRlcnMuRmlsdGVyVmFsdWVbXSB7XG4gICAgICAgICAgICBsZXQgdmFsdWVzOiBmaWx0ZXJzLkZpbHRlclZhbHVlW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBtZW51IG9mIHRoaXMubWVudXMpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogbWVudS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWVudS52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRGaWx0ZXJzKCk6RmlsdGVyVHlwZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJQcm92aWRlci5wcmV2aWV3RmlsdGVycyh0aGlzLmdldFZhbHVlcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ291bnQoKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvdW50VGV4dChmYWxzZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyUHJvdmlkZXIuZ2V0Q291bnQodGhpcy5nZXRGaWx0ZXJzKCkpLmRvbmUoY291bnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q291bnRUZXh0KGNvdW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgY291bnQgdGV4dCB0byBhIGxvYWRpbmcgc3RhdGVcbiAgICAgICAgICogQHBhcmFtIGNvdW50IFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBzZXRDb3VudFRleHQoY291bnQ6ZmFsc2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgY291bnQgdGV4dFxuICAgICAgICAgKiBAcGFyYW0gY291bnQgVGhlIGNvdW50IHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBzZXRDb3VudFRleHQoY291bnQ6bnVtYmVyKTtcbiAgICAgICAgcHJpdmF0ZSBzZXRDb3VudFRleHQoY291bnQ6bnVtYmVyfGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuc2hvd0J1dHRvbiwgc3RyaW5ncy5nZXRTdHJpbmcoJ2xvYWRpbmctZWxsaXBzaXMnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuc2hvd0J1dHRvbiwgdGhpcy5zaG93Q291bnRUZXh0Rm9ybWF0LnJlcGxhY2UoY291bnRGb3JtYXRUb2tlbiwgY291bnQudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0J1dHRvbi5kaXNhYmxlZCA9IGNvdW50ID09PSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uczxGaWx0ZXJQcm92aWRlclR5cGU+IHtcbiAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiBGaWx0ZXJQcm92aWRlclR5cGU7XG4gICAgICAgICAgICBzaG93Q291bnRUZXh0Rm9ybWF0OiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ArrayHelper;
    (function (ArrayHelper) {
        function copy(array) {
            var copy = new Array(array.length);
            for (var index = 0; index < array.length; index++) {
                copy[index] = array[index];
            }return copy;
        }
        ArrayHelper.copy = copy;
        function remove(array, itemMatch) {
            var newArray = new Array(array.length);
            var newArrayIndex = -1;
            for (var arrayIndex = 0; arrayIndex < array.length; arrayIndex++) {
                var item = array[arrayIndex];
                if (typeof itemMatch === 'function' && itemMatch(item) || item === itemMatch) {
                    // Skip items that match the itemMatch function or value
                    continue;
                }
                newArray[++newArrayIndex] = item;
            }
            // Shorten array to exclude length from removed items
            newArray.length = newArrayIndex + 1;
            return newArray;
        }
        ArrayHelper.remove = remove;
        function filter(array, itemMatch) {
            return remove(array, function (item) {
                return !itemMatch(item);
            });
        }
        ArrayHelper.filter = filter;
        function map(array, mapFunction, thisArg) {
            if (typeof Array.prototype.map === 'function') return array.map(mapFunction, thisArg);
            var result = new Array(array.length);
            for (var i = 0; i < array.length; i++) {
                var element = array[i];
                if (typeof thisArg === 'undefined') result[i] = mapFunction(array[i], i, array);else result[i] = mapFunction.call(thisArg, array[i], i, array);
            }
            return result;
        }
        ArrayHelper.map = map;
        function reduce(array, reducer, initialValue) {
            if (typeof Array.prototype.reduce === 'function') return array.reduce(reducer, initialValue);
            var accumulator = initialValue;
            for (var i = 0; i < array.length; i++) {
                accumulator = accumulator !== undefined ? reducer.call(undefined, accumulator, array[i], i, array) : array[i];
            }return accumulator;
        }
        ArrayHelper.reduce = reduce;
    })(ArrayHelper = RideStylerShowcase.ArrayHelper || (RideStylerShowcase.ArrayHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvQXJyYXlIZWxwZXIudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiQXJyYXlIZWxwZXIiLCJjb3B5IiwiYXJyYXkiLCJBcnJheSIsImxlbmd0aCIsImluZGV4IiwicmVtb3ZlIiwiaXRlbU1hdGNoIiwibmV3QXJyYXkiLCJuZXdBcnJheUluZGV4IiwiYXJyYXlJbmRleCIsIml0ZW0iLCJmaWx0ZXIiLCJtYXAiLCJtYXBGdW5jdGlvbiIsInRoaXNBcmciLCJwcm90b3R5cGUiLCJyZXN1bHQiLCJpIiwiZWxlbWVudCIsImNhbGwiLCJyZWR1Y2UiLCJyZWR1Y2VyIiwiaW5pdGlhbFZhbHVlIiwiYWNjdW11bGF0b3IiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLFdBQUE7QUFBQSxLQUFBLFVBQUFBLFdBQUEsRUFBVztBQUNwQyxpQkFBQUMsSUFBQSxDQUFtREMsS0FBbkQsRUFBa0U7QUFDOUQsZ0JBQUlELE9BQU8sSUFBSUUsS0FBSixDQUFVRCxNQUFNRSxNQUFoQixDQUFYO0FBRUEsaUJBQUssSUFBSUMsUUFBUSxDQUFqQixFQUFvQkEsUUFBUUgsTUFBTUUsTUFBbEMsRUFBMENDLE9BQTFDO0FBQ0lKLHFCQUFLSSxLQUFMLElBQWNILE1BQU1HLEtBQU4sQ0FBZDtBQURKLGFBR0EsT0FBT0osSUFBUDtBQUNIO0FBUGVELG9CQUFBQyxJQUFBLEdBQUlBLElBQUo7QUFXaEIsaUJBQUFLLE1BQUEsQ0FBMEJKLEtBQTFCLEVBQXFDSyxTQUFyQyxFQUErRDtBQUMzRCxnQkFBSUMsV0FBZSxJQUFJTCxLQUFKLENBQVVELE1BQU1FLE1BQWhCLENBQW5CO0FBRUEsZ0JBQUlLLGdCQUFnQixDQUFDLENBQXJCO0FBRUEsaUJBQUssSUFBSUMsYUFBYSxDQUF0QixFQUF5QkEsYUFBYVIsTUFBTUUsTUFBNUMsRUFBb0RNLFlBQXBELEVBQWtFO0FBQzlELG9CQUFJQyxPQUFTVCxNQUFNUSxVQUFOLENBQWI7QUFFQSxvQkFBSSxPQUFPSCxTQUFQLEtBQXFCLFVBQXJCLElBQW1DQSxVQUFVSSxJQUFWLENBQW5DLElBQXNEQSxTQUFTSixTQUFuRSxFQUE4RTtBQUMxRTtBQUNBO0FBQ0g7QUFFREMseUJBQVMsRUFBRUMsYUFBWCxJQUE0QkUsSUFBNUI7QUFDSDtBQUVEO0FBQ0FILHFCQUFTSixNQUFULEdBQWtCSyxnQkFBZ0IsQ0FBbEM7QUFFQSxtQkFBT0QsUUFBUDtBQUNIO0FBcEJlUixvQkFBQU0sTUFBQSxHQUFNQSxNQUFOO0FBc0JoQixpQkFBQU0sTUFBQSxDQUEwQlYsS0FBMUIsRUFBcUNLLFNBQXJDLEVBQTJEO0FBQ3ZELG1CQUFPRCxPQUFPSixLQUFQLEVBQWM7QUFBQSx1QkFBUSxDQUFDSyxVQUFVSSxJQUFWLENBQVQ7QUFBQSxhQUFkLENBQVA7QUFDSDtBQUZlWCxvQkFBQVksTUFBQSxHQUFNQSxNQUFOO0FBSWhCLGlCQUFBQyxHQUFBLENBQTBCWCxLQUExQixFQUFxQ1ksV0FBckMsRUFBOEZDLE9BQTlGLEVBQTJHO0FBQ3ZHLGdCQUFJLE9BQU9aLE1BQU1hLFNBQU4sQ0FBZ0JILEdBQXZCLEtBQStCLFVBQW5DLEVBQStDLE9BQU9YLE1BQU1XLEdBQU4sQ0FBVUMsV0FBVixFQUF1QkMsT0FBdkIsQ0FBUDtBQUUvQyxnQkFBSUUsU0FBYSxJQUFJZCxLQUFKLENBQVVELE1BQU1FLE1BQWhCLENBQWpCO0FBRUEsaUJBQUssSUFBSWMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJaEIsTUFBTUUsTUFBMUIsRUFBa0NjLEdBQWxDLEVBQXVDO0FBQ25DLG9CQUFJQyxVQUFVakIsTUFBTWdCLENBQU4sQ0FBZDtBQUVBLG9CQUFJLE9BQU9ILE9BQVAsS0FBbUIsV0FBdkIsRUFBb0NFLE9BQU9DLENBQVAsSUFBWUosWUFBWVosTUFBTWdCLENBQU4sQ0FBWixFQUFzQkEsQ0FBdEIsRUFBeUJoQixLQUF6QixDQUFaLENBQXBDLEtBQ0tlLE9BQU9DLENBQVAsSUFBWUosWUFBWU0sSUFBWixDQUFpQkwsT0FBakIsRUFBMEJiLE1BQU1nQixDQUFOLENBQTFCLEVBQW9DQSxDQUFwQyxFQUF1Q2hCLEtBQXZDLENBQVo7QUFDUjtBQUVELG1CQUFPZSxNQUFQO0FBQ0g7QUFiZWpCLG9CQUFBYSxHQUFBLEdBQUdBLEdBQUg7QUFpQmhCLGlCQUFBUSxNQUFBLENBQTBCbkIsS0FBMUIsRUFBcUNvQixPQUFyQyxFQUEwSEMsWUFBMUgsRUFBeUk7QUFDckksZ0JBQUksT0FBT3BCLE1BQU1hLFNBQU4sQ0FBZ0JLLE1BQXZCLEtBQWtDLFVBQXRDLEVBQWtELE9BQU9uQixNQUFNbUIsTUFBTixDQUFhQyxPQUFiLEVBQXNCQyxZQUF0QixDQUFQO0FBRWxELGdCQUFJQyxjQUFnQkQsWUFBcEI7QUFFQSxpQkFBSyxJQUFJTCxJQUFJLENBQWIsRUFBZ0JBLElBQUloQixNQUFNRSxNQUExQixFQUFrQ2MsR0FBbEM7QUFDSU0sOEJBQWNBLGdCQUFnQkMsU0FBaEIsR0FDVkgsUUFBUUYsSUFBUixDQUFhSyxTQUFiLEVBQXdCRCxXQUF4QixFQUFxQ3RCLE1BQU1nQixDQUFOLENBQXJDLEVBQStDQSxDQUEvQyxFQUFrRGhCLEtBQWxELENBRFUsR0FFVkEsTUFBTWdCLENBQU4sQ0FGSjtBQURKLGFBS0EsT0FBT00sV0FBUDtBQUNIO0FBWGV4QixvQkFBQXFCLE1BQUEsR0FBTUEsTUFBTjtBQVluQixLQW5FNEIsRUFBQXJCLGNBQUFELG1CQUFBQyxXQUFBLEtBQUFELG1CQUFBQyxXQUFBLEdBQVcsRUFBWCxDQUFBO0FBbUU1QixDQW5FRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL0FycmF5SGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlciB7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvcHk8QXJyYXlUeXBlIGV4dGVuZHMgQXJyYXk8YW55Pj4oYXJyYXk6QXJyYXlUeXBlKTpBcnJheVR5cGUge1xuICAgICAgICBsZXQgY29weSA9IG5ldyBBcnJheShhcnJheS5sZW5ndGgpIGFzIEFycmF5VHlwZTtcblxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXkubGVuZ3RoOyBpbmRleCsrKVxuICAgICAgICAgICAgY29weVtpbmRleF0gPSBhcnJheVtpbmRleF07XG5cbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZTxUPihhcnJheTpUW10sIGl0ZW1NYXRjaDpUKTogVFtdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmU8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6KFQpPT5ib29sZWFuKTogVFtdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmU8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6VHwoKFQpPT5ib29sZWFuKSk6IFRbXSB7XG4gICAgICAgIGxldCBuZXdBcnJheTpUW10gPSBuZXcgQXJyYXkoYXJyYXkubGVuZ3RoKTtcblxuICAgICAgICBsZXQgbmV3QXJyYXlJbmRleCA9IC0xO1xuXG4gICAgICAgIGZvciAobGV0IGFycmF5SW5kZXggPSAwOyBhcnJheUluZGV4IDwgYXJyYXkubGVuZ3RoOyBhcnJheUluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpdGVtOlQgPSBhcnJheVthcnJheUluZGV4XTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtTWF0Y2ggPT09ICdmdW5jdGlvbicgJiYgaXRlbU1hdGNoKGl0ZW0pIHx8IGl0ZW0gPT09IGl0ZW1NYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgaXRlbXMgdGhhdCBtYXRjaCB0aGUgaXRlbU1hdGNoIGZ1bmN0aW9uIG9yIHZhbHVlXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld0FycmF5WysrbmV3QXJyYXlJbmRleF0gPSBpdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvcnRlbiBhcnJheSB0byBleGNsdWRlIGxlbmd0aCBmcm9tIHJlbW92ZWQgaXRlbXNcbiAgICAgICAgbmV3QXJyYXkubGVuZ3RoID0gbmV3QXJyYXlJbmRleCArIDE7XG5cbiAgICAgICAgcmV0dXJuIG5ld0FycmF5O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6KFQpPT5ib29sZWFuKTogVFtdIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZShhcnJheSwgaXRlbSA9PiAhaXRlbU1hdGNoKGl0ZW0pKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gbWFwPFQsIFU+KGFycmF5OlRbXSwgbWFwRnVuY3Rpb246ICh2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVSwgdGhpc0FyZz86IGFueSk6IFVbXSB7XG4gICAgICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlLm1hcCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGFycmF5Lm1hcChtYXBGdW5jdGlvbiwgdGhpc0FyZyk7XG5cbiAgICAgICAgbGV0IHJlc3VsdDpVW10gPSBuZXcgQXJyYXkoYXJyYXkubGVuZ3RoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGFycmF5W2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT09ICd1bmRlZmluZWQnKSByZXN1bHRbaV0gPSBtYXBGdW5jdGlvbihhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgICAgICAgICAgZWxzZSByZXN1bHRbaV0gPSBtYXBGdW5jdGlvbi5jYWxsKHRoaXNBcmcsIGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VD4oYXJyYXk6VFtdLCByZWR1Y2VyOiAocHJldmlvdXNWYWx1ZTogVCwgY3VycmVudFZhbHVlOiBULCBjdXJyZW50SW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVCwgaW5pdGlhbFZhbHVlPzogVCk6IFQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxULCBVID0gVD4oYXJyYXk6VFtdLCByZWR1Y2VyOiAocHJldmlvdXNWYWx1ZTogVSwgY3VycmVudFZhbHVlOiBULCBjdXJyZW50SW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVSwgaW5pdGlhbFZhbHVlOiBVKTogVTtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVkdWNlPFQ+KGFycmF5OlRbXSwgcmVkdWNlcjogKHByZXZpb3VzVmFsdWU6IFQsIGN1cnJlbnRWYWx1ZTogVCwgY3VycmVudEluZGV4OiBudW1iZXIsIGFycmF5OiBUW10pID0+IFQsIGluaXRpYWxWYWx1ZTogVCk6IFQge1xuICAgICAgICBpZiAodHlwZW9mIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UgPT09ICdmdW5jdGlvbicpIHJldHVybiBhcnJheS5yZWR1Y2UocmVkdWNlciwgaW5pdGlhbFZhbHVlKTtcblxuICAgICAgICBsZXQgYWNjdW11bGF0b3I6VCA9IGluaXRpYWxWYWx1ZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvciAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICByZWR1Y2VyLmNhbGwodW5kZWZpbmVkLCBhY2N1bXVsYXRvciwgYXJyYXlbaV0sIGksIGFycmF5KSA6XG4gICAgICAgICAgICAgICAgYXJyYXlbaV07XG5cbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var BoxHelper;
    (function (BoxHelper) {
        /**
         * Bound a box to a minimum and/or maximum bounding box
         * @param box The box to bound
         * @param boundsMin The minimum bounding box
         * @param boundsMax The maximum bounding box
         */
        function bound(box, boundsMin, boundsMax) {
            if (typeof boundsMin === 'number') boundsMin = {
                width: boundsMin,
                height: boundsMin
            };
            if (typeof boundsMax === 'number') boundsMax = {
                width: boundsMax,
                height: boundsMax
            };
            // Get the scale change to scale box down to maximum bounds
            var scaleToMax = boundsMax ? Math.min(boundsMax.width / box.width, boundsMax.height / box.height) : 1;
            // Get the scale change to scale box up to minimum bounds
            var scaleToMin = boundsMin ? Math.max(boundsMin.width / box.width, boundsMin.height / box.height) : 1;
            var scalar = void 0;
            if (scaleToMax < 1) scalar = scaleToMax;else if (scaleToMin > 1) scalar = scaleToMin;else return box;
            return scale(box, scalar);
        }
        BoxHelper.bound = bound;
        /**
         * Scale a box by a scalar
         * @param box The box
         * @param scalar The number to scale the box by
         */
        function scale(box, scalar) {
            if (typeof scalar === 'number') scalar = {
                width: scalar,
                height: scalar
            };
            return {
                width: box.width * scalar.width,
                height: box.height * scalar.height
            };
        }
        BoxHelper.scale = scale;
        /**
         * Returns the box, without decimals
         * @param box The box
         */
        function floor(box) {
            return {
                width: ~~box.width,
                height: ~~box.height
            };
        }
        BoxHelper.floor = floor;
    })(BoxHelper = RideStylerShowcase.BoxHelper || (RideStylerShowcase.BoxHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvQm94SGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIkJveEhlbHBlciIsImJvdW5kIiwiYm94IiwiYm91bmRzTWluIiwiYm91bmRzTWF4Iiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZVRvTWF4IiwiTWF0aCIsIm1pbiIsInNjYWxlVG9NaW4iLCJtYXgiLCJzY2FsYXIiLCJzY2FsZSIsImZsb29yIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxTQUFBO0FBQUEsS0FBQSxVQUFBQSxTQUFBLEVBQVM7QUFDbEM7Ozs7OztBQU1BLGlCQUFBQyxLQUFBLENBQXNCQyxHQUF0QixFQUErQkMsU0FBL0IsRUFBc0RDLFNBQXRELEVBQTJFO0FBQ3ZFLGdCQUFJLE9BQU9ELFNBQVAsS0FBcUIsUUFBekIsRUFBbUNBLFlBQVk7QUFDM0NFLHVCQUFPRixTQURvQztBQUUzQ0csd0JBQVFIO0FBRm1DLGFBQVo7QUFLbkMsZ0JBQUksT0FBT0MsU0FBUCxLQUFxQixRQUF6QixFQUFtQ0EsWUFBWTtBQUMzQ0MsdUJBQU9ELFNBRG9DO0FBRTNDRSx3QkFBUUY7QUFGbUMsYUFBWjtBQUtuQztBQUNBLGdCQUFJRyxhQUFvQkgsWUFBWUksS0FBS0MsR0FBTCxDQUFTTCxVQUFVQyxLQUFWLEdBQWdCSCxJQUFJRyxLQUE3QixFQUFvQ0QsVUFBVUUsTUFBVixHQUFpQkosSUFBSUksTUFBekQsQ0FBWixHQUErRSxDQUF2RztBQUNBO0FBQ0EsZ0JBQUlJLGFBQW9CUCxZQUFZSyxLQUFLRyxHQUFMLENBQVNSLFVBQVVFLEtBQVYsR0FBZ0JILElBQUlHLEtBQTdCLEVBQW9DRixVQUFVRyxNQUFWLEdBQWlCSixJQUFJSSxNQUF6RCxDQUFaLEdBQStFLENBQXZHO0FBRUEsZ0JBQUlNLGVBQUo7QUFFQSxnQkFBSUwsYUFBYSxDQUFqQixFQUFvQkssU0FBU0wsVUFBVCxDQUFwQixLQUNLLElBQUlHLGFBQWEsQ0FBakIsRUFBb0JFLFNBQVNGLFVBQVQsQ0FBcEIsS0FDQSxPQUFPUixHQUFQO0FBRUwsbUJBQU9XLE1BQU1YLEdBQU4sRUFBV1UsTUFBWCxDQUFQO0FBQ0g7QUF2QmVaLGtCQUFBQyxLQUFBLEdBQUtBLEtBQUw7QUF5QmhCOzs7OztBQUtBLGlCQUFBWSxLQUFBLENBQXNCWCxHQUF0QixFQUErQlUsTUFBL0IsRUFBZ0Q7QUFDNUMsZ0JBQUksT0FBT0EsTUFBUCxLQUFrQixRQUF0QixFQUFnQ0EsU0FBUztBQUNyQ1AsdUJBQU9PLE1BRDhCO0FBRXJDTix3QkFBUU07QUFGNkIsYUFBVDtBQUtoQyxtQkFBTztBQUNIUCx1QkFBT0gsSUFBSUcsS0FBSixHQUFZTyxPQUFPUCxLQUR2QjtBQUVIQyx3QkFBUUosSUFBSUksTUFBSixHQUFhTSxPQUFPTjtBQUZ6QixhQUFQO0FBSUg7QUFWZU4sa0JBQUFhLEtBQUEsR0FBS0EsS0FBTDtBQVloQjs7OztBQUlBLGlCQUFBQyxLQUFBLENBQXNCWixHQUF0QixFQUE2QjtBQUN6QixtQkFBTztBQUNIRyx1QkFBTyxDQUFDLENBQUNILElBQUlHLEtBRFY7QUFFSEMsd0JBQVEsQ0FBQyxDQUFDSixJQUFJSTtBQUZYLGFBQVA7QUFJSDtBQUxlTixrQkFBQWMsS0FBQSxHQUFLQSxLQUFMO0FBV25CLEtBaEU0QixFQUFBZCxZQUFBRCxtQkFBQUMsU0FBQSxLQUFBRCxtQkFBQUMsU0FBQSxHQUFTLEVBQVQsQ0FBQTtBQWdFNUIsQ0FoRUQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9Cb3hIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLkJveEhlbHBlciB7XG4gICAgLyoqXG4gICAgICogQm91bmQgYSBib3ggdG8gYSBtaW5pbXVtIGFuZC9vciBtYXhpbXVtIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSBib3ggVGhlIGJveCB0byBib3VuZFxuICAgICAqIEBwYXJhbSBib3VuZHNNaW4gVGhlIG1pbmltdW0gYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtIGJvdW5kc01heCBUaGUgbWF4aW11bSBib3VuZGluZyBib3hcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gYm91bmQoYm94OkJveCwgYm91bmRzTWluPzpCb3h8bnVtYmVyLCBib3VuZHNNYXg/OkJveHxudW1iZXIpOkJveCB7XG4gICAgICAgIGlmICh0eXBlb2YgYm91bmRzTWluID09PSAnbnVtYmVyJykgYm91bmRzTWluID0ge1xuICAgICAgICAgICAgd2lkdGg6IGJvdW5kc01pbixcbiAgICAgICAgICAgIGhlaWdodDogYm91bmRzTWluXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBib3VuZHNNYXggPT09ICdudW1iZXInKSBib3VuZHNNYXggPSB7XG4gICAgICAgICAgICB3aWR0aDogYm91bmRzTWF4LFxuICAgICAgICAgICAgaGVpZ2h0OiBib3VuZHNNYXhcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNjYWxlIGNoYW5nZSB0byBzY2FsZSBib3ggZG93biB0byBtYXhpbXVtIGJvdW5kc1xuICAgICAgICBsZXQgc2NhbGVUb01heDpudW1iZXIgPSBib3VuZHNNYXggPyBNYXRoLm1pbihib3VuZHNNYXgud2lkdGgvYm94LndpZHRoLCBib3VuZHNNYXguaGVpZ2h0L2JveC5oZWlnaHQpIDogMTtcbiAgICAgICAgLy8gR2V0IHRoZSBzY2FsZSBjaGFuZ2UgdG8gc2NhbGUgYm94IHVwIHRvIG1pbmltdW0gYm91bmRzXG4gICAgICAgIGxldCBzY2FsZVRvTWluOm51bWJlciA9IGJvdW5kc01pbiA/IE1hdGgubWF4KGJvdW5kc01pbi53aWR0aC9ib3gud2lkdGgsIGJvdW5kc01pbi5oZWlnaHQvYm94LmhlaWdodCkgOiAxO1xuXG4gICAgICAgIGxldCBzY2FsYXI6bnVtYmVyO1xuXG4gICAgICAgIGlmIChzY2FsZVRvTWF4IDwgMSkgc2NhbGFyID0gc2NhbGVUb01heDtcbiAgICAgICAgZWxzZSBpZiAoc2NhbGVUb01pbiA+IDEpIHNjYWxhciA9IHNjYWxlVG9NaW47XG4gICAgICAgIGVsc2UgcmV0dXJuIGJveDtcblxuICAgICAgICByZXR1cm4gc2NhbGUoYm94LCBzY2FsYXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYWxlIGEgYm94IGJ5IGEgc2NhbGFyXG4gICAgICogQHBhcmFtIGJveCBUaGUgYm94XG4gICAgICogQHBhcmFtIHNjYWxhciBUaGUgbnVtYmVyIHRvIHNjYWxlIHRoZSBib3ggYnlcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2NhbGUoYm94OkJveCwgc2NhbGFyOm51bWJlcnxCb3gpOkJveCB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NhbGFyID09PSAnbnVtYmVyJykgc2NhbGFyID0ge1xuICAgICAgICAgICAgd2lkdGg6IHNjYWxhcixcbiAgICAgICAgICAgIGhlaWdodDogc2NhbGFyXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiBib3gud2lkdGggKiBzY2FsYXIud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGJveC5oZWlnaHQgKiBzY2FsYXIuaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYm94LCB3aXRob3V0IGRlY2ltYWxzXG4gICAgICogQHBhcmFtIGJveCBUaGUgYm94XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZsb29yKGJveDpCb3gpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiB+fmJveC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogfn5ib3guaGVpZ2h0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIEJveCB7XG4gICAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICAgIGhlaWdodDogbnVtYmVyO1xuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var GUIDHelper = void 0;
    (function (GUIDHelper) {
        // Maps for number <-> hex string conversion
        var byteToHex = [];
        var hexToByte = {};
        for (var i = 0; i < 256; i++) {
            byteToHex[i] = (i + 0x100).toString(16).substr(1);
            hexToByte[byteToHex[i]] = i;
        }
        /**
         * Parse a Guid into a common format
         * @param id The ID to parse
         * @param buffer An existing Guid/array to write to
         * @param offset The offset to begin writing at
         */
        function parse(id, buffer, offset) {
            var i = buffer && offset || 0;
            var j = 0;
            buffer = buffer || [];
            id.toLowerCase().replace(/[0-9a-f]{2}/g, function (oct) {
                if (j < 16) buffer[i + j++] = hexToByte[oct];
                return '';
            });
            // Zero out remaining bytes if string was short
            while (j < 16) {
                buffer[i + j++] = 0;
            }return buffer;
        }
        GUIDHelper.parse = parse;
        /**
         * Convert a parsed Guid back into a string
         * @param id A parsed Guid to unparse
         * @param offset Starting index in the id to begin reading from
         */
        function unparse(id, offset) {
            var i = offset || 0;
            var bth = byteToHex;
            return bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]];
        }
        GUIDHelper.unparse = unparse;
        /**
         * Compare two Guids to determine if they are equal
         * @param idA The first ID to parse (if needed) and then compare
         * @param idB The second ID to parse (if needed) and then compare
         */
        function areEqual(idA, idB) {
            // Handle undefined/unspecified parameters
            {
                if (!idA) {
                    if (!idB) return true;
                    return false;
                }
                if (!idB) return false;
            }
            var guidA = void 0;
            var guidB = void 0;
            if (typeof idA === 'string') guidA = parse(idA);else guidA = idA;
            if (typeof idB === 'string') guidB = parse(idB);else guidB = idB;
            for (var _i = 0; _i < guidA.length; _i++) {
                var byteA = guidA[_i];
                var byteB = guidB[_i];
                if (byteA !== byteB) return false;
            }
            return true;
        }
        GUIDHelper.areEqual = areEqual;
    })(GUIDHelper = RideStylerShowcase.GUIDHelper || (RideStylerShowcase.GUIDHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvR1VJREhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJHVUlESGVscGVyIiwiYnl0ZVRvSGV4IiwiaGV4VG9CeXRlIiwiaSIsInRvU3RyaW5nIiwic3Vic3RyIiwicGFyc2UiLCJpZCIsImJ1ZmZlciIsIm9mZnNldCIsImoiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJvY3QiLCJ1bnBhcnNlIiwiYnRoIiwiYXJlRXF1YWwiLCJpZEEiLCJpZEIiLCJndWlkQSIsImd1aWRCIiwibGVuZ3RoIiwiYnl0ZUEiLCJieXRlQiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBRXhCLFFBQWlCQyxtQkFBakI7QUFBQSxLQUFBLFVBQWlCQSxVQUFqQixFQUEyQjtBQUN2QjtBQUNBLFlBQUlDLFlBQXFCLEVBQXpCO0FBQ0EsWUFBSUMsWUFBa0MsRUFBdEM7QUFFQSxhQUFLLElBQUlDLElBQUksQ0FBYixFQUFnQkEsSUFBSSxHQUFwQixFQUF5QkEsR0FBekIsRUFBOEI7QUFDMUJGLHNCQUFVRSxDQUFWLElBQWUsQ0FBQ0EsSUFBSSxLQUFMLEVBQVlDLFFBQVosQ0FBcUIsRUFBckIsRUFBeUJDLE1BQXpCLENBQWdDLENBQWhDLENBQWY7QUFDQUgsc0JBQVVELFVBQVVFLENBQVYsQ0FBVixJQUEwQkEsQ0FBMUI7QUFDSDtBQUVEOzs7Ozs7QUFNQSxpQkFBQUcsS0FBQSxDQUFzQkMsRUFBdEIsRUFBaUNDLE1BQWpDLEVBQStDQyxNQUEvQyxFQUE2RDtBQUN6RCxnQkFBTU4sSUFBS0ssVUFBVUMsTUFBWCxJQUFzQixDQUFoQztBQUNBLGdCQUFJQyxJQUFJLENBQVI7QUFFQUYscUJBQVNBLFVBQVUsRUFBbkI7QUFFQUQsZUFBR0ksV0FBSCxHQUFpQkMsT0FBakIsQ0FBeUIsY0FBekIsRUFBeUMsVUFBU0MsR0FBVCxFQUFZO0FBQ2pELG9CQUFJSCxJQUFJLEVBQVIsRUFDSUYsT0FBT0wsSUFBSU8sR0FBWCxJQUFrQlIsVUFBVVcsR0FBVixDQUFsQjtBQUVKLHVCQUFPLEVBQVA7QUFDSCxhQUxEO0FBT0E7QUFDQSxtQkFBT0gsSUFBSSxFQUFYO0FBQWVGLHVCQUFPTCxJQUFJTyxHQUFYLElBQWtCLENBQWxCO0FBQWYsYUFFQSxPQUFPRixNQUFQO0FBQ0g7QUFqQmVSLG1CQUFBTSxLQUFBLEdBQUtBLEtBQUw7QUFtQmhCOzs7OztBQUtBLGlCQUFBUSxPQUFBLENBQXdCUCxFQUF4QixFQUFpQ0UsTUFBakMsRUFBK0M7QUFDM0MsZ0JBQUlOLElBQUlNLFVBQVUsQ0FBbEI7QUFDQSxnQkFBTU0sTUFBTWQsU0FBWjtBQUVBLG1CQUFRYyxJQUFJUixHQUFHSixHQUFILENBQUosSUFBZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBQWYsR0FDQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBREEsR0FDZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBRGYsR0FDOEIsR0FEOUIsR0FFQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBRkEsR0FFZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBRmYsR0FFOEIsR0FGOUIsR0FHQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSEEsR0FHZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSGYsR0FHOEIsR0FIOUIsR0FJQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSkEsR0FJZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSmYsR0FJOEIsR0FKOUIsR0FLQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTEEsR0FLZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTGYsR0FNQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTkEsR0FNZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTmYsR0FPQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBUEEsR0FPZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBUHZCO0FBUUg7QUFaZUgsbUJBQUFjLE9BQUEsR0FBT0EsT0FBUDtBQWNoQjs7Ozs7QUFLQSxpQkFBQUUsUUFBQSxDQUF5QkMsR0FBekIsRUFBMENDLEdBQTFDLEVBQXlEO0FBQ3JEO0FBQ0E7QUFDSSxvQkFBSSxDQUFDRCxHQUFMLEVBQVU7QUFDTix3QkFBSSxDQUFDQyxHQUFMLEVBQVUsT0FBTyxJQUFQO0FBQ1YsMkJBQU8sS0FBUDtBQUNIO0FBQ0Qsb0JBQUksQ0FBQ0EsR0FBTCxFQUFVLE9BQU8sS0FBUDtBQUNiO0FBRUQsZ0JBQUlDLGNBQUo7QUFDQSxnQkFBSUMsY0FBSjtBQUVBLGdCQUFJLE9BQU9ILEdBQVAsS0FBZSxRQUFuQixFQUE2QkUsUUFBUWIsTUFBTVcsR0FBTixDQUFSLENBQTdCLEtBQ0tFLFFBQVFGLEdBQVI7QUFFTCxnQkFBSSxPQUFPQyxHQUFQLEtBQWUsUUFBbkIsRUFBNkJFLFFBQVFkLE1BQU1ZLEdBQU4sQ0FBUixDQUE3QixLQUNLRSxRQUFRRixHQUFSO0FBRUwsaUJBQUssSUFBSWYsS0FBSSxDQUFiLEVBQWdCQSxLQUFJZ0IsTUFBTUUsTUFBMUIsRUFBa0NsQixJQUFsQyxFQUF1QztBQUNuQyxvQkFBSW1CLFFBQWVILE1BQU1oQixFQUFOLENBQW5CO0FBQ0Esb0JBQUlvQixRQUFlSCxNQUFNakIsRUFBTixDQUFuQjtBQUVBLG9CQUFJbUIsVUFBVUMsS0FBZCxFQUFxQixPQUFPLEtBQVA7QUFDeEI7QUFFRCxtQkFBTyxJQUFQO0FBQ0g7QUEzQmV2QixtQkFBQWdCLFFBQUEsR0FBUUEsUUFBUjtBQTRCbkIsS0F2RkQsRUFBaUJoQixhQUFBRCxtQkFBQUMsVUFBQSxLQUFBRCxtQkFBQUMsVUFBQSxHQUFVLEVBQVYsQ0FBakI7QUF3RkgsQ0ExRkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9HVUlESGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZXtcbiAgICBleHBvcnQgdHlwZSBHdWlkID0gbnVtYmVyW107XG4gICAgZXhwb3J0IG5hbWVzcGFjZSBHVUlESGVscGVyIHtcbiAgICAgICAgLy8gTWFwcyBmb3IgbnVtYmVyIDwtPiBoZXggc3RyaW5nIGNvbnZlcnNpb25cbiAgICAgICAgbGV0IGJ5dGVUb0hleDpzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgaGV4VG9CeXRlOntbaGV4OnN0cmluZ106bnVtYmVyfSA9IHt9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgICAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbiAgICAgICAgICAgIGhleFRvQnl0ZVtieXRlVG9IZXhbaV1dID0gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJzZSBhIEd1aWQgaW50byBhIGNvbW1vbiBmb3JtYXRcbiAgICAgICAgICogQHBhcmFtIGlkIFRoZSBJRCB0byBwYXJzZVxuICAgICAgICAgKiBAcGFyYW0gYnVmZmVyIEFuIGV4aXN0aW5nIEd1aWQvYXJyYXkgdG8gd3JpdGUgdG9cbiAgICAgICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHRvIGJlZ2luIHdyaXRpbmcgYXRcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBwYXJzZShpZDpzdHJpbmcsIGJ1ZmZlcj86R3VpZCwgb2Zmc2V0PzpudW1iZXIpOkd1aWQge1xuICAgICAgICAgICAgY29uc3QgaSA9IChidWZmZXIgJiYgb2Zmc2V0KSB8fCAwO1xuICAgICAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyIHx8IFtdO1xuXG4gICAgICAgICAgICBpZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1swLTlhLWZdezJ9L2csIGZ1bmN0aW9uKG9jdCkge1xuICAgICAgICAgICAgICAgIGlmIChqIDwgMTYpIC8vIERvbid0IG92ZXJmbG93IVxuICAgICAgICAgICAgICAgICAgICBidWZmZXJbaSArIGorK10gPSBoZXhUb0J5dGVbb2N0XTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgLy8gWmVybyBvdXQgcmVtYWluaW5nIGJ5dGVzIGlmIHN0cmluZyB3YXMgc2hvcnRcbiAgICAgICAgICAgIHdoaWxlIChqIDwgMTYpIGJ1ZmZlcltpICsgaisrXSA9IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgYSBwYXJzZWQgR3VpZCBiYWNrIGludG8gYSBzdHJpbmdcbiAgICAgICAgICogQHBhcmFtIGlkIEEgcGFyc2VkIEd1aWQgdG8gdW5wYXJzZVxuICAgICAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0aW5nIGluZGV4IGluIHRoZSBpZCB0byBiZWdpbiByZWFkaW5nIGZyb21cbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB1bnBhcnNlKGlkOkd1aWQsIG9mZnNldD86bnVtYmVyKTpzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGkgPSBvZmZzZXQgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGJ0aCA9IGJ5dGVUb0hleDtcblxuICAgICAgICAgICAgcmV0dXJuICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcGFyZSB0d28gR3VpZHMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWFsXG4gICAgICAgICAqIEBwYXJhbSBpZEEgVGhlIGZpcnN0IElEIHRvIHBhcnNlIChpZiBuZWVkZWQpIGFuZCB0aGVuIGNvbXBhcmVcbiAgICAgICAgICogQHBhcmFtIGlkQiBUaGUgc2Vjb25kIElEIHRvIHBhcnNlIChpZiBuZWVkZWQpIGFuZCB0aGVuIGNvbXBhcmVcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbChpZEE6c3RyaW5nfEd1aWQsIGlkQjpzdHJpbmd8R3VpZCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgdW5kZWZpbmVkL3Vuc3BlY2lmaWVkIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlkQSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkQikgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpZEIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGd1aWRBOkd1aWQ7XG4gICAgICAgICAgICBsZXQgZ3VpZEI6R3VpZDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZEEgPT09ICdzdHJpbmcnKSBndWlkQSA9IHBhcnNlKGlkQSk7XG4gICAgICAgICAgICBlbHNlIGd1aWRBID0gaWRBO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGlkQiA9PT0gJ3N0cmluZycpIGd1aWRCID0gcGFyc2UoaWRCKTtcbiAgICAgICAgICAgIGVsc2UgZ3VpZEIgPSBpZEI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3VpZEEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYnl0ZUE6bnVtYmVyID0gZ3VpZEFbaV07XG4gICAgICAgICAgICAgICAgbGV0IGJ5dGVCOm51bWJlciA9IGd1aWRCW2ldXG5cbiAgICAgICAgICAgICAgICBpZiAoYnl0ZUEgIT09IGJ5dGVCKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var HTMLHelper;
    (function (HTMLHelper) {
        /**
         * Returns a new set of elements matched from the original set
         * @param elements The elements to match
         * @param match The matching function
         */
        function elementsMatching(elements, match) {
            var matchingElements = new Array(elements.length);
            var matchingElementsIndex = 0;
            for (var index = 0; index < elements.length; index++) {
                var child = elements[index];
                if (match(child)) {
                    matchingElements[matchingElementsIndex++] = child;
                }
            }
            matchingElements.length = matchingElementsIndex;
            return matchingElements;
        }
        HTMLHelper.elementsMatching = elementsMatching;
        /**
         * Returns the first element in the set to match the function
         * @param elements The set of elements to search in
         * @param match The matching function
         */
        function firstElementMatching(elements, match) {
            for (var index = 0; index < elements.length; index++) {
                var child = elements[index];
                if (match(child)) return child;
            }
            return null;
        }
        HTMLHelper.firstElementMatching = firstElementMatching;
        /**
         * Returns the last element in the set to match the function
         * @param elements The set of elements to search in
         * @param match The matching function
         */
        function lastElementMatching(elements, match) {
            for (var index = elements.length - 1; index >= 0; index--) {
                var child = elements[index];
                if (match(child)) return child;
            }
            return null;
        }
        HTMLHelper.lastElementMatching = lastElementMatching;
        function childrenMatching(element, match) {
            return elementsMatching(element.children, match);
        }
        HTMLHelper.childrenMatching = childrenMatching;
        /**
         * Search an element for the first child matching the match function
         * @param element The element to search children of
         * @param match The match function
         */
        function firstChildMatching(element, match) {
            return firstElementMatching(element.children, match);
        }
        HTMLHelper.firstChildMatching = firstChildMatching;
        /**
         * Returns an array of element's children matching the passed in set of
         * @param element The element to search the children of
         * @param classes The set of classes to match children with
         */
        function childrenWithClasses(element) {
            for (var _len = arguments.length, classes = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                classes[_key - 1] = arguments[_key];
            }

            classes = RideStylerShowcase.StyleHelper.flattenClassList(classes);
            return childrenMatching(element, function (child) {
                return RideStylerShowcase.StyleHelper.hasClasses(child, classes);
            });
        }
        HTMLHelper.childrenWithClasses = childrenWithClasses;
        /**
         * Removes children from the element matching a class or set of classes
         * @param element The element to search the children
         * @param classes The classes to match children to remove
         */
        function removeChildrenWithClasses(element) {
            for (var _len2 = arguments.length, classes = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                classes[_key2 - 1] = arguments[_key2];
            }

            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = childrenWithClasses.apply(undefined, [element].concat(classes))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var child = _step.value;

                    element.removeChild(child);
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }
        }
        HTMLHelper.removeChildrenWithClasses = removeChildrenWithClasses;
        /**
         * Search an element for the first child with the specified tag
         * @param element The element to search children of
         * @param tagName The tag to look for
         */
        function firstChildWithTag(element, tagName) {
            tagName = tagName.toUpperCase();
            return firstChildMatching(element, function (child) {
                return child.tagName === tagName;
            });
        }
        HTMLHelper.firstChildWithTag = firstChildWithTag;
        /**
         * Search an element for the first child with the specified class(es) in its class list
         * @param element The element to search children of
         * @param classes The classes to look for
         */
        function firstChildWithClass(element) {
            for (var _len3 = arguments.length, classes = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
                classes[_key3 - 1] = arguments[_key3];
            }

            return firstChildMatching(element, function (child) {
                return RideStylerShowcase.StyleHelper.hasClasses(child, classes);
            });
        }
        HTMLHelper.firstChildWithClass = firstChildWithClass;
        /**
         * Detects if an element has a child with the specified class(es)
         * @param element The element to search the children of
         * @param classes The class(es) to look for
         */
        function hasChildWithClass(element) {
            for (var _len4 = arguments.length, classes = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
                classes[_key4 - 1] = arguments[_key4];
            }

            return !!firstChildWithClass.apply(undefined, [element].concat(classes));
        }
        HTMLHelper.hasChildWithClass = hasChildWithClass;
        /**
         * Detects if an element has a sibling with the specified class(es)
         * @param element The element to search the siblings of
         * @param classes The class(es) to look for
         */
        function hasSiblingWithClass(element) {
            for (var _len5 = arguments.length, classes = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
                classes[_key5 - 1] = arguments[_key5];
            }

            return hasChildWithClass.apply(undefined, [element.parentElement].concat(classes));
        }
        HTMLHelper.hasSiblingWithClass = hasSiblingWithClass;
        /**
         * Returns the last sibling of an element matching a specified class (or specified classes)
         * @param element The element to search siblings
         * @param classes The classes to look for
         */
        function lastSiblingWithClass(element) {
            for (var _len6 = arguments.length, classes = Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
                classes[_key6 - 1] = arguments[_key6];
            }

            return lastElementMatching(element.parentElement.children, function (sibling) {
                return sibling !== element && RideStylerShowcase.StyleHelper.hasClasses(sibling, classes);
            });
        }
        HTMLHelper.lastSiblingWithClass = lastSiblingWithClass;
        function applyOptions(element, options) {
            var htmlElement = element;
            if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object') return;
            if (typeof options.className === 'string') element.className = options.className;
            if (typeof options.id === 'string') element.id = options.id;
            if (options.wrap) options.wrap.appendChild(element);
            if (options.appendTo) options.appendTo.appendChild(options.wrap || element);
            if (typeof options.text === 'string') element.appendChild(document.createTextNode(options.text));
            if (options.append) {
                if (options.append instanceof Array) {
                    var _iteratorNormalCompletion2 = true;
                    var _didIteratorError2 = false;
                    var _iteratorError2 = undefined;

                    try {
                        for (var _iterator2 = options.append[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                            var childElement = _step2.value;

                            element.appendChild(childElement);
                        }
                    } catch (err) {
                        _didIteratorError2 = true;
                        _iteratorError2 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                _iterator2.return();
                            }
                        } finally {
                            if (_didIteratorError2) {
                                throw _iteratorError2;
                            }
                        }
                    }
                } else {
                    element.appendChild(options.append);
                }
                document.createElementNS;
            }
            if (options.attributes) {
                for (var key in options.attributes) {
                    if (options.attributes.hasOwnProperty(key)) {
                        element.setAttribute(key, options.attributes[key]);
                    }
                }
            }
            if (options.style && _typeof(htmlElement.style) === 'object') {
                for (var _key7 in options.style) {
                    if (options.style.hasOwnProperty(_key7)) {
                        htmlElement.style[_key7] = options.style[_key7];
                    }
                }
            }
            if (options.properties) {
                for (var _key8 in options.properties) {
                    if (options.properties.hasOwnProperty(_key8)) {
                        element[_key8] = options.properties[_key8];
                    }
                }
            }
        }
        function createElement(tagNameOrDivOptions, options) {
            var tagName = void 0;
            if (typeof tagNameOrDivOptions === 'string') tagName = tagNameOrDivOptions;else {
                tagName = 'div';
                options = tagNameOrDivOptions;
            }
            var element = document.createElement(tagName);
            applyOptions(element, options);
            return element;
        }
        HTMLHelper.createElement = createElement;
        /**
         * Creates an element with the specified text
         * @param tagName The tag of the element to create
         * @param text The text to add to the created element
         */
        function createElementWithText(tagName, text) {
            return createElement(tagName, { text: text });
        }
        HTMLHelper.createElementWithText = createElementWithText;
        function createElementWithClass(tagNameOrClassName, className) {
            var tagName = tagNameOrClassName;
            if (typeof className === 'undefined') {
                tagName = 'div';
                className = tagNameOrClassName;
            }
            return createElement(tagName, { className: className });
        }
        HTMLHelper.createElementWithClass = createElementWithClass;
        /**
         * Creates an element with the specified id
         * @param tagName The tag of the element to create
         * @param id The id to add to the element
         */
        function createElementWithID(tagName, id) {
            return createElement(tagName, { id: id });
        }
        HTMLHelper.createElementWithID = createElementWithID;
        /**
         * Create a new text element
         * @param text The text to create the text element with
         */
        function createTextElement(text) {
            return document.createTextNode(text);
        }
        HTMLHelper.createTextElement = createTextElement;
        function createButton(options) {
            var element = createElement('button', options);
            var buttonClassName = 'ridestyler-showcase-button';
            element.classList.add(buttonClassName);
            if (options.large) element.classList.add(buttonClassName + '-large');
            if (options.disabled) element.disabled = true;
            if (options.link) element.classList.add(buttonClassName + '-link');
            if (options.skinny) element.classList.add(buttonClassName + '-skinny');
            return element;
        }
        HTMLHelper.createButton = createButton;
        var iconClassPrefix = 'ridestyler-showcase-icon ridestyler-showcase-icon-';
        function createIcon(iconOrOptions) {
            var options = void 0;
            // Setup options
            if (typeof iconOrOptions === 'string') {
                options = {
                    icon: iconOrOptions
                };
            } else {
                options = iconOrOptions;
            }
            // Build icon className
            {
                var iconClass = options.icon;
                if (!iconClass.startsWith(iconClassPrefix)) iconClass = iconClassPrefix + iconClass;
                if (typeof options.className === 'string') iconClass = options.className + ' ' + iconClass;
                options.className = iconClass;
            }
            return createElement('i', options);
        }
        HTMLHelper.createIcon = createIcon;
        function createSVGElement(tagName, options) {
            var element = document.createElementNS('http://www.w3.org/2000/svg', tagName);
            applyOptions(element, options);
            return element;
        }
        HTMLHelper.createSVGElement = createSVGElement;
        function createDescriptionList(values) {
            var descriptionList = HTMLHelper.createElement('dl', {
                className: 'ridestyler-showcase-description-list',
                appendTo: this.summaryElement
            });
            if (values) appendDescriptionListValues(descriptionList, values);
            return descriptionList;
        }
        HTMLHelper.createDescriptionList = createDescriptionList;
        function appendDescriptionListValues(descriptionList, values) {
            var _iteratorNormalCompletion3 = true;
            var _didIteratorError3 = false;
            var _iteratorError3 = undefined;

            try {
                for (var _iterator3 = values[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                    var value = _step3.value;

                    HTMLHelper.createElement('dt', {
                        text: value.label,
                        appendTo: descriptionList
                    });
                    HTMLHelper.createElement('dd', {
                        text: value.description,
                        appendTo: descriptionList
                    });
                }
            } catch (err) {
                _didIteratorError3 = true;
                _iteratorError3 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion3 && _iterator3.return) {
                        _iterator3.return();
                    }
                } finally {
                    if (_didIteratorError3) {
                        throw _iteratorError3;
                    }
                }
            }
        }
        HTMLHelper.appendDescriptionListValues = appendDescriptionListValues;
        /**
         * Removes all children from an element
         * @param element The element to empty
         */
        function empty(element) {
            var child = void 0;
            while (child = element.lastChild) {
                element.removeChild(child);
            }
        }
        HTMLHelper.empty = empty;
        function once(element, type, listener, useCapture) {
            var onceListener = function onceListener(evt) {
                element.removeEventListener(type, onceListener, useCapture);
                if ((typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) === 'object') listener = listener.handleEvent;
                return listener.call(this, evt);
            };
            element.addEventListener(type, onceListener, useCapture);
        }
        HTMLHelper.once = once;
        /**
         * Returns the document that the element is a part of (if there is one)
         * @param element The element
         */
        function getDocument(element) {
            return element.ownerDocument;
        }
        HTMLHelper.getDocument = getDocument;
        /**
         * Returns the window that the element is a part of (if there is one)
         * @param element The element
         */
        function getWindow(element) {
            return getDocument(element).defaultView;
        }
        HTMLHelper.getWindow = getWindow;
        /**
         * Sets the content of an element to a string
         * @param element The element
         * @param text The text
         * @returns The element that was passed in
         */
        function setText(element, text) {
            empty(element);
            element.appendChild(document.createTextNode(text));
            return element;
        }
        HTMLHelper.setText = setText;
    })(HTMLHelper = RideStylerShowcase.HTMLHelper || (RideStylerShowcase.HTMLHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvSFRNTEhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJIVE1MSGVscGVyIiwiZWxlbWVudHNNYXRjaGluZyIsImVsZW1lbnRzIiwibWF0Y2giLCJtYXRjaGluZ0VsZW1lbnRzIiwiQXJyYXkiLCJsZW5ndGgiLCJtYXRjaGluZ0VsZW1lbnRzSW5kZXgiLCJpbmRleCIsImNoaWxkIiwiZmlyc3RFbGVtZW50TWF0Y2hpbmciLCJsYXN0RWxlbWVudE1hdGNoaW5nIiwiY2hpbGRyZW5NYXRjaGluZyIsImVsZW1lbnQiLCJjaGlsZHJlbiIsImZpcnN0Q2hpbGRNYXRjaGluZyIsImNoaWxkcmVuV2l0aENsYXNzZXMiLCJjbGFzc2VzIiwiU3R5bGVIZWxwZXIiLCJmbGF0dGVuQ2xhc3NMaXN0IiwiaGFzQ2xhc3NlcyIsInJlbW92ZUNoaWxkcmVuV2l0aENsYXNzZXMiLCJyZW1vdmVDaGlsZCIsImZpcnN0Q2hpbGRXaXRoVGFnIiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwiZmlyc3RDaGlsZFdpdGhDbGFzcyIsImhhc0NoaWxkV2l0aENsYXNzIiwiaGFzU2libGluZ1dpdGhDbGFzcyIsInBhcmVudEVsZW1lbnQiLCJsYXN0U2libGluZ1dpdGhDbGFzcyIsInNpYmxpbmciLCJhcHBseU9wdGlvbnMiLCJvcHRpb25zIiwiaHRtbEVsZW1lbnQiLCJjbGFzc05hbWUiLCJpZCIsIndyYXAiLCJhcHBlbmRDaGlsZCIsImFwcGVuZFRvIiwidGV4dCIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmQiLCJjaGlsZEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJhdHRyaWJ1dGVzIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsInByb3BlcnRpZXMiLCJjcmVhdGVFbGVtZW50IiwidGFnTmFtZU9yRGl2T3B0aW9ucyIsImNyZWF0ZUVsZW1lbnRXaXRoVGV4dCIsImNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MiLCJ0YWdOYW1lT3JDbGFzc05hbWUiLCJjcmVhdGVFbGVtZW50V2l0aElEIiwiY3JlYXRlVGV4dEVsZW1lbnQiLCJjcmVhdGVCdXR0b24iLCJidXR0b25DbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJsYXJnZSIsImRpc2FibGVkIiwibGluayIsInNraW5ueSIsImljb25DbGFzc1ByZWZpeCIsImNyZWF0ZUljb24iLCJpY29uT3JPcHRpb25zIiwiaWNvbiIsImljb25DbGFzcyIsInN0YXJ0c1dpdGgiLCJjcmVhdGVTVkdFbGVtZW50IiwiY3JlYXRlRGVzY3JpcHRpb25MaXN0IiwidmFsdWVzIiwiZGVzY3JpcHRpb25MaXN0Iiwic3VtbWFyeUVsZW1lbnQiLCJhcHBlbmREZXNjcmlwdGlvbkxpc3RWYWx1ZXMiLCJ2YWx1ZSIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJlbXB0eSIsImxhc3RDaGlsZCIsIm9uY2UiLCJ0eXBlIiwibGlzdGVuZXIiLCJ1c2VDYXB0dXJlIiwib25jZUxpc3RlbmVyIiwiZXZ0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUV2ZW50IiwiY2FsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXREb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJnZXRXaW5kb3ciLCJkZWZhdWx0VmlldyIsInNldFRleHQiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsVUFBQTtBQUFBLEtBQUEsVUFBQUEsVUFBQSxFQUFVO0FBT25DOzs7OztBQUtBLGlCQUFBQyxnQkFBQSxDQUFvREMsUUFBcEQsRUFBNkVDLEtBQTdFLEVBQThHO0FBQzFHLGdCQUFJQyxtQkFBd0IsSUFBSUMsS0FBSixDQUFVSCxTQUFTSSxNQUFuQixDQUE1QjtBQUVBLGdCQUFJQyx3QkFBd0IsQ0FBNUI7QUFDQSxpQkFBSyxJQUFJQyxRQUFRLENBQWpCLEVBQW9CQSxRQUFRTixTQUFTSSxN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QyxtQkFBT2lGLFlBQVlqRixPQUFaLEVBQXFCb0YsV0FBNUI7QUFDSDtBQUZlakcsbUJBQUFnRyxTQUFBLEdBQVNBLFNBQVQ7QUFJaEI7Ozs7OztBQU1BLGlCQUFBRSxPQUFBLENBQXdCckYsT0FBeEIsRUFBNkMyQixJQUE3QyxFQUF3RDtBQUNwRDBDLGtCQUFNckUsT0FBTjtBQUNBQSxvQkFBUXlCLFdBQVIsQ0FBb0JHLFNBQVNDLGNBQVQsQ0FBd0JGLElBQXhCLENBQXBCO0FBQ0EsbUJBQU8zQixPQUFQO0FBQ0g7QUFKZWIsbUJBQUFrRyxPQUFBLEdBQU9BLE9BQVA7QUFLbkIsS0FsZjRCLEVBQUFsRyxhQUFBRCxtQkFBQUMsVUFBQSxLQUFBRCxtQkFBQUMsVUFBQSxHQUFVLEVBQVYsQ0FBQTtBQWtmNUIsQ0FsZkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9IVE1MSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRMaXN0PFQgZXh0ZW5kcyBFbGVtZW50ID0gSFRNTEVsZW1lbnQ+IHtcbiAgICAgICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgICAgIFtpbmRleDogbnVtYmVyXTogVDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgc2V0IG9mIGVsZW1lbnRzIG1hdGNoZWQgZnJvbSB0aGUgb3JpZ2luYWwgc2V0XG4gICAgICogQHBhcmFtIGVsZW1lbnRzIFRoZSBlbGVtZW50cyB0byBtYXRjaFxuICAgICAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2hpbmcgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZWxlbWVudHNNYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudHM6RWxlbWVudExpc3Q8VD4sIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6IFRbXSB7XG4gICAgICAgIGxldCBtYXRjaGluZ0VsZW1lbnRzOiBUW10gPSBuZXcgQXJyYXkoZWxlbWVudHMubGVuZ3RoKTtcblxuICAgICAgICBsZXQgbWF0Y2hpbmdFbGVtZW50c0luZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGVsZW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gZWxlbWVudHNbaW5kZXhdIGFzIFQ7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0VsZW1lbnRzW21hdGNoaW5nRWxlbWVudHNJbmRleCsrXSA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbWF0Y2hpbmdFbGVtZW50cy5sZW5ndGggPSBtYXRjaGluZ0VsZW1lbnRzSW5kZXg7XG4gICAgICAgIHJldHVybiBtYXRjaGluZ0VsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNldCB0byBtYXRjaCB0aGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgVGhlIHNldCBvZiBlbGVtZW50cyB0byBzZWFyY2ggaW5cbiAgICAgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoaW5nIGZ1bmN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpcnN0RWxlbWVudE1hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50czpFbGVtZW50TGlzdDxUPiwgbWF0Y2g6IChlbGVtZW50OkVsZW1lbnQpPT5ib29sZWFuKTogVCB7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKGNoaWxkKSkgcmV0dXJuIGNoaWxkIGFzIFQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIHNldCB0byBtYXRjaCB0aGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgVGhlIHNldCBvZiBlbGVtZW50cyB0byBzZWFyY2ggaW5cbiAgICAgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoaW5nIGZ1bmN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGxhc3RFbGVtZW50TWF0Y2hpbmc8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnRzOkVsZW1lbnRMaXN0PFQ+LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOiBUIHtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSBlbGVtZW50cy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaChjaGlsZCkpIHJldHVybiBjaGlsZCBhcyBUO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY2hpbGRyZW5NYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOiBUW10ge1xuICAgICAgICByZXR1cm4gZWxlbWVudHNNYXRjaGluZyhlbGVtZW50LmNoaWxkcmVuLCBtYXRjaCkgYXMgVFtdO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTZWFyY2ggYW4gZWxlbWVudCBmb3IgdGhlIGZpcnN0IGNoaWxkIG1hdGNoaW5nIHRoZSBtYXRjaCBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2ggZnVuY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmlyc3RDaGlsZE1hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50OkVsZW1lbnQsIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6VCB7XG4gICAgICAgIHJldHVybiBmaXJzdEVsZW1lbnRNYXRjaGluZyhlbGVtZW50LmNoaWxkcmVuLCBtYXRjaCkgYXMgVDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnQncyBjaGlsZHJlbiBtYXRjaGluZyB0aGUgcGFzc2VkIGluIHNldCBvZiBcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIHNldCBvZiBjbGFzc2VzIHRvIG1hdGNoIGNoaWxkcmVuIHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY2hpbGRyZW5XaXRoQ2xhc3NlczxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKTpUW10ge1xuICAgICAgICBjbGFzc2VzID0gU3R5bGVIZWxwZXIuZmxhdHRlbkNsYXNzTGlzdChjbGFzc2VzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjaGlsZHJlbk1hdGNoaW5nKGVsZW1lbnQsIGNoaWxkID0+IFN0eWxlSGVscGVyLmhhc0NsYXNzZXMoY2hpbGQgYXMgSFRNTEVsZW1lbnQsIGNsYXNzZXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGNoaWxkcmVuIGZyb20gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgYSBjbGFzcyBvciBzZXQgb2YgY2xhc3Nlc1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCB0aGUgY2hpbGRyZW5cbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBtYXRjaCBjaGlsZHJlbiB0byByZW1vdmVcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW5XaXRoQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuV2l0aENsYXNzZXMoZWxlbWVudCwgLi4uY2xhc3NlcykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGFuIGVsZW1lbnQgZm9yIHRoZSBmaXJzdCBjaGlsZCB3aXRoIHRoZSBzcGVjaWZpZWQgdGFnXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmaXJzdENoaWxkV2l0aFRhZzxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHRhZ05hbWU6c3RyaW5nKTpUIHtcbiAgICAgICAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gZmlyc3RDaGlsZE1hdGNoaW5nKGVsZW1lbnQsIGNoaWxkID0+IGNoaWxkLnRhZ05hbWUgPT09IHRhZ05hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBhbiBlbGVtZW50IGZvciB0aGUgZmlyc3QgY2hpbGQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKSBpbiBpdHMgY2xhc3MgbGlzdFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzc2VzIHRvIGxvb2sgZm9yXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpcnN0Q2hpbGRXaXRoQ2xhc3M8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6IEVsZW1lbnQsIC4uLmNsYXNzZXM6IHN0cmluZ1tdKTpUIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0Q2hpbGRNYXRjaGluZyhlbGVtZW50LCBjaGlsZCA9PiBTdHlsZUhlbHBlci5oYXNDbGFzc2VzKGNoaWxkIGFzIEhUTUxFbGVtZW50LCBjbGFzc2VzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBpZiBhbiBlbGVtZW50IGhhcyBhIGNoaWxkIHdpdGggdGhlIHNwZWNpZmllZCBjbGFzcyhlcylcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzKGVzKSB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNDaGlsZFdpdGhDbGFzcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgLi4uY2xhc3Nlczogc3RyaW5nW10pOmJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISFmaXJzdENoaWxkV2l0aENsYXNzKGVsZW1lbnQsIC4uLmNsYXNzZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdHMgaWYgYW4gZWxlbWVudCBoYXMgYSBzaWJsaW5nIHdpdGggdGhlIHNwZWNpZmllZCBjbGFzcyhlcylcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIHNpYmxpbmdzIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzKGVzKSB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNTaWJsaW5nV2l0aENsYXNzKGVsZW1lbnQ6RWxlbWVudCwgLi4uY2xhc3NlczpzdHJpbmdbXSk6Ym9vbGVhbiB7XG4gICAgICAgIHJldHVybiBoYXNDaGlsZFdpdGhDbGFzcyhlbGVtZW50LnBhcmVudEVsZW1lbnQsIC4uLmNsYXNzZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxhc3Qgc2libGluZyBvZiBhbiBlbGVtZW50IG1hdGNoaW5nIGEgc3BlY2lmaWVkIGNsYXNzIChvciBzcGVjaWZpZWQgY2xhc3NlcylcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggc2libGluZ3NcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBsYXN0U2libGluZ1dpdGhDbGFzczxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKTpUIHtcbiAgICAgICAgcmV0dXJuIGxhc3RFbGVtZW50TWF0Y2hpbmcoZWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuLCBzaWJsaW5nID0+IHNpYmxpbmcgIT09IGVsZW1lbnQgJiYgU3R5bGVIZWxwZXIuaGFzQ2xhc3NlcyhzaWJsaW5nIGFzIEhUTUxFbGVtZW50LCBjbGFzc2VzKSkgYXMgVDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIGNyZWF0ZUVsZW1lbnRPcHRpb25zPEVsZW1lbnRUeXBlIGV4dGVuZHMgRWxlbWVudD4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGEgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU/OnN0cmluZztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhbiBJRCB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGlkPzogc3RyaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGFuIGVsZW1lbnQgdG8gYXBwZW5kIHRoZSBjcmVhdGVkIGVsZW1lbnQgdG9cbiAgICAgICAgICovXG4gICAgICAgIGFwcGVuZFRvPzpOb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRleHQgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICB0ZXh0PzpzdHJpbmc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYW4gZWxlbWVudCBvciBlbGVtZW50cyB0byBhcHBlbmQgdG8gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgYXBwZW5kPzogTm9kZXxOb2RlW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYXR0cmlidXRlcyB0byBhZGQgdG8gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cmlidXRlcz86IHtcbiAgICAgICAgICAgIFtrZXk6c3RyaW5nXTogc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgc3R5bGVzIHRvIHNldCBvbiB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBzdHlsZT86IHtcbiAgICAgICAgICAgIFtwIGluIGtleW9mIENTU1N0eWxlRGVjbGFyYXRpb25dPzogQ1NTU3R5bGVEZWNsYXJhdGlvbltwXTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBwcm9wZXJ0aWVzIHRvIHNldCBvbiB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcm9wZXJ0aWVzPzoge1xuICAgICAgICAgICAgW2tleSBpbiBrZXlvZiBFbGVtZW50VHlwZV0/OkVsZW1lbnRUeXBlW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYSBIVE1MIGVsZW1lbnQgdG8gd3JhcCB0aGUgY3JlYXRlZCBlbGVtZW50IGluLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aFxuICAgICAgICAgKiBhcHBlbmRUbywgdGhlIHdyYXBwZXIgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAgICovXG4gICAgICAgIHdyYXA/OiBIVE1MRWxlbWVudDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcHBseU9wdGlvbnMoZWxlbWVudDpFbGVtZW50LCBvcHRpb25zOiBjcmVhdGVFbGVtZW50T3B0aW9uczxFbGVtZW50Pikge1xuICAgICAgICBsZXQgaHRtbEVsZW1lbnQgPSBlbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jbGFzc05hbWUgPT09ICdzdHJpbmcnKSBlbGVtZW50LmNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuaWQgPT09ICdzdHJpbmcnKSBlbGVtZW50LmlkID0gb3B0aW9ucy5pZDtcbiAgICAgICAgaWYgKG9wdGlvbnMud3JhcCkgb3B0aW9ucy53cmFwLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICBpZiAob3B0aW9ucy5hcHBlbmRUbykgb3B0aW9ucy5hcHBlbmRUby5hcHBlbmRDaGlsZChvcHRpb25zLndyYXAgfHwgZWxlbWVudCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50ZXh0ID09PSAnc3RyaW5nJykgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcHRpb25zLnRleHQpKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBwZW5kKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hcHBlbmQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNoaWxkRWxlbWVudCBvZiBvcHRpb25zLmFwcGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbnMuYXBwZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9wdGlvbnMuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIG9wdGlvbnMuYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc3R5bGUgJiYgdHlwZW9mIGh0bWxFbGVtZW50LnN0eWxlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9wdGlvbnMuc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWxFbGVtZW50LnN0eWxlW2tleV0gPSBvcHRpb25zLnN0eWxlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBvcHRpb25zLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFtrZXldID0gb3B0aW9ucy5wcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgRElWXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcGVyYXRpb25zIHRvIHBlcmZvcm0gb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudChvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRGl2RWxlbWVudD4pOiBIVE1MRGl2RWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcGVyYXRpb25zIHRvIHBlcmZvcm0gb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPih0YWdOYW1lOiBLLCBvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudFRhZ05hbWVNYXBbS10+KTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wZXJhdGlvbnMgdG8gcGVyZm9ybSBvbiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWU6IHN0cmluZywgb3B0aW9ucz86Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTEVsZW1lbnQ+KTogSFRNTEVsZW1lbnQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnTmFtZU9yRGl2T3B0aW9uczpzdHJpbmd8Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTERpdkVsZW1lbnQ+LCBvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudD4pOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCB0YWdOYW1lOnN0cmluZztcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgdGFnTmFtZU9yRGl2T3B0aW9ucyA9PT0gJ3N0cmluZycpIHRhZ05hbWUgPSB0YWdOYW1lT3JEaXZPcHRpb25zO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhZ05hbWUgPSAnZGl2JztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0YWdOYW1lT3JEaXZPcHRpb25zO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXG4gICAgICAgIGFwcGx5T3B0aW9ucyhlbGVtZW50LCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhUZXh0PEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6IEssIHRleHQ6c3RyaW5nKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aFRleHQodGFnTmFtZTogc3RyaW5nLCB0ZXh0OnN0cmluZyk6IEhUTUxFbGVtZW50O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgdGV4dFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gYWRkIHRvIHRoZSBjcmVhdGVkIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhUZXh0KHRhZ05hbWU6c3RyaW5nLCB0ZXh0OnN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwge3RleHQ6IHRleHR9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBjbGFzc1xuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3M8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTogSywgY2xhc3NOYW1lOnN0cmluZyk6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzXG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIFRoZSBjbGFzcyB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyh0YWdOYW1lOiBzdHJpbmcsIGNsYXNzTmFtZTpzdHJpbmcpOiBIVE1MRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgRElWIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoY2xhc3NOYW1lOnN0cmluZyk6SFRNTERpdkVsZW1lbnQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3ModGFnTmFtZU9yQ2xhc3NOYW1lOnN0cmluZywgY2xhc3NOYW1lPzpzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCB0YWdOYW1lID0gdGFnTmFtZU9yQ2xhc3NOYW1lO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGFnTmFtZSA9ICdkaXYnO1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gdGFnTmFtZU9yQ2xhc3NOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwge2NsYXNzTmFtZTogY2xhc3NOYW1lfSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoSUQ8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTogSywgaWQ6c3RyaW5nKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aElEKHRhZ05hbWU6IHN0cmluZywgaWQ6c3RyaW5nKTogSFRNTEVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBpZFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIGlkIFRoZSBpZCB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhJRCh0YWdOYW1lOnN0cmluZywgaWQ6c3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCh0YWdOYW1lLCB7aWQ6IGlkfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHRleHQgZWxlbWVudFxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIGNyZWF0ZSB0aGUgdGV4dCBlbGVtZW50IHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlVGV4dEVsZW1lbnQodGV4dDpzdHJpbmcpOiBUZXh0IHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgY3JlYXRlQnV0dG9uT3B0aW9ucyBleHRlbmRzIGNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxCdXR0b25FbGVtZW50PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBkaXNhYmxlIHRoZSBjcmVhdGVkIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgZGlzYWJsZWQ/OmJvb2xlYW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBjcmVhdGUgYSBsYXJnZSBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGxhcmdlPzpib29sZWFuO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgY3JlYXRlIGEgbGluayBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGxpbms/OiBib29sZWFuO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgY3JlYXRlIGEgc2tpbm55IGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgc2tpbm55PzogYm9vbGVhbjtcbiAgICB9XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihvcHRpb25zOmNyZWF0ZUJ1dHRvbk9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBidXR0b25DbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24nO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5sYXJnZSkgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkNsYXNzTmFtZSArICctbGFyZ2UnKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZWQpIGVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBpZiAob3B0aW9ucy5saW5rKSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lICsgJy1saW5rJylcbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpbm55KSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lICsgJy1za2lubnknKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBjb25zdCBpY29uQ2xhc3NQcmVmaXggPSAncmlkZXN0eWxlci1zaG93Y2FzZS1pY29uIHJpZGVzdHlsZXItc2hvd2Nhc2UtaWNvbi0nO1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgY3JlYXRlSWNvbk9wdGlvbnMgZXh0ZW5kcyBjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudD4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNsYXNzIG9mIHRoZSBpY29uIHRvIGNyZWF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgaWNvbjogc3RyaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaWNvblxuICAgICAqIEBwYXJhbSBpY29uIFRoZSBjbGFzcyBvZiB0aGUgaWNvbiB0byBjcmVhdGVcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbihpY29uOnN0cmluZykgOiBIVE1MRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaWNvblxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gY3JlYXRlIHRoZSBpY29uIHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbihvcHRpb25zOmNyZWF0ZUljb25PcHRpb25zKSA6IEhUTUxFbGVtZW50O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJY29uKGljb25Pck9wdGlvbnM6IHN0cmluZ3xjcmVhdGVJY29uT3B0aW9ucykgOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBvcHRpb25zOmNyZWF0ZUljb25PcHRpb25zO1xuXG4gICAgICAgIC8vIFNldHVwIG9wdGlvbnNcbiAgICAgICAgaWYgKHR5cGVvZiBpY29uT3JPcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBpY29uOiBpY29uT3JPcHRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IGljb25Pck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJ1aWxkIGljb24gY2xhc3NOYW1lXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBpY29uQ2xhc3MgPSBvcHRpb25zLmljb247XG5cbiAgICAgICAgICAgIGlmICghaWNvbkNsYXNzLnN0YXJ0c1dpdGgoaWNvbkNsYXNzUHJlZml4KSlcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSBpY29uQ2xhc3NQcmVmaXggKyBpY29uQ2xhc3M7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jbGFzc05hbWUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIGljb25DbGFzcyA9IG9wdGlvbnMuY2xhc3NOYW1lICsgJyAnICsgaWNvbkNsYXNzO1xuXG4gICAgICAgICAgICBvcHRpb25zLmNsYXNzTmFtZSA9IGljb25DbGFzcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoJ2knLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU1ZHRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6Sywgb3B0aW9uczpjcmVhdGVFbGVtZW50T3B0aW9uczxFbGVtZW50VGFnTmFtZU1hcFtLXT4pIDogRWxlbWVudFRhZ05hbWVNYXBbS107XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNWR0VsZW1lbnQodGFnTmFtZTpzdHJpbmcsIG9wdGlvbnM6Y3JlYXRlRWxlbWVudE9wdGlvbnM8U1ZHRWxlbWVudD4pIDogU1ZHRWxlbWVudDtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU1ZHRWxlbWVudCh0YWdOYW1lOnN0cmluZywgb3B0aW9uczpjcmVhdGVFbGVtZW50T3B0aW9uczxTVkdFbGVtZW50PikgOiBTVkdFbGVtZW50IHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgdGFnTmFtZSk7XG5cbiAgICAgICAgYXBwbHlPcHRpb25zKGVsZW1lbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZXNjcmlwdGlvbkxpc3QodmFsdWVzPzp7bGFiZWw6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ31bXSk6SFRNTERMaXN0RWxlbWVudCB7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbkxpc3QgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RsJywge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1kZXNjcmlwdGlvbi1saXN0JyxcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnN1bW1hcnlFbGVtZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh2YWx1ZXMpIGFwcGVuZERlc2NyaXB0aW9uTGlzdFZhbHVlcyhkZXNjcmlwdGlvbkxpc3QsIHZhbHVlcyk7XG5cbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uTGlzdDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gYXBwZW5kRGVzY3JpcHRpb25MaXN0VmFsdWVzKGRlc2NyaXB0aW9uTGlzdDpIVE1MRExpc3RFbGVtZW50LCB2YWx1ZXM/OntsYWJlbDogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nfVtdKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2R0Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHZhbHVlLmxhYmVsLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBkZXNjcmlwdGlvbkxpc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkZCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB2YWx1ZS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogZGVzY3JpcHRpb25MaXN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBjaGlsZHJlbiBmcm9tIGFuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBlbXB0eVxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBlbXB0eShlbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCBjaGlsZDpOb2RlO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKGNoaWxkID0gZWxlbWVudC5sYXN0Q2hpbGQpXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kcyBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGlzIGV4ZWN1dGVkIG9uY2UgYW5kIHRoZW4gcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gYmluZCBhIGxpc3RlbmVyIHRvXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgZXZlbnQgdG8gbGlzdGVuIHRvXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBldmVudCBsaXN0ZW5lciB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZFxuICAgICAqIEBwYXJhbSB1c2VDYXB0dXJlIElmIHRydWUsIHJ1biB0aGUgbGlzdGVuZXIgaW4gdGhlIGNhcHR1cmUgcGhhc2Ugb2YgdGhlIGV2ZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9uY2U8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXA+KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHR5cGU6IEssIGxpc3RlbmVyOiAodGhpczogSFRNTEVsZW1lbnQsIGV2OiBIVE1MRWxlbWVudEV2ZW50TWFwW0tdKSA9PiBhbnksIHVzZUNhcHR1cmU/OiBib29sZWFuKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBCaW5kcyBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGlzIGV4ZWN1dGVkIG9uY2UgYW5kIHRoZW4gcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gYmluZCBhIGxpc3RlbmVyIHRvXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgZXZlbnQgdG8gbGlzdGVuIHRvXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBldmVudCBsaXN0ZW5lciB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZFxuICAgICAqIEBwYXJhbSB1c2VDYXB0dXJlIElmIHRydWUsIHJ1biB0aGUgbGlzdGVuZXIgaW4gdGhlIGNhcHR1cmUgcGhhc2Ugb2YgdGhlIGV2ZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9uY2UoZWxlbWVudDpIVE1MRWxlbWVudCwgdHlwZTogc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgdXNlQ2FwdHVyZT86IGJvb2xlYW4pOiB2b2lkO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBvbmNlKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGxldCBvbmNlTGlzdGVuZXI6RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmNlTGlzdGVuZXIsIHVzZUNhcHR1cmUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSAnb2JqZWN0JykgbGlzdGVuZXIgPSBsaXN0ZW5lci5oYW5kbGVFdmVudDtcblxuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyLmNhbGwodGhpcywgZXZ0KTtcbiAgICAgICAgfTtcblxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgb25jZUxpc3RlbmVyLCB1c2VDYXB0dXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCB0aGF0IHRoZSBlbGVtZW50IGlzIGEgcGFydCBvZiAoaWYgdGhlcmUgaXMgb25lKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldERvY3VtZW50KGVsZW1lbnQ6SFRNTEVsZW1lbnQpOkRvY3VtZW50IHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB3aW5kb3cgdGhhdCB0aGUgZWxlbWVudCBpcyBhIHBhcnQgb2YgKGlmIHRoZXJlIGlzIG9uZSlcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRXaW5kb3coZWxlbWVudDpIVE1MRWxlbWVudCk6V2luZG93IHtcbiAgICAgICAgcmV0dXJuIGdldERvY3VtZW50KGVsZW1lbnQpLmRlZmF1bHRWaWV3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNvbnRlbnQgb2YgYW4gZWxlbWVudCB0byBhIHN0cmluZ1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHRcbiAgICAgKiBAcmV0dXJucyBUaGUgZWxlbWVudCB0aGF0IHdhcyBwYXNzZWQgaW5cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0VGV4dChlbGVtZW50OkhUTUxFbGVtZW50LCB0ZXh0OnN0cmluZyk6SFRNTEVsZW1lbnQge1xuICAgICAgICBlbXB0eShlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var NumberHelper;
    (function (NumberHelper) {
        /**
         * Returns the number bounded to a range
         * @param number The number to bound
         * @param min The minimum allowable number
         * @param max The maximum allowable number
         */
        function bound(number, min, max) {
            return number < min ? min : number > max ? max : number;
        }
        NumberHelper.bound = bound;
        /**
         * Extend a number range with a number
         * @param number The number to extend the range with
         * @param range The range to extend
         *
         * @returns The range object that was passed in extended by the number
         */
        function extendRange(number, range) {
            if (!range) range = {
                min: Infinity,
                max: -Infinity
            };
            if (number < range.min) range.min = number;
            if (number > range.max) range.max = number;
            return range;
        }
        NumberHelper.extendRange = extendRange;
    })(NumberHelper = RideStylerShowcase.NumberHelper || (RideStylerShowcase.NumberHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvTnVtYmVySGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIk51bWJlckhlbHBlciIsImJvdW5kIiwibnVtYmVyIiwibWluIiwibWF4IiwiZXh0ZW5kUmFuZ2UiLCJyYW5nZSIsIkluZmluaXR5Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxZQUFBO0FBQUEsS0FBQSxVQUFBQSxZQUFBLEVBQVk7QUFDckM7Ozs7OztBQU1BLGlCQUFBQyxLQUFBLENBQXNCQyxNQUF0QixFQUFxQ0MsR0FBckMsRUFBaURDLEdBQWpELEVBQTJEO0FBQ3ZELG1CQUFPRixTQUFTQyxHQUFULEdBQWVBLEdBQWYsR0FBc0JELFNBQVNFLEdBQVQsR0FBZUEsR0FBZixHQUFxQkYsTUFBbEQ7QUFDSDtBQUZlRixxQkFBQUMsS0FBQSxHQUFLQSxLQUFMO0FBSWhCOzs7Ozs7O0FBT0EsaUJBQUFJLFdBQUEsQ0FBNEJILE1BQTVCLEVBQTJDSSxLQUEzQyxFQUFzRDtBQUNsRCxnQkFBSSxDQUFDQSxLQUFMLEVBQVlBLFFBQVE7QUFDaEJILHFCQUFLSSxRQURXO0FBRWhCSCxxQkFBSyxDQUFDRztBQUZVLGFBQVI7QUFLWixnQkFBSUwsU0FBU0ksTUFBTUgsR0FBbkIsRUFBd0JHLE1BQU1ILEdBQU4sR0FBWUQsTUFBWjtBQUN4QixnQkFBSUEsU0FBU0ksTUFBTUYsR0FBbkIsRUFBd0JFLE1BQU1GLEdBQU4sR0FBWUYsTUFBWjtBQUV4QixtQkFBT0ksS0FBUDtBQUNIO0FBVmVOLHFCQUFBSyxXQUFBLEdBQVdBLFdBQVg7QUFnQm5CLEtBbEM0QixFQUFBTCxlQUFBRCxtQkFBQUMsWUFBQSxLQUFBRCxtQkFBQUMsWUFBQSxHQUFZLEVBQVosQ0FBQTtBQWtDNUIsQ0FsQ0QsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9OdW1iZXJIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLk51bWJlckhlbHBlciB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIGJvdW5kZWQgdG8gYSByYW5nZVxuICAgICAqIEBwYXJhbSBudW1iZXIgVGhlIG51bWJlciB0byBib3VuZFxuICAgICAqIEBwYXJhbSBtaW4gVGhlIG1pbmltdW0gYWxsb3dhYmxlIG51bWJlclxuICAgICAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gYWxsb3dhYmxlIG51bWJlclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBib3VuZChudW1iZXI6bnVtYmVyLCBtaW46bnVtYmVyLCBtYXg6bnVtYmVyKTpudW1iZXIge1xuICAgICAgICByZXR1cm4gbnVtYmVyIDwgbWluID8gbWluIDogKG51bWJlciA+IG1heCA/IG1heCA6IG51bWJlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIGEgbnVtYmVyIHJhbmdlIHdpdGggYSBudW1iZXJcbiAgICAgKiBAcGFyYW0gbnVtYmVyIFRoZSBudW1iZXIgdG8gZXh0ZW5kIHRoZSByYW5nZSB3aXRoXG4gICAgICogQHBhcmFtIHJhbmdlIFRoZSByYW5nZSB0byBleHRlbmRcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBUaGUgcmFuZ2Ugb2JqZWN0IHRoYXQgd2FzIHBhc3NlZCBpbiBleHRlbmRlZCBieSB0aGUgbnVtYmVyXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFJhbmdlKG51bWJlcjpudW1iZXIsIHJhbmdlOlJhbmdlKTpSYW5nZSB7XG4gICAgICAgIGlmICghcmFuZ2UpIHJhbmdlID0ge1xuICAgICAgICAgICAgbWluOiBJbmZpbml0eSxcbiAgICAgICAgICAgIG1heDogLUluZmluaXR5XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG51bWJlciA8IHJhbmdlLm1pbikgcmFuZ2UubWluID0gbnVtYmVyO1xuICAgICAgICBpZiAobnVtYmVyID4gcmFuZ2UubWF4KSByYW5nZS5tYXggPSBudW1iZXI7XG5cbiAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmFuZ2Uge1xuICAgICAgICBtaW46IG51bWJlcjtcbiAgICAgICAgbWF4OiBudW1iZXI7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ObjectHelper = void 0;
    (function (ObjectHelper) {
        function assign(target) {
            if (target == null) throw new TypeError("Cannot convert undefined or null to object");
            var to = Object(target);

            for (var _len = arguments.length, assignObjects = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                assignObjects[_key - 1] = arguments[_key];
            }

            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = assignObjects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var source = _step.value;

                    if (!source) continue;
                    for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) to[key] = source[key];
                    }
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            return to;
        }
        ObjectHelper.assign = assign;
        function copy(target) {
            return assign({}, target);
        }
        ObjectHelper.copy = copy;
        /**
         * Returns all of the keys for own properties on an object
         * @param target The object
         */
        function getKeys(target) {
            var keys = [];
            for (var key in target) {
                if (target.hasOwnProperty(key)) keys.push(key);
            }return keys;
        }
        ObjectHelper.getKeys = getKeys;
        /**
         * Returns all of the values for own properties on an object
         * @param target The object
         */
        function getValues(target) {
            var values = [];
            for (var key in target) {
                if (target.hasOwnProperty(key)) values.push(target[key]);
            }return values;
        }
        ObjectHelper.getValues = getValues;
    })(ObjectHelper = RideStylerShowcase.ObjectHelper || (RideStylerShowcase.ObjectHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvT2JqZWN0SGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIk9iamVjdEhlbHBlciIsImFzc2lnbiIsInRhcmdldCIsIlR5cGVFcnJvciIsInRvIiwiT2JqZWN0IiwiYXNzaWduT2JqZWN0cyIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvcHkiLCJnZXRLZXlzIiwia2V5cyIsInB1c2giLCJnZXRWYWx1ZXMiLCJ2YWx1ZXMiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFpQkMscUJBQWpCO0FBQUEsS0FBQSxVQUFpQkEsWUFBakIsRUFBNkI7QUFTekIsaUJBQUFDLE1BQUEsQ0FBdUJDLE1BQXZCLEVBQStEO0FBQzNELGdCQUFJQSxVQUFVLElBQWQsRUFBb0IsTUFBTSxJQUFJQyxTQUFKLENBQWMsNENBQWQsQ0FBTjtBQUVwQixnQkFBSUMsS0FBWUMsT0FBT0gsTUFBUCxDQUFoQjs7QUFIMkQsOENBQXRCSSxhQUFzQjtBQUF0QkEsNkJBQXNCO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBSzNELHFDQUFtQkEsYUFBbkIsOEhBQWtDO0FBQUEsd0JBQXpCQyxNQUF5Qjs7QUFDOUIsd0JBQUksQ0FBQ0EsTUFBTCxFQUFhO0FBRWIseUJBQUssSUFBSUMsR0FBVCxJQUFnQkQsTUFBaEI7QUFDSSw0QkFBSUYsT0FBT0ksU0FBUCxDQUFpQkMsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDSixNQUFyQyxFQUE2Q0MsR0FBN0MsQ0FBSixFQUNJSixHQUFHSSxHQUFILElBQVVELE9BQU9DLEdBQVAsQ0FBVjtBQUZSO0FBR0g7QUFYMEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFhM0QsbUJBQU9KLEVBQVA7QUFDSDtBQWRlSixxQkFBQUMsTUFBQSxHQUFNQSxNQUFOO0FBZ0JoQixpQkFBQVcsSUFBQSxDQUF3QlYsTUFBeEIsRUFBZ0M7QUFDNUIsbUJBQU9ELE9BQU8sRUFBUCxFQUFXQyxNQUFYLENBQVA7QUFDSDtBQUZlRixxQkFBQVksSUFBQSxHQUFJQSxJQUFKO0FBSWhCOzs7O0FBSUEsaUJBQUFDLE9BQUEsQ0FBd0JYLE1BQXhCLEVBQXFDO0FBQ2pDLGdCQUFJWSxPQUFnQixFQUFwQjtBQUVBLGlCQUFLLElBQUlOLEdBQVQsSUFBZ0JOLE1BQWhCO0FBQ0ksb0JBQUlBLE9BQU9RLGNBQVAsQ0FBc0JGLEdBQXRCLENBQUosRUFDSU0sS0FBS0MsSUFBTCxDQUFVUCxHQUFWO0FBRlIsYUFJQSxPQUFPTSxJQUFQO0FBQ0g7QUFSZWQscUJBQUFhLE9BQUEsR0FBT0EsT0FBUDtBQVVoQjs7OztBQUlBLGlCQUFBRyxTQUFBLENBQTZCZCxNQUE3QixFQUVDO0FBQ0csZ0JBQUllLFNBQWEsRUFBakI7QUFFQSxpQkFBSyxJQUFJVCxHQUFULElBQWdCTixNQUFoQjtBQUNJLG9CQUFJQSxPQUFPUSxjQUFQLENBQXNCRixHQUF0QixDQUFKLEVBQ0lTLE9BQU9GLElBQVAsQ0FBWWIsT0FBT00sR0FBUCxDQUFaO0FBRlIsYUFJQSxPQUFPUyxNQUFQO0FBQ0g7QUFWZWpCLHFCQUFBZ0IsU0FBQSxHQUFTQSxTQUFUO0FBV25CLEtBMURELEVBQWlCaEIsZUFBQUQsbUJBQUFDLFlBQUEsS0FBQUQsbUJBQUFDLFlBQUEsR0FBWSxFQUFaLENBQWpCO0FBMkRILENBNURELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2hlbHBlcnMvT2JqZWN0SGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IG5hbWVzcGFjZSBPYmplY3RIZWxwZXIge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29weSBhbGwgZW51bWVyYWJsZSBvd24gcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzIHRvIGEgdGFyZ2V0IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSBhc3NpZ25PYmplY3RzIFRoZSBzb3VyY2Ugb2JqZWN0KHMpXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduPFQxLFQyPih0YXJnZXQ6VDEsIC4uLmFzc2lnbk9iamVjdHM6VDJbXSkgOiBUMSAmIFQyO1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduPFQ+KHRhcmdldDpULCAuLi5hc3NpZ25PYmplY3RzOlRbXSk6IFQ7XG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0Om9iamVjdCwgLi4uYXNzaWduT2JqZWN0czpvYmplY3RbXSk6b2JqZWN0O1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduKHRhcmdldDpvYmplY3QsIC4uLmFzc2lnbk9iamVjdHM6b2JqZWN0W10pOm9iamVjdCB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7XG5cbiAgICAgICAgICAgIGxldCB0bzpvYmplY3QgPSBPYmplY3QodGFyZ2V0KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIGFzc2lnbk9iamVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSBcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1trZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0bztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBjb3B5PFQ+KHRhcmdldDpUKTpUIHtcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24oe30sIHRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbGwgb2YgdGhlIGtleXMgZm9yIG93biBwcm9wZXJ0aWVzIG9uIGFuIG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRLZXlzKHRhcmdldDpvYmplY3QpOnN0cmluZ1tdIHtcbiAgICAgICAgICAgIGxldCBrZXlzOnN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0YXJnZXQpXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbGwgb2YgdGhlIHZhbHVlcyBmb3Igb3duIHByb3BlcnRpZXMgb24gYW4gb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlczxUPih0YXJnZXQ6e1xuICAgICAgICAgICAgW2s6c3RyaW5nXTpUO1xuICAgICAgICB9KTpUW10ge1xuICAgICAgICAgICAgbGV0IHZhbHVlczpUW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRhcmdldClcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHRhcmdldFtrZXldKTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var PromiseHelper;
    (function (PromiseHelper) {
        function all(promises) {
            var results = [];
            var merged = RideStylerShowcase.ArrayHelper.reduce(promises, function (accumulator, currentPromise) {
                return then(then(accumulator, function () {
                    return currentPromise;
                }), function (r) {
                    return results.push(r);
                });
            }, resolved(null));
            Promise.all;
            return then(merged, function () {
                return results;
            });
        }
        PromiseHelper.all = all;
        /**
        * Attaches callbacks for the resolution and/or rejection of the Promise.
        * @param onfulfilled The callback to execute when the Promise is resolved.
        * @param onrejected The callback to execute when the Promise is rejected.
        * @returns A Promise for the completion of which ever callback is executed.
        */
        function then(promise, onfulfilled, onrejected) {
            var returnPromise = ridestyler.promise();
            promise.done(function (result) {
                if (typeof onfulfilled === 'function') {
                    var onfulfilledResult = onfulfilled(result);
                    if (isPromise(onfulfilledResult)) {
                        // Resolve the promise when the returned promise is resolved
                        onfulfilledResult.done(function (result) {
                            return returnPromise.resolve(result);
                        }).fail(function (result) {
                            return returnPromise.reject(result);
                        });
                    } else {
                        // Resolve the promise with the returned value
                        returnPromise.resolve(onfulfilledResult);
                    }
                } else {
                    returnPromise.resolve(result);
                }
            });
            promise.fail(function (result) {
                if (typeof onrejected === 'function') {
                    var onrejectedResult = onrejected(result);
                    if (isPromise(onrejectedResult)) {
                        // Resolve the promise when the returned promise is resolved
                        onrejectedResult.done(function (result) {
                            return returnPromise.resolve(result);
                        }).fail(function (result) {
                            return returnPromise.reject(result);
                        });
                    } else {
                        returnPromise.resolve(onrejectedResult);
                    }
                } else {
                    returnPromise.reject(result);
                }
            });
            return returnPromise;
        }
        PromiseHelper.then = then;
        /**
         * Returns a new resolved promise with an optional value
         * @param value Optionally, a value to resolve the promise with
         */
        function resolved(value) {
            var promise = ridestyler.promise();
            promise.resolve(value);
            return promise;
        }
        PromiseHelper.resolved = resolved;
        /**
         * Tests an object for a RidestylerPromise-like interface, testing for
         * done, fail and always functions.
         * @param o The object to test
         */
        function isPromise(o) {
            return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && typeof o.done === 'function' && typeof o.fail === 'function' && typeof o.always === 'function';
        }
        PromiseHelper.isPromise = isPromise;
    })(PromiseHelper = RideStylerShowcase.PromiseHelper || (RideStylerShowcase.PromiseHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvUHJvbWlzZUhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJQcm9taXNlSGVscGVyIiwiYWxsIiwicHJvbWlzZXMiLCJyZXN1bHRzIiwibWVyZ2VkIiwiQXJyYXlIZWxwZXIiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsImN1cnJlbnRQcm9taXNlIiwidGhlbiIsInB1c2giLCJyIiwicmVzb2x2ZWQiLCJQcm9taXNlIiwicHJvbWlzZSIsIm9uZnVsZmlsbGVkIiwib25yZWplY3RlZCIsInJldHVyblByb21pc2UiLCJyaWRlc3R5bGVyIiwiZG9uZSIsInJlc3VsdCIsIm9uZnVsZmlsbGVkUmVzdWx0IiwiaXNQcm9taXNlIiwicmVzb2x2ZSIsImZhaWwiLCJyZWplY3QiLCJvbnJlamVjdGVkUmVzdWx0IiwidmFsdWUiLCJvIiwiYWx3YXlzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLGFBQUE7QUFBQSxLQUFBLFVBQUFBLGFBQUEsRUFBYTtBQVF0QyxpQkFBQUMsR0FBQSxDQUFvQkMsUUFBcEIsRUFBNEQ7QUFDeEQsZ0JBQU1DLFVBQVUsRUFBaEI7QUFDQSxnQkFBTUMsU0FBU0wsbUJBQUFNLFdBQUEsQ0FBWUMsTUFBWixDQUFtQkosUUFBbkIsRUFBNkIsVUFBVUssV0FBVixFQUF1QkMsY0FBdkIsRUFBcUM7QUFDN0UsdUJBQU9DLEtBQUtBLEtBQUtGLFdBQUwsRUFBdUM7QUFBQSwyQkFBTUMsY0FBTjtBQUFBLGlCQUF2QyxDQUFMLEVBQW1FO0FBQUEsMkJBQUtMLFFBQVFPLElBQVIsQ0FBYUMsQ0FBYixDQUFMO0FBQUEsaUJBQW5FLENBQVA7QUFDSCxhQUZjLEVBRVpDLFNBQVMsSUFBVCxDQUZZLENBQWY7QUFJQUMsb0JBQVFaLEdBQVI7QUFFQSxtQkFBT1EsS0FBS0wsTUFBTCxFQUFrQztBQUFBLHVCQUFNRCxPQUFOO0FBQUEsYUFBbEMsQ0FBUDtBQUNIO0FBVGVILHNCQUFBQyxHQUFBLEdBQUdBLEdBQUg7QUFXaEI7Ozs7OztBQU9BLGlCQUFBUSxJQUFBLENBQThESyxPQUE5RCxFQUFxR0MsV0FBckcsRUFBa01DLFVBQWxNLEVBQWdSO0FBQzVRLGdCQUFNQyxnQkFBZ0JDLFdBQVdKLE9BQVgsRUFBdEI7QUFFQUEsb0JBQVFLLElBQVIsQ0FBYSxVQUFVQyxNQUFWLEVBQWdCO0FBQ3pCLG9CQUFJLE9BQU9MLFdBQVAsS0FBdUIsVUFBM0IsRUFBdUM7QUFDL0Isd0JBQUlNLG9CQUFvQk4sWUFBWUssTUFBWixDQUF4QjtBQUVBLHdCQUFJRSxVQUFVRCxpQkFBVixDQUFKLEVBQWtDO0FBQzlCO0FBQ0FBLDBDQUNLRixJQURMLENBQ1U7QUFBQSxtQ0FBVUYsY0FBY00sT0FBZCxDQUFzQkgsTUFBdEIsQ0FBVjtBQUFBLHlCQURWLEVBRUtJLElBRkwsQ0FFVTtBQUFBLG1DQUFVUCxjQUFjUSxNQUFkLENBQXFCTCxNQUFyQixDQUFWO0FBQUEseUJBRlY7QUFJSCxxQkFORCxNQU1PO0FBQ0g7QUFDQUgsc0NBQWNNLE9BQWQsQ0FBc0JGLGlCQUF0QjtBQUNIO0FBQ1IsaUJBYkQsTUFhTztBQUNISixrQ0FBY00sT0FBZCxDQUFzQkgsTUFBdEI7QUFDSDtBQUNKLGFBakJEO0FBbUJBTixvQkFBUVUsSUFBUixDQUFhLFVBQVVKLE1BQVYsRUFBZ0I7QUFDekIsb0JBQUksT0FBT0osVUFBUCxLQUFzQixVQUExQixFQUFzQztBQUM5Qix3QkFBSVUsbUJBQW1CVixXQUFXSSxNQUFYLENBQXZCO0FBRUEsd0JBQUlFLFVBQVVJLGdCQUFWLENBQUosRUFBaUM7QUFDN0I7QUFDQUEseUNBQ0tQLElBREwsQ0FDVTtBQUFBLG1DQUFVRixjQUFjTSxPQUFkLENBQXNCSCxNQUF0QixDQUFWO0FBQUEseUJBRFYsRUFFS0ksSUFGTCxDQUVVO0FBQUEsbUNBQVVQLGNBQWNRLE1BQWQsQ0FBcUJMLE1BQXJCLENBQVY7QUFBQSx5QkFGVjtBQUlILHFCQU5ELE1BTU87QUFBRUgsc0NBQWNNLE9BQWQsQ0FBc0JHLGdCQUF0QjtBQUEwQztBQUUxRCxpQkFYRCxNQVdPO0FBQ0hULGtDQUFjUSxNQUFkLENBQXFCTCxNQUFyQjtBQUNIO0FBQ0osYUFmRDtBQWlCQSxtQkFBT0gsYUFBUDtBQUNIO0FBeENlakIsc0JBQUFTLElBQUEsR0FBSUEsSUFBSjtBQTBDaEI7Ozs7QUFJQSxpQkFBQUcsUUFBQSxDQUE0QmUsS0FBNUIsRUFBb0M7QUFDaEMsZ0JBQU1iLFVBQVVJLFdBQVdKLE9BQVgsRUFBaEI7QUFDTUEsb0JBQVFTLE9BQVIsQ0FBZ0JJLEtBQWhCO0FBRU4sbUJBQU9iLE9BQVA7QUFDSDtBQUxlZCxzQkFBQVksUUFBQSxHQUFRQSxRQUFSO0FBT2hCOzs7OztBQUtBLGlCQUFBVSxTQUFBLENBQTBCTSxDQUExQixFQUFnQztBQUM1QixtQkFBTyxRQUFPQSxDQUFQLHlDQUFPQSxDQUFQLE9BQWEsUUFBYixJQUNBLE9BQU9BLEVBQUVULElBQVQsS0FBa0IsVUFEbEIsSUFFQSxPQUFPUyxFQUFFSixJQUFULEtBQWtCLFVBRmxCLElBR0EsT0FBT0ksRUFBRUMsTUFBVCxLQUFvQixVQUgzQjtBQUlIO0FBTGU3QixzQkFBQXNCLFNBQUEsR0FBU0EsU0FBVDtBQU1uQixLQTFGNEIsRUFBQXRCLGdCQUFBRCxtQkFBQUMsYUFBQSxLQUFBRCxtQkFBQUMsYUFBQSxHQUFhLEVBQWIsQ0FBQTtBQTBGNUIsQ0ExRkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9Qcm9taXNlSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQ+KHByb21pc2VzOiAoVCB8IFJpZGVTdHlsZXJQcm9taXNlPFQ+KVtdKTogUmlkZVN0eWxlclByb21pc2U8VFtdPjtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQxLCBUMj4ocHJvbWlzZXM6IFtUMSB8IFJpZGVTdHlsZXJQcm9taXNlPFQxPiwgVDIgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMj5dKTogUmlkZVN0eWxlclByb21pc2U8W1QxLCBUMl0+O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGw8VDEsIFQyLCBUMz4ocHJvbWlzZXM6IFtUMSB8IFJpZGVTdHlsZXJQcm9taXNlPFQxPiwgVDIgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMj4sIFQzIHwgUmlkZVN0eWxlclByb21pc2U8VDM+XSk6IFJpZGVTdHlsZXJQcm9taXNlPFtUMSwgVDIsIFQzXT47XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUMSwgVDIsIFQzLCBUND4ocHJvbWlzZXM6IFtUMSB8IFJpZGVTdHlsZXJQcm9taXNlPFQxPiwgVDIgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMj4sIFQzIHwgUmlkZVN0eWxlclByb21pc2U8VDM+LCBUNCB8IFJpZGVTdHlsZXJQcm9taXNlPFQ0Pl0pOiBSaWRlU3R5bGVyUHJvbWlzZTxbVDEsIFQyLCBUMywgVDRdPjtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQxLCBUMiwgVDMsIFQ0LCBUNT4ocHJvbWlzZXM6IFtUMSB8IFJpZGVTdHlsZXJQcm9taXNlPFQxPiwgVDIgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMj4sIFQzIHwgUmlkZVN0eWxlclByb21pc2U8VDM+LCBUNCB8IFJpZGVTdHlsZXJQcm9taXNlPFQ0PiwgVDUgfCBSaWRlU3R5bGVyUHJvbWlzZTxUNT5dKTogUmlkZVN0eWxlclByb21pc2U8W1QxLCBUMiwgVDMsIFQ0LCBUNV0+O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGw8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4ocHJvbWlzZXM6IFtUMSB8IFJpZGVTdHlsZXJQcm9taXNlPFQxPiwgVDIgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMj4sIFQzIHwgUmlkZVN0eWxlclByb21pc2U8VDM+LCBUNCB8IFJpZGVTdHlsZXJQcm9taXNlPFQ0PiwgVDUgfCBSaWRlU3R5bGVyUHJvbWlzZTxUNT4sIFQ2IHwgUmlkZVN0eWxlclByb21pc2U8VDY+XSk6IFJpZGVTdHlsZXJQcm9taXNlPFtUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2XT47XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNz4ocHJvbWlzZXM6IFtUMSB8IFJpZGVTdHlsZXJQcm9taXNlPFQxPiwgVDIgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMj4sIFQzIHwgUmlkZVN0eWxlclByb21pc2U8VDM+LCBUNCB8IFJpZGVTdHlsZXJQcm9taXNlPFQ0PiwgVDUgfCBSaWRlU3R5bGVyUHJvbWlzZTxUNT4sIFQ2IHwgUmlkZVN0eWxlclByb21pc2U8VDY+LCBUNyB8IFJpZGVTdHlsZXJQcm9taXNlPFQ3Pl0pOiBSaWRlU3R5bGVyUHJvbWlzZTxbVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDddPjtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsKHByb21pc2VzOiAob2JqZWN0IHwgUmlkZVN0eWxlclByb21pc2UpW10pOiBSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gQXJyYXlIZWxwZXIucmVkdWNlKHByb21pc2VzLCBmdW5jdGlvbiAoYWNjdW11bGF0b3IsIGN1cnJlbnRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhlbih0aGVuKGFjY3VtdWxhdG9yIGFzIFJpZGVTdHlsZXJQcm9taXNlLCAoKSA9PiBjdXJyZW50UHJvbWlzZSksIHIgPT4gcmVzdWx0cy5wdXNoKHIpKTtcbiAgICAgICAgfSwgcmVzb2x2ZWQobnVsbCkpO1xuXG4gICAgICAgIFByb21pc2UuYWxsXG5cbiAgICAgICAgcmV0dXJuIHRoZW4obWVyZ2VkIGFzIFJpZGVTdHlsZXJQcm9taXNlLCAoKSA9PiByZXN1bHRzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIEF0dGFjaGVzIGNhbGxiYWNrcyBmb3IgdGhlIHJlc29sdXRpb24gYW5kL29yIHJlamVjdGlvbiBvZiB0aGUgUHJvbWlzZS5cbiAgICAqIEBwYXJhbSBvbmZ1bGZpbGxlZCBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIHRoZSBQcm9taXNlIGlzIHJlc29sdmVkLlxuICAgICogQHBhcmFtIG9ucmVqZWN0ZWQgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUgd2hlbiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZC5cbiAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgdGhlIGNvbXBsZXRpb24gb2Ygd2hpY2ggZXZlciBjYWxsYmFjayBpcyBleGVjdXRlZC5cbiAgICAqL1xuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRoZW48VF9JbiwgRV9Jbj1UX0luLCBUX091dD1UX0luLCBFX091dD1FX0luPihwcm9taXNlOlJpZGVTdHlsZXJQcm9taXNlPFRfSW4sIEVfSW4+LCBvbmZ1bGZpbGxlZD86ICgodmFsdWU6IFRfSW4pID0+IFRfT3V0IHwgUmlkZVN0eWxlclByb21pc2U8VF9PdXQsIEVfT3V0PikgfCB1bmRlZmluZWQgfCBudWxsLCBvbnJlamVjdGVkPzogKChyZWFzb246IEVfSW4pID0+IFRfT3V0IHwgUHJvbWlzZUxpa2U8VF9PdXQ+KSB8IHVuZGVmaW5lZCB8IG51bGwpOiBSaWRlU3R5bGVyUHJvbWlzZTxUX091dCwgRV9PdXQ+IHtcbiAgICAgICAgY29uc3QgcmV0dXJuUHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxhbnk+KCk7XG5cbiAgICAgICAgcHJvbWlzZS5kb25lKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25mdWxmaWxsZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9uZnVsZmlsbGVkUmVzdWx0ID0gb25mdWxmaWxsZWQocmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcm9taXNlKG9uZnVsZmlsbGVkUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2ZSB0aGUgcHJvbWlzZSB3aGVuIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmZ1bGZpbGxlZFJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKHJlc3VsdCA9PiByZXR1cm5Qcm9taXNlLnJlc29sdmUocmVzdWx0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmFpbChyZXN1bHQgPT4gcmV0dXJuUHJvbWlzZS5yZWplY3QocmVzdWx0KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIHByb21pc2Ugd2l0aCB0aGUgcmV0dXJuZWQgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVzb2x2ZShvbmZ1bGZpbGxlZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHByb21pc2UuZmFpbChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9ucmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9ucmVqZWN0ZWRSZXN1bHQgPSBvbnJlamVjdGVkKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcm9taXNlKG9ucmVqZWN0ZWRSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdoZW4gdGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ucmVqZWN0ZWRSZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9uZShyZXN1bHQgPT4gcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IHJldHVyblByb21pc2UucmVzb2x2ZShvbnJlamVjdGVkUmVzdWx0KTsgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHJldHVyblByb21pc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyByZXNvbHZlZCBwcm9taXNlIHdpdGggYW4gb3B0aW9uYWwgdmFsdWVcbiAgICAgKiBAcGFyYW0gdmFsdWUgT3B0aW9uYWxseSwgYSB2YWx1ZSB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gcmVzb2x2ZWQ8VD4odmFsdWU/OlQpOiBSaWRlU3R5bGVyUHJvbWlzZTxULCBuZXZlcj4ge1xuICAgICAgICBjb25zdCBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlPFQsIG5ldmVyPigpO1xuICAgICAgICAgICAgICBwcm9taXNlLnJlc29sdmUodmFsdWUpO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlc3RzIGFuIG9iamVjdCBmb3IgYSBSaWRlc3R5bGVyUHJvbWlzZS1saWtlIGludGVyZmFjZSwgdGVzdGluZyBmb3JcbiAgICAgKiBkb25lLCBmYWlsIGFuZCBhbHdheXMgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSBvIFRoZSBvYmplY3QgdG8gdGVzdFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBpc1Byb21pc2UobzogYW55KTogbyBpcyBSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgIHR5cGVvZiBvLmRvbmUgPT09ICdmdW5jdGlvbicgJiYgXG4gICAgICAgICAgICAgICB0eXBlb2Ygby5mYWlsID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICB0eXBlb2Ygby5hbHdheXMgPT09ICdmdW5jdGlvbic7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ScrollHelper;
    (function (ScrollHelper) {
        var scrollEvent = void 0;
        var mousewheelEventScale = -1 / 40;
        {
            var testElement = document.createElement('div');
            scrollEvent = 'onwheel' in testElement ? 'wheel' : // Modern browers support "wheel"
            document.onmousewheel !== undefined ? 'mousewheel' : // Webkit and IE support at least "mousewheel"
            'MozMousePixelScroll'; // older Firefox
        }
        function attachWheelListener(element, listener) {
            if (scrollEvent === 'wheel') {
                element.addEventListener('wheel', function (event) {
                    var normalizedEvent = RideStylerShowcase.ObjectHelper.assign(event, {
                        originalEvent: event
                    });
                    return listener(normalizedEvent);
                });
                return;
            }
            element.addEventListener(scrollEvent, function (event) {
                if (!event) event = window.event;
                var normalizedEvent = {
                    originalEvent: event,
                    target: event.target || event.srcElement,
                    type: 'wheel',
                    deltaMode: event.type === 'MozMousePixelScroll' ? 0 : 1,
                    deltaX: 0,
                    deltaY: 0,
                    deltaZ: 0,
                    preventDefault: function preventDefault() {
                        if (typeof event.preventDefault === 'function') event.preventDefault();else {
                            event.returnValue = false;
                        }
                    }
                };
                if (scrollEvent === 'mousewheel') {
                    normalizedEvent.deltaY = mousewheelEventScale * event.wheelDelta;
                    if (event.wheelDeltaX) normalizedEvent.deltaX = mousewheelEventScale * event.wheelDeltaX;
                } else {
                    normalizedEvent.deltaY = event.detail;
                }
                return listener(normalizedEvent);
            });
        }
        ScrollHelper.attachWheelListener = attachWheelListener;
    })(ScrollHelper = RideStylerShowcase.ScrollHelper || (RideStylerShowcase.ScrollHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU2Nyb2xsSGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlNjcm9sbEhlbHBlciIsInNjcm9sbEV2ZW50IiwibW91c2V3aGVlbEV2ZW50U2NhbGUiLCJ0ZXN0RWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm9ubW91c2V3aGVlbCIsInVuZGVmaW5lZCIsImF0dGFjaFdoZWVsTGlzdGVuZXIiLCJlbGVtZW50IiwibGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJub3JtYWxpemVkRXZlbnQiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJvcmlnaW5hbEV2ZW50Iiwid2luZG93IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsInR5cGUiLCJkZWx0YU1vZGUiLCJkZWx0YVgiLCJkZWx0YVkiLCJkZWx0YVoiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwid2hlZWxEZWx0YSIsIndoZWVsRGVsdGFYIiwiZGV0YWlsIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxZQUFBO0FBQUEsS0FBQSxVQUFBQSxZQUFBLEVBQVk7QUFDckMsWUFBSUMsb0JBQUo7QUFDQSxZQUFNQyx1QkFBdUIsQ0FBQyxDQUFELEdBQUcsRUFBaEM7QUFFQTtBQUNJLGdCQUFNQyxjQUFjQyxTQUFTQyxhQUFULENBQXVCLEtBQXZCLENBQXBCO0FBRUFKLDBCQUFjLGFBQWFFLFdBQWIsR0FBMkIsT0FBM0IsR0FBcUQ7QUFDckRDLHFCQUFTRSxZQUFULEtBQTBCQyxTQUExQixHQUFzQyxZQUF0QyxHQUFxRDtBQUNyRCxpQ0FGZCxDQUhKLENBS3VFO0FBQ3RFO0FBRUQsaUJBQUFDLG1CQUFBLENBQW9DQyxPQUFwQyxFQUF5REMsUUFBekQsRUFBcUc7QUFDakcsZ0JBQUlULGdCQUFnQixPQUFwQixFQUE2QjtBQUN6QlEsd0JBQVFFLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFVBQUNDLEtBQUQsRUFBcUI7QUFDbkQsd0JBQU1DLGtCQUF1Q2QsbUJBQUFlLFlBQUEsQ0FBYUMsTUFBYixDQUFvQkgsS0FBcEIsRUFBMkI7QUFDcEVJLHVDQUFlSjtBQURxRCxxQkFBM0IsQ0FBN0M7QUFJQSwyQkFBT0YsU0FBU0csZUFBVCxDQUFQO0FBQ0gsaUJBTkQ7QUFRQTtBQUNIO0FBRURKLG9CQUFRRSxnQkFBUixDQUF5QlYsV0FBekIsRUFBc0MsVUFBQ1csS0FBRCxFQUFxQjtBQUN2RCxvQkFBSSxDQUFDQSxLQUFMLEVBQVlBLFFBQVFLLE9BQU9MLEtBQWY7QUFFWixvQkFBTUMsa0JBQXVDO0FBQ3pDRyxtQ0FBZUosS0FEMEI7QUFFekNNLDRCQUFRTixNQUFNTSxNQUFOLElBQWdCTixNQUFNTyxVQUZXO0FBR3pDQywwQkFBTSxPQUhtQztBQUl6Q0MsK0JBQVdULE1BQU1RLElBQU4sS0FBZSxxQkFBZixHQUF1QyxDQUF2QyxHQUEyQyxDQUpiO0FBS3pDRSw0QkFBUSxDQUxpQztBQU16Q0MsNEJBQVEsQ0FOaUM7QUFPekNDLDRCQUFRLENBUGlDO0FBU3pDQyxvQ0FBZ0IsMEJBQUs7QUFDakIsNEJBQUksT0FBT2IsTUFBTWEsY0FBYixLQUFnQyxVQUFwQyxFQUFnRGIsTUFBTWEsY0FBTixHQUFoRCxLQUNLO0FBQ0RiLGtDQUFNYyxXQUFOLEdBQW9CLEtBQXBCO0FBQ0g7QUFDSjtBQWR3QyxpQkFBN0M7QUFpQkEsb0JBQUl6QixnQkFBZ0IsWUFBcEIsRUFBa0M7QUFDOUJZLG9DQUFnQlUsTUFBaEIsR0FBeUJyQix1QkFBdUJVLE1BQU1lLFVBQXREO0FBRUEsd0JBQUlmLE1BQU1nQixXQUFWLEVBQ0lmLGdCQUFnQlMsTUFBaEIsR0FBeUJwQix1QkFBdUJVLE1BQU1nQixXQUF0RDtBQUNQLGlCQUxELE1BS087QUFDSGYsb0NBQWdCVSxNQUFoQixHQUF5QlgsTUFBTWlCLE1BQS9CO0FBQ0g7QUFFRCx1QkFBT25CLFNBQVNHLGVBQVQsQ0FBUDtBQUNILGFBOUJEO0FBK0JIO0FBNUNlYixxQkFBQVEsbUJBQUEsR0FBbUJBLG1CQUFuQjtBQXdEbkIsS0FwRTRCLEVBQUFSLGVBQUFELG1CQUFBQyxZQUFBLEtBQUFELG1CQUFBQyxZQUFBLEdBQVksRUFBWixDQUFBO0FBb0U1QixDQXBFRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1Njcm9sbEhlbHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuU2Nyb2xsSGVscGVyIHtcbiAgICBsZXQgc2Nyb2xsRXZlbnQ6J3doZWVsJ3wnbW91c2V3aGVlbCd8J01vek1vdXNlUGl4ZWxTY3JvbGwnO1xuICAgIGNvbnN0IG1vdXNld2hlZWxFdmVudFNjYWxlID0gLTEvNDA7XG5cbiAgICB7XG4gICAgICAgIGNvbnN0IHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgc2Nyb2xsRXZlbnQgPSAnb253aGVlbCcgaW4gdGVzdEVsZW1lbnQgPyAnd2hlZWwnIDogICAgICAgICAgICAgICAgIC8vIE1vZGVybiBicm93ZXJzIHN1cHBvcnQgXCJ3aGVlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXdoZWVsICE9PSB1bmRlZmluZWQgPyAnbW91c2V3aGVlbCcgOiAvLyBXZWJraXQgYW5kIElFIHN1cHBvcnQgYXQgbGVhc3QgXCJtb3VzZXdoZWVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAnTW96TW91c2VQaXhlbFNjcm9sbCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9sZGVyIEZpcmVmb3hcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gYXR0YWNoV2hlZWxMaXN0ZW5lcihlbGVtZW50OkhUTUxFbGVtZW50LCBsaXN0ZW5lcjooZXZlbnQ6Tm9ybWFsaXplZFdoZWVsRXZlbnQpID0+IGFueSkge1xuICAgICAgICBpZiAoc2Nyb2xsRXZlbnQgPT09ICd3aGVlbCcpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZXZlbnQ6V2hlZWxFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudDpOb3JtYWxpemVkV2hlZWxFdmVudCA9IE9iamVjdEhlbHBlci5hc3NpZ24oZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihub3JtYWxpemVkRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFdmVudCwgKGV2ZW50OldoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghZXZlbnQpIGV2ZW50ID0gd2luZG93LmV2ZW50IGFzIFdoZWVsRXZlbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudDpOb3JtYWxpemVkV2hlZWxFdmVudCA9IHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50LFxuICAgICAgICAgICAgICAgIHR5cGU6ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgZGVsdGFNb2RlOiBldmVudC50eXBlID09PSAnTW96TW91c2VQaXhlbFNjcm9sbCcgPyAwIDogMSxcbiAgICAgICAgICAgICAgICBkZWx0YVg6IDAsXG4gICAgICAgICAgICAgICAgZGVsdGFZOiAwLFxuICAgICAgICAgICAgICAgIGRlbHRhWjogMCxcblxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQucHJldmVudERlZmF1bHQgPT09ICdmdW5jdGlvbicpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChzY3JvbGxFdmVudCA9PT0gJ21vdXNld2hlZWwnKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZEV2ZW50LmRlbHRhWSA9IG1vdXNld2hlZWxFdmVudFNjYWxlICogZXZlbnQud2hlZWxEZWx0YTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hlZWxEZWx0YVgpXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRFdmVudC5kZWx0YVggPSBtb3VzZXdoZWVsRXZlbnRTY2FsZSAqIGV2ZW50LndoZWVsRGVsdGFYO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkRXZlbnQuZGVsdGFZID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIobm9ybWFsaXplZEV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBOb3JtYWxpemVkV2hlZWxFdmVudCB7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IFdoZWVsRXZlbnQ7XG4gICAgICAgIHRhcmdldDogRXZlbnRUYXJnZXQ7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgZGVsdGFNb2RlOiBudW1iZXI7XG4gICAgICAgIGRlbHRhWDogbnVtYmVyO1xuICAgICAgICBkZWx0YVk6IG51bWJlcjtcbiAgICAgICAgZGVsdGFaOiBudW1iZXI7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KCk6IHZvaWQ7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var StringHelper;
    (function (StringHelper) {
        /**
         * Returns the first word of the specified string
         * @param string The string to get the first word of
         */
        function getFirstWord(string) {
            if (typeof string !== 'string') return undefined;
            return string.trim().substr(0, string.indexOf(' '));
        }
        StringHelper.getFirstWord = getFirstWord;
        /**
         * Returns true if the sequence of elements of searchString converted to a String is the
         * same as the corresponding elements of this object (converted to a String) starting at
         * endPosition  length(this). Otherwise returns false.
         */
        function endsWith(string, ending, index) {
            if (!(index < this.length)) index = this.length;else index |= 0;
            var endingLength = ending.length;
            return string.substr(index - endingLength, endingLength) === ending;
        }
        StringHelper.endsWith = endsWith;
        function escapeRegExp(string) {
            /**
             * Used to match `RegExp`
             * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
             */
            var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
            var reHasRegExpChar = RegExp(reRegExpChar.source);
            return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, '\\$&') : string;
        }
        StringHelper.escapeRegExp = escapeRegExp;
    })(StringHelper = RideStylerShowcase.StringHelper || (RideStylerShowcase.StringHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU3RyaW5nSGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlN0cmluZ0hlbHBlciIsImdldEZpcnN0V29yZCIsInN0cmluZyIsInVuZGVmaW5lZCIsInRyaW0iLCJzdWJzdHIiLCJpbmRleE9mIiwiZW5kc1dpdGgiLCJlbmRpbmciLCJpbmRleCIsImxlbmd0aCIsImVuZGluZ0xlbmd0aCIsImVzY2FwZVJlZ0V4cCIsInJlUmVnRXhwQ2hhciIsInJlSGFzUmVnRXhwQ2hhciIsIlJlZ0V4cCIsInNvdXJjZSIsInRlc3QiLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxZQUFBO0FBQUEsS0FBQSxVQUFBQSxZQUFBLEVBQVk7QUFDckM7Ozs7QUFJQSxpQkFBQUMsWUFBQSxDQUE2QkMsTUFBN0IsRUFBMEM7QUFDdEMsZ0JBQUksT0FBT0EsTUFBUCxLQUFrQixRQUF0QixFQUFnQyxPQUFPQyxTQUFQO0FBQ2hDLG1CQUFPRCxPQUFPRSxJQUFQLEdBQWNDLE1BQWQsQ0FBcUIsQ0FBckIsRUFBd0JILE9BQU9JLE9BQVAsQ0FBZSxHQUFmLENBQXhCLENBQVA7QUFDSDtBQUhlTixxQkFBQUMsWUFBQSxHQUFZQSxZQUFaO0FBS2hCOzs7OztBQUtBLGlCQUFBTSxRQUFBLENBQXlCTCxNQUF6QixFQUF3Q00sTUFBeEMsRUFBdURDLEtBQXZELEVBQW9FO0FBQ2hFLGdCQUFJLEVBQUVBLFFBQVEsS0FBS0MsTUFBZixDQUFKLEVBQTRCRCxRQUFRLEtBQUtDLE1BQWIsQ0FBNUIsS0FDS0QsU0FBUyxDQUFUO0FBRUwsZ0JBQUlFLGVBQWVILE9BQU9FLE1BQTFCO0FBQ0EsbUJBQU9SLE9BQU9HLE1BQVAsQ0FBY0ksUUFBUUUsWUFBdEIsRUFBb0NBLFlBQXBDLE1BQXNESCxNQUE3RDtBQUNIO0FBTmVSLHFCQUFBTyxRQUFBLEdBQVFBLFFBQVI7QUFRaEIsaUJBQUFLLFlBQUEsQ0FBNkJWLE1BQTdCLEVBQTBDO0FBQ3RDOzs7O0FBSUEsZ0JBQU1XLGVBQWUscUJBQXJCO0FBQ0EsZ0JBQU1DLGtCQUFrQkMsT0FBT0YsYUFBYUcsTUFBcEIsQ0FBeEI7QUFFQSxtQkFBUWQsVUFBVVksZ0JBQWdCRyxJQUFoQixDQUFxQmYsTUFBckIsQ0FBWCxHQUNEQSxPQUFPZ0IsT0FBUCxDQUFlTCxZQUFmLEVBQTZCLE1BQTdCLENBREMsR0FFRFgsTUFGTjtBQUdIO0FBWGVGLHFCQUFBWSxZQUFBLEdBQVlBLFlBQVo7QUFZbkIsS0FuQzRCLEVBQUFaLGVBQUFELG1CQUFBQyxZQUFBLEtBQUFELG1CQUFBQyxZQUFBLEdBQVksRUFBWixDQUFBO0FBbUM1QixDQW5DRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1N0cmluZ0hlbHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuU3RyaW5nSGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCB3b3JkIG9mIHRoZSBzcGVjaWZpZWQgc3RyaW5nXG4gICAgICogQHBhcmFtIHN0cmluZyBUaGUgc3RyaW5nIHRvIGdldCB0aGUgZmlyc3Qgd29yZCBvZlxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRGaXJzdFdvcmQoc3RyaW5nOnN0cmluZyk6c3RyaW5nIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zdWJzdHIoMCwgc3RyaW5nLmluZGV4T2YoJyAnKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXF1ZW5jZSBvZiBlbGVtZW50cyBvZiBzZWFyY2hTdHJpbmcgY29udmVydGVkIHRvIGEgU3RyaW5nIGlzIHRoZVxuICAgICAqIHNhbWUgYXMgdGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudHMgb2YgdGhpcyBvYmplY3QgKGNvbnZlcnRlZCB0byBhIFN0cmluZykgc3RhcnRpbmcgYXRcbiAgICAgKiBlbmRQb3NpdGlvbiDigJMgbGVuZ3RoKHRoaXMpLiBPdGhlcndpc2UgcmV0dXJucyBmYWxzZS5cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZW5kc1dpdGgoc3RyaW5nOnN0cmluZywgZW5kaW5nOnN0cmluZywgaW5kZXg/Om51bWJlcikge1xuICAgICAgICBpZiAoIShpbmRleCA8IHRoaXMubGVuZ3RoKSkgaW5kZXggPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZWxzZSBpbmRleCB8PSAwO1xuICAgICAgICBcbiAgICAgICAgbGV0IGVuZGluZ0xlbmd0aCA9IGVuZGluZy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc3Vic3RyKGluZGV4IC0gZW5kaW5nTGVuZ3RoLCBlbmRpbmdMZW5ndGgpID09PSBlbmRpbmc7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHJpbmc6c3RyaW5nKTpzdHJpbmcge1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuICAgICAgICAgKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXBhdHRlcm5zKS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcbiAgICAgICAgY29uc3QgcmVIYXNSZWdFeHBDaGFyID0gUmVnRXhwKHJlUmVnRXhwQ2hhci5zb3VyY2UpO1xuXG4gICAgICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhci50ZXN0KHN0cmluZykpXG4gICAgICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gICAgICAgICAgICA6IHN0cmluZztcbiAgICB9XG59Il19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var StyleHelper;
    (function (StyleHelper) {
        /**
         * If true, the window.getComputedStyle is available
         */
        var hasGetComputedStyle = 'getComputedStyle' in window;
        /**
         * If true, HTMLElement.currentStyle is available
         */
        var hasCurrentStyleSupport = false;
        // Test for support on element properties
        (function () {
            var testElement = document.createElement('div');
            hasCurrentStyleSupport = 'currentStyle' in testElement;
            StyleHelper.transitionEndEvent = function () {
                // Transition event mapping
                var transitions = {
                    'transition': 'transitionend',
                    'WebkitTransition': 'webkitTransitionEnd',
                    'MozTransition': 'transitionend',
                    'OTransition': 'oTransitionEnd'
                };
                for (var k in transitions) {
                    if (k in testElement.style) return transitions[k];
                }return undefined;
            }();
            StyleHelper.transitionsSupported = !!StyleHelper.transitionEndEvent;
        })();
        /**
         * If false, this is not a touch device
         */
        StyleHelper.isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        /**
         * If false, SVGs are not supported by the browser
         */
        StyleHelper.svgSupported = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;
        /**
         * Get the current computed style of an element
         * @param element The element
         */
        function getComputedStyle(element) {
            if (hasGetComputedStyle) return window.getComputedStyle(element);
            if (hasCurrentStyleSupport && element['currentStyle'] !== null) return element['currentStyle'];
            throw "Unable to get computed style";
        }
        StyleHelper.getComputedStyle = getComputedStyle;
        var offsetPositionings = ['absolute', 'relative', 'fixed'];
        /**
         * Detects whether or not absolute/relative/fixed positioning is enabled on an element
         * @param element The element
         */
        function isOffsetPositioned(element) {
            var position = element.style.position;
            if (!position) position = getComputedStyle(element).position;
            // If we still don't have a position at this point it's not offset positioned
            if (!position) return false;
            // The element is offset positioned if its one of the above list
            position = position.toLowerCase();
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = offsetPositionings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var positioning = _step.value;

                    if (position === positioning) return true;
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            return false;
        }
        StyleHelper.isOffsetPositioned = isOffsetPositioned;
        function flattenClassList() {
            for (var _len = arguments.length, classes = Array(_len), _key = 0; _key < _len; _key++) {
                classes[_key] = arguments[_key];
            }

            return RideStylerShowcase.ArrayHelper.reduce(classes, function (classList, className) {
                var subclassList = void 0;
                if (typeof className === 'string') subclassList = [className];else subclassList = className;
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = subclassList[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var c = _step2.value;

                        classList = classList.concat(c.split(/\s+/));
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                return classList;
            }, []);
        }
        StyleHelper.flattenClassList = flattenClassList;
        /**
         * Causes the browser to recalculate the styles of the specified element
         * @param element The element
         */
        function triggerReflow(element) {
            element.offsetHeight;
        }
        StyleHelper.triggerReflow = triggerReflow;
        /**
         * Skip a transition on an element preformed by a callback function
         * @param element The element
         * @param callback A function to run causing a transition to be fired on the element
         */
        function skipTransition(element, callback) {
            if (!StyleHelper.transitionsSupported) return callback();
            var oldTransition = element.style.transition;
            element.style.transition = 'none';
            callback.call(this);
            triggerReflow(element);
            element.style.transition = oldTransition;
        }
        StyleHelper.skipTransition = skipTransition;
        function onNextTransitionEnd(element, listener) {
            return RideStylerShowcase.HTMLHelper.once(element, StyleHelper.transitionEndEvent, listener);
        }
        StyleHelper.onNextTransitionEnd = onNextTransitionEnd;
        function hasClasses(element, classArray) {
            var classes = void 0;
            if (typeof classArray === 'string') {
                for (var _len2 = arguments.length, classList = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {
                    classList[_key2 - 2] = arguments[_key2];
                }

                classes = classList || [];
                classes.push(classArray);
            } else classes = classArray;
            var _iteratorNormalCompletion3 = true;
            var _didIteratorError3 = false;
            var _iteratorError3 = undefined;

            try {
                for (var _iterator3 = classes[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                    var className = _step3.value;

                    if (!element.classList.contains(className)) return false;
                }
            } catch (err) {
                _didIteratorError3 = true;
                _iteratorError3 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion3 && _iterator3.return) {
                        _iterator3.return();
                    }
                } finally {
                    if (_didIteratorError3) {
                        throw _iteratorError3;
                    }
                }
            }

            return true;
        }
        StyleHelper.hasClasses = hasClasses;
        function parsePixels(pixels) {
            if (!RideStylerShowcase.StringHelper.endsWith(pixels, 'px')) return undefined;
            return parseInt(pixels);
        }
        StyleHelper.parsePixels = parsePixels;
        function calculatePadding(element) {
            var _getComputedStyle = getComputedStyle(element),
                paddingBottom = _getComputedStyle.paddingBottom,
                paddingTop = _getComputedStyle.paddingTop,
                paddingLeft = _getComputedStyle.paddingLeft,
                paddingRight = _getComputedStyle.paddingRight;

            var width = parsePixels(paddingLeft) + parsePixels(paddingRight);
            var height = parsePixels(paddingTop) + parsePixels(paddingBottom);
            if (isNaN(width)) width = 0;
            if (isNaN(height)) height = 0;
            return {
                width: width,
                height: height
            };
        }
        StyleHelper.calculatePadding = calculatePadding;
    })(StyleHelper = RideStylerShowcase.StyleHelper || (RideStylerShowcase.StyleHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU3R5bGVIZWxwZXIudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiU3R5bGVIZWxwZXIiLCJoYXNHZXRDb21wdXRlZFN0eWxlIiwid2luZG93IiwiaGFzQ3VycmVudFN0eWxlU3VwcG9ydCIsInRlc3RFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidHJhbnNpdGlvbkVuZEV2ZW50IiwidHJhbnNpdGlvbnMiLCJrIiwic3R5bGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2l0aW9uc1N1cHBvcnRlZCIsImlzVG91Y2hEZXZpY2UiLCJuYXZpZ2F0b3IiLCJtYXhUb3VjaFBvaW50cyIsInN2Z1N1cHBvcnRlZCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZVNWR1JlY3QiLCJnZXRDb21wdXRlZFN0eWxlIiwiZWxlbWVudCIsIm9mZnNldFBvc2l0aW9uaW5ncyIsImlzT2Zmc2V0UG9zaXRpb25lZCIsInBvc2l0aW9uIiwidG9Mb3dlckNhc2UiLCJwb3NpdGlvbmluZyIsImZsYXR0ZW5DbGFzc0xpc3QiLCJjbGFzc2VzIiwiQXJyYXlIZWxwZXIiLCJyZWR1Y2UiLCJjbGFzc0xpc3QiLCJjbGFzc05hbWUiLCJzdWJjbGFzc0xpc3QiLCJjIiwiY29uY2F0Iiwic3BsaXQiLCJ0cmlnZ2VyUmVmbG93Iiwib2Zmc2V0SGVpZ2h0Iiwic2tpcFRyYW5zaXRpb24iLCJjYWxsYmFjayIsIm9sZFRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uIiwiY2FsbCIsIm9uTmV4dFRyYW5zaXRpb25FbmQiLCJsaXN0ZW5lciIsIkhUTUxIZWxwZXIiLCJvbmNlIiwiaGFzQ2xhc3NlcyIsImNsYXNzQXJyYXkiLCJwdXNoIiwiY29udGFpbnMiLCJwYXJzZVBpeGVscyIsInBpeGVscyIsIlN0cmluZ0hlbHBlciIsImVuZHNXaXRoIiwicGFyc2VJbnQiLCJjYWxjdWxhdGVQYWRkaW5nIiwicGFkZGluZ0JvdHRvbSIsInBhZGRpbmdU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QUFBLGdCQUk1Q0MsV0FKNEMscUJBSTVDQSxXQUo0QztBQUFBLGdCQUs1Q0MsWUFMNEMscUJBSzVDQSxZQUw0Qzs7QUFRaEQsZ0JBQUlDLFFBQVFWLFlBQVlRLFdBQVosSUFBMkJSLFlBQVlTLFlBQVosQ0FBdkM7QUFDQSxnQkFBSUUsU0FBU1gsWUFBWU8sVUFBWixJQUEwQlAsWUFBWU0sYUFBWixDQUF2QztBQUVBLGdCQUFJTSxNQUFNRixLQUFOLENBQUosRUFBa0JBLFFBQVEsQ0FBUjtBQUNsQixnQkFBSUUsTUFBTUQsTUFBTixDQUFKLEVBQW1CQSxTQUFTLENBQVQ7QUFFbkIsbUJBQU87QUFDSEQsdUJBQU9BLEtBREo7QUFFSEMsd0JBQVFBO0FBRkwsYUFBUDtBQUlIO0FBbEJlOUQsb0JBQUF3RCxnQkFBQSxHQUFnQkEsZ0JBQWhCO0FBbUJuQixLQTFMNEIsRUFBQXhELGNBQUFELG1CQUFBQyxXQUFBLEtBQUFELG1CQUFBQyxXQUFBLEdBQVcsRUFBWCxDQUFBO0FBMEw1QixDQTFMRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1N0eWxlSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5TdHlsZUhlbHBlciB7XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlIGlzIGF2YWlsYWJsZVxuICAgICAqL1xuICAgIGxldCBoYXNHZXRDb21wdXRlZFN0eWxlID0gJ2dldENvbXB1dGVkU3R5bGUnIGluIHdpbmRvdztcblxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIEhUTUxFbGVtZW50LmN1cnJlbnRTdHlsZSBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBsZXQgaGFzQ3VycmVudFN0eWxlU3VwcG9ydCA9IGZhbHNlO1xuXG4gICAgLy8gVGVzdCBmb3Igc3VwcG9ydCBvbiBlbGVtZW50IHByb3BlcnRpZXNcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBoYXNDdXJyZW50U3R5bGVTdXBwb3J0ID0gJ2N1cnJlbnRTdHlsZScgaW4gdGVzdEVsZW1lbnQ7XG5cbiAgICAgICAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gZXZlbnQgbWFwcGluZ1xuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25zID0ge1xuICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uJyAgICAgICA6ICd0cmFuc2l0aW9uZW5kJyxcbiAgICAgICAgICAgICAgICAnV2Via2l0VHJhbnNpdGlvbicgOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgICAgICAgICAgICAgJ01velRyYW5zaXRpb24nICAgIDogJ3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgICAgICdPVHJhbnNpdGlvbicgICAgICA6ICdvVHJhbnNpdGlvbkVuZCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdHJhbnNpdGlvbnMpXG4gICAgICAgICAgICAgICAgaWYgKGsgaW4gdGVzdEVsZW1lbnQuc3R5bGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uc1trXTtcblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICB0cmFuc2l0aW9uc1N1cHBvcnRlZCA9ICEhdHJhbnNpdGlvbkVuZEV2ZW50O1xuICAgIH0pKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdHJhbnNpdGlvbiBlbmQgZXZlbnQgZm9yIHRoaXMgYnJvd3NlclxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgdHJhbnNpdGlvbkVuZEV2ZW50OnN0cmluZztcblxuICAgIC8qKlxuICAgICAqIElmIGZhbHNlLCB0cmFuc2l0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgdHJhbnNpdGlvbnNTdXBwb3J0ZWQ6Ym9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIElmIGZhbHNlLCB0aGlzIGlzIG5vdCBhIHRvdWNoIGRldmljZVxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgaXNUb3VjaERldmljZTpib29sZWFuID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDA7XG5cbiAgICAvKipcbiAgICAgKiBJZiBmYWxzZSwgU1ZHcyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgc3ZnU3VwcG9ydGVkOmJvb2xlYW4gPSAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJykuY3JlYXRlU1ZHUmVjdDtcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCBzdHlsZSBvZiBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50OkhUTUxFbGVtZW50KTpDU1NTdHlsZURlY2xhcmF0aW9uIHtcbiAgICAgICAgaWYgKGhhc0dldENvbXB1dGVkU3R5bGUpIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgaWYgKGhhc0N1cnJlbnRTdHlsZVN1cHBvcnQgJiYgZWxlbWVudFsnY3VycmVudFN0eWxlJ10gIT09IG51bGwpIHJldHVybiBlbGVtZW50WydjdXJyZW50U3R5bGUnXTtcblxuICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBnZXQgY29tcHV0ZWQgc3R5bGVcIjtcbiAgICB9XG5cbiAgICBsZXQgb2Zmc2V0UG9zaXRpb25pbmdzID0gWydhYnNvbHV0ZScsICdyZWxhdGl2ZScsICdmaXhlZCddO1xuICAgIC8qKlxuICAgICAqIERldGVjdHMgd2hldGhlciBvciBub3QgYWJzb2x1dGUvcmVsYXRpdmUvZml4ZWQgcG9zaXRpb25pbmcgaXMgZW5hYmxlZCBvbiBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNPZmZzZXRQb3NpdGlvbmVkKGVsZW1lbnQ6SFRNTEVsZW1lbnQpOmJvb2xlYW4ge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBlbGVtZW50LnN0eWxlLnBvc2l0aW9uO1xuXG4gICAgICAgIGlmICghcG9zaXRpb24pXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb247XG5cbiAgICAgICAgLy8gSWYgd2Ugc3RpbGwgZG9uJ3QgaGF2ZSBhIHBvc2l0aW9uIGF0IHRoaXMgcG9pbnQgaXQncyBub3Qgb2Zmc2V0IHBvc2l0aW9uZWRcbiAgICAgICAgaWYgKCFwb3NpdGlvbikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIFRoZSBlbGVtZW50IGlzIG9mZnNldCBwb3NpdGlvbmVkIGlmIGl0cyBvbmUgb2YgdGhlIGFib3ZlIGxpc3RcbiAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBmb3IgKGxldCBwb3NpdGlvbmluZyBvZiBvZmZzZXRQb3NpdGlvbmluZ3MpXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IHBvc2l0aW9uaW5nKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5DbGFzc0xpc3QoLi4uY2xhc3Nlczooc3RyaW5nfHN0cmluZ1tdKVtdKTpzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheUhlbHBlci5yZWR1Y2U8c3RyaW5nfHN0cmluZ1tdLCBzdHJpbmdbXT4oY2xhc3NlcywgKGNsYXNzTGlzdCwgY2xhc3NOYW1lKSA9PiB7XG4gICAgICAgICAgICBsZXQgc3ViY2xhc3NMaXN0OnN0cmluZ1tdO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHN1YmNsYXNzTGlzdCA9IFtjbGFzc05hbWVdO1xuICAgICAgICAgICAgZWxzZSBzdWJjbGFzc0xpc3QgPSBjbGFzc05hbWU7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGMgb2Ygc3ViY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0ID0gY2xhc3NMaXN0LmNvbmNhdChjLnNwbGl0KC9cXHMrLykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2xhc3NMaXN0O1xuICAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhdXNlcyB0aGUgYnJvd3NlciB0byByZWNhbGN1bGF0ZSB0aGUgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJSZWZsb3coZWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTa2lwIGEgdHJhbnNpdGlvbiBvbiBhbiBlbGVtZW50IHByZWZvcm1lZCBieSBhIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgQSBmdW5jdGlvbiB0byBydW4gY2F1c2luZyBhIHRyYW5zaXRpb24gdG8gYmUgZmlyZWQgb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2tpcFRyYW5zaXRpb24oZWxlbWVudDpIVE1MRWxlbWVudCwgY2FsbGJhY2s6RnVuY3Rpb24pOnZvaWQge1xuICAgICAgICBpZiAoIXRyYW5zaXRpb25zU3VwcG9ydGVkKSByZXR1cm4gY2FsbGJhY2soKTtcblxuICAgICAgICBsZXQgb2xkVHJhbnNpdGlvbiA9IGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbjtcblxuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICAgIHRyaWdnZXJSZWZsb3coZWxlbWVudCk7XG5cbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gb2xkVHJhbnNpdGlvbjtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gb25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50OkhUTUxFbGVtZW50LCBsaXN0ZW5lcjpFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBIVE1MSGVscGVyLm9uY2UoZWxlbWVudCwgdHJhbnNpdGlvbkVuZEV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBoYXMgYWxsIG9mIHRoZSBzdXBwbGllZCBjbGFzc2VzXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBjaGVja1xuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNDbGFzc2VzKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIGNsYXNzZXM6IHN0cmluZ1tdKTpib29sZWFuO1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGFsbCBvZiB0aGUgc3VwcGxpZWQgY2xhc3Nlc1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzZXMgdG8gY2hlY2tcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCAuLi5jbGFzc2VzOiBzdHJpbmdbXSk6Ym9vbGVhbjtcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCBjbGFzc0FycmF5OiBzdHJpbmdbXXxzdHJpbmcsIC4uLmNsYXNzTGlzdDpzdHJpbmdbXSk6Ym9vbGVhbiB7XG4gICAgICAgIGxldCBjbGFzc2VzOiBzdHJpbmdbXTtcblxuICAgICAgICBpZiAodHlwZW9mIGNsYXNzQXJyYXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gY2xhc3NMaXN0IHx8IFtdO1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGNsYXNzQXJyYXkpO1xuICAgICAgICB9IGVsc2UgY2xhc3NlcyA9IGNsYXNzQXJyYXk7XG5cbiAgICAgICAgZm9yIChsZXQgY2xhc3NOYW1lIG9mIGNsYXNzZXMpIHtcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gcGFyc2VQaXhlbHMocGl4ZWxzOnN0cmluZyk6bnVtYmVyIHtcbiAgICAgICAgaWYgKCFTdHJpbmdIZWxwZXIuZW5kc1dpdGgocGl4ZWxzLCAncHgnKSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gcGFyc2VJbnQocGl4ZWxzKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUGFkZGluZyhlbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBwYWRkaW5nQm90dG9tLFxuICAgICAgICAgICAgcGFkZGluZ1RvcCxcbiAgICAgICAgICAgIHBhZGRpbmdMZWZ0LFxuICAgICAgICAgICAgcGFkZGluZ1JpZ2h0XG4gICAgICAgIH0gPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgICAgIGxldCB3aWR0aCA9IHBhcnNlUGl4ZWxzKHBhZGRpbmdMZWZ0KSArIHBhcnNlUGl4ZWxzKHBhZGRpbmdSaWdodCk7XG4gICAgICAgIGxldCBoZWlnaHQgPSBwYXJzZVBpeGVscyhwYWRkaW5nVG9wKSArIHBhcnNlUGl4ZWxzKHBhZGRpbmdCb3R0b20pO1xuXG4gICAgICAgIGlmIChpc05hTih3aWR0aCkpIHdpZHRoID0gMDtcbiAgICAgICAgaWYgKGlzTmFOKGhlaWdodCkpIGhlaWdodCA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfVxufVxuIl19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var VisibilityHelper;
    (function (VisibilityHelper) {
        var defaultTransitionInClass = 'in';
        function show(element) {
            var transitionClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultTransitionInClass;

            setVisibility(element, true);
            RideStylerShowcase.StyleHelper.triggerReflow(element);
            element.classList.add(transitionClass);
            var promise = ridestyler.promise();
            if (!RideStylerShowcase.StyleHelper.transitionsSupported) promise.resolve();else RideStylerShowcase.StyleHelper.onNextTransitionEnd(element, function () {
                return promise.resolve();
            });
            return promise;
        }
        VisibilityHelper.show = show;
        function hide(element) {
            var transitionClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultTransitionInClass;

            element.classList.remove(transitionClass);
            var promise = ridestyler.promise();
            promise.done(function () {
                return setVisibility(element, false);
            });
            if (!RideStylerShowcase.StyleHelper.transitionsSupported) promise.resolve();else RideStylerShowcase.StyleHelper.onNextTransitionEnd(element, function () {
                return promise.resolve();
            });
            return promise;
        }
        VisibilityHelper.hide = hide;
        function setVisibility(element, visible) {
            if (!visible) {
                element.style.visibility = 'hidden';
                element.style.pointerEvents = 'none';
            } else {
                element.style.visibility = '';
                element.style.pointerEvents = '';
            }
        }
        VisibilityHelper.setVisibility = setVisibility;
    })(VisibilityHelper = RideStylerShowcase.VisibilityHelper || (RideStylerShowcase.VisibilityHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvVmlzaWJpbGl0eUhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJWaXNpYmlsaXR5SGVscGVyIiwiZGVmYXVsdFRyYW5zaXRpb25JbkNsYXNzIiwic2hvdyIsImVsZW1lbnQiLCJ0cmFuc2l0aW9uQ2xhc3MiLCJzZXRWaXNpYmlsaXR5IiwiU3R5bGVIZWxwZXIiLCJ0cmlnZ2VyUmVmbG93IiwiY2xhc3NMaXN0IiwiYWRkIiwicHJvbWlzZSIsInJpZGVzdHlsZXIiLCJ0cmFuc2l0aW9uc1N1cHBvcnRlZCIsInJlc29sdmUiLCJvbk5leHRUcmFuc2l0aW9uRW5kIiwiaGlkZSIsInJlbW92ZSIsImRvbmUiLCJ2aXNpYmxlIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwicG9pbnRlckV2ZW50cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsZ0JBQUE7QUFBQSxLQUFBLFVBQUFBLGdCQUFBLEVBQWdCO0FBQ3pDLFlBQU1DLDJCQUEyQixJQUFqQztBQUVBLGlCQUFBQyxJQUFBLENBQXFCQyxPQUFyQixFQUEyRjtBQUFBLGdCQUFqREMsZUFBaUQsdUVBQXhCSCx3QkFBd0I7O0FBQ3ZGSSwwQkFBY0YsT0FBZCxFQUF1QixJQUF2QjtBQUVBSiwrQkFBQU8sV0FBQSxDQUFZQyxhQUFaLENBQTBCSixPQUExQjtBQUVBQSxvQkFBUUssU0FBUixDQUFrQkMsR0FBbEIsQ0FBc0JMLGVBQXRCO0FBRUEsZ0JBQUlNLFVBQVVDLFdBQVdELE9BQVgsRUFBZDtBQUVBLGdCQUFJLENBQUNYLG1CQUFBTyxXQUFBLENBQVlNLG9CQUFqQixFQUF1Q0YsUUFBUUcsT0FBUixHQUF2QyxLQUNLZCxtQkFBQU8sV0FBQSxDQUFZUSxtQkFBWixDQUFnQ1gsT0FBaEMsRUFBeUM7QUFBQSx1QkFBTU8sUUFBUUcsT0FBUixFQUFOO0FBQUEsYUFBekM7QUFFTCxtQkFBT0gsT0FBUDtBQUNIO0FBYmVWLHlCQUFBRSxJQUFBLEdBQUlBLElBQUo7QUFlaEIsaUJBQUFhLElBQUEsQ0FBcUJaLE9BQXJCLEVBQTJGO0FBQUEsZ0JBQWpEQyxlQUFpRCx1RUFBeEJILHdCQUF3Qjs7QUFDdkZFLG9CQUFRSyxTQUFSLENBQWtCUSxNQUFsQixDQUF5QlosZUFBekI7QUFFQSxnQkFBSU0sVUFBVUMsV0FBV0QsT0FBWCxFQUFkO0FBRUFBLG9CQUFRTyxJQUFSLENBQWE7QUFBQSx1QkFBTVosY0FBY0YsT0FBZCxFQUF1QixLQUF2QixDQUFOO0FBQUEsYUFBYjtBQUVBLGdCQUFJLENBQUNKLG1CQUFBTyxXQUFBLENBQVlNLG9CQUFqQixFQUF1Q0YsUUFBUUcsT0FBUixHQUF2QyxLQUNLZCxtQkFBQU8sV0FBQSxDQUFZUSxtQkFBWixDQUFnQ1gsT0FBaEMsRUFBeUM7QUFBQSx1QkFBTU8sUUFBUUcsT0FBUixFQUFOO0FBQUEsYUFBekM7QUFFTCxtQkFBT0gsT0FBUDtBQUNIO0FBWGVWLHlCQUFBZSxJQUFBLEdBQUlBLElBQUo7QUFhaEIsaUJBQUFWLGFBQUEsQ0FBOEJGLE9BQTlCLEVBQW1EZSxPQUFuRCxFQUFtRTtBQUMvRCxnQkFBSSxDQUFDQSxPQUFMLEVBQWM7QUFDVmYsd0JBQVFnQixLQUFSLENBQWNDLFVBQWQsR0FBMkIsUUFBM0I7QUFDQWpCLHdCQUFRZ0IsS0FBUixDQUFjRSxhQUFkLEdBQThCLE1BQTlCO0FBQ0gsYUFIRCxNQUdPO0FBQ0hsQix3QkFBUWdCLEtBQVIsQ0FBY0MsVUFBZCxHQUEyQixFQUEzQjtBQUNBakIsd0JBQVFnQixLQUFSLENBQWNFLGFBQWQsR0FBOEIsRUFBOUI7QUFDSDtBQUNKO0FBUmVyQix5QkFBQUssYUFBQSxHQUFhQSxhQUFiO0FBU25CLEtBeEM0QixFQUFBTCxtQkFBQUQsbUJBQUFDLGdCQUFBLEtBQUFELG1CQUFBQyxnQkFBQSxHQUFnQixFQUFoQixDQUFBO0FBd0M1QixDQXhDRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1Zpc2liaWxpdHlIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlZpc2liaWxpdHlIZWxwZXIge1xuICAgIGNvbnN0IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyA9ICdpbidcblxuICAgIGV4cG9ydCBmdW5jdGlvbiBzaG93KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHRyYW5zaXRpb25DbGFzczpzdHJpbmcgPSBkZWZhdWx0VHJhbnNpdGlvbkluQ2xhc3MpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgc2V0VmlzaWJpbGl0eShlbGVtZW50LCB0cnVlKTtcblxuICAgICAgICBTdHlsZUhlbHBlci50cmlnZ2VyUmVmbG93KGVsZW1lbnQpO1xuXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0cmFuc2l0aW9uQ2xhc3MpO1xuXG4gICAgICAgIGxldCBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG5cbiAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZCkgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGVsc2UgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50LCAoKSA9PiBwcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhpZGUoZWxlbWVudDpIVE1MRWxlbWVudCwgdHJhbnNpdGlvbkNsYXNzOnN0cmluZyA9IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodHJhbnNpdGlvbkNsYXNzKTtcblxuICAgICAgICBsZXQgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xuXG4gICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiBzZXRWaXNpYmlsaXR5KGVsZW1lbnQsIGZhbHNlKSk7XG5cbiAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZCkgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGVsc2UgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50LCAoKSA9PiBwcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldFZpc2liaWxpdHkoZWxlbWVudDpIVE1MRWxlbWVudCwgdmlzaWJsZTogYm9vbGVhbikge1xuICAgICAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var strings;
    (function (strings) {
        strings.registerLanguage(RideStylerShowcase.LanguageKeys.En, {
            "vehicle-select-visualize-intro": "Visualize wheels, tires and suspension modifications on your vehicle.",
            "vehicle-select-share-intro": "Share with your friends, or save for inspiration.",
            "select-your-vehicle": "Select Your Vehicle",
            "paint": "Paint",
            "suspension": "Suspension",
            "wheels": "Wheels",
            "tires": "Tires",
            "front": "Front",
            "rear": "Rear",
            "vehicle-details": "Vehicle Details",
            "change-vehicle": "Change Vehicle",
            "wheel-details": "Wheel Details",
            "tire-details": "Tire Details",
            "select-paint": "Select Paint",
            "select-wheels": "Select Wheels",
            "select-tires": "Select Tires",
            "adjust-suspension": "Adjust Suspension",
            "change-wheel-size": "Wheel Size",
            "no-results": "No Results Found",
            "no-wheel-results": "No wheels found for this vehicle.",
            "wheel-features-specs": "Features & Specs.",
            "share-my-vehicle": "Share My Vehicle",
            "share-instructions": "Use the buttons to share or save your vehicle configuration.",
            "no-description-wheel": "We don't have a description for this wheel yet",
            'show-specs': "Show Specs",
            'call': "Call",
            'size': "Size",
            'offset': "Offset",
            'bolt-pattern': "Bolt Pattern",
            'centerbore': "Centerbore",
            'price': "Price",
            'item-number': "Item #",
            'brands': "Brands",
            'finishes': "Finishes",
            'sizes': "Sizes",
            'all': "All",
            'all-brands': "All Brands",
            'all-finishes': "All Finishes",
            'all-sizes': "All Sizes",
            'filter-results': "Filter Results",
            'loading-ellipsis': "Loading...",
            'show-count-format-tires': "Show {count} Tires",
            'show-count-format-wheels': "Show {count} Wheels",
            'specifications': "Specifications",
            'speed-rating': "Speed Rating",
            'any-speed-ratings': "Any Speed Ratings",
            'features': "Features",
            'any-features': "Any Features",
            'finish': "Finish",
            'summary': "Summary",
            'check-out-my-vehicle': "Check out my vehicle!"
        });
    })(strings = RideStylerShowcase.strings || (RideStylerShowcase.strings = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL3N0cmluZ3MvUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZW4udHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwic3RyaW5ncyIsInJlZ2lzdGVyTGFuZ3VhZ2UiLCJMYW5ndWFnZUtleXMiLCJFbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsT0FBQTtBQUFBLEtBQUEsVUFBQUEsT0FBQSxFQUFPO0FBQ2hDQSxnQkFBQUMsZ0JBQUEsQ0FBaUJGLG1CQUFBRyxZQUFBLENBQWFDLEVBQTlCLEVBQWtDO0FBQzlCLDhDQUFrQyx1RUFESjtBQUU5QiwwQ0FBa0MsbURBRko7QUFHOUIsbUNBQWtDLHFCQUhKO0FBSTlCLHFCQUFrQyxPQUpKO0FBSzlCLDBCQUFrQyxZQUxKO0FBTTlCLHNCQUFrQyxRQU5KO0FBTzlCLHFCQUFrQyxPQVBKO0FBUTlCLHFCQUFrQyxPQVJKO0FBUzlCLG9CQUFrQyxNQVRKO0FBVTlCLCtCQUFrQyxpQkFWSjtBQVc5Qiw4QkFBa0MsZ0JBWEo7QUFZOUIsNkJBQWtDLGVBWko7QUFhOUIsNEJBQWtDLGNBYko7QUFjOUIsNEJBQWtDLGNBZEo7QUFlOUIsNkJBQWtDLGVBZko7QUFnQjlCLDRCQUFrQyxjQWhCSjtBQWlCOUIsaUNBQWtDLG1CQWpCSjtBQWtCOUIsaUNBQWtDLFlBbEJKO0FBbUI5QiwwQkFBa0Msa0JBbkJKO0FBb0I5QixnQ0FBa0MsbUNBcEJKO0FBcUI5QixvQ0FBa0MsbUJBckJKO0FBc0I5QixnQ0FBa0Msa0JBdEJKO0FBdUI5QixrQ0FBa0MsOERBdkJKO0FBd0I5QixvQ0FBa0MsZ0RBeEJKO0FBeUI5QiwwQkFBa0MsWUF6Qko7QUEwQjlCLG9CQUFrQyxNQTFCSjtBQTJCOUIsb0JBQWtDLE1BM0JKO0FBNEI5QixzQkFBa0MsUUE1Qko7QUE2QjlCLDRCQUFrQyxjQTdCSjtBQThCOUIsMEJBQWtDLFlBOUJKO0FBK0I5QixxQkFBa0MsT0EvQko7QUFnQzlCLDJCQUFrQyxRQWhDSjtBQWlDOUIsc0JBQWtDLFFBakNKO0FBa0M5Qix3QkFBa0MsVUFsQ0o7QUFtQzlCLHFCQUFrQyxPQW5DSjtBQW9DOUIsbUJBQWtDLEtBcENKO0FBcUM5QiwwQkFBa0MsWUFyQ0o7QUFzQzlCLDRCQUFrQyxjQXRDSjtBQXVDOUIseUJBQWtDLFdBdkNKO0FBd0M5Qiw4QkFBa0MsZ0JBeENKO0FBeUM5QixnQ0FBa0MsWUF6Q0o7QUEwQzlCLHVDQUFrQyxvQkExQ0o7QUEyQzlCLHdDQUFrQyxxQkEzQ0o7QUE0QzlCLDhCQUFrQyxnQkE1Q0o7QUE2QzlCLDRCQUFrQyxjQTdDSjtBQThDOUIsaUNBQWtDLG1CQTlDSjtBQStDOUIsd0JBQWtDLFVBL0NKO0FBZ0Q5Qiw0QkFBa0MsY0FoREo7QUFpRDlCLHNCQUFrQyxRQWpESjtBQWtEOUIsdUJBQWtDLFNBbERKO0FBbUQ5QixvQ0FBa0M7QUFuREosU0FBbEM7QUFxREgsS0F0RDRCLEVBQUFILFVBQUFELG1CQUFBQyxPQUFBLEtBQUFELG1CQUFBQyxPQUFBLEdBQU8sRUFBUCxDQUFBO0FBc0Q1QixDQXRERCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9zdHJpbmdzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmVuLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzIHtcbiAgICByZWdpc3Rlckxhbmd1YWdlKExhbmd1YWdlS2V5cy5Fbiwge1xuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXZpc3VhbGl6ZS1pbnRyb1wiOiBcIlZpc3VhbGl6ZSB3aGVlbHMsIHRpcmVzIGFuZCBzdXNwZW5zaW9uIG1vZGlmaWNhdGlvbnMgb24geW91ciB2ZWhpY2xlLlwiLFxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXNoYXJlLWludHJvXCI6ICAgICBcIlNoYXJlIHdpdGggeW91ciBmcmllbmRzLCBvciBzYXZlIGZvciBpbnNwaXJhdGlvbi5cIixcbiAgICAgICAgXCJzZWxlY3QteW91ci12ZWhpY2xlXCI6ICAgICAgICAgICAgXCJTZWxlY3QgWW91ciBWZWhpY2xlXCIsXG4gICAgICAgIFwicGFpbnRcIjogICAgICAgICAgICAgICAgICAgICAgICAgIFwiUGFpbnRcIixcbiAgICAgICAgXCJzdXNwZW5zaW9uXCI6ICAgICAgICAgICAgICAgICAgICAgXCJTdXNwZW5zaW9uXCIsXG4gICAgICAgIFwid2hlZWxzXCI6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiV2hlZWxzXCIsXG4gICAgICAgIFwidGlyZXNcIjogICAgICAgICAgICAgICAgICAgICAgICAgIFwiVGlyZXNcIixcbiAgICAgICAgXCJmcm9udFwiOiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJGcm9udFwiLFxuICAgICAgICBcInJlYXJcIjogICAgICAgICAgICAgICAgICAgICAgICAgICBcIlJlYXJcIixcbiAgICAgICAgXCJ2ZWhpY2xlLWRldGFpbHNcIjogICAgICAgICAgICAgICAgXCJWZWhpY2xlIERldGFpbHNcIixcbiAgICAgICAgXCJjaGFuZ2UtdmVoaWNsZVwiOiAgICAgICAgICAgICAgICAgXCJDaGFuZ2UgVmVoaWNsZVwiLFxuICAgICAgICBcIndoZWVsLWRldGFpbHNcIjogICAgICAgICAgICAgICAgICBcIldoZWVsIERldGFpbHNcIixcbiAgICAgICAgXCJ0aXJlLWRldGFpbHNcIjogICAgICAgICAgICAgICAgICAgXCJUaXJlIERldGFpbHNcIixcbiAgICAgICAgXCJzZWxlY3QtcGFpbnRcIjogICAgICAgICAgICAgICAgICAgXCJTZWxlY3QgUGFpbnRcIixcbiAgICAgICAgXCJzZWxlY3Qtd2hlZWxzXCI6ICAgICAgICAgICAgICAgICAgXCJTZWxlY3QgV2hlZWxzXCIsXG4gICAgICAgIFwic2VsZWN0LXRpcmVzXCI6ICAgICAgICAgICAgICAgICAgIFwiU2VsZWN0IFRpcmVzXCIsXG4gICAgICAgIFwiYWRqdXN0LXN1c3BlbnNpb25cIjogICAgICAgICAgICAgIFwiQWRqdXN0IFN1c3BlbnNpb25cIixcbiAgICAgICAgXCJjaGFuZ2Utd2hlZWwtc2l6ZVwiOiAgICAgICAgICAgICAgXCJXaGVlbCBTaXplXCIsXG4gICAgICAgIFwibm8tcmVzdWx0c1wiOiAgICAgICAgICAgICAgICAgICAgIFwiTm8gUmVzdWx0cyBGb3VuZFwiLFxuICAgICAgICBcIm5vLXdoZWVsLXJlc3VsdHNcIjogICAgICAgICAgICAgICBcIk5vIHdoZWVscyBmb3VuZCBmb3IgdGhpcyB2ZWhpY2xlLlwiLFxuICAgICAgICBcIndoZWVsLWZlYXR1cmVzLXNwZWNzXCI6ICAgICAgICAgICBcIkZlYXR1cmVzICYgU3BlY3MuXCIsXG4gICAgICAgIFwic2hhcmUtbXktdmVoaWNsZVwiOiAgICAgICAgICAgICAgIFwiU2hhcmUgTXkgVmVoaWNsZVwiLFxuICAgICAgICBcInNoYXJlLWluc3RydWN0aW9uc1wiOiAgICAgICAgICAgICBcIlVzZSB0aGUgYnV0dG9ucyB0byBzaGFyZSBvciBzYXZlIHlvdXIgdmVoaWNsZSBjb25maWd1cmF0aW9uLlwiLFxuICAgICAgICBcIm5vLWRlc2NyaXB0aW9uLXdoZWVsXCI6ICAgICAgICAgICBcIldlIGRvbid0IGhhdmUgYSBkZXNjcmlwdGlvbiBmb3IgdGhpcyB3aGVlbCB5ZXRcIixcbiAgICAgICAgJ3Nob3ctc3BlY3MnOiAgICAgICAgICAgICAgICAgICAgIFwiU2hvdyBTcGVjc1wiLFxuICAgICAgICAnY2FsbCc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDYWxsXCIsXG4gICAgICAgICdzaXplJzogICAgICAgICAgICAgICAgICAgICAgICAgICBcIlNpemVcIixcbiAgICAgICAgJ29mZnNldCc6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiT2Zmc2V0XCIsXG4gICAgICAgICdib2x0LXBhdHRlcm4nOiAgICAgICAgICAgICAgICAgICBcIkJvbHQgUGF0dGVyblwiLFxuICAgICAgICAnY2VudGVyYm9yZSc6ICAgICAgICAgICAgICAgICAgICAgXCJDZW50ZXJib3JlXCIsXG4gICAgICAgICdwcmljZSc6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlByaWNlXCIsXG4gICAgICAgICdpdGVtLW51bWJlcic6ICAgICAgICAgICAgICAgICAgICBcIkl0ZW0gI1wiLFxuICAgICAgICAnYnJhbmRzJzogICAgICAgICAgICAgICAgICAgICAgICAgXCJCcmFuZHNcIixcbiAgICAgICAgJ2ZpbmlzaGVzJzogICAgICAgICAgICAgICAgICAgICAgIFwiRmluaXNoZXNcIixcbiAgICAgICAgJ3NpemVzJzogICAgICAgICAgICAgICAgICAgICAgICAgIFwiU2l6ZXNcIixcbiAgICAgICAgJ2FsbCc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQWxsXCIsXG4gICAgICAgICdhbGwtYnJhbmRzJzogICAgICAgICAgICAgICAgICAgICBcIkFsbCBCcmFuZHNcIixcbiAgICAgICAgJ2FsbC1maW5pc2hlcyc6ICAgICAgICAgICAgICAgICAgIFwiQWxsIEZpbmlzaGVzXCIsXG4gICAgICAgICdhbGwtc2l6ZXMnOiAgICAgICAgICAgICAgICAgICAgICBcIkFsbCBTaXplc1wiLFxuICAgICAgICAnZmlsdGVyLXJlc3VsdHMnOiAgICAgICAgICAgICAgICAgXCJGaWx0ZXIgUmVzdWx0c1wiLFxuICAgICAgICAnbG9hZGluZy1lbGxpcHNpcyc6ICAgICAgICAgICAgICAgXCJMb2FkaW5nLi4uXCIsXG4gICAgICAgICdzaG93LWNvdW50LWZvcm1hdC10aXJlcyc6ICAgICAgICBcIlNob3cge2NvdW50fSBUaXJlc1wiLFxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtd2hlZWxzJzogICAgICAgXCJTaG93IHtjb3VudH0gV2hlZWxzXCIsXG4gICAgICAgICdzcGVjaWZpY2F0aW9ucyc6ICAgICAgICAgICAgICAgICBcIlNwZWNpZmljYXRpb25zXCIsXG4gICAgICAgICdzcGVlZC1yYXRpbmcnOiAgICAgICAgICAgICAgICAgICBcIlNwZWVkIFJhdGluZ1wiLFxuICAgICAgICAnYW55LXNwZWVkLXJhdGluZ3MnOiAgICAgICAgICAgICAgXCJBbnkgU3BlZWQgUmF0aW5nc1wiLFxuICAgICAgICAnZmVhdHVyZXMnOiAgICAgICAgICAgICAgICAgICAgICAgXCJGZWF0dXJlc1wiLFxuICAgICAgICAnYW55LWZlYXR1cmVzJzogICAgICAgICAgICAgICAgICAgXCJBbnkgRmVhdHVyZXNcIixcbiAgICAgICAgJ2ZpbmlzaCc6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiRmluaXNoXCIsXG4gICAgICAgICdzdW1tYXJ5JzogICAgICAgICAgICAgICAgICAgICAgICBcIlN1bW1hcnlcIixcbiAgICAgICAgJ2NoZWNrLW91dC1teS12ZWhpY2xlJzogICAgICAgICAgIFwiQ2hlY2sgb3V0IG15IHZlaGljbGUhXCJcbiAgICB9KTtcbn0iXX0=

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdWlzbGlkZXIuanMiLCJxcmNvZGUuanMiLCJUaW55QW5pbWF0ZS5qcyIsImltcGV0dXMuanMiLCJyc3ZzbS5qcyIsInJzdnIuanMiLCJwb2x5ZmlsbC5qcyIsImluZGV4LmpzIiwiaWU4Lm1heC5qcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZS5qcyIsIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuYXV0aC50cyIsIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuc2V0dGluZ3MudHMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnRzIiwic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZGF0YS5qcyIsIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5ldmVudHMudHMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycy50cyIsInNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmZpbHRlcnMuanMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UucGFyYW1ldGVycy50cyIsIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdGF0ZS50cyIsIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLnRzIiwiLi4vc3JjL3NjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnN0eWxlcy50cyIsIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ29tcG9uZW50QmFzZS50cyIsInNjcmlwdHMvY29tcG9uZW50cy9JQ29tcG9uZW50LmpzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9NYWluQ29tcG9uZW50QmFzZS50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmVzaXplYWJsZVJlc291cmNlSW1hZ2UudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudC50cyIsInNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50LmpzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvci50cyIsInNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3IuanMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudC50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU2hhcmVCdXR0b24udHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3Rvci50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24udHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVTZWxlY3Rpb24udHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uLnRzIiwic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uLmpzIiwic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVZpZXdwb3J0LmpzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9UaXJlRGV0YWlscy50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVmVoaWNsZURldGFpbHMudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1doZWVsRGV0YWlscy50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvbW9kYWxzL1JpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9BcnJheUhlbHBlci50cyIsIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvQm94SGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9HVUlESGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9IVE1MSGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9OdW1iZXJIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL09iamVjdEhlbHBlci50cyIsIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvUHJvbWlzZUhlbHBlci50cyIsIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU2Nyb2xsSGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9TdHJpbmdIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL1N0eWxlSGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9WaXNpYmlsaXR5SGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvc3RyaW5ncy9SaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5lbi50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJhcGkiLCJhdXRoIiwidmFsaWRhdGUiLCJyZXF1ZXN0Iiwic2V0dGluZ3MiLCJzZXR0aW5nc18xIiwiZGVmYXVsdFNldHRpbmdzIiwiRW5hYmxlU2hhcmluZyIsIlN1c3BlbnNpb25SYW5nZXMiLCJEZWZhdWx0IiwiTWluIiwiTWF4IiwiVHJ1Y2s0V0QiLCJWYW40V0QiLCJVc2VSYXdUaXJlRGVzY3JpcHRpb24iLCJnZXRTZXR0aW5ncyIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwiS2V5cyIsInJlc3BvbnNlIiwiU2V0dGluZ3MiLCJwYXJzZUJvb2xlYW4iLCJwYXJzZVN1c3BlbnNpb25SYW5nZXMiLCJib29sZWFuIiwiZmlyc3RDaGFyIiwic3VzcGVuc2lvblJhbmdlc1NldHRpbmciLCJzdXNwZW5zaW9uUmFuZ2VzIiwiSlNPTiIsInBhcnNlIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImluaXRpYWxpemUiLCJyaWRlc3R5bGVyIiwic3RhcnQiLCJkYXRhIiwiVXNlcm5hbWUiLCJ1c2VybmFtZSIsIlBhc3N3b3JkIiwicGFzc3dvcmQiLCJjYWxsYmFjayIsIlN1Y2Nlc3MiLCJhdXRoZW50aWNhdGVkIiwicmVzb2x2ZSIsInJlamVjdCIsImdldFVSTCIsInNldCIsImRvbmUiLCJ1cmwiLCJhamF4IiwidW5kZWZpbmVkIiwidGVzdCIsImVudmlyb25tZW50IiwiRW52aXJvbm1lbnQiLCJBbHBoYSIsIkJldGEiLCJMaXZlIiwiT3RoZXIiLCJmYWlsIiwicHJvbWlzZSIsImlzQXV0aGVudGljYXRlZCIsInN0YXRlIiwiYWZ0ZXJBdXRoZW50aWNhdGVkIiwiYWN0aW9uIiwic2VuZCIsImV2ZW50cyIsIkV2ZW50SGFuZGxlciIsImV2ZW50SGFuZGxlcnMiLCJldmVudE5hbWUiLCJwdXNoIiwiQXJyYXlIZWxwZXIiLCJyZW1vdmUiLCJldiIsImRlYnVnQ2FsbGJhY2siLCJldmVudEhhbmRsZXIiLCJmaWx0ZXJzIiwiZmlsdGVyc18xIiwiRmlsdGVyQ29udHJvbGxlciIsImdsb2JhbEZpbHRlcnMiLCJHbG9iYWxGaWx0ZXJQcm92aWRlciIsInRpcmVGaWx0ZXJzIiwiVGlyZUZpbHRlclByb3ZpZGVyIiwid2hlZWxGaWx0ZXJzIiwiV2hlZWxGaWx0ZXJQcm92aWRlciIsInZlaGljbGUiLCJjbGVhckZpbHRlcnMiLCJzZXRWZWhpY2xlIiwidmVoaWNsZURlc2NyaXB0aW9uIiwic2V0VmVoaWNsZURlc2NyaXB0aW9uIiwidHJpZ2dlckNoYW5nZSIsImNsZWFyIiwiRmlsdGVyUHJvdmlkZXIiLCJ0eXBlIiwiZ2xvYmFsRmlsdGVyUHJvdmlkZXIiLCJjdXJyZW50RmlsdGVycyIsIm9uRmlsdGVyc0NoYW5nZWQiLCJnZXRGaWx0ZXJzIiwiZmlsdGVyVmFsdWVzIiwiYmFzZUZpbHRlcnMiLCJmaWx0ZXJWYWx1ZSIsImtleSIsInZhbHVlIiwic2V0RmlsdGVyIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiZmlsdGVyIiwicmV0cmlldmVPcHRpb25zIiwiZmlsdGVyT3B0aW9uIiwiZmluZEZpbHRlck9wdGlvbiIsImFwcGx5IiwiZmlsdGVyT3B0aW9ucyIsInNlbGVjdGVkRmlsdGVyc09yS2V5IiwibmV3RmlsdGVycyIsInNlbGVjdGVkRmlsdGVycyIsInNlbGVjdGVkRmlsdGVyIiwiaGFzQ2hhbmdlZCIsImhhc093blByb3BlcnR5IiwibmV3RmlsdGVyVmFsdWUiLCJjdXJyZW50RmlsdGVyVmFsdWUiLCJ0cmlnZ2VyRmlsdGVyQ2hhbmdlIiwidmVoaWNsZUNvbmZpZ0ZpbHRlcktleSIsIkhhc0ZpdG1lbnRzIiwiSGFzQ2F0YWxvZ0ltYWdlIiwidmlzaWJsZSIsInZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ2ZWhpY2xlVGlyZU9wdGlvbklEIiwiVmVoaWNsZUNvbmZpZ3VyYXRpb24iLCJWZWhpY2xlVGlyZU9wdGlvbiIsIkhhc1NpZGVJbWFnZSIsIkhhc0FuZ2xlZEltYWdlIiwiUmVxdWlyZWRGaXRtZW50UmVzb3VyY2VUeXBlcyIsImxhYmVsIiwic3RyaW5ncyIsImdldFN0cmluZyIsInVuc2VsZWN0ZWRPcHRpb25MYWJlbCIsIm1hcCIsIkJyYW5kcyIsImJyYW5kIiwiVGlyZUJyYW5kTmFtZSIsIlRpcmVCcmFuZElEIiwiZ2V0VmFsdWVGcm9tRmlsdGVycyIsIlRpcmVCcmFuZCIsInRpcmVCcmFuZElEIiwiQXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsIlRpcmVNb2RlbEF0dHJpYnV0ZU5hbWUiLCJUaXJlTW9kZWxBdHRyaWJ1dGVJRCIsIlJlcXVpcmVkVGlyZU1vZGVsQXR0cmlidXRlIiwiYXR0cmlidXRlSUQiLCJTcGVlZFJhdGluZ3MiLCJUaXJlU3BlZWRSYXRpbmdDb2RlIiwiVGlyZVNwZWVkUmF0aW5nSUQiLCJTcGVlZFJhdGluZyIsInNwZWVkUmF0aW5nSUQiLCJDb3VudCIsIldoZWVsQnJhbmROYW1lIiwiV2hlZWxCcmFuZElEIiwiV2hlZWxCcmFuZCIsIndoZWVsQnJhbmRJRCIsIkZpbmlzaGVzIiwiZmluaXNoQ2F0ZWdvcnkiLCJXaGVlbEZpbmlzaENhdGVnb3J5TmFtZSIsIldoZWVsRmluaXNoQ2F0ZWdvcnlJRCIsIldoZWVsRmluaXNoQ2F0ZWdvcnkiLCJ3aGVlbEZpbmlzaENhdGVnb3J5SUQiLCJEaWFtZXRlcnMiLCJkaWFtZXRlciIsInRvU3RyaW5nIiwiZ2V0Rml0bWVudEZpbHRlclZhbHVlIiwiRml0bWVudEZpbHRlcnMiLCJhcHBseUZpdG1lbnRGaWx0ZXIiLCJEaWFtZXRlciIsImZpdG1lbnRGaWx0ZXIiLCJHcm91cEtleSIsImZpdG1lbnRGaWx0ZXJHcm91cEtleSIsImZpdG1lbnRGaWx0ZXJzIiwiZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAiLCJhcHBsaWVkRml0bWVudEZpbHRlciIsInBhcmFtZXRlcnMiLCJrZXlWYWx1ZVN0b3JlIiwiUmlkZVN0eWxlclNob3djYXNlUGFyYW1ldGVycyIsImN1cnJlbnRVcmwiLCJkZWNvZGVVUklDb21wb25lbnQiLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0ciIsInNwbGl0VXJsIiwic3BsaXQiLCJmb3JFYWNoIiwiaW5uZXJBcnJheSIsInJlZHVjZSIsIm8iLCJrIiwidiIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJzdGF0ZURhdGEiLCJoaXN0b3J5U3RhdGUiLCJuZXdEYXRhIiwiT2JqZWN0IiwidmVoaWNsZUZyYWdtZW50cyIsImN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEIiwiVGlyZU9wdGlvbklEIiwiVGlyZU9wdGlvblN0cmluZyIsIlRpcmVNb2RlbElEIiwiY3VycmVudFRpcmUiLCJXaGVlbE1vZGVsIiwiY3VycmVudFdoZWVsIiwiV2hlZWxNb2RlbElEIiwiV2hlZWxGaXRtZW50SUQiLCJjdXJyZW50V2hlZWxGaXRtZW50IiwiU3VzcGVuc2lvbiIsImN1cnJlbnRTdXNwZW5zaW9uIiwiUGFpbnRTY2hlbWUiLCJjdXJyZW50UGFpbnRTY2hlbWUiLCJWZWhpY2xlUGFpbnRTY2hlbWVJRCIsIlBhaW50TmFtZSIsIlNjaGVtZU5hbWUiLCJzdHJpbmdpZnkiLCJrZXlzIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImNvbnRleHQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXh0ZW5kRGF0YSIsImFjdGl2ZVdoZWVsRGlhbWV0ZXJTZWxlY3QiLCJ2aWV3cG9ydCIsIlVwZGF0ZSIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEIiwiV2hlZWxGaXRtZW50IiwiUGFpbnRDb2xvciIsIkNvbG9ycyIsIkhleCIsIlN0YXRlcyIsInN0YXRlXzEiLCJTdGF0ZUNhbGxiYWNrUmVnaXN0ZXIiLCJleGl0Q2FsbGJhY2tzIiwiZW50ZXJDYWxsYmFja3MiLCJjdXJyZW50U3RhdGUiLCJuZXdTdGF0ZSIsImV4aXRDYWxsYmFjayIsIm9sZFN0YXRlIiwiZW50ZXJDYWxsYmFjayIsIlJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlIiwiaW5pdGlhbFN0YXRlIiwiY3VycmVudERhdGEiLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uIiwidmVoaWNsZUhhc0FuZ2xlZEltYWdlIiwidmVoaWNsZUhhc1NpZGVJbWFnZSIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiY3VycmVudFRpcmVPcHRpb24iLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWwiLCJjYWxsYmFja3MiLCJjaGFuZ2VDYWxsYmFja3MiLCJkYXRhQ2hhbmdlZENhbGxiYWNrcyIsImJlZm9yZUNhbGxiYWNrcyIsImFmdGVyQ2FsbGJhY2tzIiwiZGF0YUNoYW5nZWRDYWxsYmFjayIsImJlZm9yZSIsImRhdGFFeHRlbnNpb24iLCJjdXJyZW50VmFsdWUiLCJuZXdWYWx1ZSIsInNldERhdGEiLCJjYWxsYmFja3NGb3JTdGF0ZSIsInByZXZpb3VzU3RhdGUiLCJzdGF0ZUNoYW5nZWRFdmVudCIsInRyaWdnZXJFeGl0Q2FsbGJhY2tzIiwidHJpZ2dlckVudGVyQ2FsbGJhY2tzIiwiZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXIiLCJjdXJyZW5jeSIsIm51bWJlciIsInN5bWJvbCIsInRvRml4ZWQiLCJ0b0xvY2FsZVN0cmluZyIsIkxhbmd1YWdlS2V5cyIsIkxhbmd1YWdlUmVnaXN0ZXIiLCJsYW5ndWFnZSIsImZvcm1hdCIsImRlZmF1bHRMYW5ndWFnZSIsImxhbmd1YWdlUmVnaXN0ZXJzIiwicmVnaXN0ZXJMYW5ndWFnZSIsImxhbmd1YWdlS2V5Iiwic2V0QXNEZWZhdWx0IiwibGFuZ3VhZ2VSZWdpc3RlciIsInNldERlZmF1bHRMYW5ndWFnZSIsImxhbmd1YWdlSXNSZWdpc3RlcmVkIiwiZ2V0TGFuZ3VhZ2UiLCJzdHJpbmciLCJzdHlsZXMiLCJ3aWR0aEJyZWFrcG9pbnRzIiwiU3R5bGVNYW5hZ2VyIiwiZWxlbWVudCIsImluaXRpYWxpemVkIiwiaW5pdGlhbGl6ZUJyZWFrcG9pbnRzIiwid2F0Y2hTaXplIiwiaW5pdGlhbGl6ZUNTUyIsInJlc29sdmVPbkRPTUxvYWQiLCJpbml0aWFsaXplU3R5bGVDbGFzc2VzIiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwiU3R5bGVIZWxwZXIiLCJpc09mZnNldFBvc2l0aW9uZWQiLCJzdHlsZSIsInBvc2l0aW9uIiwiY29udGFpbmVyRG9jdW1lbnQiLCJvd25lckRvY3VtZW50IiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwic3R5bGVzaGVldCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJjc3MiLCJIVE1MSGVscGVyIiwiZmlyc3RDaGlsZFdpdGhUYWciLCJpc1RvdWNoRGV2aWNlIiwiY2xhc3NMaXN0IiwiYWRkIiwic29ydCIsImEiLCJiIiwiYXBwbHlCcmVha3BvaW50Q2xhc3NlcyIsImdldERvY3VtZW50IiwiZ2V0V2luZG93Iiwib25SZXNpemUiLCJvblJlc2l6ZWQiLCJuZXdCcmVha3BvaW50Iiwib25CcmVha3BvaW50Q2hhbmdlZCIsInRpbWVyIiwicmVzaXplZEV2ZW50RGVsYXkiLCJlbGVtZW50U2l6ZSIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJuZXdFbGVtZW50U2l6ZSIsInJlc2l6ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZXNpemVkIiwiY3VycmVudEJyZWFrcG9pbnQiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImkiLCJsZW5ndGgiLCJvcmlnaW5hbENsYXNzTmFtZSIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJ0cmltIiwiYnJlYWtwb2ludENoYW5nZWQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSIsImNvbnRhaW5lciIsImFjdGl2ZUxvYWRpbmdTZXNzaW9uS2V5cyIsImRlYnVnIiwibmFtZSIsImhhbmRsZXJzIiwibG9nIiwiZ2V0RWxlbWVudEJ5SWQiLCJvdGhlckNvbXBvbmVudHMiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCYWNrZ3JvdW5kIiwic3RhdGVDb21wb25lbnRNYXBwaW5nIiwiQ2hvb3NlVmVoaWNsZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVTZWxlY3Rpb24iLCJWaXN1YWxpemUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlVmlzdWFsaXphdGlvbiIsIm1haW5Db21wb25lbnRzIiwicmlkZXN0eWxlclNob3djYXNlIiwiaW5pdGlhbGl6ZVBhcmFtZXRlcnMiLCJpbml0aWFsaXplU3RhdGUiLCJyZWdpc3RlckNvbXBvbmVudHMiLCJpbml0aWFsaXplU3R5bGUiLCJpbml0aWFsaXplRmlsdGVycyIsImluaXRpYWxpemVDb21wb25lbnRzIiwib24iLCJ2ZWhpY2xlU2VsZWN0aW9uU3RhdGUiLCJzZWxlY3Rpb24iLCJWZWhpY2xlRGVzY3JpcHRpb24iLCJjaGFuZ2VTdGF0ZSIsInNldHRpbmdzUmV0cmlldmVkIiwic2V0dGluZ3NGcm9tQVBJIiwiYWxsIiwidHJpZ2dlciIsIm9uU3RhdGVDaGFuZ2VkIiwiZmluaXNoZWQiLCJmaW5pc2hlZFN0cmluZyIsInN0YXRlQ2hhbmdlIiwib25DaGFuZ2UiLCJjb250YWlucyIsInNlbGVjdGVkVmVoaWNsZSIsImNvbXBvbmVudCIsInNldFZpc2libGUiLCJ1cGRhdGVDdXJyZW50Q29tcG9uZW50IiwibmV3Q29tcG9uZW50Iiwib2xkQ29tcG9uZW50Iiwic3RhdGVDbGFzc1ByZWZpeCIsInRvTG93ZXJDYXNlIiwiaXNWaXNpYmxlIiwiaGlkZSIsInNob3ciLCJjcmVhdGUiLCJDb21wb25lbnRCYXNlIiwic2hvd2Nhc2VJbnN0YW5jZSIsInNob3djYXNlIiwiaW5pdGlhbGl6ZUNvbXBvbmVudCIsIk1haW5Db21wb25lbnRCYXNlIiwidHJhbnNpdGlvbnNTdXBwb3J0ZWQiLCJ0cmFuc2l0aW9uRW5kRXZlbnQiLCJ0YXJnZXQiLCJvblRyYW5zaXRpb25FbmQiLCJidWlsZENvbXBvbmVudCIsImluaXRpYWxpemVNYWluQ29tcG9uZW50IiwiX3Zpc2libGUiLCJzZXRWaXNpYmxlU3R5bGluZyIsInNraXBUcmFuc2l0aW9uIiwidmlzaWJpbGl0eSIsInRvcCIsIl9hbmltYXRpbmciLCJvbk5leHRUcmFuc2l0aW9uRW5kIiwiY2FsbCIsImNhbGxXaGVuRG9uZUFuaW1hdGluZyIsIm9uU2hvdyIsInRyaWdnZXJSZWZsb3ciLCJvbkRpc3BsYXkiLCJvblNob3duIiwib25IaWRlIiwib25IaWRkZW4iLCJkZWZhdWx0U2l6ZSIsIm1pbmltdW1TaXplIiwibWF4aW11bVNpemUiLCJkZWZhdWx0UG9zaXRpb24iLCJQb3NpdGlvblkiLCJQb3NpdGlvblgiLCJSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSIsIm9wdGlvbnMiLCJyZXNpemVDYWxsYmFjayIsInVwZGF0ZSIsImltYWdlIiwidHJhbnNpdGlvbkNsYXNzIiwidXNlVHJhbnNpdGlvbnMiLCJ0cmFuc2l0aW9uSW5DbGFzcyIsInBhZGRpbmciLCJjYWxjdWxhdGVQYWRkaW5nIiwiaW1hZ2VMb2FkQ2FsbGJhY2siLCJvbkxvYWQiLCJpbWFnZUVycm9yQ2FsbGJhY2siLCJvbkVycm9yIiwib25JbWFnZUVycm9yIiwib25JbWFnZUxvYWQiLCJldmVudCIsImJhc2VJbnN0cnVjdGlvbnMiLCJpbnN0cnVjdGlvbnMiLCJsb2FkSW5pdGlhbGx5IiwibGlzdGVuVG9XaW5kb3dSZXNpemUiLCJ0aW1lb3V0Iiwid2FpdE1zIiwicmVnaXN0ZXJlZEV2ZW50IiwiZXZlbnRUeXBlIiwibGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXJyb3JFdmVudCIsIlZpc2liaWxpdHlIZWxwZXIiLCJpbWFnZURpc3BsYXlDYWxsYmFjayIsImRldGVjdGVkU2l6ZSIsInBpeGVsUmF0aW8iLCJkZXZpY2VQaXhlbFJhdGlvIiwiQm94SGVscGVyIiwiZmxvb3IiLCJib3VuZCIsImJveCIsImN1cnJlbnRTaXplIiwidGhpc1dpZHRoIiwidGhpc0hlaWdodCIsImJveFdpZHRoIiwiYm94SGVpZ2h0IiwibmVlZHNVcGRhdGUiLCJyZW5kZXJTaXplIiwiY2FsY3VsYXRlUmVuZGVyU2l6ZSIsInNpemVJc0RpZmZlcmVudCIsInNyYyIsIldpZHRoIiwiSGVpZ2h0IiwiYmFja2dyb3VuZEVsZW1lbnQiLCJiYWNrZ3JvdW5kVGV4dHVyZSIsImFwcGVuZFRvIiwib3B0aW9uQ2xhc3MiLCJhY3RpdmVDbGFzcyIsIm9wdGlvbnNDb3VudCIsIlJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlciIsInRleHQiLCJ0aXRsZSIsIm9wdGlvbkNvbnRhaW5lciIsIm9wYWNpdHkiLCJ0cmFuc2Zvcm0iLCJvbk9wdGlvbkNsaWNrIiwiZW1wdHkiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJvcHRpb24iLCJvcHRpb25FbGVtZW50IiwiYWN0aXZlIiwiY3VycmVudFRhcmdldCIsImNoaWxkcmVuV2l0aENsYXNzZXMiLCJjaGlsZCIsIm9wdGlvblNlbGVjdGVkQ2FsbGJhY2siLCJwYXJlbnRFbGVtZW50IiwiUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplIiwiZml0bWVudHMiLCJhY3RpdmVGaXRtZW50Iiwic2VlbkRpYW1ldGVycyIsImRpYW1ldGVyRml0bWVudHMiLCJmaXRtZW50IiwiRGlhbWV0ZXJNaW4iLCJkaXNwbGF5Iiwic2V0T3B0aW9ucyIsImRpYW1ldGVyRml0bWVudCIsIm1vZGFsQ2xhc3MiLCJiYWNrZHJvcENsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlTW9kYWwiLCJjcmVhdGVCYWNrZHJvcElmTmVlZGVkIiwiYnVpbGRNb2RhbCIsInNldFZpc2liaWxpdHkiLCJwYXJlbnQiLCJtb2RhbCIsImZ1bGwiLCJhY3Rpb25zIiwiYnVpbGRBY3Rpb25zIiwiYWN0aW9uQ29udGFpbmVyIiwiYWN0aW9uQnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwicmVtb3ZlT25IaWRkZW4iLCJyZW1vdmVDaGlsZCIsImhhc0NoaWxkV2l0aENsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlTW9kYWxCYWNrZHJvcCIsImJ1aWxkQmFja2Ryb3AiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwidG9wVmlzaWJsZU1vZGFsIiwibGFzdFNpYmxpbmdXaXRoQ2xhc3MiLCJoYXNWaXNpYmxlTW9kYWwiLCJoYXNTaWJsaW5nV2l0aENsYXNzIiwib3B0aW9uTWVudUNsYXNzIiwib3B0aW9uTWVudU9wdGlvbkNsYXNzIiwib3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzIiwib3B0aW9uTWVudUxvYWRpbmdDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUiLCJvbkNsaWNrZWQiLCJjbGlja0V2ZW50Iiwic2V0TG9hZGluZyIsImxvYWRpbmciLCJ0b2dnbGUiLCJnZW5lcmF0ZU9wdGlvbkVsZW1lbnQiLCJjbGVhck9wdGlvbnMiLCJhcHBlbmRPcHRpb25zIiwiaW5kZXgiLCJjaGlsZHJlbiIsInByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbiIsImZpcnN0Q2hpbGRXaXRoQ2xhc3MiLCJuZXdTZWxlY3RlZE9wdGlvbiIsInByZXZCdXR0b25DbGFzcyIsIm5leHRCdXR0b25DbGFzcyIsIm9wdGlvblNlbGVjdGVkQ2xhc3MiLCJvcHRpb25Mb2FkaW5nQ2xhc3MiLCJvcHRpb25Mb2FkZXJDbGFzcyIsIm5vUmVzdWx0c0NsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCIsImFyZ3VtZW50cyIsImhhc01vcmVSZXN1bHRzIiwiaXNMb2FkaW5nIiwiaXNGaXJzdExvYWQiLCJlbmFibGVTaG93Tm9SZXN1bHRzIiwicHJldkJ1dHRvbiIsImFwcGVuZCIsImNyZWF0ZUljb24iLCJuZXh0QnV0dG9uIiwib25Db21wb25lbnRDbGljayIsImxvYWRNb3JlIiwiU2Nyb2xsSGVscGVyIiwiYXR0YWNoV2hlZWxMaXN0ZW5lciIsImRlbHRhIiwiZGVsdGFYIiwiZGVsdGFZIiwic2Nyb2xsTGVmdCIsInNjcm9sbFdpZHRoIiwiTWF0aCIsIm1pbiIsInRvdWNoU2Nyb2xsSGFuZGxlciIsInNldFZhbHVlcyIsIm9uU2Nyb2xsIiwiSW1wZXR1cyIsInNvdXJjZSIsImJvdW5jZSIsIm11bHRpcGxpZXIiLCJ4IiwieSIsInNjcm9sbFRvcCIsImJvdW5kWSIsIl9sb2FkTW9yZSIsImFsd2F5cyIsImNsZWFyT3B0aW9uTG9hZGVyIiwidXBkYXRlQm91bmRzIiwic2V0Qm91bmRYIiwidXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMiLCJyZWFjaGVkRW5kVG9sZXJhbmNlIiwib25FbmRWaXNpYmxlIiwiYWRkT3B0aW9uTG9hZGVyIiwicHJldmlvdXNQYWdlIiwibmV4dFBhZ2UiLCJkaXNhYmxlZCIsInJlbW92ZUNoaWxkcmVuV2l0aENsYXNzZXMiLCJlbGVtZW50cyIsImhhc05vUmVzdWx0cyIsIkRvY3VtZW50RnJhZ21lbnQiLCJjaGlsZE5vZGVzIiwiTm9kZSIsInNob3dOb1Jlc3VsdHMiLCJub1Jlc3VsdHNFbGVtZW50IiwibmV3TGVmdCIsInN0YXJ0TGVmdCIsImR1cmF0aW9uIiwiYWJzIiwiVGlueUFuaW1hdGUiLCJhbmltYXRlIiwiY3VycmVudExlZnQiLCJzY3JvbGxUbyIsInNlbGVjdGVkT3B0aW9uIiwib2xkT3B0aW9uRWxlbWVudCIsInNlbGVjdE9wdGlvbiIsInJlc3VsdHNQZXJSZXF1ZXN0IiwiUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3RvciIsImdldERhdGEiLCJjcmVhdGVPcHRpb25zIiwiU2NoZW1lcyIsInNjaGVtZXMiLCJzY2hlbWUiLCJwYWludFNjaGVtZSIsImNvbG9yIiwic3dhdGNoIiwiYmFja2dyb3VuZENvbG9yIiwiYXR0cmlidXRlcyIsImNyZWF0ZUF0dHJpYnV0ZUxhYmVsIiwib25QYWludFNjaGVtZVNlbGVjdGVkIiwiZGVmYXVsdEF0dHJpYnV0ZVN0cmluZyIsInN0cmluZ0F0dHJpYnV0ZXMiLCJwb3BvdmVyQ2xhc3MiLCJwb3BvdmVySW5DbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIiLCJwcm9kdWN0TW9kYWxDbGFzcyIsInRpdGxlQ2xhc3MiLCJwYWdlQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwiLCJ0b2dnbGVCdXR0b24iLCJSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24iLCJvbkNoYW5nZWQiLCJwYWdlcyIsInBhZ2UiLCJzaG93UGFnZSIsImJyYW5kVGl0bGVFbGVtZW50IiwidGl0bGVFbGVtZW50Iiwic3VidGl0bGVFbGVtZW50Iiwic3VtbWFyeUNvbnRhaW5lciIsImltYWdlQ29udGFpbmVyIiwiY3JlYXRlSW1hZ2UiLCJzdW1tYXJ5RWxlbWVudCIsImFkZFBhZ2UiLCJhZGRPcHRpb24iLCJuZXdQYWdlIiwic2V0VmFsdWUiLCJkZXN0cm95IiwiUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yIiwicmVzdWx0c1BlckxvYWQiLCJjb3VudCIsImNvdW50UHJvbWlzZSIsInJlc29sdmVkIiwiY291bnRSZXN1bHRzIiwicHJvZHVjdENvdW50IiwiU3RhcnQiLCJnZXRSZXN1bHRzIiwicHJvZHVjdHMiLCJmaWx0ZXJVcGRhdGVzIiwic2V0RmlsdGVycyIsInByb2R1Y3QiLCJwcm9kdWN0RmlsdGVyIiwiaW1hZ2VTb3VyY2UiLCJwcm9kdWN0SW1hZ2VTb3VyY2UiLCJwcm9wZXJ0aWVzIiwicHJvZHVjdEltYWdlTGFiZWxzIiwicHJpbWFyeSIsInNlY29uZGFyeSIsInRlcnRpYXJ5IiwiYWRkT3B0aW9uRWxlbWVudHMiLCJvblByb2R1Y3RDbGljayIsInByb2R1Y3RTZWxlY3RlZENhbGxiYWNrIiwiUmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50IiwibGluayIsInFyQ29kZUVsZW1lbnQiLCJxckNvZGUiLCJRUkNvZGUiLCJkaXNwbGF5VVJMIiwiaHJlZiIsIm1ha2VDb2RlIiwic2hhcmUiLCJidXR0b25DbGFzcyIsIlNoYXJlQnV0dG9uIiwib25DbGljayIsImN1cnJlbnRVUkwiLCJ0YWdzIiwibWVzc2FnZSIsImRlZmF1bHRIZWlnaHQiLCJkZWZhdWx0V2lkdGgiLCJzY3JlZW5IZWlnaHQiLCJzY3JlZW4iLCJzY3JlZW5XaWR0aCIsInJvdW5kIiwibGVmdCIsIndpbmRvd1NldHRpbmdzIiwiYWRkU2V0dGluZyIsImFkZEJvb2xlYW5TZXR0aW5nIiwiZW5hYmxlZCIsImVuYWJsZWRCeURlZmF1bHQiLCJlbmFibGVTY3JvbGxiYXJzIiwiZW5hYmxlUmVzaXplYWJsZSIsImVuYWJsZVRvb2xiYXIiLCJlbmFibGVMb2NhdGlvbiIsIm9wZW4iLCJhcHBVUkwiLCJ0d2l0dGVySW50ZW50VVJMIiwiVHdpdHRlclNoYXJlQnV0dG9uIiwidHdpdHRlckludGVudFBhcmFtZXRlcnMiLCJ0YWciLCJvcGVuTmV3V2luZG93IiwiRmFjZWJvb2tTaGFyZUJ1dHRvbiIsImZhY2Vib29rRGlhbG9nUGFyYW1ldGVycyIsImdldFNoYXJlUmVkaXJlY3RVUkwiLCJOZXdXaW5kb3dTaGFyZUJ1dHRvbiIsIlFSU2hhcmVCdXR0b24iLCJwb3BvdmVyIiwic2hhcmVNb2RhbENsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbCIsInZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMiLCJpbWFnZVR5cGUiLCJyZXNpemVkQ2FsbGJhY2siLCJ1cGRhdGVWaWV3cG9ydCIsIm9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCIsImJhY2tncm91bmQiLCJjcmVhdGVTaGFyZUJ1dHRvbnMiLCJjYW5Td2l0Y2hBbmdsZSIsInJvdGF0ZUVsZW1lbnQiLCJzd2l0Y2hBbmdsZSIsInNoYXJlQnV0dG9ucyIsInNoYXJlQnV0dG9uQ29udGFpbmVyIiwic2hhcmVCdXR0b24iLCJzZXR1cFZpZXdwb3J0Iiwib2ZmIiwidmVoaWNsZVZpZXdwb3J0Iiwic2hhcmVQYXRoIiwic2hhcmVQYXJhbXMiLCJ1dGlscyIsInRvUGFyYW1TdHJpbmciLCJhdXRoZW50aWNhdGVEYXRhIiwidmlld3BvcnRFbGVtZW50IiwiUmlkZVN0eWxlclZpZXdwb3J0Iiwidmlld3BvcnRVcGRhdGVkIiwic2hhcmVVUkwiLCJnZXRTaGFyZVVSTCIsInNldEVuYWJsZWQiLCJVUkwiLCJ1cGRhdGVVUkwiLCJTaG9ydFVSTCIsInNoYXJlVGFncyIsInNoYXJlTWVzc2FnZSIsInNldFVSTCIsInNldFRhZ3MiLCJzZXRNZXNzYWdlIiwiVHlwZSIsImVsZW1lbnRDbGFzc05hbWUiLCJkZWZhdWx0U3VzcGVuc2lvblJhbmdlIiwiUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yIiwic3VzcGVuc2lvbk9wdGlvbnMiLCJtYXgiLCJzdGVwIiwiZGVjaW1hbFBsYWNlcyIsInVuaXRBYmJyZXZpYXRpb24iLCJTdHlsZVR5cGUiLCJEcml2ZVR5cGUiLCJzdXNwZW5zaW9uUmFuZ2VLZXkiLCJzdXNwZW5zaW9uUmFuZ2UiLCJmcm9udEFuZFJlYXIiLCJOb1VJU3VzcGVuc2lvbkVsZW1lbnQiLCJzdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrIiwic3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrIiwiU3VzcGVuc2lvblVJRWxlbWVudCIsInNsaWRlckVsZW1lbnQiLCJub1VpU2xpZGVyIiwicmFuZ2UiLCJwaXBzIiwibW9kZSIsInBvc3RmaXgiLCJ0byIsImZyb20iLCJwYXJzZUZsb2F0IiwiUmVnRXhwIiwiU3RyaW5nSGVscGVyIiwiZXNjYXBlUmVnRXhwIiwic2xpZGVyIiwiZm9ybWF0dGVkVmFsdWVzIiwiaGFuZGxlIiwidmFsdWVzIiwib25TdXNwZW5zaW9uQ2hhbmdlZCIsImJhckNsYXNzIiwidGFiQ2xhc3MiLCJ0YWJCYWNrZ3JvdW5kQ2xhc3MiLCJhY3RpdmVUYWJDbGFzcyIsIm1vZGVDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciIsInNldE1vZGUiLCJmb3JjZSIsInVwZGF0ZVRhYkRpc3BsYXkiLCJ0YWJzIiwidGFiUGVyY2VudCIsInRhYiIsInVwZGF0ZUJhY2tncm91bmRQb2x5Z29uIiwidGFic09yVGFiQ3JlYXRlT3B0aW9ucyIsIlRhYiIsIkFycmF5IiwiY29weSIsImN1cnJlbnRUYWIiLCJzZXRBY3RpdmVUYWIiLCJuZXdUYWIiLCJvbGRUYWIiLCJ0YWJTd2l0Y2hlZENhbGxiYWNrIiwiY2xpY2tUYXJnZXQiLCJjdXJyZW50RWxlbWVudCIsIm9uVGFiQ2xpY2siLCJ0YWJGb3JFbGVtZW50IiwiaWNvbkNsYXNzIiwiaWNvbiIsImJhY2tncm91bmRNb2RlIiwid3JhcCIsInN2Z1N1cHBvcnRlZCIsImNyZWF0ZVNWR0VsZW1lbnQiLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwidmlld0JveCIsImJhY2tncm91bmRQb2x5Z29uIiwiZmlsbCIsInRyaWFuZ2xlSGVpZ2h0IiwidHJpYW5nbGVXaWR0aCIsInNldEF0dHJpYnV0ZSIsInRhYmxlQ2xhc3MiLCJoZWFkQ2xhc3MiLCJib2R5Q2xhc3MiLCJib2R5TG9hZGluZ0NsYXNzIiwiY29udGFpbmVyQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZSIsImNvbHVtbnMiLCJ0YWJsZSIsInRoZWFkIiwidGJvZHkiLCJnZW5lcmF0ZUhlYWRlcnMiLCJyb3dzIiwiYXBwZW5kUm93cyIsInN0YXJ0TG9hZGluZyIsImNvbHVtbiIsImhlYWRlciIsImdlbmVyYXRlZEhlYWRlciIsInRoIiwiaGVhZGVyUm93IiwiZ2VuZXJhdGVIZWFkZXJDZWxsIiwicm93IiwiY2VsbCIsImdlbmVyYXRlZENlbGwiLCJ0ZCIsInRyIiwiZ2VuZXJhdGVSb3dDZWxsIiwicm93c0ZyYWdtZW50IiwiZ2VuZXJhdGVSb3ciLCJvYmplY3QiLCJlbXB0eUNlbGxTdHJpbmciLCJSaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IiLCJzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeSIsImFuZ2xlZCIsInNpZGUiLCJkZWZhdWx0RmlsdGVycyIsIk1vZGVscyIsInRpcmUiLCJUaXJlRml0bWVudFJlc291cmNlVHlwZSIsIlRpcmVNb2RlbCIsIkluY2x1ZGVTaGFkb3ciLCJUaXJlTW9kZWxOYW1lIiwidG9nZ2xlQnV0dG9uQ2xhc3MiLCJvcHRpb25BY3RpdmVDbGFzcyIsInNlbGVjdE9wdGlvbkVsZW1lbnQiLCJjaGlsZEluZGV4IiwiY2hpbGRPcHRpb25FbGVtZW50IiwiUmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbCIsIkZpbmFsU2VsZWN0aW9uTWFkZSIsIm9uVmVoaWNsZVNlbGVjdGVkIiwiVmVoaWNsZSIsIkltYWdlU2V0dGluZ3MiLCJnZW5lcmF0ZVZlaGljbGVQcmV2aWV3U2V0dGluZ3MiLCJJbmNsdWRlT0VUaXJlT3B0aW9uIiwib25BdXRoZW50aWNhdGVkIiwiY29udGVudENvbnRhaW5lciIsImJ1aWxkQ29weSIsImNob29zZVZlaGljbGVCdXR0b24iLCJsYXJnZSIsImlkIiwiY3JlYXRlRWxlbWVudFdpdGhJRCIsIlNob3ciLCJlbWJvbGRlbkZpcnN0V29yZCIsImZpcnN0V29yZCIsImdldEZpcnN0V29yZCIsInJlbWFpbmluZ1N0cmluZyIsImNyZWF0ZUVsZW1lbnRXaXRoVGV4dCIsImNyZWF0ZVRleHRFbGVtZW50IiwidmlzdWFsaXplU3RyaW5nIiwic2hhcmVTdHJpbmciLCJzaG93V2hlZWxzIiwibW9kZWxzIiwid2hlZWxDb250YWluZXIiLCJtb2RlbEltYWdlcyIsIm9uTW9kZWxJbWFnZUxvYWQiLCJtb2RlbEltYWdlIiwiY29tcGxldGUiLCJtb2RlbCIsIm1vZGVsSW1hZ2VTb3VyY2UiLCJ3aGVlbCIsIldoZWVsRml0bWVudFJlc291cmNlVHlwZSIsInNjYWxlIiwid2lkdGhUb0hlaWdodCIsIm1heFJlcXVlc3RSZXNvbHV0aW9uIiwiY3VzdG9taXphdGlvbnNDbGFzcyIsImxvYWRpbmdDbGFzcyIsInByb2R1Y3RTZWxlY3RvciIsImN1c3RvbWl6YXRpb25Db21wb25lbnRPcmRlciIsImN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncyIsInBhaW50Iiwic2hvd0ZpbHRlckJ1dHRvbiIsIndoZWVscyIsInRpcmVzIiwic3VzcGVuc2lvbiIsInJlc3VsdHNBcnIiLCJ1cGRhdGVUYWJMYXlvdXQiLCJpbmRleE9mIiwibG9hZFVybERhdGEiLCJnZXQiLCJ2ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlIiwiUmVzZXQiLCJjb3VudFRpcmVCcmFuZHMiLCJjb3VudFdoZWVsQnJhbmRzIiwidGlyZUJyYW5kQ291bnQiLCJyZXN1bHRzIiwid2hlZWxCcmFuZENvdW50IiwidXBkYXRlVGFicyIsInNldHVwVGFicyIsImNoYW5nZVdoZWVsU2l6ZSIsIm5ld09wdGlvbiIsImNvbXBvbmVudHMiLCJ2ZWhpY2xlRGV0YWlscyIsIlZlaGljbGVEZXRhaWxzIiwiV2hlZWxEZXRhaWxzIiwiVGlyZURldGFpbHMiLCJ0YWJCYXIiLCJjdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyIiwiZmlsdGVyQnV0dG9uIiwic2tpbm55Iiwic2hvd0ZpbHRlcnMiLCJjdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zIiwiYWZ0ZXJEYXRhQ2hhbmdlIiwicGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrIiwic2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCIsImN1c3RvbWl6YXRpb25Db21wb25lbnRzIiwicG9wRXZlbnRMaXN0ZW5lciIsInVybE9iamVjdCIsIkRlc2NyaXB0aW9ucyIsInZlaGljbGVTZWxlY3RBcmdzIiwiciIsIkNvbmZpZ3VyYXRpb25JRCIsIkZ1bGxEZXNjcmlwdGlvbiIsIkRldGFpbHMiLCJGcm9udCIsIkRlc2NyaXB0aW9uIiwidGFyZ2V0RGlhbWV0ZXIiLCJJbnNpZGVEaWFtZXRlciIsIlZlaGljbGVQYWludFNjaGVtZSIsIldoZWVsRml0bWVudHMiLCJnZXRCZXN0Rml0bWVudCIsIkZpdG1lbnRzIiwicHJvbWlzZUJ1aWxkZXIiLCJwcm9tQXJyIiwiSW1hZ2VVcmwiLCJOdW1iZXIiLCJjdXJyZW50V2hlZWxEaWFtZXRlciIsIndoZWVsU2l6ZUFjdGl2ZSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJ3aGVlbFNpemVMaXN0IiwiaW5uZXJIVE1MIiwic2V0VGFicyIsImdldEN1cnJlbnRCcmVha3BvaW50IiwiaG9yaXpvbnRhbCIsInZlaGljbGVDaGFuZ2VkIiwiR1VJREhlbHBlciIsImFyZUVxdWFsIiwidGlyZU9wdGlvbkNoYW5nZWQiLCJ2ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiY2xlYXJBY3RpdmVUYWIiLCJvblZlaGljbGVDaGFuZ2VkIiwiZ2V0VmVoaWNsZURlc2NyaXB0aW9uIiwiZ2V0VmVoaWNsZVRpcmVPcHRpb24iLCJ2ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCIsInJlc3BvbnNlcyIsInZlaGljbGVUaXJlT3B0aW9uIiwic2VsZWN0ZWRUaXJlT3B0aW9uSUQiLCJ0aXJlT3B0aW9uIiwiaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yIiwic2V0T3B0aW9uSXNMb2FkaW5nIiwiY2FuUmVuZGVyT25DdXJyZW50QW5nbGUiLCJIYXNBbmdsZUltYWdlIiwiSW5jbHVkZVByaWNpbmciLCJiZXN0Rml0bWVudCIsImFEaWZmIiwiYkRpZmYiLCJzZXRGaXRtZW50T3B0aW9ucyIsInJlbmRlclVwZGF0ZSIsImdldFZhbHVlcyIsImN1c3RvbWl6YXRpb25Db21wb25lbnQiLCJjb21wb25lbnRLZXkiLCJnZXRDb21wb25lbnRLZXkiLCJhY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50Iiwic2V0VGV4dCIsImZpbHRlck1vZGFsIiwiUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwiLCJmaWx0ZXJQcm92aWRlciIsInNob3dDb3VudFRleHRGb3JtYXQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsIiwid2hlZWxNb2RlbCIsIldoZWVsTW9kZWxOYW1lIiwiV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uIiwic3VtbWFyeVRhYmxlIiwiYnVpbGRTcGVjc1BhZ2UiLCJJbmNsdWRlUHJvbW90aW9ucyIsImJ1aWxkU3VtbWFyeVRhYmxlIiwic3BlY3NUYWJsZSIsImFsbFNpemVQcmljZUNvbWJpbmF0aW9ucyIsImZpdG1lbnRQcmljZSIsImdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QiLCJmaXRtZW50UHJpY2VBbW91bnQiLCJXaGVlbFByaWNpbmdBbW91bnQiLCJXaWR0aE1pbiIsInByaWNlIiwiV2lkdGhNYXgiLCJEaWFtZXRlck1heCIsInNpemVQcmljZVJhbmdlcyIsInNpemVQcmljZUNvbWJvIiwic2l6ZSIsInByaWNlUmFuZ2UiLCJJbmZpbml0eSIsIk51bWJlckhlbHBlciIsImV4dGVuZFJhbmdlIiwic3VtbWFyeVRhYmxlUm93cyIsInByaWNlSXNVbnNwZWNpZmllZCIsImlzTmFOIiwicHJpY2VTdHJpbmciLCJnZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uIiwiZm9ybWF0Q2VsbCIsImdldEZpdG1lbnRQcmljZSIsImdldEZpdG1lbnRJdGVtTnVtYmVyIiwic3BlY3NDb250YWluZXIiLCJQcmljaW5nIiwibm9QcmljZVN0cmluZyIsInJldGFpbFByaWNlRGF0YU9iamVjdCIsIml0ZW1OdW1iZXIiLCJXaGVlbFByaWNpbmdJdGVtTnVtYmVyIiwiUGFydE51bWJlciIsIkluY2x1ZGVNZXRhS2V5cyIsInRpcmVOYW1lRWxlbWVudCIsInRpcmVEZXNjcmlwdGlvbkVsZW1lbnQiLCJvbkRhdGFDaGFuZ2UiLCJmaXJzdFBhaW50Q29sb3IiLCJ2ZWhpY2xlUGFpbnRTd2F0Y2hFbGVtZW50IiwidmVoaWNsZURlc2NyaXB0aW9uRWxlbWVudCIsInRpcmVTaXplRWxlbWVudCIsInNob3J0VmVoaWNsZURlc2NyaXB0aW9uIiwic3Vic3RyaW5nIiwid2hlZWxOYW1lRWxlbWVudCIsIndoZWVsRGVzY3JpcHRpb25FbGVtZW50Iiwic2hvd1doZWVsTW9kYWwiLCJmaWx0ZXJNb2RhbENsYXNzIiwiZmlsdGVyTW9kYWxNZW51VGl0bGVDbGFzcyIsImNvdW50Rm9ybWF0VG9rZW4iLCJidWlsZFNob3dCdXR0b24iLCJidWlsZEZpbHRlck1lbnVzIiwidXBkYXRlQ291bnQiLCJzaG93QnV0dG9uIiwibWVudXNDb250YWluZXIiLCJtZW51TG9hZGVkUHJvbWlzZXMiLCJtZW51cyIsIm1lbnUiLCJtZW51Q29udGFpbmVyIiwibWVudUxvYWRlZFByb21pc2UiLCJ1bnNoaWZ0IiwicHJldmlld0ZpbHRlcnMiLCJzZXRDb3VudFRleHQiLCJnZXRDb3VudCIsImFycmF5IiwiaXRlbU1hdGNoIiwibmV3QXJyYXkiLCJuZXdBcnJheUluZGV4IiwiYXJyYXlJbmRleCIsIm1hcEZ1bmN0aW9uIiwidGhpc0FyZyIsInByb3RvdHlwZSIsInJlc3VsdCIsInJlZHVjZXIiLCJpbml0aWFsVmFsdWUiLCJhY2N1bXVsYXRvciIsImJvdW5kc01pbiIsImJvdW5kc01heCIsInNjYWxlVG9NYXgiLCJzY2FsZVRvTWluIiwic2NhbGFyIiwiYnl0ZVRvSGV4IiwiaGV4VG9CeXRlIiwiYnVmZmVyIiwib2Zmc2V0IiwiaiIsIm9jdCIsInVucGFyc2UiLCJidGgiLCJpZEEiLCJpZEIiLCJndWlkQSIsImd1aWRCIiwiYnl0ZUEiLCJieXRlQiIsImVsZW1lbnRzTWF0Y2hpbmciLCJtYXRjaCIsIm1hdGNoaW5nRWxlbWVudHMiLCJtYXRjaGluZ0VsZW1lbnRzSW5kZXgiLCJmaXJzdEVsZW1lbnRNYXRjaGluZyIsImxhc3RFbGVtZW50TWF0Y2hpbmciLCJjaGlsZHJlbk1hdGNoaW5nIiwiZmlyc3RDaGlsZE1hdGNoaW5nIiwiY2xhc3NlcyIsImZsYXR0ZW5DbGFzc0xpc3QiLCJoYXNDbGFzc2VzIiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwic2libGluZyIsImFwcGx5T3B0aW9ucyIsImh0bWxFbGVtZW50IiwiY2hpbGRFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwidGFnTmFtZU9yRGl2T3B0aW9ucyIsInRhZ05hbWVPckNsYXNzTmFtZSIsImJ1dHRvbkNsYXNzTmFtZSIsImljb25DbGFzc1ByZWZpeCIsImljb25Pck9wdGlvbnMiLCJzdGFydHNXaXRoIiwiY3JlYXRlRGVzY3JpcHRpb25MaXN0IiwiZGVzY3JpcHRpb25MaXN0IiwiYXBwZW5kRGVzY3JpcHRpb25MaXN0VmFsdWVzIiwiZGVzY3JpcHRpb24iLCJsYXN0Q2hpbGQiLCJvbmNlIiwidXNlQ2FwdHVyZSIsIm9uY2VMaXN0ZW5lciIsImV2dCIsImhhbmRsZUV2ZW50IiwiZGVmYXVsdFZpZXciLCJUeXBlRXJyb3IiLCJhc3NpZ25PYmplY3RzIiwiZ2V0S2V5cyIsInByb21pc2VzIiwibWVyZ2VkIiwiY3VycmVudFByb21pc2UiLCJQcm9taXNlIiwib25mdWxmaWxsZWQiLCJvbnJlamVjdGVkIiwicmV0dXJuUHJvbWlzZSIsIm9uZnVsZmlsbGVkUmVzdWx0IiwiaXNQcm9taXNlIiwib25yZWplY3RlZFJlc3VsdCIsInNjcm9sbEV2ZW50IiwibW91c2V3aGVlbEV2ZW50U2NhbGUiLCJ0ZXN0RWxlbWVudCIsIm9ubW91c2V3aGVlbCIsIm5vcm1hbGl6ZWRFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJzcmNFbGVtZW50IiwiZGVsdGFNb2RlIiwiZGVsdGFaIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIndoZWVsRGVsdGEiLCJ3aGVlbERlbHRhWCIsImRldGFpbCIsImVuZHNXaXRoIiwiZW5kaW5nIiwiZW5kaW5nTGVuZ3RoIiwicmVSZWdFeHBDaGFyIiwicmVIYXNSZWdFeHBDaGFyIiwiaGFzR2V0Q29tcHV0ZWRTdHlsZSIsImhhc0N1cnJlbnRTdHlsZVN1cHBvcnQiLCJ0cmFuc2l0aW9ucyIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwiY3JlYXRlU1ZHUmVjdCIsImdldENvbXB1dGVkU3R5bGUiLCJvZmZzZXRQb3NpdGlvbmluZ3MiLCJwb3NpdGlvbmluZyIsInN1YmNsYXNzTGlzdCIsImMiLCJjb25jYXQiLCJvbGRUcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsImNsYXNzQXJyYXkiLCJwYXJzZVBpeGVscyIsInBpeGVscyIsInBhcnNlSW50IiwicGFkZGluZ0JvdHRvbSIsInBhZGRpbmdUb3AiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsImRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyIsInBvaW50ZXJFdmVudHMiLCJFbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3Z3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25lQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0NEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0NU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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LFFBakNKO0FBa0M5Qix3QkFBa0MsVUFsQ0o7QUFtQzlCLHFCQUFrQyxPQW5DSjtBQW9DOUIsbUJBQWtDLEtBcENKO0FBcUM5QiwwQkFBa0MsWUFyQ0o7QUFzQzlCLDRCQUFrQyxjQXRDSjtBQXVDOUIseUJBQWtDLFdBdkNKO0FBd0M5Qiw4QkFBa0MsZ0JBeENKO0FBeUM5QixnQ0FBa0MsWUF6Q0o7QUEwQzlCLHVDQUFrQyxvQkExQ0o7QUEyQzlCLHdDQUFrQyxxQkEzQ0o7QUE0QzlCLDhCQUFrQyxnQkE1Q0o7QUE2QzlCLDRCQUFrQyxjQTdDSjtBQThDOUIsaUNBQWtDLG1CQTlDSjtBQStDOUIsd0JBQWtDLFVBL0NKO0FBZ0Q5Qiw0QkFBa0MsY0FoREo7QUFpRDlCLHNCQUFrQyxRQWpESjtBQWtEOUIsdUJBQWtDLFNBbERKO0FBbUQ5QixvQ0FBa0M7QUFuREosU0FBbEM7QUFxREgsS0F0RDRCLEVBQUExa0MsVUFBQXJJLG1CQUFBcUksT0FBQSxLQUFBckksbUJBQUFxSSxPQUFBLEdBQU8sRUFBUCxDQUFBO0FBc0Q1QixDQXRERCxFQUFVckksdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InJpZGVzdHlsZXIuc2hvd2Nhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgbm91aXNsaWRlciAtIDEwLjEuMCAtIDIwMTctMDctMjggMTc6MTE6MTggKi9cblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cbiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcblxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG5cbiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSB7XG5cbiAgICAgICAgLy8gTm9kZS9Db21tb25KU1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIHdpbmRvdy5ub1VpU2xpZGVyID0gZmFjdG9yeSgpO1xuICAgIH1cblxufShmdW5jdGlvbiggKXtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFZFUlNJT04gPSAnMTAuMS4wJztcblxuXG5cdGZ1bmN0aW9uIGlzVmFsaWRGb3JtYXR0ZXIgKCBlbnRyeSApIHtcblx0XHRyZXR1cm4gdHlwZW9mIGVudHJ5ID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZW50cnkudG8gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVudHJ5LmZyb20gPT09ICdmdW5jdGlvbic7XG5cdH1cblxuXHRmdW5jdGlvbiByZW1vdmVFbGVtZW50ICggZWwgKSB7XG5cdFx0ZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG5cdH1cblxuXHQvLyBCaW5kYWJsZSB2ZXJzaW9uXG5cdGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICggZSApIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblxuXHQvLyBSZW1vdmVzIGR1cGxpY2F0ZXMgZnJvbSBhbiBhcnJheS5cblx0ZnVuY3Rpb24gdW5pcXVlICggYXJyYXkgKSB7XG5cdFx0cmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbihhKXtcblx0XHRcdHJldHVybiAhdGhpc1thXSA/IHRoaXNbYV0gPSB0cnVlIDogZmFsc2U7XG5cdFx0fSwge30pO1xuXHR9XG5cblx0Ly8gUm91bmQgYSB2YWx1ZSB0byB0aGUgY2xvc2VzdCAndG8nLlxuXHRmdW5jdGlvbiBjbG9zZXN0ICggdmFsdWUsIHRvICkge1xuXHRcdHJldHVybiBNYXRoLnJvdW5kKHZhbHVlIC8gdG8pICogdG87XG5cdH1cblxuXHQvLyBDdXJyZW50IHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGhlIGRvY3VtZW50LlxuXHRmdW5jdGlvbiBvZmZzZXQgKCBlbGVtLCBvcmllbnRhdGlvbiApIHtcblxuXHRcdHZhciByZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR2YXIgZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuXHRcdHZhciBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0XHR2YXIgcGFnZU9mZnNldCA9IGdldFBhZ2VPZmZzZXQoZG9jKTtcblxuXHRcdC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBjb250YWlucyBsZWZ0IHNjcm9sbCBpbiBDaHJvbWUgb24gQW5kcm9pZC5cblx0XHQvLyBJIGhhdmVuJ3QgZm91bmQgYSBmZWF0dXJlIGRldGVjdGlvbiB0aGF0IHByb3ZlcyB0aGlzLiBXb3JzdCBjYXNlXG5cdFx0Ly8gc2NlbmFyaW8gb24gbWlzLW1hdGNoOiB0aGUgJ3RhcCcgZmVhdHVyZSBvbiBob3Jpem9udGFsIHNsaWRlcnMgYnJlYWtzLlxuXHRcdGlmICggL3dlYmtpdC4qQ2hyb21lLipNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICkge1xuXHRcdFx0cGFnZU9mZnNldC54ID0gMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3JpZW50YXRpb24gPyAocmVjdC50b3AgKyBwYWdlT2Zmc2V0LnkgLSBkb2NFbGVtLmNsaWVudFRvcCkgOiAocmVjdC5sZWZ0ICsgcGFnZU9mZnNldC54IC0gZG9jRWxlbS5jbGllbnRMZWZ0KTtcblx0fVxuXG5cdC8vIENoZWNrcyB3aGV0aGVyIGEgdmFsdWUgaXMgbnVtZXJpY2FsLlxuXHRmdW5jdGlvbiBpc051bWVyaWMgKCBhICkge1xuXHRcdHJldHVybiB0eXBlb2YgYSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKCBhICkgJiYgaXNGaW5pdGUoIGEgKTtcblx0fVxuXG5cdC8vIFNldHMgYSBjbGFzcyBhbmQgcmVtb3ZlcyBpdCBhZnRlciBbZHVyYXRpb25dIG1zLlxuXHRmdW5jdGlvbiBhZGRDbGFzc0ZvciAoIGVsZW1lbnQsIGNsYXNzTmFtZSwgZHVyYXRpb24gKSB7XG5cdFx0aWYgKGR1cmF0aW9uID4gMCkge1xuXHRcdGFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG5cdFx0XHR9LCBkdXJhdGlvbik7XG5cdFx0fVxuXHR9XG5cblx0Ly8gTGltaXRzIGEgdmFsdWUgdG8gMCAtIDEwMFxuXHRmdW5jdGlvbiBsaW1pdCAoIGEgKSB7XG5cdFx0cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKGEsIDEwMCksIDApO1xuXHR9XG5cblx0Ly8gV3JhcHMgYSB2YXJpYWJsZSBhcyBhbiBhcnJheSwgaWYgaXQgaXNuJ3Qgb25lIHlldC5cblx0Ly8gTm90ZSB0aGF0IGFuIGlucHV0IGFycmF5IGlzIHJldHVybmVkIGJ5IHJlZmVyZW5jZSFcblx0ZnVuY3Rpb24gYXNBcnJheSAoIGEgKSB7XG5cdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkgPyBhIDogW2FdO1xuXHR9XG5cblx0Ly8gQ291bnRzIGRlY2ltYWxzXG5cdGZ1bmN0aW9uIGNvdW50RGVjaW1hbHMgKCBudW1TdHIgKSB7XG5cdFx0bnVtU3RyID0gU3RyaW5nKG51bVN0cik7XG5cdFx0dmFyIHBpZWNlcyA9IG51bVN0ci5zcGxpdChcIi5cIik7XG5cdFx0cmV0dXJuIHBpZWNlcy5sZW5ndGggPiAxID8gcGllY2VzWzFdLmxlbmd0aCA6IDA7XG5cdH1cblxuXHQvLyBodHRwOi8veW91bWlnaHRub3RuZWVkanF1ZXJ5LmNvbS8jYWRkX2NsYXNzXG5cdGZ1bmN0aW9uIGFkZENsYXNzICggZWwsIGNsYXNzTmFtZSApIHtcblx0XHRpZiAoIGVsLmNsYXNzTGlzdCApIHtcblx0XHRcdGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWwuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcblx0XHR9XG5cdH1cblxuXHQvLyBodHRwOi8veW91bWlnaHRub3RuZWVkanF1ZXJ5LmNvbS8jcmVtb3ZlX2NsYXNzXG5cdGZ1bmN0aW9uIHJlbW92ZUNsYXNzICggZWwsIGNsYXNzTmFtZSApIHtcblx0XHRpZiAoIGVsLmNsYXNzTGlzdCApIHtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcblx0XHR9XG5cdH1cblxuXHQvLyBodHRwczovL3BsYWluanMuY29tL2phdmFzY3JpcHQvYXR0cmlidXRlcy9hZGRpbmctcmVtb3ZpbmctYW5kLXRlc3RpbmctZm9yLWNsYXNzZXMtOS9cblx0ZnVuY3Rpb24gaGFzQ2xhc3MgKCBlbCwgY2xhc3NOYW1lICkge1xuXHRcdHJldHVybiBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSA6IG5ldyBSZWdFeHAoJ1xcXFxiJyArIGNsYXNzTmFtZSArICdcXFxcYicpLnRlc3QoZWwuY2xhc3NOYW1lKTtcblx0fVxuXG5cdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvc2Nyb2xsWSNOb3Rlc1xuXHRmdW5jdGlvbiBnZXRQYWdlT2Zmc2V0ICggZG9jICkge1xuXG5cdFx0dmFyIHN1cHBvcnRQYWdlT2Zmc2V0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICE9PSB1bmRlZmluZWQ7XG5cdFx0dmFyIGlzQ1NTMUNvbXBhdCA9ICgoZG9jLmNvbXBhdE1vZGUgfHwgXCJcIikgPT09IFwiQ1NTMUNvbXBhdFwiKTtcblx0XHR2YXIgeCA9IHN1cHBvcnRQYWdlT2Zmc2V0ID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogaXNDU1MxQ29tcGF0ID8gZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jLmJvZHkuc2Nyb2xsTGVmdDtcblx0XHR2YXIgeSA9IHN1cHBvcnRQYWdlT2Zmc2V0ID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogaXNDU1MxQ29tcGF0ID8gZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiBkb2MuYm9keS5zY3JvbGxUb3A7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0eDogeCxcblx0XHRcdHk6IHlcblx0XHR9O1xuXHR9XG5cblx0Ly8gd2UgcHJvdmlkZSBhIGZ1bmN0aW9uIHRvIGNvbXB1dGUgY29uc3RhbnRzIGluc3RlYWRcblx0Ly8gb2YgYWNjZXNzaW5nIHdpbmRvdy4qIGFzIHNvb24gYXMgdGhlIG1vZHVsZSBuZWVkcyBpdFxuXHQvLyBzbyB0aGF0IHdlIGRvIG5vdCBjb21wdXRlIGFueXRoaW5nIGlmIG5vdCBuZWVkZWRcblx0ZnVuY3Rpb24gZ2V0QWN0aW9ucyAoICkge1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSBldmVudHMgdG8gYmluZC4gSUUxMSBpbXBsZW1lbnRzIHBvaW50ZXJFdmVudHMgd2l0aG91dFxuXHRcdC8vIGEgcHJlZml4LCB3aGljaCBicmVha3MgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBJRTEwIGltcGxlbWVudGF0aW9uLlxuXHRcdHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkID8ge1xuXHRcdFx0c3RhcnQ6ICdwb2ludGVyZG93bicsXG5cdFx0XHRtb3ZlOiAncG9pbnRlcm1vdmUnLFxuXHRcdFx0ZW5kOiAncG9pbnRlcnVwJ1xuXHRcdH0gOiB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQgPyB7XG5cdFx0XHRzdGFydDogJ01TUG9pbnRlckRvd24nLFxuXHRcdFx0bW92ZTogJ01TUG9pbnRlck1vdmUnLFxuXHRcdFx0ZW5kOiAnTVNQb2ludGVyVXAnXG5cdFx0fSA6IHtcblx0XHRcdHN0YXJ0OiAnbW91c2Vkb3duIHRvdWNoc3RhcnQnLFxuXHRcdFx0bW92ZTogJ21vdXNlbW92ZSB0b3VjaG1vdmUnLFxuXHRcdFx0ZW5kOiAnbW91c2V1cCB0b3VjaGVuZCdcblx0XHR9O1xuXHR9XG5cblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvRXZlbnRMaXN0ZW5lck9wdGlvbnMvYmxvYi9naC1wYWdlcy9leHBsYWluZXIubWRcblx0Ly8gSXNzdWUgIzc4NVxuXHRmdW5jdGlvbiBnZXRTdXBwb3J0c1Bhc3NpdmUgKCApIHtcblxuXHRcdHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcblxuXHRcdHRyeSB7XG5cblx0XHRcdHZhciBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcblxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cblx0XHRyZXR1cm4gc3VwcG9ydHNQYXNzaXZlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0U3VwcG9ydHNUb3VjaEFjdGlvbk5vbmUgKCApIHtcblx0XHRyZXR1cm4gd2luZG93LkNTUyAmJiBDU1Muc3VwcG9ydHMgJiYgQ1NTLnN1cHBvcnRzKCd0b3VjaC1hY3Rpb24nLCAnbm9uZScpO1xuXHR9XG5cblxuLy8gVmFsdWUgY2FsY3VsYXRpb25cblxuXHQvLyBEZXRlcm1pbmUgdGhlIHNpemUgb2YgYSBzdWItcmFuZ2UgaW4gcmVsYXRpb24gdG8gYSBmdWxsIHJhbmdlLlxuXHRmdW5jdGlvbiBzdWJSYW5nZVJhdGlvICggcGEsIHBiICkge1xuXHRcdHJldHVybiAoMTAwIC8gKHBiIC0gcGEpKTtcblx0fVxuXG5cdC8vIChwZXJjZW50YWdlKSBIb3cgbWFueSBwZXJjZW50IGlzIHRoaXMgdmFsdWUgb2YgdGhpcyByYW5nZT9cblx0ZnVuY3Rpb24gZnJvbVBlcmNlbnRhZ2UgKCByYW5nZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuICh2YWx1ZSAqIDEwMCkgLyAoIHJhbmdlWzFdIC0gcmFuZ2VbMF0gKTtcblx0fVxuXG5cdC8vIChwZXJjZW50YWdlKSBXaGVyZSBpcyB0aGlzIHZhbHVlIG9uIHRoaXMgcmFuZ2U/XG5cdGZ1bmN0aW9uIHRvUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gZnJvbVBlcmNlbnRhZ2UoIHJhbmdlLCByYW5nZVswXSA8IDAgP1xuXHRcdFx0dmFsdWUgKyBNYXRoLmFicyhyYW5nZVswXSkgOlxuXHRcdFx0XHR2YWx1ZSAtIHJhbmdlWzBdICk7XG5cdH1cblxuXHQvLyAodmFsdWUpIEhvdyBtdWNoIGlzIHRoaXMgcGVyY2VudGFnZSBvbiB0aGlzIHJhbmdlP1xuXHRmdW5jdGlvbiBpc1BlcmNlbnRhZ2UgKCByYW5nZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuICgodmFsdWUgKiAoIHJhbmdlWzFdIC0gcmFuZ2VbMF0gKSkgLyAxMDApICsgcmFuZ2VbMF07XG5cdH1cblxuXG4vLyBSYW5nZSBjb252ZXJzaW9uXG5cblx0ZnVuY3Rpb24gZ2V0SiAoIHZhbHVlLCBhcnIgKSB7XG5cblx0XHR2YXIgaiA9IDE7XG5cblx0XHR3aGlsZSAoIHZhbHVlID49IGFycltqXSApe1xuXHRcdFx0aiArPSAxO1xuXHRcdH1cblxuXHRcdHJldHVybiBqO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIElucHV0IGEgdmFsdWUsIGZpbmQgd2hlcmUsIG9uIGEgc2NhbGUgb2YgMC0xMDAsIGl0IGFwcGxpZXMuXG5cdGZ1bmN0aW9uIHRvU3RlcHBpbmcgKCB4VmFsLCB4UGN0LCB2YWx1ZSApIHtcblxuXHRcdGlmICggdmFsdWUgPj0geFZhbC5zbGljZSgtMSlbMF0gKXtcblx0XHRcdHJldHVybiAxMDA7XG5cdFx0fVxuXG5cdFx0dmFyIGogPSBnZXRKKCB2YWx1ZSwgeFZhbCApLCB2YSwgdmIsIHBhLCBwYjtcblxuXHRcdHZhID0geFZhbFtqLTFdO1xuXHRcdHZiID0geFZhbFtqXTtcblx0XHRwYSA9IHhQY3Rbai0xXTtcblx0XHRwYiA9IHhQY3Rbal07XG5cblx0XHRyZXR1cm4gcGEgKyAodG9QZXJjZW50YWdlKFt2YSwgdmJdLCB2YWx1ZSkgLyBzdWJSYW5nZVJhdGlvIChwYSwgcGIpKTtcblx0fVxuXG5cdC8vICh2YWx1ZSkgSW5wdXQgYSBwZXJjZW50YWdlLCBmaW5kIHdoZXJlIGl0IGlzIG9uIHRoZSBzcGVjaWZpZWQgcmFuZ2UuXG5cdGZ1bmN0aW9uIGZyb21TdGVwcGluZyAoIHhWYWwsIHhQY3QsIHZhbHVlICkge1xuXG5cdFx0Ly8gVGhlcmUgaXMgbm8gcmFuZ2UgZ3JvdXAgdGhhdCBmaXRzIDEwMFxuXHRcdGlmICggdmFsdWUgPj0gMTAwICl7XG5cdFx0XHRyZXR1cm4geFZhbC5zbGljZSgtMSlbMF07XG5cdFx0fVxuXG5cdFx0dmFyIGogPSBnZXRKKCB2YWx1ZSwgeFBjdCApLCB2YSwgdmIsIHBhLCBwYjtcblxuXHRcdHZhID0geFZhbFtqLTFdO1xuXHRcdHZiID0geFZhbFtqXTtcblx0XHRwYSA9IHhQY3Rbai0xXTtcblx0XHRwYiA9IHhQY3Rbal07XG5cblx0XHRyZXR1cm4gaXNQZXJjZW50YWdlKFt2YSwgdmJdLCAodmFsdWUgLSBwYSkgKiBzdWJSYW5nZVJhdGlvIChwYSwgcGIpKTtcblx0fVxuXG5cdC8vIChwZXJjZW50YWdlKSBHZXQgdGhlIHN0ZXAgdGhhdCBhcHBsaWVzIGF0IGEgY2VydGFpbiB2YWx1ZS5cblx0ZnVuY3Rpb24gZ2V0U3RlcCAoIHhQY3QsIHhTdGVwcywgc25hcCwgdmFsdWUgKSB7XG5cblx0XHRpZiAoIHZhbHVlID09PSAxMDAgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0dmFyIGogPSBnZXRKKCB2YWx1ZSwgeFBjdCApLCBhLCBiO1xuXG5cdFx0Ly8gSWYgJ3NuYXAnIGlzIHNldCwgc3RlcHMgYXJlIHVzZWQgYXMgZml4ZWQgcG9pbnRzIG9uIHRoZSBzbGlkZXIuXG5cdFx0aWYgKCBzbmFwICkge1xuXG5cdFx0XHRhID0geFBjdFtqLTFdO1xuXHRcdFx0YiA9IHhQY3Rbal07XG5cblx0XHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgcG9zaXRpb24sIGEgb3IgYi5cblx0XHRcdGlmICgodmFsdWUgLSBhKSA+ICgoYi1hKS8yKSl7XG5cdFx0XHRcdHJldHVybiBiO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYTtcblx0XHR9XG5cblx0XHRpZiAoICF4U3RlcHNbai0xXSApe1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdHJldHVybiB4UGN0W2otMV0gKyBjbG9zZXN0KFxuXHRcdFx0dmFsdWUgLSB4UGN0W2otMV0sXG5cdFx0XHR4U3RlcHNbai0xXVxuXHRcdCk7XG5cdH1cblxuXG4vLyBFbnRyeSBwYXJzaW5nXG5cblx0ZnVuY3Rpb24gaGFuZGxlRW50cnlQb2ludCAoIGluZGV4LCB2YWx1ZSwgdGhhdCApIHtcblxuXHRcdHZhciBwZXJjZW50YWdlO1xuXG5cdFx0Ly8gV3JhcCBudW1lcmljYWwgaW5wdXQgaW4gYW4gYXJyYXkuXG5cdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHR2YWx1ZSA9IFt2YWx1ZV07XG5cdFx0fVxuXG5cdFx0Ly8gUmVqZWN0IGFueSBpbnZhbGlkIGlucHV0LCBieSB0ZXN0aW5nIHdoZXRoZXIgdmFsdWUgaXMgYW4gYXJyYXkuXG5cdFx0aWYgKCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoIHZhbHVlICkgIT09ICdbb2JqZWN0IEFycmF5XScgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyBjb250YWlucyBpbnZhbGlkIHZhbHVlLlwiKTtcblx0XHR9XG5cblx0XHQvLyBDb3ZlcnQgbWluL21heCBzeW50YXggdG8gMCBhbmQgMTAwLlxuXHRcdGlmICggaW5kZXggPT09ICdtaW4nICkge1xuXHRcdFx0cGVyY2VudGFnZSA9IDA7XG5cdFx0fSBlbHNlIGlmICggaW5kZXggPT09ICdtYXgnICkge1xuXHRcdFx0cGVyY2VudGFnZSA9IDEwMDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cGVyY2VudGFnZSA9IHBhcnNlRmxvYXQoIGluZGV4ICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGNvcnJlY3QgaW5wdXQuXG5cdFx0aWYgKCAhaXNOdW1lcmljKCBwZXJjZW50YWdlICkgfHwgIWlzTnVtZXJpYyggdmFsdWVbMF0gKSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyB2YWx1ZSBpc24ndCBudW1lcmljLlwiKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB2YWx1ZXMuXG5cdFx0dGhhdC54UGN0LnB1c2goIHBlcmNlbnRhZ2UgKTtcblx0XHR0aGF0LnhWYWwucHVzaCggdmFsdWVbMF0gKTtcblxuXHRcdC8vIE5hTiB3aWxsIGV2YWx1YXRlIHRvIGZhbHNlIHRvbywgYnV0IHRvIGtlZXBcblx0XHQvLyBsb2dnaW5nIGNsZWFyLCBzZXQgc3RlcCBleHBsaWNpdGx5LiBNYWtlIHN1cmVcblx0XHQvLyBub3QgdG8gb3ZlcnJpZGUgdGhlICdzdGVwJyBzZXR0aW5nIHdpdGggZmFsc2UuXG5cdFx0aWYgKCAhcGVyY2VudGFnZSApIHtcblx0XHRcdGlmICggIWlzTmFOKCB2YWx1ZVsxXSApICkge1xuXHRcdFx0XHR0aGF0LnhTdGVwc1swXSA9IHZhbHVlWzFdO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGF0LnhTdGVwcy5wdXNoKCBpc05hTih2YWx1ZVsxXSkgPyBmYWxzZSA6IHZhbHVlWzFdICk7XG5cdFx0fVxuXG5cdFx0dGhhdC54SGlnaGVzdENvbXBsZXRlU3RlcC5wdXNoKDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlU3RlcFBvaW50ICggaSwgbiwgdGhhdCApIHtcblxuXHRcdC8vIElnbm9yZSAnZmFsc2UnIHN0ZXBwaW5nLlxuXHRcdGlmICggIW4gKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBGYWN0b3IgdG8gcmFuZ2UgcmF0aW9cblx0XHR0aGF0LnhTdGVwc1tpXSA9IGZyb21QZXJjZW50YWdlKFtcblx0XHRcdCB0aGF0LnhWYWxbaV1cblx0XHRcdCx0aGF0LnhWYWxbaSsxXVxuXHRcdF0sIG4pIC8gc3ViUmFuZ2VSYXRpbyAoXG5cdFx0XHR0aGF0LnhQY3RbaV0sXG5cdFx0XHR0aGF0LnhQY3RbaSsxXSApO1xuXG5cdFx0dmFyIHRvdGFsU3RlcHMgPSAodGhhdC54VmFsW2krMV0gLSB0aGF0LnhWYWxbaV0pIC8gdGhhdC54TnVtU3RlcHNbaV07XG5cdFx0dmFyIGhpZ2hlc3RTdGVwID0gTWF0aC5jZWlsKE51bWJlcih0b3RhbFN0ZXBzLnRvRml4ZWQoMykpIC0gMSk7XG5cdFx0dmFyIHN0ZXAgPSB0aGF0LnhWYWxbaV0gKyAodGhhdC54TnVtU3RlcHNbaV0gKiBoaWdoZXN0U3RlcCk7XG5cblx0XHR0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwW2ldID0gc3RlcDtcblx0fVxuXG5cbi8vIEludGVyZmFjZVxuXG5cdGZ1bmN0aW9uIFNwZWN0cnVtICggZW50cnksIHNuYXAsIHNpbmdsZVN0ZXAgKSB7XG5cblx0XHR0aGlzLnhQY3QgPSBbXTtcblx0XHR0aGlzLnhWYWwgPSBbXTtcblx0XHR0aGlzLnhTdGVwcyA9IFsgc2luZ2xlU3RlcCB8fCBmYWxzZSBdO1xuXHRcdHRoaXMueE51bVN0ZXBzID0gWyBmYWxzZSBdO1xuXHRcdHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXAgPSBbXTtcblxuXHRcdHRoaXMuc25hcCA9IHNuYXA7XG5cblx0XHR2YXIgaW5kZXgsIG9yZGVyZWQgPSBbIC8qIFswLCAnbWluJ10sIFsxLCAnNTAlJ10sIFsyLCAnbWF4J10gKi8gXTtcblxuXHRcdC8vIE1hcCB0aGUgb2JqZWN0IGtleXMgdG8gYW4gYXJyYXkuXG5cdFx0Zm9yICggaW5kZXggaW4gZW50cnkgKSB7XG5cdFx0XHRpZiAoIGVudHJ5Lmhhc093blByb3BlcnR5KGluZGV4KSApIHtcblx0XHRcdFx0b3JkZXJlZC5wdXNoKFtlbnRyeVtpbmRleF0sIGluZGV4XSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBhbGwgZW50cmllcyBieSB2YWx1ZSAobnVtZXJpYyBzb3J0KS5cblx0XHRpZiAoIG9yZGVyZWQubGVuZ3RoICYmIHR5cGVvZiBvcmRlcmVkWzBdWzBdID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0b3JkZXJlZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGFbMF1bMF0gLSBiWzBdWzBdOyB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0b3JkZXJlZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGFbMF0gLSBiWzBdOyB9KTtcblx0XHR9XG5cblxuXHRcdC8vIENvbnZlcnQgYWxsIGVudHJpZXMgdG8gc3VicmFuZ2VzLlxuXHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBvcmRlcmVkLmxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdGhhbmRsZUVudHJ5UG9pbnQob3JkZXJlZFtpbmRleF1bMV0sIG9yZGVyZWRbaW5kZXhdWzBdLCB0aGlzKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB0aGUgYWN0dWFsIHN0ZXAgdmFsdWVzLlxuXHRcdC8vIHhTdGVwcyBpcyBzb3J0ZWQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgeFBjdCBhbmQgeFZhbC5cblx0XHR0aGlzLnhOdW1TdGVwcyA9IHRoaXMueFN0ZXBzLnNsaWNlKDApO1xuXG5cdFx0Ly8gQ29udmVydCBhbGwgbnVtZXJpYyBzdGVwcyB0byB0aGUgcGVyY2VudGFnZSBvZiB0aGUgc3VicmFuZ2UgdGhleSByZXByZXNlbnQuXG5cdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IHRoaXMueE51bVN0ZXBzLmxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdGhhbmRsZVN0ZXBQb2ludChpbmRleCwgdGhpcy54TnVtU3RlcHNbaW5kZXhdLCB0aGlzKTtcblx0XHR9XG5cdH1cblxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0TWFyZ2luID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZhciBzdGVwID0gdGhpcy54TnVtU3RlcHNbMF07XG5cblx0XHRpZiAoIHN0ZXAgJiYgKCh2YWx1ZSAvIHN0ZXApICUgMSkgIT09IDAgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdsaW1pdCcsICdtYXJnaW4nIGFuZCAncGFkZGluZycgbXVzdCBiZSBkaXZpc2libGUgYnkgc3RlcC5cIik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMueFBjdC5sZW5ndGggPT09IDIgPyBmcm9tUGVyY2VudGFnZSh0aGlzLnhWYWwsIHZhbHVlKSA6IGZhbHNlO1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS50b1N0ZXBwaW5nID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZhbHVlID0gdG9TdGVwcGluZyggdGhpcy54VmFsLCB0aGlzLnhQY3QsIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLmZyb21TdGVwcGluZyA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRyZXR1cm4gZnJvbVN0ZXBwaW5nKCB0aGlzLnhWYWwsIHRoaXMueFBjdCwgdmFsdWUgKTtcblx0fTtcblxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0U3RlcCA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHR2YWx1ZSA9IGdldFN0ZXAodGhpcy54UGN0LCB0aGlzLnhTdGVwcywgdGhpcy5zbmFwLCB2YWx1ZSApO1xuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXROZWFyYnlTdGVwcyA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHR2YXIgaiA9IGdldEoodmFsdWUsIHRoaXMueFBjdCk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RlcEJlZm9yZTogeyBzdGFydFZhbHVlOiB0aGlzLnhWYWxbai0yXSwgc3RlcDogdGhpcy54TnVtU3RlcHNbai0yXSwgaGlnaGVzdFN0ZXA6IHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbai0yXSB9LFxuXHRcdFx0dGhpc1N0ZXA6IHsgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2otMV0sIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2otMV0sIGhpZ2hlc3RTdGVwOiB0aGlzLnhIaWdoZXN0Q29tcGxldGVTdGVwW2otMV0gfSxcblx0XHRcdHN0ZXBBZnRlcjogeyBzdGFydFZhbHVlOiB0aGlzLnhWYWxbai0wXSwgc3RlcDogdGhpcy54TnVtU3RlcHNbai0wXSwgaGlnaGVzdFN0ZXA6IHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbai0wXSB9XG5cdFx0fTtcblx0fTtcblxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuY291bnRTdGVwRGVjaW1hbHMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHN0ZXBEZWNpbWFscyA9IHRoaXMueE51bVN0ZXBzLm1hcChjb3VudERlY2ltYWxzKTtcblx0XHRyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgc3RlcERlY2ltYWxzKTtcbiBcdH07XG5cblx0Ly8gT3V0c2lkZSB0ZXN0aW5nXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRTdGVwKHRoaXMudG9TdGVwcGluZyh2YWx1ZSkpO1xuXHR9O1xuXG4vKlx0RXZlcnkgaW5wdXQgb3B0aW9uIGlzIHRlc3RlZCBhbmQgcGFyc2VkLiBUaGlzJ2xsIHByZXZlbnRcblx0ZW5kbGVzcyB2YWxpZGF0aW9uIGluIGludGVybmFsIG1ldGhvZHMuIFRoZXNlIHRlc3RzIGFyZVxuXHRzdHJ1Y3R1cmVkIHdpdGggYW4gaXRlbSBmb3IgZXZlcnkgb3B0aW9uIGF2YWlsYWJsZS4gQW5cblx0b3B0aW9uIGNhbiBiZSBtYXJrZWQgYXMgcmVxdWlyZWQgYnkgc2V0dGluZyB0aGUgJ3InIGZsYWcuXG5cdFRoZSB0ZXN0aW5nIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuXHRcdC0gVGhlIHByb3ZpZGVkIHZhbHVlIGZvciB0aGUgb3B0aW9uO1xuXHRcdC0gQSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgb2JqZWN0O1xuXHRcdC0gVGhlIG5hbWUgZm9yIHRoZSBvcHRpb247XG5cblx0VGhlIHRlc3RpbmcgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSB3aGVuIGFuIGVycm9yIGlzIGRldGVjdGVkLFxuXHRvciB0cnVlIHdoZW4gZXZlcnl0aGluZyBpcyBPSy4gSXQgY2FuIGFsc28gbW9kaWZ5IHRoZSBvcHRpb25cblx0b2JqZWN0LCB0byBtYWtlIHN1cmUgYWxsIHZhbHVlcyBjYW4gYmUgY29ycmVjdGx5IGxvb3BlZCBlbHNld2hlcmUuICovXG5cblx0dmFyIGRlZmF1bHRGb3JtYXR0ZXIgPSB7ICd0byc6IGZ1bmN0aW9uKCB2YWx1ZSApe1xuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLnRvRml4ZWQoMik7XG5cdH0sICdmcm9tJzogTnVtYmVyIH07XG5cblx0ZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQgKCBlbnRyeSApIHtcblxuXHRcdC8vIEFueSBvYmplY3Qgd2l0aCBhIHRvIGFuZCBmcm9tIG1ldGhvZCBpcyBzdXBwb3J0ZWQuXG5cdFx0aWYgKCBpc1ZhbGlkRm9ybWF0dGVyKGVudHJ5KSApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Zvcm1hdCcgcmVxdWlyZXMgJ3RvJyBhbmQgJ2Zyb20nIG1ldGhvZHMuXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFN0ZXAgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCAhaXNOdW1lcmljKCBlbnRyeSApICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc3RlcCcgaXMgbm90IG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIFRoZSBzdGVwIG9wdGlvbiBjYW4gc3RpbGwgYmUgdXNlZCB0byBzZXQgc3RlcHBpbmdcblx0XHQvLyBmb3IgbGluZWFyIHNsaWRlcnMuIE92ZXJ3cml0dGVuIGlmIHNldCBpbiAncmFuZ2UnLlxuXHRcdHBhcnNlZC5zaW5nbGVTdGVwID0gZW50cnk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0UmFuZ2UgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0Ly8gRmlsdGVyIGluY29ycmVjdCBpbnB1dC5cblx0XHRpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShlbnRyeSkgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgaXMgbm90IGFuIG9iamVjdC5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gQ2F0Y2ggbWlzc2luZyBzdGFydCBvciBlbmQuXG5cdFx0aWYgKCBlbnRyeS5taW4gPT09IHVuZGVmaW5lZCB8fCBlbnRyeS5tYXggPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogTWlzc2luZyAnbWluJyBvciAnbWF4JyBpbiAncmFuZ2UnLlwiKTtcblx0XHR9XG5cblx0XHQvLyBDYXRjaCBlcXVhbCBzdGFydCBvciBlbmQuXG5cdFx0aWYgKCBlbnRyeS5taW4gPT09IGVudHJ5Lm1heCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyAnbWluJyBhbmQgJ21heCcgY2Fubm90IGJlIGVxdWFsLlwiKTtcblx0XHR9XG5cblx0XHRwYXJzZWQuc3BlY3RydW0gPSBuZXcgU3BlY3RydW0oZW50cnksIHBhcnNlZC5zbmFwLCBwYXJzZWQuc2luZ2xlU3RlcCk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0U3RhcnQgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0ZW50cnkgPSBhc0FycmF5KGVudHJ5KTtcblxuXHRcdC8vIFZhbGlkYXRlIGlucHV0LiBWYWx1ZXMgYXJlbid0IHRlc3RlZCwgYXMgdGhlIHB1YmxpYyAudmFsIG1ldGhvZFxuXHRcdC8vIHdpbGwgYWx3YXlzIHByb3ZpZGUgYSB2YWxpZCBsb2NhdGlvbi5cblx0XHRpZiAoICFBcnJheS5pc0FycmF5KCBlbnRyeSApIHx8ICFlbnRyeS5sZW5ndGggKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdzdGFydCcgb3B0aW9uIGlzIGluY29ycmVjdC5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgdGhlIG51bWJlciBvZiBoYW5kbGVzLlxuXHRcdHBhcnNlZC5oYW5kbGVzID0gZW50cnkubGVuZ3RoO1xuXG5cdFx0Ly8gV2hlbiB0aGUgc2xpZGVyIGlzIGluaXRpYWxpemVkLCB0aGUgLnZhbCBtZXRob2Qgd2lsbFxuXHRcdC8vIGJlIGNhbGxlZCB3aXRoIHRoZSBzdGFydCBvcHRpb25zLlxuXHRcdHBhcnNlZC5zdGFydCA9IGVudHJ5O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFNuYXAgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0Ly8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuXG5cdFx0cGFyc2VkLnNuYXAgPSBlbnRyeTtcblxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnYm9vbGVhbicgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3NuYXAnIG9wdGlvbiBtdXN0IGJlIGEgYm9vbGVhbi5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdEFuaW1hdGUgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0Ly8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuXG5cdFx0cGFyc2VkLmFuaW1hdGUgPSBlbnRyeTtcblxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnYm9vbGVhbicgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2FuaW1hdGUnIG9wdGlvbiBtdXN0IGJlIGEgYm9vbGVhbi5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdEFuaW1hdGlvbkR1cmF0aW9uICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdHBhcnNlZC5hbmltYXRpb25EdXJhdGlvbiA9IGVudHJ5O1xuXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdudW1iZXInICl7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdhbmltYXRpb25EdXJhdGlvbicgb3B0aW9uIG11c3QgYmUgYSBudW1iZXIuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RDb25uZWN0ICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdHZhciBjb25uZWN0ID0gW2ZhbHNlXTtcblx0XHR2YXIgaTtcblxuXHRcdC8vIE1hcCBsZWdhY3kgb3B0aW9uc1xuXHRcdGlmICggZW50cnkgPT09ICdsb3dlcicgKSB7XG5cdFx0XHRlbnRyeSA9IFt0cnVlLCBmYWxzZV07XG5cdFx0fVxuXG5cdFx0ZWxzZSBpZiAoIGVudHJ5ID09PSAndXBwZXInICkge1xuXHRcdFx0ZW50cnkgPSBbZmFsc2UsIHRydWVdO1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBib29sZWFuIG9wdGlvbnNcblx0XHRpZiAoIGVudHJ5ID09PSB0cnVlIHx8IGVudHJ5ID09PSBmYWxzZSApIHtcblxuXHRcdFx0Zm9yICggaSA9IDE7IGkgPCBwYXJzZWQuaGFuZGxlczsgaSsrICkge1xuXHRcdFx0XHRjb25uZWN0LnB1c2goZW50cnkpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25uZWN0LnB1c2goZmFsc2UpO1xuXHRcdH1cblxuXHRcdC8vIFJlamVjdCBpbnZhbGlkIGlucHV0XG5cdFx0ZWxzZSBpZiAoICFBcnJheS5pc0FycmF5KCBlbnRyeSApIHx8ICFlbnRyeS5sZW5ndGggfHwgZW50cnkubGVuZ3RoICE9PSBwYXJzZWQuaGFuZGxlcyArIDEgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdjb25uZWN0JyBvcHRpb24gZG9lc24ndCBtYXRjaCBoYW5kbGUgY291bnQuXCIpO1xuXHRcdH1cblxuXHRcdGVsc2Uge1xuXHRcdFx0Y29ubmVjdCA9IGVudHJ5O1xuXHRcdH1cblxuXHRcdHBhcnNlZC5jb25uZWN0ID0gY29ubmVjdDtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RPcmllbnRhdGlvbiAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBTZXQgb3JpZW50YXRpb24gdG8gYW4gYSBudW1lcmljYWwgdmFsdWUgZm9yIGVhc3lcblx0XHQvLyBhcnJheSBzZWxlY3Rpb24uXG5cdFx0c3dpdGNoICggZW50cnkgKXtcblx0XHQgIGNhc2UgJ2hvcml6b250YWwnOlxuXHRcdFx0cGFyc2VkLm9ydCA9IDA7XG5cdFx0XHRicmVhaztcblx0XHQgIGNhc2UgJ3ZlcnRpY2FsJzpcblx0XHRcdHBhcnNlZC5vcnQgPSAxO1xuXHRcdFx0YnJlYWs7XG5cdFx0ICBkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnb3JpZW50YXRpb24nIG9wdGlvbiBpcyBpbnZhbGlkLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0TWFyZ2luICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdGlmICggIWlzTnVtZXJpYyhlbnRyeSkgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ21hcmdpbicgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gSXNzdWUgIzU4MlxuXHRcdGlmICggZW50cnkgPT09IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0cGFyc2VkLm1hcmdpbiA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xuXG5cdFx0aWYgKCAhcGFyc2VkLm1hcmdpbiApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ21hcmdpbicgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGxpbmVhciBzbGlkZXJzLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0TGltaXQgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCAhaXNOdW1lcmljKGVudHJ5KSApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbGltaXQnIG9wdGlvbiBtdXN0IGJlIG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5saW1pdCA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xuXG5cdFx0aWYgKCAhcGFyc2VkLmxpbWl0IHx8IHBhcnNlZC5oYW5kbGVzIDwgMiApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2xpbWl0JyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMgd2l0aCAyIG9yIG1vcmUgaGFuZGxlcy5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFBhZGRpbmcgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCAhaXNOdW1lcmljKGVudHJ5KSApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKCBlbnRyeSA9PT0gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRwYXJzZWQucGFkZGluZyA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xuXG5cdFx0aWYgKCAhcGFyc2VkLnBhZGRpbmcgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMuXCIpO1xuXHRcdH1cblxuXHRcdGlmICggcGFyc2VkLnBhZGRpbmcgPCAwICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuXCIpO1xuXHRcdH1cblxuXHRcdGlmICggcGFyc2VkLnBhZGRpbmcgPj0gNTAgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBsZXNzIHRoYW4gaGFsZiB0aGUgcmFuZ2UuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3REaXJlY3Rpb24gKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0Ly8gU2V0IGRpcmVjdGlvbiBhcyBhIG51bWVyaWNhbCB2YWx1ZSBmb3IgZWFzeSBwYXJzaW5nLlxuXHRcdC8vIEludmVydCBjb25uZWN0aW9uIGZvciBSVEwgc2xpZGVycywgc28gdGhhdCB0aGUgcHJvcGVyXG5cdFx0Ly8gaGFuZGxlcyBnZXQgdGhlIGNvbm5lY3QvYmFja2dyb3VuZCBjbGFzc2VzLlxuXHRcdHN3aXRjaCAoIGVudHJ5ICkge1xuXHRcdCAgY2FzZSAnbHRyJzpcblx0XHRcdHBhcnNlZC5kaXIgPSAwO1xuXHRcdFx0YnJlYWs7XG5cdFx0ICBjYXNlICdydGwnOlxuXHRcdFx0cGFyc2VkLmRpciA9IDE7XG5cdFx0XHRicmVhaztcblx0XHQgIGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdkaXJlY3Rpb24nIG9wdGlvbiB3YXMgbm90IHJlY29nbml6ZWQuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RCZWhhdmlvdXIgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSBpbnB1dCBpcyBhIHN0cmluZy5cblx0XHRpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ3N0cmluZycgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdiZWhhdmlvdXInIG11c3QgYmUgYSBzdHJpbmcgY29udGFpbmluZyBvcHRpb25zLlwiKTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgc3RyaW5nIGNvbnRhaW5zIGFueSBrZXl3b3Jkcy5cblx0XHQvLyBOb25lIGFyZSByZXF1aXJlZC5cblx0XHR2YXIgdGFwID0gZW50cnkuaW5kZXhPZigndGFwJykgPj0gMDtcblx0XHR2YXIgZHJhZyA9IGVudHJ5LmluZGV4T2YoJ2RyYWcnKSA+PSAwO1xuXHRcdHZhciBmaXhlZCA9IGVudHJ5LmluZGV4T2YoJ2ZpeGVkJykgPj0gMDtcblx0XHR2YXIgc25hcCA9IGVudHJ5LmluZGV4T2YoJ3NuYXAnKSA+PSAwO1xuXHRcdHZhciBob3ZlciA9IGVudHJ5LmluZGV4T2YoJ2hvdmVyJykgPj0gMDtcblxuXHRcdGlmICggZml4ZWQgKSB7XG5cblx0XHRcdGlmICggcGFyc2VkLmhhbmRsZXMgIT09IDIgKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2ZpeGVkJyBiZWhhdmlvdXIgbXVzdCBiZSB1c2VkIHdpdGggMiBoYW5kbGVzXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBVc2UgbWFyZ2luIHRvIGVuZm9yY2UgZml4ZWQgc3RhdGVcblx0XHRcdHRlc3RNYXJnaW4ocGFyc2VkLCBwYXJzZWQuc3RhcnRbMV0gLSBwYXJzZWQuc3RhcnRbMF0pO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5ldmVudHMgPSB7XG5cdFx0XHR0YXA6IHRhcCB8fCBzbmFwLFxuXHRcdFx0ZHJhZzogZHJhZyxcblx0XHRcdGZpeGVkOiBmaXhlZCxcblx0XHRcdHNuYXA6IHNuYXAsXG5cdFx0XHRob3ZlcjogaG92ZXJcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdE11bHRpdG91Y2ggKCBwYXJzZWQsIGVudHJ5ICkge1xuXHRcdHBhcnNlZC5tdWx0aXRvdWNoID0gZW50cnk7XG5cblx0XHRpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ2Jvb2xlYW4nICl7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdtdWx0aXRvdWNoJyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RUb29sdGlwcyAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoIGVudHJ5ID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRlbHNlIGlmICggZW50cnkgPT09IHRydWUgKSB7XG5cblx0XHRcdHBhcnNlZC50b29sdGlwcyA9IFtdO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBwYXJzZWQuaGFuZGxlczsgaSsrICkge1xuXHRcdFx0XHRwYXJzZWQudG9vbHRpcHMucHVzaCh0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRlbHNlIHtcblxuXHRcdFx0cGFyc2VkLnRvb2x0aXBzID0gYXNBcnJheShlbnRyeSk7XG5cblx0XHRcdGlmICggcGFyc2VkLnRvb2x0aXBzLmxlbmd0aCAhPT0gcGFyc2VkLmhhbmRsZXMgKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogbXVzdCBwYXNzIGEgZm9ybWF0dGVyIGZvciBhbGwgaGFuZGxlcy5cIik7XG5cdFx0XHR9XG5cblx0XHRcdHBhcnNlZC50b29sdGlwcy5mb3JFYWNoKGZ1bmN0aW9uKGZvcm1hdHRlcil7XG5cdFx0XHRcdGlmICggdHlwZW9mIGZvcm1hdHRlciAhPT0gJ2Jvb2xlYW4nICYmICh0eXBlb2YgZm9ybWF0dGVyICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgZm9ybWF0dGVyLnRvICE9PSAnZnVuY3Rpb24nKSApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICd0b29sdGlwcycgbXVzdCBiZSBwYXNzZWQgYSBmb3JtYXR0ZXIgb3IgJ2ZhbHNlJy5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RBcmlhRm9ybWF0ICggcGFyc2VkLCBlbnRyeSApIHtcblx0XHRwYXJzZWQuYXJpYUZvcm1hdCA9IGVudHJ5O1xuXHRcdHZhbGlkYXRlRm9ybWF0KGVudHJ5KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RGb3JtYXQgKCBwYXJzZWQsIGVudHJ5ICkge1xuXHRcdHBhcnNlZC5mb3JtYXQgPSBlbnRyeTtcblx0XHR2YWxpZGF0ZUZvcm1hdChlbnRyeSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0Q3NzUHJlZml4ICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdGlmICggZW50cnkgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW50cnkgIT09ICdzdHJpbmcnICYmIGVudHJ5ICE9PSBmYWxzZSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nzc1ByZWZpeCcgbXVzdCBiZSBhIHN0cmluZyBvciBgZmFsc2VgLlwiKTtcblx0XHR9XG5cblx0XHRwYXJzZWQuY3NzUHJlZml4ID0gZW50cnk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0Q3NzQ2xhc3NlcyAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoIGVudHJ5ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVudHJ5ICE9PSAnb2JqZWN0JyApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nzc0NsYXNzZXMnIG11c3QgYmUgYW4gb2JqZWN0LlwiKTtcblx0XHR9XG5cblx0XHRpZiAoIHR5cGVvZiBwYXJzZWQuY3NzUHJlZml4ID09PSAnc3RyaW5nJyApIHtcblx0XHRcdHBhcnNlZC5jc3NDbGFzc2VzID0ge307XG5cblx0XHRcdGZvciAoIHZhciBrZXkgaW4gZW50cnkgKSB7XG5cdFx0XHRcdGlmICggIWVudHJ5Lmhhc093blByb3BlcnR5KGtleSkgKSB7IGNvbnRpbnVlOyB9XG5cblx0XHRcdFx0cGFyc2VkLmNzc0NsYXNzZXNba2V5XSA9IHBhcnNlZC5jc3NQcmVmaXggKyBlbnRyeVtrZXldO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYXJzZWQuY3NzQ2xhc3NlcyA9IGVudHJ5O1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RVc2VSYWYgKCBwYXJzZWQsIGVudHJ5ICkge1xuXHRcdGlmICggZW50cnkgPT09IHRydWUgfHwgZW50cnkgPT09IGZhbHNlICkge1xuXHRcdFx0cGFyc2VkLnVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGVudHJ5O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICd1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnIG9wdGlvbiBzaG91bGQgYmUgdHJ1ZSAoZGVmYXVsdCkgb3IgZmFsc2UuXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFRlc3QgYWxsIGRldmVsb3BlciBzZXR0aW5ncyBhbmQgcGFyc2UgdG8gYXNzdW1wdGlvbi1zYWZlIHZhbHVlcy5cblx0ZnVuY3Rpb24gdGVzdE9wdGlvbnMgKCBvcHRpb25zICkge1xuXG5cdFx0Ly8gVG8gcHJvdmUgYSBmaXggZm9yICM1MzcsIGZyZWV6ZSBvcHRpb25zIGhlcmUuXG5cdFx0Ly8gSWYgdGhlIG9iamVjdCBpcyBtb2RpZmllZCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG5cdFx0Ly8gT2JqZWN0LmZyZWV6ZShvcHRpb25zKTtcblxuXHRcdHZhciBwYXJzZWQgPSB7XG5cdFx0XHRtYXJnaW46IDAsXG5cdFx0XHRsaW1pdDogMCxcblx0XHRcdHBhZGRpbmc6IDAsXG5cdFx0XHRhbmltYXRlOiB0cnVlLFxuXHRcdFx0YW5pbWF0aW9uRHVyYXRpb246IDMwMCxcblx0XHRcdGFyaWFGb3JtYXQ6IGRlZmF1bHRGb3JtYXR0ZXIsXG5cdFx0XHRmb3JtYXQ6IGRlZmF1bHRGb3JtYXR0ZXJcblx0XHR9O1xuXG5cdFx0Ly8gVGVzdHMgYXJlIGV4ZWN1dGVkIGluIHRoZSBvcmRlciB0aGV5IGFyZSBwcmVzZW50ZWQgaGVyZS5cblx0XHR2YXIgdGVzdHMgPSB7XG5cdFx0XHQnc3RlcCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RTdGVwIH0sXG5cdFx0XHQnc3RhcnQnOiB7IHI6IHRydWUsIHQ6IHRlc3RTdGFydCB9LFxuXHRcdFx0J2Nvbm5lY3QnOiB7IHI6IHRydWUsIHQ6IHRlc3RDb25uZWN0IH0sXG5cdFx0XHQnZGlyZWN0aW9uJzogeyByOiB0cnVlLCB0OiB0ZXN0RGlyZWN0aW9uIH0sXG5cdFx0XHQnc25hcCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RTbmFwIH0sXG5cdFx0XHQnYW5pbWF0ZSc6IHsgcjogZmFsc2UsIHQ6IHRlc3RBbmltYXRlIH0sXG5cdFx0XHQnYW5pbWF0aW9uRHVyYXRpb24nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0QW5pbWF0aW9uRHVyYXRpb24gfSxcblx0XHRcdCdyYW5nZSc6IHsgcjogdHJ1ZSwgdDogdGVzdFJhbmdlIH0sXG5cdFx0XHQnb3JpZW50YXRpb24nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0T3JpZW50YXRpb24gfSxcblx0XHRcdCdtYXJnaW4nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0TWFyZ2luIH0sXG5cdFx0XHQnbGltaXQnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0TGltaXQgfSxcblx0XHRcdCdwYWRkaW5nJzogeyByOiBmYWxzZSwgdDogdGVzdFBhZGRpbmcgfSxcblx0XHRcdCdiZWhhdmlvdXInOiB7IHI6IHRydWUsIHQ6IHRlc3RCZWhhdmlvdXIgfSxcblx0XHRcdCdtdWx0aXRvdWNoJzogeyByOiB0cnVlLCB0OiB0ZXN0TXVsdGl0b3VjaCB9LFxuXHRcdFx0J2FyaWFGb3JtYXQnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0QXJpYUZvcm1hdCB9LFxuXHRcdFx0J2Zvcm1hdCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RGb3JtYXQgfSxcblx0XHRcdCd0b29sdGlwcyc6IHsgcjogZmFsc2UsIHQ6IHRlc3RUb29sdGlwcyB9LFxuXHRcdFx0J2Nzc1ByZWZpeCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RDc3NQcmVmaXggfSxcblx0XHRcdCdjc3NDbGFzc2VzJzogeyByOiBmYWxzZSwgdDogdGVzdENzc0NsYXNzZXMgfSxcblx0XHRcdCd1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0VXNlUmFmIH1cblx0XHR9O1xuXG5cdFx0dmFyIGRlZmF1bHRzID0ge1xuXHRcdFx0J2Nvbm5lY3QnOiBmYWxzZSxcblx0XHRcdCdkaXJlY3Rpb24nOiAnbHRyJyxcblx0XHRcdCdiZWhhdmlvdXInOiAndGFwJyxcblx0XHRcdCdtdWx0aXRvdWNoJzogZmFsc2UsXG5cdFx0XHQnb3JpZW50YXRpb24nOiAnaG9yaXpvbnRhbCcsXG5cdFx0XHQnY3NzUHJlZml4JyA6ICdub1VpLScsXG5cdFx0XHQnY3NzQ2xhc3Nlcyc6IHtcblx0XHRcdFx0dGFyZ2V0OiAndGFyZ2V0Jyxcblx0XHRcdFx0YmFzZTogJ2Jhc2UnLFxuXHRcdFx0XHRvcmlnaW46ICdvcmlnaW4nLFxuXHRcdFx0XHRoYW5kbGU6ICdoYW5kbGUnLFxuXHRcdFx0XHRoYW5kbGVMb3dlcjogJ2hhbmRsZS1sb3dlcicsXG5cdFx0XHRcdGhhbmRsZVVwcGVyOiAnaGFuZGxlLXVwcGVyJyxcblx0XHRcdFx0aG9yaXpvbnRhbDogJ2hvcml6b250YWwnLFxuXHRcdFx0XHR2ZXJ0aWNhbDogJ3ZlcnRpY2FsJyxcblx0XHRcdFx0YmFja2dyb3VuZDogJ2JhY2tncm91bmQnLFxuXHRcdFx0XHRjb25uZWN0OiAnY29ubmVjdCcsXG5cdFx0XHRcdGx0cjogJ2x0cicsXG5cdFx0XHRcdHJ0bDogJ3J0bCcsXG5cdFx0XHRcdGRyYWdnYWJsZTogJ2RyYWdnYWJsZScsXG5cdFx0XHRcdGRyYWc6ICdzdGF0ZS1kcmFnJyxcblx0XHRcdFx0dGFwOiAnc3RhdGUtdGFwJyxcblx0XHRcdFx0YWN0aXZlOiAnYWN0aXZlJyxcblx0XHRcdFx0dG9vbHRpcDogJ3Rvb2x0aXAnLFxuXHRcdFx0XHRwaXBzOiAncGlwcycsXG5cdFx0XHRcdHBpcHNIb3Jpem9udGFsOiAncGlwcy1ob3Jpem9udGFsJyxcblx0XHRcdFx0cGlwc1ZlcnRpY2FsOiAncGlwcy12ZXJ0aWNhbCcsXG5cdFx0XHRcdG1hcmtlcjogJ21hcmtlcicsXG5cdFx0XHRcdG1hcmtlckhvcml6b250YWw6ICdtYXJrZXItaG9yaXpvbnRhbCcsXG5cdFx0XHRcdG1hcmtlclZlcnRpY2FsOiAnbWFya2VyLXZlcnRpY2FsJyxcblx0XHRcdFx0bWFya2VyTm9ybWFsOiAnbWFya2VyLW5vcm1hbCcsXG5cdFx0XHRcdG1hcmtlckxhcmdlOiAnbWFya2VyLWxhcmdlJyxcblx0XHRcdFx0bWFya2VyU3ViOiAnbWFya2VyLXN1YicsXG5cdFx0XHRcdHZhbHVlOiAndmFsdWUnLFxuXHRcdFx0XHR2YWx1ZUhvcml6b250YWw6ICd2YWx1ZS1ob3Jpem9udGFsJyxcblx0XHRcdFx0dmFsdWVWZXJ0aWNhbDogJ3ZhbHVlLXZlcnRpY2FsJyxcblx0XHRcdFx0dmFsdWVOb3JtYWw6ICd2YWx1ZS1ub3JtYWwnLFxuXHRcdFx0XHR2YWx1ZUxhcmdlOiAndmFsdWUtbGFyZ2UnLFxuXHRcdFx0XHR2YWx1ZVN1YjogJ3ZhbHVlLXN1Yidcblx0XHRcdH0sXG5cdFx0XHQndXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lJzogdHJ1ZVxuXHRcdH07XG5cblx0XHQvLyBBcmlhRm9ybWF0IGRlZmF1bHRzIHRvIHJlZ3VsYXIgZm9ybWF0LCBpZiBhbnkuXG5cdFx0aWYgKCBvcHRpb25zLmZvcm1hdCAmJiAhb3B0aW9ucy5hcmlhRm9ybWF0ICkge1xuXHRcdFx0b3B0aW9ucy5hcmlhRm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQ7XG5cdFx0fVxuXG5cdFx0Ly8gUnVuIGFsbCBvcHRpb25zIHRocm91Z2ggYSB0ZXN0aW5nIG1lY2hhbmlzbSB0byBlbnN1cmUgY29ycmVjdFxuXHRcdC8vIGlucHV0LiBJdCBzaG91bGQgYmUgbm90ZWQgdGhhdCBvcHRpb25zIG1pZ2h0IGdldCBtb2RpZmllZCB0b1xuXHRcdC8vIGJlIGhhbmRsZWQgcHJvcGVybHkuIEUuZy4gd3JhcHBpbmcgaW50ZWdlcnMgaW4gYXJyYXlzLlxuXHRcdE9iamVjdC5rZXlzKHRlc3RzKS5mb3JFYWNoKGZ1bmN0aW9uKCBuYW1lICl7XG5cblx0XHRcdC8vIElmIHRoZSBvcHRpb24gaXNuJ3Qgc2V0LCBidXQgaXQgaXMgcmVxdWlyZWQsIHRocm93IGFuIGVycm9yLlxuXHRcdFx0aWYgKCBvcHRpb25zW25hbWVdID09PSB1bmRlZmluZWQgJiYgZGVmYXVsdHNbbmFtZV0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRpZiAoIHRlc3RzW25hbWVdLnIgKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnXCIgKyBuYW1lICsgXCInIGlzIHJlcXVpcmVkLlwiKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHR0ZXN0c1tuYW1lXS50KCBwYXJzZWQsIG9wdGlvbnNbbmFtZV0gPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRzW25hbWVdIDogb3B0aW9uc1tuYW1lXSApO1xuXHRcdH0pO1xuXG5cdFx0Ly8gRm9yd2FyZCBwaXBzIG9wdGlvbnNcblx0XHRwYXJzZWQucGlwcyA9IG9wdGlvbnMucGlwcztcblxuXHRcdHZhciBzdHlsZXMgPSBbWydsZWZ0JywgJ3RvcCddLCBbJ3JpZ2h0JywgJ2JvdHRvbSddXTtcblxuXHRcdC8vIFByZS1kZWZpbmUgdGhlIHN0eWxlcy5cblx0XHRwYXJzZWQuc3R5bGUgPSBzdHlsZXNbcGFyc2VkLmRpcl1bcGFyc2VkLm9ydF07XG5cdFx0cGFyc2VkLnN0eWxlT3Bvc2l0ZSA9IHN0eWxlc1twYXJzZWQuZGlyPzA6MV1bcGFyc2VkLm9ydF07XG5cblx0XHRyZXR1cm4gcGFyc2VkO1xuXHR9XG5cblxuZnVuY3Rpb24gY2xvc3VyZSAoIHRhcmdldCwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zICl7XG5cblx0dmFyIGFjdGlvbnMgPSBnZXRBY3Rpb25zKCk7XG5cdHZhciBzdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSA9IGdldFN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lKCk7XG5cdHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBzdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSAmJiBnZXRTdXBwb3J0c1Bhc3NpdmUoKTtcblxuXHQvLyBBbGwgdmFyaWFibGVzIGxvY2FsIHRvICdjbG9zdXJlJyBhcmUgcHJlZml4ZWQgd2l0aCAnc2NvcGVfJ1xuXHR2YXIgc2NvcGVfVGFyZ2V0ID0gdGFyZ2V0O1xuXHR2YXIgc2NvcGVfTG9jYXRpb25zID0gW107XG5cdHZhciBzY29wZV9CYXNlO1xuXHR2YXIgc2NvcGVfSGFuZGxlcztcblx0dmFyIHNjb3BlX0hhbmRsZU51bWJlcnMgPSBbXTtcblx0dmFyIHNjb3BlX0FjdGl2ZUhhbmRsZXNDb3VudCA9IDA7XG5cdHZhciBzY29wZV9Db25uZWN0cztcblx0dmFyIHNjb3BlX1NwZWN0cnVtID0gb3B0aW9ucy5zcGVjdHJ1bTtcblx0dmFyIHNjb3BlX1ZhbHVlcyA9IFtdO1xuXHR2YXIgc2NvcGVfRXZlbnRzID0ge307XG5cdHZhciBzY29wZV9TZWxmO1xuXHR2YXIgc2NvcGVfUGlwcztcblx0dmFyIHNjb3BlX0RvY3VtZW50ID0gdGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG5cdHZhciBzY29wZV9Eb2N1bWVudEVsZW1lbnQgPSBzY29wZV9Eb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdHZhciBzY29wZV9Cb2R5ID0gc2NvcGVfRG9jdW1lbnQuYm9keTtcblxuXG5cdC8vIENyZWF0ZXMgYSBub2RlLCBhZGRzIGl0IHRvIHRhcmdldCwgcmV0dXJucyB0aGUgbmV3IG5vZGUuXG5cdGZ1bmN0aW9uIGFkZE5vZGVUbyAoIHRhcmdldCwgY2xhc3NOYW1lICkge1xuXG5cdFx0dmFyIGRpdiA9IHNjb3BlX0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cdFx0XHRhZGRDbGFzcyhkaXYsIGNsYXNzTmFtZSk7XG5cdFx0fVxuXG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKGRpdik7XG5cblx0XHRyZXR1cm4gZGl2O1xuXHR9XG5cblx0Ly8gQXBwZW5kIGEgb3JpZ2luIHRvIHRoZSBiYXNlXG5cdGZ1bmN0aW9uIGFkZE9yaWdpbiAoIGJhc2UsIGhhbmRsZU51bWJlciApIHtcblxuXHRcdHZhciBvcmlnaW4gPSBhZGROb2RlVG8oYmFzZSwgb3B0aW9ucy5jc3NDbGFzc2VzLm9yaWdpbik7XG5cdFx0dmFyIGhhbmRsZSA9IGFkZE5vZGVUbyhvcmlnaW4sIG9wdGlvbnMuY3NzQ2xhc3Nlcy5oYW5kbGUpO1xuXG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1oYW5kbGUnLCBoYW5kbGVOdW1iZXIpO1xuXG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleFxuXHRcdC8vIDAgPSBmb2N1c2FibGUgYW5kIHJlYWNoYWJsZVxuXHRcdGhhbmRsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcblx0XHRoYW5kbGUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3NsaWRlcicpO1xuXHRcdGhhbmRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3JpZW50YXRpb24nLCBvcHRpb25zLm9ydCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcpO1xuXG5cdFx0aWYgKCBoYW5kbGVOdW1iZXIgPT09IDAgKSB7XG5cdFx0XHRhZGRDbGFzcyhoYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5oYW5kbGVMb3dlcik7XG5cdFx0fVxuXG5cdFx0ZWxzZSBpZiAoIGhhbmRsZU51bWJlciA9PT0gb3B0aW9ucy5oYW5kbGVzIC0gMSApIHtcblx0XHRcdGFkZENsYXNzKGhhbmRsZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZVVwcGVyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3JpZ2luO1xuXHR9XG5cblx0Ly8gSW5zZXJ0IG5vZGVzIGZvciBjb25uZWN0IGVsZW1lbnRzXG5cdGZ1bmN0aW9uIGFkZENvbm5lY3QgKCBiYXNlLCBhZGQgKSB7XG5cblx0XHRpZiAoICFhZGQgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFkZE5vZGVUbyhiYXNlLCBvcHRpb25zLmNzc0NsYXNzZXMuY29ubmVjdCk7XG5cdH1cblxuXHQvLyBBZGQgaGFuZGxlcyB0byB0aGUgc2xpZGVyIGJhc2UuXG5cdGZ1bmN0aW9uIGFkZEVsZW1lbnRzICggY29ubmVjdE9wdGlvbnMsIGJhc2UgKSB7XG5cblx0XHRzY29wZV9IYW5kbGVzID0gW107XG5cdFx0c2NvcGVfQ29ubmVjdHMgPSBbXTtcblxuXHRcdHNjb3BlX0Nvbm5lY3RzLnB1c2goYWRkQ29ubmVjdChiYXNlLCBjb25uZWN0T3B0aW9uc1swXSkpO1xuXG5cdFx0Ly8gWzo6OjpPPT09PU89PT09Tz09PT1dXG5cdFx0Ly8gY29ubmVjdE9wdGlvbnMgPSBbMCwgMSwgMSwgMV1cblxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IG9wdGlvbnMuaGFuZGxlczsgaSsrICkge1xuXHRcdFx0Ly8gS2VlcCBhIGxpc3Qgb2YgYWxsIGFkZGVkIGhhbmRsZXMuXG5cdFx0XHRzY29wZV9IYW5kbGVzLnB1c2goYWRkT3JpZ2luKGJhc2UsIGkpKTtcblx0XHRcdHNjb3BlX0hhbmRsZU51bWJlcnNbaV0gPSBpO1xuXHRcdFx0c2NvcGVfQ29ubmVjdHMucHVzaChhZGRDb25uZWN0KGJhc2UsIGNvbm5lY3RPcHRpb25zW2kgKyAxXSkpO1xuXHRcdH1cblx0fVxuXG5cdC8vIEluaXRpYWxpemUgYSBzaW5nbGUgc2xpZGVyLlxuXHRmdW5jdGlvbiBhZGRTbGlkZXIgKCB0YXJnZXQgKSB7XG5cblx0XHQvLyBBcHBseSBjbGFzc2VzIGFuZCBkYXRhIHRvIHRoZSB0YXJnZXQuXG5cdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudGFyZ2V0KTtcblxuXHRcdGlmICggb3B0aW9ucy5kaXIgPT09IDAgKSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5sdHIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5ydGwpO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy5vcnQgPT09IDAgKSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5ob3Jpem9udGFsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudmVydGljYWwpO1xuXHRcdH1cblxuXHRcdHNjb3BlX0Jhc2UgPSBhZGROb2RlVG8odGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMuYmFzZSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGFkZFRvb2x0aXAgKCBoYW5kbGUsIGhhbmRsZU51bWJlciApIHtcblxuXHRcdGlmICggIW9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWRkTm9kZVRvKGhhbmRsZS5maXJzdENoaWxkLCBvcHRpb25zLmNzc0NsYXNzZXMudG9vbHRpcCk7XG5cdH1cblxuXHQvLyBUaGUgdG9vbHRpcHMgb3B0aW9uIGlzIGEgc2hvcnRoYW5kIGZvciB1c2luZyB0aGUgJ3VwZGF0ZScgZXZlbnQuXG5cdGZ1bmN0aW9uIHRvb2x0aXBzICggKSB7XG5cblx0XHQvLyBUb29sdGlwcyBhcmUgYWRkZWQgd2l0aCBvcHRpb25zLnRvb2x0aXBzIGluIG9yaWdpbmFsIG9yZGVyLlxuXHRcdHZhciB0aXBzID0gc2NvcGVfSGFuZGxlcy5tYXAoYWRkVG9vbHRpcCk7XG5cblx0XHRiaW5kRXZlbnQoJ3VwZGF0ZScsIGZ1bmN0aW9uKHZhbHVlcywgaGFuZGxlTnVtYmVyLCB1bmVuY29kZWQpIHtcblxuXHRcdFx0aWYgKCAhdGlwc1toYW5kbGVOdW1iZXJdICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBmb3JtYXR0ZWRWYWx1ZSA9IHZhbHVlc1toYW5kbGVOdW1iZXJdO1xuXG5cdFx0XHRpZiAoIG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0Zm9ybWF0dGVkVmFsdWUgPSBvcHRpb25zLnRvb2x0aXBzW2hhbmRsZU51bWJlcl0udG8odW5lbmNvZGVkW2hhbmRsZU51bWJlcl0pO1xuXHRcdFx0fVxuXG5cdFx0XHR0aXBzW2hhbmRsZU51bWJlcl0uaW5uZXJIVE1MID0gZm9ybWF0dGVkVmFsdWU7XG5cdFx0fSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGFyaWEgKCApIHtcblxuXHRcdGJpbmRFdmVudCgndXBkYXRlJywgZnVuY3Rpb24gKCB2YWx1ZXMsIGhhbmRsZU51bWJlciwgdW5lbmNvZGVkLCB0YXAsIHBvc2l0aW9ucyApIHtcblxuXHRcdFx0Ly8gVXBkYXRlIEFyaWEgVmFsdWVzIGZvciBhbGwgaGFuZGxlcywgYXMgYSBjaGFuZ2UgaW4gb25lIGNoYW5nZXMgbWluIGFuZCBtYXggdmFsdWVzIGZvciB0aGUgbmV4dC5cblx0XHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbiggaGFuZGxlTnVtYmVyICl7XG5cblx0XHRcdFx0dmFyIGhhbmRsZSA9IHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXTtcblxuXHRcdFx0XHR2YXIgbWluID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdHZhciBtYXggPSBjaGVja0hhbmRsZVBvc2l0aW9uKHNjb3BlX0xvY2F0aW9ucywgaGFuZGxlTnVtYmVyLCAxMDAsIHRydWUsIHRydWUsIHRydWUpO1xuXG5cdFx0XHRcdHZhciBub3cgPSBwb3NpdGlvbnNbaGFuZGxlTnVtYmVyXTtcblx0XHRcdFx0dmFyIHRleHQgPSBvcHRpb25zLmFyaWFGb3JtYXQudG8odW5lbmNvZGVkW2hhbmRsZU51bWJlcl0pO1xuXG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtaW4nLCBtaW4udG9GaXhlZCgxKSk7XG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnLCBtYXgudG9GaXhlZCgxKSk7XG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCBub3cudG9GaXhlZCgxKSk7XG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0JywgdGV4dCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZ2V0R3JvdXAgKCBtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQgKSB7XG5cblx0XHQvLyBVc2UgdGhlIHJhbmdlLlxuXHRcdGlmICggbW9kZSA9PT0gJ3JhbmdlJyB8fCBtb2RlID09PSAnc3RlcHMnICkge1xuXHRcdFx0cmV0dXJuIHNjb3BlX1NwZWN0cnVtLnhWYWw7XG5cdFx0fVxuXG5cdFx0aWYgKCBtb2RlID09PSAnY291bnQnICkge1xuXG5cdFx0XHRpZiAoICF2YWx1ZXMgKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3ZhbHVlcycgcmVxdWlyZWQgZm9yIG1vZGUgJ2NvdW50Jy5cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERpdmlkZSAwIC0gMTAwIGluICdjb3VudCcgcGFydHMuXG5cdFx0XHR2YXIgc3ByZWFkID0gKCAxMDAgLyAodmFsdWVzIC0gMSkgKTtcblx0XHRcdHZhciB2O1xuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHR2YWx1ZXMgPSBbXTtcblxuXHRcdFx0Ly8gTGlzdCB0aGVzZSBwYXJ0cyBhbmQgaGF2ZSB0aGVtIGhhbmRsZWQgYXMgJ3Bvc2l0aW9ucycuXG5cdFx0XHR3aGlsZSAoICh2ID0gaSsrICogc3ByZWFkKSA8PSAxMDAgKSB7XG5cdFx0XHRcdHZhbHVlcy5wdXNoKHYpO1xuXHRcdFx0fVxuXG5cdFx0XHRtb2RlID0gJ3Bvc2l0aW9ucyc7XG5cdFx0fVxuXG5cdFx0aWYgKCBtb2RlID09PSAncG9zaXRpb25zJyApIHtcblxuXHRcdFx0Ly8gTWFwIGFsbCBwZXJjZW50YWdlcyB0byBvbi1yYW5nZSB2YWx1ZXMuXG5cdFx0XHRyZXR1cm4gdmFsdWVzLm1hcChmdW5jdGlvbiggdmFsdWUgKXtcblx0XHRcdFx0cmV0dXJuIHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyggc3RlcHBlZCA/IHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAoIHZhbHVlICkgOiB2YWx1ZSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCBtb2RlID09PSAndmFsdWVzJyApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHZhbHVlIG11c3QgYmUgc3RlcHBlZCwgaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGVyY2VudGFnZSBmaXJzdC5cblx0XHRcdGlmICggc3RlcHBlZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzLm1hcChmdW5jdGlvbiggdmFsdWUgKXtcblxuXHRcdFx0XHRcdC8vIENvbnZlcnQgdG8gcGVyY2VudGFnZSwgYXBwbHkgc3RlcCwgcmV0dXJuIHRvIHZhbHVlLlxuXHRcdFx0XHRcdHJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoIHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAoIHNjb3BlX1NwZWN0cnVtLnRvU3RlcHBpbmcoIHZhbHVlICkgKSApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UsIHdlIGNhbiBzaW1wbHkgdXNlIHRoZSB2YWx1ZXMuXG5cdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlU3ByZWFkICggZGVuc2l0eSwgbW9kZSwgZ3JvdXAgKSB7XG5cblx0XHRmdW5jdGlvbiBzYWZlSW5jcmVtZW50KHZhbHVlLCBpbmNyZW1lbnQpIHtcblx0XHRcdC8vIEF2b2lkIGZsb2F0aW5nIHBvaW50IHZhcmlhbmNlIGJ5IGRyb3BwaW5nIHRoZSBzbWFsbGVzdCBkZWNpbWFsIHBsYWNlcy5cblx0XHRcdHJldHVybiAodmFsdWUgKyBpbmNyZW1lbnQpLnRvRml4ZWQoNykgLyAxO1xuXHRcdH1cblxuXHRcdHZhciBpbmRleGVzID0ge307XG5cdFx0dmFyIGZpcnN0SW5SYW5nZSA9IHNjb3BlX1NwZWN0cnVtLnhWYWxbMF07XG5cdFx0dmFyIGxhc3RJblJhbmdlID0gc2NvcGVfU3BlY3RydW0ueFZhbFtzY29wZV9TcGVjdHJ1bS54VmFsLmxlbmd0aC0xXTtcblx0XHR2YXIgaWdub3JlRmlyc3QgPSBmYWxzZTtcblx0XHR2YXIgaWdub3JlTGFzdCA9IGZhbHNlO1xuXHRcdHZhciBwcmV2UGN0ID0gMDtcblxuXHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGdyb3VwLCBzb3J0IGl0IGFuZCBmaWx0ZXIgYXdheSBhbGwgZHVwbGljYXRlcy5cblx0XHRncm91cCA9IHVuaXF1ZShncm91cC5zbGljZSgpLnNvcnQoZnVuY3Rpb24oYSwgYil7IHJldHVybiBhIC0gYjsgfSkpO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSByYW5nZSBzdGFydHMgd2l0aCB0aGUgZmlyc3QgZWxlbWVudC5cblx0XHRpZiAoIGdyb3VwWzBdICE9PSBmaXJzdEluUmFuZ2UgKSB7XG5cdFx0XHRncm91cC51bnNoaWZ0KGZpcnN0SW5SYW5nZSk7XG5cdFx0XHRpZ25vcmVGaXJzdCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gTGlrZXdpc2UgZm9yIHRoZSBsYXN0IG9uZS5cblx0XHRpZiAoIGdyb3VwW2dyb3VwLmxlbmd0aCAtIDFdICE9PSBsYXN0SW5SYW5nZSApIHtcblx0XHRcdGdyb3VwLnB1c2gobGFzdEluUmFuZ2UpO1xuXHRcdFx0aWdub3JlTGFzdCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Z3JvdXAuZm9yRWFjaChmdW5jdGlvbiAoIGN1cnJlbnQsIGluZGV4ICkge1xuXG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgc3RlcCBhbmQgdGhlIGxvd2VyICsgdXBwZXIgcG9zaXRpb25zLlxuXHRcdFx0dmFyIHN0ZXA7XG5cdFx0XHR2YXIgaTtcblx0XHRcdHZhciBxO1xuXHRcdFx0dmFyIGxvdyA9IGN1cnJlbnQ7XG5cdFx0XHR2YXIgaGlnaCA9IGdyb3VwW2luZGV4KzFdO1xuXHRcdFx0dmFyIG5ld1BjdDtcblx0XHRcdHZhciBwY3REaWZmZXJlbmNlO1xuXHRcdFx0dmFyIHBjdFBvcztcblx0XHRcdHZhciB0eXBlO1xuXHRcdFx0dmFyIHN0ZXBzO1xuXHRcdFx0dmFyIHJlYWxTdGVwcztcblx0XHRcdHZhciBzdGVwc2l6ZTtcblxuXHRcdFx0Ly8gV2hlbiB1c2luZyAnc3RlcHMnIG1vZGUsIHVzZSB0aGUgcHJvdmlkZWQgc3RlcHMuXG5cdFx0XHQvLyBPdGhlcndpc2UsIHdlJ2xsIHN0ZXAgb24gdG8gdGhlIG5leHQgc3VicmFuZ2UuXG5cdFx0XHRpZiAoIG1vZGUgPT09ICdzdGVwcycgKSB7XG5cdFx0XHRcdHN0ZXAgPSBzY29wZV9TcGVjdHJ1bS54TnVtU3RlcHNbIGluZGV4IF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlZmF1bHQgdG8gYSAnZnVsbCcgc3RlcC5cblx0XHRcdGlmICggIXN0ZXAgKSB7XG5cdFx0XHRcdHN0ZXAgPSBoaWdoLWxvdztcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG93IGNhbiBiZSAwLCBzbyB0ZXN0IGZvciBmYWxzZS4gSWYgaGlnaCBpcyB1bmRlZmluZWQsXG5cdFx0XHQvLyB3ZSBhcmUgYXQgdGhlIGxhc3Qgc3VicmFuZ2UuIEluZGV4IDAgaXMgYWxyZWFkeSBoYW5kbGVkLlxuXHRcdFx0aWYgKCBsb3cgPT09IGZhbHNlIHx8IGhpZ2ggPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgc3RlcCBpc24ndCAwLCB3aGljaCB3b3VsZCBjYXVzZSBhbiBpbmZpbml0ZSBsb29wICgjNjU0KVxuXHRcdFx0c3RlcCA9IE1hdGgubWF4KHN0ZXAsIDAuMDAwMDAwMSk7XG5cblx0XHRcdC8vIEZpbmQgYWxsIHN0ZXBzIGluIHRoZSBzdWJyYW5nZS5cblx0XHRcdGZvciAoIGkgPSBsb3c7IGkgPD0gaGlnaDsgaSA9IHNhZmVJbmNyZW1lbnQoaSwgc3RlcCkgKSB7XG5cblx0XHRcdFx0Ly8gR2V0IHRoZSBwZXJjZW50YWdlIHZhbHVlIGZvciB0aGUgY3VycmVudCBzdGVwLFxuXHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIHRoZSBzdWJyYW5nZS5cblx0XHRcdFx0bmV3UGN0ID0gc2NvcGVfU3BlY3RydW0udG9TdGVwcGluZyggaSApO1xuXHRcdFx0XHRwY3REaWZmZXJlbmNlID0gbmV3UGN0IC0gcHJldlBjdDtcblxuXHRcdFx0XHRzdGVwcyA9IHBjdERpZmZlcmVuY2UgLyBkZW5zaXR5O1xuXHRcdFx0XHRyZWFsU3RlcHMgPSBNYXRoLnJvdW5kKHN0ZXBzKTtcblxuXHRcdFx0XHQvLyBUaGlzIHJhdGlvIHJlcHJlc2VudHMgdGhlIGFtbW91bnQgb2YgcGVyY2VudGFnZS1zcGFjZSBhIHBvaW50IGluZGljYXRlcy5cblx0XHRcdFx0Ly8gRm9yIGEgZGVuc2l0eSAxIHRoZSBwb2ludHMvcGVyY2VudGFnZSA9IDEuIEZvciBkZW5zaXR5IDIsIHRoYXQgcGVyY2VudGFnZSBuZWVkcyB0byBiZSByZS1kZXZpZGVkLlxuXHRcdFx0XHQvLyBSb3VuZCB0aGUgcGVyY2VudGFnZSBvZmZzZXQgdG8gYW4gZXZlbiBudW1iZXIsIHRoZW4gZGl2aWRlIGJ5IHR3b1xuXHRcdFx0XHQvLyB0byBzcHJlYWQgdGhlIG9mZnNldCBvbiBib3RoIHNpZGVzIG9mIHRoZSByYW5nZS5cblx0XHRcdFx0c3RlcHNpemUgPSBwY3REaWZmZXJlbmNlL3JlYWxTdGVwcztcblxuXHRcdFx0XHQvLyBEaXZpZGUgYWxsIHBvaW50cyBldmVubHksIGFkZGluZyB0aGUgY29ycmVjdCBudW1iZXIgdG8gdGhpcyBzdWJyYW5nZS5cblx0XHRcdFx0Ly8gUnVuIHVwIHRvIDw9IHNvIHRoYXQgMTAwJSBnZXRzIGEgcG9pbnQsIGV2ZW50IGlmIGlnbm9yZUxhc3QgaXMgc2V0LlxuXHRcdFx0XHRmb3IgKCBxID0gMTsgcSA8PSByZWFsU3RlcHM7IHEgKz0gMSApIHtcblxuXHRcdFx0XHRcdC8vIFRoZSByYXRpbyBiZXR3ZWVuIHRoZSByb3VuZGVkIHZhbHVlIGFuZCB0aGUgYWN0dWFsIHNpemUgbWlnaHQgYmUgfjElIG9mZi5cblx0XHRcdFx0XHQvLyBDb3JyZWN0IHRoZSBwZXJjZW50YWdlIG9mZnNldCBieSB0aGUgbnVtYmVyIG9mIHBvaW50c1xuXHRcdFx0XHRcdC8vIHBlciBzdWJyYW5nZS4gZGVuc2l0eSA9IDEgd2lsbCByZXN1bHQgaW4gMTAwIHBvaW50cyBvbiB0aGVcblx0XHRcdFx0XHQvLyBmdWxsIHJhbmdlLCAyIGZvciA1MCwgNCBmb3IgMjUsIGV0Yy5cblx0XHRcdFx0XHRwY3RQb3MgPSBwcmV2UGN0ICsgKCBxICogc3RlcHNpemUgKTtcblx0XHRcdFx0XHRpbmRleGVzW3BjdFBvcy50b0ZpeGVkKDUpXSA9IFsneCcsIDBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIHRoZSBwb2ludCB0eXBlLlxuXHRcdFx0XHR0eXBlID0gKGdyb3VwLmluZGV4T2YoaSkgPiAtMSkgPyAxIDogKCBtb2RlID09PSAnc3RlcHMnID8gMiA6IDAgKTtcblxuXHRcdFx0XHQvLyBFbmZvcmNlIHRoZSAnaWdub3JlRmlyc3QnIG9wdGlvbiBieSBvdmVyd3JpdGluZyB0aGUgdHlwZSBmb3IgMC5cblx0XHRcdFx0aWYgKCAhaW5kZXggJiYgaWdub3JlRmlyc3QgKSB7XG5cdFx0XHRcdFx0dHlwZSA9IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICEoaSA9PT0gaGlnaCAmJiBpZ25vcmVMYXN0KSkge1xuXHRcdFx0XHRcdC8vIE1hcmsgdGhlICd0eXBlJyBvZiB0aGlzIHBvaW50LiAwID0gcGxhaW4sIDEgPSByZWFsIHZhbHVlLCAyID0gc3RlcCB2YWx1ZS5cblx0XHRcdFx0XHRpbmRleGVzW25ld1BjdC50b0ZpeGVkKDUpXSA9IFtpLCB0eXBlXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgcGVyY2VudGFnZSBjb3VudC5cblx0XHRcdFx0cHJldlBjdCA9IG5ld1BjdDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBpbmRleGVzO1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTWFya2luZyAoIHNwcmVhZCwgZmlsdGVyRnVuYywgZm9ybWF0dGVyICkge1xuXG5cdFx0dmFyIGVsZW1lbnQgPSBzY29wZV9Eb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuXHRcdHZhciB2YWx1ZVNpemVDbGFzc2VzID0gW1xuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlTm9ybWFsLFxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlTGFyZ2UsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVTdWJcblx0XHRdO1xuXHRcdHZhciBtYXJrZXJTaXplQ2xhc3NlcyA9IFtcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJOb3JtYWwsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyTGFyZ2UsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyU3ViXG5cdFx0XTtcblx0XHR2YXIgdmFsdWVPcmllbnRhdGlvbkNsYXNzZXMgPSBbXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVIb3Jpem9udGFsLFxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlVmVydGljYWxcblx0XHRdO1xuXHRcdHZhciBtYXJrZXJPcmllbnRhdGlvbkNsYXNzZXMgPSBbXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMubWFya2VySG9yaXpvbnRhbCxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJWZXJ0aWNhbFxuXHRcdF07XG5cblx0XHRhZGRDbGFzcyhlbGVtZW50LCBvcHRpb25zLmNzc0NsYXNzZXMucGlwcyk7XG5cdFx0YWRkQ2xhc3MoZWxlbWVudCwgb3B0aW9ucy5vcnQgPT09IDAgPyBvcHRpb25zLmNzc0NsYXNzZXMucGlwc0hvcml6b250YWwgOiBvcHRpb25zLmNzc0NsYXNzZXMucGlwc1ZlcnRpY2FsKTtcblxuXHRcdGZ1bmN0aW9uIGdldENsYXNzZXMoIHR5cGUsIHNvdXJjZSApe1xuXHRcdFx0dmFyIGEgPSBzb3VyY2UgPT09IG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZTtcblx0XHRcdHZhciBvcmllbnRhdGlvbkNsYXNzZXMgPSBhID8gdmFsdWVPcmllbnRhdGlvbkNsYXNzZXMgOiBtYXJrZXJPcmllbnRhdGlvbkNsYXNzZXM7XG5cdFx0XHR2YXIgc2l6ZUNsYXNzZXMgPSBhID8gdmFsdWVTaXplQ2xhc3NlcyA6IG1hcmtlclNpemVDbGFzc2VzO1xuXG5cdFx0XHRyZXR1cm4gc291cmNlICsgJyAnICsgb3JpZW50YXRpb25DbGFzc2VzW29wdGlvbnMub3J0XSArICcgJyArIHNpemVDbGFzc2VzW3R5cGVdO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGFkZFNwcmVhZCAoIG9mZnNldCwgdmFsdWVzICl7XG5cblx0XHRcdC8vIEFwcGx5IHRoZSBmaWx0ZXIgZnVuY3Rpb24sIGlmIGl0IGlzIHNldC5cblx0XHRcdHZhbHVlc1sxXSA9ICh2YWx1ZXNbMV0gJiYgZmlsdGVyRnVuYykgPyBmaWx0ZXJGdW5jKHZhbHVlc1swXSwgdmFsdWVzWzFdKSA6IHZhbHVlc1sxXTtcblxuXHRcdFx0Ly8gQWRkIGEgbWFya2VyIGZvciBldmVyeSBwb2ludFxuXHRcdFx0dmFyIG5vZGUgPSBhZGROb2RlVG8oZWxlbWVudCwgZmFsc2UpO1xuXHRcdFx0XHRub2RlLmNsYXNzTmFtZSA9IGdldENsYXNzZXModmFsdWVzWzFdLCBvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyKTtcblx0XHRcdFx0bm9kZS5zdHlsZVtvcHRpb25zLnN0eWxlXSA9IG9mZnNldCArICclJztcblxuXHRcdFx0Ly8gVmFsdWVzIGFyZSBvbmx5IGFwcGVuZGVkIGZvciBwb2ludHMgbWFya2VkICcxJyBvciAnMicuXG5cdFx0XHRpZiAoIHZhbHVlc1sxXSApIHtcblx0XHRcdFx0bm9kZSA9IGFkZE5vZGVUbyhlbGVtZW50LCBmYWxzZSk7XG5cdFx0XHRcdG5vZGUuY2xhc3NOYW1lID0gZ2V0Q2xhc3Nlcyh2YWx1ZXNbMV0sIG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZSk7XG5cdFx0XHRcdG5vZGUuc3R5bGVbb3B0aW9ucy5zdHlsZV0gPSBvZmZzZXQgKyAnJSc7XG5cdFx0XHRcdG5vZGUuaW5uZXJUZXh0ID0gZm9ybWF0dGVyLnRvKHZhbHVlc1swXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQXBwZW5kIGFsbCBwb2ludHMuXG5cdFx0T2JqZWN0LmtleXMoc3ByZWFkKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe1xuXHRcdFx0YWRkU3ByZWFkKGEsIHNwcmVhZFthXSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gZWxlbWVudDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZVBpcHMgKCApIHtcblx0XHRpZiAoIHNjb3BlX1BpcHMgKSB7XG5cdFx0XHRyZW1vdmVFbGVtZW50KHNjb3BlX1BpcHMpO1xuXHRcdFx0c2NvcGVfUGlwcyA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gcGlwcyAoIGdyaWQgKSB7XG5cblx0XHQvLyBGaXggIzY2OVxuXHRcdHJlbW92ZVBpcHMoKTtcblxuXHRcdHZhciBtb2RlID0gZ3JpZC5tb2RlO1xuXHRcdHZhciBkZW5zaXR5ID0gZ3JpZC5kZW5zaXR5IHx8IDE7XG5cdFx0dmFyIGZpbHRlciA9IGdyaWQuZmlsdGVyIHx8IGZhbHNlO1xuXHRcdHZhciB2YWx1ZXMgPSBncmlkLnZhbHVlcyB8fCBmYWxzZTtcblx0XHR2YXIgc3RlcHBlZCA9IGdyaWQuc3RlcHBlZCB8fCBmYWxzZTtcblx0XHR2YXIgZ3JvdXAgPSBnZXRHcm91cCggbW9kZSwgdmFsdWVzLCBzdGVwcGVkICk7XG5cdFx0dmFyIHNwcmVhZCA9IGdlbmVyYXRlU3ByZWFkKCBkZW5zaXR5LCBtb2RlLCBncm91cCApO1xuXHRcdHZhciBmb3JtYXQgPSBncmlkLmZvcm1hdCB8fCB7XG5cdFx0XHR0bzogTWF0aC5yb3VuZFxuXHRcdH07XG5cblx0XHRzY29wZV9QaXBzID0gc2NvcGVfVGFyZ2V0LmFwcGVuZENoaWxkKGFkZE1hcmtpbmcoXG5cdFx0XHRzcHJlYWQsXG5cdFx0XHRmaWx0ZXIsXG5cdFx0XHRmb3JtYXRcblx0XHQpKTtcblxuXHRcdHJldHVybiBzY29wZV9QaXBzO1xuXHR9XG5cblxuXHQvLyBTaG9ydGhhbmQgZm9yIGJhc2UgZGltZW5zaW9ucy5cblx0ZnVuY3Rpb24gYmFzZVNpemUgKCApIHtcblx0XHR2YXIgcmVjdCA9IHNjb3BlX0Jhc2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGFsdCA9ICdvZmZzZXQnICsgWydXaWR0aCcsICdIZWlnaHQnXVtvcHRpb25zLm9ydF07XG5cdFx0cmV0dXJuIG9wdGlvbnMub3J0ID09PSAwID8gKHJlY3Qud2lkdGh8fHNjb3BlX0Jhc2VbYWx0XSkgOiAocmVjdC5oZWlnaHR8fHNjb3BlX0Jhc2VbYWx0XSk7XG5cdH1cblxuXHQvLyBIYW5kbGVyIGZvciBhdHRhY2hpbmcgZXZlbnRzIHRyb3VnaCBhIHByb3h5LlxuXHRmdW5jdGlvbiBhdHRhY2hFdmVudCAoIGV2ZW50cywgZWxlbWVudCwgY2FsbGJhY2ssIGRhdGEgKSB7XG5cblx0XHQvLyBUaGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvICdmaWx0ZXInIGV2ZW50cyB0byB0aGUgc2xpZGVyLlxuXHRcdC8vIGVsZW1lbnQgaXMgYSBub2RlLCBub3QgYSBub2RlTGlzdFxuXG5cdFx0dmFyIG1ldGhvZCA9IGZ1bmN0aW9uICggZSApe1xuXG5cdFx0XHRpZiAoIHNjb3BlX1RhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RvcCBpZiBhbiBhY3RpdmUgJ3RhcCcgdHJhbnNpdGlvbiBpcyB0YWtpbmcgcGxhY2UuXG5cdFx0XHRpZiAoIGhhc0NsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCkgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0ZSA9IGZpeEV2ZW50KGUsIGRhdGEucGFnZU9mZnNldCwgZGF0YS50YXJnZXQgfHwgZWxlbWVudCk7XG5cblx0XHRcdC8vIEhhbmRsZSByZWplY3Qgb2YgbXVsdGl0b3VjaFxuXHRcdFx0aWYgKCAhZSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZ25vcmUgcmlnaHQgb3IgbWlkZGxlIGNsaWNrcyBvbiBzdGFydCAjNDU0XG5cdFx0XHRpZiAoIGV2ZW50cyA9PT0gYWN0aW9ucy5zdGFydCAmJiBlLmJ1dHRvbnMgIT09IHVuZGVmaW5lZCAmJiBlLmJ1dHRvbnMgPiAxICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElnbm9yZSByaWdodCBvciBtaWRkbGUgY2xpY2tzIG9uIHN0YXJ0ICM0NTRcblx0XHRcdGlmICggZGF0YS5ob3ZlciAmJiBlLmJ1dHRvbnMgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gJ3N1cHBvcnRzUGFzc2l2ZScgaXMgb25seSB0cnVlIGlmIGEgYnJvd3NlciBhbHNvIHN1cHBvcnRzIHRvdWNoLWFjdGlvbjogbm9uZSBpbiBDU1MuXG5cdFx0XHQvLyBpT1Mgc2FmYXJpIGRvZXMgbm90LCBzbyBpdCBkb2Vzbid0IGdldCB0byBiZW5lZml0IGZyb20gcGFzc2l2ZSBzY3JvbGxpbmcuIGlPUyBkb2VzIHN1cHBvcnRcblx0XHRcdC8vIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uLCBidXQgdGhhdCBhbGxvd3MgcGFubmluZywgd2hpY2ggYnJlYWtzXG5cdFx0XHQvLyBzbGlkZXJzIGFmdGVyIHpvb21pbmcvb24gbm9uLXJlc3BvbnNpdmUgcGFnZXMuXG5cdFx0XHQvLyBTZWU6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzMxMTJcblx0XHRcdGlmICggIXN1cHBvcnRzUGFzc2l2ZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRlLmNhbGNQb2ludCA9IGUucG9pbnRzWyBvcHRpb25zLm9ydCBdO1xuXG5cdFx0XHQvLyBDYWxsIHRoZSBldmVudCBoYW5kbGVyIHdpdGggdGhlIGV2ZW50IFsgYW5kIGFkZGl0aW9uYWwgZGF0YSBdLlxuXHRcdFx0Y2FsbGJhY2sgKCBlLCBkYXRhICk7XG5cdFx0fTtcblxuXHRcdHZhciBtZXRob2RzID0gW107XG5cblx0XHQvLyBCaW5kIGEgY2xvc3VyZSBvbiB0aGUgdGFyZ2V0IGZvciBldmVyeSBldmVudCB0eXBlLlxuXHRcdGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24oIGV2ZW50TmFtZSApe1xuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbWV0aG9kLCBzdXBwb3J0c1Bhc3NpdmUgPyB7IHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlKTtcblx0XHRcdG1ldGhvZHMucHVzaChbZXZlbnROYW1lLCBtZXRob2RdKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBtZXRob2RzO1xuXHR9XG5cblx0Ly8gUHJvdmlkZSBhIGNsZWFuIGV2ZW50IHdpdGggc3RhbmRhcmRpemVkIG9mZnNldCB2YWx1ZXMuXG5cdGZ1bmN0aW9uIGZpeEV2ZW50ICggZSwgcGFnZU9mZnNldCwgdGFyZ2V0ICkge1xuXG5cdFx0Ly8gRmlsdGVyIHRoZSBldmVudCB0byByZWdpc3RlciB0aGUgdHlwZSwgd2hpY2ggY2FuIGJlXG5cdFx0Ly8gdG91Y2gsIG1vdXNlIG9yIHBvaW50ZXIuIE9mZnNldCBjaGFuZ2VzIG5lZWQgdG8gYmVcblx0XHQvLyBtYWRlIG9uIGFuIGV2ZW50IHNwZWNpZmljIGJhc2lzLlxuXHRcdHZhciB0b3VjaCA9IGUudHlwZS5pbmRleE9mKCd0b3VjaCcpID09PSAwO1xuXHRcdHZhciBtb3VzZSA9IGUudHlwZS5pbmRleE9mKCdtb3VzZScpID09PSAwO1xuXHRcdHZhciBwb2ludGVyID0gZS50eXBlLmluZGV4T2YoJ3BvaW50ZXInKSA9PT0gMDtcblxuXHRcdHZhciB4O1xuXHRcdHZhciB5O1xuXG5cdFx0Ly8gSUUxMCBpbXBsZW1lbnRlZCBwb2ludGVyIGV2ZW50cyB3aXRoIGEgcHJlZml4O1xuXHRcdGlmICggZS50eXBlLmluZGV4T2YoJ01TUG9pbnRlcicpID09PSAwICkge1xuXHRcdFx0cG9pbnRlciA9IHRydWU7XG5cdFx0fVxuXG5cblx0XHQvLyBJbiB0aGUgZXZlbnQgdGhhdCBtdWx0aXRvdWNoIGlzIGFjdGl2YXRlZCwgdGhlIG9ubHkgdGhpbmcgb25lIGhhbmRsZSBzaG91bGQgYmUgY29uY2VybmVkXG5cdFx0Ly8gYWJvdXQgaXMgdGhlIHRvdWNoZXMgdGhhdCBvcmlnaW5hdGVkIG9uIHRvcCBvZiBpdC5cblx0XHRpZiAoIHRvdWNoICYmIG9wdGlvbnMubXVsdGl0b3VjaCApIHtcblx0XHRcdC8vIFJldHVybnMgdHJ1ZSBpZiBhIHRvdWNoIG9yaWdpbmF0ZWQgb24gdGhlIHRhcmdldC5cblx0XHRcdHZhciBpc1RvdWNoT25UYXJnZXQgPSBmdW5jdGlvbiAodG91Y2gpIHtcblx0XHRcdFx0cmV0dXJuIHRvdWNoLnRhcmdldCA9PT0gdGFyZ2V0IHx8IHRhcmdldC5jb250YWlucyh0b3VjaC50YXJnZXQpO1xuXHRcdFx0fTtcblx0XHRcdC8vIEluIHRoZSBjYXNlIG9mIHRvdWNoc3RhcnQgZXZlbnRzLCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGVyZSBpcyBzdGlsbCBubyBtb3JlIHRoYW4gb25lXG5cdFx0XHQvLyB0b3VjaCBvbiB0aGUgdGFyZ2V0IHNvIHdlIGxvb2sgYW1vbmdzdCBhbGwgdG91Y2hlcy5cblx0XHRcdGlmIChlLnR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xuXHRcdFx0XHR2YXIgdGFyZ2V0VG91Y2hlcyA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChlLnRvdWNoZXMsIGlzVG91Y2hPblRhcmdldCk7XG5cdFx0XHRcdC8vIERvIG5vdCBzdXBwb3J0IG1vcmUgdGhhbiBvbmUgdG91Y2ggcGVyIGhhbmRsZS5cblx0XHRcdFx0aWYgKCB0YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHggPSB0YXJnZXRUb3VjaGVzWzBdLnBhZ2VYO1xuXHRcdFx0XHR5ID0gdGFyZ2V0VG91Y2hlc1swXS5wYWdlWTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBJbiB0aGUgb3RoZXIgY2FzZXMsIGZpbmQgb24gY2hhbmdlZFRvdWNoZXMgaXMgZW5vdWdoLlxuXHRcdFx0XHR2YXIgdGFyZ2V0VG91Y2ggPSBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKGUuY2hhbmdlZFRvdWNoZXMsIGlzVG91Y2hPblRhcmdldCk7XG5cdFx0XHRcdC8vIENhbmNlbCBpZiB0aGUgdGFyZ2V0IHRvdWNoIGhhcyBub3QgbW92ZWQuXG5cdFx0XHRcdGlmICggIXRhcmdldFRvdWNoICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHR4ID0gdGFyZ2V0VG91Y2gucGFnZVg7XG5cdFx0XHRcdHkgPSB0YXJnZXRUb3VjaC5wYWdlWTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKCB0b3VjaCApIHtcblx0XHRcdC8vIEZpeCBidWcgd2hlbiB1c2VyIHRvdWNoZXMgd2l0aCB0d28gb3IgbW9yZSBmaW5nZXJzIG9uIG1vYmlsZSBkZXZpY2VzLlxuXHRcdFx0Ly8gSXQncyB1c2VmdWwgd2hlbiB5b3UgaGF2ZSB0d28gb3IgbW9yZSBzbGlkZXJzIG9uIG9uZSBwYWdlLFxuXHRcdFx0Ly8gdGhhdCBjYW4gYmUgdG91Y2hlZCBzaW11bHRhbmVvdXNseS5cblx0XHRcdC8vICM2NDksICM2NjMsICM2Njhcblx0XHRcdGlmICggZS50b3VjaGVzLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gbm9VaVNsaWRlciBzdXBwb3J0cyBvbmUgbW92ZW1lbnQgYXQgYSB0aW1lLFxuXHRcdFx0Ly8gc28gd2UgY2FuIHNlbGVjdCB0aGUgZmlyc3QgJ2NoYW5nZWRUb3VjaCcuXG5cdFx0XHR4ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcblx0XHRcdHkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZO1xuXHRcdH1cblxuXHRcdHBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0IHx8IGdldFBhZ2VPZmZzZXQoc2NvcGVfRG9jdW1lbnQpO1xuXG5cdFx0aWYgKCBtb3VzZSB8fCBwb2ludGVyICkge1xuXHRcdFx0eCA9IGUuY2xpZW50WCArIHBhZ2VPZmZzZXQueDtcblx0XHRcdHkgPSBlLmNsaWVudFkgKyBwYWdlT2Zmc2V0Lnk7XG5cdFx0fVxuXG5cdFx0ZS5wYWdlT2Zmc2V0ID0gcGFnZU9mZnNldDtcblx0XHRlLnBvaW50cyA9IFt4LCB5XTtcblx0XHRlLmN1cnNvciA9IG1vdXNlIHx8IHBvaW50ZXI7IC8vIEZpeCAjNDM1XG5cblx0XHRyZXR1cm4gZTtcblx0fVxuXG5cdC8vIFRyYW5zbGF0ZSBhIGNvb3JkaW5hdGUgaW4gdGhlIGRvY3VtZW50IHRvIGEgcGVyY2VudGFnZSBvbiB0aGUgc2xpZGVyXG5cdGZ1bmN0aW9uIGNhbGNQb2ludFRvUGVyY2VudGFnZSAoIGNhbGNQb2ludCApIHtcblx0XHR2YXIgbG9jYXRpb24gPSBjYWxjUG9pbnQgLSBvZmZzZXQoc2NvcGVfQmFzZSwgb3B0aW9ucy5vcnQpO1xuXHRcdHZhciBwcm9wb3NhbCA9ICggbG9jYXRpb24gKiAxMDAgKSAvIGJhc2VTaXplKCk7XG5cdFx0cmV0dXJuIG9wdGlvbnMuZGlyID8gMTAwIC0gcHJvcG9zYWwgOiBwcm9wb3NhbDtcblx0fVxuXG5cdC8vIEZpbmQgaGFuZGxlIGNsb3Nlc3QgdG8gYSBjZXJ0YWluIHBlcmNlbnRhZ2Ugb24gdGhlIHNsaWRlclxuXHRmdW5jdGlvbiBnZXRDbG9zZXN0SGFuZGxlICggcHJvcG9zYWwgKSB7XG5cblx0XHR2YXIgY2xvc2VzdCA9IDEwMDtcblx0XHR2YXIgaGFuZGxlTnVtYmVyID0gZmFsc2U7XG5cblx0XHRzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlLCBpbmRleCl7XG5cblx0XHRcdC8vIERpc2FibGVkIGhhbmRsZXMgYXJlIGlnbm9yZWRcblx0XHRcdGlmICggaGFuZGxlLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcG9zID0gTWF0aC5hYnMoc2NvcGVfTG9jYXRpb25zW2luZGV4XSAtIHByb3Bvc2FsKTtcblxuXHRcdFx0aWYgKCBwb3MgPCBjbG9zZXN0ICkge1xuXHRcdFx0XHRoYW5kbGVOdW1iZXIgPSBpbmRleDtcblx0XHRcdFx0Y2xvc2VzdCA9IHBvcztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBoYW5kbGVOdW1iZXI7XG5cdH1cblxuXHQvLyBNb3ZlcyBoYW5kbGUocykgYnkgYSBwZXJjZW50YWdlXG5cdC8vIChib29sLCAlIHRvIG1vdmUsIFslIHdoZXJlIGhhbmRsZSBzdGFydGVkLCAuLi5dLCBbaW5kZXggaW4gc2NvcGVfSGFuZGxlcywgLi4uXSlcblx0ZnVuY3Rpb24gbW92ZUhhbmRsZXMgKCB1cHdhcmQsIHByb3Bvc2FsLCBsb2NhdGlvbnMsIGhhbmRsZU51bWJlcnMgKSB7XG5cblx0XHR2YXIgcHJvcG9zYWxzID0gbG9jYXRpb25zLnNsaWNlKCk7XG5cblx0XHR2YXIgYiA9IFshdXB3YXJkLCB1cHdhcmRdO1xuXHRcdHZhciBmID0gW3Vwd2FyZCwgIXVwd2FyZF07XG5cblx0XHQvLyBDb3B5IGhhbmRsZU51bWJlcnMgc28gd2UgZG9uJ3QgY2hhbmdlIHRoZSBkYXRhc2V0XG5cdFx0aGFuZGxlTnVtYmVycyA9IGhhbmRsZU51bWJlcnMuc2xpY2UoKTtcblxuXHRcdC8vIENoZWNrIHRvIHNlZSB3aGljaCBoYW5kbGUgaXMgJ2xlYWRpbmcnLlxuXHRcdC8vIElmIHRoYXQgb25lIGNhbid0IG1vdmUgdGhlIHNlY29uZCBjYW4ndCBlaXRoZXIuXG5cdFx0aWYgKCB1cHdhcmQgKSB7XG5cdFx0XHRoYW5kbGVOdW1iZXJzLnJldmVyc2UoKTtcblx0XHR9XG5cblx0XHQvLyBTdGVwIDE6IGdldCB0aGUgbWF4aW11bSBwZXJjZW50YWdlIHRoYXQgYW55IG9mIHRoZSBoYW5kbGVzIGNhbiBtb3ZlXG5cdFx0aWYgKCBoYW5kbGVOdW1iZXJzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIsIG8pIHtcblxuXHRcdFx0XHR2YXIgdG8gPSBjaGVja0hhbmRsZVBvc2l0aW9uKHByb3Bvc2FscywgaGFuZGxlTnVtYmVyLCBwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXSArIHByb3Bvc2FsLCBiW29dLCBmW29dLCBmYWxzZSk7XG5cblx0XHRcdFx0Ly8gU3RvcCBpZiBvbmUgb2YgdGhlIGhhbmRsZXMgY2FuJ3QgbW92ZS5cblx0XHRcdFx0aWYgKCB0byA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0cHJvcG9zYWwgPSAwO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHByb3Bvc2FsID0gdG8gLSBwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXTtcblx0XHRcdFx0XHRwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXSA9IHRvO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBJZiB1c2luZyBvbmUgaGFuZGxlLCBjaGVjayBiYWNrd2FyZCBBTkQgZm9yd2FyZFxuXHRcdGVsc2Uge1xuXHRcdFx0YiA9IGYgPSBbdHJ1ZV07XG5cdFx0fVxuXG5cdFx0dmFyIHN0YXRlID0gZmFsc2U7XG5cblx0XHQvLyBTdGVwIDI6IFRyeSB0byBzZXQgdGhlIGhhbmRsZXMgd2l0aCB0aGUgZm91bmQgcGVyY2VudGFnZVxuXHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIsIG8pIHtcblx0XHRcdHN0YXRlID0gc2V0SGFuZGxlKGhhbmRsZU51bWJlciwgbG9jYXRpb25zW2hhbmRsZU51bWJlcl0gKyBwcm9wb3NhbCwgYltvXSwgZltvXSkgfHwgc3RhdGU7XG5cdFx0fSk7XG5cblx0XHQvLyBTdGVwIDM6IElmIGEgaGFuZGxlIG1vdmVkLCBmaXJlIGV2ZW50c1xuXHRcdGlmICggc3RhdGUgKSB7XG5cdFx0XHRoYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblx0XHRcdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0XHRmaXJlRXZlbnQoJ3NsaWRlJywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIEV4dGVybmFsIGV2ZW50IGhhbmRsaW5nXG5cdGZ1bmN0aW9uIGZpcmVFdmVudCAoIGV2ZW50TmFtZSwgaGFuZGxlTnVtYmVyLCB0YXAgKSB7XG5cblx0XHRPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIHRhcmdldEV2ZW50ICkge1xuXG5cdFx0XHR2YXIgZXZlbnRUeXBlID0gdGFyZ2V0RXZlbnQuc3BsaXQoJy4nKVswXTtcblxuXHRcdFx0aWYgKCBldmVudE5hbWUgPT09IGV2ZW50VHlwZSApIHtcblx0XHRcdFx0c2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoXG5cdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNsaWRlciBwdWJsaWMgQVBJIGFzIHRoZSBzY29wZSAoJ3RoaXMnKVxuXHRcdFx0XHRcdFx0c2NvcGVfU2VsZixcblx0XHRcdFx0XHRcdC8vIFJldHVybiB2YWx1ZXMgYXMgYXJyYXksIHNvIGFyZ18xW2FyZ18yXSBpcyBhbHdheXMgdmFsaWQuXG5cdFx0XHRcdFx0XHRzY29wZV9WYWx1ZXMubWFwKG9wdGlvbnMuZm9ybWF0LnRvKSxcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBpbmRleCwgMCBvciAxXG5cdFx0XHRcdFx0XHRoYW5kbGVOdW1iZXIsXG5cdFx0XHRcdFx0XHQvLyBVbmZvcm1hdHRlZCBzbGlkZXIgdmFsdWVzXG5cdFx0XHRcdFx0XHRzY29wZV9WYWx1ZXMuc2xpY2UoKSxcblx0XHRcdFx0XHRcdC8vIEV2ZW50IGlzIGZpcmVkIGJ5IHRhcCwgdHJ1ZSBvciBmYWxzZVxuXHRcdFx0XHRcdFx0dGFwIHx8IGZhbHNlLFxuXHRcdFx0XHRcdFx0Ly8gTGVmdCBvZmZzZXQgb2YgdGhlIGhhbmRsZSwgaW4gcmVsYXRpb24gdG8gdGhlIHNsaWRlclxuXHRcdFx0XHRcdFx0c2NvcGVfTG9jYXRpb25zLnNsaWNlKClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cblx0Ly8gRmlyZSAnZW5kJyB3aGVuIGEgbW91c2Ugb3IgcGVuIGxlYXZlcyB0aGUgZG9jdW1lbnQuXG5cdGZ1bmN0aW9uIGRvY3VtZW50TGVhdmUgKCBldmVudCwgZGF0YSApIHtcblx0XHRpZiAoIGV2ZW50LnR5cGUgPT09IFwibW91c2VvdXRcIiAmJiBldmVudC50YXJnZXQubm9kZU5hbWUgPT09IFwiSFRNTFwiICYmIGV2ZW50LnJlbGF0ZWRUYXJnZXQgPT09IG51bGwgKXtcblx0XHRcdGV2ZW50RW5kIChldmVudCwgZGF0YSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gSGFuZGxlIG1vdmVtZW50IG9uIGRvY3VtZW50IGZvciBoYW5kbGUgYW5kIHJhbmdlIGRyYWcuXG5cdGZ1bmN0aW9uIGV2ZW50TW92ZSAoIGV2ZW50LCBkYXRhICkge1xuXG5cdFx0Ly8gRml4ICM0OThcblx0XHQvLyBDaGVjayB2YWx1ZSBvZiAuYnV0dG9ucyBpbiAnc3RhcnQnIHRvIHdvcmsgYXJvdW5kIGEgYnVnIGluIElFMTAgbW9iaWxlIChkYXRhLmJ1dHRvbnNQcm9wZXJ0eSkuXG5cdFx0Ly8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy85MjcwMDUvbW9iaWxlLWllMTAtd2luZG93cy1waG9uZS1idXR0b25zLXByb3BlcnR5LW9mLXBvaW50ZXJtb3ZlLWV2ZW50LWFsd2F5cy16ZXJvXG5cdFx0Ly8gSUU5IGhhcyAuYnV0dG9ucyBhbmQgLndoaWNoIHplcm8gb24gbW91c2Vtb3ZlLlxuXHRcdC8vIEZpcmVmb3ggYnJlYWtzIHRoZSBzcGVjIE1ETiBkZWZpbmVzLlxuXHRcdGlmICggbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgOVwiKSA9PT0gLTEgJiYgZXZlbnQuYnV0dG9ucyA9PT0gMCAmJiBkYXRhLmJ1dHRvbnNQcm9wZXJ0eSAhPT0gMCApIHtcblx0XHRcdHJldHVybiBldmVudEVuZChldmVudCwgZGF0YSk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgYXJlIG1vdmluZyB1cCBvciBkb3duXG5cdFx0dmFyIG1vdmVtZW50ID0gKG9wdGlvbnMuZGlyID8gLTEgOiAxKSAqIChldmVudC5jYWxjUG9pbnQgLSBkYXRhLnN0YXJ0Q2FsY1BvaW50KTtcblxuXHRcdC8vIENvbnZlcnQgdGhlIG1vdmVtZW50IGludG8gYSBwZXJjZW50YWdlIG9mIHRoZSBzbGlkZXIgd2lkdGgvaGVpZ2h0XG5cdFx0dmFyIHByb3Bvc2FsID0gKG1vdmVtZW50ICogMTAwKSAvIGRhdGEuYmFzZVNpemU7XG5cblx0XHRtb3ZlSGFuZGxlcyhtb3ZlbWVudCA+IDAsIHByb3Bvc2FsLCBkYXRhLmxvY2F0aW9ucywgZGF0YS5oYW5kbGVOdW1iZXJzKTtcblx0fVxuXG5cdC8vIFVuYmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudCwgY2FsbCBjYWxsYmFja3MuXG5cdGZ1bmN0aW9uIGV2ZW50RW5kICggZXZlbnQsIGRhdGEgKSB7XG5cblx0XHQvLyBUaGUgaGFuZGxlIGlzIG5vIGxvbmdlciBhY3RpdmUsIHNvIHJlbW92ZSB0aGUgY2xhc3MuXG5cdFx0aWYgKCBkYXRhLmhhbmRsZSApIHtcblx0XHRcdHJlbW92ZUNsYXNzKGRhdGEuaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcblx0XHRcdHNjb3BlX0FjdGl2ZUhhbmRsZXNDb3VudCAtPSAxO1xuXHRcdH1cblxuXHRcdC8vIFVuYmluZCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cywgd2hpY2ggYXJlIGFkZGVkIG9uICdzdGFydCcuXG5cdFx0ZGF0YS5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiggYyApIHtcblx0XHRcdHNjb3BlX0RvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGNbMF0sIGNbMV0pO1xuXHRcdH0pO1xuXG5cdFx0aWYgKCBzY29wZV9BY3RpdmVIYW5kbGVzQ291bnQgPT09IDAgKSB7XG5cdFx0XHQvLyBSZW1vdmUgZHJhZ2dpbmcgY2xhc3MuXG5cdFx0XHRyZW1vdmVDbGFzcyhzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5kcmFnKTtcblx0XHRcdHNldFppbmRleCgpO1xuXG5cdFx0XHQvLyBSZW1vdmUgY3Vyc29yIHN0eWxlcyBhbmQgdGV4dC1zZWxlY3Rpb24gZXZlbnRzIGJvdW5kIHRvIHRoZSBib2R5LlxuXHRcdFx0aWYgKCBldmVudC5jdXJzb3IgKSB7XG5cdFx0XHRcdHNjb3BlX0JvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG5cdFx0XHRcdHNjb3BlX0JvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBwcmV2ZW50RGVmYXVsdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZGF0YS5oYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblx0XHRcdGZpcmVFdmVudCgnY2hhbmdlJywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdGZpcmVFdmVudCgnZW5kJywgaGFuZGxlTnVtYmVyKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIEJpbmQgbW92ZSBldmVudHMgb24gZG9jdW1lbnQuXG5cdGZ1bmN0aW9uIGV2ZW50U3RhcnQgKCBldmVudCwgZGF0YSApIHtcblxuXHRcdHZhciBoYW5kbGU7XG5cdFx0aWYgKCBkYXRhLmhhbmRsZU51bWJlcnMubGVuZ3RoID09PSAxICkge1xuXG5cdFx0XHR2YXIgaGFuZGxlT3JpZ2luID0gc2NvcGVfSGFuZGxlc1tkYXRhLmhhbmRsZU51bWJlcnNbMF1dO1xuXG5cdFx0XHQvLyBJZ25vcmUgJ2Rpc2FibGVkJyBoYW5kbGVzXG5cdFx0XHRpZiAoIGhhbmRsZU9yaWdpbi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aGFuZGxlID0gaGFuZGxlT3JpZ2luLmNoaWxkcmVuWzBdO1xuXHRcdFx0c2NvcGVfQWN0aXZlSGFuZGxlc0NvdW50ICs9IDE7XG5cblx0XHRcdC8vIE1hcmsgdGhlIGhhbmRsZSBhcyAnYWN0aXZlJyBzbyBpdCBjYW4gYmUgc3R5bGVkLlxuXHRcdFx0YWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcblx0XHR9XG5cblx0XHQvLyBBIGRyYWcgc2hvdWxkIG5ldmVyIHByb3BhZ2F0ZSB1cCB0byB0aGUgJ3RhcCcgZXZlbnQuXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHQvLyBSZWNvcmQgdGhlIGV2ZW50IGxpc3RlbmVycy5cblx0XHR2YXIgbGlzdGVuZXJzID0gW107XG5cblx0XHQvLyBBdHRhY2ggdGhlIG1vdmUgYW5kIGVuZCBldmVudHMuXG5cdFx0dmFyIG1vdmVFdmVudCA9IGF0dGFjaEV2ZW50KGFjdGlvbnMubW92ZSwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBldmVudE1vdmUsIHtcblx0XHRcdC8vIFRoZSBldmVudCB0YXJnZXQgaGFzIGNoYW5nZWQgc28gd2UgbmVlZCB0byBwcm9wYWdhdGUgdGhlIG9yaWdpbmFsIG9uZSBzbyB0aGF0IHdlIGtlZXBcblx0XHRcdC8vIHJlbHlpbmcgb24gaXQgdG8gZXh0cmFjdCB0YXJnZXQgdG91Y2hlcy5cblx0XHRcdHRhcmdldDogZXZlbnQudGFyZ2V0LFxuXHRcdFx0aGFuZGxlOiBoYW5kbGUsXG5cdFx0XHRsaXN0ZW5lcnM6IGxpc3RlbmVycyxcblx0XHRcdHN0YXJ0Q2FsY1BvaW50OiBldmVudC5jYWxjUG9pbnQsXG5cdFx0XHRiYXNlU2l6ZTogYmFzZVNpemUoKSxcblx0XHRcdHBhZ2VPZmZzZXQ6IGV2ZW50LnBhZ2VPZmZzZXQsXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnMsXG5cdFx0XHRidXR0b25zUHJvcGVydHk6IGV2ZW50LmJ1dHRvbnMsXG5cdFx0XHRsb2NhdGlvbnM6IHNjb3BlX0xvY2F0aW9ucy5zbGljZSgpXG5cdFx0fSk7XG5cblx0XHR2YXIgZW5kRXZlbnQgPSBhdHRhY2hFdmVudChhY3Rpb25zLmVuZCwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBldmVudEVuZCwge1xuXHRcdFx0dGFyZ2V0OiBldmVudC50YXJnZXQsXG5cdFx0XHRoYW5kbGU6IGhhbmRsZSxcblx0XHRcdGxpc3RlbmVyczogbGlzdGVuZXJzLFxuXHRcdFx0aGFuZGxlTnVtYmVyczogZGF0YS5oYW5kbGVOdW1iZXJzXG5cdFx0fSk7XG5cblx0XHR2YXIgb3V0RXZlbnQgPSBhdHRhY2hFdmVudChcIm1vdXNlb3V0XCIsIHNjb3BlX0RvY3VtZW50RWxlbWVudCwgZG9jdW1lbnRMZWF2ZSwge1xuXHRcdFx0dGFyZ2V0OiBldmVudC50YXJnZXQsXG5cdFx0XHRoYW5kbGU6IGhhbmRsZSxcblx0XHRcdGxpc3RlbmVyczogbGlzdGVuZXJzLFxuXHRcdFx0aGFuZGxlTnVtYmVyczogZGF0YS5oYW5kbGVOdW1iZXJzXG5cdFx0fSk7XG5cblx0XHQvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBwdXNoZWQgdGhlIGxpc3RlbmVycyBpbiB0aGUgbGlzdGVuZXIgbGlzdCByYXRoZXIgdGhhbiBjcmVhdGluZ1xuXHRcdC8vIGEgbmV3IG9uZSBhcyBpdCBoYXMgYWxyZWFkeSBiZWVuIHBhc3NlZCB0byB0aGUgZXZlbnQgaGFuZGxlcnMuXG5cdFx0bGlzdGVuZXJzLnB1c2guYXBwbHkobGlzdGVuZXJzLCBtb3ZlRXZlbnQuY29uY2F0KGVuZEV2ZW50LCBvdXRFdmVudCkpO1xuXG5cdFx0Ly8gVGV4dCBzZWxlY3Rpb24gaXNuJ3QgYW4gaXNzdWUgb24gdG91Y2ggZGV2aWNlcyxcblx0XHQvLyBzbyBhZGRpbmcgY3Vyc29yIHN0eWxlcyBjYW4gYmUgc2tpcHBlZC5cblx0XHRpZiAoIGV2ZW50LmN1cnNvciApIHtcblxuXHRcdFx0Ly8gUHJldmVudCB0aGUgJ0knIGN1cnNvciBhbmQgZXh0ZW5kIHRoZSByYW5nZS1kcmFnIGN1cnNvci5cblx0XHRcdHNjb3BlX0JvZHkuc3R5bGUuY3Vyc29yID0gZ2V0Q29tcHV0ZWRTdHlsZShldmVudC50YXJnZXQpLmN1cnNvcjtcblxuXHRcdFx0Ly8gTWFyayB0aGUgdGFyZ2V0IHdpdGggYSBkcmFnZ2luZyBzdGF0ZS5cblx0XHRcdGlmICggc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhZGRDbGFzcyhzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5kcmFnKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHJldmVudCB0ZXh0IHNlbGVjdGlvbiB3aGVuIGRyYWdnaW5nIHRoZSBoYW5kbGVzLlxuXHRcdFx0Ly8gSW4gbm9VaVNsaWRlciA8PSA5LjIuMCwgdGhpcyB3YXMgaGFuZGxlZCBieSBjYWxsaW5nIHByZXZlbnREZWZhdWx0IG9uIG1vdXNlL3RvdWNoIHN0YXJ0L21vdmUsXG5cdFx0XHQvLyB3aGljaCBpcyBzY3JvbGwgYmxvY2tpbmcuIFRoZSBzZWxlY3RzdGFydCBldmVudCBpcyBzdXBwb3J0ZWQgYnkgRmlyZUZveCBzdGFydGluZyBmcm9tIHZlcnNpb24gNTIsXG5cdFx0XHQvLyBtZWFuaW5nIHRoZSBvbmx5IGhvbGRvdXQgaXMgaU9TIFNhZmFyaS4gVGhpcyBkb2Vzbid0IG1hdHRlcjogdGV4dCBzZWxlY3Rpb24gaXNuJ3QgdHJpZ2dlcmVkIHRoZXJlLlxuXHRcdFx0Ly8gVGhlICdjdXJzb3InIGZsYWcgaXMgZmFsc2UuXG5cdFx0XHQvLyBTZWU6IGh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPXNlbGVjdHN0YXJ0XG5cdFx0XHRzY29wZV9Cb2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0JywgcHJldmVudERlZmF1bHQsIGZhbHNlKTtcblx0XHR9XG5cblx0XHRkYXRhLmhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0ZmlyZUV2ZW50KCdzdGFydCcsIGhhbmRsZU51bWJlcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBNb3ZlIGNsb3Nlc3QgaGFuZGxlIHRvIHRhcHBlZCBsb2NhdGlvbi5cblx0ZnVuY3Rpb24gZXZlbnRUYXAgKCBldmVudCApIHtcblxuXHRcdC8vIFRoZSB0YXAgZXZlbnQgc2hvdWxkbid0IHByb3BhZ2F0ZSB1cFxuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0dmFyIHByb3Bvc2FsID0gY2FsY1BvaW50VG9QZXJjZW50YWdlKGV2ZW50LmNhbGNQb2ludCk7XG5cdFx0dmFyIGhhbmRsZU51bWJlciA9IGdldENsb3Nlc3RIYW5kbGUocHJvcG9zYWwpO1xuXG5cdFx0Ly8gVGFja2xlIHRoZSBjYXNlIHRoYXQgYWxsIGhhbmRsZXMgYXJlICdkaXNhYmxlZCcuXG5cdFx0aWYgKCBoYW5kbGVOdW1iZXIgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIEZsYWcgdGhlIHNsaWRlciBhcyBpdCBpcyBub3cgaW4gYSB0cmFuc2l0aW9uYWwgc3RhdGUuXG5cdFx0Ly8gVHJhbnNpdGlvbiB0YWtlcyBhIGNvbmZpZ3VyYWJsZSBhbW91bnQgb2YgbXMgKGRlZmF1bHQgMzAwKS4gUmUtZW5hYmxlIHRoZSBzbGlkZXIgYWZ0ZXIgdGhhdC5cblx0XHRpZiAoICFvcHRpb25zLmV2ZW50cy5zbmFwICkge1xuXHRcdFx0YWRkQ2xhc3NGb3Ioc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudGFwLCBvcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uKTtcblx0XHR9XG5cblx0XHRzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCBwcm9wb3NhbCwgdHJ1ZSwgdHJ1ZSk7XG5cblx0XHRzZXRaaW5kZXgoKTtcblxuXHRcdGZpcmVFdmVudCgnc2xpZGUnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xuXHRcdGZpcmVFdmVudCgndXBkYXRlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblx0XHRmaXJlRXZlbnQoJ2NoYW5nZScsIGhhbmRsZU51bWJlciwgdHJ1ZSk7XG5cdFx0ZmlyZUV2ZW50KCdzZXQnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xuXG5cdFx0aWYgKCBvcHRpb25zLmV2ZW50cy5zbmFwICkge1xuXHRcdFx0ZXZlbnRTdGFydChldmVudCwgeyBoYW5kbGVOdW1iZXJzOiBbaGFuZGxlTnVtYmVyXSB9KTtcblx0XHR9XG5cdH1cblxuXHQvLyBGaXJlcyBhICdob3ZlcicgZXZlbnQgZm9yIGEgaG92ZXJlZCBtb3VzZS9wZW4gcG9zaXRpb24uXG5cdGZ1bmN0aW9uIGV2ZW50SG92ZXIgKCBldmVudCApIHtcblxuXHRcdHZhciBwcm9wb3NhbCA9IGNhbGNQb2ludFRvUGVyY2VudGFnZShldmVudC5jYWxjUG9pbnQpO1xuXG5cdFx0dmFyIHRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcChwcm9wb3NhbCk7XG5cdFx0dmFyIHZhbHVlID0gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKHRvKTtcblxuXHRcdE9iamVjdC5rZXlzKHNjb3BlX0V2ZW50cykuZm9yRWFjaChmdW5jdGlvbiggdGFyZ2V0RXZlbnQgKSB7XG5cdFx0XHRpZiAoICdob3ZlcicgPT09IHRhcmdldEV2ZW50LnNwbGl0KCcuJylbMF0gKSB7XG5cdFx0XHRcdHNjb3BlX0V2ZW50c1t0YXJnZXRFdmVudF0uZm9yRWFjaChmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCggc2NvcGVfU2VsZiwgdmFsdWUgKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBBdHRhY2ggZXZlbnRzIHRvIHNldmVyYWwgc2xpZGVyIHBhcnRzLlxuXHRmdW5jdGlvbiBiaW5kU2xpZGVyRXZlbnRzICggYmVoYXZpb3VyICkge1xuXG5cdFx0Ly8gQXR0YWNoIHRoZSBzdGFuZGFyZCBkcmFnIGV2ZW50IHRvIHRoZSBoYW5kbGVzLlxuXHRcdGlmICggIWJlaGF2aW91ci5maXhlZCApIHtcblxuXHRcdFx0c2NvcGVfSGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uKCBoYW5kbGUsIGluZGV4ICl7XG5cblx0XHRcdFx0Ly8gVGhlc2UgZXZlbnRzIGFyZSBvbmx5IGJvdW5kIHRvIHRoZSB2aXN1YWwgaGFuZGxlXG5cdFx0XHRcdC8vIGVsZW1lbnQsIG5vdCB0aGUgJ3JlYWwnIG9yaWdpbiBlbGVtZW50LlxuXHRcdFx0XHRhdHRhY2hFdmVudCAoIGFjdGlvbnMuc3RhcnQsIGhhbmRsZS5jaGlsZHJlblswXSwgZXZlbnRTdGFydCwge1xuXHRcdFx0XHRcdGhhbmRsZU51bWJlcnM6IFtpbmRleF1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBBdHRhY2ggdGhlIHRhcCBldmVudCB0byB0aGUgc2xpZGVyIGJhc2UuXG5cdFx0aWYgKCBiZWhhdmlvdXIudGFwICkge1xuXHRcdFx0YXR0YWNoRXZlbnQgKGFjdGlvbnMuc3RhcnQsIHNjb3BlX0Jhc2UsIGV2ZW50VGFwLCB7fSk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBob3ZlciBldmVudHNcblx0XHRpZiAoIGJlaGF2aW91ci5ob3ZlciApIHtcblx0XHRcdGF0dGFjaEV2ZW50IChhY3Rpb25zLm1vdmUsIHNjb3BlX0Jhc2UsIGV2ZW50SG92ZXIsIHsgaG92ZXI6IHRydWUgfSk7XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSB0aGUgcmFuZ2UgZHJhZ2dhYmxlLlxuXHRcdGlmICggYmVoYXZpb3VyLmRyYWcgKXtcblxuXHRcdFx0c2NvcGVfQ29ubmVjdHMuZm9yRWFjaChmdW5jdGlvbiggY29ubmVjdCwgaW5kZXggKXtcblxuXHRcdFx0XHRpZiAoIGNvbm5lY3QgPT09IGZhbHNlIHx8IGluZGV4ID09PSAwIHx8IGluZGV4ID09PSBzY29wZV9Db25uZWN0cy5sZW5ndGggLSAxICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBoYW5kbGVCZWZvcmUgPSBzY29wZV9IYW5kbGVzW2luZGV4IC0gMV07XG5cdFx0XHRcdHZhciBoYW5kbGVBZnRlciA9IHNjb3BlX0hhbmRsZXNbaW5kZXhdO1xuXHRcdFx0XHR2YXIgZXZlbnRIb2xkZXJzID0gW2Nvbm5lY3RdO1xuXG5cdFx0XHRcdGFkZENsYXNzKGNvbm5lY3QsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5kcmFnZ2FibGUpO1xuXG5cdFx0XHRcdC8vIFdoZW4gdGhlIHJhbmdlIGlzIGZpeGVkLCB0aGUgZW50aXJlIHJhbmdlIGNhblxuXHRcdFx0XHQvLyBiZSBkcmFnZ2VkIGJ5IHRoZSBoYW5kbGVzLiBUaGUgaGFuZGxlIGluIHRoZSBmaXJzdFxuXHRcdFx0XHQvLyBvcmlnaW4gd2lsbCBwcm9wYWdhdGUgdGhlIHN0YXJ0IGV2ZW50IHVwd2FyZCxcblx0XHRcdFx0Ly8gYnV0IGl0IG5lZWRzIHRvIGJlIGJvdW5kIG1hbnVhbGx5IG9uIHRoZSBvdGhlci5cblx0XHRcdFx0aWYgKCBiZWhhdmlvdXIuZml4ZWQgKSB7XG5cdFx0XHRcdFx0ZXZlbnRIb2xkZXJzLnB1c2goaGFuZGxlQmVmb3JlLmNoaWxkcmVuWzBdKTtcblx0XHRcdFx0XHRldmVudEhvbGRlcnMucHVzaChoYW5kbGVBZnRlci5jaGlsZHJlblswXSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRldmVudEhvbGRlcnMuZm9yRWFjaChmdW5jdGlvbiggZXZlbnRIb2xkZXIgKSB7XG5cdFx0XHRcdFx0YXR0YWNoRXZlbnQgKCBhY3Rpb25zLnN0YXJ0LCBldmVudEhvbGRlciwgZXZlbnRTdGFydCwge1xuXHRcdFx0XHRcdFx0aGFuZGxlczogW2hhbmRsZUJlZm9yZSwgaGFuZGxlQWZ0ZXJdLFxuXHRcdFx0XHRcdFx0aGFuZGxlTnVtYmVyczogW2luZGV4IC0gMSwgaW5kZXhdXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblxuXHQvLyBTcGxpdCBvdXQgdGhlIGhhbmRsZSBwb3NpdGlvbmluZyBsb2dpYyBzbyB0aGUgTW92ZSBldmVudCBjYW4gdXNlIGl0LCB0b29cblx0ZnVuY3Rpb24gY2hlY2tIYW5kbGVQb3NpdGlvbiAoIHJlZmVyZW5jZSwgaGFuZGxlTnVtYmVyLCB0bywgbG9va0JhY2t3YXJkLCBsb29rRm9yd2FyZCwgZ2V0VmFsdWUgKSB7XG5cblx0XHQvLyBGb3Igc2xpZGVycyB3aXRoIG11bHRpcGxlIGhhbmRsZXMsIGxpbWl0IG1vdmVtZW50IHRvIHRoZSBvdGhlciBoYW5kbGUuXG5cdFx0Ly8gQXBwbHkgdGhlIG1hcmdpbiBvcHRpb24gYnkgYWRkaW5nIGl0IHRvIHRoZSBoYW5kbGUgcG9zaXRpb25zLlxuXHRcdGlmICggc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHRpZiAoIGxvb2tCYWNrd2FyZCAmJiBoYW5kbGVOdW1iZXIgPiAwICkge1xuXHRcdFx0XHR0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyIC0gMV0gKyBvcHRpb25zLm1hcmdpbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggbG9va0ZvcndhcmQgJiYgaGFuZGxlTnVtYmVyIDwgc2NvcGVfSGFuZGxlcy5sZW5ndGggLSAxICkge1xuXHRcdFx0XHR0byA9IE1hdGgubWluKHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyICsgMV0gLSBvcHRpb25zLm1hcmdpbik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIGxpbWl0IG9wdGlvbiBoYXMgdGhlIG9wcG9zaXRlIGVmZmVjdCwgbGltaXRpbmcgaGFuZGxlcyB0byBhXG5cdFx0Ly8gbWF4aW11bSBkaXN0YW5jZSBmcm9tIGFub3RoZXIuIExpbWl0IG11c3QgYmUgPiAwLCBhcyBvdGhlcndpc2Vcblx0XHQvLyBoYW5kbGVzIHdvdWxkIGJlIHVubW92ZWFibGUuXG5cdFx0aWYgKCBzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgJiYgb3B0aW9ucy5saW1pdCApIHtcblxuXHRcdFx0aWYgKCBsb29rQmFja3dhcmQgJiYgaGFuZGxlTnVtYmVyID4gMCApIHtcblx0XHRcdFx0dG8gPSBNYXRoLm1pbih0bywgcmVmZXJlbmNlW2hhbmRsZU51bWJlciAtIDFdICsgb3B0aW9ucy5saW1pdCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggbG9va0ZvcndhcmQgJiYgaGFuZGxlTnVtYmVyIDwgc2NvcGVfSGFuZGxlcy5sZW5ndGggLSAxICkge1xuXHRcdFx0XHR0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyICsgMV0gLSBvcHRpb25zLmxpbWl0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBUaGUgcGFkZGluZyBvcHRpb24ga2VlcHMgdGhlIGhhbmRsZXMgYSBjZXJ0YWluIGRpc3RhbmNlIGZyb20gdGhlXG5cdFx0Ly8gZWRnZXMgb2YgdGhlIHNsaWRlci4gUGFkZGluZyBtdXN0IGJlID4gMC5cblx0XHRpZiAoIG9wdGlvbnMucGFkZGluZyApIHtcblxuXHRcdFx0aWYgKCBoYW5kbGVOdW1iZXIgPT09IDAgKSB7XG5cdFx0XHRcdHRvID0gTWF0aC5tYXgodG8sIG9wdGlvbnMucGFkZGluZyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaGFuZGxlTnVtYmVyID09PSBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEgKSB7XG5cdFx0XHRcdHRvID0gTWF0aC5taW4odG8sIDEwMCAtIG9wdGlvbnMucGFkZGluZyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dG8gPSBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKHRvKTtcblxuXHRcdC8vIExpbWl0IHBlcmNlbnRhZ2UgdG8gdGhlIDAgLSAxMDAgcmFuZ2Vcblx0XHR0byA9IGxpbWl0KHRvKTtcblxuXHRcdC8vIFJldHVybiBmYWxzZSBpZiBoYW5kbGUgY2FuJ3QgbW92ZVxuXHRcdGlmICggdG8gPT09IHJlZmVyZW5jZVtoYW5kbGVOdW1iZXJdICYmICFnZXRWYWx1ZSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdG87XG5cdH1cblxuXHRmdW5jdGlvbiB0b1BjdCAoIHBjdCApIHtcblx0XHRyZXR1cm4gcGN0ICsgJyUnO1xuXHR9XG5cblx0Ly8gVXBkYXRlcyBzY29wZV9Mb2NhdGlvbnMgYW5kIHNjb3BlX1ZhbHVlcywgdXBkYXRlcyB2aXN1YWwgc3RhdGVcblx0ZnVuY3Rpb24gdXBkYXRlSGFuZGxlUG9zaXRpb24gKCBoYW5kbGVOdW1iZXIsIHRvICkge1xuXG5cdFx0Ly8gVXBkYXRlIGxvY2F0aW9ucy5cblx0XHRzY29wZV9Mb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSA9IHRvO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgdmFsdWUgdG8gdGhlIHNsaWRlciBzdGVwcGluZy9yYW5nZS5cblx0XHRzY29wZV9WYWx1ZXNbaGFuZGxlTnVtYmVyXSA9IHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyh0byk7XG5cblx0XHQvLyBDYWxsZWQgc3luY2hyb25vdXNseSBvciBvbiB0aGUgbmV4dCBhbmltYXRpb25GcmFtZVxuXHRcdHZhciBzdGF0ZVVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0c2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG9QY3QodG8pO1xuXHRcdFx0dXBkYXRlQ29ubmVjdChoYW5kbGVOdW1iZXIpO1xuXHRcdFx0dXBkYXRlQ29ubmVjdChoYW5kbGVOdW1iZXIgKyAxKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2V0IHRoZSBoYW5kbGUgdG8gdGhlIG5ldyBwb3NpdGlvbi5cblx0XHQvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvciBlZmZpY2llbnQgcGFpbnRpbmcuXG5cdFx0Ly8gTm8gc2lnbmlmaWNhbnQgZWZmZWN0IGluIENocm9tZSwgRWRnZSBzZWVzIGRyYW1hdGljIHBlcmZvcm1hY2UgaW1wcm92ZW1lbnRzLlxuXHRcdC8vIE9wdGlvbiB0byBkaXNhYmxlIGlzIHVzZWZ1bCBmb3IgdW5pdCB0ZXN0cywgYW5kIHNpbmdsZS1zdGVwIGRlYnVnZ2luZy5cblx0XHRpZiAoIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgb3B0aW9ucy51c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7XG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0YXRlVXBkYXRlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RhdGVVcGRhdGUoKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRaaW5kZXggKCApIHtcblxuXHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0Ly8gSGFuZGxlcyBiZWZvcmUgdGhlIHNsaWRlciBtaWRkbGUgYXJlIHN0YWNrZWQgbGF0ZXIgPSBoaWdoZXIsXG5cdFx0XHQvLyBIYW5kbGVzIGFmdGVyIHRoZSBtaWRkbGUgbGF0ZXIgaXMgbG93ZXJcblx0XHRcdC8vIFtbN10gWzhdIC4uLi4uLi4uLi4gfCAuLi4uLi4uLi4uIFs1XSBbNF1cblx0XHRcdHZhciBkaXIgPSAoc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0gPiA1MCA/IC0xIDogMSk7XG5cdFx0XHR2YXIgekluZGV4ID0gMyArIChzY29wZV9IYW5kbGVzLmxlbmd0aCArIChkaXIgKiBoYW5kbGVOdW1iZXIpKTtcblx0XHRcdHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXS5jaGlsZE5vZGVzWzBdLnN0eWxlLnpJbmRleCA9IHpJbmRleDtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFRlc3Qgc3VnZ2VzdGVkIHZhbHVlcyBhbmQgYXBwbHkgbWFyZ2luLCBzdGVwLlxuXHRmdW5jdGlvbiBzZXRIYW5kbGUgKCBoYW5kbGVOdW1iZXIsIHRvLCBsb29rQmFja3dhcmQsIGxvb2tGb3J3YXJkICkge1xuXG5cdFx0dG8gPSBjaGVja0hhbmRsZVBvc2l0aW9uKHNjb3BlX0xvY2F0aW9ucywgaGFuZGxlTnVtYmVyLCB0bywgbG9va0JhY2t3YXJkLCBsb29rRm9yd2FyZCwgZmFsc2UpO1xuXG5cdFx0aWYgKCB0byA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0dXBkYXRlSGFuZGxlUG9zaXRpb24oaGFuZGxlTnVtYmVyLCB0byk7XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIFVwZGF0ZXMgc3R5bGUgYXR0cmlidXRlIGZvciBjb25uZWN0IG5vZGVzXG5cdGZ1bmN0aW9uIHVwZGF0ZUNvbm5lY3QgKCBpbmRleCApIHtcblxuXHRcdC8vIFNraXAgY29ubmVjdHMgc2V0IHRvIGZhbHNlXG5cdFx0aWYgKCAhc2NvcGVfQ29ubmVjdHNbaW5kZXhdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBsID0gMDtcblx0XHR2YXIgaCA9IDEwMDtcblxuXHRcdGlmICggaW5kZXggIT09IDAgKSB7XG5cdFx0XHRsID0gc2NvcGVfTG9jYXRpb25zW2luZGV4IC0gMV07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gc2NvcGVfQ29ubmVjdHMubGVuZ3RoIC0gMSApIHtcblx0XHRcdGggPSBzY29wZV9Mb2NhdGlvbnNbaW5kZXhdO1xuXHRcdH1cblxuXHRcdHNjb3BlX0Nvbm5lY3RzW2luZGV4XS5zdHlsZVtvcHRpb25zLnN0eWxlXSA9IHRvUGN0KGwpO1xuXHRcdHNjb3BlX0Nvbm5lY3RzW2luZGV4XS5zdHlsZVtvcHRpb25zLnN0eWxlT3Bvc2l0ZV0gPSB0b1BjdCgxMDAgLSBoKTtcblx0fVxuXG5cdC8vIC4uLlxuXHRmdW5jdGlvbiBzZXRWYWx1ZSAoIHRvLCBoYW5kbGVOdW1iZXIgKSB7XG5cblx0XHQvLyBTZXR0aW5nIHdpdGggbnVsbCBpbmRpY2F0ZXMgYW4gJ2lnbm9yZScuXG5cdFx0Ly8gSW5wdXR0aW5nICdmYWxzZScgaXMgaW52YWxpZC5cblx0XHRpZiAoIHRvID09PSBudWxsIHx8IHRvID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiBhIGZvcm1hdHRlZCBudW1iZXIgd2FzIHBhc3NlZCwgYXR0ZW10IHRvIGRlY29kZSBpdC5cblx0XHRpZiAoIHR5cGVvZiB0byA9PT0gJ251bWJlcicgKSB7XG5cdFx0XHR0byA9IFN0cmluZyh0byk7XG5cdFx0fVxuXG5cdFx0dG8gPSBvcHRpb25zLmZvcm1hdC5mcm9tKHRvKTtcblxuXHRcdC8vIFJlcXVlc3QgYW4gdXBkYXRlIGZvciBhbGwgbGlua3MgaWYgdGhlIHZhbHVlIHdhcyBpbnZhbGlkLlxuXHRcdC8vIERvIHNvIHRvbyBpZiBzZXR0aW5nIHRoZSBoYW5kbGUgZmFpbHMuXG5cdFx0aWYgKCB0byAhPT0gZmFsc2UgJiYgIWlzTmFOKHRvKSApIHtcblx0XHRcdHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHNjb3BlX1NwZWN0cnVtLnRvU3RlcHBpbmcodG8pLCBmYWxzZSwgZmFsc2UpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgc2xpZGVyIHZhbHVlLlxuXHRmdW5jdGlvbiB2YWx1ZVNldCAoIGlucHV0LCBmaXJlU2V0RXZlbnQgKSB7XG5cblx0XHR2YXIgdmFsdWVzID0gYXNBcnJheShpbnB1dCk7XG5cdFx0dmFyIGlzSW5pdCA9IHNjb3BlX0xvY2F0aW9uc1swXSA9PT0gdW5kZWZpbmVkO1xuXG5cdFx0Ly8gRXZlbnQgZmlyZXMgYnkgZGVmYXVsdFxuXHRcdGZpcmVTZXRFdmVudCA9IChmaXJlU2V0RXZlbnQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiAhIWZpcmVTZXRFdmVudCk7XG5cblx0XHR2YWx1ZXMuZm9yRWFjaChzZXRWYWx1ZSk7XG5cblx0XHQvLyBBbmltYXRpb24gaXMgb3B0aW9uYWwuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSBpbml0aWFsIHZhbHVlcyB3ZXJlIHNldCBiZWZvcmUgdXNpbmcgYW5pbWF0ZWQgcGxhY2VtZW50LlxuXHRcdGlmICggb3B0aW9ucy5hbmltYXRlICYmICFpc0luaXQgKSB7XG5cdFx0XHRhZGRDbGFzc0ZvcihzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXAsIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pO1xuXHRcdH1cblxuXHRcdC8vIE5vdyB0aGF0IGFsbCBiYXNlIHZhbHVlcyBhcmUgc2V0LCBhcHBseSBjb25zdHJhaW50c1xuXHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0c2V0SGFuZGxlKGhhbmRsZU51bWJlciwgc2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0sIHRydWUsIGZhbHNlKTtcblx0XHR9KTtcblxuXHRcdHNldFppbmRleCgpO1xuXG5cdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XG5cblx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaGFuZGxlTnVtYmVyKTtcblxuXHRcdFx0Ly8gRmlyZSB0aGUgZXZlbnQgb25seSBmb3IgaGFuZGxlcyB0aGF0IHJlY2VpdmVkIGEgbmV3IHZhbHVlLCBhcyBwZXIgIzU3OVxuXHRcdFx0aWYgKCB2YWx1ZXNbaGFuZGxlTnVtYmVyXSAhPT0gbnVsbCAmJiBmaXJlU2V0RXZlbnQgKSB7XG5cdFx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIFJlc2V0IHNsaWRlciB0byBpbml0aWFsIHZhbHVlc1xuXHRmdW5jdGlvbiB2YWx1ZVJlc2V0ICggZmlyZVNldEV2ZW50ICkge1xuXHRcdHZhbHVlU2V0KG9wdGlvbnMuc3RhcnQsIGZpcmVTZXRFdmVudCk7XG5cdH1cblxuXHQvLyBHZXQgdGhlIHNsaWRlciB2YWx1ZS5cblx0ZnVuY3Rpb24gdmFsdWVHZXQgKCApIHtcblxuXHRcdHZhciB2YWx1ZXMgPSBzY29wZV9WYWx1ZXMubWFwKG9wdGlvbnMuZm9ybWF0LnRvKTtcblxuXHRcdC8vIElmIG9ubHkgb25lIGhhbmRsZSBpcyB1c2VkLCByZXR1cm4gYSBzaW5nbGUgdmFsdWUuXG5cdFx0aWYgKCB2YWx1ZXMubGVuZ3RoID09PSAxICl7XG5cdFx0XHRyZXR1cm4gdmFsdWVzWzBdO1xuXHRcdH1cblxuXHRcdHJldHVybiB2YWx1ZXM7XG5cdH1cblxuXHQvLyBSZW1vdmVzIGNsYXNzZXMgZnJvbSB0aGUgcm9vdCBhbmQgZW1wdGllcyBpdC5cblx0ZnVuY3Rpb24gZGVzdHJveSAoICkge1xuXG5cdFx0Zm9yICggdmFyIGtleSBpbiBvcHRpb25zLmNzc0NsYXNzZXMgKSB7XG5cdFx0XHRpZiAoICFvcHRpb25zLmNzc0NsYXNzZXMuaGFzT3duUHJvcGVydHkoa2V5KSApIHsgY29udGludWU7IH1cblx0XHRcdHJlbW92ZUNsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzW2tleV0pO1xuXHRcdH1cblxuXHRcdHdoaWxlIChzY29wZV9UYXJnZXQuZmlyc3RDaGlsZCkge1xuXHRcdFx0c2NvcGVfVGFyZ2V0LnJlbW92ZUNoaWxkKHNjb3BlX1RhcmdldC5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRkZWxldGUgc2NvcGVfVGFyZ2V0Lm5vVWlTbGlkZXI7XG5cdH1cblxuXHQvLyBHZXQgdGhlIGN1cnJlbnQgc3RlcCBzaXplIGZvciB0aGUgc2xpZGVyLlxuXHRmdW5jdGlvbiBnZXRDdXJyZW50U3RlcCAoICkge1xuXG5cdFx0Ly8gQ2hlY2sgYWxsIGxvY2F0aW9ucywgbWFwIHRoZW0gdG8gdGhlaXIgc3RlcHBpbmcgcG9pbnQuXG5cdFx0Ly8gR2V0IHRoZSBzdGVwIHBvaW50LCB0aGVuIGZpbmQgaXQgaW4gdGhlIGlucHV0IGxpc3QuXG5cdFx0cmV0dXJuIHNjb3BlX0xvY2F0aW9ucy5tYXAoZnVuY3Rpb24oIGxvY2F0aW9uLCBpbmRleCApe1xuXG5cdFx0XHR2YXIgbmVhcmJ5U3RlcHMgPSBzY29wZV9TcGVjdHJ1bS5nZXROZWFyYnlTdGVwcyggbG9jYXRpb24gKTtcblx0XHRcdHZhciB2YWx1ZSA9IHNjb3BlX1ZhbHVlc1tpbmRleF07XG5cdFx0XHR2YXIgaW5jcmVtZW50ID0gbmVhcmJ5U3RlcHMudGhpc1N0ZXAuc3RlcDtcblx0XHRcdHZhciBkZWNyZW1lbnQgPSBudWxsO1xuXG5cdFx0XHQvLyBJZiB0aGUgbmV4dCB2YWx1ZSBpbiB0aGlzIHN0ZXAgbW92ZXMgaW50byB0aGUgbmV4dCBzdGVwLFxuXHRcdFx0Ly8gdGhlIGluY3JlbWVudCBpcyB0aGUgc3RhcnQgb2YgdGhlIG5leHQgc3RlcCAtIHRoZSBjdXJyZW50IHZhbHVlXG5cdFx0XHRpZiAoIGluY3JlbWVudCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdGlmICggdmFsdWUgKyBpbmNyZW1lbnQgPiBuZWFyYnlTdGVwcy5zdGVwQWZ0ZXIuc3RhcnRWYWx1ZSApIHtcblx0XHRcdFx0XHRpbmNyZW1lbnQgPSBuZWFyYnlTdGVwcy5zdGVwQWZ0ZXIuc3RhcnRWYWx1ZSAtIHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly8gSWYgdGhlIHZhbHVlIGlzIGJleW9uZCB0aGUgc3RhcnRpbmcgcG9pbnRcblx0XHRcdGlmICggdmFsdWUgPiBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGFydFZhbHVlICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGVwO1xuXHRcdFx0fVxuXG5cdFx0XHRlbHNlIGlmICggbmVhcmJ5U3RlcHMuc3RlcEJlZm9yZS5zdGVwID09PSBmYWxzZSApIHtcblx0XHRcdFx0ZGVjcmVtZW50ID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaGFuZGxlIGlzIGF0IHRoZSBzdGFydCBvZiBhIHN0ZXAsIGl0IGFsd2F5cyBzdGVwcyBiYWNrIGludG8gdGhlIHByZXZpb3VzIHN0ZXAgZmlyc3Rcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSB2YWx1ZSAtIG5lYXJieVN0ZXBzLnN0ZXBCZWZvcmUuaGlnaGVzdFN0ZXA7XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly8gTm93LCBpZiBhdCB0aGUgc2xpZGVyIGVkZ2VzLCB0aGVyZSBpcyBub3QgaW4vZGVjcmVtZW50XG5cdFx0XHRpZiAoIGxvY2F0aW9uID09PSAxMDAgKSB7XG5cdFx0XHRcdGluY3JlbWVudCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKCBsb2NhdGlvbiA9PT0gMCApIHtcblx0XHRcdFx0ZGVjcmVtZW50ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXMgcGVyICMzOTEsIHRoZSBjb21wYXJpc29uIGZvciB0aGUgZGVjcmVtZW50IHN0ZXAgY2FuIGhhdmUgc29tZSByb3VuZGluZyBpc3N1ZXMuXG5cdFx0XHR2YXIgc3RlcERlY2ltYWxzID0gc2NvcGVfU3BlY3RydW0uY291bnRTdGVwRGVjaW1hbHMoKTtcblxuXHRcdFx0Ly8gUm91bmQgcGVyICMzOTFcblx0XHRcdGlmICggaW5jcmVtZW50ICE9PSBudWxsICYmIGluY3JlbWVudCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdGluY3JlbWVudCA9IE51bWJlcihpbmNyZW1lbnQudG9GaXhlZChzdGVwRGVjaW1hbHMpKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBkZWNyZW1lbnQgIT09IG51bGwgJiYgZGVjcmVtZW50ICE9PSBmYWxzZSApIHtcblx0XHRcdFx0ZGVjcmVtZW50ID0gTnVtYmVyKGRlY3JlbWVudC50b0ZpeGVkKHN0ZXBEZWNpbWFscykpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gW2RlY3JlbWVudCwgaW5jcmVtZW50XTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIEF0dGFjaCBhbiBldmVudCB0byB0aGlzIHNsaWRlciwgcG9zc2libHkgaW5jbHVkaW5nIGEgbmFtZXNwYWNlXG5cdGZ1bmN0aW9uIGJpbmRFdmVudCAoIG5hbWVzcGFjZWRFdmVudCwgY2FsbGJhY2sgKSB7XG5cdFx0c2NvcGVfRXZlbnRzW25hbWVzcGFjZWRFdmVudF0gPSBzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XSB8fCBbXTtcblx0XHRzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XS5wdXNoKGNhbGxiYWNrKTtcblxuXHRcdC8vIElmIHRoZSBldmVudCBib3VuZCBpcyAndXBkYXRlLCcgZmlyZSBpdCBpbW1lZGlhdGVseSBmb3IgYWxsIGhhbmRsZXMuXG5cdFx0aWYgKCBuYW1lc3BhY2VkRXZlbnQuc3BsaXQoJy4nKVswXSA9PT0gJ3VwZGF0ZScgKSB7XG5cdFx0XHRzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oYSwgaW5kZXgpe1xuXHRcdFx0XHRmaXJlRXZlbnQoJ3VwZGF0ZScsIGluZGV4KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIFVuZG8gYXR0YWNobWVudCBvZiBldmVudFxuXHRmdW5jdGlvbiByZW1vdmVFdmVudCAoIG5hbWVzcGFjZWRFdmVudCApIHtcblxuXHRcdHZhciBldmVudCA9IG5hbWVzcGFjZWRFdmVudCAmJiBuYW1lc3BhY2VkRXZlbnQuc3BsaXQoJy4nKVswXTtcblx0XHR2YXIgbmFtZXNwYWNlID0gZXZlbnQgJiYgbmFtZXNwYWNlZEV2ZW50LnN1YnN0cmluZyhldmVudC5sZW5ndGgpO1xuXG5cdFx0T2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKCBiaW5kICl7XG5cblx0XHRcdHZhciB0RXZlbnQgPSBiaW5kLnNwbGl0KCcuJylbMF0sXG5cdFx0XHRcdHROYW1lc3BhY2UgPSBiaW5kLnN1YnN0cmluZyh0RXZlbnQubGVuZ3RoKTtcblxuXHRcdFx0aWYgKCAoIWV2ZW50IHx8IGV2ZW50ID09PSB0RXZlbnQpICYmICghbmFtZXNwYWNlIHx8IG5hbWVzcGFjZSA9PT0gdE5hbWVzcGFjZSkgKSB7XG5cdFx0XHRcdGRlbGV0ZSBzY29wZV9FdmVudHNbYmluZF07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBVcGRhdGVhYmxlOiBtYXJnaW4sIGxpbWl0LCBwYWRkaW5nLCBzdGVwLCByYW5nZSwgYW5pbWF0ZSwgc25hcFxuXHRmdW5jdGlvbiB1cGRhdGVPcHRpb25zICggb3B0aW9uc1RvVXBkYXRlLCBmaXJlU2V0RXZlbnQgKSB7XG5cblx0XHQvLyBTcGVjdHJ1bSBpcyBjcmVhdGVkIHVzaW5nIHRoZSByYW5nZSwgc25hcCwgZGlyZWN0aW9uIGFuZCBzdGVwIG9wdGlvbnMuXG5cdFx0Ly8gJ3NuYXAnIGFuZCAnc3RlcCcgY2FuIGJlIHVwZGF0ZWQuXG5cdFx0Ly8gSWYgJ3NuYXAnIGFuZCAnc3RlcCcgYXJlIG5vdCBwYXNzZWQsIHRoZXkgc2hvdWxkIHJlbWFpbiB1bmNoYW5nZWQuXG5cdFx0dmFyIHYgPSB2YWx1ZUdldCgpO1xuXG5cdFx0dmFyIHVwZGF0ZUFibGUgPSBbJ21hcmdpbicsICdsaW1pdCcsICdwYWRkaW5nJywgJ3JhbmdlJywgJ2FuaW1hdGUnLCAnc25hcCcsICdzdGVwJywgJ2Zvcm1hdCddO1xuXG5cdFx0Ly8gT25seSBjaGFuZ2Ugb3B0aW9ucyB0aGF0IHdlJ3JlIGFjdHVhbGx5IHBhc3NlZCB0byB1cGRhdGUuXG5cdFx0dXBkYXRlQWJsZS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpe1xuXHRcdFx0aWYgKCBvcHRpb25zVG9VcGRhdGVbbmFtZV0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0b3JpZ2luYWxPcHRpb25zW25hbWVdID0gb3B0aW9uc1RvVXBkYXRlW25hbWVdO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dmFyIG5ld09wdGlvbnMgPSB0ZXN0T3B0aW9ucyhvcmlnaW5hbE9wdGlvbnMpO1xuXG5cdFx0Ly8gTG9hZCBuZXcgb3B0aW9ucyBpbnRvIHRoZSBzbGlkZXIgc3RhdGVcblx0XHR1cGRhdGVBYmxlLmZvckVhY2goZnVuY3Rpb24obmFtZSl7XG5cdFx0XHRpZiAoIG9wdGlvbnNUb1VwZGF0ZVtuYW1lXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRvcHRpb25zW25hbWVdID0gbmV3T3B0aW9uc1tuYW1lXTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHNjb3BlX1NwZWN0cnVtID0gbmV3T3B0aW9ucy5zcGVjdHJ1bTtcblxuXHRcdC8vIExpbWl0LCBtYXJnaW4gYW5kIHBhZGRpbmcgZGVwZW5kIG9uIHRoZSBzcGVjdHJ1bSBidXQgYXJlIHN0b3JlZCBvdXRzaWRlIG9mIGl0LiAoIzY3Nylcblx0XHRvcHRpb25zLm1hcmdpbiA9IG5ld09wdGlvbnMubWFyZ2luO1xuXHRcdG9wdGlvbnMubGltaXQgPSBuZXdPcHRpb25zLmxpbWl0O1xuXHRcdG9wdGlvbnMucGFkZGluZyA9IG5ld09wdGlvbnMucGFkZGluZztcblxuXHRcdC8vIFVwZGF0ZSBwaXBzLCByZW1vdmVzIGV4aXN0aW5nLlxuXHRcdGlmICggb3B0aW9ucy5waXBzICkge1xuXHRcdFx0cGlwcyhvcHRpb25zLnBpcHMpO1xuXHRcdH1cblxuXHRcdC8vIEludmFsaWRhdGUgdGhlIGN1cnJlbnQgcG9zaXRpb25pbmcgc28gdmFsdWVTZXQgZm9yY2VzIGFuIHVwZGF0ZS5cblx0XHRzY29wZV9Mb2NhdGlvbnMgPSBbXTtcblx0XHR2YWx1ZVNldChvcHRpb25zVG9VcGRhdGUuc3RhcnQgfHwgdiwgZmlyZVNldEV2ZW50KTtcblx0fVxuXG5cdC8vIFRocm93IGFuIGVycm9yIGlmIHRoZSBzbGlkZXIgd2FzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXG5cdGlmICggc2NvcGVfVGFyZ2V0Lm5vVWlTbGlkZXIgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiBTbGlkZXIgd2FzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXCIpO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIHRoZSBiYXNlIGVsZW1lbnQsIGluaXRpYWxpc2UgSFRNTCBhbmQgc2V0IGNsYXNzZXMuXG5cdC8vIEFkZCBoYW5kbGVzIGFuZCBjb25uZWN0IGVsZW1lbnRzLlxuXHRhZGRTbGlkZXIoc2NvcGVfVGFyZ2V0KTtcblx0YWRkRWxlbWVudHMob3B0aW9ucy5jb25uZWN0LCBzY29wZV9CYXNlKTtcblxuXHRzY29wZV9TZWxmID0ge1xuXHRcdGRlc3Ryb3k6IGRlc3Ryb3ksXG5cdFx0c3RlcHM6IGdldEN1cnJlbnRTdGVwLFxuXHRcdG9uOiBiaW5kRXZlbnQsXG5cdFx0b2ZmOiByZW1vdmVFdmVudCxcblx0XHRnZXQ6IHZhbHVlR2V0LFxuXHRcdHNldDogdmFsdWVTZXQsXG5cdFx0cmVzZXQ6IHZhbHVlUmVzZXQsXG5cdFx0Ly8gRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLCBkb24ndCB1c2UgdGhpcyBpbiB5b3VyIGFwcGxpY2F0aW9uLlxuXHRcdF9fbW92ZUhhbmRsZXM6IGZ1bmN0aW9uKGEsIGIsIGMpIHsgbW92ZUhhbmRsZXMoYSwgYiwgc2NvcGVfTG9jYXRpb25zLCBjKTsgfSxcblx0XHRvcHRpb25zOiBvcmlnaW5hbE9wdGlvbnMsIC8vIElzc3VlICM2MDAsICM2Nzhcblx0XHR1cGRhdGVPcHRpb25zOiB1cGRhdGVPcHRpb25zLFxuXHRcdHRhcmdldDogc2NvcGVfVGFyZ2V0LCAvLyBJc3N1ZSAjNTk3XG5cdFx0cmVtb3ZlUGlwczogcmVtb3ZlUGlwcyxcblx0XHRwaXBzOiBwaXBzIC8vIElzc3VlICM1OTRcblx0fTtcblxuXHQvLyBBdHRhY2ggdXNlciBldmVudHMuXG5cdGJpbmRTbGlkZXJFdmVudHMob3B0aW9ucy5ldmVudHMpO1xuXG5cdC8vIFVzZSB0aGUgcHVibGljIHZhbHVlIG1ldGhvZCB0byBzZXQgdGhlIHN0YXJ0IHZhbHVlcy5cblx0dmFsdWVTZXQob3B0aW9ucy5zdGFydCk7XG5cblx0aWYgKCBvcHRpb25zLnBpcHMgKSB7XG5cdFx0cGlwcyhvcHRpb25zLnBpcHMpO1xuXHR9XG5cblx0aWYgKCBvcHRpb25zLnRvb2x0aXBzICkge1xuXHRcdHRvb2x0aXBzKCk7XG5cdH1cblxuXHRhcmlhKCk7XG5cblx0cmV0dXJuIHNjb3BlX1NlbGY7XG5cbn1cblxuXG5cdC8vIFJ1biB0aGUgc3RhbmRhcmQgaW5pdGlhbGl6ZXJcblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSAoIHRhcmdldCwgb3JpZ2luYWxPcHRpb25zICkge1xuXG5cdFx0aWYgKCAhdGFyZ2V0IHx8ICF0YXJnZXQubm9kZU5hbWUgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IGNyZWF0ZSByZXF1aXJlcyBhIHNpbmdsZSBlbGVtZW50LCBnb3Q6IFwiICsgdGFyZ2V0KTtcblx0XHR9XG5cblx0XHQvLyBUZXN0IHRoZSBvcHRpb25zIGFuZCBjcmVhdGUgdGhlIHNsaWRlciBlbnZpcm9ubWVudDtcblx0XHR2YXIgb3B0aW9ucyA9IHRlc3RPcHRpb25zKCBvcmlnaW5hbE9wdGlvbnMsIHRhcmdldCApO1xuXHRcdHZhciBhcGkgPSBjbG9zdXJlKCB0YXJnZXQsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucyApO1xuXG5cdFx0dGFyZ2V0Lm5vVWlTbGlkZXIgPSBhcGk7XG5cblx0XHRyZXR1cm4gYXBpO1xuXHR9XG5cblx0Ly8gVXNlIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGEgZnVuY3Rpb24gZm9yIGZ1dHVyZSBleHBhbnNpYmlsaXR5O1xuXHRyZXR1cm4ge1xuXHRcdHZlcnNpb246IFZFUlNJT04sXG5cdFx0Y3JlYXRlOiBpbml0aWFsaXplXG5cdH07XG5cbn0pKTsiLCIvKipcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIC0gVXNpbmcgdGhlICdRUkNvZGUgZm9yIEphdmFzY3JpcHQgbGlicmFyeSdcbiAqIC0gRml4ZWQgZGF0YXNldCBvZiAnUVJDb2RlIGZvciBKYXZhc2NyaXB0IGxpYnJhcnknIGZvciBzdXBwb3J0IGZ1bGwtc3BlYy5cbiAqIC0gdGhpcyBsaWJyYXJ5IGhhcyBubyBkZXBlbmRlbmNpZXMuXG4gKiBcbiAqIEBhdXRob3IgZGF2aWRzaGltanNcbiAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly93d3cuZC1wcm9qZWN0LmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5odHRwOi8vd3d3LmQtcHJvamVjdC5jb20vPC9hPlxuICogQHNlZSA8YSBocmVmPVwiaHR0cDovL2plcm9tZWV0aWVubmUuZ2l0aHViLmNvbS9qcXVlcnktcXJjb2RlL1wiIHRhcmdldD1cIl9ibGFua1wiPmh0dHA6Ly9qZXJvbWVldGllbm5lLmdpdGh1Yi5jb20vanF1ZXJ5LXFyY29kZS88L2E+XG4gKi9cbnZhciBRUkNvZGU7XG5cbihmdW5jdGlvbiAoKSB7XG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFFSQ29kZSBmb3IgSmF2YVNjcmlwdFxuXHQvL1xuXHQvLyBDb3B5cmlnaHQgKGMpIDIwMDkgS2F6dWhpa28gQXJhc2Vcblx0Ly9cblx0Ly8gVVJMOiBodHRwOi8vd3d3LmQtcHJvamVjdC5jb20vXG5cdC8vXG5cdC8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcblx0Ly8gICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHQvL1xuXHQvLyBUaGUgd29yZCBcIlFSIENvZGVcIiBpcyByZWdpc3RlcmVkIHRyYWRlbWFyayBvZiBcblx0Ly8gREVOU08gV0FWRSBJTkNPUlBPUkFURURcblx0Ly8gICBodHRwOi8vd3d3LmRlbnNvLXdhdmUuY29tL3FyY29kZS9mYXFwYXRlbnQtZS5odG1sXG5cdC8vXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGZ1bmN0aW9uIFFSOGJpdEJ5dGUoZGF0YSkge1xuXHRcdHRoaXMubW9kZSA9IFFSTW9kZS5NT0RFXzhCSVRfQllURTtcblx0XHR0aGlzLmRhdGEgPSBkYXRhO1xuXHRcdHRoaXMucGFyc2VkRGF0YSA9IFtdO1xuXG5cdFx0Ly8gQWRkZWQgdG8gc3VwcG9ydCBVVEYtOCBDaGFyYWN0ZXJzXG5cdFx0Zm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR2YXIgYnl0ZUFycmF5ID0gW107XG5cdFx0XHR2YXIgY29kZSA9IHRoaXMuZGF0YS5jaGFyQ29kZUF0KGkpO1xuXG5cdFx0XHRpZiAoY29kZSA+IDB4MTAwMDApIHtcblx0XHRcdFx0Ynl0ZUFycmF5WzBdID0gMHhGMCB8ICgoY29kZSAmIDB4MUMwMDAwKSA+Pj4gMTgpO1xuXHRcdFx0XHRieXRlQXJyYXlbMV0gPSAweDgwIHwgKChjb2RlICYgMHgzRjAwMCkgPj4+IDEyKTtcblx0XHRcdFx0Ynl0ZUFycmF5WzJdID0gMHg4MCB8ICgoY29kZSAmIDB4RkMwKSA+Pj4gNik7XG5cdFx0XHRcdGJ5dGVBcnJheVszXSA9IDB4ODAgfCAoY29kZSAmIDB4M0YpO1xuXHRcdFx0fSBlbHNlIGlmIChjb2RlID4gMHg4MDApIHtcblx0XHRcdFx0Ynl0ZUFycmF5WzBdID0gMHhFMCB8ICgoY29kZSAmIDB4RjAwMCkgPj4+IDEyKTtcblx0XHRcdFx0Ynl0ZUFycmF5WzFdID0gMHg4MCB8ICgoY29kZSAmIDB4RkMwKSA+Pj4gNik7XG5cdFx0XHRcdGJ5dGVBcnJheVsyXSA9IDB4ODAgfCAoY29kZSAmIDB4M0YpO1xuXHRcdFx0fSBlbHNlIGlmIChjb2RlID4gMHg4MCkge1xuXHRcdFx0XHRieXRlQXJyYXlbMF0gPSAweEMwIHwgKChjb2RlICYgMHg3QzApID4+PiA2KTtcblx0XHRcdFx0Ynl0ZUFycmF5WzFdID0gMHg4MCB8IChjb2RlICYgMHgzRik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRieXRlQXJyYXlbMF0gPSBjb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnBhcnNlZERhdGEucHVzaChieXRlQXJyYXkpO1xuXHRcdH1cblxuXHRcdHRoaXMucGFyc2VkRGF0YSA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRoaXMucGFyc2VkRGF0YSk7XG5cblx0XHRpZiAodGhpcy5wYXJzZWREYXRhLmxlbmd0aCAhPSB0aGlzLmRhdGEubGVuZ3RoKSB7XG5cdFx0XHR0aGlzLnBhcnNlZERhdGEudW5zaGlmdCgxOTEpO1xuXHRcdFx0dGhpcy5wYXJzZWREYXRhLnVuc2hpZnQoMTg3KTtcblx0XHRcdHRoaXMucGFyc2VkRGF0YS51bnNoaWZ0KDIzOSk7XG5cdFx0fVxuXHR9XG5cblx0UVI4Yml0Qnl0ZS5wcm90b3R5cGUgPSB7XG5cdFx0Z2V0TGVuZ3RoOiBmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wYXJzZWREYXRhLmxlbmd0aDtcblx0XHR9LFxuXHRcdHdyaXRlOiBmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMucGFyc2VkRGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdFx0YnVmZmVyLnB1dCh0aGlzLnBhcnNlZERhdGFbaV0sIDgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRmdW5jdGlvbiBRUkNvZGVNb2RlbCh0eXBlTnVtYmVyLCBlcnJvckNvcnJlY3RMZXZlbCkge1xuXHRcdHRoaXMudHlwZU51bWJlciA9IHR5cGVOdW1iZXI7XG5cdFx0dGhpcy5lcnJvckNvcnJlY3RMZXZlbCA9IGVycm9yQ29ycmVjdExldmVsO1xuXHRcdHRoaXMubW9kdWxlcyA9IG51bGw7XG5cdFx0dGhpcy5tb2R1bGVDb3VudCA9IDA7XG5cdFx0dGhpcy5kYXRhQ2FjaGUgPSBudWxsO1xuXHRcdHRoaXMuZGF0YUxpc3QgPSBbXTtcblx0fVxuXG5cdFFSQ29kZU1vZGVsLnByb3RvdHlwZT17YWRkRGF0YTpmdW5jdGlvbihkYXRhKXt2YXIgbmV3RGF0YT1uZXcgUVI4Yml0Qnl0ZShkYXRhKTt0aGlzLmRhdGFMaXN0LnB1c2gobmV3RGF0YSk7dGhpcy5kYXRhQ2FjaGU9bnVsbDt9LGlzRGFyazpmdW5jdGlvbihyb3csY29sKXtpZihyb3c8MHx8dGhpcy5tb2R1bGVDb3VudDw9cm93fHxjb2w8MHx8dGhpcy5tb2R1bGVDb3VudDw9Y29sKXt0aHJvdyBuZXcgRXJyb3Iocm93K1wiLFwiK2NvbCk7fVxuXHRyZXR1cm4gdGhpcy5tb2R1bGVzW3Jvd11bY29sXTt9LGdldE1vZHVsZUNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kdWxlQ291bnQ7fSxtYWtlOmZ1bmN0aW9uKCl7dGhpcy5tYWtlSW1wbChmYWxzZSx0aGlzLmdldEJlc3RNYXNrUGF0dGVybigpKTt9LG1ha2VJbXBsOmZ1bmN0aW9uKHRlc3QsbWFza1BhdHRlcm4pe3RoaXMubW9kdWxlQ291bnQ9dGhpcy50eXBlTnVtYmVyKjQrMTc7dGhpcy5tb2R1bGVzPW5ldyBBcnJheSh0aGlzLm1vZHVsZUNvdW50KTtmb3IodmFyIHJvdz0wO3Jvdzx0aGlzLm1vZHVsZUNvdW50O3JvdysrKXt0aGlzLm1vZHVsZXNbcm93XT1uZXcgQXJyYXkodGhpcy5tb2R1bGVDb3VudCk7Zm9yKHZhciBjb2w9MDtjb2w8dGhpcy5tb2R1bGVDb3VudDtjb2wrKyl7dGhpcy5tb2R1bGVzW3Jvd11bY29sXT1udWxsO319XG5cdHRoaXMuc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybigwLDApO3RoaXMuc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybih0aGlzLm1vZHVsZUNvdW50LTcsMCk7dGhpcy5zZXR1cFBvc2l0aW9uUHJvYmVQYXR0ZXJuKDAsdGhpcy5tb2R1bGVDb3VudC03KTt0aGlzLnNldHVwUG9zaXRpb25BZGp1c3RQYXR0ZXJuKCk7dGhpcy5zZXR1cFRpbWluZ1BhdHRlcm4oKTt0aGlzLnNldHVwVHlwZUluZm8odGVzdCxtYXNrUGF0dGVybik7aWYodGhpcy50eXBlTnVtYmVyPj03KXt0aGlzLnNldHVwVHlwZU51bWJlcih0ZXN0KTt9XG5cdGlmKHRoaXMuZGF0YUNhY2hlPT1udWxsKXt0aGlzLmRhdGFDYWNoZT1RUkNvZGVNb2RlbC5jcmVhdGVEYXRhKHRoaXMudHlwZU51bWJlcix0aGlzLmVycm9yQ29ycmVjdExldmVsLHRoaXMuZGF0YUxpc3QpO31cblx0dGhpcy5tYXBEYXRhKHRoaXMuZGF0YUNhY2hlLG1hc2tQYXR0ZXJuKTt9LHNldHVwUG9zaXRpb25Qcm9iZVBhdHRlcm46ZnVuY3Rpb24ocm93LGNvbCl7Zm9yKHZhciByPS0xO3I8PTc7cisrKXtpZihyb3crcjw9LTF8fHRoaXMubW9kdWxlQ291bnQ8PXJvdytyKWNvbnRpbnVlO2Zvcih2YXIgYz0tMTtjPD03O2MrKyl7aWYoY29sK2M8PS0xfHx0aGlzLm1vZHVsZUNvdW50PD1jb2wrYyljb250aW51ZTtpZigoMDw9ciYmcjw9NiYmKGM9PTB8fGM9PTYpKXx8KDA8PWMmJmM8PTYmJihyPT0wfHxyPT02KSl8fCgyPD1yJiZyPD00JiYyPD1jJiZjPD00KSl7dGhpcy5tb2R1bGVzW3JvdytyXVtjb2wrY109dHJ1ZTt9ZWxzZXt0aGlzLm1vZHVsZXNbcm93K3JdW2NvbCtjXT1mYWxzZTt9fX19LGdldEJlc3RNYXNrUGF0dGVybjpmdW5jdGlvbigpe3ZhciBtaW5Mb3N0UG9pbnQ9MDt2YXIgcGF0dGVybj0wO2Zvcih2YXIgaT0wO2k8ODtpKyspe3RoaXMubWFrZUltcGwodHJ1ZSxpKTt2YXIgbG9zdFBvaW50PVFSVXRpbC5nZXRMb3N0UG9pbnQodGhpcyk7aWYoaT09MHx8bWluTG9zdFBvaW50Pmxvc3RQb2ludCl7bWluTG9zdFBvaW50PWxvc3RQb2ludDtwYXR0ZXJuPWk7fX1cblx0cmV0dXJuIHBhdHRlcm47fSxjcmVhdGVNb3ZpZUNsaXA6ZnVuY3Rpb24odGFyZ2V0X21jLGluc3RhbmNlX25hbWUsZGVwdGgpe3ZhciBxcl9tYz10YXJnZXRfbWMuY3JlYXRlRW1wdHlNb3ZpZUNsaXAoaW5zdGFuY2VfbmFtZSxkZXB0aCk7dmFyIGNzPTE7dGhpcy5tYWtlKCk7Zm9yKHZhciByb3c9MDtyb3c8dGhpcy5tb2R1bGVzLmxlbmd0aDtyb3crKyl7dmFyIHk9cm93KmNzO2Zvcih2YXIgY29sPTA7Y29sPHRoaXMubW9kdWxlc1tyb3ddLmxlbmd0aDtjb2wrKyl7dmFyIHg9Y29sKmNzO3ZhciBkYXJrPXRoaXMubW9kdWxlc1tyb3ddW2NvbF07aWYoZGFyayl7cXJfbWMuYmVnaW5GaWxsKDAsMTAwKTtxcl9tYy5tb3ZlVG8oeCx5KTtxcl9tYy5saW5lVG8oeCtjcyx5KTtxcl9tYy5saW5lVG8oeCtjcyx5K2NzKTtxcl9tYy5saW5lVG8oeCx5K2NzKTtxcl9tYy5lbmRGaWxsKCk7fX19XG5cdHJldHVybiBxcl9tYzt9LHNldHVwVGltaW5nUGF0dGVybjpmdW5jdGlvbigpe2Zvcih2YXIgcj04O3I8dGhpcy5tb2R1bGVDb3VudC04O3IrKyl7aWYodGhpcy5tb2R1bGVzW3JdWzZdIT1udWxsKXtjb250aW51ZTt9XG5cdHRoaXMubW9kdWxlc1tyXVs2XT0ociUyPT0wKTt9XG5cdGZvcih2YXIgYz04O2M8dGhpcy5tb2R1bGVDb3VudC04O2MrKyl7aWYodGhpcy5tb2R1bGVzWzZdW2NdIT1udWxsKXtjb250aW51ZTt9XG5cdHRoaXMubW9kdWxlc1s2XVtjXT0oYyUyPT0wKTt9fSxzZXR1cFBvc2l0aW9uQWRqdXN0UGF0dGVybjpmdW5jdGlvbigpe3ZhciBwb3M9UVJVdGlsLmdldFBhdHRlcm5Qb3NpdGlvbih0aGlzLnR5cGVOdW1iZXIpO2Zvcih2YXIgaT0wO2k8cG9zLmxlbmd0aDtpKyspe2Zvcih2YXIgaj0wO2o8cG9zLmxlbmd0aDtqKyspe3ZhciByb3c9cG9zW2ldO3ZhciBjb2w9cG9zW2pdO2lmKHRoaXMubW9kdWxlc1tyb3ddW2NvbF0hPW51bGwpe2NvbnRpbnVlO31cblx0Zm9yKHZhciByPS0yO3I8PTI7cisrKXtmb3IodmFyIGM9LTI7Yzw9MjtjKyspe2lmKHI9PS0yfHxyPT0yfHxjPT0tMnx8Yz09Mnx8KHI9PTAmJmM9PTApKXt0aGlzLm1vZHVsZXNbcm93K3JdW2NvbCtjXT10cnVlO31lbHNle3RoaXMubW9kdWxlc1tyb3crcl1bY29sK2NdPWZhbHNlO319fX19fSxzZXR1cFR5cGVOdW1iZXI6ZnVuY3Rpb24odGVzdCl7dmFyIGJpdHM9UVJVdGlsLmdldEJDSFR5cGVOdW1iZXIodGhpcy50eXBlTnVtYmVyKTtmb3IodmFyIGk9MDtpPDE4O2krKyl7dmFyIG1vZD0oIXRlc3QmJigoYml0cz4+aSkmMSk9PTEpO3RoaXMubW9kdWxlc1tNYXRoLmZsb29yKGkvMyldW2klMyt0aGlzLm1vZHVsZUNvdW50LTgtM109bW9kO31cblx0Zm9yKHZhciBpPTA7aTwxODtpKyspe3ZhciBtb2Q9KCF0ZXN0JiYoKGJpdHM+PmkpJjEpPT0xKTt0aGlzLm1vZHVsZXNbaSUzK3RoaXMubW9kdWxlQ291bnQtOC0zXVtNYXRoLmZsb29yKGkvMyldPW1vZDt9fSxzZXR1cFR5cGVJbmZvOmZ1bmN0aW9uKHRlc3QsbWFza1BhdHRlcm4pe3ZhciBkYXRhPSh0aGlzLmVycm9yQ29ycmVjdExldmVsPDwzKXxtYXNrUGF0dGVybjt2YXIgYml0cz1RUlV0aWwuZ2V0QkNIVHlwZUluZm8oZGF0YSk7Zm9yKHZhciBpPTA7aTwxNTtpKyspe3ZhciBtb2Q9KCF0ZXN0JiYoKGJpdHM+PmkpJjEpPT0xKTtpZihpPDYpe3RoaXMubW9kdWxlc1tpXVs4XT1tb2Q7fWVsc2UgaWYoaTw4KXt0aGlzLm1vZHVsZXNbaSsxXVs4XT1tb2Q7fWVsc2V7dGhpcy5tb2R1bGVzW3RoaXMubW9kdWxlQ291bnQtMTUraV1bOF09bW9kO319XG5cdGZvcih2YXIgaT0wO2k8MTU7aSsrKXt2YXIgbW9kPSghdGVzdCYmKChiaXRzPj5pKSYxKT09MSk7aWYoaTw4KXt0aGlzLm1vZHVsZXNbOF1bdGhpcy5tb2R1bGVDb3VudC1pLTFdPW1vZDt9ZWxzZSBpZihpPDkpe3RoaXMubW9kdWxlc1s4XVsxNS1pLTErMV09bW9kO31lbHNle3RoaXMubW9kdWxlc1s4XVsxNS1pLTFdPW1vZDt9fVxuXHR0aGlzLm1vZHVsZXNbdGhpcy5tb2R1bGVDb3VudC04XVs4XT0oIXRlc3QpO30sbWFwRGF0YTpmdW5jdGlvbihkYXRhLG1hc2tQYXR0ZXJuKXt2YXIgaW5jPS0xO3ZhciByb3c9dGhpcy5tb2R1bGVDb3VudC0xO3ZhciBiaXRJbmRleD03O3ZhciBieXRlSW5kZXg9MDtmb3IodmFyIGNvbD10aGlzLm1vZHVsZUNvdW50LTE7Y29sPjA7Y29sLT0yKXtpZihjb2w9PTYpY29sLS07d2hpbGUodHJ1ZSl7Zm9yKHZhciBjPTA7YzwyO2MrKyl7aWYodGhpcy5tb2R1bGVzW3Jvd11bY29sLWNdPT1udWxsKXt2YXIgZGFyaz1mYWxzZTtpZihieXRlSW5kZXg8ZGF0YS5sZW5ndGgpe2Rhcms9KCgoZGF0YVtieXRlSW5kZXhdPj4+Yml0SW5kZXgpJjEpPT0xKTt9XG5cdHZhciBtYXNrPVFSVXRpbC5nZXRNYXNrKG1hc2tQYXR0ZXJuLHJvdyxjb2wtYyk7aWYobWFzayl7ZGFyaz0hZGFyazt9XG5cdHRoaXMubW9kdWxlc1tyb3ddW2NvbC1jXT1kYXJrO2JpdEluZGV4LS07aWYoYml0SW5kZXg9PS0xKXtieXRlSW5kZXgrKztiaXRJbmRleD03O319fVxuXHRyb3crPWluYztpZihyb3c8MHx8dGhpcy5tb2R1bGVDb3VudDw9cm93KXtyb3ctPWluYztpbmM9LWluYzticmVhazt9fX19fTtRUkNvZGVNb2RlbC5QQUQwPTB4RUM7UVJDb2RlTW9kZWwuUEFEMT0weDExO1FSQ29kZU1vZGVsLmNyZWF0ZURhdGE9ZnVuY3Rpb24odHlwZU51bWJlcixlcnJvckNvcnJlY3RMZXZlbCxkYXRhTGlzdCl7dmFyIHJzQmxvY2tzPVFSUlNCbG9jay5nZXRSU0Jsb2Nrcyh0eXBlTnVtYmVyLGVycm9yQ29ycmVjdExldmVsKTt2YXIgYnVmZmVyPW5ldyBRUkJpdEJ1ZmZlcigpO2Zvcih2YXIgaT0wO2k8ZGF0YUxpc3QubGVuZ3RoO2krKyl7dmFyIGRhdGE9ZGF0YUxpc3RbaV07YnVmZmVyLnB1dChkYXRhLm1vZGUsNCk7YnVmZmVyLnB1dChkYXRhLmdldExlbmd0aCgpLFFSVXRpbC5nZXRMZW5ndGhJbkJpdHMoZGF0YS5tb2RlLHR5cGVOdW1iZXIpKTtkYXRhLndyaXRlKGJ1ZmZlcik7fVxuXHR2YXIgdG90YWxEYXRhQ291bnQ9MDtmb3IodmFyIGk9MDtpPHJzQmxvY2tzLmxlbmd0aDtpKyspe3RvdGFsRGF0YUNvdW50Kz1yc0Jsb2Nrc1tpXS5kYXRhQ291bnQ7fVxuXHRpZihidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCk+dG90YWxEYXRhQ291bnQqOCl7dGhyb3cgbmV3IEVycm9yKFwiY29kZSBsZW5ndGggb3ZlcmZsb3cuIChcIlxuXHQrYnVmZmVyLmdldExlbmd0aEluQml0cygpXG5cdCtcIj5cIlxuXHQrdG90YWxEYXRhQ291bnQqOFxuXHQrXCIpXCIpO31cblx0aWYoYnVmZmVyLmdldExlbmd0aEluQml0cygpKzQ8PXRvdGFsRGF0YUNvdW50Kjgpe2J1ZmZlci5wdXQoMCw0KTt9XG5cdHdoaWxlKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSU4IT0wKXtidWZmZXIucHV0Qml0KGZhbHNlKTt9XG5cdHdoaWxlKHRydWUpe2lmKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKT49dG90YWxEYXRhQ291bnQqOCl7YnJlYWs7fVxuXHRidWZmZXIucHV0KFFSQ29kZU1vZGVsLlBBRDAsOCk7aWYoYnVmZmVyLmdldExlbmd0aEluQml0cygpPj10b3RhbERhdGFDb3VudCo4KXticmVhazt9XG5cdGJ1ZmZlci5wdXQoUVJDb2RlTW9kZWwuUEFEMSw4KTt9XG5cdHJldHVybiBRUkNvZGVNb2RlbC5jcmVhdGVCeXRlcyhidWZmZXIscnNCbG9ja3MpO307UVJDb2RlTW9kZWwuY3JlYXRlQnl0ZXM9ZnVuY3Rpb24oYnVmZmVyLHJzQmxvY2tzKXt2YXIgb2Zmc2V0PTA7dmFyIG1heERjQ291bnQ9MDt2YXIgbWF4RWNDb3VudD0wO3ZhciBkY2RhdGE9bmV3IEFycmF5KHJzQmxvY2tzLmxlbmd0aCk7dmFyIGVjZGF0YT1uZXcgQXJyYXkocnNCbG9ja3MubGVuZ3RoKTtmb3IodmFyIHI9MDtyPHJzQmxvY2tzLmxlbmd0aDtyKyspe3ZhciBkY0NvdW50PXJzQmxvY2tzW3JdLmRhdGFDb3VudDt2YXIgZWNDb3VudD1yc0Jsb2Nrc1tyXS50b3RhbENvdW50LWRjQ291bnQ7bWF4RGNDb3VudD1NYXRoLm1heChtYXhEY0NvdW50LGRjQ291bnQpO21heEVjQ291bnQ9TWF0aC5tYXgobWF4RWNDb3VudCxlY0NvdW50KTtkY2RhdGFbcl09bmV3IEFycmF5KGRjQ291bnQpO2Zvcih2YXIgaT0wO2k8ZGNkYXRhW3JdLmxlbmd0aDtpKyspe2RjZGF0YVtyXVtpXT0weGZmJmJ1ZmZlci5idWZmZXJbaStvZmZzZXRdO31cblx0b2Zmc2V0Kz1kY0NvdW50O3ZhciByc1BvbHk9UVJVdGlsLmdldEVycm9yQ29ycmVjdFBvbHlub21pYWwoZWNDb3VudCk7dmFyIHJhd1BvbHk9bmV3IFFSUG9seW5vbWlhbChkY2RhdGFbcl0scnNQb2x5LmdldExlbmd0aCgpLTEpO3ZhciBtb2RQb2x5PXJhd1BvbHkubW9kKHJzUG9seSk7ZWNkYXRhW3JdPW5ldyBBcnJheShyc1BvbHkuZ2V0TGVuZ3RoKCktMSk7Zm9yKHZhciBpPTA7aTxlY2RhdGFbcl0ubGVuZ3RoO2krKyl7dmFyIG1vZEluZGV4PWkrbW9kUG9seS5nZXRMZW5ndGgoKS1lY2RhdGFbcl0ubGVuZ3RoO2VjZGF0YVtyXVtpXT0obW9kSW5kZXg+PTApP21vZFBvbHkuZ2V0KG1vZEluZGV4KTowO319XG5cdHZhciB0b3RhbENvZGVDb3VudD0wO2Zvcih2YXIgaT0wO2k8cnNCbG9ja3MubGVuZ3RoO2krKyl7dG90YWxDb2RlQ291bnQrPXJzQmxvY2tzW2ldLnRvdGFsQ291bnQ7fVxuXHR2YXIgZGF0YT1uZXcgQXJyYXkodG90YWxDb2RlQ291bnQpO3ZhciBpbmRleD0wO2Zvcih2YXIgaT0wO2k8bWF4RGNDb3VudDtpKyspe2Zvcih2YXIgcj0wO3I8cnNCbG9ja3MubGVuZ3RoO3IrKyl7aWYoaTxkY2RhdGFbcl0ubGVuZ3RoKXtkYXRhW2luZGV4KytdPWRjZGF0YVtyXVtpXTt9fX1cblx0Zm9yKHZhciBpPTA7aTxtYXhFY0NvdW50O2krKyl7Zm9yKHZhciByPTA7cjxyc0Jsb2Nrcy5sZW5ndGg7cisrKXtpZihpPGVjZGF0YVtyXS5sZW5ndGgpe2RhdGFbaW5kZXgrK109ZWNkYXRhW3JdW2ldO319fVxuXHRyZXR1cm4gZGF0YTt9O3ZhciBRUk1vZGU9e01PREVfTlVNQkVSOjE8PDAsTU9ERV9BTFBIQV9OVU06MTw8MSxNT0RFXzhCSVRfQllURToxPDwyLE1PREVfS0FOSkk6MTw8M307dmFyIFFSRXJyb3JDb3JyZWN0TGV2ZWw9e0w6MSxNOjAsUTozLEg6Mn07dmFyIFFSTWFza1BhdHRlcm49e1BBVFRFUk4wMDA6MCxQQVRURVJOMDAxOjEsUEFUVEVSTjAxMDoyLFBBVFRFUk4wMTE6MyxQQVRURVJOMTAwOjQsUEFUVEVSTjEwMTo1LFBBVFRFUk4xMTA6NixQQVRURVJOMTExOjd9O3ZhciBRUlV0aWw9e1BBVFRFUk5fUE9TSVRJT05fVEFCTEU6W1tdLFs2LDE4XSxbNiwyMl0sWzYsMjZdLFs2LDMwXSxbNiwzNF0sWzYsMjIsMzhdLFs2LDI0LDQyXSxbNiwyNiw0Nl0sWzYsMjgsNTBdLFs2LDMwLDU0XSxbNiwzMiw1OF0sWzYsMzQsNjJdLFs2LDI2LDQ2LDY2XSxbNiwyNiw0OCw3MF0sWzYsMjYsNTAsNzRdLFs2LDMwLDU0LDc4XSxbNiwzMCw1Niw4Ml0sWzYsMzAsNTgsODZdLFs2LDM0LDYyLDkwXSxbNiwyOCw1MCw3Miw5NF0sWzYsMjYsNTAsNzQsOThdLFs2LDMwLDU0LDc4LDEwMl0sWzYsMjgsNTQsODAsMTA2XSxbNiwzMiw1OCw4NCwxMTBdLFs2LDMwLDU4LDg2LDExNF0sWzYsMzQsNjIsOTAsMTE4XSxbNiwyNiw1MCw3NCw5OCwxMjJdLFs2LDMwLDU0LDc4LDEwMiwxMjZdLFs2LDI2LDUyLDc4LDEwNCwxMzBdLFs2LDMwLDU2LDgyLDEwOCwxMzRdLFs2LDM0LDYwLDg2LDExMiwxMzhdLFs2LDMwLDU4LDg2LDExNCwxNDJdLFs2LDM0LDYyLDkwLDExOCwxNDZdLFs2LDMwLDU0LDc4LDEwMiwxMjYsMTUwXSxbNiwyNCw1MCw3NiwxMDIsMTI4LDE1NF0sWzYsMjgsNTQsODAsMTA2LDEzMiwxNThdLFs2LDMyLDU4LDg0LDExMCwxMzYsMTYyXSxbNiwyNiw1NCw4MiwxMTAsMTM4LDE2Nl0sWzYsMzAsNTgsODYsMTE0LDE0MiwxNzBdXSxHMTU6KDE8PDEwKXwoMTw8OCl8KDE8PDUpfCgxPDw0KXwoMTw8Mil8KDE8PDEpfCgxPDwwKSxHMTg6KDE8PDEyKXwoMTw8MTEpfCgxPDwxMCl8KDE8PDkpfCgxPDw4KXwoMTw8NSl8KDE8PDIpfCgxPDwwKSxHMTVfTUFTSzooMTw8MTQpfCgxPDwxMil8KDE8PDEwKXwoMTw8NCl8KDE8PDEpLGdldEJDSFR5cGVJbmZvOmZ1bmN0aW9uKGRhdGEpe3ZhciBkPWRhdGE8PDEwO3doaWxlKFFSVXRpbC5nZXRCQ0hEaWdpdChkKS1RUlV0aWwuZ2V0QkNIRGlnaXQoUVJVdGlsLkcxNSk+PTApe2RePShRUlV0aWwuRzE1PDwoUVJVdGlsLmdldEJDSERpZ2l0KGQpLVFSVXRpbC5nZXRCQ0hEaWdpdChRUlV0aWwuRzE1KSkpO31cblx0cmV0dXJuKChkYXRhPDwxMCl8ZCleUVJVdGlsLkcxNV9NQVNLO30sZ2V0QkNIVHlwZU51bWJlcjpmdW5jdGlvbihkYXRhKXt2YXIgZD1kYXRhPDwxMjt3aGlsZShRUlV0aWwuZ2V0QkNIRGlnaXQoZCktUVJVdGlsLmdldEJDSERpZ2l0KFFSVXRpbC5HMTgpPj0wKXtkXj0oUVJVdGlsLkcxODw8KFFSVXRpbC5nZXRCQ0hEaWdpdChkKS1RUlV0aWwuZ2V0QkNIRGlnaXQoUVJVdGlsLkcxOCkpKTt9XG5cdHJldHVybihkYXRhPDwxMil8ZDt9LGdldEJDSERpZ2l0OmZ1bmN0aW9uKGRhdGEpe3ZhciBkaWdpdD0wO3doaWxlKGRhdGEhPTApe2RpZ2l0Kys7ZGF0YT4+Pj0xO31cblx0cmV0dXJuIGRpZ2l0O30sZ2V0UGF0dGVyblBvc2l0aW9uOmZ1bmN0aW9uKHR5cGVOdW1iZXIpe3JldHVybiBRUlV0aWwuUEFUVEVSTl9QT1NJVElPTl9UQUJMRVt0eXBlTnVtYmVyLTFdO30sZ2V0TWFzazpmdW5jdGlvbihtYXNrUGF0dGVybixpLGope3N3aXRjaChtYXNrUGF0dGVybil7Y2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4wMDA6cmV0dXJuKGkraiklMj09MDtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAwMTpyZXR1cm4gaSUyPT0wO2Nhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDEwOnJldHVybiBqJTM9PTA7Y2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4wMTE6cmV0dXJuKGkraiklMz09MDtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjEwMDpyZXR1cm4oTWF0aC5mbG9vcihpLzIpK01hdGguZmxvb3Ioai8zKSklMj09MDtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjEwMTpyZXR1cm4oaSpqKSUyKyhpKmopJTM9PTA7Y2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4xMTA6cmV0dXJuKChpKmopJTIrKGkqaiklMyklMj09MDtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjExMTpyZXR1cm4oKGkqaiklMysoaStqKSUyKSUyPT0wO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiYmFkIG1hc2tQYXR0ZXJuOlwiK21hc2tQYXR0ZXJuKTt9fSxnZXRFcnJvckNvcnJlY3RQb2x5bm9taWFsOmZ1bmN0aW9uKGVycm9yQ29ycmVjdExlbmd0aCl7dmFyIGE9bmV3IFFSUG9seW5vbWlhbChbMV0sMCk7Zm9yKHZhciBpPTA7aTxlcnJvckNvcnJlY3RMZW5ndGg7aSsrKXthPWEubXVsdGlwbHkobmV3IFFSUG9seW5vbWlhbChbMSxRUk1hdGguZ2V4cChpKV0sMCkpO31cblx0cmV0dXJuIGE7fSxnZXRMZW5ndGhJbkJpdHM6ZnVuY3Rpb24obW9kZSx0eXBlKXtpZigxPD10eXBlJiZ0eXBlPDEwKXtzd2l0Y2gobW9kZSl7Y2FzZSBRUk1vZGUuTU9ERV9OVU1CRVI6cmV0dXJuIDEwO2Nhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNOnJldHVybiA5O2Nhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFOnJldHVybiA4O2Nhc2UgUVJNb2RlLk1PREVfS0FOSkk6cmV0dXJuIDg7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJtb2RlOlwiK21vZGUpO319ZWxzZSBpZih0eXBlPDI3KXtzd2l0Y2gobW9kZSl7Y2FzZSBRUk1vZGUuTU9ERV9OVU1CRVI6cmV0dXJuIDEyO2Nhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNOnJldHVybiAxMTtjYXNlIFFSTW9kZS5NT0RFXzhCSVRfQllURTpyZXR1cm4gMTY7Y2FzZSBRUk1vZGUuTU9ERV9LQU5KSTpyZXR1cm4gMTA7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJtb2RlOlwiK21vZGUpO319ZWxzZSBpZih0eXBlPDQxKXtzd2l0Y2gobW9kZSl7Y2FzZSBRUk1vZGUuTU9ERV9OVU1CRVI6cmV0dXJuIDE0O2Nhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNOnJldHVybiAxMztjYXNlIFFSTW9kZS5NT0RFXzhCSVRfQllURTpyZXR1cm4gMTY7Y2FzZSBRUk1vZGUuTU9ERV9LQU5KSTpyZXR1cm4gMTI7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJtb2RlOlwiK21vZGUpO319ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJ0eXBlOlwiK3R5cGUpO319LGdldExvc3RQb2ludDpmdW5jdGlvbihxckNvZGUpe3ZhciBtb2R1bGVDb3VudD1xckNvZGUuZ2V0TW9kdWxlQ291bnQoKTt2YXIgbG9zdFBvaW50PTA7Zm9yKHZhciByb3c9MDtyb3c8bW9kdWxlQ291bnQ7cm93Kyspe2Zvcih2YXIgY29sPTA7Y29sPG1vZHVsZUNvdW50O2NvbCsrKXt2YXIgc2FtZUNvdW50PTA7dmFyIGRhcms9cXJDb2RlLmlzRGFyayhyb3csY29sKTtmb3IodmFyIHI9LTE7cjw9MTtyKyspe2lmKHJvdytyPDB8fG1vZHVsZUNvdW50PD1yb3crcil7Y29udGludWU7fVxuXHRmb3IodmFyIGM9LTE7Yzw9MTtjKyspe2lmKGNvbCtjPDB8fG1vZHVsZUNvdW50PD1jb2wrYyl7Y29udGludWU7fVxuXHRpZihyPT0wJiZjPT0wKXtjb250aW51ZTt9XG5cdGlmKGRhcms9PXFyQ29kZS5pc0Rhcmsocm93K3IsY29sK2MpKXtzYW1lQ291bnQrKzt9fX1cblx0aWYoc2FtZUNvdW50PjUpe2xvc3RQb2ludCs9KDMrc2FtZUNvdW50LTUpO319fVxuXHRmb3IodmFyIHJvdz0wO3Jvdzxtb2R1bGVDb3VudC0xO3JvdysrKXtmb3IodmFyIGNvbD0wO2NvbDxtb2R1bGVDb3VudC0xO2NvbCsrKXt2YXIgY291bnQ9MDtpZihxckNvZGUuaXNEYXJrKHJvdyxjb2wpKWNvdW50Kys7aWYocXJDb2RlLmlzRGFyayhyb3crMSxjb2wpKWNvdW50Kys7aWYocXJDb2RlLmlzRGFyayhyb3csY29sKzEpKWNvdW50Kys7aWYocXJDb2RlLmlzRGFyayhyb3crMSxjb2wrMSkpY291bnQrKztpZihjb3VudD09MHx8Y291bnQ9PTQpe2xvc3RQb2ludCs9Mzt9fX1cblx0Zm9yKHZhciByb3c9MDtyb3c8bW9kdWxlQ291bnQ7cm93Kyspe2Zvcih2YXIgY29sPTA7Y29sPG1vZHVsZUNvdW50LTY7Y29sKyspe2lmKHFyQ29kZS5pc0Rhcmsocm93LGNvbCkmJiFxckNvZGUuaXNEYXJrKHJvdyxjb2wrMSkmJnFyQ29kZS5pc0Rhcmsocm93LGNvbCsyKSYmcXJDb2RlLmlzRGFyayhyb3csY29sKzMpJiZxckNvZGUuaXNEYXJrKHJvdyxjb2wrNCkmJiFxckNvZGUuaXNEYXJrKHJvdyxjb2wrNSkmJnFyQ29kZS5pc0Rhcmsocm93LGNvbCs2KSl7bG9zdFBvaW50Kz00MDt9fX1cblx0Zm9yKHZhciBjb2w9MDtjb2w8bW9kdWxlQ291bnQ7Y29sKyspe2Zvcih2YXIgcm93PTA7cm93PG1vZHVsZUNvdW50LTY7cm93Kyspe2lmKHFyQ29kZS5pc0Rhcmsocm93LGNvbCkmJiFxckNvZGUuaXNEYXJrKHJvdysxLGNvbCkmJnFyQ29kZS5pc0Rhcmsocm93KzIsY29sKSYmcXJDb2RlLmlzRGFyayhyb3crMyxjb2wpJiZxckNvZGUuaXNEYXJrKHJvdys0LGNvbCkmJiFxckNvZGUuaXNEYXJrKHJvdys1LGNvbCkmJnFyQ29kZS5pc0Rhcmsocm93KzYsY29sKSl7bG9zdFBvaW50Kz00MDt9fX1cblx0dmFyIGRhcmtDb3VudD0wO2Zvcih2YXIgY29sPTA7Y29sPG1vZHVsZUNvdW50O2NvbCsrKXtmb3IodmFyIHJvdz0wO3Jvdzxtb2R1bGVDb3VudDtyb3crKyl7aWYocXJDb2RlLmlzRGFyayhyb3csY29sKSl7ZGFya0NvdW50Kys7fX19XG5cdHZhciByYXRpbz1NYXRoLmFicygxMDAqZGFya0NvdW50L21vZHVsZUNvdW50L21vZHVsZUNvdW50LTUwKS81O2xvc3RQb2ludCs9cmF0aW8qMTA7cmV0dXJuIGxvc3RQb2ludDt9fTt2YXIgUVJNYXRoPXtnbG9nOmZ1bmN0aW9uKG4pe2lmKG48MSl7dGhyb3cgbmV3IEVycm9yKFwiZ2xvZyhcIituK1wiKVwiKTt9XG5cdHJldHVybiBRUk1hdGguTE9HX1RBQkxFW25dO30sZ2V4cDpmdW5jdGlvbihuKXt3aGlsZShuPDApe24rPTI1NTt9XG5cdHdoaWxlKG4+PTI1Nil7bi09MjU1O31cblx0cmV0dXJuIFFSTWF0aC5FWFBfVEFCTEVbbl07fSxFWFBfVEFCTEU6bmV3IEFycmF5KDI1NiksTE9HX1RBQkxFOm5ldyBBcnJheSgyNTYpfTtmb3IodmFyIGk9MDtpPDg7aSsrKXtRUk1hdGguRVhQX1RBQkxFW2ldPTE8PGk7fVxuXHRmb3IodmFyIGk9ODtpPDI1NjtpKyspe1FSTWF0aC5FWFBfVEFCTEVbaV09UVJNYXRoLkVYUF9UQUJMRVtpLTRdXlFSTWF0aC5FWFBfVEFCTEVbaS01XV5RUk1hdGguRVhQX1RBQkxFW2ktNl1eUVJNYXRoLkVYUF9UQUJMRVtpLThdO31cblx0Zm9yKHZhciBpPTA7aTwyNTU7aSsrKXtRUk1hdGguTE9HX1RBQkxFW1FSTWF0aC5FWFBfVEFCTEVbaV1dPWk7fVxuXHRmdW5jdGlvbiBRUlBvbHlub21pYWwobnVtLHNoaWZ0KXtpZihudW0ubGVuZ3RoPT11bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcihudW0ubGVuZ3RoK1wiL1wiK3NoaWZ0KTt9XG5cdHZhciBvZmZzZXQ9MDt3aGlsZShvZmZzZXQ8bnVtLmxlbmd0aCYmbnVtW29mZnNldF09PTApe29mZnNldCsrO31cblx0dGhpcy5udW09bmV3IEFycmF5KG51bS5sZW5ndGgtb2Zmc2V0K3NoaWZ0KTtmb3IodmFyIGk9MDtpPG51bS5sZW5ndGgtb2Zmc2V0O2krKyl7dGhpcy5udW1baV09bnVtW2krb2Zmc2V0XTt9fVxuXHRRUlBvbHlub21pYWwucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24oaW5kZXgpe3JldHVybiB0aGlzLm51bVtpbmRleF07fSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5udW0ubGVuZ3RoO30sbXVsdGlwbHk6ZnVuY3Rpb24oZSl7dmFyIG51bT1uZXcgQXJyYXkodGhpcy5nZXRMZW5ndGgoKStlLmdldExlbmd0aCgpLTEpO2Zvcih2YXIgaT0wO2k8dGhpcy5nZXRMZW5ndGgoKTtpKyspe2Zvcih2YXIgaj0wO2o8ZS5nZXRMZW5ndGgoKTtqKyspe251bVtpK2pdXj1RUk1hdGguZ2V4cChRUk1hdGguZ2xvZyh0aGlzLmdldChpKSkrUVJNYXRoLmdsb2coZS5nZXQoaikpKTt9fVxuXHRyZXR1cm4gbmV3IFFSUG9seW5vbWlhbChudW0sMCk7fSxtb2Q6ZnVuY3Rpb24oZSl7aWYodGhpcy5nZXRMZW5ndGgoKS1lLmdldExlbmd0aCgpPDApe3JldHVybiB0aGlzO31cblx0dmFyIHJhdGlvPVFSTWF0aC5nbG9nKHRoaXMuZ2V0KDApKS1RUk1hdGguZ2xvZyhlLmdldCgwKSk7dmFyIG51bT1uZXcgQXJyYXkodGhpcy5nZXRMZW5ndGgoKSk7Zm9yKHZhciBpPTA7aTx0aGlzLmdldExlbmd0aCgpO2krKyl7bnVtW2ldPXRoaXMuZ2V0KGkpO31cblx0Zm9yKHZhciBpPTA7aTxlLmdldExlbmd0aCgpO2krKyl7bnVtW2ldXj1RUk1hdGguZ2V4cChRUk1hdGguZ2xvZyhlLmdldChpKSkrcmF0aW8pO31cblx0cmV0dXJuIG5ldyBRUlBvbHlub21pYWwobnVtLDApLm1vZChlKTt9fTtmdW5jdGlvbiBRUlJTQmxvY2sodG90YWxDb3VudCxkYXRhQ291bnQpe3RoaXMudG90YWxDb3VudD10b3RhbENvdW50O3RoaXMuZGF0YUNvdW50PWRhdGFDb3VudDt9XG5cdFFSUlNCbG9jay5SU19CTE9DS19UQUJMRT1bWzEsMjYsMTldLFsxLDI2LDE2XSxbMSwyNiwxM10sWzEsMjYsOV0sWzEsNDQsMzRdLFsxLDQ0LDI4XSxbMSw0NCwyMl0sWzEsNDQsMTZdLFsxLDcwLDU1XSxbMSw3MCw0NF0sWzIsMzUsMTddLFsyLDM1LDEzXSxbMSwxMDAsODBdLFsyLDUwLDMyXSxbMiw1MCwyNF0sWzQsMjUsOV0sWzEsMTM0LDEwOF0sWzIsNjcsNDNdLFsyLDMzLDE1LDIsMzQsMTZdLFsyLDMzLDExLDIsMzQsMTJdLFsyLDg2LDY4XSxbNCw0MywyN10sWzQsNDMsMTldLFs0LDQzLDE1XSxbMiw5OCw3OF0sWzQsNDksMzFdLFsyLDMyLDE0LDQsMzMsMTVdLFs0LDM5LDEzLDEsNDAsMTRdLFsyLDEyMSw5N10sWzIsNjAsMzgsMiw2MSwzOV0sWzQsNDAsMTgsMiw0MSwxOV0sWzQsNDAsMTQsMiw0MSwxNV0sWzIsMTQ2LDExNl0sWzMsNTgsMzYsMiw1OSwzN10sWzQsMzYsMTYsNCwzNywxN10sWzQsMzYsMTIsNCwzNywxM10sWzIsODYsNjgsMiw4Nyw2OV0sWzQsNjksNDMsMSw3MCw0NF0sWzYsNDMsMTksMiw0NCwyMF0sWzYsNDMsMTUsMiw0NCwxNl0sWzQsMTAxLDgxXSxbMSw4MCw1MCw0LDgxLDUxXSxbNCw1MCwyMiw0LDUxLDIzXSxbMywzNiwxMiw4LDM3LDEzXSxbMiwxMTYsOTIsMiwxMTcsOTNdLFs2LDU4LDM2LDIsNTksMzddLFs0LDQ2LDIwLDYsNDcsMjFdLFs3LDQyLDE0LDQsNDMsMTVdLFs0LDEzMywxMDddLFs4LDU5LDM3LDEsNjAsMzhdLFs4LDQ0LDIwLDQsNDUsMjFdLFsxMiwzMywxMSw0LDM0LDEyXSxbMywxNDUsMTE1LDEsMTQ2LDExNl0sWzQsNjQsNDAsNSw2NSw0MV0sWzExLDM2LDE2LDUsMzcsMTddLFsxMSwzNiwxMiw1LDM3LDEzXSxbNSwxMDksODcsMSwxMTAsODhdLFs1LDY1LDQxLDUsNjYsNDJdLFs1LDU0LDI0LDcsNTUsMjVdLFsxMSwzNiwxMl0sWzUsMTIyLDk4LDEsMTIzLDk5XSxbNyw3Myw0NSwzLDc0LDQ2XSxbMTUsNDMsMTksMiw0NCwyMF0sWzMsNDUsMTUsMTMsNDYsMTZdLFsxLDEzNSwxMDcsNSwxMzYsMTA4XSxbMTAsNzQsNDYsMSw3NSw0N10sWzEsNTAsMjIsMTUsNTEsMjNdLFsyLDQyLDE0LDE3LDQzLDE1XSxbNSwxNTAsMTIwLDEsMTUxLDEyMV0sWzksNjksNDMsNCw3MCw0NF0sWzE3LDUwLDIyLDEsNTEsMjNdLFsyLDQyLDE0LDE5LDQzLDE1XSxbMywxNDEsMTEzLDQsMTQyLDExNF0sWzMsNzAsNDQsMTEsNzEsNDVdLFsxNyw0NywyMSw0LDQ4LDIyXSxbOSwzOSwxMywxNiw0MCwxNF0sWzMsMTM1LDEwNyw1LDEzNiwxMDhdLFszLDY3LDQxLDEzLDY4LDQyXSxbMTUsNTQsMjQsNSw1NSwyNV0sWzE1LDQzLDE1LDEwLDQ0LDE2XSxbNCwxNDQsMTE2LDQsMTQ1LDExN10sWzE3LDY4LDQyXSxbMTcsNTAsMjIsNiw1MSwyM10sWzE5LDQ2LDE2LDYsNDcsMTddLFsyLDEzOSwxMTEsNywxNDAsMTEyXSxbMTcsNzQsNDZdLFs3LDU0LDI0LDE2LDU1LDI1XSxbMzQsMzcsMTNdLFs0LDE1MSwxMjEsNSwxNTIsMTIyXSxbNCw3NSw0NywxNCw3Niw0OF0sWzExLDU0LDI0LDE0LDU1LDI1XSxbMTYsNDUsMTUsMTQsNDYsMTZdLFs2LDE0NywxMTcsNCwxNDgsMTE4XSxbNiw3Myw0NSwxNCw3NCw0Nl0sWzExLDU0LDI0LDE2LDU1LDI1XSxbMzAsNDYsMTYsMiw0NywxN10sWzgsMTMyLDEwNiw0LDEzMywxMDddLFs4LDc1LDQ3LDEzLDc2LDQ4XSxbNyw1NCwyNCwyMiw1NSwyNV0sWzIyLDQ1LDE1LDEzLDQ2LDE2XSxbMTAsMTQyLDExNCwyLDE0MywxMTVdLFsxOSw3NCw0Niw0LDc1LDQ3XSxbMjgsNTAsMjIsNiw1MSwyM10sWzMzLDQ2LDE2LDQsNDcsMTddLFs4LDE1MiwxMjIsNCwxNTMsMTIzXSxbMjIsNzMsNDUsMyw3NCw0Nl0sWzgsNTMsMjMsMjYsNTQsMjRdLFsxMiw0NSwxNSwyOCw0NiwxNl0sWzMsMTQ3LDExNywxMCwxNDgsMTE4XSxbMyw3Myw0NSwyMyw3NCw0Nl0sWzQsNTQsMjQsMzEsNTUsMjVdLFsxMSw0NSwxNSwzMSw0NiwxNl0sWzcsMTQ2LDExNiw3LDE0NywxMTddLFsyMSw3Myw0NSw3LDc0LDQ2XSxbMSw1MywyMywzNyw1NCwyNF0sWzE5LDQ1LDE1LDI2LDQ2LDE2XSxbNSwxNDUsMTE1LDEwLDE0NiwxMTZdLFsxOSw3NSw0NywxMCw3Niw0OF0sWzE1LDU0LDI0LDI1LDU1LDI1XSxbMjMsNDUsMTUsMjUsNDYsMTZdLFsxMywxNDUsMTE1LDMsMTQ2LDExNl0sWzIsNzQsNDYsMjksNzUsNDddLFs0Miw1NCwyNCwxLDU1LDI1XSxbMjMsNDUsMTUsMjgsNDYsMTZdLFsxNywxNDUsMTE1XSxbMTAsNzQsNDYsMjMsNzUsNDddLFsxMCw1NCwyNCwzNSw1NSwyNV0sWzE5LDQ1LDE1LDM1LDQ2LDE2XSxbMTcsMTQ1LDExNSwxLDE0NiwxMTZdLFsxNCw3NCw0NiwyMSw3NSw0N10sWzI5LDU0LDI0LDE5LDU1LDI1XSxbMTEsNDUsMTUsNDYsNDYsMTZdLFsxMywxNDUsMTE1LDYsMTQ2LDExNl0sWzE0LDc0LDQ2LDIzLDc1LDQ3XSxbNDQsNTQsMjQsNyw1NSwyNV0sWzU5LDQ2LDE2LDEsNDcsMTddLFsxMiwxNTEsMTIxLDcsMTUyLDEyMl0sWzEyLDc1LDQ3LDI2LDc2LDQ4XSxbMzksNTQsMjQsMTQsNTUsMjVdLFsyMiw0NSwxNSw0MSw0NiwxNl0sWzYsMTUxLDEyMSwxNCwxNTIsMTIyXSxbNiw3NSw0NywzNCw3Niw0OF0sWzQ2LDU0LDI0LDEwLDU1LDI1XSxbMiw0NSwxNSw2NCw0NiwxNl0sWzE3LDE1MiwxMjIsNCwxNTMsMTIzXSxbMjksNzQsNDYsMTQsNzUsNDddLFs0OSw1NCwyNCwxMCw1NSwyNV0sWzI0LDQ1LDE1LDQ2LDQ2LDE2XSxbNCwxNTIsMTIyLDE4LDE1MywxMjNdLFsxMyw3NCw0NiwzMiw3NSw0N10sWzQ4LDU0LDI0LDE0LDU1LDI1XSxbNDIsNDUsMTUsMzIsNDYsMTZdLFsyMCwxNDcsMTE3LDQsMTQ4LDExOF0sWzQwLDc1LDQ3LDcsNzYsNDhdLFs0Myw1NCwyNCwyMiw1NSwyNV0sWzEwLDQ1LDE1LDY3LDQ2LDE2XSxbMTksMTQ4LDExOCw2LDE0OSwxMTldLFsxOCw3NSw0NywzMSw3Niw0OF0sWzM0LDU0LDI0LDM0LDU1LDI1XSxbMjAsNDUsMTUsNjEsNDYsMTZdXTtRUlJTQmxvY2suZ2V0UlNCbG9ja3M9ZnVuY3Rpb24odHlwZU51bWJlcixlcnJvckNvcnJlY3RMZXZlbCl7dmFyIHJzQmxvY2s9UVJSU0Jsb2NrLmdldFJzQmxvY2tUYWJsZSh0eXBlTnVtYmVyLGVycm9yQ29ycmVjdExldmVsKTtpZihyc0Jsb2NrPT11bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcihcImJhZCBycyBibG9jayBAIHR5cGVOdW1iZXI6XCIrdHlwZU51bWJlcitcIi9lcnJvckNvcnJlY3RMZXZlbDpcIitlcnJvckNvcnJlY3RMZXZlbCk7fVxuXHR2YXIgbGVuZ3RoPXJzQmxvY2subGVuZ3RoLzM7dmFyIGxpc3Q9W107Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt2YXIgY291bnQ9cnNCbG9ja1tpKjMrMF07dmFyIHRvdGFsQ291bnQ9cnNCbG9ja1tpKjMrMV07dmFyIGRhdGFDb3VudD1yc0Jsb2NrW2kqMysyXTtmb3IodmFyIGo9MDtqPGNvdW50O2orKyl7bGlzdC5wdXNoKG5ldyBRUlJTQmxvY2sodG90YWxDb3VudCxkYXRhQ291bnQpKTt9fVxuXHRyZXR1cm4gbGlzdDt9O1FSUlNCbG9jay5nZXRSc0Jsb2NrVGFibGU9ZnVuY3Rpb24odHlwZU51bWJlcixlcnJvckNvcnJlY3RMZXZlbCl7c3dpdGNoKGVycm9yQ29ycmVjdExldmVsKXtjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuTDpyZXR1cm4gUVJSU0Jsb2NrLlJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyLTEpKjQrMF07Y2FzZSBRUkVycm9yQ29ycmVjdExldmVsLk06cmV0dXJuIFFSUlNCbG9jay5SU19CTE9DS19UQUJMRVsodHlwZU51bWJlci0xKSo0KzFdO2Nhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5ROnJldHVybiBRUlJTQmxvY2suUlNfQkxPQ0tfVEFCTEVbKHR5cGVOdW1iZXItMSkqNCsyXTtjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuSDpyZXR1cm4gUVJSU0Jsb2NrLlJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyLTEpKjQrM107ZGVmYXVsdDpyZXR1cm4gdW5kZWZpbmVkO319O2Z1bmN0aW9uIFFSQml0QnVmZmVyKCl7dGhpcy5idWZmZXI9W107dGhpcy5sZW5ndGg9MDt9XG5cdFFSQml0QnVmZmVyLnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKGluZGV4KXt2YXIgYnVmSW5kZXg9TWF0aC5mbG9vcihpbmRleC84KTtyZXR1cm4oKHRoaXMuYnVmZmVyW2J1ZkluZGV4XT4+Pig3LWluZGV4JTgpKSYxKT09MTt9LHB1dDpmdW5jdGlvbihudW0sbGVuZ3RoKXtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3RoaXMucHV0Qml0KCgobnVtPj4+KGxlbmd0aC1pLTEpKSYxKT09MSk7fX0sZ2V0TGVuZ3RoSW5CaXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoO30scHV0Qml0OmZ1bmN0aW9uKGJpdCl7dmFyIGJ1ZkluZGV4PU1hdGguZmxvb3IodGhpcy5sZW5ndGgvOCk7aWYodGhpcy5idWZmZXIubGVuZ3RoPD1idWZJbmRleCl7dGhpcy5idWZmZXIucHVzaCgwKTt9XG5cdGlmKGJpdCl7dGhpcy5idWZmZXJbYnVmSW5kZXhdfD0oMHg4MD4+Pih0aGlzLmxlbmd0aCU4KSk7fVxuXHR0aGlzLmxlbmd0aCsrO319O3ZhciBRUkNvZGVMaW1pdExlbmd0aD1bWzE3LDE0LDExLDddLFszMiwyNiwyMCwxNF0sWzUzLDQyLDMyLDI0XSxbNzgsNjIsNDYsMzRdLFsxMDYsODQsNjAsNDRdLFsxMzQsMTA2LDc0LDU4XSxbMTU0LDEyMiw4Niw2NF0sWzE5MiwxNTIsMTA4LDg0XSxbMjMwLDE4MCwxMzAsOThdLFsyNzEsMjEzLDE1MSwxMTldLFszMjEsMjUxLDE3NywxMzddLFszNjcsMjg3LDIwMywxNTVdLFs0MjUsMzMxLDI0MSwxNzddLFs0NTgsMzYyLDI1OCwxOTRdLFs1MjAsNDEyLDI5MiwyMjBdLFs1ODYsNDUwLDMyMiwyNTBdLFs2NDQsNTA0LDM2NCwyODBdLFs3MTgsNTYwLDM5NCwzMTBdLFs3OTIsNjI0LDQ0MiwzMzhdLFs4NTgsNjY2LDQ4MiwzODJdLFs5MjksNzExLDUwOSw0MDNdLFsxMDAzLDc3OSw1NjUsNDM5XSxbMTA5MSw4NTcsNjExLDQ2MV0sWzExNzEsOTExLDY2MSw1MTFdLFsxMjczLDk5Nyw3MTUsNTM1XSxbMTM2NywxMDU5LDc1MSw1OTNdLFsxNDY1LDExMjUsODA1LDYyNV0sWzE1MjgsMTE5MCw4NjgsNjU4XSxbMTYyOCwxMjY0LDkwOCw2OThdLFsxNzMyLDEzNzAsOTgyLDc0Ml0sWzE4NDAsMTQ1MiwxMDMwLDc5MF0sWzE5NTIsMTUzOCwxMTEyLDg0Ml0sWzIwNjgsMTYyOCwxMTY4LDg5OF0sWzIxODgsMTcyMiwxMjI4LDk1OF0sWzIzMDMsMTgwOSwxMjgzLDk4M10sWzI0MzEsMTkxMSwxMzUxLDEwNTFdLFsyNTYzLDE5ODksMTQyMywxMDkzXSxbMjY5OSwyMDk5LDE0OTksMTEzOV0sWzI4MDksMjIxMywxNTc5LDEyMTldLFsyOTUzLDIzMzEsMTY2MywxMjczXV07XG5cdFxuXHRmdW5jdGlvbiBfaXNTdXBwb3J0Q2FudmFzKCkge1xuXHRcdHJldHVybiB0eXBlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICE9IFwidW5kZWZpbmVkXCI7XG5cdH1cblx0XG5cdC8vIGFuZHJvaWQgMi54IGRvZXNuJ3Qgc3VwcG9ydCBEYXRhLVVSSSBzcGVjXG5cdGZ1bmN0aW9uIF9nZXRBbmRyb2lkKCkge1xuXHRcdHZhciBhbmRyb2lkID0gZmFsc2U7XG5cdFx0dmFyIHNBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdFx0XG5cdFx0aWYgKC9hbmRyb2lkL2kudGVzdChzQWdlbnQpKSB7IC8vIGFuZHJvaWRcblx0XHRcdGFuZHJvaWQgPSB0cnVlO1xuXHRcdFx0dmFyIGFNYXQgPSBzQWdlbnQudG9TdHJpbmcoKS5tYXRjaCgvYW5kcm9pZCAoWzAtOV1cXC5bMC05XSkvaSk7XG5cdFx0XHRcblx0XHRcdGlmIChhTWF0ICYmIGFNYXRbMV0pIHtcblx0XHRcdFx0YW5kcm9pZCA9IHBhcnNlRmxvYXQoYU1hdFsxXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBhbmRyb2lkO1xuXHR9XG5cdFxuXHR2YXIgc3ZnRHJhd2VyID0gKGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIERyYXdpbmcgPSBmdW5jdGlvbiAoZWwsIGh0T3B0aW9uKSB7XG5cdFx0XHR0aGlzLl9lbCA9IGVsO1xuXHRcdFx0dGhpcy5faHRPcHRpb24gPSBodE9wdGlvbjtcblx0XHR9O1xuXG5cdFx0RHJhd2luZy5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIChvUVJDb2RlKSB7XG5cdFx0XHR2YXIgX2h0T3B0aW9uID0gdGhpcy5faHRPcHRpb247XG5cdFx0XHR2YXIgX2VsID0gdGhpcy5fZWw7XG5cdFx0XHR2YXIgbkNvdW50ID0gb1FSQ29kZS5nZXRNb2R1bGVDb3VudCgpO1xuXHRcdFx0dmFyIG5XaWR0aCA9IE1hdGguZmxvb3IoX2h0T3B0aW9uLndpZHRoIC8gbkNvdW50KTtcblx0XHRcdHZhciBuSGVpZ2h0ID0gTWF0aC5mbG9vcihfaHRPcHRpb24uaGVpZ2h0IC8gbkNvdW50KTtcblxuXHRcdFx0dGhpcy5jbGVhcigpO1xuXG5cdFx0XHRmdW5jdGlvbiBtYWtlU1ZHKHRhZywgYXR0cnMpIHtcblx0XHRcdFx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHRhZyk7XG5cdFx0XHRcdGZvciAodmFyIGsgaW4gYXR0cnMpXG5cdFx0XHRcdFx0aWYgKGF0dHJzLmhhc093blByb3BlcnR5KGspKSBlbC5zZXRBdHRyaWJ1dGUoaywgYXR0cnNba10pO1xuXHRcdFx0XHRyZXR1cm4gZWw7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzdmcgPSBtYWtlU1ZHKFwic3ZnXCIgLCB7J3ZpZXdCb3gnOiAnMCAwICcgKyBTdHJpbmcobkNvdW50KSArIFwiIFwiICsgU3RyaW5nKG5Db3VudCksICd3aWR0aCc6ICcxMDAlJywgJ2hlaWdodCc6ICcxMDAlJywgJ2ZpbGwnOiBfaHRPcHRpb24uY29sb3JMaWdodH0pO1xuXHRcdFx0c3ZnLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIiwgXCJ4bWxuczp4bGlua1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIik7XG5cdFx0XHRfZWwuYXBwZW5kQ2hpbGQoc3ZnKTtcblxuXHRcdFx0c3ZnLmFwcGVuZENoaWxkKG1ha2VTVkcoXCJyZWN0XCIsIHtcImZpbGxcIjogX2h0T3B0aW9uLmNvbG9yTGlnaHQsIFwid2lkdGhcIjogXCIxMDAlXCIsIFwiaGVpZ2h0XCI6IFwiMTAwJVwifSkpO1xuXHRcdFx0c3ZnLmFwcGVuZENoaWxkKG1ha2VTVkcoXCJyZWN0XCIsIHtcImZpbGxcIjogX2h0T3B0aW9uLmNvbG9yRGFyaywgXCJ3aWR0aFwiOiBcIjFcIiwgXCJoZWlnaHRcIjogXCIxXCIsIFwiaWRcIjogXCJ0ZW1wbGF0ZVwifSkpO1xuXG5cdFx0XHRmb3IgKHZhciByb3cgPSAwOyByb3cgPCBuQ291bnQ7IHJvdysrKSB7XG5cdFx0XHRcdGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG5Db3VudDsgY29sKyspIHtcblx0XHRcdFx0XHRpZiAob1FSQ29kZS5pc0Rhcmsocm93LCBjb2wpKSB7XG5cdFx0XHRcdFx0XHR2YXIgY2hpbGQgPSBtYWtlU1ZHKFwidXNlXCIsIHtcInhcIjogU3RyaW5nKGNvbCksIFwieVwiOiBTdHJpbmcocm93KX0pO1xuXHRcdFx0XHRcdFx0Y2hpbGQuc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsIFwiaHJlZlwiLCBcIiN0ZW1wbGF0ZVwiKVxuXHRcdFx0XHRcdFx0c3ZnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdERyYXdpbmcucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0d2hpbGUgKHRoaXMuX2VsLmhhc0NoaWxkTm9kZXMoKSlcblx0XHRcdFx0dGhpcy5fZWwucmVtb3ZlQ2hpbGQodGhpcy5fZWwubGFzdENoaWxkKTtcblx0XHR9O1xuXHRcdHJldHVybiBEcmF3aW5nO1xuXHR9KSgpO1xuXG5cdHZhciB1c2VTVkcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInN2Z1wiO1xuXG5cdC8vIERyYXdpbmcgaW4gRE9NIGJ5IHVzaW5nIFRhYmxlIHRhZ1xuXHR2YXIgRHJhd2luZyA9IHVzZVNWRyA/IHN2Z0RyYXdlciA6ICFfaXNTdXBwb3J0Q2FudmFzKCkgPyAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciBEcmF3aW5nID0gZnVuY3Rpb24gKGVsLCBodE9wdGlvbikge1xuXHRcdFx0dGhpcy5fZWwgPSBlbDtcblx0XHRcdHRoaXMuX2h0T3B0aW9uID0gaHRPcHRpb247XG5cdFx0fTtcblx0XHRcdFxuXHRcdC8qKlxuXHRcdCAqIERyYXcgdGhlIFFSQ29kZVxuXHRcdCAqIFxuXHRcdCAqIEBwYXJhbSB7UVJDb2RlfSBvUVJDb2RlXG5cdFx0ICovXG5cdFx0RHJhd2luZy5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIChvUVJDb2RlKSB7XG4gICAgICAgICAgICB2YXIgX2h0T3B0aW9uID0gdGhpcy5faHRPcHRpb247XG4gICAgICAgICAgICB2YXIgX2VsID0gdGhpcy5fZWw7XG5cdFx0XHR2YXIgbkNvdW50ID0gb1FSQ29kZS5nZXRNb2R1bGVDb3VudCgpO1xuXHRcdFx0dmFyIG5XaWR0aCA9IE1hdGguZmxvb3IoX2h0T3B0aW9uLndpZHRoIC8gbkNvdW50KTtcblx0XHRcdHZhciBuSGVpZ2h0ID0gTWF0aC5mbG9vcihfaHRPcHRpb24uaGVpZ2h0IC8gbkNvdW50KTtcblx0XHRcdHZhciBhSFRNTCA9IFsnPHRhYmxlIHN0eWxlPVwiYm9yZGVyOjA7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlO1wiPiddO1xuXHRcdFx0XG5cdFx0XHRmb3IgKHZhciByb3cgPSAwOyByb3cgPCBuQ291bnQ7IHJvdysrKSB7XG5cdFx0XHRcdGFIVE1MLnB1c2goJzx0cj4nKTtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG5Db3VudDsgY29sKyspIHtcblx0XHRcdFx0XHRhSFRNTC5wdXNoKCc8dGQgc3R5bGU9XCJib3JkZXI6MDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7cGFkZGluZzowO21hcmdpbjowO3dpZHRoOicgKyBuV2lkdGggKyAncHg7aGVpZ2h0OicgKyBuSGVpZ2h0ICsgJ3B4O2JhY2tncm91bmQtY29sb3I6JyArIChvUVJDb2RlLmlzRGFyayhyb3csIGNvbCkgPyBfaHRPcHRpb24uY29sb3JEYXJrIDogX2h0T3B0aW9uLmNvbG9yTGlnaHQpICsgJztcIj48L3RkPicpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRhSFRNTC5wdXNoKCc8L3RyPicpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRhSFRNTC5wdXNoKCc8L3RhYmxlPicpO1xuXHRcdFx0X2VsLmlubmVySFRNTCA9IGFIVE1MLmpvaW4oJycpO1xuXHRcdFx0XG5cdFx0XHQvLyBGaXggdGhlIG1hcmdpbiB2YWx1ZXMgYXMgcmVhbCBzaXplLlxuXHRcdFx0dmFyIGVsVGFibGUgPSBfZWwuY2hpbGROb2Rlc1swXTtcblx0XHRcdHZhciBuTGVmdE1hcmdpblRhYmxlID0gKF9odE9wdGlvbi53aWR0aCAtIGVsVGFibGUub2Zmc2V0V2lkdGgpIC8gMjtcblx0XHRcdHZhciBuVG9wTWFyZ2luVGFibGUgPSAoX2h0T3B0aW9uLmhlaWdodCAtIGVsVGFibGUub2Zmc2V0SGVpZ2h0KSAvIDI7XG5cdFx0XHRcblx0XHRcdGlmIChuTGVmdE1hcmdpblRhYmxlID4gMCAmJiBuVG9wTWFyZ2luVGFibGUgPiAwKSB7XG5cdFx0XHRcdGVsVGFibGUuc3R5bGUubWFyZ2luID0gblRvcE1hcmdpblRhYmxlICsgXCJweCBcIiArIG5MZWZ0TWFyZ2luVGFibGUgKyBcInB4XCI7XHRcblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqIENsZWFyIHRoZSBRUkNvZGVcblx0XHQgKi9cblx0XHREcmF3aW5nLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuX2VsLmlubmVySFRNTCA9ICcnO1xuXHRcdH07XG5cdFx0XG5cdFx0cmV0dXJuIERyYXdpbmc7XG5cdH0pKCkgOiAoZnVuY3Rpb24gKCkgeyAvLyBEcmF3aW5nIGluIENhbnZhc1xuXHRcdGZ1bmN0aW9uIF9vbk1ha2VJbWFnZSgpIHtcblx0XHRcdHRoaXMuX2VsSW1hZ2Uuc3JjID0gdGhpcy5fZWxDYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xuXHRcdFx0dGhpcy5fZWxJbWFnZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXHRcdFx0dGhpcy5fZWxDYW52YXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1x0XHRcdFxuXHRcdH1cblx0XHRcblx0XHQvLyBBbmRyb2lkIDIuMSBidWcgd29ya2Fyb3VuZFxuXHRcdC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9NTE0MVxuXHRcdGlmICh0aGlzLl9hbmRyb2lkICYmIHRoaXMuX2FuZHJvaWQgPD0gMi4xKSB7XG5cdCAgICBcdHZhciBmYWN0b3IgPSAxIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG5cdCAgICAgICAgdmFyIGRyYXdJbWFnZSA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZHJhd0ltYWdlOyBcblx0ICAgIFx0Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5kcmF3SW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2UsIHN4LCBzeSwgc3csIHNoLCBkeCwgZHksIGR3LCBkaCkge1xuXHQgICAgXHRcdGlmICgoXCJub2RlTmFtZVwiIGluIGltYWdlKSAmJiAvaW1nL2kudGVzdChpbWFnZS5ub2RlTmFtZSkpIHtcblx0XHQgICAgICAgIFx0Zm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IDE7IGktLSkge1xuXHRcdCAgICAgICAgICAgIFx0YXJndW1lbnRzW2ldID0gYXJndW1lbnRzW2ldICogZmFjdG9yO1xuXHRcdCAgICAgICAgXHR9XG5cdCAgICBcdFx0fSBlbHNlIGlmICh0eXBlb2YgZHcgPT0gXCJ1bmRlZmluZWRcIikge1xuXHQgICAgXHRcdFx0YXJndW1lbnRzWzFdICo9IGZhY3Rvcjtcblx0ICAgIFx0XHRcdGFyZ3VtZW50c1syXSAqPSBmYWN0b3I7XG5cdCAgICBcdFx0XHRhcmd1bWVudHNbM10gKj0gZmFjdG9yO1xuXHQgICAgXHRcdFx0YXJndW1lbnRzWzRdICo9IGZhY3Rvcjtcblx0ICAgIFx0XHR9XG5cdCAgICBcdFx0XG5cdCAgICAgICAgXHRkcmF3SW1hZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgXG5cdCAgICBcdH07XG5cdFx0fVxuXHRcdFxuXHRcdC8qKlxuXHRcdCAqIENoZWNrIHdoZXRoZXIgdGhlIHVzZXIncyBicm93c2VyIHN1cHBvcnRzIERhdGEgVVJJIG9yIG5vdFxuXHRcdCAqIFxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZlN1Y2Nlc3MgT2NjdXJzIGlmIGl0IHN1cHBvcnRzIERhdGEgVVJJXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZkZhaWwgT2NjdXJzIGlmIGl0IGRvZXNuJ3Qgc3VwcG9ydCBEYXRhIFVSSVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIF9zYWZlU2V0RGF0YVVSSShmU3VjY2VzcywgZkZhaWwpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHNlbGYuX2ZGYWlsID0gZkZhaWw7XG4gICAgICAgICAgICBzZWxmLl9mU3VjY2VzcyA9IGZTdWNjZXNzO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpdCBqdXN0IG9uY2VcbiAgICAgICAgICAgIGlmIChzZWxmLl9iU3VwcG9ydERhdGFVUkkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgICAgIHZhciBmT25FcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9iU3VwcG9ydERhdGFVUkkgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5fZkZhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZGYWlsLmNhbGwoc2VsZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBmT25TdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2JTdXBwb3J0RGF0YVVSSSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuX2ZTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9mU3VjY2Vzcy5jYWxsKHNlbGYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGVsLm9uYWJvcnQgPSBmT25FcnJvcjtcbiAgICAgICAgICAgICAgICBlbC5vbmVycm9yID0gZk9uRXJyb3I7XG4gICAgICAgICAgICAgICAgZWwub25sb2FkID0gZk9uU3VjY2VzcztcbiAgICAgICAgICAgICAgICBlbC5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVVBQUFBRkNBWUFBQUNOYnlibEFBQUFIRWxFUVZRSTEyUDQvLzgvdzM4R0lBWERJQktFMERIeGdsak5CQUFPOVRYTDBZNE9Id0FBQUFCSlJVNUVya0pnZ2c9PVwiOyAvLyB0aGUgSW1hZ2UgY29udGFpbnMgMXB4IGRhdGEuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9iU3VwcG9ydERhdGFVUkkgPT09IHRydWUgJiYgc2VsZi5fZlN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9mU3VjY2Vzcy5jYWxsKHNlbGYpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9iU3VwcG9ydERhdGFVUkkgPT09IGZhbHNlICYmIHNlbGYuX2ZGYWlsKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fZkZhaWwuY2FsbChzZWxmKTtcbiAgICAgICAgICAgIH1cblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqIERyYXdpbmcgUVJDb2RlIGJ5IHVzaW5nIGNhbnZhc1xuXHRcdCAqIFxuXHRcdCAqIEBjb25zdHJ1Y3RvclxuXHRcdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IGh0T3B0aW9uIFFSQ29kZSBPcHRpb25zIFxuXHRcdCAqL1xuXHRcdHZhciBEcmF3aW5nID0gZnVuY3Rpb24gKGVsLCBodE9wdGlvbikge1xuICAgIFx0XHR0aGlzLl9iSXNQYWludGVkID0gZmFsc2U7XG4gICAgXHRcdHRoaXMuX2FuZHJvaWQgPSBfZ2V0QW5kcm9pZCgpO1xuXHRcdFxuXHRcdFx0dGhpcy5faHRPcHRpb24gPSBodE9wdGlvbjtcblx0XHRcdHRoaXMuX2VsQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0XHRcdHRoaXMuX2VsQ2FudmFzLndpZHRoID0gaHRPcHRpb24ud2lkdGg7XG5cdFx0XHR0aGlzLl9lbENhbnZhcy5oZWlnaHQgPSBodE9wdGlvbi5oZWlnaHQ7XG5cdFx0XHRlbC5hcHBlbmRDaGlsZCh0aGlzLl9lbENhbnZhcyk7XG5cdFx0XHR0aGlzLl9lbCA9IGVsO1xuXHRcdFx0dGhpcy5fb0NvbnRleHQgPSB0aGlzLl9lbENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cdFx0XHR0aGlzLl9iSXNQYWludGVkID0gZmFsc2U7XG5cdFx0XHR0aGlzLl9lbEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0XHRcdHRoaXMuX2VsSW1hZ2UuYWx0ID0gXCJTY2FuIG1lIVwiO1xuXHRcdFx0dGhpcy5fZWxJbWFnZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR0aGlzLl9lbC5hcHBlbmRDaGlsZCh0aGlzLl9lbEltYWdlKTtcblx0XHRcdHRoaXMuX2JTdXBwb3J0RGF0YVVSSSA9IG51bGw7XG5cdFx0fTtcblx0XHRcdFxuXHRcdC8qKlxuXHRcdCAqIERyYXcgdGhlIFFSQ29kZVxuXHRcdCAqIFxuXHRcdCAqIEBwYXJhbSB7UVJDb2RlfSBvUVJDb2RlIFxuXHRcdCAqL1xuXHRcdERyYXdpbmcucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAob1FSQ29kZSkge1xuICAgICAgICAgICAgdmFyIF9lbEltYWdlID0gdGhpcy5fZWxJbWFnZTtcbiAgICAgICAgICAgIHZhciBfb0NvbnRleHQgPSB0aGlzLl9vQ29udGV4dDtcbiAgICAgICAgICAgIHZhciBfaHRPcHRpb24gPSB0aGlzLl9odE9wdGlvbjtcbiAgICAgICAgICAgIFxuXHRcdFx0dmFyIG5Db3VudCA9IG9RUkNvZGUuZ2V0TW9kdWxlQ291bnQoKTtcblx0XHRcdHZhciBuV2lkdGggPSBfaHRPcHRpb24ud2lkdGggLyBuQ291bnQ7XG5cdFx0XHR2YXIgbkhlaWdodCA9IF9odE9wdGlvbi5oZWlnaHQgLyBuQ291bnQ7XG5cdFx0XHR2YXIgblJvdW5kZWRXaWR0aCA9IE1hdGgucm91bmQobldpZHRoKTtcblx0XHRcdHZhciBuUm91bmRlZEhlaWdodCA9IE1hdGgucm91bmQobkhlaWdodCk7XG5cblx0XHRcdF9lbEltYWdlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdHRoaXMuY2xlYXIoKTtcblx0XHRcdFxuXHRcdFx0Zm9yICh2YXIgcm93ID0gMDsgcm93IDwgbkNvdW50OyByb3crKykge1xuXHRcdFx0XHRmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBuQ291bnQ7IGNvbCsrKSB7XG5cdFx0XHRcdFx0dmFyIGJJc0RhcmsgPSBvUVJDb2RlLmlzRGFyayhyb3csIGNvbCk7XG5cdFx0XHRcdFx0dmFyIG5MZWZ0ID0gY29sICogbldpZHRoO1xuXHRcdFx0XHRcdHZhciBuVG9wID0gcm93ICogbkhlaWdodDtcblx0XHRcdFx0XHRfb0NvbnRleHQuc3Ryb2tlU3R5bGUgPSBiSXNEYXJrID8gX2h0T3B0aW9uLmNvbG9yRGFyayA6IF9odE9wdGlvbi5jb2xvckxpZ2h0O1xuXHRcdFx0XHRcdF9vQ29udGV4dC5saW5lV2lkdGggPSAxO1xuXHRcdFx0XHRcdF9vQ29udGV4dC5maWxsU3R5bGUgPSBiSXNEYXJrID8gX2h0T3B0aW9uLmNvbG9yRGFyayA6IF9odE9wdGlvbi5jb2xvckxpZ2h0O1x0XHRcdFx0XHRcblx0XHRcdFx0XHRfb0NvbnRleHQuZmlsbFJlY3QobkxlZnQsIG5Ub3AsIG5XaWR0aCwgbkhlaWdodCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8g7JWI7YuwIOyVqOumrOyWtOyLsSDrsKnsp4Ag7LKY66asXG5cdFx0XHRcdFx0X29Db250ZXh0LnN0cm9rZVJlY3QoXG5cdFx0XHRcdFx0XHRNYXRoLmZsb29yKG5MZWZ0KSArIDAuNSxcblx0XHRcdFx0XHRcdE1hdGguZmxvb3IoblRvcCkgKyAwLjUsXG5cdFx0XHRcdFx0XHRuUm91bmRlZFdpZHRoLFxuXHRcdFx0XHRcdFx0blJvdW5kZWRIZWlnaHRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdF9vQ29udGV4dC5zdHJva2VSZWN0KFxuXHRcdFx0XHRcdFx0TWF0aC5jZWlsKG5MZWZ0KSAtIDAuNSxcblx0XHRcdFx0XHRcdE1hdGguY2VpbChuVG9wKSAtIDAuNSxcblx0XHRcdFx0XHRcdG5Sb3VuZGVkV2lkdGgsXG5cdFx0XHRcdFx0XHRuUm91bmRlZEhlaWdodFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhpcy5fYklzUGFpbnRlZCA9IHRydWU7XG5cdFx0fTtcblx0XHRcdFxuXHRcdC8qKlxuXHRcdCAqIE1ha2UgdGhlIGltYWdlIGZyb20gQ2FudmFzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIERhdGEgVVJJLlxuXHRcdCAqL1xuXHRcdERyYXdpbmcucHJvdG90eXBlLm1ha2VJbWFnZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICh0aGlzLl9iSXNQYWludGVkKSB7XG5cdFx0XHRcdF9zYWZlU2V0RGF0YVVSSS5jYWxsKHRoaXMsIF9vbk1ha2VJbWFnZSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcdFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybiB3aGV0aGVyIHRoZSBRUkNvZGUgaXMgcGFpbnRlZCBvciBub3Rcblx0XHQgKiBcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdERyYXdpbmcucHJvdG90eXBlLmlzUGFpbnRlZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLl9iSXNQYWludGVkO1xuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICogQ2xlYXIgdGhlIFFSQ29kZVxuXHRcdCAqL1xuXHRcdERyYXdpbmcucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5fb0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuX2VsQ2FudmFzLndpZHRoLCB0aGlzLl9lbENhbnZhcy5oZWlnaHQpO1xuXHRcdFx0dGhpcy5fYklzUGFpbnRlZCA9IGZhbHNlO1xuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gbk51bWJlclxuXHRcdCAqL1xuXHRcdERyYXdpbmcucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24gKG5OdW1iZXIpIHtcblx0XHRcdGlmICghbk51bWJlcikge1xuXHRcdFx0XHRyZXR1cm4gbk51bWJlcjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0cmV0dXJuIE1hdGguZmxvb3Iobk51bWJlciAqIDEwMDApIC8gMTAwMDtcblx0XHR9O1xuXHRcdFxuXHRcdHJldHVybiBEcmF3aW5nO1xuXHR9KSgpO1xuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgdHlwZSBieSBzdHJpbmcgbGVuZ3RoXG5cdCAqIFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc1RleHRcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5Db3JyZWN0TGV2ZWxcblx0ICogQHJldHVybiB7TnVtYmVyfSB0eXBlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0VHlwZU51bWJlcihzVGV4dCwgbkNvcnJlY3RMZXZlbCkge1x0XHRcdFxuXHRcdHZhciBuVHlwZSA9IDE7XG5cdFx0dmFyIGxlbmd0aCA9IF9nZXRVVEY4TGVuZ3RoKHNUZXh0KTtcblx0XHRcblx0XHRmb3IgKHZhciBpID0gMCwgbGVuID0gUVJDb2RlTGltaXRMZW5ndGgubGVuZ3RoOyBpIDw9IGxlbjsgaSsrKSB7XG5cdFx0XHR2YXIgbkxpbWl0ID0gMDtcblx0XHRcdFxuXHRcdFx0c3dpdGNoIChuQ29ycmVjdExldmVsKSB7XG5cdFx0XHRcdGNhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5MIDpcblx0XHRcdFx0XHRuTGltaXQgPSBRUkNvZGVMaW1pdExlbmd0aFtpXVswXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBRUkVycm9yQ29ycmVjdExldmVsLk0gOlxuXHRcdFx0XHRcdG5MaW1pdCA9IFFSQ29kZUxpbWl0TGVuZ3RoW2ldWzFdO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuUSA6XG5cdFx0XHRcdFx0bkxpbWl0ID0gUVJDb2RlTGltaXRMZW5ndGhbaV1bMl07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5IIDpcblx0XHRcdFx0XHRuTGltaXQgPSBRUkNvZGVMaW1pdExlbmd0aFtpXVszXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKGxlbmd0aCA8PSBuTGltaXQpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuVHlwZSsrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpZiAoblR5cGUgPiBRUkNvZGVMaW1pdExlbmd0aC5sZW5ndGgpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRvbyBsb25nIGRhdGFcIik7XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBuVHlwZTtcblx0fVxuXG5cdGZ1bmN0aW9uIF9nZXRVVEY4TGVuZ3RoKHNUZXh0KSB7XG5cdFx0dmFyIHJlcGxhY2VkVGV4dCA9IGVuY29kZVVSSShzVGV4dCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cXCVbMC05YS1mQS1GXXsyfS9nLCAnYScpO1xuXHRcdHJldHVybiByZXBsYWNlZFRleHQubGVuZ3RoICsgKHJlcGxhY2VkVGV4dC5sZW5ndGggIT0gc1RleHQgPyAzIDogMCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAY2xhc3MgUVJDb2RlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXhhbXBsZSBcblx0ICogbmV3IFFSQ29kZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlc3RcIiksIFwiaHR0cDovL2ppbmRvLmRldi5uYXZlci5jb20vY29sbGllXCIpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZVxuXHQgKiB2YXIgb1FSQ29kZSA9IG5ldyBRUkNvZGUoXCJ0ZXN0XCIsIHtcblx0ICogICAgdGV4dCA6IFwiaHR0cDovL25hdmVyLmNvbVwiLFxuXHQgKiAgICB3aWR0aCA6IDEyOCxcblx0ICogICAgaGVpZ2h0IDogMTI4XG5cdCAqIH0pO1xuXHQgKiBcblx0ICogb1FSQ29kZS5jbGVhcigpOyAvLyBDbGVhciB0aGUgUVJDb2RlLlxuXHQgKiBvUVJDb2RlLm1ha2VDb2RlKFwiaHR0cDovL21hcC5uYXZlci5jb21cIik7IC8vIFJlLWNyZWF0ZSB0aGUgUVJDb2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gZWwgdGFyZ2V0IGVsZW1lbnQgb3IgJ2lkJyBhdHRyaWJ1dGUgb2YgZWxlbWVudC5cblx0ICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSB2T3B0aW9uXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2T3B0aW9uLnRleHQgUVJDb2RlIGxpbmsgZGF0YVxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3ZPcHRpb24ud2lkdGg9MjU2XVxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3ZPcHRpb24uaGVpZ2h0PTI1Nl1cblx0ICogQHBhcmFtIHtTdHJpbmd9IFt2T3B0aW9uLmNvbG9yRGFyaz1cIiMwMDAwMDBcIl1cblx0ICogQHBhcmFtIHtTdHJpbmd9IFt2T3B0aW9uLmNvbG9yTGlnaHQ9XCIjZmZmZmZmXCJdXG5cdCAqIEBwYXJhbSB7UVJDb2RlLkNvcnJlY3RMZXZlbH0gW3ZPcHRpb24uY29ycmVjdExldmVsPVFSQ29kZS5Db3JyZWN0TGV2ZWwuSF0gW0x8TXxRfEhdIFxuXHQgKi9cblx0UVJDb2RlID0gZnVuY3Rpb24gKGVsLCB2T3B0aW9uKSB7XG5cdFx0dGhpcy5faHRPcHRpb24gPSB7XG5cdFx0XHR3aWR0aCA6IDI1NiwgXG5cdFx0XHRoZWlnaHQgOiAyNTYsXG5cdFx0XHR0eXBlTnVtYmVyIDogNCxcblx0XHRcdGNvbG9yRGFyayA6IFwiIzAwMDAwMFwiLFxuXHRcdFx0Y29sb3JMaWdodCA6IFwiI2ZmZmZmZlwiLFxuXHRcdFx0Y29ycmVjdExldmVsIDogUVJFcnJvckNvcnJlY3RMZXZlbC5IXG5cdFx0fTtcblx0XHRcblx0XHRpZiAodHlwZW9mIHZPcHRpb24gPT09ICdzdHJpbmcnKSB7XG5cdFx0XHR2T3B0aW9uXHQ9IHtcblx0XHRcdFx0dGV4dCA6IHZPcHRpb25cblx0XHRcdH07XG5cdFx0fVxuXHRcdFxuXHRcdC8vIE92ZXJ3cml0ZXMgb3B0aW9uc1xuXHRcdGlmICh2T3B0aW9uKSB7XG5cdFx0XHRmb3IgKHZhciBpIGluIHZPcHRpb24pIHtcblx0XHRcdFx0dGhpcy5faHRPcHRpb25baV0gPSB2T3B0aW9uW2ldO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpZiAodHlwZW9mIGVsID09IFwic3RyaW5nXCIpIHtcblx0XHRcdGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9odE9wdGlvbi51c2VTVkcpIHtcblx0XHRcdERyYXdpbmcgPSBzdmdEcmF3ZXI7XG5cdFx0fVxuXHRcdFxuXHRcdHRoaXMuX2FuZHJvaWQgPSBfZ2V0QW5kcm9pZCgpO1xuXHRcdHRoaXMuX2VsID0gZWw7XG5cdFx0dGhpcy5fb1FSQ29kZSA9IG51bGw7XG5cdFx0dGhpcy5fb0RyYXdpbmcgPSBuZXcgRHJhd2luZyh0aGlzLl9lbCwgdGhpcy5faHRPcHRpb24pO1xuXHRcdFxuXHRcdGlmICh0aGlzLl9odE9wdGlvbi50ZXh0KSB7XG5cdFx0XHR0aGlzLm1ha2VDb2RlKHRoaXMuX2h0T3B0aW9uLnRleHQpO1x0XG5cdFx0fVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE1ha2UgdGhlIFFSQ29kZVxuXHQgKiBcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNUZXh0IGxpbmsgZGF0YVxuXHQgKi9cblx0UVJDb2RlLnByb3RvdHlwZS5tYWtlQ29kZSA9IGZ1bmN0aW9uIChzVGV4dCkge1xuXHRcdHRoaXMuX29RUkNvZGUgPSBuZXcgUVJDb2RlTW9kZWwoX2dldFR5cGVOdW1iZXIoc1RleHQsIHRoaXMuX2h0T3B0aW9uLmNvcnJlY3RMZXZlbCksIHRoaXMuX2h0T3B0aW9uLmNvcnJlY3RMZXZlbCk7XG5cdFx0dGhpcy5fb1FSQ29kZS5hZGREYXRhKHNUZXh0KTtcblx0XHR0aGlzLl9vUVJDb2RlLm1ha2UoKTtcblx0XHR0aGlzLl9lbC50aXRsZSA9IHNUZXh0O1xuXHRcdHRoaXMuX29EcmF3aW5nLmRyYXcodGhpcy5fb1FSQ29kZSk7XHRcdFx0XG5cdFx0dGhpcy5tYWtlSW1hZ2UoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBNYWtlIHRoZSBJbWFnZSBmcm9tIENhbnZhcyBlbGVtZW50XG5cdCAqIC0gSXQgb2NjdXJzIGF1dG9tYXRpY2FsbHlcblx0ICogLSBBbmRyb2lkIGJlbG93IDMgZG9lc24ndCBzdXBwb3J0IERhdGEtVVJJIHNwZWMuXG5cdCAqIFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0UVJDb2RlLnByb3RvdHlwZS5tYWtlSW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9vRHJhd2luZy5tYWtlSW1hZ2UgPT0gXCJmdW5jdGlvblwiICYmICghdGhpcy5fYW5kcm9pZCB8fCB0aGlzLl9hbmRyb2lkID49IDMpKSB7XG5cdFx0XHR0aGlzLl9vRHJhd2luZy5tYWtlSW1hZ2UoKTtcblx0XHR9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2xlYXIgdGhlIFFSQ29kZVxuXHQgKi9cblx0UVJDb2RlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0XHR0aGlzLl9vRHJhd2luZy5jbGVhcigpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBuYW1lIFFSQ29kZS5Db3JyZWN0TGV2ZWxcblx0ICovXG5cdFFSQ29kZS5Db3JyZWN0TGV2ZWwgPSBRUkVycm9yQ29ycmVjdExldmVsO1xufSkoKTsiLCIvKipcbiAqIFRpbnlBbmltYXRlXG4gKiAgdmVyc2lvbiAwLjMuMFxuICpcbiAqIFNvdXJjZTogIGh0dHBzOi8vZ2l0aHViLmNvbS9icmFubmVtYW4vVGlueUFuaW1hdGVcbiAqIEF1dGhvcjogIEJyYW4gdmFuIGRlciBNZWVyIDxicmFubW92aWNAZ21haWwuY29tPiAoaHR0cDovL2JyYW4ubmFtZS8pXG4gKiBMaWNlbnNlOiBNSVRcbiAqXG4gKiBGdW5jdGlvbnM6XG4gKiAgVGlueUFuaW1hdGUuYW5pbWF0ZShmcm9tLCB0bywgZHVyYXRpb24sIHVwZGF0ZSwgZWFzaW5nLCBkb25lKVxuICogIFRpbnlBbmltYXRlLmFuaW1hdGVDU1MoZWxlbWVudCwgcHJvcGVydHksIHVuaXQsIGZyb20sIHRvLCBkdXJhdGlvbiwgZWFzaW5nLCBkb25lKVxuICogIFRpbnlBbmltYXRlLmNhbmNlbChhbmltYXRpb24pXG4gKlxuICogUGFyYW1ldGVyczpcbiAqICBlbGVtZW50ICAgSFRNTEVsZW1lbnQgICAgICAgIEEgZG9tIG5vZGVcbiAqICBwcm9wZXJ0eSAgc3RyaW5nICAgICAgICAgICAgIFByb3BlcnR5IG5hbWUsIGFzIGF2YWlsYWJsZSBpbiBlbGVtZW50LnN0eWxlLCBpLmUuICdib3JkZXJSYWRpdXMnLCBub3QgJ2JvcmRlci1yYWRpdXMnXG4gKiAgdW5pdCAgICAgIHN0cmluZyAgICAgICAgICAgICBQcm9wZXJ0eSB1bml0LCBsaWtlICdweCdcbiAqICBmcm9tICAgICAgaW50ICAgICAgICAgICAgICAgIFByb3BlcnR5IHZhbHVlIHRvIGFuaW1hdGUgZnJvbVxuICogIHRvICAgICAgICBpbnQgICAgICAgICAgICAgICAgUHJvcGVydHkgdmFsdWUgdG8gYW5pbWF0ZSB0b1xuICogIGR1cmF0aW9uICBpbnQgICAgICAgICAgICAgICAgRHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzXG4gKiAgdXBkYXRlICAgIGZ1bmN0aW9uICAgICAgICAgICBGdW5jdGlvbiB0byBpbXBsZW1lbnQgdXBkYXRpbmcgdGhlIERPTSwgZ2V0J3MgY2FsbGVkIHdpdGggYSB2YWx1ZSBiZXR3ZWVuIGBmcm9tYCBhbmQgYHRvYFxuICogIGVhc2luZyAgICBzdHJpbmcgfCBmdW5jdGlvbiAgT3B0aW9uYWw6IEEgc3RyaW5nIHdoZW4gdGhlIGVhc2luZyBmdW5jdGlvbiBpcyBhdmFpbGFibGUgaW4gVGlueUFuaW1hdGUuZWFzaW5ncyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhIGZ1bmN0aW9uIHdpdGggdGhlIHNpZ25hdHVyZTogZnVuY3Rpb24odCwgYiwgYywgZCkgey4uLn1cbiAqICBkb25lICAgICAgZnVuY3Rpb24gICAgICAgICAgIE9wdGlvbmFsOiBUbyBiZSBleGVjdXRlZCB3aGVuIHRoZSBhbmltYXRpb24gaGFzIGNvbXBsZXRlZC5cbiAqXG4gKiBSZXR1cm5zOlxuICogIGFuaW1hdGlvbiBvYmplY3QgICAgICAgICAgICAgQW5pbWF0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSBjYW5jZWxlZC5cbiAqL1xuXG4vKipcbiAqIFVuaXZlcnNhbCBNb2R1bGUgRGFuY2VcbiAqICBjb25maWc6IENvbW1vbkpTIFN0cmljdCwgZXhwb3J0cyBHbG9iYWwsIHN1cHBvcnRzIGNpcmN1bGFyIGRlcGVuZGVuY2llc1xuICogIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvXG4gKi9cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoWydleHBvcnRzJ10sIGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiAgICAgICAgICAgIGZhY3RvcnkoKHJvb3QuVGlueUFuaW1hdGUgPSBleHBvcnRzKSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZhY3RvcnkoZXhwb3J0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeSgocm9vdC5UaW55QW5pbWF0ZSA9IHt9KSk7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbihleHBvcnRzKSB7XG5cbiAgICAvKipcbiAgICAgKiBUaW55QW5pbWF0ZS5hbmltYXRlKClcbiAgICAgKi9cbiAgICBleHBvcnRzLmFuaW1hdGUgPSBmdW5jdGlvbihmcm9tLCB0bywgZHVyYXRpb24sIHVwZGF0ZSwgZWFzaW5nLCBkb25lKSB7XG5cbiAgICAgICAgLy8gRWFybHkgYmFpbCBvdXQgaWYgY2FsbGVkIGluY29ycmVjdGx5XG4gICAgICAgIGlmICh0eXBlb2YgZnJvbSAhPT0gJ251bWJlcicgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0byAhPT0gJ251bWJlcicgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ251bWJlcicgfHxcbiAgICAgICAgICAgIHR5cGVvZiB1cGRhdGUgIT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIGVhc2luZ1xuICAgICAgICBpZiAodHlwZW9mIGVhc2luZyA9PT0gJ3N0cmluZycgJiYgZWFzaW5nc1tlYXNpbmddKSB7XG4gICAgICAgICAgICBlYXNpbmcgPSBlYXNpbmdzW2Vhc2luZ107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBlYXNpbmcgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGVhc2luZyA9IGVhc2luZ3MubGluZWFyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIG1vY2sgZG9uZSgpIGZ1bmN0aW9uIGlmIG5lY2Vzc2FyeVxuICAgICAgICBpZiAodHlwZW9mIGRvbmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGRvbmUgPSBmdW5jdGlvbigpIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGljayBpbXBsZW1lbnRhdGlvbiAocmVxdWVzdEFuaW1hdGlvbkZyYW1lIHwgc2V0VGltZW91dClcbiAgICAgICAgdmFyIHJBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFuaW1hdGlvbiBsb29wXG4gICAgICAgIHZhciBjYW5jZWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgY2hhbmdlID0gdG8gLSBmcm9tO1xuICAgICAgICBmdW5jdGlvbiBsb29wKHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgaWYgKGNhbmNlbGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpbWUgPSAodGltZXN0YW1wIHx8ICtuZXcgRGF0ZSgpKSAtIHN0YXJ0O1xuICAgICAgICAgICAgaWYgKHRpbWUgPj0gMCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZShlYXNpbmcodGltZSwgZnJvbSwgY2hhbmdlLCBkdXJhdGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbWUgPj0gMCAmJiB0aW1lID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlKHRvKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJBRihsb29wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUoZnJvbSk7XG5cbiAgICAgICAgLy8gU3RhcnQgYW5pbWF0aW9uIGxvb3BcbiAgICAgICAgdmFyIHN0YXJ0ID0gd2luZG93LnBlcmZvcm1hbmNlICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cgPyB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCkgOiArbmV3IERhdGUoKTtcblxuICAgICAgICByQUYobG9vcCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaW55QW5pbWF0ZS5hbmltYXRlQ1NTKClcbiAgICAgKiAgU2hvcnRjdXQgbWV0aG9kIGZvciBhbmltYXRpbmcgY3NzIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBleHBvcnRzLmFuaW1hdGVDU1MgPSBmdW5jdGlvbihlbGVtZW50LCBwcm9wZXJ0eSwgdW5pdCwgZnJvbSwgdG8sIGR1cmF0aW9uLCBlYXNpbmcsIGRvbmUpIHtcblxuICAgICAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcGVydHldID0gdmFsdWUgKyB1bml0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5hbmltYXRlKGZyb20sIHRvLCBkdXJhdGlvbiwgdXBkYXRlLCBlYXNpbmcsIGRvbmUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaW55QW5pbWF0ZS5jYW5jZWwoKVxuICAgICAqICBNZXRob2QgZm9yIGNhbmNlbGluZyBhbmltYXRpb25zXG4gICAgICovXG4gICAgZXhwb3J0cy5jYW5jZWwgPSBmdW5jdGlvbihhbmltYXRpb24pIHtcbiAgICAgICAgaWYgKCFhbmltYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhbmltYXRpb24uY2FuY2VsKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRpbnlBbmltYXRlLmVhc2luZ3NcbiAgICAgKiAgQWRhcHRlZCBmcm9tIGpRdWVyeSBFYXNpbmdcbiAgICAgKi9cbiAgICB2YXIgZWFzaW5ncyA9IGV4cG9ydHMuZWFzaW5ncyA9IHt9O1xuICAgIGVhc2luZ3MubGluZWFyID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqIHQgLyBkICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluUXVhZCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0UXVhZCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogKHQgLz0gZCkgKiAodCAtIDIpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluT3V0UXVhZCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICgoLS10KSAqICh0IC0gMikgLSAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbkN1YmljID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCAqIHQgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0Q3ViaWMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICsgMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRDdWJpYyA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCArIGI7XG4gICAgICAgIHJldHVybiBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICsgMikgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5RdWFydCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiB0ICogdCArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRRdWFydCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICogdCAtIDEpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluT3V0UXVhcnQgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAtIDIpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluUXVpbnQgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZU91dFF1aW50ID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogdCAqIHQgKiB0ICsgMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRRdWludCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0ICogdCArIDIpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluU2luZSA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogTWF0aC5jb3ModCAvIGQgKiAoTWF0aC5QSSAvIDIpKSArIGMgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0U2luZSA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiBNYXRoLnNpbih0IC8gZCAqIChNYXRoLlBJIC8gMikpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluT3V0U2luZSA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqIChNYXRoLmNvcyhNYXRoLlBJICogdCAvIGQpIC0gMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5FeHBvID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gKHQgPT0gMCkgPyBiIDogYyAqIE1hdGgucG93KDIsIDEwICogKHQgLyBkIC0gMSkpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZU91dEV4cG8gPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAodCA9PSBkKSA/IGIgKyBjIDogYyAqICgtTWF0aC5wb3coMiwgLTEwICogdCAvIGQpICsgMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRFeHBvID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKHQgPT0gZCkgcmV0dXJuIGIgKyBjO1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogTWF0aC5wb3coMiwgMTAgKiAodCAtIDEpKSArIGI7XG4gICAgICAgIHJldHVybiBjIC8gMiAqICgtTWF0aC5wb3coMiwgLTEwICogLS10KSArIDIpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluQ2lyYyA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogKE1hdGguc3FydCgxIC0gKHQgLz0gZCkgKiB0KSAtIDEpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZU91dENpcmMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogTWF0aC5zcXJ0KDEgLSAodCA9IHQgLyBkIC0gMSkgKiB0KSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dENpcmMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gLWMgLyAyICogKE1hdGguc3FydCgxIC0gdCAqIHQpIC0gMSkgKyBiO1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSAodCAtPSAyKSAqIHQpICsgMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5FbGFzdGljID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICB2YXIgcCA9IDA7XG4gICAgICAgIHZhciBhID0gYztcbiAgICAgICAgaWYgKHQgPT0gMCkgcmV0dXJuIGI7XG4gICAgICAgIGlmICgodCAvPSBkKSA9PSAxKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICghcCkgcCA9IGQgKiAuMztcbiAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIHJldHVybiAtKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRFbGFzdGljID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICB2YXIgcCA9IDA7XG4gICAgICAgIHZhciBhID0gYztcbiAgICAgICAgaWYgKHQgPT0gMCkgcmV0dXJuIGI7XG4gICAgICAgIGlmICgodCAvPSBkKSA9PSAxKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICghcCkgcCA9IGQgKiAuMztcbiAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogdCkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSArIGMgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRFbGFzdGljID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICB2YXIgcCA9IDA7XG4gICAgICAgIHZhciBhID0gYztcbiAgICAgICAgaWYgKHQgPT0gMCkgcmV0dXJuIGI7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPT0gMikgcmV0dXJuIGIgKyBjO1xuICAgICAgICBpZiAoIXApIHAgPSBkICogKC4zICogMS41KTtcbiAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIGlmICh0IDwgMSkgcmV0dXJuIC0uNSAqIChhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xuICAgICAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICogLjUgKyBjICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluQmFjayA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIHMpIHtcbiAgICAgICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiAoKHMgKyAxKSAqIHQgLSBzKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRCYWNrID0gZnVuY3Rpb24odCwgYiwgYywgZCwgcykge1xuICAgICAgICBpZiAocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuICAgICAgICByZXR1cm4gYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogKChzICsgMSkgKiB0ICsgcykgKyAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dEJhY2sgPSBmdW5jdGlvbih0LCBiLCBjLCBkLCBzKSB7XG4gICAgICAgIGlmIChzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiAodCAqIHQgKiAoKChzICo9ICgxLjUyNSkpICsgMSkgKiB0IC0gcykpICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHQgKyBzKSArIDIpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluQm91bmNlID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAtIGVhc2luZ3MuZWFzZU91dEJvdW5jZShkIC0gdCwgMCwgYywgZCkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0Qm91bmNlID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCkgPCAoMSAvIDIuNzUpKSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiB0ICogdCkgKyBiO1xuICAgICAgICB9IGVsc2UgaWYgKHQgPCAoMiAvIDIuNzUpKSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAoMS41IC8gMi43NSkpICogdCArIC43NSkgKyBiO1xuICAgICAgICB9IGVsc2UgaWYgKHQgPCAoMi41IC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgyLjI1IC8gMi43NSkpICogdCArIC45Mzc1KSArIGI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAoMi42MjUgLyAyLjc1KSkgKiB0ICsgLjk4NDM3NSkgKyBiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dEJvdW5jZSA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKHQgPCBkIC8gMikgcmV0dXJuIGVhc2luZ3MuZWFzZUluQm91bmNlKHQgKiAyLCAwLCBjLCBkKSAqIC41ICsgYjtcbiAgICAgICAgcmV0dXJuIGVhc2luZ3MuZWFzZU91dEJvdW5jZSh0ICogMiAtIGQsIDAsIGMsIGQpICogLjUgKyBjICogLjUgKyBiO1xuICAgIH07XG5cbn0pKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoWydleHBvcnRzJywgJ21vZHVsZSddLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBmYWN0b3J5KGV4cG9ydHMsIG1vZHVsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1vZCA9IHtcbiAgICAgICAgICAgIGV4cG9ydHM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGZhY3RvcnkobW9kLmV4cG9ydHMsIG1vZCk7XG4gICAgICAgIGdsb2JhbC5JbXBldHVzID0gbW9kLmV4cG9ydHM7XG4gICAgfVxufSkodGhpcywgZnVuY3Rpb24gKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG4gICAgdmFyIHN0b3BUaHJlc2hvbGREZWZhdWx0ID0gMC4zO1xuICAgIHZhciBib3VuY2VEZWNlbGVyYXRpb24gPSAwLjA0O1xuICAgIHZhciBib3VuY2VBY2NlbGVyYXRpb24gPSAwLjExO1xuXG4gICAgLy8gZml4ZXMgd2VpcmQgc2FmYXJpIDEwIGJ1ZyB3aGVyZSBwcmV2ZW50RGVmYXVsdCBpcyBwcmV2ZW50ZWRcbiAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZXRhZml6enkvZmxpY2tpdHkvaXNzdWVzLzQ1NyNpc3N1ZWNvbW1lbnQtMjU0NTAxMzU2XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uICgpIHt9KTtcblxuICAgIHZhciBJbXBldHVzID0gZnVuY3Rpb24gSW1wZXR1cyhfcmVmKSB7XG4gICAgICAgIHZhciBfcmVmJHNvdXJjZSA9IF9yZWYuc291cmNlO1xuICAgICAgICB2YXIgc291cmNlRWwgPSBfcmVmJHNvdXJjZSA9PT0gdW5kZWZpbmVkID8gZG9jdW1lbnQgOiBfcmVmJHNvdXJjZTtcbiAgICAgICAgdmFyIHVwZGF0ZUNhbGxiYWNrID0gX3JlZi51cGRhdGU7XG4gICAgICAgIHZhciBfcmVmJG11bHRpcGxpZXIgPSBfcmVmLm11bHRpcGxpZXI7XG4gICAgICAgIHZhciBtdWx0aXBsaWVyID0gX3JlZiRtdWx0aXBsaWVyID09PSB1bmRlZmluZWQgPyAxIDogX3JlZiRtdWx0aXBsaWVyO1xuICAgICAgICB2YXIgX3JlZiRmcmljdGlvbiA9IF9yZWYuZnJpY3Rpb247XG4gICAgICAgIHZhciBmcmljdGlvbiA9IF9yZWYkZnJpY3Rpb24gPT09IHVuZGVmaW5lZCA/IDAuOTIgOiBfcmVmJGZyaWN0aW9uO1xuICAgICAgICB2YXIgaW5pdGlhbFZhbHVlcyA9IF9yZWYuaW5pdGlhbFZhbHVlcztcbiAgICAgICAgdmFyIGJvdW5kWCA9IF9yZWYuYm91bmRYO1xuICAgICAgICB2YXIgYm91bmRZID0gX3JlZi5ib3VuZFk7XG4gICAgICAgIHZhciBfcmVmJGJvdW5jZSA9IF9yZWYuYm91bmNlO1xuICAgICAgICB2YXIgYm91bmNlID0gX3JlZiRib3VuY2UgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBfcmVmJGJvdW5jZTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW1wZXR1cyk7XG5cbiAgICAgICAgdmFyIGJvdW5kWG1pbiwgYm91bmRYbWF4LCBib3VuZFltaW4sIGJvdW5kWW1heCwgcG9pbnRlckxhc3RYLCBwb2ludGVyTGFzdFksIHBvaW50ZXJDdXJyZW50WCwgcG9pbnRlckN1cnJlbnRZLCBwb2ludGVySWQsIGRlY1ZlbFgsIGRlY1ZlbFk7XG4gICAgICAgIHZhciB0YXJnZXRYID0gMDtcbiAgICAgICAgdmFyIHRhcmdldFkgPSAwO1xuICAgICAgICB2YXIgc3RvcFRocmVzaG9sZCA9IHN0b3BUaHJlc2hvbGREZWZhdWx0ICogbXVsdGlwbGllcjtcbiAgICAgICAgdmFyIHRpY2tpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIHBvaW50ZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZGVjZWxlcmF0aW5nID0gZmFsc2U7XG4gICAgICAgIHZhciB0cmFja2luZ1BvaW50cyA9IFtdO1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluaXRpYWxpemUgaW5zdGFuY2VcclxuICAgICAgICAgKi9cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICBzb3VyY2VFbCA9IHR5cGVvZiBzb3VyY2VFbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNvdXJjZUVsKSA6IHNvdXJjZUVsO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2VFbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSU1QRVRVUzogc291cmNlIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF1cGRhdGVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSU1QRVRVUzogdXBkYXRlIGZ1bmN0aW9uIG5vdCBkZWZpbmVkLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5pdGlhbFZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsVmFsdWVzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFggPSBpbml0aWFsVmFsdWVzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFZhbHVlc1sxXSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRZID0gaW5pdGlhbFZhbHVlc1sxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbFVwZGF0ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgYm91bmQgdmFsdWVzXG4gICAgICAgICAgICBpZiAoYm91bmRYKSB7XG4gICAgICAgICAgICAgICAgYm91bmRYbWluID0gYm91bmRYWzBdO1xuICAgICAgICAgICAgICAgIGJvdW5kWG1heCA9IGJvdW5kWFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChib3VuZFkpIHtcbiAgICAgICAgICAgICAgICBib3VuZFltaW4gPSBib3VuZFlbMF07XG4gICAgICAgICAgICAgICAgYm91bmRZbWF4ID0gYm91bmRZWzFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzb3VyY2VFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Eb3duKTtcbiAgICAgICAgICAgIHNvdXJjZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG93bik7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW4gZWRnZSBjYXNlcyB3aGVyZSB5b3UgbWF5IG5lZWQgdG9cclxuICAgICAgICAgKiByZWluc3RhbmNpYXRlIEltcGV0dXMgb24gdGhlIHNhbWUgc291cmNlRWxcclxuICAgICAgICAgKiB0aGlzIHdpbGwgcmVtb3ZlIHRoZSBwcmV2aW91cyBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc291cmNlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uRG93bik7XG4gICAgICAgICAgICBzb3VyY2VFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvd24pO1xuICAgICAgICAgICAgLy8gaG93ZXZlciBpdCB3b24ndCBcImRlc3Ryb3lcIiBhIHJlZmVyZW5jZVxuICAgICAgICAgICAgLy8gdG8gaW5zdGFuY2UgaWYgeW91J2QgbGlrZSB0byBkbyB0aGF0XG4gICAgICAgICAgICAvLyBpdCByZXR1cm5zIG51bGwgYXMgYSBjb252aW5pZW5jZS5cbiAgICAgICAgICAgIC8vIGV4OiBgaW5zdGFuY2UgPSBpbnN0YW5jZS5kZXN0cm95KCk7YFxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlzYWJsZSBtb3ZlbWVudCBwcm9jZXNzaW5nXHJcbiAgICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcG9pbnRlckFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmFibGUgbW92ZW1lbnQgcHJvY2Vzc2luZ1xyXG4gICAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgdGhlIGN1cnJlbnQgeCBhbmQgeSB2YWx1ZXNcclxuICAgICAgICAgKiBAcHVibGljXHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHhcclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0geVxyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldFZhbHVlcyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WCA9IHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WSA9IHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBtdWx0aXBsaWVyIHZhbHVlXHJcbiAgICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWxcclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRNdWx0aXBsaWVyID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgbXVsdGlwbGllciA9IHZhbDtcbiAgICAgICAgICAgIHN0b3BUaHJlc2hvbGQgPSBzdG9wVGhyZXNob2xkRGVmYXVsdCAqIG11bHRpcGxpZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGJvdW5kWCB2YWx1ZVxyXG4gICAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcltdfSBib3VuZFhcclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRCb3VuZFggPSBmdW5jdGlvbiAoYm91bmRYKSB7XG4gICAgICAgICAgICBib3VuZFhtaW4gPSBib3VuZFhbMF07XG4gICAgICAgICAgICBib3VuZFhtYXggPSBib3VuZFhbMV07XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGJvdW5kWSB2YWx1ZVxyXG4gICAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcltdfSBib3VuZFlcclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRCb3VuZFkgPSBmdW5jdGlvbiAoYm91bmRZKSB7XG4gICAgICAgICAgICBib3VuZFltaW4gPSBib3VuZFlbMF07XG4gICAgICAgICAgICBib3VuZFltYXggPSBib3VuZFlbMV07XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXhlY3V0ZXMgdGhlIHVwZGF0ZSBmdW5jdGlvblxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxsVXBkYXRlQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICB1cGRhdGVDYWxsYmFjay5jYWxsKHNvdXJjZUVsLCB0YXJnZXRYLCB0YXJnZXRZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBjdXN0b20gbm9ybWFsaXplZCBldmVudCBvYmplY3QgZnJvbSB0b3VjaCBhbmQgbW91c2UgZXZlbnRzXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2XHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gd2l0aCB4LCB5LCBhbmQgaWQgcHJvcGVydGllc1xyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVFdmVudChldikge1xuICAgICAgICAgICAgaWYgKGV2LnR5cGUgPT09ICd0b3VjaG1vdmUnIHx8IGV2LnR5cGUgPT09ICd0b3VjaHN0YXJ0JyB8fCBldi50eXBlID09PSAndG91Y2hlbmQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoID0gZXYudGFyZ2V0VG91Y2hlc1swXSB8fCBldi5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB4OiB0b3VjaC5jbGllbnRYLFxuICAgICAgICAgICAgICAgICAgICB5OiB0b3VjaC5jbGllbnRZLFxuICAgICAgICAgICAgICAgICAgICBpZDogdG91Y2guaWRlbnRpZmllclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1vdXNlIGV2ZW50c1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGV2LmNsaWVudFgsXG4gICAgICAgICAgICAgICAgICAgIHk6IGV2LmNsaWVudFksXG4gICAgICAgICAgICAgICAgICAgIGlkOiBudWxsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluaXRpYWxpemVzIG1vdmVtZW50IHRyYWNraW5nXHJcbiAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBldiBOb3JtYWxpemVkIGV2ZW50XHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG9uRG93bihldikge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQoZXYpO1xuICAgICAgICAgICAgaWYgKCFwb2ludGVyQWN0aXZlICYmICFwYXVzZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkZWNlbGVyYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBwb2ludGVySWQgPSBldmVudC5pZDtcblxuICAgICAgICAgICAgICAgIHBvaW50ZXJMYXN0WCA9IHBvaW50ZXJDdXJyZW50WCA9IGV2ZW50Lng7XG4gICAgICAgICAgICAgICAgcG9pbnRlckxhc3RZID0gcG9pbnRlckN1cnJlbnRZID0gZXZlbnQueTtcbiAgICAgICAgICAgICAgICB0cmFja2luZ1BvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIGFkZFRyYWNraW5nUG9pbnQocG9pbnRlckxhc3RYLCBwb2ludGVyTGFzdFkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQHNlZSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzAxL3Njcm9sbGluZy1pbnRlcnZlbnRpb25cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvbk1vdmUsIGdldFBhc3NpdmVTdXBwb3J0ZWQoKSA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVXApO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgc3RvcFRyYWNraW5nKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdmUsIGdldFBhc3NpdmVTdXBwb3J0ZWQoKSA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25VcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVzIG1vdmUgZXZlbnRzXHJcbiAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBldiBOb3JtYWxpemVkIGV2ZW50XHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG9uTW92ZShldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KGV2KTtcblxuICAgICAgICAgICAgaWYgKHBvaW50ZXJBY3RpdmUgJiYgZXZlbnQuaWQgPT09IHBvaW50ZXJJZCkge1xuICAgICAgICAgICAgICAgIHBvaW50ZXJDdXJyZW50WCA9IGV2ZW50Lng7XG4gICAgICAgICAgICAgICAgcG9pbnRlckN1cnJlbnRZID0gZXZlbnQueTtcbiAgICAgICAgICAgICAgICBhZGRUcmFja2luZ1BvaW50KHBvaW50ZXJMYXN0WCwgcG9pbnRlckxhc3RZKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlcyB1cC9lbmQgZXZlbnRzXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2IE5vcm1hbGl6ZWQgZXZlbnRcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gb25VcChldikge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQoZXYpO1xuXG4gICAgICAgICAgICBpZiAocG9pbnRlckFjdGl2ZSAmJiBldmVudC5pZCA9PT0gcG9pbnRlcklkKSB7XG4gICAgICAgICAgICAgICAgc3RvcFRyYWNraW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdG9wcyBtb3ZlbWVudCB0cmFja2luZywgc3RhcnRzIGFuaW1hdGlvblxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdG9wVHJhY2tpbmcoKSB7XG4gICAgICAgICAgICBwb2ludGVyQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBhZGRUcmFja2luZ1BvaW50KHBvaW50ZXJMYXN0WCwgcG9pbnRlckxhc3RZKTtcbiAgICAgICAgICAgIHN0YXJ0RGVjZWxBbmltKCk7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uTW92ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVXApO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBzdG9wVHJhY2tpbmcpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uVXApO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3ZlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlY29yZHMgbW92ZW1lbnQgZm9yIHRoZSBsYXN0IDEwMG1zXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geSBbZGVzY3JpcHRpb25dXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRyYWNraW5nUG9pbnQoeCwgeSkge1xuICAgICAgICAgICAgdmFyIHRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgd2hpbGUgKHRyYWNraW5nUG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGltZSAtIHRyYWNraW5nUG9pbnRzWzBdLnRpbWUgPD0gMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFja2luZ1BvaW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmFja2luZ1BvaW50cy5wdXNoKHsgeDogeCwgeTogeSwgdGltZTogdGltZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGN1bGF0ZSBuZXcgdmFsdWVzLCBjYWxsIHVwZGF0ZSBmdW5jdGlvblxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbmRSZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnRlckNoYW5nZVggPSBwb2ludGVyQ3VycmVudFggLSBwb2ludGVyTGFzdFg7XG4gICAgICAgICAgICB2YXIgcG9pbnRlckNoYW5nZVkgPSBwb2ludGVyQ3VycmVudFkgLSBwb2ludGVyTGFzdFk7XG5cbiAgICAgICAgICAgIHRhcmdldFggKz0gcG9pbnRlckNoYW5nZVggKiBtdWx0aXBsaWVyO1xuICAgICAgICAgICAgdGFyZ2V0WSArPSBwb2ludGVyQ2hhbmdlWSAqIG11bHRpcGxpZXI7XG5cbiAgICAgICAgICAgIGlmIChib3VuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGNoZWNrQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmYueCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRYIC09IHBvaW50ZXJDaGFuZ2VYICogZHJhZ091dE9mQm91bmRzTXVsdGlwbGllcihkaWZmLngpICogbXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpZmYueSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRZIC09IHBvaW50ZXJDaGFuZ2VZICogZHJhZ091dE9mQm91bmRzTXVsdGlwbGllcihkaWZmLnkpICogbXVsdGlwbGllcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoZWNrQm91bmRzKHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsVXBkYXRlQ2FsbGJhY2soKTtcblxuICAgICAgICAgICAgcG9pbnRlckxhc3RYID0gcG9pbnRlckN1cnJlbnRYO1xuICAgICAgICAgICAgcG9pbnRlckxhc3RZID0gcG9pbnRlckN1cnJlbnRZO1xuICAgICAgICAgICAgdGlja2luZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyBhIHZhbHVlIGZyb20gYXJvdW5kIDAuNSB0byAxLCBiYXNlZCBvbiBkaXN0YW5jZVxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWxcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZHJhZ091dE9mQm91bmRzTXVsdGlwbGllcih2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjAwMDAwNSAqIE1hdGgucG93KHZhbCwgMikgKyAwLjAwMDEgKiB2YWwgKyAwLjU1O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcHJldmVudHMgYW5pbWF0aW5nIGZhc3RlciB0aGFuIGN1cnJlbnQgZnJhbWVyYXRlXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlcXVlc3RUaWNrKCkge1xuICAgICAgICAgICAgaWYgKCF0aWNraW5nKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1GcmFtZSh1cGRhdGVBbmRSZW5kZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlja2luZyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmUgcG9zaXRpb24gcmVsYXRpdmUgdG8gYm91bmRzXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSByZXN0cmljdCBXaGV0aGVyIHRvIHJlc3RyaWN0IHRhcmdldCB0byBib3VuZHNcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tCb3VuZHMocmVzdHJpY3QpIHtcbiAgICAgICAgICAgIHZhciB4RGlmZiA9IDA7XG4gICAgICAgICAgICB2YXIgeURpZmYgPSAwO1xuXG4gICAgICAgICAgICBpZiAoYm91bmRYbWluICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0WCA8IGJvdW5kWG1pbikge1xuICAgICAgICAgICAgICAgIHhEaWZmID0gYm91bmRYbWluIC0gdGFyZ2V0WDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYm91bmRYbWF4ICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0WCA+IGJvdW5kWG1heCkge1xuICAgICAgICAgICAgICAgIHhEaWZmID0gYm91bmRYbWF4IC0gdGFyZ2V0WDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJvdW5kWW1pbiAhPT0gdW5kZWZpbmVkICYmIHRhcmdldFkgPCBib3VuZFltaW4pIHtcbiAgICAgICAgICAgICAgICB5RGlmZiA9IGJvdW5kWW1pbiAtIHRhcmdldFk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJvdW5kWW1heCAhPT0gdW5kZWZpbmVkICYmIHRhcmdldFkgPiBib3VuZFltYXgpIHtcbiAgICAgICAgICAgICAgICB5RGlmZiA9IGJvdW5kWW1heCAtIHRhcmdldFk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXN0cmljdCkge1xuICAgICAgICAgICAgICAgIGlmICh4RGlmZiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRYID0geERpZmYgPiAwID8gYm91bmRYbWluIDogYm91bmRYbWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeURpZmYgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0WSA9IHlEaWZmID4gMCA/IGJvdW5kWW1pbiA6IGJvdW5kWW1heDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogeERpZmYsXG4gICAgICAgICAgICAgICAgeTogeURpZmYsXG4gICAgICAgICAgICAgICAgaW5Cb3VuZHM6IHhEaWZmID09PSAwICYmIHlEaWZmID09PSAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZSBhbmltYXRpb24gb2YgdmFsdWVzIGNvbWluZyB0byBhIHN0b3BcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc3RhcnREZWNlbEFuaW0oKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RQb2ludCA9IHRyYWNraW5nUG9pbnRzWzBdO1xuICAgICAgICAgICAgdmFyIGxhc3RQb2ludCA9IHRyYWNraW5nUG9pbnRzW3RyYWNraW5nUG9pbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICB2YXIgeE9mZnNldCA9IGxhc3RQb2ludC54IC0gZmlyc3RQb2ludC54O1xuICAgICAgICAgICAgdmFyIHlPZmZzZXQgPSBsYXN0UG9pbnQueSAtIGZpcnN0UG9pbnQueTtcbiAgICAgICAgICAgIHZhciB0aW1lT2Zmc2V0ID0gbGFzdFBvaW50LnRpbWUgLSBmaXJzdFBvaW50LnRpbWU7XG5cbiAgICAgICAgICAgIHZhciBEID0gdGltZU9mZnNldCAvIDE1IC8gbXVsdGlwbGllcjtcblxuICAgICAgICAgICAgZGVjVmVsWCA9IHhPZmZzZXQgLyBEIHx8IDA7IC8vIHByZXZlbnQgTmFOXG4gICAgICAgICAgICBkZWNWZWxZID0geU9mZnNldCAvIEQgfHwgMDtcblxuICAgICAgICAgICAgdmFyIGRpZmYgPSBjaGVja0JvdW5kcygpO1xuXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGVjVmVsWCkgPiAxIHx8IE1hdGguYWJzKGRlY1ZlbFkpID4gMSB8fCAhZGlmZi5pbkJvdW5kcykge1xuICAgICAgICAgICAgICAgIGRlY2VsZXJhdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1GcmFtZShzdGVwRGVjZWxBbmltKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuaW1hdGVzIHZhbHVlcyBzbG93aW5nIGRvd25cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc3RlcERlY2VsQW5pbSgpIHtcbiAgICAgICAgICAgIGlmICghZGVjZWxlcmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkZWNWZWxYICo9IGZyaWN0aW9uO1xuICAgICAgICAgICAgZGVjVmVsWSAqPSBmcmljdGlvbjtcblxuICAgICAgICAgICAgdGFyZ2V0WCArPSBkZWNWZWxYO1xuICAgICAgICAgICAgdGFyZ2V0WSArPSBkZWNWZWxZO1xuXG4gICAgICAgICAgICB2YXIgZGlmZiA9IGNoZWNrQm91bmRzKCk7XG5cbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkZWNWZWxYKSA+IHN0b3BUaHJlc2hvbGQgfHwgTWF0aC5hYnMoZGVjVmVsWSkgPiBzdG9wVGhyZXNob2xkIHx8ICFkaWZmLmluQm91bmRzKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoYm91bmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWJvdW5kQWRqdXN0ID0gMi41O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLnggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLnggKiBkZWNWZWxYIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNWZWxYICs9IGRpZmYueCAqIGJvdW5jZURlY2VsZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkanVzdCA9IGRpZmYueCA+IDAgPyByZWJvdW5kQWRqdXN0IDogLXJlYm91bmRBZGp1c3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjVmVsWCA9IChkaWZmLnggKyBhZGp1c3QpICogYm91bmNlQWNjZWxlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLnkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLnkgKiBkZWNWZWxZIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNWZWxZICs9IGRpZmYueSAqIGJvdW5jZURlY2VsZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkanVzdCA9IGRpZmYueSA+IDAgPyByZWJvdW5kQWRqdXN0IDogLXJlYm91bmRBZGp1c3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjVmVsWSA9IChkaWZmLnkgKyBhZGp1c3QpICogYm91bmNlQWNjZWxlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRYID0gYm91bmRYbWluO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRYID0gYm91bmRYbWF4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjVmVsWCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRZID0gYm91bmRZbWluO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRZID0gYm91bmRZbWF4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjVmVsWSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYWxsVXBkYXRlQ2FsbGJhY2soKTtcblxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltRnJhbWUoc3RlcERlY2VsQW5pbSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlY2VsZXJhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAc2VlIGh0dHA6Ly93d3cucGF1bGlyaXNoLmNvbS8yMDExL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtYW5pbWF0aW5nL1xyXG4gICAgICovXG4gICAgO1xuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBJbXBldHVzO1xuICAgIHZhciByZXF1ZXN0QW5pbUZyYW1lID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIGdldFBhc3NpdmVTdXBwb3J0ZWQoKSB7XG4gICAgICAgIHZhciBwYXNzaXZlU3VwcG9ydGVkID0gZmFsc2U7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCBcInBhc3NpdmVcIiwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgICBwYXNzaXZlU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG5cbiAgICAgICAgZ2V0UGFzc2l2ZVN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXNzaXZlU3VwcG9ydGVkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcGFzc2l2ZVN1cHBvcnRlZDtcbiAgICB9XG59KTtcbiIsIi8vVGVtcGxhdGUgSFRNTFxudmFyIHZzbV90ZW1wbGF0ZSA9ICc8ZGl2IGlkPVwidnNtX21vZGFsX2Jhc2VcIiBjbGFzcz1cInZzbS1tb2RhbCB2c20taGlkZSB2c20tZmFkZVwiIHN0eWxlPVwiei1pbmRleDogOTk5OTtcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPiA8ZGl2IGNsYXNzPVwidnNtLW1vZGFsLWRpYWxvZ1wiPiA8ZGl2IGNsYXNzPVwidnNtLW1vZGFsLWNvbnRlbnRcIj4gPGRpdiBjbGFzcz1cInZzbS1tb2RhbC1oZWFkZXJcIj4gPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ2c20tY2xvc2VcIj4gPC9idXR0b24+IDwvZGl2PjxkaXYgY2xhc3M9XCJ2c20tbW9kYWwtYm9keSB2c20tb3B0aW9uLWJvZHkgdnNtLWxpc3QtYm9keVwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwidnNtLWJhY2stbGluayB2c20tYmFjay1zdGVwXCI+IDxpIGNsYXNzPVwidnNtLWJhY2stYXJyb3dcIj48L2k+IDwvYT4gPGRpdiBjbGFzcz1cInZzbS1pbi1wcm9ncmVzc1wiPiA8cCBjbGFzcz1cInZzbS1oZWFkZXIgdnNtLWNlbnRlclwiPjwvcD48ZGl2IGNsYXNzPVwidnNtLWxpbmUtc3RlcCBjZW50ZXItcGllY2UgdnNtLWNvbHVtbnNcIj4gPC9kaXY+PGRpdiBjbGFzcz1cInZzbS1saXN0LWNvbnRhaW5lclwiPiA8aSBjbGFzcz1cInZzbS1sb2FkZXJJY29uXCIgYWx0PVwiTG9hZGluZyBvcHRpb25zXCI+PC9pPiA8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwidnNtLWZpbmFsXCI+IDxkaXYgY2xhc3M9XCJjZW50ZXItcGllY2UgdnNtLWxpbmUtc3RlcCB2c20tY29sdW1ucyB2ZWhpY2xlLXJlc3VsdC13cmFwXCI+IDxkaXYgY2xhc3M9XCJ2c20tY29sdW1uLTIgdnNtLWJlZm9yZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJ2c20tY29sdW1uLTIgbm8tc3R5bGVcIj48aSBjbGFzcz1cImRvdC1zdHlsZSBkb3QtYmVmb3JlIGFjdGl2ZVwiPjwvaT48L2Rpdj48cCBjbGFzcz1cInZlaGljbGUtcmVzdWx0LW5hbWVcIj48L3A+PHAgY2xhc3M9XCJ2ZWhpY2xlLXJlc3VsdC1zaXplXCI+PC9wPjwvZGl2PiA8ZGl2IGNsYXNzPVwiY2VudGVyLXBpZWNlIHZlaGljbGUtaW1hZ2Utd3JhcFwiPiA8ZGl2IHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1pbi1oZWlnaHQ6IDEyMHB4O1wiPiA8aSBjbGFzcz1cInZzbS1sb2FkZXJJY29uXCIgYWx0PVwiTG9hZGluZyBhbiBpbWFnZSBvZiB5b3VyIHZlaGljbGVcIj48L2k+IDxpbWcgc3JjPVwiXCIgYWx0PVwiXCIgY2xhc3M9XCJ2c20tdmVoaWNsZS1kaXNwbGF5XCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPiA8L2Rpdj48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwidnNtLWJ0biB2c20tYnRuLWdyYXkgdnNtLWZ1bGwtd2lkdGggdnNtLWZpbmRcIj48L2E+IDwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pic7XG5cbnZhciBfdnNtTW9kYWxJRENvdW50ZXIgPSAwO1xuZnVuY3Rpb24gUmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbChvcHRpb25zKSB7XG4gICAgdmFyIGluZm9BcnJheSA9IFtdLCAvL0tlZXAgdHJhY2sgb2Ygc2VsZWN0ZWQgb3B0aW9ucyBpbmZvXG4gICAgZGF0YUFycmF5ID0gW10sIC8vS2VlcCB0cmFjayBvZiBzZWxlY3RlZCBvcHRpb25zIGRhdGEgKGRhdGEgc2VudCB0byBWZWhpY2xlL1NlbGVjdCBlbmRwb2ludClcbiAgICBtb2RhbEFycmF5ID0gW10sIC8vS2VlcCB0cmFjayBvZiBtb2RhbCBzY3JlZW4gZ2VuZXJhdGVkIGJ5IHRoaXMgaW5zdGFuY2VcbiAgICBkaXNDb3VudGludWVkID0gZmFsc2U7IC8vRGVjaWRlIHdoZXRoZXIgb3Igbm90IGNvbnRpbnVlIHRvIG5leHQgbW9kYWwgc2NyZWVuXG5cbiAgICAvL1NpbWlsYXIgdG8gJC5leHRlbmRcbiAgICBmdW5jdGlvbiBleHRlbmQob3V0KSB7XG4gICAgICAgIG91dCA9IG91dCB8fCB7fTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFhcmd1bWVudHNbaV0pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBhcmd1bWVudHNbaV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgb3V0W2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcblxuICAgIC8vIEV4dGVuZCBkZWZhdWx0IHNldHRpbmdzXG4gICAgb3B0aW9ucyA9IGV4dGVuZCh7XG4gICAgICAgIENvbmZpcm1CdXR0b25UZXh0OiAnQ29uZmlybSBWZWhpY2xlJyxcbiAgICAgICAgR3JvdXBPcHRpb25zOiBmYWxzZSxcbiAgICAgICAgSW5jbHVkZU9FVGlyZU9wdGlvbjogZmFsc2UsXG4gICAgICAgIFllYXJTY3JlZW5Db2x1bW5zOiAzLFxuICAgICAgICBNYWtlU2NyZWVuQ29sdW1uczogMixcblxuICAgICAgICBjb250YWluZXI6IGRvY3VtZW50LmJvZHksXG5cbiAgICAgICAgYWZ0ZXJCYWNrQ2xpY2tlZDogbnVsbCxcbiAgICAgICAgYWZ0ZXJPcHRpb25TZWxlY3RlZDogbnVsbCxcbiAgICAgICAgY2FsbGJhY2s6IG51bGxcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIC8vQ2hlY2sgaWYgdHJhbnNpdGlvbiBpcyBzdXBwb3J0ZWQsIEJvb2xlYW5cbiAgICB2YXIgdHJhbnNpdGlvblN1cHBvcnQgPSAoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHRoaXNCb2R5ID0gZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gICAgICAgIHRoaXNTdHlsZSA9IHRoaXNCb2R5LnN0eWxlLFxuICAgICAgICBzdXBwb3J0ID0gdGhpc1N0eWxlLldlYmtpdFRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fCB0aGlzU3R5bGUuTW96VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHRoaXNTdHlsZS5PVHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHRoaXNTdHlsZS50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIHN1cHBvcnQ7XG4gICAgfSkoKTtcblxuICAgIC8vIGFkZCBvblRyYW5zaXRpb25FbmRPbmNlIHRvIEhUTUxFbGVtZW50XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSxcbiAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgdHJhbnNpdGlvbnMgPSB7XG4gICAgICAgICAgICAndHJhbnNpdGlvbic6J3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgJ09UcmFuc2l0aW9uJzonb3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgJ01velRyYW5zaXRpb24nOid0cmFuc2l0aW9uZW5kJyxcbiAgICAgICAgICAgICdXZWJraXRUcmFuc2l0aW9uJzond2Via2l0VHJhbnNpdGlvbkVuZCdcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZCA9ICcnO1xuICAgICAgICBmb3IgKGkgaW4gdHJhbnNpdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9ucy5oYXNPd25Qcm9wZXJ0eShpKSAmJiBlbC5zdHlsZVtpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkVuZCA9IHRyYW5zaXRpb25zW2ldO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLm9uVHJhbnNpdGlvbkVuZE9uY2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb25FbmQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uRW5kV3JhcCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZS50eXBlLCB0cmFuc2l0aW9uRW5kV3JhcCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25FbmRXcmFwLCBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9KCkpO1xuXG4gICAgLyoqXG4gICAgICogQWRkIGNlcnRhaW4gY2xhc3MgdG8gZWxlbWVudHNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR8W0VsZW1lbnRdfSBlbGVtZW50cyAtIEVsZW1lbnQocykgdG8gc2VhcmNoXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgbXlDbGFzcyAtIENsYXNzIG5hbWUgdG8gYWRkXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudHMsIG15Q2xhc3MpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50cykgeyByZXR1cm47IH1cbiAgICAgICAgaWYgKHR5cGVvZihlbGVtZW50cykgPT09ICdzdHJpbmcnKSBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudHMpO1xuICAgICAgICBlbHNlIGlmIChlbGVtZW50cy50YWdOYW1lKSBlbGVtZW50cz1bZWxlbWVudHNdO1xuICAgICAgICAvLyBhZGQgY2xhc3MgdG8gYWxsIGNob3NlbiBlbGVtZW50c1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5jbGFzc05hbWUudHJpbSgpID09ICcnKSBlbGVtZW50c1tpXS5jbGFzc05hbWUgPSBteUNsYXNzO1xuICAgICAgICAgICAgZWxzZSBpZiAoKCcgJytlbGVtZW50c1tpXS5jbGFzc05hbWUrJyAnKS5pbmRleE9mKCcgJytteUNsYXNzKycgJykgPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIGNsYXNzXG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NOYW1lICs9ICcgJyArIG15Q2xhc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgY2VydGFpbiBjbGFzcyBmcm9tIGVsZW1lbnRzXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fFtFbGVtZW50XX0gZWxlbWVudHMgLSBFbGVtZW50KHMpIHRvIHNlYXJjaFxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gIG15Q2xhc3MgLSBDbGFzcyBuYW1lIHRvIG1hdGNoIGFnYWluc3RcbiAgICAgKiBAcmV0dXJuIHZvaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50cywgbXlDbGFzcykge1xuICAgICAgICBpZiAoIWVsZW1lbnRzKSB7IHJldHVybjsgfVxuICAgICAgICBpZiAodHlwZW9mKGVsZW1lbnRzKSA9PT0gJ3N0cmluZycpIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50cyk7XG4gICAgICAgIGVsc2UgaWYgKGVsZW1lbnRzLnRhZ05hbWUpIGVsZW1lbnRzPVtlbGVtZW50c107XG4gICAgICAgIHZhciByZWcxID0gbmV3IFJlZ0V4cCgnICcrbXlDbGFzcysnICcsJ2cnKTtcbiAgICAgICAgdmFyIHJlZzIgPSBuZXcgUmVnRXhwKCcoXiknK215Q2xhc3MrJygkfCApJywnZycpO1xuICAgICAgICB2YXIgcmVnMyA9IG5ldyBSZWdFeHAoJyhefCApJytteUNsYXNzKycoJCknLCdnJyk7XG4gICAgICAgIC8vIHJlbW92ZSBjbGFzcyBmcm9tIGFsbCBjaG9zZW4gZWxlbWVudHNcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc05hbWUgPSBlbGVtZW50c1tpXS5jbGFzc05hbWUucmVwbGFjZShyZWcxLCcgJyk7XG4gICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc05hbWUgPSBlbGVtZW50c1tpXS5jbGFzc05hbWUucmVwbGFjZShyZWcyLCcnKTtcbiAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTmFtZSA9IGVsZW1lbnRzW2ldLmNsYXNzTmFtZS5yZXBsYWNlKHJlZzMsJycpO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uY2xhc3NOYW1lLnRyaW0oKSA9PSAnJykgZWxlbWVudHNbaV0ucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjbG9zZXN0IG1hdGNoaW5nIGVsZW1lbnQgdXAgdGhlIERPTSB0cmVlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gZWxlbWVudCAtIFN0YXJ0aW5nIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBzZWxlY3RvciBTZWxlY3RvciB0byBtYXRjaCBhZ2FpbnN0XG4gICAgICogQHJldHVybiB7Qm9vbGVhbnxFbGVtZW50fSAgUmV0dXJucyBudWxsIGlmIG5vIG1hdGNoIGZvdW5kXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgICAvLyBFbGVtZW50Lm1hdGNoZXMoKSBwb2x5ZmlsbFxuICAgICAgICBpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcbiAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPVxuICAgICAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcbiAgICAgICAgICAgICAgICAgICAgaSA9IG1hdGNoZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCAmJiBtYXRjaGVzLml0ZW0oaSkgIT09IHRoaXMpIHt9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgPiAtMTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgY2xvc2VzdCBtYXRjaFxuICAgICAgICBmb3IgKCA7IGVsZW1lbnQgJiYgZWxlbWVudCAhPT0gZG9jdW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICBpZiAoIGVsZW1lbnQubWF0Y2hlcyggc2VsZWN0b3IgKSApIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJhY2tkcm9wKCkge1xuICAgICAgICB2YXIgZXhpc3RpbmdCYWNrZHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2c20tYmFja2Ryb3AnKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ0JhY2tkcm9wKSB7XG4gICAgICAgICAgICB2YXIgYmFja0Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGJhY2tEcm9wLmlkID0gJ3ZzbS1iYWNrZHJvcCc7XG4gICAgICAgICAgICBiYWNrRHJvcC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgICAgIGJhY2tEcm9wLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSBsaW5lYXIgLjNzJztcbiAgICAgICAgICAgIGdldE1vZGFsQ29udGFpbmVyKCkuYXBwZW5kQ2hpbGQoYmFja0Ryb3ApO1xuXG4gICAgICAgICAgICBzaG93QmFja2Ryb3AoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dCYWNrZHJvcCgpIHtcbiAgICAgICAgdmFyIGV4aXN0aW5nQmFja2Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndnNtLWJhY2tkcm9wJyk7XG4gICAgICAgIGlmICghZXhpc3RpbmdCYWNrZHJvcCkge1xuICAgICAgICAgICAgY3JlYXRlQmFja2Ryb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBleGlzdGluZ0JhY2tkcm9wLnN0eWxlLm9wYWNpdHkgPSAwLjU1XG4gICAgICAgICAgICBleGlzdGluZ0JhY2tkcm9wLm9uVHJhbnNpdGlvbkVuZE9uY2UoZnVuY3Rpb24oKXt9KTtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGlkZUJhY2tkcm9wKCkge1xuICAgICAgICB2YXIgZXhpc3RpbmdCYWNrZHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2c20tYmFja2Ryb3AnKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nQmFja2Ryb3ApIHtcbiAgICAgICAgICAgIGV4aXN0aW5nQmFja2Ryb3Auc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICAgICBleGlzdGluZ0JhY2tkcm9wLm9uVHJhbnNpdGlvbkVuZE9uY2UoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0JhY2tkcm9wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZXhpc3RpbmdCYWNrZHJvcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhpZGVNb2RhbHMoKSB7XG4gICAgICAgIHZhciBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLW1vZGFsOm5vdCgjdnNtX21vZGFsX2Jhc2UpJyksXG4gICAgICAgIGN1cnJlbnRCYXNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1tb2RhbC5pbicpWzBdO1xuXG4gICAgICAgIHZhciBjb3B5T2ZBcnJheSA9IGluZm9BcnJheS5zbGljZSgwKSwgY29weU9mRGF0YUFycmF5ID0gZGF0YUFycmF5LnNsaWNlKDApO1xuXG4gICAgICAgIGluZm9BcnJheSA9IFtdO1xuICAgICAgICBkYXRhQXJyYXkgPSBbXTtcbiAgICAgICAgZGlzQ291bnRpbnVlZCA9IHRydWU7XG5cbiAgICAgICAgaWYgKG1vZGFsQXJyYXkuaW5kZXhPZihjdXJyZW50QmFzZS5nZXRBdHRyaWJ1dGUoJ2lkJykpID4gLTEpIHtcbiAgICAgICAgICAgIGN1cnJlbnRCYXNlLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgICAgICAgY3VycmVudEJhc2Uub25UcmFuc2l0aW9uRW5kT25jZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChhbGxNb2RhbHMsIGZ1bmN0aW9uICh0aGlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNJRCA9IHRoaXNNb2RhbC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RhbEFycmF5LmluZGV4T2YodGhpc0lEKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzTW9kYWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzTW9kYWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5mb0Jhc2VPYmogPSB7fTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29weU9mQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIHZhciBzcGxpdHRlZEFycmF5ID0gY29weU9mQXJyYXlbaV0uc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICAgIGlmIChzcGxpdHRlZEFycmF5Lmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaW5mb0Jhc2VPYmpbc3BsaXR0ZWRBcnJheVswXV0gPSBzcGxpdHRlZEFycmF5WzFdO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrICYmIHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dE9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpbmFsU2VsZWN0aW9uTWFkZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWhpY2xlOiBpbmZvQmFzZU9iaixcbiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bGxTZWxlY3Rpb25EYXRhOiBjb3B5T2ZEYXRhQXJyYXlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKG91dE9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGNhbGxiYWNrIGZ1bmN0aW9uIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGlkZUJhY2tkcm9wKCk7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCAndnNtLW1vZGFsLW9wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhpcyB2c20gaW5zdGFuY2UgaXMgbm90IHNob3duIHlldC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29udGFpbmVyIHRoYXQgbW9kYWxzIHNob3VsZCBiZSBhcHBlbmRlZCB0b1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE1vZGFsQ29udGFpbmVyKCkge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29udGFpbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gb3B0aW9ucy5jb250YWluZXIoKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXIpIHJldHVybiBvcHRpb25zLmNvbnRhaW5lcjtcblxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keTtcbiAgICB9XG5cbiAgICAvKkxvYWQgSFRNTCBjb2RlIGFuZCBhcHBlbmQgdG8gYm9keSovXG4gICAgZnVuY3Rpb24gbG9hZEJhc2UoKSB7XG4gICAgICAgIHZhciBleGlzdGluZ01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzbV9tb2RhbF9iYXNlJyk7XG4gICAgICAgIGlmICghZXhpc3RpbmdNb2RhbCkge1xuICAgICAgICAgICAgdmFyIGRpdkVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZGl2RWxlLmlubmVySFRNTCA9IHZzbV90ZW1wbGF0ZTtcbiAgICAgICAgICAgIGdldE1vZGFsQ29udGFpbmVyKCkuYXBwZW5kQ2hpbGQoZGl2RWxlLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYW5kIHByZXBhcmUgbW9kYWwgc2NyZWVuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gcHJlcGFyZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIHByZXBhcmUgdGhlIG1vZGFsXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBwcmVwYXJlRnVuY3Rpb25PcHRpb25zIC0gT3B0aW9ucyB0byBwYXNzIGluXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSB0cmFuc2l0aW9uTW9kYWwgLSBUaGUgbW9kYWwgc2NyZWVuIHRvIHRyYW5zaXRpb24gdG9cbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSAgUmV0dXJucyB0aGUgcHJlcGFyZWQgbW9kYWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlKHByZXBhcmVGdW5jdGlvbiwgcHJlcGFyZUZ1bmN0aW9uT3B0aW9ucywgdHJhbnNpdGlvbk1vZGFsKSB7XG4gICAgICAgIHZhciBtb2RhbEJhc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndnNtX21vZGFsX2Jhc2UnKTtcbiAgICAgICAgaWYgKCFtb2RhbEJhc2UpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vTWFrZSBhIGNvcHkgb2YgI3ZzbV9tb2RhbF9iYXNlXG4gICAgICAgIHZhciBtb2RhbEJhc2VDb3B5ID0gbW9kYWxCYXNlLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICAvL092ZXJyaWRlIGlkIG9mIG1vZGFsQmFzZUNvcHkgYW5kIGFwcGVuZCB0byBib2R5XG4gICAgICAgIG1vZGFsQmFzZUNvcHkuaWQgPSAndnNtX21vZGFsXycgKyBfdnNtTW9kYWxJRENvdW50ZXI7XG4gICAgICAgIG1vZGFsQXJyYXkucHVzaCgndnNtX21vZGFsXycgKyBfdnNtTW9kYWxJRENvdW50ZXIpO1xuICAgICAgICBtb2RhbEJhc2VDb3B5LmNsYXNzTmFtZSArPSAnIHZzbV9tb2RhbF8nICsgX3ZzbU1vZGFsSURDb3VudGVyO1xuICAgICAgICBnZXRNb2RhbENvbnRhaW5lcigpLmFwcGVuZENoaWxkKG1vZGFsQmFzZUNvcHkpO1xuXG4gICAgICAgIC8vU2V0dXAgdHJhbnNpdGlvblxuICAgICAgICBpZiAodHlwZW9mKHRyYW5zaXRpb25Nb2RhbCkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwcmVwYXJlRnVuY3Rpb25PcHRpb25zID0gZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBiYWNrTW9kYWw6IHRyYW5zaXRpb25Nb2RhbCxcbiAgICAgICAgICAgICAgICB0aGlzTW9kYWw6IG1vZGFsQmFzZUNvcHlcbiAgICAgICAgICAgIH0sIHByZXBhcmVGdW5jdGlvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICB2YXIgYmFja0xpbmtzID0gbW9kYWxCYXNlQ29weS5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWJhY2stc3RlcCcpO1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGJhY2tMaW5rcywgZnVuY3Rpb24gKGJhY2tMaW5rKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJhY2tIYW5kbGVyID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZS50eXBlLCBiYWNrSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibSA9IHByZXBhcmVGdW5jdGlvbk9wdGlvbnMuYmFja01vZGFsLFxuICAgICAgICAgICAgICAgICAgICBiYyA9IHByZXBhcmVGdW5jdGlvbk9wdGlvbnMudGhpc01vZGFsO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVG9Nb2RhbChibSwgYmMsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mb0FycmF5Lmxlbmd0aCkgaW5mb0FycmF5LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhQXJyYXkubGVuZ3RoKSBkYXRhQXJyYXkucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJjLnBhcmVudE5vZGUpIGJjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYmMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJCYWNrQ2xpY2tlZCAmJiB0eXBlb2Ygb3B0aW9ucy5hZnRlckJhY2tDbGlja2VkID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm9CYXNlT2JqID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmZvQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXR0ZWRBcnJheSA9IGluZm9BcnJheVtpXS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdHRlZEFycmF5Lmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9CYXNlT2JqW3NwbGl0dGVkQXJyYXlbMF1dID0gc3BsaXR0ZWRBcnJheVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3V0SW5mb09iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bGxTZWxlY3Rpb246IGluZm9CYXNlT2JqLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVsbFNlbGVjdGlvbkRhdGE6IGRhdGFBcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hZnRlckJhY2tDbGlja2VkKG91dEluZm9PYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYWNrTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGJhY2tIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vQ2FsbCB0aGUgcHJlcGFyZSBmdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBuZXcgbW9kYWxcbiAgICAgICAgaWYgKHR5cGVvZiBwcmVwYXJlRnVuY3Rpb24gPT09IFwiZnVuY3Rpb25cIikgcHJlcGFyZUZ1bmN0aW9uKG1vZGFsQmFzZUNvcHksIHByZXBhcmVGdW5jdGlvbk9wdGlvbnMpO1xuXG4gICAgICAgIC8vYmluZCBjbGljayBldmVudCB0byBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgdmFyIGNsb3NlQnV0dG9ucyA9IG1vZGFsQmFzZUNvcHkucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1jbG9zZScpO1xuICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2xvc2VCdXR0b25zLCBmdW5jdGlvbiAoY2xvc2VCdXR0b24pIHtcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGhpZGVNb2RhbHMoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF92c21Nb2RhbElEQ291bnRlcisrO1xuXG4gICAgICAgIHJldHVybiBtb2RhbEJhc2VDb3B5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb24gYmV0d2VlbiBtb2RhbFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gdG9Nb2RhbCAtIFRoZSBtb2RhbCB0byB0cmFuc2l0aW9uIHRvXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gZnJvbU1vZGFsIC0gVGhlIGN1cnJlbnQgbW9kYWwgdG8gdHJhbnNpdGlvbiBmcm9tXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gYmFja3dhcmRzIC0gc2V0IHRvIHRydWUsIGlmIHRyYW5zaXRpb24gZnJvbSBoaWdoZXIgaW5kZXggdG8gbG93ZXIgaW5kZXhcbiAgICAgKiBAcmV0dXJuIHtSaWRlU3R5bGVyUHJvbWlzZX0gLSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJhbnNpdGlvblRvTW9kYWwodG9Nb2RhbCwgZnJvbU1vZGFsLCBiYWNrd2FyZHMpIHtcbiAgICAgICAgYmFja3dhcmRzID0gISEgYmFja3dhcmRzO1xuXG4gICAgICAgIGlmICghdG9Nb2RhbCB8fCAhZnJvbU1vZGFsKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7UmlkZVN0eWxlclByb21pc2V9ICovXG4gICAgICAgIHZhciBmcm9tQW5pbWF0ZVByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2UoKSxcbiAgICAgICAgICAgIHRvQW5pbWF0ZVByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2UoKTtcblxuICAgICAgICBpZiAoIWJhY2t3YXJkcykge1xuICAgICAgICAgICAgdmFyIGZyb21aID0gcGFyc2VJbnQoZnJvbU1vZGFsLnN0eWxlLnpJbmRleCwgMTApIHx8IDAsXG4gICAgICAgICAgICAgICAgdG9aID0gcGFyc2VJbnQodG9Nb2RhbC5zdHlsZS56SW5kZXgsIDEwKSB8fCAwO1xuICAgICAgICAgICAgaWYgKHRvWiA8PSBmcm9tWikgdG9aID0gZnJvbVogKyAxO1xuICAgICAgICAgICAgdG9Nb2RhbC5zdHlsZS56SW5kZXggPSB0b1o7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNpdGlvblN1cHBvcnQpIHtcbiAgICAgICAgICAgIGlmIChiYWNrd2FyZHMpIHtcbiAgICAgICAgICAgICAgICB0b01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIGFkZENsYXNzKHRvTW9kYWwsICdpbicpO1xuXG4gICAgICAgICAgICAgICAgdG9BbmltYXRlUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhmcm9tTW9kYWwsICdpbicpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tTW9kYWwub25UcmFuc2l0aW9uRW5kT25jZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tQW5pbWF0ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyh0b01vZGFsLCAnaW4nKTtcbiAgICAgICAgICAgICAgICAgICAgdG9Nb2RhbC5vblRyYW5zaXRpb25FbmRPbmNlKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGZyb21Nb2RhbCwgJ2luJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvQW5pbWF0ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFuaW1hdGVQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoYmFja3dhcmRzKSB7XG4gICAgICAgICAgICAgICAgdG9Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyh0b01vZGFsLCAnaW4nKTtcblxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGZyb21Nb2RhbCwgJ2luJyk7XG4gICAgICAgICAgICAgICAgZnJvbU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIGFkZENsYXNzKHRvTW9kYWwsICdpbicpO1xuXG4gICAgICAgICAgICAgICAgZnJvbU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZnJvbU1vZGFsLCAnaW4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdG9BbmltYXRlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICBmcm9tQW5pbWF0ZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFsbFByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2UoKTtcbiAgICAgICAgdmFyIG9uUHJvbWlzZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b1N0YXRlID0gdG9BbmltYXRlUHJvbWlzZS5zdGF0ZSgpLFxuICAgICAgICAgICAgICAgIGZyb21TdGF0ZSA9IGZyb21BbmltYXRlUHJvbWlzZS5zdGF0ZSgpO1xuXG4gICAgICAgICAgICAvLyBTdGlsbCB3YWl0aW5nIGZvciByZXNvbHV0aW9uXG4gICAgICAgICAgICBpZiAodG9TdGF0ZSA9PT0gMCB8fCBmcm9tU3RhdGUgPT09IDApIHJldHVybjtcblxuICAgICAgICAgICAgLy8gT25lIHByb21pc2UgaGFzIGJlZW4gcmVqZWN0ZWQgYnV0IHRoZSBvdGhlciBpcyByZXNvbHZlZFxuICAgICAgICAgICAgaWYgKHRvU3RhdGUgPT09IDIgfHwgZnJvbVN0YXRlID09PSAyKSByZXR1cm4gYWxsUHJvbWlzZS5yZWplY3QoKTtcblxuICAgICAgICAgICAgLy8gQm90aCBwcm9taXNlcyBhcmUgcmVzb2x2ZWRcbiAgICAgICAgICAgIGFsbFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRvQW5pbWF0ZVByb21pc2UuYWx3YXlzKG9uUHJvbWlzZUNoYW5nZSk7XG4gICAgICAgIGZyb21BbmltYXRlUHJvbWlzZS5hbHdheXMob25Qcm9taXNlQ2hhbmdlKTtcblxuICAgICAgICByZXR1cm4gYWxsUHJvbWlzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb2RhbCBwcmVwYXJhdGlvbjogUHJvY2VzcyB0aGUgdmVoaWNsZSBzZWxlY3QgcmVxdWVzdFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gbW9kYWwgLSBUaGUgbW9kYWwgdG8gcHJlcGFyZVxuICAgICAqIEByZXR1cm4gdm9pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcXVlc3RTdGVwKG1vZGFsLCBzdGVwT3B0aW9ucykge1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIFNlbGVjdGlvbjogZGF0YUFycmF5XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHN0ZXBPcHRpb25zICYmIHN0ZXBPcHRpb25zLmJlc3RDb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICBzaG93U2VsZWN0aW9uKG1vZGFsLCBzdGVwT3B0aW9ucy5iZXN0Q29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmlkZXN0eWxlci5hamF4LnNlbmQoe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ1ZlaGljbGUvU2VsZWN0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5CZXN0Q29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLkluY2x1ZGVPRVRpcmVPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlkZXN0eWxlci5hamF4LnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnVmVoaWNsZS9HZXRUaXJlT3B0aW9uRGV0YWlscycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7J1ZlaGljbGVDb25maWd1cmF0aW9uJzogcmVzcG9uc2UuQmVzdENvbmZpZ3VyYXRpb24uVmFsdWV9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdENvbmZpZ3VyYXRpb246IHJlc3BvbnNlLkJlc3RDb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkZXRhaWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXRhaWxSZXNwb25zZS5TdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxzID0gZGV0YWlsUmVzcG9uc2UuRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdENvbmZpZ3VyYXRpb24gPSB0aGlzLmJlc3RDb25maWd1cmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWlscy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbFN0cmluZyA9IChmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBkZXRhaWwuRnJvbnRbJ0Rlc2NyaXB0aW9uJ10sIHIgPSBkZXRhaWwuUmVhclsnRGVzY3JpcHRpb24nXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZj09cikgcmV0dXJuIGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gXCJGOiBcIiArIGYgKyBcIiBSOiBcIiArIHI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShkZXRhaWxzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RDb25maWd1cmF0aW9uLlRpcmVPcHRpb25CYXNpYyA9IHtUaXJlT3B0aW9uSUQ6IGRldGFpbHNbMF1bJ1RpcmVPcHRpb25JRCddLCBUaXJlT3B0aW9uU3RyaW5nOiBkZXRhaWxTdHJpbmd9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1NlbGVjdGlvbihtb2RhbCwgYmVzdENvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbk1lbnUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JvdXBzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uOiAnU2VsZWN0IFlvdXIgVGlyZSBTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZTogJ1RpcmUgU2l6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgS2V5OiAndGlyZW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT3B0aW9uczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGV0YWlscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxTdHJpbmcgPSAoZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGRldGFpbC5Gcm9udFsnRGVzY3JpcHRpb24nXSwgciA9IGRldGFpbC5SZWFyWydEZXNjcmlwdGlvbiddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZj09cikgcmV0dXJuIGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIFwiRjogXCIgKyBmICsgXCIgUjogXCIgKyByO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGRldGFpbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbk1lbnUuT3B0aW9ucy5wdXNoKHtHcm91cDogbnVsbCwgTGFiZWw6IGRldGFpbFN0cmluZywgVmFsdWU6IGRldGFpbHNbaV1bJ1RpcmVPcHRpb25JRCddfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVNb2RhbChtb2RhbCwgb3B0aW9uTWVudSwgYmVzdENvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugc2hvd1NlbGVjdGlvbihtb2RhbCwgYmVzdENvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U2VsZWN0aW9uKG1vZGFsLCByZXNwb25zZS5CZXN0Q29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVNb2RhbChtb2RhbCwgcmVzcG9uc2UuTWVudSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb2RhbCBwcmVwYXJhdGlvbjogVXBkYXRlIG1vZGFsIGNvbnRlbnRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IG1vZGFsIC0gVGhlIG1vZGFsIHRvIHByZXBhcmVcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG1lbnUgLSBNZW51IG9iamVjdCB0byBwYXNzIGluIGZvciBtb2RhbCBjb250ZW50IHVwZGF0ZVxuICAgICAqIEByZXR1cm4gdm9pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZU1vZGFsKG1vZGFsLCBtZW51LCBiZXN0Q29uZmlndXJhdGlvbikge1xuICAgICAgICB2YXIgaXRlbUxpc3RDb250YWluZXIgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWxpc3QtY29udGFpbmVyJylbMF0sXG4gICAgICAgIGhlYWRlckVsZW1lbnQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWhlYWRlcicpWzBdLFxuICAgICAgICBib2R5RWxlbWVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbW9kYWwtYm9keScpWzBdLFxuICAgICAgICB2c21MaW5rU3R5bGUgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWxpbmUtc3RlcCcpWzBdLFxuICAgICAgICBmaW5hbFNjcmVlbiA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tZmluYWwnKVswXTtcbiAgICAgICAgdmFyIG1lbnVPcHRpb25zID0gbWVudS5PcHRpb25zLFxuICAgICAgICBtZW51S2V5ID0gbWVudS5LZXksXG4gICAgICAgIG1lbnVUaXRsZSA9IG1lbnUuVGl0bGUsXG4gICAgICAgIG1lbnVHcm91cHMgPSBtZW51Lkdyb3VwcztcblxuICAgICAgICB2YXIgb25MaXN0SXRlbVNlbGVjdGVkID0gZnVuY3Rpb24obykge1xuICAgICAgICAgICAgdmFyIG9wdGlvblZhbHVlID0gby5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3B0aW9udmFsdWUnKTtcbiAgICAgICAgICAgIHZhciBvcHRpb25LZXkgPSBvLmdldEF0dHJpYnV0ZSgnZGF0YS1vcHRpb25rZXknKTtcbiAgICAgICAgICAgIHZhciBvcHRpb25MYWJlbCA9IG8uZ2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmxhYmVsJyk7XG4gICAgICAgICAgICB2YXIgb3B0aW9uVGl0bGUgPSBvLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW51dGl0bGUnKTtcbiAgICAgICAgICAgIGRhdGFBcnJheS5wdXNoKG9wdGlvbktleSArICc6JyArIG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgIGluZm9BcnJheS5wdXNoKG9wdGlvblRpdGxlICsgJzonICsgb3B0aW9uTGFiZWwpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlck9wdGlvblNlbGVjdGVkICYmIHR5cGVvZiBvcHRpb25zLmFmdGVyT3B0aW9uU2VsZWN0ZWQgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciBpbmZvQmFzZU9iaiA9IHt9O1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmZvQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0dGVkQXJyYXkgPSBpbmZvQXJyYXlbaV0uc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0dGVkQXJyYXkubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm9CYXNlT2JqW3NwbGl0dGVkQXJyYXlbMF1dID0gc3BsaXR0ZWRBcnJheVsxXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBvdXRJbmZvT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICBDdXJyZW50U2VsZWN0aW9uOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgRnVsbFNlbGVjdGlvbjogaW5mb0Jhc2VPYmosXG4gICAgICAgICAgICAgICAgICAgIEZ1bGxTZWxlY3Rpb25EYXRhOiBkYXRhQXJyYXlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRJbmZvT2JqLkN1cnJlbnRTZWxlY3Rpb25bb3B0aW9uVGl0bGVdID0gb3B0aW9uTGFiZWw7XG5cbiAgICAgICAgICAgICAgICBvcHRpb25zLmFmdGVyT3B0aW9uU2VsZWN0ZWQob3V0SW5mb09iaik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZGlzQ291bnRpbnVlZCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uT3B0aW9uID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbktleSA9PSAndGlyZW9wdGlvbicgJiYgYmVzdENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYmVzdENvbmZpZ3VyYXRpb24uVGlyZU9wdGlvbkJhc2ljID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgVGlyZU9wdGlvbklEOiBvcHRpb25WYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFRpcmVPcHRpb25TdHJpbmc6IG9wdGlvbkxhYmVsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25PcHRpb24uYmVzdENvbmZpZ3VyYXRpb24gPSBiZXN0Q29uZmlndXJhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvblRvTW9kYWwoXG4gICAgICAgICAgICAgICAgICAgIGJhc2UocmVxdWVzdFN0ZXAsIHRyYW5zaXRpb25PcHRpb24sIG1vZGFsKSxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBidWlsZExpc3RJdGVtID0gZnVuY3Rpb24ob3B0T2JqKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uTGFiZWwgPSBvcHRPYmouTGFiZWwsXG4gICAgICAgICAgICBvcHRpb25WYWx1ZSA9IG9wdE9iai5WYWx1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uTGFiZWwgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBvcHRpb25WYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3B0aW9uQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuICAgICAgICAgICAgb3B0aW9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbkxhYmVsKTtcbiAgICAgICAgICAgIG9wdGlvbkJ0bi5jbGFzc05hbWUgPSAndnNtLW9wdGlvbi1pdGVtIHZzbS1idG4gdnNtLWJ0bi1ncmF5JztcbiAgICAgICAgICAgIG9wdGlvbkJ0bi5ocmVmID0gJ2phdmFzY3JpcHQ6dm9pZCgwKSc7XG4gICAgICAgICAgICBvcHRpb25CdG4uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbnZhbHVlJywgb3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgb3B0aW9uQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1vcHRpb25sYWJlbCcsIG9wdGlvbkxhYmVsKTtcbiAgICAgICAgICAgIG9wdGlvbkJ0bi5hcHBlbmRDaGlsZChvcHRpb25UZXh0KTtcblxuICAgICAgICAgICAgb3B0aW9uQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIG9uTGlzdEl0ZW1TZWxlY3RlZCh0aGlzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uQnRuO1xuICAgICAgICB9LFxuICAgICAgICBidWlsZExpc3RIZWFkZXIgPSBmdW5jdGlvbihoZWFkZXJUZXh0KSB7XG4gICAgICAgICAgICB2YXIgbWVudVN1YkhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSxcbiAgICAgICAgICAgIG1lbnVTdWJIZWFkZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICBtZW51U3ViSGVhZGVyLmNsYXNzTmFtZSA9ICd2c20tZ3JvdXAtdGl0bGUnO1xuICAgICAgICAgICAgbWVudVN1YkhlYWRlci5hcHBlbmRDaGlsZChtZW51U3ViSGVhZGVyVGV4dCk7XG5cbiAgICAgICAgICAgIHJldHVybiBtZW51U3ViSGVhZGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vSW4gcHJvZ3Jlc3MsIHJlbW92aW5nIHRoZSBmaW5hbCBzY3JlZW4gZWxlbWVudCBmcm9tIGxvYWRlZCBtb2RhbFxuICAgICAgICBmaW5hbFNjcmVlbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGZpbmFsU2NyZWVuKTtcbiAgICAgICAgYWRkQ2xhc3ModnNtTGlua1N0eWxlLCAndnNtLXNpbmdsZS1zdGVwJyk7XG5cbiAgICAgICAgXG4gICAgICAgIC8vQ3JlYXRlIHJpZ2h0LXNpZGUgcHJvZ3Jlc3MgYmFyXG4gICAgICAgIHZhciBkaXZFTGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgZG90RWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICBzcGFuRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBkaXZFTGUuY2xhc3NOYW1lID0gJ3ZzbS1jb2x1bW4tMic7XG4gICAgICAgIGRvdEVsZS5jbGFzc05hbWUgPSAnZG90LXN0eWxlIGRvdC1iZWZvcmUgYWN0aXZlJztcbiAgICAgICAgc3BhbkVsZS5jbGFzc05hbWUgPSAnZG90LWluZm8gZG90LWluZm8tYmVmb3JlIGFjdGl2ZSc7XG4gICAgICAgIC8vc3BhbkVsZS5pbm5lckhUTUwgPSBtZW51VGl0bGU7XG4gICAgICAgIGRpdkVMZS5hcHBlbmRDaGlsZChkb3RFbGUpO1xuICAgICAgICBkaXZFTGUuYXBwZW5kQ2hpbGQoc3BhbkVsZSk7XG5cbiAgICAgICAgLy9DcmVhdGUgbGVmdC1zaWRlIHByb2dyZXNzIGluZm9cbiAgICAgICAgaWYgKCFkYXRhQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgbm90U3R5bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG5vdFN0eWxlRGl2LmNsYXNzTmFtZSA9ICd2c20tY29sdW1uLTIgbm8tc3R5bGUnO1xuICAgICAgICAgICAgdnNtTGlua1N0eWxlLmFwcGVuZENoaWxkKG5vdFN0eWxlRGl2KTtcbiAgICAgICAgICAgIHZzbUxpbmtTdHlsZS5hcHBlbmRDaGlsZChkaXZFTGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWRkQ2xhc3MoYm9keUVsZW1lbnQsICd2c20taGFzLWJhY2snKTtcbiAgICAgICAgICAgIHZhciBub3RTdHlsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgLypjZWxsRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLCovXG4gICAgICAgICAgICAvKmluZm9FbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7Ki9cbiAgICAgICAgICAgIG5vdFN0eWxlRGl2LmNsYXNzTmFtZSA9ICd2c20tY29sdW1uLTIgdnNtLWJlZm9yZSc7XG4gICAgICAgICAgICAvKmNlbGxFbGUuY2xhc3NOYW1lID0gJ3ZzbS10YWJsZS1jZWxsJztcbiAgICAgICAgICAgIGluZm9FbGUuY2xhc3NOYW1lID0gJ3ZzbS1zZWxlY3RlZC1pbmZvJztcbiAgICAgICAgICAgIGNlbGxFbGUuYXBwZW5kQ2hpbGQoaW5mb0VsZSk7XG4gICAgICAgICAgICBub3RTdHlsZURpdi5hcHBlbmRDaGlsZChjZWxsRWxlKTsqL1xuICAgICAgICAgICAgdmFyIGluZm9CYXNlQXJyYXkgPSBpbmZvQXJyYXkubWFwKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlICYmIGVsZS5zcGxpdCgnOicpLmxlbmd0aCA9PT0gMiA/IGVsZS5zcGxpdCgnOicpWzFdIDogJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8qaW5mb0VsZS5pbm5lckhUTUwgPSBpbmZvQmFzZUFycmF5LmpvaW4oJyAnKTsqL1xuICAgICAgICAgICAgc3BhbkVsZS5pbm5lckhUTUwgPSBpbmZvQmFzZUFycmF5LmpvaW4oJyAnKTtcbiAgICAgICAgICAgIHZzbUxpbmtTdHlsZS5hcHBlbmRDaGlsZChub3RTdHlsZURpdik7XG4gICAgICAgICAgICB2c21MaW5rU3R5bGUuYXBwZW5kQ2hpbGQoZGl2RUxlKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhlYWRlckVuZCA9IG1lbnUuRGVzY3JpcHRpb24uc3BsaXQoJyAnKS5zbGljZSgtMSlbMF0ucmVwbGFjZSgvXFxiXFx3L2csIGZ1bmN0aW9uKHQpeyByZXR1cm4gdC50b1VwcGVyQ2FzZSgpIH0pO1xuICAgICAgICB2YXIgaGVhZGVyU3RhcnQgPSBtZW51LkRlc2NyaXB0aW9uLnNwbGl0KCcgJykuIHNsaWNlKDAsMikuam9pbignICcpO1xuXG4gICAgICAgIGhlYWRlckVsZW1lbnQuaW5uZXJIVE1MID0gaGVhZGVyU3RhcnQgKyAnICcgKyBoZWFkZXJFbmQ7XG5cbiAgICAgICAgLy9DbGVhciB0aGUgY29udGFpbmVyXG4gICAgICAgIHdoaWxlIChpdGVtTGlzdENvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBpdGVtTGlzdENvbnRhaW5lci5yZW1vdmVDaGlsZChpdGVtTGlzdENvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZW51T3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBncm91cFdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGdyb3VwV3JhcC5jbGFzc05hbWUgPSAndnNtLWdyb3VwLXdyYXAgY2VudGVyLXBpZWNlJztcbiAgICAgICAgICAgIGl0ZW1MaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGdyb3VwV3JhcCk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLkdyb3VwT3B0aW9ucyAmJiBtZW51R3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1lbnVHcm91cGVkT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudU9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNNZW51T3B0aW9uID0gbWVudU9wdGlvbnNbaV0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXNNZW51T3B0aW9uR3JvdXAgPSB0aGlzTWVudU9wdGlvbi5Hcm91cDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNNZW51T3B0aW9uR3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgR3JvdXAgdmFsdWUgb2YgdGhpcyBvcHRpb24gaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbnVHcm91cGVkT3B0aW9uc1t0aGlzTWVudU9wdGlvbkdyb3VwXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVHcm91cGVkT3B0aW9uc1t0aGlzTWVudU9wdGlvbkdyb3VwXSA9IFt0aGlzTWVudU9wdGlvbl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51R3JvdXBlZE9wdGlvbnNbdGhpc01lbnVPcHRpb25Hcm91cF0ucHVzaCh0aGlzTWVudU9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIEdyb3VwIHZhbHVlIG9mIHRoaXMgb3B0aW9uIGlzIG51bGwgb3IgdW5kZWZpbmVkLCBwdXQgdGhlbSBpbiBVbmdyb3VwZWQgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTWF5IG5ldmVyIGhhcHBlbiwgbW9yZSBsaWtlIGFuIGVycm9yIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbnVHcm91cGVkT3B0aW9uc1snX3VuZ3JvdXBlZCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUdyb3VwZWRPcHRpb25zWydfdW5ncm91cGVkJ10gPSBbdGhpc01lbnVPcHRpb25dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUdyb3VwZWRPcHRpb25zWydfdW5ncm91cGVkJ10ucHVzaCh0aGlzTWVudU9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9HbyB0aHJvdWdoIGtub3duIEdyb3VwcyBiZWZvcmUgY2hlY2tpbmcgdW5ncm91cGVkIG9wdGlvbnNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lbnVHcm91cHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnVHcm91cCA9IG1lbnVHcm91cHNbal07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJHcm91cCA9IG1lbnVHcm91cGVkT3B0aW9uc1ttZW51R3JvdXBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ViR3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbkNsYXNzID0gJ3ZzbS1vbmUtY29udGFpbmVyJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZW51LktleSA9PSAneWVhcicgJiYgbWVudU9wdGlvbnMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ZZWFyU2NyZWVuQ29sdW1ucyA9PSAyKSBjb2x1bW5DbGFzcyA9ICd2c20taGFsZi1jb250YWluZXInO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLlllYXJTY3JlZW5Db2x1bW5zID49IDMpIGNvbHVtbkNsYXNzID0gJ3ZzbS10aGlyZC1jb250YWluZXInO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnUuS2V5ID09ICdtYWtlJyAmJiBtZW51T3B0aW9ucy5sZW5ndGggPiAxMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLk1ha2VTY3JlZW5Db2x1bW5zID49IDIpIGNvbHVtbkNsYXNzID0gJ3ZzbS1oYWxmLWNvbnRhaW5lcic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cExpc3QuY2xhc3NOYW1lID0gJ3ZzbS1ncm91cC1saXN0ICcgKyBjb2x1bW5DbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwV3JhcC5hcHBlbmRDaGlsZChidWlsZExpc3RIZWFkZXIobWVudUdyb3VwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFdyYXAuYXBwZW5kQ2hpbGQoZ3JvdXBMaXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJHcm91cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGJ1aWxkTGlzdEl0ZW0oc3ViR3JvdXBbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdEl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1vcHRpb25rZXknLCBtZW51S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW1lbnV0aXRsZScsIG1lbnVUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgVW5ncm91cGVkIG9wdGlvbnMgZXhpc3RcbiAgICAgICAgICAgICAgICBpZiAobWVudUdyb3VwZWRPcHRpb25zWydfdW5ncm91cGVkJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5DbGFzcyA9ICd2c20tb25lLWNvbnRhaW5lcic7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZW51LktleSA9PSAneWVhcicgJiYgbWVudU9wdGlvbnMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLlllYXJTY3JlZW5Db2x1bW5zID09IDIpIGNvbHVtbkNsYXNzID0gJ3ZzbS1oYWxmLWNvbnRhaW5lcic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ZZWFyU2NyZWVuQ29sdW1ucyA+PSAzKSBjb2x1bW5DbGFzcyA9ICd2c20tdGhpcmQtY29udGFpbmVyJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWVudS5LZXkgPT0gJ21ha2UnICYmIG1lbnVPcHRpb25zLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5NYWtlU2NyZWVuQ29sdW1ucyA+PSAyKSBjb2x1bW5DbGFzcyA9ICd2c20taGFsZi1jb250YWluZXInO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5jbGFzc05hbWUgPSAndnNtLWdyb3VwLWxpc3QgJyArIGNvbHVtbkNsYXNzO1xuICAgICAgICAgICAgICAgICAgICBncm91cFdyYXAuYXBwZW5kQ2hpbGQoYnVpbGRMaXN0SGVhZGVyKCdVbmdyb3VwZWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwV3JhcC5hcHBlbmRDaGlsZChncm91cExpc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJHcm91cCA9IG1lbnVHcm91cGVkT3B0aW9uc1snX3VuZ3JvdXBlZCddO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1Ykdyb3VwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBidWlsZExpc3RJdGVtKHN1Ykdyb3VwW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdEl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmtleScsIG1lbnVLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1tZW51dGl0bGUnLCBtZW51VGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICAgICAgY29sdW1uQ2xhc3MgPSAndnNtLW9uZS1jb250YWluZXInO1xuICAgICAgICAgICAgICAgIGlmIChtZW51LktleSA9PSAneWVhcicgJiYgbWVudU9wdGlvbnMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuWWVhclNjcmVlbkNvbHVtbnMgPT0gMikgY29sdW1uQ2xhc3MgPSAndnNtLWhhbGYtY29udGFpbmVyJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuWWVhclNjcmVlbkNvbHVtbnMgPj0gMykgY29sdW1uQ2xhc3MgPSAndnNtLXRoaXJkLWNvbnRhaW5lcic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZW51LktleSA9PSAnbWFrZScgJiYgbWVudU9wdGlvbnMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuTWFrZVNjcmVlbkNvbHVtbnMgPj0gMikgY29sdW1uQ2xhc3MgPSAndnNtLWhhbGYtY29udGFpbmVyJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ3JvdXBMaXN0LmNsYXNzTmFtZSA9ICd2c20tZ3JvdXAtbGlzdCAnICsgY29sdW1uQ2xhc3M7XG4gICAgICAgICAgICAgICAgZ3JvdXBXcmFwLmFwcGVuZENoaWxkKGdyb3VwTGlzdCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVPcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGJ1aWxkTGlzdEl0ZW0obWVudU9wdGlvbnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RJdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmtleScsIG1lbnVLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW1lbnV0aXRsZScsIG1lbnVUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cExpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW9kYWwgcHJlcGFyYXRpb246IFNob3cgZmluYWwgdmVoaWNsZSBzZWxlY3Rpb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IG1vZGFsIC0gVGhlIG1vZGFsIHRvIHByZXBhcmVcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGJlc3RDb25maWd1cmF0aW9uIC0gYmVzdENvbmZpZ3VyYXRpb24gb2JqZWN0IHRvIHBhc3MgaW4gZm9yIG1vZGFsIGNvbnRlbnQgdXBkYXRlXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvd1NlbGVjdGlvbihtb2RhbCwgYmVzdENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgdmFyIHZlaGljbGVJbWFnZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tdmVoaWNsZS1kaXNwbGF5JylbMF0sXG4gICAgICAgIHZlaGljbGVMb2FkZXIgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWZpbmFsIC52c20tbG9hZGVySWNvbicpWzBdLFxuICAgICAgICBuYW1lRWxlbWVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZWhpY2xlLXJlc3VsdC1uYW1lJylbMF0sXG4gICAgICAgIHNpemVFbGVtZW50ID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnZlaGljbGUtcmVzdWx0LXNpemUnKVswXSxcbiAgICAgICAgY29uZmlybUJ1dHRvbiA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tZmluZCcpWzBdLFxuICAgICAgICBib2R5RWxlbWVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbW9kYWwtYm9keScpWzBdLFxuICAgICAgICBpblByb2dyZXNzU2NyZWVuID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1pbi1wcm9ncmVzcycpWzBdO1xuXG4gICAgICAgIGFkZENsYXNzKGJvZHlFbGVtZW50LCAndnNtLWhhcy1iYWNrJyk7XG4gICAgICAgIGNvbmZpcm1CdXR0b24uaW5uZXJIVE1MID0gb3B0aW9ucy5Db25maXJtQnV0dG9uVGV4dDtcblxuICAgICAgICB2YXIgaW5mb0Jhc2VBcnJheSA9IFtdLCBpbmZvQmFzZU9iaiA9IHt9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5mb0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNwbGl0dGVkQXJyYXkgPSBpbmZvQXJyYXlbaV0uc3BsaXQoJzonKTtcbiAgICAgICAgICBpZiAoc3BsaXR0ZWRBcnJheS5sZW5ndGggPT0gMiAmJiBzcGxpdHRlZEFycmF5WzBdICE9ICdUaXJlIFNpemUnKSB7XG4gICAgICAgICAgICAgIGluZm9CYXNlQXJyYXkucHVzaChzcGxpdHRlZEFycmF5WzFdKTtcbiAgICAgICAgICAgICAgaW5mb0Jhc2VPYmpbc3BsaXR0ZWRBcnJheVswXV0gPSBzcGxpdHRlZEFycmF5WzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYWluUGFydFN0cmluZyA9IGluZm9CYXNlQXJyYXlbMF0sXG4gICAgICAgIGxhc3RJdGVtID0gaW5mb0Jhc2VBcnJheS5wb3AoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGluZm9CYXNlQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID49IDMpIGJyZWFrO1xuICAgICAgICAgICAgbWFpblBhcnRTdHJpbmcgKz0gJyAnICsgaW5mb0Jhc2VBcnJheVtpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2ZWhpY2xlRGVzYyA9IG1haW5QYXJ0U3RyaW5nICsgJyAnICsgbGFzdEl0ZW07XG5cbiAgICAgICAgbmFtZUVsZW1lbnQuaW5uZXJIVE1MID0gdmVoaWNsZURlc2M7XG5cbiAgICAgICAgYWRkQ2xhc3MobW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1tb2RhbC1ib2R5JylbMF0sICd2c20tZmluYWwtc2NyZWVuJyk7XG4gICAgICAgIGluUHJvZ3Jlc3NTY3JlZW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpblByb2dyZXNzU2NyZWVuKTtcblxuICAgICAgICB2YXIgaW1hZ2VTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIFdpZHRoOiAyNjAsXG4gICAgICAgICAgICBIZWlnaHQ6IDEyMCxcbiAgICAgICAgICAgIFBvc2l0aW9uWDogMSxcbiAgICAgICAgICAgIFBvc2l0aW9uWTogMVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcHRpb25zLkltYWdlU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIGV4dGVuZChpbWFnZVNldHRpbmdzLCBcbiAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5JbWFnZVNldHRpbmdzID09PSBcImZ1bmN0aW9uXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5JbWFnZVNldHRpbmdzLmNhbGwodGhpcywgb3B0aW9ucykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5JbWFnZVNldHRpbmdzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGltYWdlU2V0dGluZ3MuVmVoaWNsZUNvbmZpZ3VyYXRpb24gPSBiZXN0Q29uZmlndXJhdGlvbi5WYWx1ZTtcblxuICAgICAgICB2YXIgaW1hZ2VVcmwgPSByaWRlc3R5bGVyLmFqYXgudXJsKFwiVmVoaWNsZS9SZW5kZXJcIiwgaW1hZ2VTZXR0aW5ncyk7XG5cbiAgICAgICAgdmVoaWNsZUltYWdlLnNyYyA9IGltYWdlVXJsO1xuICAgICAgICB2ZWhpY2xlSW1hZ2Uuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICB2ZWhpY2xlSW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZlaGljbGVMb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb25maXJtSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgY29uZmlybUhhbmRsZXIpO1xuICAgICAgICAgICAgLy9IaWRlIG1vZGFsXG4gICAgICAgICAgICB2YXIgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1tb2RhbDpub3QoI3ZzbV9tb2RhbF9iYXNlKScpLFxuICAgICAgICAgICAgcGFyZW50QmFzZSA9IGdldENsb3Nlc3QodGhpcywgJy52c20tbW9kYWwnKTtcblxuICAgICAgICAgICAgdmFyIGNvcHlPZkRhdGFBcnJheSA9IGRhdGFBcnJheS5zbGljZSgwKTtcblxuICAgICAgICAgICAgaW5mb0FycmF5ID0gW107XG4gICAgICAgICAgICBkYXRhQXJyYXkgPSBbXTtcblxuICAgICAgICAgICAgcGFyZW50QmFzZS5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgICAgIHBhcmVudEJhc2Uub25UcmFuc2l0aW9uRW5kT25jZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChhbGxNb2RhbHMsIGZ1bmN0aW9uICh0aGlzTW9kYWwpIHt0aGlzTW9kYWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzTW9kYWwpO30pO1xuXG4gICAgICAgICAgICAgICAgdmFyIHZlaGljbGVJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICBJbWFnZVVybDogaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVEZXNjcmlwdGlvbjogdmVoaWNsZURlc2MsXG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiBiZXN0Q29uZmlndXJhdGlvbi5WYWx1ZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBleHRlbmQodmVoaWNsZUluZm8sIGluZm9CYXNlT2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoYmVzdENvbmZpZ3VyYXRpb24uVGlyZU9wdGlvbkJhc2ljKSBleHRlbmQodmVoaWNsZUluZm8sIGJlc3RDb25maWd1cmF0aW9uLlRpcmVPcHRpb25CYXNpYyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FsbGJhY2sgJiYgdHlwZW9mIG9wdGlvbnMuY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0T2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRmluYWxTZWxlY3Rpb25NYWRlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVoaWNsZTogdmVoaWNsZUluZm8sXG4gICAgICAgICAgICAgICAgICAgICAgICBGdWxsU2VsZWN0aW9uRGF0YTogY29weU9mRGF0YUFycmF5XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhvdXRPYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFscygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGNhbGxiYWNrIGZ1bmN0aW9uIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGlkZUJhY2tkcm9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29uZmlybUhhbmRsZXIsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB0aGlzLlNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvYWRCYXNlKCk7XG4gICAgICAgIC8vQ2hlY2sgZm9yIGFueSBleGlzdGluZyBtb2RhbHNcbiAgICAgICAgdmFyIGFsbE1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbW9kYWw6bm90KCN2c21fbW9kYWxfYmFzZSknKTtcbiAgICAgICAgaWYgKGFsbE1vZGFscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlcmUgaXMgY3VycmVudGx5IGFub3RoZXIgdnNtIGluc3RhbmNlIHJ1bm5pbmcuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1vZGFsID0gYmFzZSgpO1xuICAgICAgICBjcmVhdGVCYWNrZHJvcCgpO1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgZGlzQ291bnRpbnVlZCA9IGZhbHNlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBhZGRDbGFzcyhtb2RhbCwgJ2luJyk7XG4gICAgICAgICAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAndnNtLW1vZGFsLW9wZW4nKTtcbiAgICAgICAgICAgIG1vZGFsLm9uVHJhbnNpdGlvbkVuZE9uY2UoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXF1ZXN0U3RlcChtb2RhbCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCA1MCk7XG4gICAgfVxuXG4gICAgdGhpcy5IaWRlID0gaGlkZU1vZGFscztcbn0iLCIvKiBleHBvcnRlZCBSaWRlU3R5bGVyVmlld3BvcnQgKi9cbmZ1bmN0aW9uIFJpZGVTdHlsZXJWaWV3cG9ydChlbGVtLCBvcHRpb25zKSB7XG4gICAgLy8gVUkgcmVzb3VyY2VzXG4gICAgdmFyIGxvYWRlckRhdGEgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoSUFBZ0FQWUFBUC8vL3dBQUFQcjYrdGJXMXRyYTJ2ejgvTHE2dW9DQWdJcUtpc0RBd1BiMjl1am82SWlJaUg1K2ZxQ2dvT2JtNW5Cd2NGSlNVb0tDZ3VUazVQTHk4bng4ZktLaW9xNnVyalkyTmpvNk9rQkFRR3BxYXR6YzNQVDA5SHA2ZXFhbXB2ajQrTWpJeUR3OFBHeHNiT3JxNnA2ZW5uaDRlTDYrdnRMUzBqUTBORGc0T0t5c3JNYkd4c3pNek83dTd0VFUxREF3TUxTMHRMeTh2S2lvcVBEdzhHNXVicEtTa3RqWTJPTGk0b2FHaGhJU0VoQVFFQ1FrSkE0T0RpNHVMcHFhbXVEZzRON2UzdXpzN0xDd3NKeWNuSmFXbG1KaVlvNk9qcFNVbEVaR1JreE1URkJRVUVSRVJFcEtTcENRa003T3praElTRUpDUXREUTBNTEN3azVPVHBpWW1Cb2FHaWdvS0RJeU1oWVdGaFFVRkxpNHVGcGFXbFJVVktTa3BISnljbGhZV0Y1ZVhtUmtaRnhjWEZaV1ZpSWlJaUFnSUI0ZUhpb3FLc3JLeXNURXhHaG9hTGEydG1abVppd3NMS3FxcWhnWUdHQmdZQndjSEhSMGRIWjJkckt5c2lZbUpvU0VoRDQrUG95TWpBd01EQUFBQUFBQUFBQUFBQUFBQUFBQUFDSCtHa055WldGMFpXUWdkMmwwYUNCaGFtRjRiRzloWkM1cGJtWnZBQ0g1QkFBRkFBQUFJZjhMVGtWVVUwTkJVRVV5TGpBREFRQUFBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRa1pLRUN6azJOSk9DRHhjaGd3VTFPanNTbVFvUUdDSVdnaFFpT3owMW5wQUxFUmtZR1E0QUZCcXRQNElMTjBBQ2pnSVNHaGtwR0RJQU5qdytLQUJDS05FdWp4TWJHaW93b3dBRUhJSVQwU2dVa0J3akdpSXpoa0l2S0RpU0pDc3h3WVlkbUk4S0ZCMEZqZnFMQWdZTUVpU1VFSmVvQUpBQkJBZ2lHbkNnUVFVUEpsZ29JZ0d1V3lJQ0NCaG9STkJDRWJSb0ZoRVZTT0RBd29jVElCUVZ3RUVnaU1KRUNoU2t6TlRQUlFkRUZGNDZLc0FCeFl0cGhVaXNBeExwVzdRSmdrRE14QUZPNXlJQzBWNWdFanJnNWtjVVFCMDk4RWxDRUZRVVJBSDRDaUx2RVFVRmcyNUVDd0tMcGlDbUtCQzZ1aTBrWUlMY3VYano2dDNMZDFJZ0FDSDVCQUFGQUFFQUxBQUFBQUFnQUNBQUFBZi9nQUNDZzRTRmhvZUlpWXFMakkyT2h3OFRqNDRYS2xoYms0c0tFVlpaWEFXWmd3c3hMWU1kVEoxUkNxRUFJQTFKU2pPQ0ZLaGFVU0NDb0k4a1JrcE1VTElLVkZaYVhhQUxOMEM2akFWSFMwMVJURk1BVlZjOFhnQkNLTnN1andzbVMxQWFDSUpTcFFBVDJ5Z1VrMEFlUzBvWGhrSXZLRGloUWpFeXk0UWROSk1nT3F4cXhDOVJDeUpGa0t3WWlLZ0FrQUVFMkNXaTRDQ2hEU2RTRkpGUXgwRVJpQ0VXUWxxNG9VamJ0bzZLZ0NRd0lPT0pBRVVGY0JBSUluR1JnSUtzR3Jyb2dJaEN6VWNGZ3FCNDBhMFFpWHBBTWoxUUo2a1ZMZ0E0MVAxa3hHSGJpMzlIQi9BMGlhS29vNk12U0FnaXNDMHBBR1JCWGs0U09Pakd0aUNERlhDR1NvZENTTTZHQzd6ZTNjdTNyOSsvZ0FjRkFnQWgrUVFBQlFBQ0FDd0FBQUFBSUFBZ0FBQUgvNEFBZ29PRWhZYUhpSW1LaTR5TmpvWWtUajhVajQwU1BHVU1sWXNkU3p4bVNpQ2JnMEl5S0lNMFRUeG5UQXFqQUNBSVlHTkRnaDFVcTFDaUFCMlZMbDloWkdBWHNHU3JYQVVLRWpOQUJZNEZSR0pqWFYwc0FEOCthQjhBTm1JdEtDNlBKQXhpWEJGSUFBSWhJWUpWVXlnb2xJOFRDTkl4aGtBdktEaWpMaWRUemd4MW9MRUp4QzVHQVJlUmtMRml4WlNEaHdvQUdVQkFYaUlXUXk2c21NRkJFUWw0S0RvcWVuS2k1QWwraVlTQUZKbUl3Z0FVTDVvcEtvQ0RRQkNMTTE4OWM5SHJFQVdjejRMQURGZUloRDRnbXhhQW5DRElvQ0FjSUlFdUVncVRvTkVCdlZUQ0krckl4WUFYSkFRUmdJY1V3SUliUVFRVVBIaUQ3S0NFT2hNQlRJQW5KRzdFQlZ6dDZ0M0x0Ni9mdllFQUFDSDVCQUFGQUFNQUxBQUFBQUFnQUNBQUFBZi9nQUNDZzRTRmhvZUlpWXFMakkyT2hpUlZEaFNQalFoWVBrZVZpd3BqV0c1ZElKdURCVGRCZ3hSa1dHaEtDcU9DSzE4UVc0SWRYS3NSb2dBUEhZOEZObDhiRzJ3QUlFYXJSZ1VLRFc0Uk9JOFhIbDlyYlMwQURoa1lid0JJV2oxd1U0OHVQeDRRWWc0QUJTMXBnbTA5WlVjMGxRdEU1U2VHUjFoRXo1c1VJV2tGREFrQUlxOVNBUUdPQWpJQzhZTEZGQlFJRXhVQU1vQUFKVVU0MW9WUXMwQVJDUlFnT1N5YUFCS2tDMFZDU29wVUpBREhqUnNURmhYQVFTRElSWm12RXJyb2RZakNUVjlCVUx3NFdZakVDeFJBTm4wRUdiTllSQndsZnpJaUtWU2UwUnU5VXBxc1JHSEFBQktDQ0lCTUNtQ0JxWWlQQktDOU1aWlVUa0pVRUlXOFBWUmdBZEc1ZVBQcTNjdFhieUFBSWZrRUFBVUFCQUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZHUWhaREhZK05TRkVpUlpXTENtdFJHWEVnbTRRZ0NvTWRZaG9aWUthakFBOUVUbXFDblJvcVk2SUFDeTZWQ1FnSERRa0FJQkFhR0NNQUNoSXBTaHlQVHpZTURSNG9BRE5RVVVNQVZYSlpPaitQSFJkT09SNHJBQVZTVDRJajNqb1hsUzdqT1N5R05uQTdZUlNiSFNndmh5QU12QkhpcWxFQmd4TnUzTUN4cUFDUUFRVDJLWEtCb2lJS0dvcElXSFEyMGVKRlJVSTJOc1NoY01KSUFrRWtOaXhvMEFXbFF4UlVQaW9ReEIrdlFpUmVvQUN5U1dORms4TUVDTUpoVVNhakNSVmZZTXg1ZzFMSWlqY2RLU0F3Z0lRZ0FoVjU2cm9CUkdpbEFnY0YzY2c2S0N4TEFFaFJFRHhicUFDSnFHd0k0OHFkUzdmdXFFQUFJZmtFQUFVQUJRQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNkdMaXRzQ28rTkpSRlVNNVdMSUNZUlRTTUNtNGtkYzU5aUlJSWdMdytWVDJ3b2dncDBFVkJyb2d0ZmJsRlNqaE5lUDBocEFBSU5FVWwwQUFwZlpXZHlUcjRyRmtWT0JBQjFZQkZzQUQ5MnpsWjFqaUJUYnc0Mld3QUZMN0VDUm1aeWNFWVVqeFJxYnlXOWhVZndSaVNiSUVHQ0hLTHd4b0tRVVkxQVVDalFpQVFCQWhNV0ZXalJna0NIUlJSUWFFUkJReEdKalJ3d2J1U29TQWhJUmc5dTNJaW9xQUFPQWtBdU1tS0lzRkVCRnpJTlVaaTNxVUFRRkM5Y0dDS3hEc2ltanhwWmdoQUZBTWRHbm80ZWFIelJrZWlOaXlZMUNuMEVnc0FBZndBSWFEUUtZTUVOSUV3cjBRUndZK3lndFRVVUFVelFlREN1b1FJa3R0cmR5N2V2Mzc5OUF3RUFJZmtFQUFVQUJnQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNkdCUU1EajQ1c0kyMHlsSXNnREcxakJ3V2FpUXAzbmw4Z2dpQXlReFNQSkNnUHFaMWNkQUlBSkI0cGJrZU9DbW94RjVNQ1IyMWNFZ0FLRlRCb2RtTzJqQjBocXpNNEFESWpScGtPS2N3OFA0OGNMQVlySVFBRk41TUZJMjUyWlJ1dGppQUVMRnNjaGtWWFpXc2ttZ1VrQzRjb1hQamdRbFFqRURqNE1TSkJnTUNFUlJQQTJNbGdZSkdDRnlneTBsQ0U1TXdWSDIxUWpjS29VUkVCTmdsWTNHQzA0TWFOaDRvSzRDQUFSSUhCbTRnS3VPaUFpQUk4U2dXQ29IaFJzQkFKakVBMHZjb0lFOFF6SEJsUi9HejBJT09MalVkdjhCUVN0V2c4QWpjVUVzaVlGRUJMSU0rQURycEJkbEFvbklJUkptUVVBaGNTQ2E5MTgrcmR5N2V2cUVBQUlma0VBQVVBQndBc0FBQUFBQ0FBSUFBQUIvK0FBSUtEaElXR2g0aUppb3VNalk2SElBS1Bqa0ZGUDBDVGpCOFZYeCtaaWdJL0ZSQU1rZ0FDQ1d3ZGp3VkNOSUlDUktNSGtrSjNVUmxJajBGUElUZ0FCUTRWTlVjRklEbDRLaWxpcG9zQ0x5Z3RVeVFBSVhkMExRQXp1Q2xZRG85QUtGSWhONElUbUFWMEdTa3dYNnVPSUJ6aUM0WkVLVDRRUXBtdHI0WWRkU3RjZkdvRVlvSStSa0lJRUppd2FFSVlOeHBrTEFJQkRRV0tmb2p5Nk5pWVJJRWlpaFl2S2pyU28yUVRFSXNXM0xqQlVORUREMVNvaEJnSXFsbWpBaTdlR2FKQTRWT0JJQ2hlQ0N4RUFocW1TU1JDdG93a0NFZklubzhlV0h6eHF1aU5WVUpDRG9WSDRBWTFBQVFzSGxVSnBJRFBRVGZFRGpKTGM5QUVpd2NQMnhZcVFHS3IzTHQ0OCtyZGl6Y1FBQ0g1QkFBRkFBZ0FMQUFBQUFBZ0FDQUFBQWYvZ0FDQ2c0U0Zob2VJaVlxTGpJMk9qNUNIQ21raENwR0xVMGdNTXBlSkJVT2FQd1dDQWl3eUhaQWRsZ0FDRjBnNU5nSUFMa2NSVFNXUEV5OERRZ0FGZFVoM3VDQk9WRkJNRUxLTUJUY29LQzhVQUM4L0NDOEFRMTFOVEJvemowRE9LQStDSk9JRkV0cDRGYWlPSUJ6UExvWmVUSGdlOEpBRkx0R0dIVnQxTkoyTVFFem94VWdJQVFJVEZqMW9nNEVKbTBVQ0JvRDdsOGlHSEN0V2xJQlFGSEdpSWh0WlFtcGNaUEJHUWtVUHhJaFk4aERnb1FJVWxEbkN0ODRRQlgzM2dyd3pST0lGQ2lDUlNJQTdDVUlaRG5BNEd6MXc5dUpmenh1b2hJQ3p4NDdBRFJLQ0NEZ0RDbURCRFJ5aklvVUYwT3pub0xFdUp6Z2o2TEpRQVJKVUN0dktuVXUzcnQyNWdRQUFJZmtFQUFVQUNRQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNlBrSWdrQzVHTUhFTXpONVdLTEJjT1E0TUNMMm9La0NBZ2dnV2RKUjhGQURSRWJXTWZqeVF2QTBLQ2FSZEVGd0FDSlVaY1hRMnVqUndvS0M4VUFFQjFGaHdBQnJKZFM3Nk9PTWtvRDRJMEpJSk9ZMTFVT2FXT0lNZ3ZOSVlYWk9UcmtBVXV6SVlLSjF2d200b0NEMEZDeG9tRUVDQXdZUkdRR2hwVUpQbVN6NUNBQWRvYUdycGpweUtQS3pJU0ZZQ1lUR0loQkdaQ21yRmpRSkVMQWpjS0tucXdJUW9USms0RTZETlVvSVBOUi9JNklHSXhSR2U4SU1wY0dDS1I0RXNib2JXMHFRUWhFMEEyS1E1UVFIcVFUQjBBV3pkMEN0R1c2eEVJbE44QUVFZ0dSTkNDR3pnQTRoeDBnK3dndGZvVEppVHJPck5RQVJKSTYrcmR5N2V2WDc2QkFBQWgrUVFBQlFBS0FDd0FBQUFBSUFBZ0FBQUgvNEFBZ29PRWhZYUhpSW1LaTR5TmpvK1FpQ0FDa1l4Q1R5d2tsWW9FYVRJc2d3VWNRSkVnQllNM2FRWXlnaDF2SGlZdGowSXZOMEtDblZ0VEFBVXJKaEJyRG84Y0tDZ3ZGQUJDTFFZVEFHb1Z3R0pianpqRktBK0NDalNDRGw5clJrZ0tqeURFTDl1Rld4dHhOdWVQQlM3SWhpQXNKL0diaWdJTFFFRDJpRUlFQkpvcDRqQ0hTaEltWWxBa0VqREFXcnRET1ZLa3dFSVJ3aWxFQkJ3cXV1T21ZMGNJaWx3UXVDRXdFUTRJU3BSUW1VUGducUVDSFdKZVpQU3V3eUVRUTRiWWhGUWdpREVYaGh4bzBUSUc2Q01TMWdST0VwUUdpaDRkTVNBOUtHWU9BSWxhTm9VWXdLT0hDQ1FRSXpVQnlJaUNGSUFGTWlxVWRJZXFtRmxlTGhRSFRTaDJLMjZoQWlTTTJ0M0x0Ni9mdjVzQ0FRQWgrUVFBQlFBTEFDd0FBQUFBSUFBZ0FBQUgvNEFBZ29PRWhZYUhpSW1LaTR5TmpvK1FpQVdSalJRM0JBcVVpaHdvS0J5RUlKT1FCYUlBQkowdmdnb0pSQmVaampRM04wS0NwMUlEQUFVeVJ6a0hLSTlCcUJRQVFnTW9MZ0JTTmd3TkRaK09PSjBvQzRJZ3IzWE1KbDZsakNDY0w4T0ZhZ2QwRGgyUkJTN2hoU0JQSWVlYWl3SWtPRGpyaUM0RUJCT0xRQWRqWkxwQXdKWG9WQ2NhaW80d2ljSlFnd2RGQmxFZ1RKUW5nMFdMRHhOUklIQ0RuNklKSHNpQUFWUGhXVHhDQlRwMGVOVW9IYnhDQW1MRWVPbW9RTEFYeUFveHNDTEhTRTVISktSNUJDRkFVSmdkV3F5d2dmUUFGVUlTTDI2Y1E2SURxUU5JSURpU3FOVUpDQUFGRGR5SThUaHEwSTJ1Z3g0VVBRbGdRaWRhYkE0TEZTRHhNNjdkdTNqejZxVVVDQUFoK1FRQUJRQU1BQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRa1pLRUNrQkFBcE9KUUNnb0Q1bURCUVdEQkp3Y2dnVURVd1NRSFRjM1FvS2tLRUdDVHpNT0RqU1BPSnd2SFFCQ0F3TVVBRUVyRGtWVkxvOFRuQ2dMZ2dJZ2dpd1dSVWQxa0NBY0tDL0VoVkpWZVJjS2tRVXUzNFVDTndQbG40a0ZRZzhQdjRvVUJBUVRpeE41TlcxaURWWWxrb1ZDVjZJZlpMcDBpUkFoaHlLQ0JoRVZhVUtSNGgxN0JHN29VL1RnanBpUE9XaTlvNlRBWGFOejlkUnQyWkxTVVlFZzNaWVZ5c1BqeW9hSWpVZzQyd2dDRXdBalZzN1lNUURwUVM5ZEpGN2MrRlhFU2xBdjJqS1NpTVVKQ0FBRkVyQndNV1Z1MEkycWd4Wk1lOWNNQmF5UmhBcVFrSW0ycmR1M2NBVGpOZ29FQUNINUJBQUZBQTBBTEFBQUFBQWdBQ0FBQUFmL2dBQ0NnNFNGaG9lSWlZcUxqSTJPajVDUmtvUUtRRGdDazRrNEtDZ1BtWU1GQllNRW5CeURKQndVa0IwM04wS0NwQ2hCZ2tBc0JpR1FFNXd2SFFCQ0F3T3FKQ0V5ZFd5WWpnK2NLQXVDQWlDQ0hNVXp1SThDSENndnFvVTRkUjhKMEpBRkx0dUdPRUhobjRnRk5DUWt5SWtVQkFRVGl3dEVCeDRtU0VDS3NTZzBGSDNZc0thTlFTVCtsZ1ZNNUdETW1EQU9iU2lTZDZPZUloSkh2bnlaWXdPSHVrSUtGS1JqTks2WElRcHZMcGg4VkNCSU5oZUdqcmpCTXVmVkl4TExMSUlJS0lBTER6USs2Q2g0cEN4YlFCSXZ2ckFCZ0lRSGp5dFlUandDUWVBR0NWZ29QSkFwb09CTG1hZGVJb2tTZEFNRmthMEFhSGpBb21UQUoxMFhGSWlBNG5EMVV3RVNDMForM011M3I5Ky9rQUlCQUNINUJBQUZBQTRBTEFBQUFBQWdBQ0FBQUFmL2dBQ0NnNFNGaG9lSWlZcUxqSTJPajVDUmtvUUNFd3NGazRrNEtDZ0xtWU9ZZ3dTY0hJTVVMcEVkQkRkQ2dxTW9RWUlUTHlnNGtCT2NMeDBBUWdNREZMeWNMUytRQzV5ZGdnSWdzaWd0YWtDUUJSd29MOENGUWkxVEtLR1BCUzdXaGtLWG40dW5IZHlJRkFRRUU0dENLMFZPTmgrdGlhOG9OSW94QncwVkZSNWJGTjNMbCtqQ2w0TUhZeWhTZDZPZElpRkVKTnk1NHdBVk9VSWdNblp6c2N1UWl4VnNPbllMUXMwaUlSc1pORFF3MllqRU1ZZFBTaW5nZ2tVRm5nTWlHVDNJbFErSUNqUUJxL2pBZ2dHUGwwY2dWcEVROUVMRmpqRUZRSGdZaW1HRWdHaURXdmpZUVFhVEVBZytVdno0OU9LS2ppS20ySVQ4Uk9GSWxad1hDT1BLblV1M0xxUkFBQ0g1QkFBRkFBOEFMQUFBQUFBZ0FDQUFBQWYvZ0FDQ2c0U0Zob2VJaVlxTGpJMk9qNUNSa29RRkpDU1RpamdvS0F1WWlBU2JISU1kSFpFS0hBUkNncUFvUVlJVEx5K1hqdytiTDZWQ0F3TVVBRUticlpBTHY1MEFBaUN2djZxUEJSd29MN3lGdmlnNGtnVXUwSVlVTko2TUNoVEhpeFFFQkJPTEhWTXJIeXRTaTZ3bzI0a3NWVVZJU0Qvd243LzRoMU1NL2d3MlhDZ1NkNlBjd0RkSWJCQmh4NjJRQUFVQ2xya29aWWhHREJrS0loVUk0a3hnb1I5TklpRFl4NGpFcjNJQ1dyZ0NJVVlERkNwNUtEYXE1V3hiRGpsWURBQndJRUpERWlvckhvRWdjT01TQlJVNjRCZ3BBRUpDenlRbUNrQ1NDb0FFaktSaHBMcndJQ0tLQlU5dGt2NFlSTUVBUms4VGp2eVEyYkN0Mjdkd0JPTkdDZ1FBSWZrRUFBVUFFQUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZQa0pHU2hBVWtKSk9LRXlnb0M1aUlCSnNjZ3lBZ2tRb2NCRUtDb0NoQmdnOHZBelNRRDVzdkhRQkNBemNVdVpzb09KQUx2NTBBQWdLQ21wdXFqd1VjS0MrOWhVS2J3WkVGTHRLR0ZMT2Vpd0lnQll3VUJBUVQzeTlxQ1N6TWlhd28zWWczZFVNWEZ5ZUw3L0dIVWhiK0ZnWVdVZUJ3NDV5aURnWm12SWx4eVZzaEFlS2F1Y0JsaUlZTU5hVWdGUWdDellVaEwyUGFWTkhXaU1TdmN3S2VBQUVBNGtzRUxuR3FLSGhVQzlvc0JEeEU0UHRBSlFLWU9ERWVnU0J3NHhJRlBGYktiQ2dBSW84U256a2lPb29vQkVQU051Sm8zS0hTNVkybkVWWjRsQmpVSWMyVW1aZ20ySENBMXFIYnQzQUY0OHFWRkFnQUlma0VBQVVBRVFBc0FBQUFBQ0FBSUFBQUIvK0FBSUtEaElXR2g0aUppb3VNalk2UGtKR1NoQVVrUXBPS0R5Z29DNWlJQkpzY2d5QUZrUW9jQkpjQW9DaEJnZzh2TngyUW1pZ3ZzMElETnhRQVFwc29ENUFMdjUwQUFnS0NFNytxamdVY3RyeUZRaThvT0pJRkx0R0dIVFNlakFXbGpCUUVCQk9MQlVBREEwRElpcXdvM1lrUFR5MXBhZGJ1di9HSVFUTCtNcTRVVWVCd3c1d2lFQzFPbkpBQ3dwc2hjSkN3emRyRzRrbkRpRUZRU0FsaDZBSUVEeDhtT25LeDZjZ2NZeUZRR0R2UXBnYWREeGNiYVhxRHhRc0FKejd3R0FBd0pFNmJFWE1TUEFMeFFnd0RBUlNTMklGaHdsaVZNRDkvUUJKUURBY1dPejdhSUtQZ3hFaWJHSmdXcU1DcVZaQ0NqVEVqVVZCaXg4MGRoNFVRTHVDaGtnWnVvUWNrN09yZHk1ZFFJQUFoK1FRQUJRQVNBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRa1pLRUJTUXVrNG9QS0Nna21JZ0VteHlEQWdXUkNod0VRb0tnS0VHQ0R3TUVJSkNhS0M4ZEFFSUROeFM1bXlnTGtBdS93UUNrZ2hPL3FvOEZITGE5aFVJdktEaVNCUzdRaGgwMG5veWxqUlFFQkJPTEJVQzcxWXVzS055Snc3L1puNy90aU8rYjhZY1VIRGZraWdWQkx3YWs2MGJ3V2hBQmhrQ2d1SUVRVXJNaVdINFlrc0hBeGhZRmtJUWdNTE1EZ3JFMEw0dzVxWERuQ0p1R2pXWlk2UUZuQm9BaUdaUWtBR0JnRHNrOExSNmx5ZUFtajRBT1MxTGd1V1BNeXh3UEV0aEFJdkZBRUFrbUtVUjhLZFhCZ29rN1VqQTlqVnJqbTRBYnJqQzVhSklpZ3dtQ2hUeEVmWU9XMElJU2J3Z3d0cDFMdDY2Z1FBQWgrUVFBQlFBVEFDd0FBQUFBSUFBZ0FBQUgvNEFBZ29PRWhZYUhpSW1LaTR5TmpvK1FrWktFQlVJdWs0b1BLQ2drbUlnRW14eURCWklLSEFSQ2dxQW9RWUlQQXh3Q2tKb29MeDBBUWdNM0ZMaWJLS21QQzc0TGdnS2tBQk8rdkk4RkhMWExoRUl2S0RpU0JTN1FoUjAwbm96SGpCUUVCQk9MQlVDNnhJdXJLTnlKd3B1MjZyN3RpRUsrOFlvVUhEZmtpZ1U0QkRnQTYwWVFTQWtac2dvSkNJTGptNk1KU1hySUtXRW9oSU1WYVJJNnFySkRCNXc1QUFROHVTRm9obzBTSDFwQU1xRWpTNWtWQUlnMEdjTUNnQm9FTm9oOGVQQ29oWVlVVGdSMEdCTmxpUk1BQmVyZ0pBSUVrcEIwUXBaRW9YS0FGSWd0UHd5QXdCUTFpcElLMzI1NW9rSEc2eDJDaGU1NHJZT1dFSWtQZFFpMnRwMUx0NjZnUUFBaCtRUUFCUUFVQUN3QUFBQUFJQUFnQUFBSC80QUFnb09FaFlhSGlJbUtpNHlOam8rUWtaS0VCVUl1azRvUEtDZ2ttSWdFbXh5REJaSUtIQVJDZ3FBb1FZSUxOMEVDa0pvb0x4MEFRZ00zRkxpYktLbVBDNzRMZ2dLa0FCTyt2SThGSExYTGhFSXZLRGlTQlM3UWhSMDBub3pIakJRRUJCT0xCVUM2bll1cktOeUp3cHNEc29ycjdZaEN2dkdMRkJ3MzVJb0ZPQWh3cU5ldEd3NEhKK1FWSW5FcDBnUWxXWGhZTUhSREJvc2czeG9kZ1NPblRBVUFCVjYwQW5CaXhaWXBJeDE1a0dQR3pSQUFYcmpVZUFKQWlvVVZiTlNBZVBRRUNwNGlBaFNzNldLa0JNZ3BYbGFjMlBsSUNERUFMc0owaVhPRWxJQVhDYXBoY2hHblM1ZzhHYnZSRU9QVlJzRkNSN3dhT0J2dGdnR21iQWJqeXAwTElCQUFJZmtFQUFVQUZRQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNlBrSkdTaEFWQ0xwT0tEeWdvSkppSUJKc2Nnd1dTQ2h3RVFvS2dLRUdDQ3pkQXBJK2FLQzhkQUVJRE54UzRteWk4and1K0M0SUNzaE8rd0k0RkhMWEtnMEl2S0RpU0JTN1BoQjAwbm95eWpCUUVCQk9MQlVDNnFZdXJLTnVKSkw0MzNvZ0RhZ2t4bllsQzcvR0hMV0ZOSnJjU0ZjQkJJQWk3UlIyRTdPTkdDQWVSSVNBT3ViZ1VLVWdYTTI0Y0dLSVY2eEdKTUdXdStKQUFvQUFCYWdCUWhKQ0M0c0VqQnlIZHFGZ0I0RUlOQ1FNQUJEbXhrc0FqQ1hiY3BNZ2pRSUdKTlNab3B1UXB5cEdVQ0ZHSzNLSlJZdzBkalNXQkFGRUF5Y1U0UVRRZ3JKbERoQ0VoQ25QV2ZMRmdscEFEdFdvTjJnNmlJSU9GQUxsNDgrWU5CQUFoK1FRQUJRQVdBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRa1pLRUJVSXVrNG9QS0Nna21JZ0VteHlEQlpJS0hBUkNncUFvUVlJTE4wQ2tqNW9vTHgwQVFnTTNGTGliS0x5UEM3NExnZ0t5RTc3QWpnVWN0Y3FEUWk4b09KSUZMcytFSFRTZWpMS011VGNUaXdWQXVwZUtRbUJLTlJJM2lpUytCSXNrS1QwOU94L284WXdYVENrMTJBb1Z3RUVnU01CREhWeDQ0MlpvZ29VWUlBNjVPQWNKeUJnZkt2SVZnb2NpMWlNaGJYeWtFSkVIQURsaUFJQU1lK1FFeGtnb2RRQnNrVkNsRlVjVW9ocUI0SklpUXhRSEJVQXdhT0RraEtBSjBoNDhZcEJCZzVPSUZDUTB5Qk5URUFXS2pTaklPS0hBNnAwR0NJWXdKQVFpRDlndFl3a1pPT0FrWjFxVEhBZW92WjFMbDI0Z0FDSDVCQUFGQUJjQUxBQUFBQUFnQUNBQUFBZi9nQUNDZzRTRmhvZUlpWXFMakkyT2o1Q1Jrb1FGUWk2VGlnOG9LQ1NZaUFTYkhKNEFDa0VFUW9LZ0tFR0NKQVJBQlpDYUtDOGRBRUlETnhTM215aTdqd3U5QzRJQ3NRQVR2YitPQlJ5MHlvTkNMeWc0a2dVdXo0UWROSkZDcUkzR2pDc1lNR3VkaVFWQXVkdUtRaGc3NzIrS0pMMEVpeVFaV1Zsd00reTlvb3REbW9pWWc2MVFBUndFZ2hROHBNQUZ1RkdHSHN3d0FPSVFoWVdMY0xRUkFlV0NJUkxTWUQwU0FnRVBFeXBWV2wwQ0FFVFlveW9tbFhBeEFFRE5qeUhEaFBRQzRnaEVHeVpOdXN3b0lJQklrUmxTQkQxNDhjSmJJeWROSWhDcFNNTkdrUThzQm5WUUFLbkRGRFZjQVhRb1VzU0xHb2lFQkh3b1lnRUZXa0k0RFM0a1dQZFcwTU82ZVBQV0RRUUFJZmtFQUFVQUdBQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNlBrSkdTaEFWQ0xwT0tEeWdvSkppSUJKc2NuZ0FLUVFSQ2dxQW9RWUlrQkVBRmtKb29MeDBBUWdNM0ZMZWJLTHVQQzcwTGdnS3hBQk85djQ0RkhMVEtnMEl2S0RpU0JTN1BoQjAwa1M2b2pjYU1ReUlZSTUySkJVQURCTmlHUW5oV2NIQVhpaVM5b29wQ1VXWm1aVy80OW94aWRFbmlnUjBsSEFTQ0dEU2tnQWE0VVlZV1hFZ2c0QkNGaFlvbXpGSENoWTBoRXRLQVFISlJnUXFaT0Y0RTBWQWdDRWd2YjQwY0xDRVRab1FhQUZKaXBOa2xwTmNFUnlEbTBGd1RvNENBSVVQVVVBUHc0TVVBaklhSWhHbnpwbUtIR1VPbTNDTUZBbEtIRUMyTWdiZ3dKTUZXaUlKWUREa3hETzBnQlRjS2ZycWRTN2V1WFVPQkFBQWgrUVFBQlFBWkFDd0FBQUFBSUFBZ0FBQUgvNEFBZ29PRWhZYUhpSW1LaTR5TmpvK1FrWktFQlVJdWs0b1BLQ2drbUlnRW14eWVBQXBCQkVLQ29DaEJnaVFFUUFXUU1pMG9MeDBBUWdNM0ZMaWJLTHlQT1JDMEM0SUNzUUFUdnNDT1FGQmZUOHlEUWk4b09KSTREc1dISFRTUEJTNGtRZ0tOeUlva1h4b1pJaHVvaVFWQUF3UzNpVjUyZGp3OFpRN252cUtKTTl3SUZPaEZrUkJmckJLUm9OTUV5cElHbDk3aGVLVmdVU1VTRVVjaElzRW1CRGxERktRNVduQWdUbzBFaGtoVUF3S0pCb0k0RytqVUVhUUFoQ0FndnR3MWVtTmt3eHdKVHdBRWVUTGcxc0ZOMnhnSmtMRGhTNFVUQUFxd29NVVN3QU41RlIzTmNNcUduQUExdFA0Qk9BWkpnWlFYeUFxa29hcXhFSkFuTHcxRXRxV1F0YTNkdTNqektnb0VBQ0g1QkFBRkFCb0FMQUFBQUFBZ0FDQUFBQWYvZ0FDQ2c0U0Zob2VJaVlxTGpJMk9qNUNSa29RRlFpNlRpZzhvS0NTWWd4MEZnd1NiSEo0QWFVMC9Rb0tqS0VHQ0pBUkFvWTl6UFNrR0hRQkNBemNVdTVzb3Y0OFNPejFHRDRJQ3RCUEJ3NDQ0U1R0bFQ0WkNMeWc0a2pnL2JMU0ZIVFNQQlRTV0FvM2ZpU3diVFV4Slg1MkpCVUFEQkxxSUlFWlkrekF3U0lva2dyM0N0eUdEUVlNT0ZBa0pCa1JSaXcxa3lJeGhFQTlSQVJ5eVFDd0NJVVNJT0ZPSlhDUjRrbTRRaFdlUFNEaVpjNmVGSVJMWUdqNmlVSVhPZ1R3SkJJSFFDQUJIc0krTjJKZzRnT0RIRFFBd0IraGF1R25CSXlJSEdDQnhDYUNWekFYMWVEWlNrNmVJbWxBRmJtd2FDS0JBU1VZVGtvbmFwQTBrSVY0RURSUzRMV1IycnQyN2VQTWVDZ1FBSWZrRUFBVUFHd0FzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZQa0pHU2hBVkNMcE9LRHlnb0pKaURGRUtEQkpzY25nQXRUU2xGZ3FNb1FZSWtCRUFGa0I1Wk9sWUdBRUlETnhTN215aS9qd3h3V2pzU2dnSzBBQlBCdzQ0NFZIQm5GNFpDTHlnNGtoTWxXOHlGSFRTUEJUUkNOT0NLNllocGMyUkxFUjZoaVFWQUF3UWRpU0ExVVZFYUduaUlLQ0lSN0JVaUFYU2FLRlE0UTVHUVlFQVVTVEhScHMwSUcvTVFGY0FoQzhRaUVDNWNRRE4xaUVhYUcrc0VVUmpweUlXRlBEOXVHQ0tSTGVJakVHK09WUG1BUWhBSWp3QndCQnZuQ0lXVEtsNWlQQUJBYzBDK2g1czZGYTFpNGNJQVZwdHNMcmdIdEpHQ0UyeGtBaWh3WTVQQnNTa1pDU0RFWWRNQ2tvVU9LSERnMEJXdTNidDQ4K3BkRkFnQUlma0VBQVVBSEFBc0FBQUFBQ0FBSUFBQUIvK0FBSUtEaElXR2g0aUppb3VNalk2UGtKR1NoQVZDTHBPS0R5Z29KSmlETkVLREJKc2NuZ0F0VUJsVmdxTW9RWUlrQkVBRmtBZG1WbVV5QUVJRE54UzdteWkvajBjOFoxWTVnZ0swQUJQQnc0NFRaRHgyZFlaQ0x5ZzRraE5lTXN5RkhUU1BCUlF1Tk9DSzZZaFNCMkpoY1RuamlRVkFBd1FLaVFJVlhWMFJTMHN1S0NJUkRJaStPMk1TSmh5aVNFaEJSUU1ZbUREUndNRThSQVZ3eUFLeFNBQUZHaDFNS2Vyd3d1QWhDdEFlVVlqaGhjMERReVN5bVh4MDRrT2RLZHNBZ09BSUFNZXpSeVJXMURueFpGek1BU0VkYnJya3lBVWJHV2xlQW1obGNzR05JQUlnMmVzRW9NQ05UYThFclpzVVpOTUNrWVVVQkprd0ZxM2J0M0FGNDhwRkZBZ0FJZmtFQUFVQUhRQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNlBrSkdTaEE4WExwT0VDeE9FWDAxU0pKZ0FVMGw0SllJVUtrcFNIS0VWYmxkdVJBQVVHV1FvUVlJa0JFQUZqMDR3Ym5ab0JnQk9iVGNVQUVJb3pNbU9EMkV3YUR3VmdoTzlBQlBNS002T045RStGb1pDTHlnNGtnOGZGd0tISFRTUTdoVFlpL09KTDBkekVCQk83NGtGUUFNSUtFZ2tJTSthTm0zRUdHR2ppTVEySVA2UWZKazRrVmlpWmN3Z0p1SlFCUUVDSnhlNkhTcUFZeGVJUlFJNlVCZ1lTcEVDSEVJUVVSRHBDRVNJQkU4dUZTSlJUdU9qRjFPZW9OZ0VBTVJKQURpMjBYUVpRdWlMZHp3SGRGQzJUV2VqQWdOUXZBQUZnRUJHUVF0dTRLakhTTUVDcXplWTRSSkVkaElRWmdzUFdob1NNT0dhM0x0NDgrcmRpeWtRQUNINUJBQUZBQjRBTEFBQUFBQWdBQ0FBQUFmL2dBQ0NnNFNGaG9lSWlZcUxqSTJPajVDUmtvUUxSVE1LazRKQ0Z5R0VkRHM2UjVrQ0J4Z2lGb0lVZURzOUpwazBYQmtwS2c0QUZCcXNSSUlrQkVBRmp3d2FHVmdZTWdBMlBGZ29BRUlvemhTUEV4c2FLakFTZ2dRUGdoUE9LTkNQSENNYUlqT0dRaThvT0pJa0t6RUNoeDAwa0FvVUhiK005NHBDRmprU0VpWGZFQlVBTW9BQXBrUkRHbFR3NE1GRUFrVWt1Z0ZSRklPQlJZc3M5RWxVNUlLTkF3Y2ZUblJRVkFCSEx4Q01GQ2hBbVdtUkFCY2pEMUVJK0tnQUJ4UXZYQmdpZ1c0aUpHN09KZ2dDd1JKSE41cU1DRGg3SVkvbmdKSE5ua0VDZ3BNRU5tYytGOXhRQjZtQWk0TUFiamdMTWloZlM2TW9yTFkwSk9DQjJyVndCK1BLblV0WGJpQUFPd0FBQUFBQUFBQUFBRHhpY2lBdlBnbzhZajVYWVhKdWFXNW5QQzlpUGpvZ0lHMTVjM0ZzWDNGMVpYSjVLQ2tnV3p4aElHaHlaV1k5SjJaMWJtTjBhVzl1TG0xNWMzRnNMWEYxWlhKNUp6NW1kVzVqZEdsdmJpNXRlWE54YkMxeGRXVnllVHd2WVQ1ZE9pQkRZVzRuZENCamIyNXVaV04wSUhSdklHeHZZMkZzSUUxNVUxRk1JSE5sY25abGNpQjBhSEp2ZFdkb0lITnZZMnRsZENBbkwzWmhjaTl5ZFc0dmJYbHpjV3hrTDIxNWMzRnNaQzV6YjJOckp5QW9NaWtnYVc0Z1BHSStMMmh2YldVdllXcGhlR3h2WVdRdmQzZDNMMnhwWW5KaGFYSnBaWE12WTJ4aGMzTXViWGx6Y1d3dWNHaHdQQzlpUGlCdmJpQnNhVzVsSUR4aVBqWTRQQzlpUGp4aWNpQXZQZ284WW5JZ0x6NEtQR0krVjJGeWJtbHVaend2WWo0NklDQnRlWE54YkY5eGRXVnllU2dwSUZzOFlTQm9jbVZtUFNkbWRXNWpkR2x2Ymk1dGVYTnhiQzF4ZFdWeWVTYytablZ1WTNScGIyNHViWGx6Y1d3dGNYVmxjbms4TDJFK1hUb2dRU0JzYVc1cklIUnZJSFJvWlNCelpYSjJaWElnWTI5MWJHUWdibTkwSUdKbElHVnpkR0ZpYkdsemFHVmtJR2x1SUR4aVBpOW9iMjFsTDJGcVlYaHNiMkZrTDNkM2R5OXNhV0p5WVdseWFXVnpMMk5zWVhOekxtMTVjM0ZzTG5Cb2NEd3ZZajRnYjI0Z2JHbHVaU0E4WWo0Mk9Ed3ZZajQ4WW5JZ0x6NEtQR0p5SUM4K0NqeGlQbGRoY201cGJtYzhMMkkrT2lBZ2JYbHpjV3hmY1hWbGNua29LU0JiUEdFZ2FISmxaajBuWm5WdVkzUnBiMjR1YlhsemNXd3RjWFZsY25rblBtWjFibU4wYVc5dUxtMTVjM0ZzTFhGMVpYSjVQQzloUGwwNklFTmhiaWQwSUdOdmJtNWxZM1FnZEc4Z2JHOWpZV3dnVFhsVFVVd2djMlZ5ZG1WeUlIUm9jbTkxWjJnZ2MyOWphMlYwSUNjdmRtRnlMM0oxYmk5dGVYTnhiR1F2YlhsemNXeGtMbk52WTJzbklDZ3lLU0JwYmlBOFlqNHZhRzl0WlM5aGFtRjRiRzloWkM5M2QzY3ZiR2xpY21GcGNtbGxjeTlqYkdGemN5NXRlWE54YkM1d2FIQThMMkkrSUc5dUlHeHBibVVnUEdJK05qZzhMMkkrUEdKeUlDOCtDanhpY2lBdlBnbzhZajVYWVhKdWFXNW5QQzlpUGpvZ0lHMTVjM0ZzWDNGMVpYSjVLQ2tnV3p4aElHaHlaV1k5SjJaMWJtTjBhVzl1TG0xNWMzRnNMWEYxWlhKNUp6NW1kVzVqZEdsdmJpNXRlWE54YkMxeGRXVnllVHd2WVQ1ZE9pQkJJR3hwYm1zZ2RHOGdkR2hsSUhObGNuWmxjaUJqYjNWc1pDQnViM1FnWW1VZ1pYTjBZV0pzYVhOb1pXUWdhVzRnUEdJK0wyaHZiV1V2WVdwaGVHeHZZV1F2ZDNkM0wyeHBZbkpoYVhKcFpYTXZZMnhoYzNNdWJYbHpjV3d1Y0dod1BDOWlQaUJ2YmlCc2FXNWxJRHhpUGpZNFBDOWlQanhpY2lBdlBnbzhZbklnTHo0S1BHSStWMkZ5Ym1sdVp6d3ZZajQ2SUNCdGVYTnhiRjl4ZFdWeWVTZ3BJRnM4WVNCb2NtVm1QU2RtZFc1amRHbHZiaTV0ZVhOeGJDMXhkV1Z5ZVNjK1puVnVZM1JwYjI0dWJYbHpjV3d0Y1hWbGNuazhMMkUrWFRvZ1EyRnVKM1FnWTI5dWJtVmpkQ0IwYnlCc2IyTmhiQ0JOZVZOUlRDQnpaWEoyWlhJZ2RHaHliM1ZuYUNCemIyTnJaWFFnSnk5MllYSXZjblZ1TDIxNWMzRnNaQzl0ZVhOeGJHUXVjMjlqYXljZ0tESXBJR2x1SUR4aVBpOW9iMjFsTDJGcVlYaHNiMkZrTDNkM2R5OXNhV0p5WVdseWFXVnpMMk5zWVhOekxtMTVjM0ZzTG5Cb2NEd3ZZajRnYjI0Z2JHbHVaU0E4WWo0Mk9Ed3ZZajQ4WW5JZ0x6NEtQR0p5SUM4K0NqeGlQbGRoY201cGJtYzhMMkkrT2lBZ2JYbHpjV3hmY1hWbGNua29LU0JiUEdFZ2FISmxaajBuWm5WdVkzUnBiMjR1YlhsemNXd3RjWFZsY25rblBtWjFibU4wYVc5dUxtMTVjM0ZzTFhGMVpYSjVQQzloUGwwNklFRWdiR2x1YXlCMGJ5QjBhR1VnYzJWeWRtVnlJR052ZFd4a0lHNXZkQ0JpWlNCbGMzUmhZbXhwYzJobFpDQnBiaUE4WWo0dmFHOXRaUzloYW1GNGJHOWhaQzkzZDNjdmJHbGljbUZwY21sbGN5OWpiR0Z6Y3k1dGVYTnhiQzV3YUhBOEwySStJRzl1SUd4cGJtVWdQR0krTmpnOEwySStQR0p5SUM4K0NnPT0nO1xuXG4gICAgLy8gVmlld3BvcnQgZWxlbWVudHNcbiAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL1xuICAgIHZhciBjb250YWluZXIgID0gbnVsbDtcbiAgICB2YXIgbG9hZGVyID0gbnVsbDtcbiAgICB2YXIgcmVuZGVyZXIgPSBudWxsO1xuXG4gICAgLy8gU3RvcmVzIHRoZSBjdXJyZW50IHZlaGljbGUgc3RhdGUgZm9yIHRoZSB2ZWhpY2xlXG4gICAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xuICAgIHZhciBzdGF0ZSA9IHsgfTtcblxuICAgIC8vIE1ha2Ugc3VyZSBvdXIgb3B0aW9ucyBvYmplY3QgaXMgaW5pdGlhbGl6ZWRcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIGlmIChvcHRpb25zLnN0YXRlKSB7XG4gICAgICAgIHN0YXRlID0gb3B0aW9ucy5zdGF0ZTtcbiAgICB9XG5cbiAgICAvLyBBdHRlbXB0IHRvIGZpbmQgb3VyIGNvbnRhaW5lciBiYXNlZCBvbiB0aGUgc2VsZWN0aW9uIHN0cmluZyBpZiB3ZSBjYW5cbiAgICBpZiAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtWzBdID09PSAnLicpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbS5zdWJzdHJpbmcoMSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsZW1bMF0gPT09ICcjJykge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbS5zdWJzdHJpbmcoMSkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZWxlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gSXMgdGhpcyBhIERPTSBlbGVtZW50XG4gICAgICAgIGlmIChlbGVtLnRhZ05hbWUpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGVsZW07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UgY2FuIGZpbmQgb3VyIGVsZW1lbnQgdGhhdCB3ZSBhcmUgdHJ5aW5nIHRvIHVzZSBmb3IgdGhpcyB2aWV3ZXJcbiAgICBpZiAoIWNvbnRhaW5lcikgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgZWxlbWVudCBzcGVjaWZpZWQgZm9yOiAnICsgZWxlbSk7XG5cbiAgICAvLyBQcmVwYXJlIHRoZSBjb250YWluZXIgc28gaXQgY2FuIHByb3Blcmx5IHdyYXAgdGhlIGNvbnRlbnRzXG4gICAgdmFyIGlzT2Zmc2V0UG9zaXRpb25lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uO1xuICAgICAgICB2YXIgaXNPZmZzZXRQb3NpdGlvblZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09ICdmaXhlZCcgfHwgdmFsdWUgPT09ICdhYnNvbHV0ZScgfHwgdmFsdWUgPT09ICdyZWxhdGl2ZSc7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGlzT2Zmc2V0UG9zaXRpb25WYWx1ZShwb3NpdGlvbikpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7Q1NTU3R5bGVEZWNsYXJhdGlvbn0gKi9cbiAgICAgICAgdmFyIGNhbGN1bGF0ZWRTdHlsZSA9ICdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cgPyBnZXRDb21wdXRlZFN0eWxlKGNvbnRhaW5lcikgOiBjb250YWluZXIucnVudGltZVN0eWxlO1xuXG4gICAgICAgIGlmICghY2FsY3VsYXRlZFN0eWxlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIGlzT2Zmc2V0UG9zaXRpb25WYWx1ZShjYWxjdWxhdGVkU3R5bGUucG9zaXRpb24pO1xuICAgIH0oKTtcblxuICAgIC8vIElmIHdlJ3JlIG5vdCBwb3NpdGlvbmVkIHVzaW5nIG9mZnNldCBwb3NpdGlvbmluZywgc2V0IHJlbGF0aXZlIHBvc2l0aW9uaW5nIG9uIHRoZSBjb250YWluZXJcbiAgICBpZiAoIWlzT2Zmc2V0UG9zaXRpb25lZClcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcblxuICAgIC8vIENyZWF0ZSBvdXIgb3RoZXIgcmVxdWlyZWQgZWxlbWVudHNcbiAgICBjcmVhdGVMb2FkZXJFbGVtZW50KCk7XG5cbiAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIHZlcnNpb24gb2Ygb3VyIHZpZXdlciB3ZSB3YW50IHRvIHVzZVxuICAgIC8qXG4gICAgaWYgKGlzQ2FudmFzU3VwcG9ydGVkKCkgPT0gZmFsc2UpIHsgLy8gVE9ETzogTkVFRCBUTyBSRU1PVkUgVEhFIEZBTFNFIFJFUVVJUkVNRU5UIC0gV0UgQVJFIEZMSVBQSU5HIEZPUiBERUJVR1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVuZGVyZXIgPSBuZXcgUmlkZVN0eWxlckltYWdlUmVuZGVyZXIoY29udGFpbmVyKTtcbiAgICB9XG4gICAgKi9cblxuICAgIC8vIFdlIGFyZSBhbHdheXMgdXNpbmcgdGhlIGltYWdlIHJlbmRlcmVyIHNpbmNlIHRoYXQgaXMgYWxsIHRoYXQgaXMgc3VwcG9ydGVkIGN1cnJlbnRseVxuICAgIHJlbmRlcmVyID0gbmV3IFJpZGVTdHlsZXJJbWFnZVJlbmRlcmVyKGNvbnRhaW5lcik7XG5cbiAgICB2YXIgZGVzaXJlZEFzcGVjdEhlaWdodCA9IG51bGw7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmNvbnRhaW5lckFzcGVjdFJhdGlvID09PSAnbnVtYmVyJykge1xuICAgICAgICBkZXNpcmVkQXNwZWN0SGVpZ2h0ID0gb3B0aW9ucy5jb250YWluZXJBc3BlY3RSYXRpbztcbiAgICB9XG5cbiAgICB2YXIgbGFzdENsaWVudFdpZHRoID0gMDtcbiAgICB2YXIgcmVmcmVzaFRpbWVvdXQgPSAwO1xuICAgIHRoaXMuUmVzaXplUmVuZGVyQXJlYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY29udGFpbmVyLmNsaWVudFdpZHRoICE9IGxhc3RDbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgbGFzdENsaWVudFdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgc3RhdGVbJ3dpZHRoJ10gPSBsYXN0Q2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBtYWludGFpbmluZyB0aGUgYXNwZWN0IHJhdGlvIHdlIG5lZWQgdG8gdXBkYXRlIHRoYXRcbiAgICAgICAgICAgIGlmIChkZXNpcmVkQXNwZWN0SGVpZ2h0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5yb3VuZChsYXN0Q2xpZW50V2lkdGggKiBkZXNpcmVkQXNwZWN0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0IC0gMjAwICsgJ3B4JztcbiAgICAgICAgICAgICAgICBzdGF0ZVsnaGVpZ2h0J10gPSBoZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgcmVuZGVyZXIgaXMgYWN0aXZlIGJlZm9yZSBhdHRlbXB0IHRvIHJlZHJhd1xuICAgICAgICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyZWZyZXNoVGltZW91dCk7XG4gICAgICAgICAgICAgICAgcmVmcmVzaFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIGEgcmVmcmVzaCBvbiB0aGUgcmVuZGVyZXJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuUmVuZGVyKHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9LCAxNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBzaG91bGQgYmUgY29udHJvbGxpbmcgdGhlIGNvbnRhaW5lciBhc3BlY3QgcmF0aW9cbiAgICBpZiAob3B0aW9ucy5yZXNwb25zaXZlICE9PSBmYWxzZSkge1xuICAgICAgICBzZXRJbnRlcnZhbCh0aGlzLlJlc2l6ZVJlbmRlckFyZWEsIDEwMCk7XG4gICAgICAgIHRoaXMuUmVzaXplUmVuZGVyQXJlYSgpO1xuICAgIH1cblxuICAgIHRoaXMuVXBkYXRlID0gZnVuY3Rpb24oaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIC8vIExldCBvdXIgc3lzdGVtIGtub3cgdGhhdCB3ZSBhcmUgcmVhZHkgdG8gcm9ja1xuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgIFxuICAgICAgICAvLyBNYWtlIHN1cmUgb3VyIGluc3RydWN0aW9ucyBhcmUgaW4gYW4gb2JqZWN0IGZvcm1hdFxuICAgICAgICBpbnN0cnVjdGlvbnMgPSBwcmVwYXJlQXJndW1lbnRzKGluc3RydWN0aW9ucyk7XG5cbiAgICAgICAgLy8gSW5qZWN0IG91ciB2YXJpYWJsZXMgYmFzZWQgb24gZ2xvYmFsIHBhcmFtc1xuICAgICAgICBpbnN0cnVjdGlvbnNbJ3dpZHRoJ10gPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGluc3RydWN0aW9uc1snaGVpZ2h0J10gPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIC8vIFVwZGF0ZSBvdXIgaW50ZXJuYWwgc3RhdGUgYW5kIHdhdGNoIGZvciBjaGFuZ2VzXG4gICAgICAgIHZhciBoYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIGZvcih2YXIgeCBpbiBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB2MSA9IHN0YXRlW3hdO1xuICAgICAgICAgICAgdmFyIHYyID0gaW5zdHJ1Y3Rpb25zW3hdO1xuICAgICAgICAgICAgaWYgKHYxICE9IHYyKSB7XG4gICAgICAgICAgICAgICAgc3RhdGVbeF0gPSB2MjtcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBkaWRuJ3QgbWFrZSBhbnkgY2hhbmdlcyB0byBvdXIgaW50ZXJuYWwgc3RhdGUgd2UgZG9uJ3QgbmVlZCB0byBwZXJmb3JtIGFuIHVwZGF0ZVxuICAgICAgICBpZiAoaGFzQ2hhbmdlcyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2UoKTtcblxuICAgICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZW5kZXJlci5SZW5kZXIoc3RhdGUpO1xuICAgIH07XG5cblxuICAgIHRoaXMuUmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc3RhdGUgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJlci5SZXNldCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyZXIuUmVzZXQoKTtcbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBwcmVwYXJlQXJndW1lbnRzKGFyZ3MpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xuXG4gICAgICAgIGlmICh0eXBlb2YgYXJncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciB0b2tlbnMgPSBhcmdzLnNwbGl0KCc/Jyk7XG4gICAgICAgICAgICB0b2tlbnMgPSAodG9rZW5zLmxlbmd0aCA9PSAxID8gdG9rZW5zWzBdIDogdG9rZW5zWzFdKS5zcGxpdCgnJicpO1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBrdiA9IHRva2Vuc1tpXS5zcGxpdCgnPScpO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBkZWNvZGVVUklDb21wb25lbnQoa3ZbMF0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTa2lwIG92ZXIgdmFyaWFibGVzIHRoYXQgYXJlIG5vdCB1c2VkIGZvciByZW5kZXJpbmdcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdrZXknIHx8IGtleSA9PSAndG9rZW4nKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIHZhbHVlc1trZXldID0gZGVjb2RlVVJJQ29tcG9uZW50KGt2WzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwga2V5cyBhcmUgaW4gbG93ZXIgY2FzZVxuICAgICAgICAgICAgZm9yKHZhciBrIGluIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbay50b0xvd2VyQ2FzZSgpXSA9IGFyZ3Nba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQ2FudmFzU3VwcG9ydGVkKCkge1xuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICByZXR1cm4gISEoZWxlbS5nZXRDb250ZXh0ICYmIGVsZW0uZ2V0Q29udGV4dCgnMmQnKSk7XG4gICAgfSBcblxuICAgIGZ1bmN0aW9uIFJpZGVTdHlsZXJJbWFnZVJlbmRlcmVyKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgYWN0aXZlSW1hZ2UgPSBudWxsO1xuICAgICAgICB2YXIgcmV0aXJlZEltYWdlcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHtSaWRlU3R5bGVyUHJvbWlzZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUmVuZGVyID0gZnVuY3Rpb24oaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3TGF5ZXIoaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLlJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUltYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoYWN0aXZlSW1hZ2UpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZUltYWdlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB7UmlkZVN0eWxlclByb21pc2V9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVOZXdMYXllcihpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG4gICAgICAgICAgICAvLyBTaG93IG91ciBsb2FkZXIgc2luY2Ugd2UgYXJlIGNyZWF0aW5nIGEgbmV3IGxheWVyXG4gICAgICAgICAgICBzaG93TG9hZGVyRWxlbWVudCgpO1xuXG5cbiAgICAgICAgICAgIC8vIFJldGlyZSBvdXIgYWN0aXZlIGltYWdlIGlmIGl0IGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgaWYgKGFjdGl2ZUltYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBoaWRlT2xkVmVoaWNsZSgpO1xuICAgICAgICAgICAgICAgIHJldGlyZWRJbWFnZXMucHVzaChhY3RpdmVJbWFnZSk7XG4gICAgICAgICAgICAgICAgYWN0aXZlSW1hZ2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGaW5kIGFsbCBvZiBvdXIgb2xkIGltYWdlcyBhbmQgZmFkZSB0aGVtIHRvIGhhbGYgdHJhbnNwYXJlbnQgKGlmIHRoZXkgYXJlIHZpc2libGUpXG4gICAgICAgICAgICBmb3IodmFyIGkgPSByZXRpcmVkSW1hZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9pbWcgPSByZXRpcmVkSW1hZ2VzW2ldO1xuXG4gICAgICAgICAgICAgICAgLy8gUGFydGlhbGx5IGZhZGUgb3V0IG91ciByZXRpcmVkIGltYWdlc1xuICAgICAgICAgICAgICAgIGlmIChvaW1nLnN0eWxlLm9wYWNpdHkgPiAwLjUpIG9pbWcuc3R5bGUub3BhY2l0eSA9IDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGltYWdlVXJsID0gcmlkZXN0eWxlci5hamF4LnVybCgnVmVoaWNsZS9SZW5kZXInLCBpbnN0cnVjdGlvbnMpO1xuXG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBpbWFnZSBlbGVtZW50IGZvciB0aGUgY3VycmVudCByZW5kZXIgcmVzdWx0XG4gICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICBpbWcuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgaW1nLnN0eWxlLmxlZnQgPSAwO1xuICAgICAgICAgICAgaW1nLnN0eWxlLnRvcCA9IDA7XG4gICAgICAgICAgICBpbWcuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICAgICBpbWcuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IGxpbmVhciAzMDBtcyc7XG5cbiAgICAgICAgICAgIC8vIEFkZCBvdXIgbmV3IGltYWdlIGxheWVyIHRvIHRoZSBET01cbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhY3RpdmVJbWFnZSA9IGltZyk7XG5cbiAgICAgICAgICAgIC8vIExpc3RlbiBmb3Igb3VyIG5ldyBsYXllciB0byBiZWNvbWUgcmVhZHkgYW5kIGRpc3BsYXkgaXQgdG8gdGhlIHVzZXIuIEFsc28sIGNsZWFudXAgYW55IGxlZ2FjeSBsYXllcnMuXG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSBmYWRlIGluIHRoaXMgSU1HIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcmVwbGFjZWQuXG4gICAgICAgICAgICAgICAgaWYgKGltZyA9PSBhY3RpdmVJbWFnZSkge1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGVyRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUub3BhY2l0eSA9IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZWRJbWFnZXMgPSByZXRpcmVkSW1hZ2VzLnNwbGljZSgwLCByZXRpcmVkSW1hZ2VzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZhZGUgYWxsIG9mIG91ciBvbGQgaW1hZ2VzIG91dCBvZiB2aWV3XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZW1vdmVkSW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkSW1hZ2VzW2ldLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbGVtZW50cyBhZnRlciB0aGV5IGhhdmUgaGFkIGEgY2hhbmNlIHRvIGZhZGUgb3V0XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcmVtb3ZlZEltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChyZW1vdmVkSW1hZ2VzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByb21pc2UucmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBTdGFydCBsb2FkaW5nIG91ciBpbWFnZVxuICAgICAgICAgICAgaW1nLnNyYyA9IGltYWdlVXJsO1xuXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxvYWRlckVsZW1lbnQoKSB7XG4gICAgICAgIGxvYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgICAgIC8vIFNldCBvdXIgaW1hZ2VcbiAgICAgICAgbG9hZGVyLnNyYyA9IGxvYWRlckRhdGE7XG5cbiAgICAgICAgLy8gU2V0dXAgc3R5bGUgb2YgdGhlIGVsZW1lbnRcbiAgICAgICAgbG9hZGVyLnN0eWxlLnBhZGRpbmcgPSAnNXB4JztcbiAgICAgICAgbG9hZGVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcyMXB4JztcbiAgICAgICAgbG9hZGVyLnN0eWxlLmJhY2tncm91bmQgPSAnI2ZmZic7XG4gICAgICAgIGxvYWRlci5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgbG9hZGVyLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSBsaW5lYXIgMzAwbXMnO1xuXG4gICAgICAgIC8vIFBvc2l0aW9uIGluIG91ciBjb250YWluZXJcbiAgICAgICAgbG9hZGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgbG9hZGVyLnN0eWxlLmxlZnQgPSAnNTAlJztcbiAgICAgICAgbG9hZGVyLnN0eWxlLnRvcCA9ICc1MCUnO1xuICAgICAgICBsb2FkZXIuc3R5bGUuekluZGV4ID0gJzUwJztcblxuICAgICAgICAvLyBPZmZzZXQgZm9yIHNpemVcbiAgICAgICAgbG9hZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSAnLTIxcHgnO1xuICAgICAgICBsb2FkZXIuc3R5bGUubWFyZ2luVG9wID0gJy0yMXB4JztcblxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobG9hZGVyKTtcbiAgICAgICAgc2hvd0xvYWRlckVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93TG9hZGVyRWxlbWVudCgpIHtcbiAgICAgICAgbG9hZGVyLnN0eWxlLm9wYWNpdHkgPSAwLjc1O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhpZGVMb2FkZXJFbGVtZW50KCkge1xuICAgICAgICBsb2FkZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgfVxufVxuXG4iLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG5cInVzZSBzdHJpY3RcIjtcblxuX2RlcmVxXygzMjcpO1xuXG5fZGVyZXFfKDMyOCk7XG5cbl9kZXJlcV8oMik7XG5cbmlmIChnbG9iYWwuX2JhYmVsUG9seWZpbGwpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwib25seSBvbmUgaW5zdGFuY2Ugb2YgYmFiZWwtcG9seWZpbGwgaXMgYWxsb3dlZFwiKTtcbn1cbmdsb2JhbC5fYmFiZWxQb2x5ZmlsbCA9IHRydWU7XG5cbnZhciBERUZJTkVfUFJPUEVSVFkgPSBcImRlZmluZVByb3BlcnR5XCI7XG5mdW5jdGlvbiBkZWZpbmUoTywga2V5LCB2YWx1ZSkge1xuICBPW2tleV0gfHwgT2JqZWN0W0RFRklORV9QUk9QRVJUWV0oTywga2V5LCB7XG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9KTtcbn1cblxuZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsIFwicGFkTGVmdFwiLCBcIlwiLnBhZFN0YXJ0KTtcbmRlZmluZShTdHJpbmcucHJvdG90eXBlLCBcInBhZFJpZ2h0XCIsIFwiXCIucGFkRW5kKTtcblxuXCJwb3AscmV2ZXJzZSxzaGlmdCxrZXlzLHZhbHVlcyxlbnRyaWVzLGluZGV4T2YsZXZlcnksc29tZSxmb3JFYWNoLG1hcCxmaWx0ZXIsZmluZCxmaW5kSW5kZXgsaW5jbHVkZXMsam9pbixzbGljZSxjb25jYXQscHVzaCxzcGxpY2UsdW5zaGlmdCxzb3J0LGxhc3RJbmRleE9mLHJlZHVjZSxyZWR1Y2VSaWdodCxjb3B5V2l0aGluLGZpbGxcIi5zcGxpdChcIixcIikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gIFtdW2tleV0gJiYgZGVmaW5lKEFycmF5LCBrZXksIEZ1bmN0aW9uLmNhbGwuYmluZChbXVtrZXldKSk7XG59KTtcbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7XCIyXCI6MixcIjMyN1wiOjMyNyxcIjMyOFwiOjMyOH1dLDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuX2RlcmVxXygxMzApO1xubW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKDIzKS5SZWdFeHAuZXNjYXBlO1xuXG59LHtcIjEzMFwiOjEzMCxcIjIzXCI6MjN9XSwzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmICh0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJykgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTtcbiAgcmV0dXJuIGl0O1xufTtcblxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgY29mID0gX2RlcmVxXygxOCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgbXNnKSB7XG4gIGlmICh0eXBlb2YgaXQgIT0gJ251bWJlcicgJiYgY29mKGl0KSAhPSAnTnVtYmVyJykgdGhyb3cgVHlwZUVycm9yKG1zZyk7XG4gIHJldHVybiAraXQ7XG59O1xuXG59LHtcIjE4XCI6MTh9XSw1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIyLjEuMy4zMSBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc11cbnZhciBVTlNDT1BBQkxFUyA9IF9kZXJlcV8oMTI4KSgndW5zY29wYWJsZXMnKTtcbnZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuaWYgKEFycmF5UHJvdG9bVU5TQ09QQUJMRVNdID09IHVuZGVmaW5lZCkgX2RlcmVxXyg0MikoQXJyYXlQcm90bywgVU5TQ09QQUJMRVMsIHt9KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICBBcnJheVByb3RvW1VOU0NPUEFCTEVTXVtrZXldID0gdHJ1ZTtcbn07XG5cbn0se1wiMTI4XCI6MTI4LFwiNDJcIjo0Mn1dLDY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCkge1xuICBpZiAoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCAoZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IobmFtZSArICc6IGluY29ycmVjdCBpbnZvY2F0aW9uIScpO1xuICB9IHJldHVybiBpdDtcbn07XG5cbn0se31dLDc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoIWlzT2JqZWN0KGl0KSkgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59O1xuXG59LHtcIjUxXCI6NTF9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIyLjEuMy4zIEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluKHRhcmdldCwgc3RhcnQsIGVuZCA9IHRoaXMubGVuZ3RoKVxuJ3VzZSBzdHJpY3QnO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIHRvQWJzb2x1dGVJbmRleCA9IF9kZXJlcV8oMTE0KTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcblxubW9kdWxlLmV4cG9ydHMgPSBbXS5jb3B5V2l0aGluIHx8IGZ1bmN0aW9uIGNvcHlXaXRoaW4odGFyZ2V0IC8qID0gMCAqLywgc3RhcnQgLyogPSAwLCBlbmQgPSBAbGVuZ3RoICovKSB7XG4gIHZhciBPID0gdG9PYmplY3QodGhpcyk7XG4gIHZhciBsZW4gPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gIHZhciB0byA9IHRvQWJzb2x1dGVJbmRleCh0YXJnZXQsIGxlbik7XG4gIHZhciBmcm9tID0gdG9BYnNvbHV0ZUluZGV4KHN0YXJ0LCBsZW4pO1xuICB2YXIgZW5kID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7XG4gIHZhciBjb3VudCA9IE1hdGgubWluKChlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IHRvQWJzb2x1dGVJbmRleChlbmQsIGxlbikpIC0gZnJvbSwgbGVuIC0gdG8pO1xuICB2YXIgaW5jID0gMTtcbiAgaWYgKGZyb20gPCB0byAmJiB0byA8IGZyb20gKyBjb3VudCkge1xuICAgIGluYyA9IC0xO1xuICAgIGZyb20gKz0gY291bnQgLSAxO1xuICAgIHRvICs9IGNvdW50IC0gMTtcbiAgfVxuICB3aGlsZSAoY291bnQtLSA+IDApIHtcbiAgICBpZiAoZnJvbSBpbiBPKSBPW3RvXSA9IE9bZnJvbV07XG4gICAgZWxzZSBkZWxldGUgT1t0b107XG4gICAgdG8gKz0gaW5jO1xuICAgIGZyb20gKz0gaW5jO1xuICB9IHJldHVybiBPO1xufTtcblxufSx7XCIxMTRcIjoxMTQsXCIxMThcIjoxMTgsXCIxMTlcIjoxMTl9XSw5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKVxuJ3VzZSBzdHJpY3QnO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIHRvQWJzb2x1dGVJbmRleCA9IF9kZXJlcV8oMTE0KTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZmlsbCh2YWx1ZSAvKiAsIHN0YXJ0ID0gMCwgZW5kID0gQGxlbmd0aCAqLykge1xuICB2YXIgTyA9IHRvT2JqZWN0KHRoaXMpO1xuICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICB2YXIgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleChhTGVuID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgbGVuZ3RoKTtcbiAgdmFyIGVuZCA9IGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkO1xuICB2YXIgZW5kUG9zID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW5ndGggOiB0b0Fic29sdXRlSW5kZXgoZW5kLCBsZW5ndGgpO1xuICB3aGlsZSAoZW5kUG9zID4gaW5kZXgpIE9baW5kZXgrK10gPSB2YWx1ZTtcbiAgcmV0dXJuIE87XG59O1xuXG59LHtcIjExNFwiOjExNCxcIjExOFwiOjExOCxcIjExOVwiOjExOX1dLDEwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBmb3JPZiA9IF9kZXJlcV8oMzkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVyLCBJVEVSQVRPUikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIGZvck9mKGl0ZXIsIGZhbHNlLCByZXN1bHQucHVzaCwgcmVzdWx0LCBJVEVSQVRPUik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG59LHtcIjM5XCI6Mzl9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mXG4vLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlc1xudmFyIHRvSU9iamVjdCA9IF9kZXJlcV8oMTE3KTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbnZhciB0b0Fic29sdXRlSW5kZXggPSBfZGVyZXFfKDExNCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChJU19JTkNMVURFUykge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBlbCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIE8gPSB0b0lPYmplY3QoJHRoaXMpO1xuICAgIHZhciBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gICAgdmFyIGluZGV4ID0gdG9BYnNvbHV0ZUluZGV4KGZyb21JbmRleCwgbGVuZ3RoKTtcbiAgICB2YXIgdmFsdWU7XG4gICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICBpZiAoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpIHdoaWxlIChsZW5ndGggPiBpbmRleCkge1xuICAgICAgdmFsdWUgPSBPW2luZGV4KytdO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgaWYgKHZhbHVlICE9IHZhbHVlKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBBcnJheSNpbmRleE9mIGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG4gICAgfSBlbHNlIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSBpZiAoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTykge1xuICAgICAgaWYgKE9baW5kZXhdID09PSBlbCkgcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG4gICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuICB9O1xufTtcblxufSx7XCIxMTRcIjoxMTQsXCIxMTdcIjoxMTcsXCIxMThcIjoxMTh9XSwxMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAwIC0+IEFycmF5I2ZvckVhY2hcbi8vIDEgLT4gQXJyYXkjbWFwXG4vLyAyIC0+IEFycmF5I2ZpbHRlclxuLy8gMyAtPiBBcnJheSNzb21lXG4vLyA0IC0+IEFycmF5I2V2ZXJ5XG4vLyA1IC0+IEFycmF5I2ZpbmRcbi8vIDYgLT4gQXJyYXkjZmluZEluZGV4XG52YXIgY3R4ID0gX2RlcmVxXygyNSk7XG52YXIgSU9iamVjdCA9IF9kZXJlcV8oNDcpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIGFzYyA9IF9kZXJlcV8oMTUpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoVFlQRSwgJGNyZWF0ZSkge1xuICB2YXIgSVNfTUFQID0gVFlQRSA9PSAxO1xuICB2YXIgSVNfRklMVEVSID0gVFlQRSA9PSAyO1xuICB2YXIgSVNfU09NRSA9IFRZUEUgPT0gMztcbiAgdmFyIElTX0VWRVJZID0gVFlQRSA9PSA0O1xuICB2YXIgSVNfRklORF9JTkRFWCA9IFRZUEUgPT0gNjtcbiAgdmFyIE5PX0hPTEVTID0gVFlQRSA9PSA1IHx8IElTX0ZJTkRfSU5ERVg7XG4gIHZhciBjcmVhdGUgPSAkY3JlYXRlIHx8IGFzYztcbiAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcywgY2FsbGJhY2tmbiwgdGhhdCkge1xuICAgIHZhciBPID0gdG9PYmplY3QoJHRoaXMpO1xuICAgIHZhciBzZWxmID0gSU9iamVjdChPKTtcbiAgICB2YXIgZiA9IGN0eChjYWxsYmFja2ZuLCB0aGF0LCAzKTtcbiAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoc2VsZi5sZW5ndGgpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHJlc3VsdCA9IElTX01BUCA/IGNyZWF0ZSgkdGhpcywgbGVuZ3RoKSA6IElTX0ZJTFRFUiA/IGNyZWF0ZSgkdGhpcywgMCkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHZhbCwgcmVzO1xuICAgIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSBpZiAoTk9fSE9MRVMgfHwgaW5kZXggaW4gc2VsZikge1xuICAgICAgdmFsID0gc2VsZltpbmRleF07XG4gICAgICByZXMgPSBmKHZhbCwgaW5kZXgsIE8pO1xuICAgICAgaWYgKFRZUEUpIHtcbiAgICAgICAgaWYgKElTX01BUCkgcmVzdWx0W2luZGV4XSA9IHJlczsgICAvLyBtYXBcbiAgICAgICAgZWxzZSBpZiAocmVzKSBzd2l0Y2ggKFRZUEUpIHtcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAvLyBzb21lXG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gdmFsOyAgICAgICAgICAgICAgLy8gZmluZFxuICAgICAgICAgIGNhc2UgNjogcmV0dXJuIGluZGV4OyAgICAgICAgICAgIC8vIGZpbmRJbmRleFxuICAgICAgICAgIGNhc2UgMjogcmVzdWx0LnB1c2godmFsKTsgICAgICAgIC8vIGZpbHRlclxuICAgICAgICB9IGVsc2UgaWYgKElTX0VWRVJZKSByZXR1cm4gZmFsc2U7IC8vIGV2ZXJ5XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBJU19GSU5EX0lOREVYID8gLTEgOiBJU19TT01FIHx8IElTX0VWRVJZID8gSVNfRVZFUlkgOiByZXN1bHQ7XG4gIH07XG59O1xuXG59LHtcIjExOFwiOjExOCxcIjExOVwiOjExOSxcIjE1XCI6MTUsXCIyNVwiOjI1LFwiNDdcIjo0N31dLDEzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBhRnVuY3Rpb24gPSBfZGVyZXFfKDMpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIElPYmplY3QgPSBfZGVyZXFfKDQ3KTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGhhdCwgY2FsbGJhY2tmbiwgYUxlbiwgbWVtbywgaXNSaWdodCkge1xuICBhRnVuY3Rpb24oY2FsbGJhY2tmbik7XG4gIHZhciBPID0gdG9PYmplY3QodGhhdCk7XG4gIHZhciBzZWxmID0gSU9iamVjdChPKTtcbiAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgdmFyIGluZGV4ID0gaXNSaWdodCA/IGxlbmd0aCAtIDEgOiAwO1xuICB2YXIgaSA9IGlzUmlnaHQgPyAtMSA6IDE7XG4gIGlmIChhTGVuIDwgMikgZm9yICg7Oykge1xuICAgIGlmIChpbmRleCBpbiBzZWxmKSB7XG4gICAgICBtZW1vID0gc2VsZltpbmRleF07XG4gICAgICBpbmRleCArPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGluZGV4ICs9IGk7XG4gICAgaWYgKGlzUmlnaHQgPyBpbmRleCA8IDAgOiBsZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignUmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZScpO1xuICAgIH1cbiAgfVxuICBmb3IgKDtpc1JpZ2h0ID8gaW5kZXggPj0gMCA6IGxlbmd0aCA+IGluZGV4OyBpbmRleCArPSBpKSBpZiAoaW5kZXggaW4gc2VsZikge1xuICAgIG1lbW8gPSBjYWxsYmFja2ZuKG1lbW8sIHNlbGZbaW5kZXhdLCBpbmRleCwgTyk7XG4gIH1cbiAgcmV0dXJuIG1lbW87XG59O1xuXG59LHtcIjExOFwiOjExOCxcIjExOVwiOjExOSxcIjNcIjozLFwiNDdcIjo0N31dLDE0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xudmFyIGlzQXJyYXkgPSBfZGVyZXFfKDQ5KTtcbnZhciBTUEVDSUVTID0gX2RlcmVxXygxMjgpKCdzcGVjaWVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gIHZhciBDO1xuICBpZiAoaXNBcnJheShvcmlnaW5hbCkpIHtcbiAgICBDID0gb3JpZ2luYWwuY29uc3RydWN0b3I7XG4gICAgLy8gY3Jvc3MtcmVhbG0gZmFsbGJhY2tcbiAgICBpZiAodHlwZW9mIEMgPT0gJ2Z1bmN0aW9uJyAmJiAoQyA9PT0gQXJyYXkgfHwgaXNBcnJheShDLnByb3RvdHlwZSkpKSBDID0gdW5kZWZpbmVkO1xuICAgIGlmIChpc09iamVjdChDKSkge1xuICAgICAgQyA9IENbU1BFQ0lFU107XG4gICAgICBpZiAoQyA9PT0gbnVsbCkgQyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gcmV0dXJuIEMgPT09IHVuZGVmaW5lZCA/IEFycmF5IDogQztcbn07XG5cbn0se1wiMTI4XCI6MTI4LFwiNDlcIjo0OSxcIjUxXCI6NTF9XSwxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyA5LjQuMi4zIEFycmF5U3BlY2llc0NyZWF0ZShvcmlnaW5hbEFycmF5LCBsZW5ndGgpXG52YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gX2RlcmVxXygxNCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9yaWdpbmFsLCBsZW5ndGgpIHtcbiAgcmV0dXJuIG5ldyAoc3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsKSkobGVuZ3RoKTtcbn07XG5cbn0se1wiMTRcIjoxNH1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBhRnVuY3Rpb24gPSBfZGVyZXFfKDMpO1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgaW52b2tlID0gX2RlcmVxXyg0Nik7XG52YXIgYXJyYXlTbGljZSA9IFtdLnNsaWNlO1xudmFyIGZhY3RvcmllcyA9IHt9O1xuXG52YXIgY29uc3RydWN0ID0gZnVuY3Rpb24gKEYsIGxlbiwgYXJncykge1xuICBpZiAoIShsZW4gaW4gZmFjdG9yaWVzKSkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgaSA9IDA7IGkgPCBsZW47IGkrKykgbltpXSA9ICdhWycgKyBpICsgJ10nO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgIGZhY3Rvcmllc1tsZW5dID0gRnVuY3Rpb24oJ0YsYScsICdyZXR1cm4gbmV3IEYoJyArIG4uam9pbignLCcpICsgJyknKTtcbiAgfSByZXR1cm4gZmFjdG9yaWVzW2xlbl0oRiwgYXJncyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZ1bmN0aW9uLmJpbmQgfHwgZnVuY3Rpb24gYmluZCh0aGF0IC8qICwgLi4uYXJncyAqLykge1xuICB2YXIgZm4gPSBhRnVuY3Rpb24odGhpcyk7XG4gIHZhciBwYXJ0QXJncyA9IGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB2YXIgYm91bmQgPSBmdW5jdGlvbiAoLyogYXJncy4uLiAqLykge1xuICAgIHZhciBhcmdzID0gcGFydEFyZ3MuY29uY2F0KGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGJvdW5kID8gY29uc3RydWN0KGZuLCBhcmdzLmxlbmd0aCwgYXJncykgOiBpbnZva2UoZm4sIGFyZ3MsIHRoYXQpO1xuICB9O1xuICBpZiAoaXNPYmplY3QoZm4ucHJvdG90eXBlKSkgYm91bmQucHJvdG90eXBlID0gZm4ucHJvdG90eXBlO1xuICByZXR1cm4gYm91bmQ7XG59O1xuXG59LHtcIjNcIjozLFwiNDZcIjo0NixcIjUxXCI6NTF9XSwxNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKVxudmFyIGNvZiA9IF9kZXJlcV8oMTgpO1xudmFyIFRBRyA9IF9kZXJlcV8oMTI4KSgndG9TdHJpbmdUYWcnKTtcbi8vIEVTMyB3cm9uZyBoZXJlXG52YXIgQVJHID0gY29mKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJztcblxuLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3JcbnZhciB0cnlHZXQgPSBmdW5jdGlvbiAoaXQsIGtleSkge1xuICB0cnkge1xuICAgIHJldHVybiBpdFtrZXldO1xuICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBPLCBULCBCO1xuICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCdcbiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2VcbiAgICA6IHR5cGVvZiAoVCA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVEFHKSkgPT0gJ3N0cmluZycgPyBUXG4gICAgLy8gYnVpbHRpblRhZyBjYXNlXG4gICAgOiBBUkcgPyBjb2YoTylcbiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrXG4gICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7XG59O1xuXG59LHtcIjEyOFwiOjEyOCxcIjE4XCI6MTh9XSwxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07XG5cbn0se31dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBkUCA9IF9kZXJlcV8oNzIpLmY7XG52YXIgY3JlYXRlID0gX2RlcmVxXyg3MSk7XG52YXIgcmVkZWZpbmVBbGwgPSBfZGVyZXFfKDkzKTtcbnZhciBjdHggPSBfZGVyZXFfKDI1KTtcbnZhciBhbkluc3RhbmNlID0gX2RlcmVxXyg2KTtcbnZhciBmb3JPZiA9IF9kZXJlcV8oMzkpO1xudmFyICRpdGVyRGVmaW5lID0gX2RlcmVxXyg1NSk7XG52YXIgc3RlcCA9IF9kZXJlcV8oNTcpO1xudmFyIHNldFNwZWNpZXMgPSBfZGVyZXFfKDEwMCk7XG52YXIgREVTQ1JJUFRPUlMgPSBfZGVyZXFfKDI5KTtcbnZhciBmYXN0S2V5ID0gX2RlcmVxXyg2NikuZmFzdEtleTtcbnZhciB2YWxpZGF0ZSA9IF9kZXJlcV8oMTI1KTtcbnZhciBTSVpFID0gREVTQ1JJUFRPUlMgPyAnX3MnIDogJ3NpemUnO1xuXG52YXIgZ2V0RW50cnkgPSBmdW5jdGlvbiAodGhhdCwga2V5KSB7XG4gIC8vIGZhc3QgY2FzZVxuICB2YXIgaW5kZXggPSBmYXN0S2V5KGtleSk7XG4gIHZhciBlbnRyeTtcbiAgaWYgKGluZGV4ICE9PSAnRicpIHJldHVybiB0aGF0Ll9pW2luZGV4XTtcbiAgLy8gZnJvemVuIG9iamVjdCBjYXNlXG4gIGZvciAoZW50cnkgPSB0aGF0Ll9mOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5uKSB7XG4gICAgaWYgKGVudHJ5LmsgPT0ga2V5KSByZXR1cm4gZW50cnk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDb25zdHJ1Y3RvcjogZnVuY3Rpb24gKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpIHtcbiAgICB2YXIgQyA9IHdyYXBwZXIoZnVuY3Rpb24gKHRoYXQsIGl0ZXJhYmxlKSB7XG4gICAgICBhbkluc3RhbmNlKHRoYXQsIEMsIE5BTUUsICdfaScpO1xuICAgICAgdGhhdC5fdCA9IE5BTUU7ICAgICAgICAgLy8gY29sbGVjdGlvbiB0eXBlXG4gICAgICB0aGF0Ll9pID0gY3JlYXRlKG51bGwpOyAvLyBpbmRleFxuICAgICAgdGhhdC5fZiA9IHVuZGVmaW5lZDsgICAgLy8gZmlyc3QgZW50cnlcbiAgICAgIHRoYXQuX2wgPSB1bmRlZmluZWQ7ICAgIC8vIGxhc3QgZW50cnlcbiAgICAgIHRoYXRbU0laRV0gPSAwOyAgICAgICAgIC8vIHNpemVcbiAgICAgIGlmIChpdGVyYWJsZSAhPSB1bmRlZmluZWQpIGZvck9mKGl0ZXJhYmxlLCBJU19NQVAsIHRoYXRbQURERVJdLCB0aGF0KTtcbiAgICB9KTtcbiAgICByZWRlZmluZUFsbChDLnByb3RvdHlwZSwge1xuICAgICAgLy8gMjMuMS4zLjEgTWFwLnByb3RvdHlwZS5jbGVhcigpXG4gICAgICAvLyAyMy4yLjMuMiBTZXQucHJvdG90eXBlLmNsZWFyKClcbiAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgICAgZm9yICh2YXIgdGhhdCA9IHZhbGlkYXRlKHRoaXMsIE5BTUUpLCBkYXRhID0gdGhhdC5faSwgZW50cnkgPSB0aGF0Ll9mOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5uKSB7XG4gICAgICAgICAgZW50cnkuciA9IHRydWU7XG4gICAgICAgICAgaWYgKGVudHJ5LnApIGVudHJ5LnAgPSBlbnRyeS5wLm4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgZGVsZXRlIGRhdGFbZW50cnkuaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5fZiA9IHRoYXQuX2wgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoYXRbU0laRV0gPSAwO1xuICAgICAgfSxcbiAgICAgIC8vIDIzLjEuMy4zIE1hcC5wcm90b3R5cGUuZGVsZXRlKGtleSlcbiAgICAgIC8vIDIzLjIuMy40IFNldC5wcm90b3R5cGUuZGVsZXRlKHZhbHVlKVxuICAgICAgJ2RlbGV0ZSc6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB2YWxpZGF0ZSh0aGlzLCBOQU1FKTtcbiAgICAgICAgdmFyIGVudHJ5ID0gZ2V0RW50cnkodGhhdCwga2V5KTtcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgdmFyIG5leHQgPSBlbnRyeS5uO1xuICAgICAgICAgIHZhciBwcmV2ID0gZW50cnkucDtcbiAgICAgICAgICBkZWxldGUgdGhhdC5faVtlbnRyeS5pXTtcbiAgICAgICAgICBlbnRyeS5yID0gdHJ1ZTtcbiAgICAgICAgICBpZiAocHJldikgcHJldi5uID0gbmV4dDtcbiAgICAgICAgICBpZiAobmV4dCkgbmV4dC5wID0gcHJldjtcbiAgICAgICAgICBpZiAodGhhdC5fZiA9PSBlbnRyeSkgdGhhdC5fZiA9IG5leHQ7XG4gICAgICAgICAgaWYgKHRoYXQuX2wgPT0gZW50cnkpIHRoYXQuX2wgPSBwcmV2O1xuICAgICAgICAgIHRoYXRbU0laRV0tLTtcbiAgICAgICAgfSByZXR1cm4gISFlbnRyeTtcbiAgICAgIH0sXG4gICAgICAvLyAyMy4yLjMuNiBTZXQucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbiAgICAgIC8vIDIzLjEuMy41IE1hcC5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuICAgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFja2ZuIC8qICwgdGhhdCA9IHVuZGVmaW5lZCAqLykge1xuICAgICAgICB2YWxpZGF0ZSh0aGlzLCBOQU1FKTtcbiAgICAgICAgdmFyIGYgPSBjdHgoY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIDMpO1xuICAgICAgICB2YXIgZW50cnk7XG4gICAgICAgIHdoaWxlIChlbnRyeSA9IGVudHJ5ID8gZW50cnkubiA6IHRoaXMuX2YpIHtcbiAgICAgICAgICBmKGVudHJ5LnYsIGVudHJ5LmssIHRoaXMpO1xuICAgICAgICAgIC8vIHJldmVydCB0byB0aGUgbGFzdCBleGlzdGluZyBlbnRyeVxuICAgICAgICAgIHdoaWxlIChlbnRyeSAmJiBlbnRyeS5yKSBlbnRyeSA9IGVudHJ5LnA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyAyMy4xLjMuNyBNYXAucHJvdG90eXBlLmhhcyhrZXkpXG4gICAgICAvLyAyMy4yLjMuNyBTZXQucHJvdG90eXBlLmhhcyh2YWx1ZSlcbiAgICAgIGhhczogZnVuY3Rpb24gaGFzKGtleSkge1xuICAgICAgICByZXR1cm4gISFnZXRFbnRyeSh2YWxpZGF0ZSh0aGlzLCBOQU1FKSwga2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoREVTQ1JJUFRPUlMpIGRQKEMucHJvdG90eXBlLCAnc2l6ZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUodGhpcywgTkFNRSlbU0laRV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEM7XG4gIH0sXG4gIGRlZjogZnVuY3Rpb24gKHRoYXQsIGtleSwgdmFsdWUpIHtcbiAgICB2YXIgZW50cnkgPSBnZXRFbnRyeSh0aGF0LCBrZXkpO1xuICAgIHZhciBwcmV2LCBpbmRleDtcbiAgICAvLyBjaGFuZ2UgZXhpc3RpbmcgZW50cnlcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIGVudHJ5LnYgPSB2YWx1ZTtcbiAgICAvLyBjcmVhdGUgbmV3IGVudHJ5XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoYXQuX2wgPSBlbnRyeSA9IHtcbiAgICAgICAgaTogaW5kZXggPSBmYXN0S2V5KGtleSwgdHJ1ZSksIC8vIDwtIGluZGV4XG4gICAgICAgIGs6IGtleSwgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSBrZXlcbiAgICAgICAgdjogdmFsdWUsICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIHZhbHVlXG4gICAgICAgIHA6IHByZXYgPSB0aGF0Ll9sLCAgICAgICAgICAgICAvLyA8LSBwcmV2aW91cyBlbnRyeVxuICAgICAgICBuOiB1bmRlZmluZWQsICAgICAgICAgICAgICAgICAgLy8gPC0gbmV4dCBlbnRyeVxuICAgICAgICByOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gcmVtb3ZlZFxuICAgICAgfTtcbiAgICAgIGlmICghdGhhdC5fZikgdGhhdC5fZiA9IGVudHJ5O1xuICAgICAgaWYgKHByZXYpIHByZXYubiA9IGVudHJ5O1xuICAgICAgdGhhdFtTSVpFXSsrO1xuICAgICAgLy8gYWRkIHRvIGluZGV4XG4gICAgICBpZiAoaW5kZXggIT09ICdGJykgdGhhdC5faVtpbmRleF0gPSBlbnRyeTtcbiAgICB9IHJldHVybiB0aGF0O1xuICB9LFxuICBnZXRFbnRyeTogZ2V0RW50cnksXG4gIHNldFN0cm9uZzogZnVuY3Rpb24gKEMsIE5BTUUsIElTX01BUCkge1xuICAgIC8vIGFkZCAua2V5cywgLnZhbHVlcywgLmVudHJpZXMsIFtAQGl0ZXJhdG9yXVxuICAgIC8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTFcbiAgICAkaXRlckRlZmluZShDLCBOQU1FLCBmdW5jdGlvbiAoaXRlcmF0ZWQsIGtpbmQpIHtcbiAgICAgIHRoaXMuX3QgPSB2YWxpZGF0ZShpdGVyYXRlZCwgTkFNRSk7IC8vIHRhcmdldFxuICAgICAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgICAgICAgLy8ga2luZFxuICAgICAgdGhpcy5fbCA9IHVuZGVmaW5lZDsgICAgICAgICAgICAgICAgLy8gcHJldmlvdXNcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIga2luZCA9IHRoYXQuX2s7XG4gICAgICB2YXIgZW50cnkgPSB0aGF0Ll9sO1xuICAgICAgLy8gcmV2ZXJ0IHRvIHRoZSBsYXN0IGV4aXN0aW5nIGVudHJ5XG4gICAgICB3aGlsZSAoZW50cnkgJiYgZW50cnkucikgZW50cnkgPSBlbnRyeS5wO1xuICAgICAgLy8gZ2V0IG5leHQgZW50cnlcbiAgICAgIGlmICghdGhhdC5fdCB8fCAhKHRoYXQuX2wgPSBlbnRyeSA9IGVudHJ5ID8gZW50cnkubiA6IHRoYXQuX3QuX2YpKSB7XG4gICAgICAgIC8vIG9yIGZpbmlzaCB0aGUgaXRlcmF0aW9uXG4gICAgICAgIHRoYXQuX3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBzdGVwKDEpO1xuICAgICAgfVxuICAgICAgLy8gcmV0dXJuIHN0ZXAgYnkga2luZFxuICAgICAgaWYgKGtpbmQgPT0gJ2tleXMnKSByZXR1cm4gc3RlcCgwLCBlbnRyeS5rKTtcbiAgICAgIGlmIChraW5kID09ICd2YWx1ZXMnKSByZXR1cm4gc3RlcCgwLCBlbnRyeS52KTtcbiAgICAgIHJldHVybiBzdGVwKDAsIFtlbnRyeS5rLCBlbnRyeS52XSk7XG4gICAgfSwgSVNfTUFQID8gJ2VudHJpZXMnIDogJ3ZhbHVlcycsICFJU19NQVAsIHRydWUpO1xuXG4gICAgLy8gYWRkIFtAQHNwZWNpZXNdLCAyMy4xLjIuMiwgMjMuMi4yLjJcbiAgICBzZXRTcGVjaWVzKE5BTUUpO1xuICB9XG59O1xuXG59LHtcIjEwMFwiOjEwMCxcIjEyNVwiOjEyNSxcIjI1XCI6MjUsXCIyOVwiOjI5LFwiMzlcIjozOSxcIjU1XCI6NTUsXCI1N1wiOjU3LFwiNlwiOjYsXCI2NlwiOjY2LFwiNzFcIjo3MSxcIjcyXCI6NzIsXCI5M1wiOjkzfV0sMjA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTlxudmFyIGNsYXNzb2YgPSBfZGVyZXFfKDE3KTtcbnZhciBmcm9tID0gX2RlcmVxXygxMCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChOQU1FKSB7XG4gIHJldHVybiBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgaWYgKGNsYXNzb2YodGhpcykgIT0gTkFNRSkgdGhyb3cgVHlwZUVycm9yKE5BTUUgKyBcIiN0b0pTT04gaXNuJ3QgZ2VuZXJpY1wiKTtcbiAgICByZXR1cm4gZnJvbSh0aGlzKTtcbiAgfTtcbn07XG5cbn0se1wiMTBcIjoxMCxcIjE3XCI6MTd9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgcmVkZWZpbmVBbGwgPSBfZGVyZXFfKDkzKTtcbnZhciBnZXRXZWFrID0gX2RlcmVxXyg2NikuZ2V0V2VhaztcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbnZhciBhbkluc3RhbmNlID0gX2RlcmVxXyg2KTtcbnZhciBmb3JPZiA9IF9kZXJlcV8oMzkpO1xudmFyIGNyZWF0ZUFycmF5TWV0aG9kID0gX2RlcmVxXygxMik7XG52YXIgJGhhcyA9IF9kZXJlcV8oNDEpO1xudmFyIHZhbGlkYXRlID0gX2RlcmVxXygxMjUpO1xudmFyIGFycmF5RmluZCA9IGNyZWF0ZUFycmF5TWV0aG9kKDUpO1xudmFyIGFycmF5RmluZEluZGV4ID0gY3JlYXRlQXJyYXlNZXRob2QoNik7XG52YXIgaWQgPSAwO1xuXG4vLyBmYWxsYmFjayBmb3IgdW5jYXVnaHQgZnJvemVuIGtleXNcbnZhciB1bmNhdWdodEZyb3plblN0b3JlID0gZnVuY3Rpb24gKHRoYXQpIHtcbiAgcmV0dXJuIHRoYXQuX2wgfHwgKHRoYXQuX2wgPSBuZXcgVW5jYXVnaHRGcm96ZW5TdG9yZSgpKTtcbn07XG52YXIgVW5jYXVnaHRGcm96ZW5TdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5hID0gW107XG59O1xudmFyIGZpbmRVbmNhdWdodEZyb3plbiA9IGZ1bmN0aW9uIChzdG9yZSwga2V5KSB7XG4gIHJldHVybiBhcnJheUZpbmQoc3RvcmUuYSwgZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGl0WzBdID09PSBrZXk7XG4gIH0pO1xufTtcblVuY2F1Z2h0RnJvemVuU3RvcmUucHJvdG90eXBlID0ge1xuICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSBmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcbiAgICBpZiAoZW50cnkpIHJldHVybiBlbnRyeVsxXTtcbiAgfSxcbiAgaGFzOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICEhZmluZFVuY2F1Z2h0RnJvemVuKHRoaXMsIGtleSk7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICB2YXIgZW50cnkgPSBmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcbiAgICBpZiAoZW50cnkpIGVudHJ5WzFdID0gdmFsdWU7XG4gICAgZWxzZSB0aGlzLmEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9LFxuICAnZGVsZXRlJzogZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBpbmRleCA9IGFycmF5RmluZEluZGV4KHRoaXMuYSwgZnVuY3Rpb24gKGl0KSB7XG4gICAgICByZXR1cm4gaXRbMF0gPT09IGtleTtcbiAgICB9KTtcbiAgICBpZiAofmluZGV4KSB0aGlzLmEuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gISF+aW5kZXg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDb25zdHJ1Y3RvcjogZnVuY3Rpb24gKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpIHtcbiAgICB2YXIgQyA9IHdyYXBwZXIoZnVuY3Rpb24gKHRoYXQsIGl0ZXJhYmxlKSB7XG4gICAgICBhbkluc3RhbmNlKHRoYXQsIEMsIE5BTUUsICdfaScpO1xuICAgICAgdGhhdC5fdCA9IE5BTUU7ICAgICAgLy8gY29sbGVjdGlvbiB0eXBlXG4gICAgICB0aGF0Ll9pID0gaWQrKzsgICAgICAvLyBjb2xsZWN0aW9uIGlkXG4gICAgICB0aGF0Ll9sID0gdW5kZWZpbmVkOyAvLyBsZWFrIHN0b3JlIGZvciB1bmNhdWdodCBmcm96ZW4gb2JqZWN0c1xuICAgICAgaWYgKGl0ZXJhYmxlICE9IHVuZGVmaW5lZCkgZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGhhdFtBRERFUl0sIHRoYXQpO1xuICAgIH0pO1xuICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCB7XG4gICAgICAvLyAyMy4zLjMuMiBXZWFrTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KVxuICAgICAgLy8gMjMuNC4zLjMgV2Vha1NldC5wcm90b3R5cGUuZGVsZXRlKHZhbHVlKVxuICAgICAgJ2RlbGV0ZSc6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCFpc09iamVjdChrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBkYXRhID0gZ2V0V2VhayhrZXkpO1xuICAgICAgICBpZiAoZGF0YSA9PT0gdHJ1ZSkgcmV0dXJuIHVuY2F1Z2h0RnJvemVuU3RvcmUodmFsaWRhdGUodGhpcywgTkFNRSkpWydkZWxldGUnXShrZXkpO1xuICAgICAgICByZXR1cm4gZGF0YSAmJiAkaGFzKGRhdGEsIHRoaXMuX2kpICYmIGRlbGV0ZSBkYXRhW3RoaXMuX2ldO1xuICAgICAgfSxcbiAgICAgIC8vIDIzLjMuMy40IFdlYWtNYXAucHJvdG90eXBlLmhhcyhrZXkpXG4gICAgICAvLyAyMy40LjMuNCBXZWFrU2V0LnByb3RvdHlwZS5oYXModmFsdWUpXG4gICAgICBoYXM6IGZ1bmN0aW9uIGhhcyhrZXkpIHtcbiAgICAgICAgaWYgKCFpc09iamVjdChrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBkYXRhID0gZ2V0V2VhayhrZXkpO1xuICAgICAgICBpZiAoZGF0YSA9PT0gdHJ1ZSkgcmV0dXJuIHVuY2F1Z2h0RnJvemVuU3RvcmUodmFsaWRhdGUodGhpcywgTkFNRSkpLmhhcyhrZXkpO1xuICAgICAgICByZXR1cm4gZGF0YSAmJiAkaGFzKGRhdGEsIHRoaXMuX2kpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBDO1xuICB9LFxuICBkZWY6IGZ1bmN0aW9uICh0aGF0LCBrZXksIHZhbHVlKSB7XG4gICAgdmFyIGRhdGEgPSBnZXRXZWFrKGFuT2JqZWN0KGtleSksIHRydWUpO1xuICAgIGlmIChkYXRhID09PSB0cnVlKSB1bmNhdWdodEZyb3plblN0b3JlKHRoYXQpLnNldChrZXksIHZhbHVlKTtcbiAgICBlbHNlIGRhdGFbdGhhdC5faV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhhdDtcbiAgfSxcbiAgdWZzdG9yZTogdW5jYXVnaHRGcm96ZW5TdG9yZVxufTtcblxufSx7XCIxMlwiOjEyLFwiMTI1XCI6MTI1LFwiMzlcIjozOSxcIjQxXCI6NDEsXCI1MVwiOjUxLFwiNlwiOjYsXCI2NlwiOjY2LFwiN1wiOjcsXCI5M1wiOjkzfV0sMjI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciByZWRlZmluZSA9IF9kZXJlcV8oOTQpO1xudmFyIHJlZGVmaW5lQWxsID0gX2RlcmVxXyg5Myk7XG52YXIgbWV0YSA9IF9kZXJlcV8oNjYpO1xudmFyIGZvck9mID0gX2RlcmVxXygzOSk7XG52YXIgYW5JbnN0YW5jZSA9IF9kZXJlcV8oNik7XG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbnZhciBmYWlscyA9IF9kZXJlcV8oMzUpO1xudmFyICRpdGVyRGV0ZWN0ID0gX2RlcmVxXyg1Nik7XG52YXIgc2V0VG9TdHJpbmdUYWcgPSBfZGVyZXFfKDEwMSk7XG52YXIgaW5oZXJpdElmUmVxdWlyZWQgPSBfZGVyZXFfKDQ1KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTkFNRSwgd3JhcHBlciwgbWV0aG9kcywgY29tbW9uLCBJU19NQVAsIElTX1dFQUspIHtcbiAgdmFyIEJhc2UgPSBnbG9iYWxbTkFNRV07XG4gIHZhciBDID0gQmFzZTtcbiAgdmFyIEFEREVSID0gSVNfTUFQID8gJ3NldCcgOiAnYWRkJztcbiAgdmFyIHByb3RvID0gQyAmJiBDLnByb3RvdHlwZTtcbiAgdmFyIE8gPSB7fTtcbiAgdmFyIGZpeE1ldGhvZCA9IGZ1bmN0aW9uIChLRVkpIHtcbiAgICB2YXIgZm4gPSBwcm90b1tLRVldO1xuICAgIHJlZGVmaW5lKHByb3RvLCBLRVksXG4gICAgICBLRVkgPT0gJ2RlbGV0ZScgPyBmdW5jdGlvbiAoYSkge1xuICAgICAgICByZXR1cm4gSVNfV0VBSyAmJiAhaXNPYmplY3QoYSkgPyBmYWxzZSA6IGZuLmNhbGwodGhpcywgYSA9PT0gMCA/IDAgOiBhKTtcbiAgICAgIH0gOiBLRVkgPT0gJ2hhcycgPyBmdW5jdGlvbiBoYXMoYSkge1xuICAgICAgICByZXR1cm4gSVNfV0VBSyAmJiAhaXNPYmplY3QoYSkgPyBmYWxzZSA6IGZuLmNhbGwodGhpcywgYSA9PT0gMCA/IDAgOiBhKTtcbiAgICAgIH0gOiBLRVkgPT0gJ2dldCcgPyBmdW5jdGlvbiBnZXQoYSkge1xuICAgICAgICByZXR1cm4gSVNfV0VBSyAmJiAhaXNPYmplY3QoYSkgPyB1bmRlZmluZWQgOiBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7XG4gICAgICB9IDogS0VZID09ICdhZGQnID8gZnVuY3Rpb24gYWRkKGEpIHsgZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEpOyByZXR1cm4gdGhpczsgfVxuICAgICAgICA6IGZ1bmN0aW9uIHNldChhLCBiKSB7IGZuLmNhbGwodGhpcywgYSA9PT0gMCA/IDAgOiBhLCBiKTsgcmV0dXJuIHRoaXM7IH1cbiAgICApO1xuICB9O1xuICBpZiAodHlwZW9mIEMgIT0gJ2Z1bmN0aW9uJyB8fCAhKElTX1dFQUsgfHwgcHJvdG8uZm9yRWFjaCAmJiAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIG5ldyBDKCkuZW50cmllcygpLm5leHQoKTtcbiAgfSkpKSB7XG4gICAgLy8gY3JlYXRlIGNvbGxlY3Rpb24gY29uc3RydWN0b3JcbiAgICBDID0gY29tbW9uLmdldENvbnN0cnVjdG9yKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpO1xuICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCBtZXRob2RzKTtcbiAgICBtZXRhLk5FRUQgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDKCk7XG4gICAgLy8gZWFybHkgaW1wbGVtZW50YXRpb25zIG5vdCBzdXBwb3J0cyBjaGFpbmluZ1xuICAgIHZhciBIQVNOVF9DSEFJTklORyA9IGluc3RhbmNlW0FEREVSXShJU19XRUFLID8ge30gOiAtMCwgMSkgIT0gaW5zdGFuY2U7XG4gICAgLy8gVjggfiAgQ2hyb21pdW0gNDAtIHdlYWstY29sbGVjdGlvbnMgdGhyb3dzIG9uIHByaW1pdGl2ZXMsIGJ1dCBzaG91bGQgcmV0dXJuIGZhbHNlXG4gICAgdmFyIFRIUk9XU19PTl9QUklNSVRJVkVTID0gZmFpbHMoZnVuY3Rpb24gKCkgeyBpbnN0YW5jZS5oYXMoMSk7IH0pO1xuICAgIC8vIG1vc3QgZWFybHkgaW1wbGVtZW50YXRpb25zIGRvZXNuJ3Qgc3VwcG9ydHMgaXRlcmFibGVzLCBtb3N0IG1vZGVybiAtIG5vdCBjbG9zZSBpdCBjb3JyZWN0bHlcbiAgICB2YXIgQUNDRVBUX0lURVJBQkxFUyA9ICRpdGVyRGV0ZWN0KGZ1bmN0aW9uIChpdGVyKSB7IG5ldyBDKGl0ZXIpOyB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgICAvLyBmb3IgZWFybHkgaW1wbGVtZW50YXRpb25zIC0wIGFuZCArMCBub3QgdGhlIHNhbWVcbiAgICB2YXIgQlVHR1lfWkVSTyA9ICFJU19XRUFLICYmIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFY4IH4gQ2hyb21pdW0gNDItIGZhaWxzIG9ubHkgd2l0aCA1KyBlbGVtZW50c1xuICAgICAgdmFyICRpbnN0YW5jZSA9IG5ldyBDKCk7XG4gICAgICB2YXIgaW5kZXggPSA1O1xuICAgICAgd2hpbGUgKGluZGV4LS0pICRpbnN0YW5jZVtBRERFUl0oaW5kZXgsIGluZGV4KTtcbiAgICAgIHJldHVybiAhJGluc3RhbmNlLmhhcygtMCk7XG4gICAgfSk7XG4gICAgaWYgKCFBQ0NFUFRfSVRFUkFCTEVTKSB7XG4gICAgICBDID0gd3JhcHBlcihmdW5jdGlvbiAodGFyZ2V0LCBpdGVyYWJsZSkge1xuICAgICAgICBhbkluc3RhbmNlKHRhcmdldCwgQywgTkFNRSk7XG4gICAgICAgIHZhciB0aGF0ID0gaW5oZXJpdElmUmVxdWlyZWQobmV3IEJhc2UoKSwgdGFyZ2V0LCBDKTtcbiAgICAgICAgaWYgKGl0ZXJhYmxlICE9IHVuZGVmaW5lZCkgZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGhhdFtBRERFUl0sIHRoYXQpO1xuICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgIH0pO1xuICAgICAgQy5wcm90b3R5cGUgPSBwcm90bztcbiAgICAgIHByb3RvLmNvbnN0cnVjdG9yID0gQztcbiAgICB9XG4gICAgaWYgKFRIUk9XU19PTl9QUklNSVRJVkVTIHx8IEJVR0dZX1pFUk8pIHtcbiAgICAgIGZpeE1ldGhvZCgnZGVsZXRlJyk7XG4gICAgICBmaXhNZXRob2QoJ2hhcycpO1xuICAgICAgSVNfTUFQICYmIGZpeE1ldGhvZCgnZ2V0Jyk7XG4gICAgfVxuICAgIGlmIChCVUdHWV9aRVJPIHx8IEhBU05UX0NIQUlOSU5HKSBmaXhNZXRob2QoQURERVIpO1xuICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgc2hvdWxkIG5vdCBjb250YWlucyAuY2xlYXIgbWV0aG9kXG4gICAgaWYgKElTX1dFQUsgJiYgcHJvdG8uY2xlYXIpIGRlbGV0ZSBwcm90by5jbGVhcjtcbiAgfVxuXG4gIHNldFRvU3RyaW5nVGFnKEMsIE5BTUUpO1xuXG4gIE9bTkFNRV0gPSBDO1xuICAkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqIChDICE9IEJhc2UpLCBPKTtcblxuICBpZiAoIUlTX1dFQUspIGNvbW1vbi5zZXRTdHJvbmcoQywgTkFNRSwgSVNfTUFQKTtcblxuICByZXR1cm4gQztcbn07XG5cbn0se1wiMTAxXCI6MTAxLFwiMzNcIjozMyxcIjM1XCI6MzUsXCIzOVwiOjM5LFwiNDBcIjo0MCxcIjQ1XCI6NDUsXCI1MVwiOjUxLFwiNTZcIjo1NixcIjZcIjo2LFwiNjZcIjo2NixcIjkzXCI6OTMsXCI5NFwiOjk0fV0sMjM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHsgdmVyc2lvbjogJzIuNS4wJyB9O1xuaWYgKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpIF9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxufSx7fV0sMjQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRkZWZpbmVQcm9wZXJ0eSA9IF9kZXJlcV8oNzIpO1xudmFyIGNyZWF0ZURlc2MgPSBfZGVyZXFfKDkyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0LCBpbmRleCwgdmFsdWUpIHtcbiAgaWYgKGluZGV4IGluIG9iamVjdCkgJGRlZmluZVByb3BlcnR5LmYob2JqZWN0LCBpbmRleCwgY3JlYXRlRGVzYygwLCB2YWx1ZSkpO1xuICBlbHNlIG9iamVjdFtpbmRleF0gPSB2YWx1ZTtcbn07XG5cbn0se1wiNzJcIjo3MixcIjkyXCI6OTJ9XSwyNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcbnZhciBhRnVuY3Rpb24gPSBfZGVyZXFfKDMpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4sIHRoYXQsIGxlbmd0aCkge1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZm47XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uICgvKiAuLi5hcmdzICovKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuXG59LHtcIjNcIjozfV0sMjY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gMjAuMy40LjM2IC8gMTUuOS41LjQzIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKClcbnZhciBmYWlscyA9IF9kZXJlcV8oMzUpO1xudmFyIGdldFRpbWUgPSBEYXRlLnByb3RvdHlwZS5nZXRUaW1lO1xudmFyICR0b0lTT1N0cmluZyA9IERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nO1xuXG52YXIgbHogPSBmdW5jdGlvbiAobnVtKSB7XG4gIHJldHVybiBudW0gPiA5ID8gbnVtIDogJzAnICsgbnVtO1xufTtcblxuLy8gUGhhbnRvbUpTIC8gb2xkIFdlYktpdCBoYXMgYSBicm9rZW4gaW1wbGVtZW50YXRpb25zXG5tb2R1bGUuZXhwb3J0cyA9IChmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAkdG9JU09TdHJpbmcuY2FsbChuZXcgRGF0ZSgtNWUxMyAtIDEpKSAhPSAnMDM4NS0wNy0yNVQwNzowNjozOS45OTlaJztcbn0pIHx8ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gICR0b0lTT1N0cmluZy5jYWxsKG5ldyBEYXRlKE5hTikpO1xufSkpID8gZnVuY3Rpb24gdG9JU09TdHJpbmcoKSB7XG4gIGlmICghaXNGaW5pdGUoZ2V0VGltZS5jYWxsKHRoaXMpKSkgdGhyb3cgUmFuZ2VFcnJvcignSW52YWxpZCB0aW1lIHZhbHVlJyk7XG4gIHZhciBkID0gdGhpcztcbiAgdmFyIHkgPSBkLmdldFVUQ0Z1bGxZZWFyKCk7XG4gIHZhciBtID0gZC5nZXRVVENNaWxsaXNlY29uZHMoKTtcbiAgdmFyIHMgPSB5IDwgMCA/ICctJyA6IHkgPiA5OTk5ID8gJysnIDogJyc7XG4gIHJldHVybiBzICsgKCcwMDAwMCcgKyBNYXRoLmFicyh5KSkuc2xpY2UocyA/IC02IDogLTQpICtcbiAgICAnLScgKyBseihkLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArIGx6KGQuZ2V0VVRDRGF0ZSgpKSArXG4gICAgJ1QnICsgbHooZC5nZXRVVENIb3VycygpKSArICc6JyArIGx6KGQuZ2V0VVRDTWludXRlcygpKSArXG4gICAgJzonICsgbHooZC5nZXRVVENTZWNvbmRzKCkpICsgJy4nICsgKG0gPiA5OSA/IG0gOiAnMCcgKyBseihtKSkgKyAnWic7XG59IDogJHRvSVNPU3RyaW5nO1xuXG59LHtcIjM1XCI6MzV9XSwyNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIHRvUHJpbWl0aXZlID0gX2RlcmVxXygxMjApO1xudmFyIE5VTUJFUiA9ICdudW1iZXInO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChoaW50KSB7XG4gIGlmIChoaW50ICE9PSAnc3RyaW5nJyAmJiBoaW50ICE9PSBOVU1CRVIgJiYgaGludCAhPT0gJ2RlZmF1bHQnKSB0aHJvdyBUeXBlRXJyb3IoJ0luY29ycmVjdCBoaW50Jyk7XG4gIHJldHVybiB0b1ByaW1pdGl2ZShhbk9iamVjdCh0aGlzKSwgaGludCAhPSBOVU1CRVIpO1xufTtcblxufSx7XCIxMjBcIjoxMjAsXCI3XCI6N31dLDI4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoaXQgPT0gdW5kZWZpbmVkKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG5cbn0se31dLDI5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIV9kZXJlcV8oMzUpKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfSB9KS5hICE9IDc7XG59KTtcblxufSx7XCIzNVwiOjM1fV0sMzA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgZG9jdW1lbnQgPSBfZGVyZXFfKDQwKS5kb2N1bWVudDtcbi8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRVxudmFyIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07XG5cbn0se1wiNDBcIjo0MCxcIjUxXCI6NTF9XSwzMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZidcbikuc3BsaXQoJywnKTtcblxufSx7fV0sMzI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHNcbnZhciBnZXRLZXlzID0gX2RlcmVxXyg4MSk7XG52YXIgZ09QUyA9IF9kZXJlcV8oNzgpO1xudmFyIHBJRSA9IF9kZXJlcV8oODIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIHJlc3VsdCA9IGdldEtleXMoaXQpO1xuICB2YXIgZ2V0U3ltYm9scyA9IGdPUFMuZjtcbiAgaWYgKGdldFN5bWJvbHMpIHtcbiAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpO1xuICAgIHZhciBpc0VudW0gPSBwSUUuZjtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGtleTtcbiAgICB3aGlsZSAoc3ltYm9scy5sZW5ndGggPiBpKSBpZiAoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpIHJlc3VsdC5wdXNoKGtleSk7XG4gIH0gcmV0dXJuIHJlc3VsdDtcbn07XG5cbn0se1wiNzhcIjo3OCxcIjgxXCI6ODEsXCI4MlwiOjgyfV0sMzM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIGNvcmUgPSBfZGVyZXFfKDIzKTtcbnZhciBoaWRlID0gX2RlcmVxXyg0Mik7XG52YXIgcmVkZWZpbmUgPSBfZGVyZXFfKDk0KTtcbnZhciBjdHggPSBfZGVyZXFfKDI1KTtcbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbiAodHlwZSwgbmFtZSwgc291cmNlKSB7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GO1xuICB2YXIgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuRztcbiAgdmFyIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlM7XG4gIHZhciBJU19QUk9UTyA9IHR5cGUgJiAkZXhwb3J0LlA7XG4gIHZhciBJU19CSU5EID0gdHlwZSAmICRleHBvcnQuQjtcbiAgdmFyIHRhcmdldCA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSB8fCAoZ2xvYmFsW25hbWVdID0ge30pIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXTtcbiAgdmFyIGV4cG9ydHMgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KTtcbiAgdmFyIGV4cFByb3RvID0gZXhwb3J0c1tQUk9UT1RZUEVdIHx8IChleHBvcnRzW1BST1RPVFlQRV0gPSB7fSk7XG4gIHZhciBrZXksIG93biwgb3V0LCBleHA7XG4gIGlmIChJU19HTE9CQUwpIHNvdXJjZSA9IG5hbWU7XG4gIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7XG4gICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcbiAgICBvdXQgPSAob3duID8gdGFyZ2V0IDogc291cmNlKVtrZXldO1xuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG4gICAgLy8gZXh0ZW5kIGdsb2JhbFxuICAgIGlmICh0YXJnZXQpIHJlZGVmaW5lKHRhcmdldCwga2V5LCBvdXQsIHR5cGUgJiAkZXhwb3J0LlUpO1xuICAgIC8vIGV4cG9ydFxuICAgIGlmIChleHBvcnRzW2tleV0gIT0gb3V0KSBoaWRlKGV4cG9ydHMsIGtleSwgZXhwKTtcbiAgICBpZiAoSVNfUFJPVE8gJiYgZXhwUHJvdG9ba2V5XSAhPSBvdXQpIGV4cFByb3RvW2tleV0gPSBvdXQ7XG4gIH1cbn07XG5nbG9iYWwuY29yZSA9IGNvcmU7XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWRcbiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgICAvLyBwcm90b1xuJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXBcbiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZVxuJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgXG5tb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7XG5cbn0se1wiMjNcIjoyMyxcIjI1XCI6MjUsXCI0MFwiOjQwLFwiNDJcIjo0MixcIjk0XCI6OTR9XSwzNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgTUFUQ0ggPSBfZGVyZXFfKDEyOCkoJ21hdGNoJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVkpIHtcbiAgdmFyIHJlID0gLy4vO1xuICB0cnkge1xuICAgICcvLi8nW0tFWV0ocmUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlW01BVENIXSA9IGZhbHNlO1xuICAgICAgcmV0dXJuICEnLy4vJ1tLRVldKHJlKTtcbiAgICB9IGNhdGNoIChmKSB7IC8qIGVtcHR5ICovIH1cbiAgfSByZXR1cm4gdHJ1ZTtcbn07XG5cbn0se1wiMTI4XCI6MTI4fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYykge1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG59LHt9XSwzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgaGlkZSA9IF9kZXJlcV8oNDIpO1xudmFyIHJlZGVmaW5lID0gX2RlcmVxXyg5NCk7XG52YXIgZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciBkZWZpbmVkID0gX2RlcmVxXygyOCk7XG52YXIgd2tzID0gX2RlcmVxXygxMjgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVksIGxlbmd0aCwgZXhlYykge1xuICB2YXIgU1lNQk9MID0gd2tzKEtFWSk7XG4gIHZhciBmbnMgPSBleGVjKGRlZmluZWQsIFNZTUJPTCwgJydbS0VZXSk7XG4gIHZhciBzdHJmbiA9IGZuc1swXTtcbiAgdmFyIHJ4Zm4gPSBmbnNbMV07XG4gIGlmIChmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIE8gPSB7fTtcbiAgICBPW1NZTUJPTF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9O1xuICAgIHJldHVybiAnJ1tLRVldKE8pICE9IDc7XG4gIH0pKSB7XG4gICAgcmVkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwgS0VZLCBzdHJmbik7XG4gICAgaGlkZShSZWdFeHAucHJvdG90eXBlLCBTWU1CT0wsIGxlbmd0aCA9PSAyXG4gICAgICAvLyAyMS4yLjUuOCBSZWdFeHAucHJvdG90eXBlW0BAcmVwbGFjZV0oc3RyaW5nLCByZXBsYWNlVmFsdWUpXG4gICAgICAvLyAyMS4yLjUuMTEgUmVnRXhwLnByb3RvdHlwZVtAQHNwbGl0XShzdHJpbmcsIGxpbWl0KVxuICAgICAgPyBmdW5jdGlvbiAoc3RyaW5nLCBhcmcpIHsgcmV0dXJuIHJ4Zm4uY2FsbChzdHJpbmcsIHRoaXMsIGFyZyk7IH1cbiAgICAgIC8vIDIxLjIuNS42IFJlZ0V4cC5wcm90b3R5cGVbQEBtYXRjaF0oc3RyaW5nKVxuICAgICAgLy8gMjEuMi41LjkgUmVnRXhwLnByb3RvdHlwZVtAQHNlYXJjaF0oc3RyaW5nKVxuICAgICAgOiBmdW5jdGlvbiAoc3RyaW5nKSB7IHJldHVybiByeGZuLmNhbGwoc3RyaW5nLCB0aGlzKTsgfVxuICAgICk7XG4gIH1cbn07XG5cbn0se1wiMTI4XCI6MTI4LFwiMjhcIjoyOCxcIjM1XCI6MzUsXCI0MlwiOjQyLFwiOTRcIjo5NH1dLDM3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIDIxLjIuNS4zIGdldCBSZWdFeHAucHJvdG90eXBlLmZsYWdzXG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0aGF0ID0gYW5PYmplY3QodGhpcyk7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgaWYgKHRoYXQuZ2xvYmFsKSByZXN1bHQgKz0gJ2cnO1xuICBpZiAodGhhdC5pZ25vcmVDYXNlKSByZXN1bHQgKz0gJ2knO1xuICBpZiAodGhhdC5tdWx0aWxpbmUpIHJlc3VsdCArPSAnbSc7XG4gIGlmICh0aGF0LnVuaWNvZGUpIHJlc3VsdCArPSAndSc7XG4gIGlmICh0aGF0LnN0aWNreSkgcmVzdWx0ICs9ICd5JztcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbn0se1wiN1wiOjd9XSwzODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLWZsYXRNYXAvI3NlYy1GbGF0dGVuSW50b0FycmF5XG52YXIgaXNBcnJheSA9IF9kZXJlcV8oNDkpO1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgdG9MZW5ndGggPSBfZGVyZXFfKDExOCk7XG52YXIgY3R4ID0gX2RlcmVxXygyNSk7XG52YXIgSVNfQ09OQ0FUX1NQUkVBREFCTEUgPSBfZGVyZXFfKDEyOCkoJ2lzQ29uY2F0U3ByZWFkYWJsZScpO1xuXG5mdW5jdGlvbiBmbGF0dGVuSW50b0FycmF5KHRhcmdldCwgb3JpZ2luYWwsIHNvdXJjZSwgc291cmNlTGVuLCBzdGFydCwgZGVwdGgsIG1hcHBlciwgdGhpc0FyZykge1xuICB2YXIgdGFyZ2V0SW5kZXggPSBzdGFydDtcbiAgdmFyIHNvdXJjZUluZGV4ID0gMDtcbiAgdmFyIG1hcEZuID0gbWFwcGVyID8gY3R4KG1hcHBlciwgdGhpc0FyZywgMykgOiBmYWxzZTtcbiAgdmFyIGVsZW1lbnQsIHNwcmVhZGFibGU7XG5cbiAgd2hpbGUgKHNvdXJjZUluZGV4IDwgc291cmNlTGVuKSB7XG4gICAgaWYgKHNvdXJjZUluZGV4IGluIHNvdXJjZSkge1xuICAgICAgZWxlbWVudCA9IG1hcEZuID8gbWFwRm4oc291cmNlW3NvdXJjZUluZGV4XSwgc291cmNlSW5kZXgsIG9yaWdpbmFsKSA6IHNvdXJjZVtzb3VyY2VJbmRleF07XG5cbiAgICAgIHNwcmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIGlmIChpc09iamVjdChlbGVtZW50KSkge1xuICAgICAgICBzcHJlYWRhYmxlID0gZWxlbWVudFtJU19DT05DQVRfU1BSRUFEQUJMRV07XG4gICAgICAgIHNwcmVhZGFibGUgPSBzcHJlYWRhYmxlICE9PSB1bmRlZmluZWQgPyAhIXNwcmVhZGFibGUgOiBpc0FycmF5KGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3ByZWFkYWJsZSAmJiBkZXB0aCA+IDApIHtcbiAgICAgICAgdGFyZ2V0SW5kZXggPSBmbGF0dGVuSW50b0FycmF5KHRhcmdldCwgb3JpZ2luYWwsIGVsZW1lbnQsIHRvTGVuZ3RoKGVsZW1lbnQubGVuZ3RoKSwgdGFyZ2V0SW5kZXgsIGRlcHRoIC0gMSkgLSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRhcmdldEluZGV4ID49IDB4MWZmZmZmZmZmZmZmZmYpIHRocm93IFR5cGVFcnJvcigpO1xuICAgICAgICB0YXJnZXRbdGFyZ2V0SW5kZXhdID0gZWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0SW5kZXgrKztcbiAgICB9XG4gICAgc291cmNlSW5kZXgrKztcbiAgfVxuICByZXR1cm4gdGFyZ2V0SW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbkludG9BcnJheTtcblxufSx7XCIxMThcIjoxMTgsXCIxMjhcIjoxMjgsXCIyNVwiOjI1LFwiNDlcIjo0OSxcIjUxXCI6NTF9XSwzOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgY3R4ID0gX2RlcmVxXygyNSk7XG52YXIgY2FsbCA9IF9kZXJlcV8oNTMpO1xudmFyIGlzQXJyYXlJdGVyID0gX2RlcmVxXyg0OCk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIGdldEl0ZXJGbiA9IF9kZXJlcV8oMTI5KTtcbnZhciBCUkVBSyA9IHt9O1xudmFyIFJFVFVSTiA9IHt9O1xudmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKSB7XG4gIHZhciBpdGVyRm4gPSBJVEVSQVRPUiA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGl0ZXJhYmxlOyB9IDogZ2V0SXRlckZuKGl0ZXJhYmxlKTtcbiAgdmFyIGYgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSk7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBsZW5ndGgsIHN0ZXAsIGl0ZXJhdG9yLCByZXN1bHQ7XG4gIGlmICh0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpIHRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpO1xuICAvLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3JcbiAgaWYgKGlzQXJyYXlJdGVyKGl0ZXJGbikpIGZvciAobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHtcbiAgICByZXN1bHQgPSBlbnRyaWVzID8gZihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSkgOiBmKGl0ZXJhYmxlW2luZGV4XSk7XG4gICAgaWYgKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pIHJldHVybiByZXN1bHQ7XG4gIH0gZWxzZSBmb3IgKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoaXRlcmFibGUpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7KSB7XG4gICAgcmVzdWx0ID0gY2FsbChpdGVyYXRvciwgZiwgc3RlcC52YWx1ZSwgZW50cmllcyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG5leHBvcnRzLkJSRUFLID0gQlJFQUs7XG5leHBvcnRzLlJFVFVSTiA9IFJFVFVSTjtcblxufSx7XCIxMThcIjoxMTgsXCIxMjlcIjoxMjksXCIyNVwiOjI1LFwiNDhcIjo0OCxcIjUzXCI6NTMsXCI3XCI6N31dLDQwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGZcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmICh0eXBlb2YgX19nID09ICdudW1iZXInKSBfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxufSx7fV0sNDE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwga2V5KSB7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xufTtcblxufSx7fV0sNDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGRQID0gX2RlcmVxXyg3Mik7XG52YXIgY3JlYXRlRGVzYyA9IF9kZXJlcV8oOTIpO1xubW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKDI5KSA/IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcbn0gOiBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59O1xuXG59LHtcIjI5XCI6MjksXCI3MlwiOjcyLFwiOTJcIjo5Mn1dLDQzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBkb2N1bWVudCA9IF9kZXJlcV8oNDApLmRvY3VtZW50O1xubW9kdWxlLmV4cG9ydHMgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbn0se1wiNDBcIjo0MH1dLDQ0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gIV9kZXJlcV8oMjkpICYmICFfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2RlcmVxXygzMCkoJ2RpdicpLCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcbn0pO1xuXG59LHtcIjI5XCI6MjksXCIzMFwiOjMwLFwiMzVcIjozNX1dLDQ1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xudmFyIHNldFByb3RvdHlwZU9mID0gX2RlcmVxXyg5OSkuc2V0O1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGhhdCwgdGFyZ2V0LCBDKSB7XG4gIHZhciBTID0gdGFyZ2V0LmNvbnN0cnVjdG9yO1xuICB2YXIgUDtcbiAgaWYgKFMgIT09IEMgJiYgdHlwZW9mIFMgPT0gJ2Z1bmN0aW9uJyAmJiAoUCA9IFMucHJvdG90eXBlKSAhPT0gQy5wcm90b3R5cGUgJiYgaXNPYmplY3QoUCkgJiYgc2V0UHJvdG90eXBlT2YpIHtcbiAgICBzZXRQcm90b3R5cGVPZih0aGF0LCBQKTtcbiAgfSByZXR1cm4gdGhhdDtcbn07XG5cbn0se1wiNTFcIjo1MSxcIjk5XCI6OTl9XSw0NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuLCBhcmdzLCB0aGF0KSB7XG4gIHZhciB1biA9IHRoYXQgPT09IHVuZGVmaW5lZDtcbiAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTtcbiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pO1xuICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pO1xuICB9IHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmdzKTtcbn07XG5cbn0se31dLDQ3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG52YXIgY29mID0gX2RlcmVxXygxOCk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTtcbn07XG5cbn0se1wiMThcIjoxOH1dLDQ4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3JcbnZhciBJdGVyYXRvcnMgPSBfZGVyZXFfKDU4KTtcbnZhciBJVEVSQVRPUiA9IF9kZXJlcV8oMTI4KSgnaXRlcmF0b3InKTtcbnZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpO1xufTtcblxufSx7XCIxMjhcIjoxMjgsXCI1OFwiOjU4fV0sNDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudClcbnZhciBjb2YgPSBfZGVyZXFfKDE4KTtcbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICByZXR1cm4gY29mKGFyZykgPT0gJ0FycmF5Jztcbn07XG5cbn0se1wiMThcIjoxOH1dLDUwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjEuMi4zIE51bWJlci5pc0ludGVnZXIobnVtYmVyKVxudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0ludGVnZXIoaXQpIHtcbiAgcmV0dXJuICFpc09iamVjdChpdCkgJiYgaXNGaW5pdGUoaXQpICYmIGZsb29yKGl0KSA9PT0gaXQ7XG59O1xuXG59LHtcIjUxXCI6NTF9XSw1MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nO1xufTtcblxufSx7fV0sNTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gNy4yLjggSXNSZWdFeHAoYXJndW1lbnQpXG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbnZhciBjb2YgPSBfZGVyZXFfKDE4KTtcbnZhciBNQVRDSCA9IF9kZXJlcV8oMTI4KSgnbWF0Y2gnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBpc1JlZ0V4cDtcbiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiAoKGlzUmVnRXhwID0gaXRbTUFUQ0hdKSAhPT0gdW5kZWZpbmVkID8gISFpc1JlZ0V4cCA6IGNvZihpdCkgPT0gJ1JlZ0V4cCcpO1xufTtcblxufSx7XCIxMjhcIjoxMjgsXCIxOFwiOjE4LFwiNTFcIjo1MX1dLDUzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3JcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVyYXRvciwgZm4sIHZhbHVlLCBlbnRyaWVzKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTtcbiAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbilcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107XG4gICAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSBhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpO1xuICAgIHRocm93IGU7XG4gIH1cbn07XG5cbn0se1wiN1wiOjd9XSw1NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgY3JlYXRlID0gX2RlcmVxXyg3MSk7XG52YXIgZGVzY3JpcHRvciA9IF9kZXJlcV8oOTIpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gX2RlcmVxXygxMDEpO1xudmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG5cbi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpXG5fZGVyZXFfKDQyKShJdGVyYXRvclByb3RvdHlwZSwgX2RlcmVxXygxMjgpKCdpdGVyYXRvcicpLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpIHtcbiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7IG5leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCkgfSk7XG4gIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBOQU1FICsgJyBJdGVyYXRvcicpO1xufTtcblxufSx7XCIxMDFcIjoxMDEsXCIxMjhcIjoxMjgsXCI0MlwiOjQyLFwiNzFcIjo3MSxcIjkyXCI6OTJ9XSw1NTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgTElCUkFSWSA9IF9kZXJlcV8oNjApO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciByZWRlZmluZSA9IF9kZXJlcV8oOTQpO1xudmFyIGhpZGUgPSBfZGVyZXFfKDQyKTtcbnZhciBoYXMgPSBfZGVyZXFfKDQxKTtcbnZhciBJdGVyYXRvcnMgPSBfZGVyZXFfKDU4KTtcbnZhciAkaXRlckNyZWF0ZSA9IF9kZXJlcV8oNTQpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gX2RlcmVxXygxMDEpO1xudmFyIGdldFByb3RvdHlwZU9mID0gX2RlcmVxXyg3OSk7XG52YXIgSVRFUkFUT1IgPSBfZGVyZXFfKDEyOCkoJ2l0ZXJhdG9yJyk7XG52YXIgQlVHR1kgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSk7IC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGBcbnZhciBGRl9JVEVSQVRPUiA9ICdAQGl0ZXJhdG9yJztcbnZhciBLRVlTID0gJ2tleXMnO1xudmFyIFZBTFVFUyA9ICd2YWx1ZXMnO1xuXG52YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEJhc2UsIE5BTUUsIENvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCkge1xuICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7XG4gIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbiAoa2luZCkge1xuICAgIGlmICghQlVHR1kgJiYga2luZCBpbiBwcm90bykgcmV0dXJuIHByb3RvW2tpbmRdO1xuICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpIHsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCkgeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICAgIH0gcmV0dXJuIGZ1bmN0aW9uIGVudHJpZXMoKSB7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gIH07XG4gIHZhciBUQUcgPSBOQU1FICsgJyBJdGVyYXRvcic7XG4gIHZhciBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVM7XG4gIHZhciBWQUxVRVNfQlVHID0gZmFsc2U7XG4gIHZhciBwcm90byA9IEJhc2UucHJvdG90eXBlO1xuICB2YXIgJG5hdGl2ZSA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXTtcbiAgdmFyICRkZWZhdWx0ID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCk7XG4gIHZhciAkZW50cmllcyA9IERFRkFVTFQgPyAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJykgOiB1bmRlZmluZWQ7XG4gIHZhciAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZTtcbiAgdmFyIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7XG4gIC8vIEZpeCBuYXRpdmVcbiAgaWYgKCRhbnlOYXRpdmUpIHtcbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSgpKSk7XG4gICAgaWYgKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlICYmIEl0ZXJhdG9yUHJvdG90eXBlLm5leHQpIHtcbiAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnNcbiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpO1xuICAgICAgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzXG4gICAgICBpZiAoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKSBoaWRlKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUiwgcmV0dXJuVGhpcyk7XG4gICAgfVxuICB9XG4gIC8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkZcbiAgaWYgKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUykge1xuICAgIFZBTFVFU19CVUcgPSB0cnVlO1xuICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCkgeyByZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpOyB9O1xuICB9XG4gIC8vIERlZmluZSBpdGVyYXRvclxuICBpZiAoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpIHtcbiAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpO1xuICB9XG4gIC8vIFBsdWcgZm9yIGxpYnJhcnlcbiAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7XG4gIEl0ZXJhdG9yc1tUQUddID0gcmV0dXJuVGhpcztcbiAgaWYgKERFRkFVTFQpIHtcbiAgICBtZXRob2RzID0ge1xuICAgICAgdmFsdWVzOiBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSxcbiAgICAgIGtleXM6IElTX1NFVCA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLFxuICAgICAgZW50cmllczogJGVudHJpZXNcbiAgICB9O1xuICAgIGlmIChGT1JDRUQpIGZvciAoa2V5IGluIG1ldGhvZHMpIHtcbiAgICAgIGlmICghKGtleSBpbiBwcm90bykpIHJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7XG4gICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTtcbiAgfVxuICByZXR1cm4gbWV0aG9kcztcbn07XG5cbn0se1wiMTAxXCI6MTAxLFwiMTI4XCI6MTI4LFwiMzNcIjozMyxcIjQxXCI6NDEsXCI0MlwiOjQyLFwiNTRcIjo1NCxcIjU4XCI6NTgsXCI2MFwiOjYwLFwiNzlcIjo3OSxcIjk0XCI6OTR9XSw1NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgSVRFUkFUT1IgPSBfZGVyZXFfKDEyOCkoJ2l0ZXJhdG9yJyk7XG52YXIgU0FGRV9DTE9TSU5HID0gZmFsc2U7XG5cbnRyeSB7XG4gIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTtcbiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24gKCkgeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbFxuICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbiAoKSB7IHRocm93IDI7IH0pO1xufSBjYXRjaCAoZSkgeyAvKiBlbXB0eSAqLyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMsIHNraXBDbG9zaW5nKSB7XG4gIGlmICghc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORykgcmV0dXJuIGZhbHNlO1xuICB2YXIgc2FmZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBbN107XG4gICAgdmFyIGl0ZXIgPSBhcnJbSVRFUkFUT1JdKCk7XG4gICAgaXRlci5uZXh0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4geyBkb25lOiBzYWZlID0gdHJ1ZSB9OyB9O1xuICAgIGFycltJVEVSQVRPUl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpdGVyOyB9O1xuICAgIGV4ZWMoYXJyKTtcbiAgfSBjYXRjaCAoZSkgeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiBzYWZlO1xufTtcblxufSx7XCIxMjhcIjoxMjh9XSw1NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb25lLCB2YWx1ZSkge1xuICByZXR1cm4geyB2YWx1ZTogdmFsdWUsIGRvbmU6ICEhZG9uZSB9O1xufTtcblxufSx7fV0sNTg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSB7fTtcblxufSx7fV0sNTk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGdldEtleXMgPSBfZGVyZXFfKDgxKTtcbnZhciB0b0lPYmplY3QgPSBfZGVyZXFfKDExNyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIGVsKSB7XG4gIHZhciBPID0gdG9JT2JqZWN0KG9iamVjdCk7XG4gIHZhciBrZXlzID0gZ2V0S2V5cyhPKTtcbiAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIga2V5O1xuICB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIGlmIChPW2tleSA9IGtleXNbaW5kZXgrK11dID09PSBlbCkgcmV0dXJuIGtleTtcbn07XG5cbn0se1wiMTE3XCI6MTE3LFwiODFcIjo4MX1dLDYwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gZmFsc2U7XG5cbn0se31dLDYxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpXG52YXIgJGV4cG0xID0gTWF0aC5leHBtMTtcbm1vZHVsZS5leHBvcnRzID0gKCEkZXhwbTFcbiAgLy8gT2xkIEZGIGJ1Z1xuICB8fCAkZXhwbTEoMTApID4gMjIwMjUuNDY1Nzk0ODA2NzE5IHx8ICRleHBtMSgxMCkgPCAyMjAyNS40NjU3OTQ4MDY3MTY1MTY4XG4gIC8vIFRvciBCcm93c2VyIGJ1Z1xuICB8fCAkZXhwbTEoLTJlLTE3KSAhPSAtMmUtMTdcbikgPyBmdW5jdGlvbiBleHBtMSh4KSB7XG4gIHJldHVybiAoeCA9ICt4KSA9PSAwID8geCA6IHggPiAtMWUtNiAmJiB4IDwgMWUtNiA/IHggKyB4ICogeCAvIDIgOiBNYXRoLmV4cCh4KSAtIDE7XG59IDogJGV4cG0xO1xuXG59LHt9XSw2MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMTYgTWF0aC5mcm91bmQoeClcbnZhciBzaWduID0gX2RlcmVxXyg2NSk7XG52YXIgcG93ID0gTWF0aC5wb3c7XG52YXIgRVBTSUxPTiA9IHBvdygyLCAtNTIpO1xudmFyIEVQU0lMT04zMiA9IHBvdygyLCAtMjMpO1xudmFyIE1BWDMyID0gcG93KDIsIDEyNykgKiAoMiAtIEVQU0lMT04zMik7XG52YXIgTUlOMzIgPSBwb3coMiwgLTEyNik7XG5cbnZhciByb3VuZFRpZXNUb0V2ZW4gPSBmdW5jdGlvbiAobikge1xuICByZXR1cm4gbiArIDEgLyBFUFNJTE9OIC0gMSAvIEVQU0lMT047XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hdGguZnJvdW5kIHx8IGZ1bmN0aW9uIGZyb3VuZCh4KSB7XG4gIHZhciAkYWJzID0gTWF0aC5hYnMoeCk7XG4gIHZhciAkc2lnbiA9IHNpZ24oeCk7XG4gIHZhciBhLCByZXN1bHQ7XG4gIGlmICgkYWJzIDwgTUlOMzIpIHJldHVybiAkc2lnbiAqIHJvdW5kVGllc1RvRXZlbigkYWJzIC8gTUlOMzIgLyBFUFNJTE9OMzIpICogTUlOMzIgKiBFUFNJTE9OMzI7XG4gIGEgPSAoMSArIEVQU0lMT04zMiAvIEVQU0lMT04pICogJGFicztcbiAgcmVzdWx0ID0gYSAtIChhIC0gJGFicyk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgaWYgKHJlc3VsdCA+IE1BWDMyIHx8IHJlc3VsdCAhPSByZXN1bHQpIHJldHVybiAkc2lnbiAqIEluZmluaXR5O1xuICByZXR1cm4gJHNpZ24gKiByZXN1bHQ7XG59O1xuXG59LHtcIjY1XCI6NjV9XSw2MzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMjAgTWF0aC5sb2cxcCh4KVxubW9kdWxlLmV4cG9ydHMgPSBNYXRoLmxvZzFwIHx8IGZ1bmN0aW9uIGxvZzFwKHgpIHtcbiAgcmV0dXJuICh4ID0gK3gpID4gLTFlLTggJiYgeCA8IDFlLTggPyB4IC0geCAqIHggLyAyIDogTWF0aC5sb2coMSArIHgpO1xufTtcblxufSx7fV0sNjQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zL1xubW9kdWxlLmV4cG9ydHMgPSBNYXRoLnNjYWxlIHx8IGZ1bmN0aW9uIHNjYWxlKHgsIGluTG93LCBpbkhpZ2gsIG91dExvdywgb3V0SGlnaCkge1xuICBpZiAoXG4gICAgYXJndW1lbnRzLmxlbmd0aCA9PT0gMFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgfHwgeCAhPSB4XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICB8fCBpbkxvdyAhPSBpbkxvd1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgfHwgaW5IaWdoICE9IGluSGlnaFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgfHwgb3V0TG93ICE9IG91dExvd1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgfHwgb3V0SGlnaCAhPSBvdXRIaWdoXG4gICkgcmV0dXJuIE5hTjtcbiAgaWYgKHggPT09IEluZmluaXR5IHx8IHggPT09IC1JbmZpbml0eSkgcmV0dXJuIHg7XG4gIHJldHVybiAoeCAtIGluTG93KSAqIChvdXRIaWdoIC0gb3V0TG93KSAvIChpbkhpZ2ggLSBpbkxvdykgKyBvdXRMb3c7XG59O1xuXG59LHt9XSw2NTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpXG5tb2R1bGUuZXhwb3J0cyA9IE1hdGguc2lnbiB8fCBmdW5jdGlvbiBzaWduKHgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICByZXR1cm4gKHggPSAreCkgPT0gMCB8fCB4ICE9IHggPyB4IDogeCA8IDAgPyAtMSA6IDE7XG59O1xuXG59LHt9XSw2NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgTUVUQSA9IF9kZXJlcV8oMTI0KSgnbWV0YScpO1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgaGFzID0gX2RlcmVxXyg0MSk7XG52YXIgc2V0RGVzYyA9IF9kZXJlcV8oNzIpLmY7XG52YXIgaWQgPSAwO1xudmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgRlJFRVpFID0gIV9kZXJlcV8oMzUpKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTtcbn0pO1xudmFyIHNldE1ldGEgPSBmdW5jdGlvbiAoaXQpIHtcbiAgc2V0RGVzYyhpdCwgTUVUQSwgeyB2YWx1ZToge1xuICAgIGk6ICdPJyArICsraWQsIC8vIG9iamVjdCBJRFxuICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzXG4gIH0gfSk7XG59O1xudmFyIGZhc3RLZXkgPSBmdW5jdGlvbiAoaXQsIGNyZWF0ZSkge1xuICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4XG4gIGlmICghaXNPYmplY3QoaXQpKSByZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiAodHlwZW9mIGl0ID09ICdzdHJpbmcnID8gJ1MnIDogJ1AnKSArIGl0O1xuICBpZiAoIWhhcyhpdCwgTUVUQSkpIHtcbiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdFxuICAgIGlmICghaXNFeHRlbnNpYmxlKGl0KSkgcmV0dXJuICdGJztcbiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxuICAgIGlmICghY3JlYXRlKSByZXR1cm4gJ0UnO1xuICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhXG4gICAgc2V0TWV0YShpdCk7XG4gIC8vIHJldHVybiBvYmplY3QgSURcbiAgfSByZXR1cm4gaXRbTUVUQV0uaTtcbn07XG52YXIgZ2V0V2VhayA9IGZ1bmN0aW9uIChpdCwgY3JlYXRlKSB7XG4gIGlmICghaGFzKGl0LCBNRVRBKSkge1xuICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XG4gICAgaWYgKCFpc0V4dGVuc2libGUoaXQpKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxuICAgIGlmICghY3JlYXRlKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcbiAgICBzZXRNZXRhKGl0KTtcbiAgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHNcbiAgfSByZXR1cm4gaXRbTUVUQV0udztcbn07XG4vLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmdcbnZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKSBzZXRNZXRhKGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciBtZXRhID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIEtFWTogTUVUQSxcbiAgTkVFRDogZmFsc2UsXG4gIGZhc3RLZXk6IGZhc3RLZXksXG4gIGdldFdlYWs6IGdldFdlYWssXG4gIG9uRnJlZXplOiBvbkZyZWV6ZVxufTtcblxufSx7XCIxMjRcIjoxMjQsXCIzNVwiOjM1LFwiNDFcIjo0MSxcIjUxXCI6NTEsXCI3MlwiOjcyfV0sNjc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIE1hcCA9IF9kZXJlcV8oMTYwKTtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgc2hhcmVkID0gX2RlcmVxXygxMDMpKCdtZXRhZGF0YScpO1xudmFyIHN0b3JlID0gc2hhcmVkLnN0b3JlIHx8IChzaGFyZWQuc3RvcmUgPSBuZXcgKF9kZXJlcV8oMjY2KSkoKSk7XG5cbnZhciBnZXRPckNyZWF0ZU1ldGFkYXRhTWFwID0gZnVuY3Rpb24gKHRhcmdldCwgdGFyZ2V0S2V5LCBjcmVhdGUpIHtcbiAgdmFyIHRhcmdldE1ldGFkYXRhID0gc3RvcmUuZ2V0KHRhcmdldCk7XG4gIGlmICghdGFyZ2V0TWV0YWRhdGEpIHtcbiAgICBpZiAoIWNyZWF0ZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBzdG9yZS5zZXQodGFyZ2V0LCB0YXJnZXRNZXRhZGF0YSA9IG5ldyBNYXAoKSk7XG4gIH1cbiAgdmFyIGtleU1ldGFkYXRhID0gdGFyZ2V0TWV0YWRhdGEuZ2V0KHRhcmdldEtleSk7XG4gIGlmICgha2V5TWV0YWRhdGEpIHtcbiAgICBpZiAoIWNyZWF0ZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB0YXJnZXRNZXRhZGF0YS5zZXQodGFyZ2V0S2V5LCBrZXlNZXRhZGF0YSA9IG5ldyBNYXAoKSk7XG4gIH0gcmV0dXJuIGtleU1ldGFkYXRhO1xufTtcbnZhciBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gZnVuY3Rpb24gKE1ldGFkYXRhS2V5LCBPLCBQKSB7XG4gIHZhciBtZXRhZGF0YU1hcCA9IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgZmFsc2UpO1xuICByZXR1cm4gbWV0YWRhdGFNYXAgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogbWV0YWRhdGFNYXAuaGFzKE1ldGFkYXRhS2V5KTtcbn07XG52YXIgb3JkaW5hcnlHZXRPd25NZXRhZGF0YSA9IGZ1bmN0aW9uIChNZXRhZGF0YUtleSwgTywgUCkge1xuICB2YXIgbWV0YWRhdGFNYXAgPSBnZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIGZhbHNlKTtcbiAgcmV0dXJuIG1ldGFkYXRhTWFwID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBtZXRhZGF0YU1hcC5nZXQoTWV0YWRhdGFLZXkpO1xufTtcbnZhciBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhID0gZnVuY3Rpb24gKE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlLCBPLCBQKSB7XG4gIGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgdHJ1ZSkuc2V0KE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlKTtcbn07XG52YXIgb3JkaW5hcnlPd25NZXRhZGF0YUtleXMgPSBmdW5jdGlvbiAodGFyZ2V0LCB0YXJnZXRLZXkpIHtcbiAgdmFyIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgZmFsc2UpO1xuICB2YXIga2V5cyA9IFtdO1xuICBpZiAobWV0YWRhdGFNYXApIG1ldGFkYXRhTWFwLmZvckVhY2goZnVuY3Rpb24gKF8sIGtleSkgeyBrZXlzLnB1c2goa2V5KTsgfSk7XG4gIHJldHVybiBrZXlzO1xufTtcbnZhciB0b01ldGFLZXkgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiBTdHJpbmcoaXQpO1xufTtcbnZhciBleHAgPSBmdW5jdGlvbiAoTykge1xuICAkZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCBPKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzdG9yZTogc3RvcmUsXG4gIG1hcDogZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCxcbiAgaGFzOiBvcmRpbmFyeUhhc093bk1ldGFkYXRhLFxuICBnZXQ6IG9yZGluYXJ5R2V0T3duTWV0YWRhdGEsXG4gIHNldDogb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSxcbiAga2V5czogb3JkaW5hcnlPd25NZXRhZGF0YUtleXMsXG4gIGtleTogdG9NZXRhS2V5LFxuICBleHA6IGV4cFxufTtcblxufSx7XCIxMDNcIjoxMDMsXCIxNjBcIjoxNjAsXCIyNjZcIjoyNjYsXCIzM1wiOjMzfV0sNjg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIG1hY3JvdGFzayA9IF9kZXJlcV8oMTEzKS5zZXQ7XG52YXIgT2JzZXJ2ZXIgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xudmFyIGlzTm9kZSA9IF9kZXJlcV8oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7XG5cbiAgdmFyIGZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJlbnQsIGZuO1xuICAgIGlmIChpc05vZGUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSkgcGFyZW50LmV4aXQoKTtcbiAgICB3aGlsZSAoaGVhZCkge1xuICAgICAgZm4gPSBoZWFkLmZuO1xuICAgICAgaGVhZCA9IGhlYWQubmV4dDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChoZWFkKSBub3RpZnkoKTtcbiAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0gbGFzdCA9IHVuZGVmaW5lZDtcbiAgICBpZiAocGFyZW50KSBwYXJlbnQuZW50ZXIoKTtcbiAgfTtcblxuICAvLyBOb2RlLmpzXG4gIGlmIChpc05vZGUpIHtcbiAgICBub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgICB9O1xuICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXJcbiAgfSBlbHNlIGlmIChPYnNlcnZlcikge1xuICAgIHZhciB0b2dnbGUgPSB0cnVlO1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgIG5ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgbm9kZS5kYXRhID0gdG9nZ2xlID0gIXRvZ2dsZTtcbiAgICB9O1xuICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZVxuICB9IGVsc2UgaWYgKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKSB7XG4gICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBwcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH07XG4gIC8vIGZvciBvdGhlciBlbnZpcm9ubWVudHMgLSBtYWNyb3Rhc2sgYmFzZWQgb246XG4gIC8vIC0gc2V0SW1tZWRpYXRlXG4gIC8vIC0gTWVzc2FnZUNoYW5uZWxcbiAgLy8gLSB3aW5kb3cucG9zdE1lc3NhZ1xuICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZVxuICAvLyAtIHNldFRpbWVvdXRcbiAgfSBlbHNlIHtcbiAgICBub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpXG4gICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgIHZhciB0YXNrID0geyBmbjogZm4sIG5leHQ6IHVuZGVmaW5lZCB9O1xuICAgIGlmIChsYXN0KSBsYXN0Lm5leHQgPSB0YXNrO1xuICAgIGlmICghaGVhZCkge1xuICAgICAgaGVhZCA9IHRhc2s7XG4gICAgICBub3RpZnkoKTtcbiAgICB9IGxhc3QgPSB0YXNrO1xuICB9O1xufTtcblxufSx7XCIxMTNcIjoxMTMsXCIxOFwiOjE4LFwiNDBcIjo0MH1dLDY5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIDI1LjQuMS41IE5ld1Byb21pc2VDYXBhYmlsaXR5KEMpXG52YXIgYUZ1bmN0aW9uID0gX2RlcmVxXygzKTtcblxuZnVuY3Rpb24gUHJvbWlzZUNhcGFiaWxpdHkoQykge1xuICB2YXIgcmVzb2x2ZSwgcmVqZWN0O1xuICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbiAoJCRyZXNvbHZlLCAkJHJlamVjdCkge1xuICAgIGlmIChyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTtcbiAgICByZXNvbHZlID0gJCRyZXNvbHZlO1xuICAgIHJlamVjdCA9ICQkcmVqZWN0O1xuICB9KTtcbiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpO1xuICB0aGlzLnJlamVjdCA9IGFGdW5jdGlvbihyZWplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gKEMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKTtcbn07XG5cbn0se1wiM1wiOjN9XSw3MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pXG52YXIgZ2V0S2V5cyA9IF9kZXJlcV8oODEpO1xudmFyIGdPUFMgPSBfZGVyZXFfKDc4KTtcbnZhciBwSUUgPSBfZGVyZXFfKDgyKTtcbnZhciB0b09iamVjdCA9IF9kZXJlcV8oMTE5KTtcbnZhciBJT2JqZWN0ID0gX2RlcmVxXyg0Nyk7XG52YXIgJGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG5cbi8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKVxubW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHZhciBBID0ge307XG4gIHZhciBCID0ge307XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgUyA9IFN5bWJvbCgpO1xuICB2YXIgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7XG4gIEFbU10gPSA3O1xuICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7IEJba10gPSBrOyB9KTtcbiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7XG59KSA/IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBUID0gdG9PYmplY3QodGFyZ2V0KTtcbiAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAxO1xuICB2YXIgZ2V0U3ltYm9scyA9IGdPUFMuZjtcbiAgdmFyIGlzRW51bSA9IHBJRS5mO1xuICB3aGlsZSAoYUxlbiA+IGluZGV4KSB7XG4gICAgdmFyIFMgPSBJT2JqZWN0KGFyZ3VtZW50c1tpbmRleCsrXSk7XG4gICAgdmFyIGtleXMgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGtleTtcbiAgICB3aGlsZSAobGVuZ3RoID4gaikgaWYgKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpIFRba2V5XSA9IFNba2V5XTtcbiAgfSByZXR1cm4gVDtcbn0gOiAkYXNzaWduO1xuXG59LHtcIjExOVwiOjExOSxcIjM1XCI6MzUsXCI0N1wiOjQ3LFwiNzhcIjo3OCxcIjgxXCI6ODEsXCI4MlwiOjgyfV0sNzE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIGRQcyA9IF9kZXJlcV8oNzMpO1xudmFyIGVudW1CdWdLZXlzID0gX2RlcmVxXygzMSk7XG52YXIgSUVfUFJPVE8gPSBfZGVyZXFfKDEwMikoJ0lFX1BST1RPJyk7XG52YXIgRW1wdHkgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG52YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cbi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGVcbnZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24gKCkge1xuICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuICB2YXIgaWZyYW1lID0gX2RlcmVxXygzMCkoJ2lmcmFtZScpO1xuICB2YXIgaSA9IGVudW1CdWdLZXlzLmxlbmd0aDtcbiAgdmFyIGx0ID0gJzwnO1xuICB2YXIgZ3QgPSAnPic7XG4gIHZhciBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIF9kZXJlcV8oNDMpLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIGlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDonOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmxcbiAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDtcbiAgLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpO1xuICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xuICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7XG4gIGlmcmFtZURvY3VtZW50LndyaXRlKGx0ICsgJ3NjcmlwdCcgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvc2NyaXB0JyArIGd0KTtcbiAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTtcbiAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7XG4gIHdoaWxlIChpLS0pIGRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dO1xuICByZXR1cm4gY3JlYXRlRGljdCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmIChPICE9PSBudWxsKSB7XG4gICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pO1xuICAgIHJlc3VsdCA9IG5ldyBFbXB0eSgpO1xuICAgIEVtcHR5W1BST1RPVFlQRV0gPSBudWxsO1xuICAgIC8vIGFkZCBcIl9fcHJvdG9fX1wiIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGxcbiAgICByZXN1bHRbSUVfUFJPVE9dID0gTztcbiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpO1xufTtcblxufSx7XCIxMDJcIjoxMDIsXCIzMFwiOjMwLFwiMzFcIjozMSxcIjQzXCI6NDMsXCI3XCI6NyxcIjczXCI6NzN9XSw3MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIElFOF9ET01fREVGSU5FID0gX2RlcmVxXyg0NCk7XG52YXIgdG9QcmltaXRpdmUgPSBfZGVyZXFfKDEyMCk7XG52YXIgZFAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbmV4cG9ydHMuZiA9IF9kZXJlcV8oMjkpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykge1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBhbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYgKElFOF9ET01fREVGSU5FKSB0cnkge1xuICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTtcbiAgfSBjYXRjaCAoZSkgeyAvKiBlbXB0eSAqLyB9XG4gIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhJyk7XG4gIGlmICgndmFsdWUnIGluIEF0dHJpYnV0ZXMpIE9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICByZXR1cm4gTztcbn07XG5cbn0se1wiMTIwXCI6MTIwLFwiMjlcIjoyOSxcIjQ0XCI6NDQsXCI3XCI6N31dLDczOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBkUCA9IF9kZXJlcV8oNzIpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBnZXRLZXlzID0gX2RlcmVxXyg4MSk7XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlcmVxXygyOSkgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykge1xuICBhbk9iamVjdChPKTtcbiAgdmFyIGtleXMgPSBnZXRLZXlzKFByb3BlcnRpZXMpO1xuICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gIHZhciBpID0gMDtcbiAgdmFyIFA7XG4gIHdoaWxlIChsZW5ndGggPiBpKSBkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pO1xuICByZXR1cm4gTztcbn07XG5cbn0se1wiMjlcIjoyOSxcIjdcIjo3LFwiNzJcIjo3MixcIjgxXCI6ODF9XSw3NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBGb3JjZWQgcmVwbGFjZW1lbnQgcHJvdG90eXBlIGFjY2Vzc29ycyBtZXRob2RzXG5tb2R1bGUuZXhwb3J0cyA9IF9kZXJlcV8oNjApIHx8ICFfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHZhciBLID0gTWF0aC5yYW5kb20oKTtcbiAgLy8gSW4gRkYgdGhyb3dzIG9ubHkgZGVmaW5lIG1ldGhvZHNcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmLCBuby11c2VsZXNzLWNhbGxcbiAgX19kZWZpbmVTZXR0ZXJfXy5jYWxsKG51bGwsIEssIGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSk7XG4gIGRlbGV0ZSBfZGVyZXFfKDQwKVtLXTtcbn0pO1xuXG59LHtcIjM1XCI6MzUsXCI0MFwiOjQwLFwiNjBcIjo2MH1dLDc1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBwSUUgPSBfZGVyZXFfKDgyKTtcbnZhciBjcmVhdGVEZXNjID0gX2RlcmVxXyg5Mik7XG52YXIgdG9JT2JqZWN0ID0gX2RlcmVxXygxMTcpO1xudmFyIHRvUHJpbWl0aXZlID0gX2RlcmVxXygxMjApO1xudmFyIGhhcyA9IF9kZXJlcV8oNDEpO1xudmFyIElFOF9ET01fREVGSU5FID0gX2RlcmVxXyg0NCk7XG52YXIgZ09QRCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbmV4cG9ydHMuZiA9IF9kZXJlcV8oMjkpID8gZ09QRCA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKSB7XG4gIE8gPSB0b0lPYmplY3QoTyk7XG4gIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTtcbiAgaWYgKElFOF9ET01fREVGSU5FKSB0cnkge1xuICAgIHJldHVybiBnT1BEKE8sIFApO1xuICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH1cbiAgaWYgKGhhcyhPLCBQKSkgcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pO1xufTtcblxufSx7XCIxMTdcIjoxMTcsXCIxMjBcIjoxMjAsXCIyOVwiOjI5LFwiNDFcIjo0MSxcIjQ0XCI6NDQsXCI4MlwiOjgyLFwiOTJcIjo5Mn1dLDc2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3dcbnZhciB0b0lPYmplY3QgPSBfZGVyZXFfKDExNyk7XG52YXIgZ09QTiA9IF9kZXJlcV8oNzcpLmY7XG52YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxudmFyIHdpbmRvd05hbWVzID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNcbiAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpIDogW107XG5cbnZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uIChpdCkge1xuICB0cnkge1xuICAgIHJldHVybiBnT1BOKGl0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCkge1xuICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpO1xufTtcblxufSx7XCIxMTdcIjoxMTcsXCI3N1wiOjc3fV0sNzc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxudmFyICRrZXlzID0gX2RlcmVxXyg4MCk7XG52YXIgaGlkZGVuS2V5cyA9IF9kZXJlcV8oMzEpLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpO1xuXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHtcbiAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpO1xufTtcblxufSx7XCIzMVwiOjMxLFwiODBcIjo4MH1dLDc4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG5cbn0se31dLDc5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pXG52YXIgaGFzID0gX2RlcmVxXyg0MSk7XG52YXIgdG9PYmplY3QgPSBfZGVyZXFfKDExOSk7XG52YXIgSUVfUFJPVE8gPSBfZGVyZXFfKDEwMikoJ0lFX1BST1RPJyk7XG52YXIgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAoTykge1xuICBPID0gdG9PYmplY3QoTyk7XG4gIGlmIChoYXMoTywgSUVfUFJPVE8pKSByZXR1cm4gT1tJRV9QUk9UT107XG4gIGlmICh0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlO1xuICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsO1xufTtcblxufSx7XCIxMDJcIjoxMDIsXCIxMTlcIjoxMTksXCI0MVwiOjQxfV0sODA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGhhcyA9IF9kZXJlcV8oNDEpO1xudmFyIHRvSU9iamVjdCA9IF9kZXJlcV8oMTE3KTtcbnZhciBhcnJheUluZGV4T2YgPSBfZGVyZXFfKDExKShmYWxzZSk7XG52YXIgSUVfUFJPVE8gPSBfZGVyZXFfKDEwMikoJ0lFX1BST1RPJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZXMpIHtcbiAgdmFyIE8gPSB0b0lPYmplY3Qob2JqZWN0KTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIE8pIGlmIChrZXkgIT0gSUVfUFJPVE8pIGhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7XG4gIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXNcbiAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIGlmIChoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpIHtcbiAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG59LHtcIjEwMlwiOjEwMixcIjExXCI6MTEsXCIxMTdcIjoxMTcsXCI0MVwiOjQxfV0sODE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXG52YXIgJGtleXMgPSBfZGVyZXFfKDgwKTtcbnZhciBlbnVtQnVnS2V5cyA9IF9kZXJlcV8oMzEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMoTykge1xuICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpO1xufTtcblxufSx7XCIzMVwiOjMxLFwiODBcIjo4MH1dLDgyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbmV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG59LHt9XSw4MzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgY29yZSA9IF9kZXJlcV8oMjMpO1xudmFyIGZhaWxzID0gX2RlcmVxXygzNSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVksIGV4ZWMpIHtcbiAgdmFyIGZuID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldO1xuICB2YXIgZXhwID0ge307XG4gIGV4cFtLRVldID0gZXhlYyhmbik7XG4gICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24gKCkgeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApO1xufTtcblxufSx7XCIyM1wiOjIzLFwiMzNcIjozMyxcIjM1XCI6MzV9XSw4NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgZ2V0S2V5cyA9IF9kZXJlcV8oODEpO1xudmFyIHRvSU9iamVjdCA9IF9kZXJlcV8oMTE3KTtcbnZhciBpc0VudW0gPSBfZGVyZXFfKDgyKS5mO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXNFbnRyaWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaXQpIHtcbiAgICB2YXIgTyA9IHRvSU9iamVjdChpdCk7XG4gICAgdmFyIGtleXMgPSBnZXRLZXlzKE8pO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBrZXk7XG4gICAgd2hpbGUgKGxlbmd0aCA+IGkpIGlmIChpc0VudW0uY2FsbChPLCBrZXkgPSBrZXlzW2krK10pKSB7XG4gICAgICByZXN1bHQucHVzaChpc0VudHJpZXMgPyBba2V5LCBPW2tleV1dIDogT1trZXldKTtcbiAgICB9IHJldHVybiByZXN1bHQ7XG4gIH07XG59O1xuXG59LHtcIjExN1wiOjExNyxcIjgxXCI6ODEsXCI4MlwiOjgyfV0sODU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gYWxsIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBub24tZW51bWVyYWJsZSBhbmQgc3ltYm9sc1xudmFyIGdPUE4gPSBfZGVyZXFfKDc3KTtcbnZhciBnT1BTID0gX2RlcmVxXyg3OCk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIFJlZmxlY3QgPSBfZGVyZXFfKDQwKS5SZWZsZWN0O1xubW9kdWxlLmV4cG9ydHMgPSBSZWZsZWN0ICYmIFJlZmxlY3Qub3duS2V5cyB8fCBmdW5jdGlvbiBvd25LZXlzKGl0KSB7XG4gIHZhciBrZXlzID0gZ09QTi5mKGFuT2JqZWN0KGl0KSk7XG4gIHZhciBnZXRTeW1ib2xzID0gZ09QUy5mO1xuICByZXR1cm4gZ2V0U3ltYm9scyA/IGtleXMuY29uY2F0KGdldFN5bWJvbHMoaXQpKSA6IGtleXM7XG59O1xuXG59LHtcIjQwXCI6NDAsXCI3XCI6NyxcIjc3XCI6NzcsXCI3OFwiOjc4fV0sODY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRwYXJzZUZsb2F0ID0gX2RlcmVxXyg0MCkucGFyc2VGbG9hdDtcbnZhciAkdHJpbSA9IF9kZXJlcV8oMTExKS50cmltO1xuXG5tb2R1bGUuZXhwb3J0cyA9IDEgLyAkcGFyc2VGbG9hdChfZGVyZXFfKDExMikgKyAnLTAnKSAhPT0gLUluZmluaXR5ID8gZnVuY3Rpb24gcGFyc2VGbG9hdChzdHIpIHtcbiAgdmFyIHN0cmluZyA9ICR0cmltKFN0cmluZyhzdHIpLCAzKTtcbiAgdmFyIHJlc3VsdCA9ICRwYXJzZUZsb2F0KHN0cmluZyk7XG4gIHJldHVybiByZXN1bHQgPT09IDAgJiYgc3RyaW5nLmNoYXJBdCgwKSA9PSAnLScgPyAtMCA6IHJlc3VsdDtcbn0gOiAkcGFyc2VGbG9hdDtcblxufSx7XCIxMTFcIjoxMTEsXCIxMTJcIjoxMTIsXCI0MFwiOjQwfV0sODc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRwYXJzZUludCA9IF9kZXJlcV8oNDApLnBhcnNlSW50O1xudmFyICR0cmltID0gX2RlcmVxXygxMTEpLnRyaW07XG52YXIgd3MgPSBfZGVyZXFfKDExMik7XG52YXIgaGV4ID0gL15bLStdPzBbeFhdLztcblxubW9kdWxlLmV4cG9ydHMgPSAkcGFyc2VJbnQod3MgKyAnMDgnKSAhPT0gOCB8fCAkcGFyc2VJbnQod3MgKyAnMHgxNicpICE9PSAyMiA/IGZ1bmN0aW9uIHBhcnNlSW50KHN0ciwgcmFkaXgpIHtcbiAgdmFyIHN0cmluZyA9ICR0cmltKFN0cmluZyhzdHIpLCAzKTtcbiAgcmV0dXJuICRwYXJzZUludChzdHJpbmcsIChyYWRpeCA+Pj4gMCkgfHwgKGhleC50ZXN0KHN0cmluZykgPyAxNiA6IDEwKSk7XG59IDogJHBhcnNlSW50O1xuXG59LHtcIjExMVwiOjExMSxcIjExMlwiOjExMixcIjQwXCI6NDB9XSw4ODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgcGF0aCA9IF9kZXJlcV8oODkpO1xudmFyIGludm9rZSA9IF9kZXJlcV8oNDYpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgvKiAuLi5wYXJncyAqLykge1xuICB2YXIgZm4gPSBhRnVuY3Rpb24odGhpcyk7XG4gIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICB2YXIgcGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICB2YXIgaSA9IDA7XG4gIHZhciBfID0gcGF0aC5fO1xuICB2YXIgaG9sZGVyID0gZmFsc2U7XG4gIHdoaWxlIChsZW5ndGggPiBpKSBpZiAoKHBhcmdzW2ldID0gYXJndW1lbnRzW2krK10pID09PSBfKSBob2xkZXIgPSB0cnVlO1xuICByZXR1cm4gZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBqID0gMDtcbiAgICB2YXIgayA9IDA7XG4gICAgdmFyIGFyZ3M7XG4gICAgaWYgKCFob2xkZXIgJiYgIWFMZW4pIHJldHVybiBpbnZva2UoZm4sIHBhcmdzLCB0aGF0KTtcbiAgICBhcmdzID0gcGFyZ3Muc2xpY2UoKTtcbiAgICBpZiAoaG9sZGVyKSBmb3IgKDtsZW5ndGggPiBqOyBqKyspIGlmIChhcmdzW2pdID09PSBfKSBhcmdzW2pdID0gYXJndW1lbnRzW2srK107XG4gICAgd2hpbGUgKGFMZW4gPiBrKSBhcmdzLnB1c2goYXJndW1lbnRzW2srK10pO1xuICAgIHJldHVybiBpbnZva2UoZm4sIGFyZ3MsIHRoYXQpO1xuICB9O1xufTtcblxufSx7XCIzXCI6MyxcIjQ2XCI6NDYsXCI4OVwiOjg5fV0sODk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKDQwKTtcblxufSx7XCI0MFwiOjQwfV0sOTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYykge1xuICB0cnkge1xuICAgIHJldHVybiB7IGU6IGZhbHNlLCB2OiBleGVjKCkgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7IGU6IHRydWUsIHY6IGUgfTtcbiAgfVxufTtcblxufSx7fV0sOTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gX2RlcmVxXyg2OSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEMsIHgpIHtcbiAgdmFyIHByb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkuZihDKTtcbiAgdmFyIHJlc29sdmUgPSBwcm9taXNlQ2FwYWJpbGl0eS5yZXNvbHZlO1xuICByZXNvbHZlKHgpO1xuICByZXR1cm4gcHJvbWlzZUNhcGFiaWxpdHkucHJvbWlzZTtcbn07XG5cbn0se1wiNjlcIjo2OX1dLDkyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGJpdG1hcCwgdmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn07XG5cbn0se31dLDkzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciByZWRlZmluZSA9IF9kZXJlcV8oOTQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzcmMsIHNhZmUpIHtcbiAgZm9yICh2YXIga2V5IGluIHNyYykgcmVkZWZpbmUodGFyZ2V0LCBrZXksIHNyY1trZXldLCBzYWZlKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbn0se1wiOTRcIjo5NH1dLDk0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBnbG9iYWwgPSBfZGVyZXFfKDQwKTtcbnZhciBoaWRlID0gX2RlcmVxXyg0Mik7XG52YXIgaGFzID0gX2RlcmVxXyg0MSk7XG52YXIgU1JDID0gX2RlcmVxXygxMjQpKCdzcmMnKTtcbnZhciBUT19TVFJJTkcgPSAndG9TdHJpbmcnO1xudmFyICR0b1N0cmluZyA9IEZ1bmN0aW9uW1RPX1NUUklOR107XG52YXIgVFBMID0gKCcnICsgJHRvU3RyaW5nKS5zcGxpdChUT19TVFJJTkcpO1xuXG5fZGVyZXFfKDIzKS5pbnNwZWN0U291cmNlID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiAkdG9TdHJpbmcuY2FsbChpdCk7XG59O1xuXG4obW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywga2V5LCB2YWwsIHNhZmUpIHtcbiAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2YgdmFsID09ICdmdW5jdGlvbic7XG4gIGlmIChpc0Z1bmN0aW9uKSBoYXModmFsLCAnbmFtZScpIHx8IGhpZGUodmFsLCAnbmFtZScsIGtleSk7XG4gIGlmIChPW2tleV0gPT09IHZhbCkgcmV0dXJuO1xuICBpZiAoaXNGdW5jdGlvbikgaGFzKHZhbCwgU1JDKSB8fCBoaWRlKHZhbCwgU1JDLCBPW2tleV0gPyAnJyArIE9ba2V5XSA6IFRQTC5qb2luKFN0cmluZyhrZXkpKSk7XG4gIGlmIChPID09PSBnbG9iYWwpIHtcbiAgICBPW2tleV0gPSB2YWw7XG4gIH0gZWxzZSBpZiAoIXNhZmUpIHtcbiAgICBkZWxldGUgT1trZXldO1xuICAgIGhpZGUoTywga2V5LCB2YWwpO1xuICB9IGVsc2UgaWYgKE9ba2V5XSkge1xuICAgIE9ba2V5XSA9IHZhbDtcbiAgfSBlbHNlIHtcbiAgICBoaWRlKE8sIGtleSwgdmFsKTtcbiAgfVxuLy8gYWRkIGZha2UgRnVuY3Rpb24jdG9TdHJpbmcgZm9yIGNvcnJlY3Qgd29yayB3cmFwcGVkIG1ldGhvZHMgLyBjb25zdHJ1Y3RvcnMgd2l0aCBtZXRob2RzIGxpa2UgTG9EYXNoIGlzTmF0aXZlXG59KShGdW5jdGlvbi5wcm90b3R5cGUsIFRPX1NUUklORywgZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nICYmIHRoaXNbU1JDXSB8fCAkdG9TdHJpbmcuY2FsbCh0aGlzKTtcbn0pO1xuXG59LHtcIjEyNFwiOjEyNCxcIjIzXCI6MjMsXCI0MFwiOjQwLFwiNDFcIjo0MSxcIjQyXCI6NDJ9XSw5NTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyZWdFeHAsIHJlcGxhY2UpIHtcbiAgdmFyIHJlcGxhY2VyID0gcmVwbGFjZSA9PT0gT2JqZWN0KHJlcGxhY2UpID8gZnVuY3Rpb24gKHBhcnQpIHtcbiAgICByZXR1cm4gcmVwbGFjZVtwYXJ0XTtcbiAgfSA6IHJlcGxhY2U7XG4gIHJldHVybiBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gU3RyaW5nKGl0KS5yZXBsYWNlKHJlZ0V4cCwgcmVwbGFjZXIpO1xuICB9O1xufTtcblxufSx7fV0sOTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gNy4yLjkgU2FtZVZhbHVlKHgsIHkpXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5pcyB8fCBmdW5jdGlvbiBpcyh4LCB5KSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgcmV0dXJuIHggPT09IHkgPyB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geSA6IHggIT0geCAmJiB5ICE9IHk7XG59O1xuXG59LHt9XSw5NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG52YXIgY3R4ID0gX2RlcmVxXygyNSk7XG52YXIgZm9yT2YgPSBfZGVyZXFfKDM5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ09MTEVDVElPTikge1xuICAkZXhwb3J0KCRleHBvcnQuUywgQ09MTEVDVElPTiwgeyBmcm9tOiBmdW5jdGlvbiBmcm9tKHNvdXJjZSAvKiAsIG1hcEZuLCB0aGlzQXJnICovKSB7XG4gICAgdmFyIG1hcEZuID0gYXJndW1lbnRzWzFdO1xuICAgIHZhciBtYXBwaW5nLCBBLCBuLCBjYjtcbiAgICBhRnVuY3Rpb24odGhpcyk7XG4gICAgbWFwcGluZyA9IG1hcEZuICE9PSB1bmRlZmluZWQ7XG4gICAgaWYgKG1hcHBpbmcpIGFGdW5jdGlvbihtYXBGbik7XG4gICAgaWYgKHNvdXJjZSA9PSB1bmRlZmluZWQpIHJldHVybiBuZXcgdGhpcygpO1xuICAgIEEgPSBbXTtcbiAgICBpZiAobWFwcGluZykge1xuICAgICAgbiA9IDA7XG4gICAgICBjYiA9IGN0eChtYXBGbiwgYXJndW1lbnRzWzJdLCAyKTtcbiAgICAgIGZvck9mKHNvdXJjZSwgZmFsc2UsIGZ1bmN0aW9uIChuZXh0SXRlbSkge1xuICAgICAgICBBLnB1c2goY2IobmV4dEl0ZW0sIG4rKykpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvck9mKHNvdXJjZSwgZmFsc2UsIEEucHVzaCwgQSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgdGhpcyhBKTtcbiAgfSB9KTtcbn07XG5cbn0se1wiMjVcIjoyNSxcIjNcIjozLFwiMzNcIjozMyxcIjM5XCI6Mzl9XSw5ODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDT0xMRUNUSU9OKSB7XG4gICRleHBvcnQoJGV4cG9ydC5TLCBDT0xMRUNUSU9OLCB7IG9mOiBmdW5jdGlvbiBvZigpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgQSA9IEFycmF5KGxlbmd0aCk7XG4gICAgd2hpbGUgKGxlbmd0aC0tKSBBW2xlbmd0aF0gPSBhcmd1bWVudHNbbGVuZ3RoXTtcbiAgICByZXR1cm4gbmV3IHRoaXMoQSk7XG4gIH0gfSk7XG59O1xuXG59LHtcIjMzXCI6MzN9XSw5OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgY2hlY2sgPSBmdW5jdGlvbiAoTywgcHJvdG8pIHtcbiAgYW5PYmplY3QoTyk7XG4gIGlmICghaXNPYmplY3QocHJvdG8pICYmIHByb3RvICE9PSBudWxsKSB0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyBcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIik7XG59O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBmdW5jdGlvbiAodGVzdCwgYnVnZ3ksIHNldCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0ID0gX2RlcmVxXygyNSkoRnVuY3Rpb24uY2FsbCwgX2RlcmVxXyg3NSkuZihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTtcbiAgICAgICAgc2V0KHRlc3QsIFtdKTtcbiAgICAgICAgYnVnZ3kgPSAhKHRlc3QgaW5zdGFuY2VvZiBBcnJheSk7XG4gICAgICB9IGNhdGNoIChlKSB7IGJ1Z2d5ID0gdHJ1ZTsgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKSB7XG4gICAgICAgIGNoZWNrKE8sIHByb3RvKTtcbiAgICAgICAgaWYgKGJ1Z2d5KSBPLl9fcHJvdG9fXyA9IHByb3RvO1xuICAgICAgICBlbHNlIHNldChPLCBwcm90byk7XG4gICAgICAgIHJldHVybiBPO1xuICAgICAgfTtcbiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLFxuICBjaGVjazogY2hlY2tcbn07XG5cbn0se1wiMjVcIjoyNSxcIjUxXCI6NTEsXCI3XCI6NyxcIjc1XCI6NzV9XSwxMDA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIGRQID0gX2RlcmVxXyg3Mik7XG52YXIgREVTQ1JJUFRPUlMgPSBfZGVyZXFfKDI5KTtcbnZhciBTUEVDSUVTID0gX2RlcmVxXygxMjgpKCdzcGVjaWVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEtFWSkge1xuICB2YXIgQyA9IGdsb2JhbFtLRVldO1xuICBpZiAoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSkgZFAuZihDLCBTUEVDSUVTLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfVxuICB9KTtcbn07XG5cbn0se1wiMTI4XCI6MTI4LFwiMjlcIjoyOSxcIjQwXCI6NDAsXCI3MlwiOjcyfV0sMTAxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBkZWYgPSBfZGVyZXFfKDcyKS5mO1xudmFyIGhhcyA9IF9kZXJlcV8oNDEpO1xudmFyIFRBRyA9IF9kZXJlcV8oMTI4KSgndG9TdHJpbmdUYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIHRhZywgc3RhdCkge1xuICBpZiAoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSkgZGVmKGl0LCBUQUcsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGFnIH0pO1xufTtcblxufSx7XCIxMjhcIjoxMjgsXCI0MVwiOjQxLFwiNzJcIjo3Mn1dLDEwMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgc2hhcmVkID0gX2RlcmVxXygxMDMpKCdrZXlzJyk7XG52YXIgdWlkID0gX2RlcmVxXygxMjQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7XG59O1xuXG59LHtcIjEwM1wiOjEwMyxcIjEyNFwiOjEyNH1dLDEwMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgZ2xvYmFsID0gX2RlcmVxXyg0MCk7XG52YXIgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXyc7XG52YXIgc3RvcmUgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB7fSk7XG59O1xuXG59LHtcIjQwXCI6NDB9XSwxMDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpXG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG52YXIgU1BFQ0lFUyA9IF9kZXJlcV8oMTI4KSgnc3BlY2llcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywgRCkge1xuICB2YXIgQyA9IGFuT2JqZWN0KE8pLmNvbnN0cnVjdG9yO1xuICB2YXIgUztcbiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpO1xufTtcblxufSx7XCIxMjhcIjoxMjgsXCIzXCI6MyxcIjdcIjo3fV0sMTA1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBmYWlscyA9IF9kZXJlcV8oMzUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtZXRob2QsIGFyZykge1xuICByZXR1cm4gISFtZXRob2QgJiYgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWNhbGxcbiAgICBhcmcgPyBtZXRob2QuY2FsbChudWxsLCBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0sIDEpIDogbWV0aG9kLmNhbGwobnVsbCk7XG4gIH0pO1xufTtcblxufSx7XCIzNVwiOjM1fV0sMTA2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciB0b0ludGVnZXIgPSBfZGVyZXFfKDExNik7XG52YXIgZGVmaW5lZCA9IF9kZXJlcV8oMjgpO1xuLy8gdHJ1ZSAgLT4gU3RyaW5nI2F0XG4vLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXRcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFRPX1NUUklORykge1xuICByZXR1cm4gZnVuY3Rpb24gKHRoYXQsIHBvcykge1xuICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpO1xuICAgIHZhciBpID0gdG9JbnRlZ2VyKHBvcyk7XG4gICAgdmFyIGwgPSBzLmxlbmd0aDtcbiAgICB2YXIgYSwgYjtcbiAgICBpZiAoaSA8IDAgfHwgaSA+PSBsKSByZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7XG4gICAgYSA9IHMuY2hhckNvZGVBdChpKTtcbiAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZlxuICAgICAgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGFcbiAgICAgIDogVE9fU1RSSU5HID8gcy5zbGljZShpLCBpICsgMikgOiAoYSAtIDB4ZDgwMCA8PCAxMCkgKyAoYiAtIDB4ZGMwMCkgKyAweDEwMDAwO1xuICB9O1xufTtcblxufSx7XCIxMTZcIjoxMTYsXCIyOFwiOjI4fV0sMTA3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGhlbHBlciBmb3IgU3RyaW5nI3tzdGFydHNXaXRoLCBlbmRzV2l0aCwgaW5jbHVkZXN9XG52YXIgaXNSZWdFeHAgPSBfZGVyZXFfKDUyKTtcbnZhciBkZWZpbmVkID0gX2RlcmVxXygyOCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRoYXQsIHNlYXJjaFN0cmluZywgTkFNRSkge1xuICBpZiAoaXNSZWdFeHAoc2VhcmNoU3RyaW5nKSkgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmcjJyArIE5BTUUgKyBcIiBkb2Vzbid0IGFjY2VwdCByZWdleCFcIik7XG4gIHJldHVybiBTdHJpbmcoZGVmaW5lZCh0aGF0KSk7XG59O1xuXG59LHtcIjI4XCI6MjgsXCI1MlwiOjUyfV0sMTA4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciBkZWZpbmVkID0gX2RlcmVxXygyOCk7XG52YXIgcXVvdCA9IC9cIi9nO1xuLy8gQi4yLjMuMi4xIENyZWF0ZUhUTUwoc3RyaW5nLCB0YWcsIGF0dHJpYnV0ZSwgdmFsdWUpXG52YXIgY3JlYXRlSFRNTCA9IGZ1bmN0aW9uIChzdHJpbmcsIHRhZywgYXR0cmlidXRlLCB2YWx1ZSkge1xuICB2YXIgUyA9IFN0cmluZyhkZWZpbmVkKHN0cmluZykpO1xuICB2YXIgcDEgPSAnPCcgKyB0YWc7XG4gIGlmIChhdHRyaWJ1dGUgIT09ICcnKSBwMSArPSAnICcgKyBhdHRyaWJ1dGUgKyAnPVwiJyArIFN0cmluZyh2YWx1ZSkucmVwbGFjZShxdW90LCAnJnF1b3Q7JykgKyAnXCInO1xuICByZXR1cm4gcDEgKyAnPicgKyBTICsgJzwvJyArIHRhZyArICc+Jztcbn07XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChOQU1FLCBleGVjKSB7XG4gIHZhciBPID0ge307XG4gIE9bTkFNRV0gPSBleGVjKGNyZWF0ZUhUTUwpO1xuICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGVzdCA9ICcnW05BTUVdKCdcIicpO1xuICAgIHJldHVybiB0ZXN0ICE9PSB0ZXN0LnRvTG93ZXJDYXNlKCkgfHwgdGVzdC5zcGxpdCgnXCInKS5sZW5ndGggPiAzO1xuICB9KSwgJ1N0cmluZycsIE8pO1xufTtcblxufSx7XCIyOFwiOjI4LFwiMzNcIjozMyxcIjM1XCI6MzV9XSwxMDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbnZhciByZXBlYXQgPSBfZGVyZXFfKDExMCk7XG52YXIgZGVmaW5lZCA9IF9kZXJlcV8oMjgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aGF0LCBtYXhMZW5ndGgsIGZpbGxTdHJpbmcsIGxlZnQpIHtcbiAgdmFyIFMgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSk7XG4gIHZhciBzdHJpbmdMZW5ndGggPSBTLmxlbmd0aDtcbiAgdmFyIGZpbGxTdHIgPSBmaWxsU3RyaW5nID09PSB1bmRlZmluZWQgPyAnICcgOiBTdHJpbmcoZmlsbFN0cmluZyk7XG4gIHZhciBpbnRNYXhMZW5ndGggPSB0b0xlbmd0aChtYXhMZW5ndGgpO1xuICBpZiAoaW50TWF4TGVuZ3RoIDw9IHN0cmluZ0xlbmd0aCB8fCBmaWxsU3RyID09ICcnKSByZXR1cm4gUztcbiAgdmFyIGZpbGxMZW4gPSBpbnRNYXhMZW5ndGggLSBzdHJpbmdMZW5ndGg7XG4gIHZhciBzdHJpbmdGaWxsZXIgPSByZXBlYXQuY2FsbChmaWxsU3RyLCBNYXRoLmNlaWwoZmlsbExlbiAvIGZpbGxTdHIubGVuZ3RoKSk7XG4gIGlmIChzdHJpbmdGaWxsZXIubGVuZ3RoID4gZmlsbExlbikgc3RyaW5nRmlsbGVyID0gc3RyaW5nRmlsbGVyLnNsaWNlKDAsIGZpbGxMZW4pO1xuICByZXR1cm4gbGVmdCA/IHN0cmluZ0ZpbGxlciArIFMgOiBTICsgc3RyaW5nRmlsbGVyO1xufTtcblxufSx7XCIxMTBcIjoxMTAsXCIxMThcIjoxMTgsXCIyOFwiOjI4fV0sMTEwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciB0b0ludGVnZXIgPSBfZGVyZXFfKDExNik7XG52YXIgZGVmaW5lZCA9IF9kZXJlcV8oMjgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcGVhdChjb3VudCkge1xuICB2YXIgc3RyID0gU3RyaW5nKGRlZmluZWQodGhpcykpO1xuICB2YXIgcmVzID0gJyc7XG4gIHZhciBuID0gdG9JbnRlZ2VyKGNvdW50KTtcbiAgaWYgKG4gPCAwIHx8IG4gPT0gSW5maW5pdHkpIHRocm93IFJhbmdlRXJyb3IoXCJDb3VudCBjYW4ndCBiZSBuZWdhdGl2ZVwiKTtcbiAgZm9yICg7biA+IDA7IChuID4+Pj0gMSkgJiYgKHN0ciArPSBzdHIpKSBpZiAobiAmIDEpIHJlcyArPSBzdHI7XG4gIHJldHVybiByZXM7XG59O1xuXG59LHtcIjExNlwiOjExNixcIjI4XCI6Mjh9XSwxMTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBkZWZpbmVkID0gX2RlcmVxXygyOCk7XG52YXIgZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciBzcGFjZXMgPSBfZGVyZXFfKDExMik7XG52YXIgc3BhY2UgPSAnWycgKyBzcGFjZXMgKyAnXSc7XG52YXIgbm9uID0gJ1xcdTIwMGJcXHUwMDg1JztcbnZhciBsdHJpbSA9IFJlZ0V4cCgnXicgKyBzcGFjZSArIHNwYWNlICsgJyonKTtcbnZhciBydHJpbSA9IFJlZ0V4cChzcGFjZSArIHNwYWNlICsgJyokJyk7XG5cbnZhciBleHBvcnRlciA9IGZ1bmN0aW9uIChLRVksIGV4ZWMsIEFMSUFTKSB7XG4gIHZhciBleHAgPSB7fTtcbiAgdmFyIEZPUkNFID0gZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIXNwYWNlc1tLRVldKCkgfHwgbm9uW0tFWV0oKSAhPSBub247XG4gIH0pO1xuICB2YXIgZm4gPSBleHBbS0VZXSA9IEZPUkNFID8gZXhlYyh0cmltKSA6IHNwYWNlc1tLRVldO1xuICBpZiAoQUxJQVMpIGV4cFtBTElBU10gPSBmbjtcbiAgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBGT1JDRSwgJ1N0cmluZycsIGV4cCk7XG59O1xuXG4vLyAxIC0+IFN0cmluZyN0cmltTGVmdFxuLy8gMiAtPiBTdHJpbmcjdHJpbVJpZ2h0XG4vLyAzIC0+IFN0cmluZyN0cmltXG52YXIgdHJpbSA9IGV4cG9ydGVyLnRyaW0gPSBmdW5jdGlvbiAoc3RyaW5nLCBUWVBFKSB7XG4gIHN0cmluZyA9IFN0cmluZyhkZWZpbmVkKHN0cmluZykpO1xuICBpZiAoVFlQRSAmIDEpIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKGx0cmltLCAnJyk7XG4gIGlmIChUWVBFICYgMikgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocnRyaW0sICcnKTtcbiAgcmV0dXJuIHN0cmluZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0ZXI7XG5cbn0se1wiMTEyXCI6MTEyLFwiMjhcIjoyOCxcIjMzXCI6MzMsXCIzNVwiOjM1fV0sMTEyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gJ1xceDA5XFx4MEFcXHgwQlxceDBDXFx4MERcXHgyMFxceEEwXFx1MTY4MFxcdTE4MEVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzJyArXG4gICdcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXFx1MjAyOFxcdTIwMjlcXHVGRUZGJztcblxufSx7fV0sMTEzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBjdHggPSBfZGVyZXFfKDI1KTtcbnZhciBpbnZva2UgPSBfZGVyZXFfKDQ2KTtcbnZhciBodG1sID0gX2RlcmVxXyg0Myk7XG52YXIgY2VsID0gX2RlcmVxXygzMCk7XG52YXIgZ2xvYmFsID0gX2RlcmVxXyg0MCk7XG52YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzO1xudmFyIHNldFRhc2sgPSBnbG9iYWwuc2V0SW1tZWRpYXRlO1xudmFyIGNsZWFyVGFzayA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZTtcbnZhciBNZXNzYWdlQ2hhbm5lbCA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbDtcbnZhciBEaXNwYXRjaCA9IGdsb2JhbC5EaXNwYXRjaDtcbnZhciBjb3VudGVyID0gMDtcbnZhciBxdWV1ZSA9IHt9O1xudmFyIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xudmFyIGRlZmVyLCBjaGFubmVsLCBwb3J0O1xudmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGlkID0gK3RoaXM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgaWYgKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgIHZhciBmbiA9IHF1ZXVlW2lkXTtcbiAgICBkZWxldGUgcXVldWVbaWRdO1xuICAgIGZuKCk7XG4gIH1cbn07XG52YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7XG59O1xuLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOlxuaWYgKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spIHtcbiAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbikge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgdmFyIGkgPSAxO1xuICAgIHdoaWxlIChhcmd1bWVudHMubGVuZ3RoID4gaSkgYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTtcbiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gICAgICBpbnZva2UodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSwgYXJncyk7XG4gICAgfTtcbiAgICBkZWZlcihjb3VudGVyKTtcbiAgICByZXR1cm4gY291bnRlcjtcbiAgfTtcbiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpIHtcbiAgICBkZWxldGUgcXVldWVbaWRdO1xuICB9O1xuICAvLyBOb2RlLmpzIDAuOC1cbiAgaWYgKF9kZXJlcV8oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJykge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7XG4gICAgfTtcbiAgLy8gU3BoZXJlIChKUyBnYW1lIGVuZ2luZSkgRGlzcGF0Y2ggQVBJXG4gIH0gZWxzZSBpZiAoRGlzcGF0Y2ggJiYgRGlzcGF0Y2gubm93KSB7XG4gICAgZGVmZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIERpc3BhdGNoLm5vdyhjdHgocnVuLCBpZCwgMSkpO1xuICAgIH07XG4gIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnNcbiAgfSBlbHNlIGlmIChNZXNzYWdlQ2hhbm5lbCkge1xuICAgIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICBwb3J0ID0gY2hhbm5lbC5wb3J0MjtcbiAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpc3RlbmVyO1xuICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpO1xuICAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnNcbiAgLy8gSUU4IGhhcyBwb3N0TWVzc2FnZSwgYnV0IGl0J3Mgc3luYyAmIHR5cGVvZiBpdHMgcG9zdE1lc3NhZ2UgaXMgJ29iamVjdCdcbiAgfSBlbHNlIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJyAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICBkZWZlciA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7XG4gICAgfTtcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RlbmVyLCBmYWxzZSk7XG4gIC8vIElFOC1cbiAgfSBlbHNlIGlmIChPTlJFQURZU1RBVEVDSEFOR0UgaW4gY2VsKCdzY3JpcHQnKSkge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgIHJ1bi5jYWxsKGlkKTtcbiAgICAgIH07XG4gICAgfTtcbiAgLy8gUmVzdCBvbGQgYnJvd3NlcnNcbiAgfSBlbHNlIHtcbiAgICBkZWZlciA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApO1xuICAgIH07XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IHNldFRhc2ssXG4gIGNsZWFyOiBjbGVhclRhc2tcbn07XG5cbn0se1wiMThcIjoxOCxcIjI1XCI6MjUsXCIzMFwiOjMwLFwiNDBcIjo0MCxcIjQzXCI6NDMsXCI0NlwiOjQ2fV0sMTE0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciB0b0ludGVnZXIgPSBfZGVyZXFfKDExNik7XG52YXIgbWF4ID0gTWF0aC5tYXg7XG52YXIgbWluID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbmRleCwgbGVuZ3RoKSB7XG4gIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTtcbiAgcmV0dXJuIGluZGV4IDwgMCA/IG1heChpbmRleCArIGxlbmd0aCwgMCkgOiBtaW4oaW5kZXgsIGxlbmd0aCk7XG59O1xuXG59LHtcIjExNlwiOjExNn1dLDExNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10b2luZGV4XG52YXIgdG9JbnRlZ2VyID0gX2RlcmVxXygxMTYpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKGl0ID09PSB1bmRlZmluZWQpIHJldHVybiAwO1xuICB2YXIgbnVtYmVyID0gdG9JbnRlZ2VyKGl0KTtcbiAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKG51bWJlcik7XG4gIGlmIChudW1iZXIgIT09IGxlbmd0aCkgdGhyb3cgUmFuZ2VFcnJvcignV3JvbmcgbGVuZ3RoIScpO1xuICByZXR1cm4gbGVuZ3RoO1xufTtcblxufSx7XCIxMTZcIjoxMTYsXCIxMThcIjoxMTh9XSwxMTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gNy4xLjQgVG9JbnRlZ2VyXG52YXIgY2VpbCA9IE1hdGguY2VpbDtcbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcbn07XG5cbn0se31dLDExNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3NcbnZhciBJT2JqZWN0ID0gX2RlcmVxXyg0Nyk7XG52YXIgZGVmaW5lZCA9IF9kZXJlcV8oMjgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcblxufSx7XCIyOFwiOjI4LFwiNDdcIjo0N31dLDExODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyA3LjEuMTUgVG9MZW5ndGhcbnZhciB0b0ludGVnZXIgPSBfZGVyZXFfKDExNik7XG52YXIgbWluID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MVxufTtcblxufSx7XCIxMTZcIjoxMTZ9XSwxMTk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxudmFyIGRlZmluZWQgPSBfZGVyZXFfKDI4KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcblxufSx7XCIyOFwiOjI4fV0sMTIwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKVxudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxuLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCBTKSB7XG4gIGlmICghaXNPYmplY3QoaXQpKSByZXR1cm4gaXQ7XG4gIHZhciBmbiwgdmFsO1xuICBpZiAoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgcmV0dXJuIHZhbDtcbiAgaWYgKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7XG4gIGlmICghUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgcmV0dXJuIHZhbDtcbiAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xufTtcblxufSx7XCI1MVwiOjUxfV0sMTIxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbmlmIChfZGVyZXFfKDI5KSkge1xuICB2YXIgTElCUkFSWSA9IF9kZXJlcV8oNjApO1xuICB2YXIgZ2xvYmFsID0gX2RlcmVxXyg0MCk7XG4gIHZhciBmYWlscyA9IF9kZXJlcV8oMzUpO1xuICB2YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuICB2YXIgJHR5cGVkID0gX2RlcmVxXygxMjMpO1xuICB2YXIgJGJ1ZmZlciA9IF9kZXJlcV8oMTIyKTtcbiAgdmFyIGN0eCA9IF9kZXJlcV8oMjUpO1xuICB2YXIgYW5JbnN0YW5jZSA9IF9kZXJlcV8oNik7XG4gIHZhciBwcm9wZXJ0eURlc2MgPSBfZGVyZXFfKDkyKTtcbiAgdmFyIGhpZGUgPSBfZGVyZXFfKDQyKTtcbiAgdmFyIHJlZGVmaW5lQWxsID0gX2RlcmVxXyg5Myk7XG4gIHZhciB0b0ludGVnZXIgPSBfZGVyZXFfKDExNik7XG4gIHZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbiAgdmFyIHRvSW5kZXggPSBfZGVyZXFfKDExNSk7XG4gIHZhciB0b0Fic29sdXRlSW5kZXggPSBfZGVyZXFfKDExNCk7XG4gIHZhciB0b1ByaW1pdGl2ZSA9IF9kZXJlcV8oMTIwKTtcbiAgdmFyIGhhcyA9IF9kZXJlcV8oNDEpO1xuICB2YXIgY2xhc3NvZiA9IF9kZXJlcV8oMTcpO1xuICB2YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbiAgdmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xuICB2YXIgaXNBcnJheUl0ZXIgPSBfZGVyZXFfKDQ4KTtcbiAgdmFyIGNyZWF0ZSA9IF9kZXJlcV8oNzEpO1xuICB2YXIgZ2V0UHJvdG90eXBlT2YgPSBfZGVyZXFfKDc5KTtcbiAgdmFyIGdPUE4gPSBfZGVyZXFfKDc3KS5mO1xuICB2YXIgZ2V0SXRlckZuID0gX2RlcmVxXygxMjkpO1xuICB2YXIgdWlkID0gX2RlcmVxXygxMjQpO1xuICB2YXIgd2tzID0gX2RlcmVxXygxMjgpO1xuICB2YXIgY3JlYXRlQXJyYXlNZXRob2QgPSBfZGVyZXFfKDEyKTtcbiAgdmFyIGNyZWF0ZUFycmF5SW5jbHVkZXMgPSBfZGVyZXFfKDExKTtcbiAgdmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9kZXJlcV8oMTA0KTtcbiAgdmFyIEFycmF5SXRlcmF0b3JzID0gX2RlcmVxXygxNDEpO1xuICB2YXIgSXRlcmF0b3JzID0gX2RlcmVxXyg1OCk7XG4gIHZhciAkaXRlckRldGVjdCA9IF9kZXJlcV8oNTYpO1xuICB2YXIgc2V0U3BlY2llcyA9IF9kZXJlcV8oMTAwKTtcbiAgdmFyIGFycmF5RmlsbCA9IF9kZXJlcV8oOSk7XG4gIHZhciBhcnJheUNvcHlXaXRoaW4gPSBfZGVyZXFfKDgpO1xuICB2YXIgJERQID0gX2RlcmVxXyg3Mik7XG4gIHZhciAkR09QRCA9IF9kZXJlcV8oNzUpO1xuICB2YXIgZFAgPSAkRFAuZjtcbiAgdmFyIGdPUEQgPSAkR09QRC5mO1xuICB2YXIgUmFuZ2VFcnJvciA9IGdsb2JhbC5SYW5nZUVycm9yO1xuICB2YXIgVHlwZUVycm9yID0gZ2xvYmFsLlR5cGVFcnJvcjtcbiAgdmFyIFVpbnQ4QXJyYXkgPSBnbG9iYWwuVWludDhBcnJheTtcbiAgdmFyIEFSUkFZX0JVRkZFUiA9ICdBcnJheUJ1ZmZlcic7XG4gIHZhciBTSEFSRURfQlVGRkVSID0gJ1NoYXJlZCcgKyBBUlJBWV9CVUZGRVI7XG4gIHZhciBCWVRFU19QRVJfRUxFTUVOVCA9ICdCWVRFU19QRVJfRUxFTUVOVCc7XG4gIHZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcbiAgdmFyIEFycmF5UHJvdG8gPSBBcnJheVtQUk9UT1RZUEVdO1xuICB2YXIgJEFycmF5QnVmZmVyID0gJGJ1ZmZlci5BcnJheUJ1ZmZlcjtcbiAgdmFyICREYXRhVmlldyA9ICRidWZmZXIuRGF0YVZpZXc7XG4gIHZhciBhcnJheUZvckVhY2ggPSBjcmVhdGVBcnJheU1ldGhvZCgwKTtcbiAgdmFyIGFycmF5RmlsdGVyID0gY3JlYXRlQXJyYXlNZXRob2QoMik7XG4gIHZhciBhcnJheVNvbWUgPSBjcmVhdGVBcnJheU1ldGhvZCgzKTtcbiAgdmFyIGFycmF5RXZlcnkgPSBjcmVhdGVBcnJheU1ldGhvZCg0KTtcbiAgdmFyIGFycmF5RmluZCA9IGNyZWF0ZUFycmF5TWV0aG9kKDUpO1xuICB2YXIgYXJyYXlGaW5kSW5kZXggPSBjcmVhdGVBcnJheU1ldGhvZCg2KTtcbiAgdmFyIGFycmF5SW5jbHVkZXMgPSBjcmVhdGVBcnJheUluY2x1ZGVzKHRydWUpO1xuICB2YXIgYXJyYXlJbmRleE9mID0gY3JlYXRlQXJyYXlJbmNsdWRlcyhmYWxzZSk7XG4gIHZhciBhcnJheVZhbHVlcyA9IEFycmF5SXRlcmF0b3JzLnZhbHVlcztcbiAgdmFyIGFycmF5S2V5cyA9IEFycmF5SXRlcmF0b3JzLmtleXM7XG4gIHZhciBhcnJheUVudHJpZXMgPSBBcnJheUl0ZXJhdG9ycy5lbnRyaWVzO1xuICB2YXIgYXJyYXlMYXN0SW5kZXhPZiA9IEFycmF5UHJvdG8ubGFzdEluZGV4T2Y7XG4gIHZhciBhcnJheVJlZHVjZSA9IEFycmF5UHJvdG8ucmVkdWNlO1xuICB2YXIgYXJyYXlSZWR1Y2VSaWdodCA9IEFycmF5UHJvdG8ucmVkdWNlUmlnaHQ7XG4gIHZhciBhcnJheUpvaW4gPSBBcnJheVByb3RvLmpvaW47XG4gIHZhciBhcnJheVNvcnQgPSBBcnJheVByb3RvLnNvcnQ7XG4gIHZhciBhcnJheVNsaWNlID0gQXJyYXlQcm90by5zbGljZTtcbiAgdmFyIGFycmF5VG9TdHJpbmcgPSBBcnJheVByb3RvLnRvU3RyaW5nO1xuICB2YXIgYXJyYXlUb0xvY2FsZVN0cmluZyA9IEFycmF5UHJvdG8udG9Mb2NhbGVTdHJpbmc7XG4gIHZhciBJVEVSQVRPUiA9IHdrcygnaXRlcmF0b3InKTtcbiAgdmFyIFRBRyA9IHdrcygndG9TdHJpbmdUYWcnKTtcbiAgdmFyIFRZUEVEX0NPTlNUUlVDVE9SID0gdWlkKCd0eXBlZF9jb25zdHJ1Y3RvcicpO1xuICB2YXIgREVGX0NPTlNUUlVDVE9SID0gdWlkKCdkZWZfY29uc3RydWN0b3InKTtcbiAgdmFyIEFMTF9DT05TVFJVQ1RPUlMgPSAkdHlwZWQuQ09OU1RSO1xuICB2YXIgVFlQRURfQVJSQVkgPSAkdHlwZWQuVFlQRUQ7XG4gIHZhciBWSUVXID0gJHR5cGVkLlZJRVc7XG4gIHZhciBXUk9OR19MRU5HVEggPSAnV3JvbmcgbGVuZ3RoISc7XG5cbiAgdmFyICRtYXAgPSBjcmVhdGVBcnJheU1ldGhvZCgxLCBmdW5jdGlvbiAoTywgbGVuZ3RoKSB7XG4gICAgcmV0dXJuIGFsbG9jYXRlKHNwZWNpZXNDb25zdHJ1Y3RvcihPLCBPW0RFRl9DT05TVFJVQ1RPUl0pLCBsZW5ndGgpO1xuICB9KTtcblxuICB2YXIgTElUVExFX0VORElBTiA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkobmV3IFVpbnQxNkFycmF5KFsxXSkuYnVmZmVyKVswXSA9PT0gMTtcbiAgfSk7XG5cbiAgdmFyIEZPUkNFRF9TRVQgPSAhIVVpbnQ4QXJyYXkgJiYgISFVaW50OEFycmF5W1BST1RPVFlQRV0uc2V0ICYmIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICBuZXcgVWludDhBcnJheSgxKS5zZXQoe30pO1xuICB9KTtcblxuICB2YXIgdG9PZmZzZXQgPSBmdW5jdGlvbiAoaXQsIEJZVEVTKSB7XG4gICAgdmFyIG9mZnNldCA9IHRvSW50ZWdlcihpdCk7XG4gICAgaWYgKG9mZnNldCA8IDAgfHwgb2Zmc2V0ICUgQllURVMpIHRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCEnKTtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9O1xuXG4gIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uIChpdCkge1xuICAgIGlmIChpc09iamVjdChpdCkgJiYgVFlQRURfQVJSQVkgaW4gaXQpIHJldHVybiBpdDtcbiAgICB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIHR5cGVkIGFycmF5IScpO1xuICB9O1xuXG4gIHZhciBhbGxvY2F0ZSA9IGZ1bmN0aW9uIChDLCBsZW5ndGgpIHtcbiAgICBpZiAoIShpc09iamVjdChDKSAmJiBUWVBFRF9DT05TVFJVQ1RPUiBpbiBDKSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdJdCBpcyBub3QgYSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvciEnKTtcbiAgICB9IHJldHVybiBuZXcgQyhsZW5ndGgpO1xuICB9O1xuXG4gIHZhciBzcGVjaWVzRnJvbUxpc3QgPSBmdW5jdGlvbiAoTywgbGlzdCkge1xuICAgIHJldHVybiBmcm9tTGlzdChzcGVjaWVzQ29uc3RydWN0b3IoTywgT1tERUZfQ09OU1RSVUNUT1JdKSwgbGlzdCk7XG4gIH07XG5cbiAgdmFyIGZyb21MaXN0ID0gZnVuY3Rpb24gKEMsIGxpc3QpIHtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgICB2YXIgcmVzdWx0ID0gYWxsb2NhdGUoQywgbGVuZ3RoKTtcbiAgICB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIHJlc3VsdFtpbmRleF0gPSBsaXN0W2luZGV4KytdO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIGFkZEdldHRlciA9IGZ1bmN0aW9uIChpdCwga2V5LCBpbnRlcm5hbCkge1xuICAgIGRQKGl0LCBrZXksIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kW2ludGVybmFsXTsgfSB9KTtcbiAgfTtcblxuICB2YXIgJGZyb20gPSBmdW5jdGlvbiBmcm9tKHNvdXJjZSAvKiAsIG1hcGZuLCB0aGlzQXJnICovKSB7XG4gICAgdmFyIE8gPSB0b09iamVjdChzb3VyY2UpO1xuICAgIHZhciBhTGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgbWFwZm4gPSBhTGVuID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIGl0ZXJGbiA9IGdldEl0ZXJGbihPKTtcbiAgICB2YXIgaSwgbGVuZ3RoLCB2YWx1ZXMsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7XG4gICAgaWYgKGl0ZXJGbiAhPSB1bmRlZmluZWQgJiYgIWlzQXJyYXlJdGVyKGl0ZXJGbikpIHtcbiAgICAgIGZvciAoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChPKSwgdmFsdWVzID0gW10sIGkgPSAwOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7IGkrKykge1xuICAgICAgICB2YWx1ZXMucHVzaChzdGVwLnZhbHVlKTtcbiAgICAgIH0gTyA9IHZhbHVlcztcbiAgICB9XG4gICAgaWYgKG1hcHBpbmcgJiYgYUxlbiA+IDIpIG1hcGZuID0gY3R4KG1hcGZuLCBhcmd1bWVudHNbMl0sIDIpO1xuICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKSwgcmVzdWx0ID0gYWxsb2NhdGUodGhpcywgbGVuZ3RoKTsgbGVuZ3RoID4gaTsgaSsrKSB7XG4gICAgICByZXN1bHRbaV0gPSBtYXBwaW5nID8gbWFwZm4oT1tpXSwgaSkgOiBPW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciAkb2YgPSBmdW5jdGlvbiBvZigvKiAuLi5pdGVtcyAqLykge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdmFyIHJlc3VsdCA9IGFsbG9jYXRlKHRoaXMsIGxlbmd0aCk7XG4gICAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSByZXN1bHRbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4KytdO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gaU9TIFNhZmFyaSA2LnggZmFpbHMgaGVyZVxuICB2YXIgVE9fTE9DQUxFX0JVRyA9ICEhVWludDhBcnJheSAmJiBmYWlscyhmdW5jdGlvbiAoKSB7IGFycmF5VG9Mb2NhbGVTdHJpbmcuY2FsbChuZXcgVWludDhBcnJheSgxKSk7IH0pO1xuXG4gIHZhciAkdG9Mb2NhbGVTdHJpbmcgPSBmdW5jdGlvbiB0b0xvY2FsZVN0cmluZygpIHtcbiAgICByZXR1cm4gYXJyYXlUb0xvY2FsZVN0cmluZy5hcHBseShUT19MT0NBTEVfQlVHID8gYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpKSA6IHZhbGlkYXRlKHRoaXMpLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIHZhciBwcm90byA9IHtcbiAgICBjb3B5V2l0aGluOiBmdW5jdGlvbiBjb3B5V2l0aGluKHRhcmdldCwgc3RhcnQgLyogLCBlbmQgKi8pIHtcbiAgICAgIHJldHVybiBhcnJheUNvcHlXaXRoaW4uY2FsbCh2YWxpZGF0ZSh0aGlzKSwgdGFyZ2V0LCBzdGFydCwgYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgZXZlcnk6IGZ1bmN0aW9uIGV2ZXJ5KGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKSB7XG4gICAgICByZXR1cm4gYXJyYXlFdmVyeSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgZmlsbDogZnVuY3Rpb24gZmlsbCh2YWx1ZSAvKiAsIHN0YXJ0LCBlbmQgKi8pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgcmV0dXJuIGFycmF5RmlsbC5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKSB7XG4gICAgICByZXR1cm4gc3BlY2llc0Zyb21MaXN0KHRoaXMsIGFycmF5RmlsdGVyKHZhbGlkYXRlKHRoaXMpLCBjYWxsYmFja2ZuLFxuICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCkpO1xuICAgIH0sXG4gICAgZmluZDogZnVuY3Rpb24gZmluZChwcmVkaWNhdGUgLyogLCB0aGlzQXJnICovKSB7XG4gICAgICByZXR1cm4gYXJyYXlGaW5kKHZhbGlkYXRlKHRoaXMpLCBwcmVkaWNhdGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIGZpbmRJbmRleDogZnVuY3Rpb24gZmluZEluZGV4KHByZWRpY2F0ZSAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICAgIHJldHVybiBhcnJheUZpbmRJbmRleCh2YWxpZGF0ZSh0aGlzKSwgcHJlZGljYXRlLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKSB7XG4gICAgICBhcnJheUZvckVhY2godmFsaWRhdGUodGhpcyksIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIGluZGV4T2Y6IGZ1bmN0aW9uIGluZGV4T2Yoc2VhcmNoRWxlbWVudCAvKiAsIGZyb21JbmRleCAqLykge1xuICAgICAgcmV0dXJuIGFycmF5SW5kZXhPZih2YWxpZGF0ZSh0aGlzKSwgc2VhcmNoRWxlbWVudCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgaW5jbHVkZXM6IGZ1bmN0aW9uIGluY2x1ZGVzKHNlYXJjaEVsZW1lbnQgLyogLCBmcm9tSW5kZXggKi8pIHtcbiAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBqb2luOiBmdW5jdGlvbiBqb2luKHNlcGFyYXRvcikgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICByZXR1cm4gYXJyYXlKb2luLmFwcGx5KHZhbGlkYXRlKHRoaXMpLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgbGFzdEluZGV4T2Y6IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgLyogLCBmcm9tSW5kZXggKi8pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgcmV0dXJuIGFycmF5TGFzdEluZGV4T2YuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBtYXA6IGZ1bmN0aW9uIG1hcChtYXBmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICAgIHJldHVybiAkbWFwKHZhbGlkYXRlKHRoaXMpLCBtYXBmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgcmVkdWNlOiBmdW5jdGlvbiByZWR1Y2UoY2FsbGJhY2tmbiAvKiAsIGluaXRpYWxWYWx1ZSAqLykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICByZXR1cm4gYXJyYXlSZWR1Y2UuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICByZWR1Y2VSaWdodDogZnVuY3Rpb24gcmVkdWNlUmlnaHQoY2FsbGJhY2tmbiAvKiAsIGluaXRpYWxWYWx1ZSAqLykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICByZXR1cm4gYXJyYXlSZWR1Y2VSaWdodC5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHJldmVyc2U6IGZ1bmN0aW9uIHJldmVyc2UoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgbGVuZ3RoID0gdmFsaWRhdGUodGhhdCkubGVuZ3RoO1xuICAgICAgdmFyIG1pZGRsZSA9IE1hdGguZmxvb3IobGVuZ3RoIC8gMik7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgdmFyIHZhbHVlO1xuICAgICAgd2hpbGUgKGluZGV4IDwgbWlkZGxlKSB7XG4gICAgICAgIHZhbHVlID0gdGhhdFtpbmRleF07XG4gICAgICAgIHRoYXRbaW5kZXgrK10gPSB0aGF0Wy0tbGVuZ3RoXTtcbiAgICAgICAgdGhhdFtsZW5ndGhdID0gdmFsdWU7XG4gICAgICB9IHJldHVybiB0aGF0O1xuICAgIH0sXG4gICAgc29tZTogZnVuY3Rpb24gc29tZShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLykge1xuICAgICAgcmV0dXJuIGFycmF5U29tZSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgc29ydDogZnVuY3Rpb24gc29ydChjb21wYXJlZm4pIHtcbiAgICAgIHJldHVybiBhcnJheVNvcnQuY2FsbCh2YWxpZGF0ZSh0aGlzKSwgY29tcGFyZWZuKTtcbiAgICB9LFxuICAgIHN1YmFycmF5OiBmdW5jdGlvbiBzdWJhcnJheShiZWdpbiwgZW5kKSB7XG4gICAgICB2YXIgTyA9IHZhbGlkYXRlKHRoaXMpO1xuICAgICAgdmFyIGxlbmd0aCA9IE8ubGVuZ3RoO1xuICAgICAgdmFyICRiZWdpbiA9IHRvQWJzb2x1dGVJbmRleChiZWdpbiwgbGVuZ3RoKTtcbiAgICAgIHJldHVybiBuZXcgKHNwZWNpZXNDb25zdHJ1Y3RvcihPLCBPW0RFRl9DT05TVFJVQ1RPUl0pKShcbiAgICAgICAgTy5idWZmZXIsXG4gICAgICAgIE8uYnl0ZU9mZnNldCArICRiZWdpbiAqIE8uQllURVNfUEVSX0VMRU1FTlQsXG4gICAgICAgIHRvTGVuZ3RoKChlbmQgPT09IHVuZGVmaW5lZCA/IGxlbmd0aCA6IHRvQWJzb2x1dGVJbmRleChlbmQsIGxlbmd0aCkpIC0gJGJlZ2luKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyICRzbGljZSA9IGZ1bmN0aW9uIHNsaWNlKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gc3BlY2llc0Zyb21MaXN0KHRoaXMsIGFycmF5U2xpY2UuY2FsbCh2YWxpZGF0ZSh0aGlzKSwgc3RhcnQsIGVuZCkpO1xuICB9O1xuXG4gIHZhciAkc2V0ID0gZnVuY3Rpb24gc2V0KGFycmF5TGlrZSAvKiAsIG9mZnNldCAqLykge1xuICAgIHZhbGlkYXRlKHRoaXMpO1xuICAgIHZhciBvZmZzZXQgPSB0b09mZnNldChhcmd1bWVudHNbMV0sIDEpO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICB2YXIgc3JjID0gdG9PYmplY3QoYXJyYXlMaWtlKTtcbiAgICB2YXIgbGVuID0gdG9MZW5ndGgoc3JjLmxlbmd0aCk7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICBpZiAobGVuICsgb2Zmc2V0ID4gbGVuZ3RoKSB0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7XG4gICAgd2hpbGUgKGluZGV4IDwgbGVuKSB0aGlzW29mZnNldCArIGluZGV4XSA9IHNyY1tpbmRleCsrXTtcbiAgfTtcblxuICB2YXIgJGl0ZXJhdG9ycyA9IHtcbiAgICBlbnRyaWVzOiBmdW5jdGlvbiBlbnRyaWVzKCkge1xuICAgICAgcmV0dXJuIGFycmF5RW50cmllcy5jYWxsKHZhbGlkYXRlKHRoaXMpKTtcbiAgICB9LFxuICAgIGtleXM6IGZ1bmN0aW9uIGtleXMoKSB7XG4gICAgICByZXR1cm4gYXJyYXlLZXlzLmNhbGwodmFsaWRhdGUodGhpcykpO1xuICAgIH0sXG4gICAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoKSB7XG4gICAgICByZXR1cm4gYXJyYXlWYWx1ZXMuY2FsbCh2YWxpZGF0ZSh0aGlzKSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpc1RBSW5kZXggPSBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICByZXR1cm4gaXNPYmplY3QodGFyZ2V0KVxuICAgICAgJiYgdGFyZ2V0W1RZUEVEX0FSUkFZXVxuICAgICAgJiYgdHlwZW9mIGtleSAhPSAnc3ltYm9sJ1xuICAgICAgJiYga2V5IGluIHRhcmdldFxuICAgICAgJiYgU3RyaW5nKCtrZXkpID09IFN0cmluZyhrZXkpO1xuICB9O1xuICB2YXIgJGdldERlc2MgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIHtcbiAgICByZXR1cm4gaXNUQUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSlcbiAgICAgID8gcHJvcGVydHlEZXNjKDIsIHRhcmdldFtrZXldKVxuICAgICAgOiBnT1BEKHRhcmdldCwga2V5KTtcbiAgfTtcbiAgdmFyICRzZXREZXNjID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICBpZiAoaXNUQUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSlcbiAgICAgICYmIGlzT2JqZWN0KGRlc2MpXG4gICAgICAmJiBoYXMoZGVzYywgJ3ZhbHVlJylcbiAgICAgICYmICFoYXMoZGVzYywgJ2dldCcpXG4gICAgICAmJiAhaGFzKGRlc2MsICdzZXQnKVxuICAgICAgLy8gVE9ETzogYWRkIHZhbGlkYXRpb24gZGVzY3JpcHRvciB3L28gY2FsbGluZyBhY2Nlc3NvcnNcbiAgICAgICYmICFkZXNjLmNvbmZpZ3VyYWJsZVxuICAgICAgJiYgKCFoYXMoZGVzYywgJ3dyaXRhYmxlJykgfHwgZGVzYy53cml0YWJsZSlcbiAgICAgICYmICghaGFzKGRlc2MsICdlbnVtZXJhYmxlJykgfHwgZGVzYy5lbnVtZXJhYmxlKVxuICAgICkge1xuICAgICAgdGFyZ2V0W2tleV0gPSBkZXNjLnZhbHVlO1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9IHJldHVybiBkUCh0YXJnZXQsIGtleSwgZGVzYyk7XG4gIH07XG5cbiAgaWYgKCFBTExfQ09OU1RSVUNUT1JTKSB7XG4gICAgJEdPUEQuZiA9ICRnZXREZXNjO1xuICAgICREUC5mID0gJHNldERlc2M7XG4gIH1cblxuICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFBTExfQ09OU1RSVUNUT1JTLCAnT2JqZWN0Jywge1xuICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldERlc2MsXG4gICAgZGVmaW5lUHJvcGVydHk6ICRzZXREZXNjXG4gIH0pO1xuXG4gIGlmIChmYWlscyhmdW5jdGlvbiAoKSB7IGFycmF5VG9TdHJpbmcuY2FsbCh7fSk7IH0pKSB7XG4gICAgYXJyYXlUb1N0cmluZyA9IGFycmF5VG9Mb2NhbGVTdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICAgIHJldHVybiBhcnJheUpvaW4uY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyICRUeXBlZEFycmF5UHJvdG90eXBlJCA9IHJlZGVmaW5lQWxsKHt9LCBwcm90byk7XG4gIHJlZGVmaW5lQWxsKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJGl0ZXJhdG9ycyk7XG4gIGhpZGUoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCBJVEVSQVRPUiwgJGl0ZXJhdG9ycy52YWx1ZXMpO1xuICByZWRlZmluZUFsbCgkVHlwZWRBcnJheVByb3RvdHlwZSQsIHtcbiAgICBzbGljZTogJHNsaWNlLFxuICAgIHNldDogJHNldCxcbiAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gKCkgeyAvKiBub29wICovIH0sXG4gICAgdG9TdHJpbmc6IGFycmF5VG9TdHJpbmcsXG4gICAgdG9Mb2NhbGVTdHJpbmc6ICR0b0xvY2FsZVN0cmluZ1xuICB9KTtcbiAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J1ZmZlcicsICdiJyk7XG4gIGFkZEdldHRlcigkVHlwZWRBcnJheVByb3RvdHlwZSQsICdieXRlT2Zmc2V0JywgJ28nKTtcbiAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J5dGVMZW5ndGgnLCAnbCcpO1xuICBhZGRHZXR0ZXIoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCAnbGVuZ3RoJywgJ2UnKTtcbiAgZFAoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCBUQUcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXNbVFlQRURfQVJSQVldOyB9XG4gIH0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtc3RhdGVtZW50c1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVksIEJZVEVTLCB3cmFwcGVyLCBDTEFNUEVEKSB7XG4gICAgQ0xBTVBFRCA9ICEhQ0xBTVBFRDtcbiAgICB2YXIgTkFNRSA9IEtFWSArIChDTEFNUEVEID8gJ0NsYW1wZWQnIDogJycpICsgJ0FycmF5JztcbiAgICB2YXIgR0VUVEVSID0gJ2dldCcgKyBLRVk7XG4gICAgdmFyIFNFVFRFUiA9ICdzZXQnICsgS0VZO1xuICAgIHZhciBUeXBlZEFycmF5ID0gZ2xvYmFsW05BTUVdO1xuICAgIHZhciBCYXNlID0gVHlwZWRBcnJheSB8fCB7fTtcbiAgICB2YXIgVEFDID0gVHlwZWRBcnJheSAmJiBnZXRQcm90b3R5cGVPZihUeXBlZEFycmF5KTtcbiAgICB2YXIgRk9SQ0VEID0gIVR5cGVkQXJyYXkgfHwgISR0eXBlZC5BQlY7XG4gICAgdmFyIE8gPSB7fTtcbiAgICB2YXIgVHlwZWRBcnJheVByb3RvdHlwZSA9IFR5cGVkQXJyYXkgJiYgVHlwZWRBcnJheVtQUk9UT1RZUEVdO1xuICAgIHZhciBnZXR0ZXIgPSBmdW5jdGlvbiAodGhhdCwgaW5kZXgpIHtcbiAgICAgIHZhciBkYXRhID0gdGhhdC5fZDtcbiAgICAgIHJldHVybiBkYXRhLnZbR0VUVEVSXShpbmRleCAqIEJZVEVTICsgZGF0YS5vLCBMSVRUTEVfRU5ESUFOKTtcbiAgICB9O1xuICAgIHZhciBzZXR0ZXIgPSBmdW5jdGlvbiAodGhhdCwgaW5kZXgsIHZhbHVlKSB7XG4gICAgICB2YXIgZGF0YSA9IHRoYXQuX2Q7XG4gICAgICBpZiAoQ0xBTVBFRCkgdmFsdWUgPSAodmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlKSkgPCAwID8gMCA6IHZhbHVlID4gMHhmZiA/IDB4ZmYgOiB2YWx1ZSAmIDB4ZmY7XG4gICAgICBkYXRhLnZbU0VUVEVSXShpbmRleCAqIEJZVEVTICsgZGF0YS5vLCB2YWx1ZSwgTElUVExFX0VORElBTik7XG4gICAgfTtcbiAgICB2YXIgYWRkRWxlbWVudCA9IGZ1bmN0aW9uICh0aGF0LCBpbmRleCkge1xuICAgICAgZFAodGhhdCwgaW5kZXgsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGdldHRlcih0aGlzLCBpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHNldHRlcih0aGlzLCBpbmRleCwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGlmIChGT1JDRUQpIHtcbiAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uICh0aGF0LCBkYXRhLCAkb2Zmc2V0LCAkbGVuZ3RoKSB7XG4gICAgICAgIGFuSW5zdGFuY2UodGhhdCwgVHlwZWRBcnJheSwgTkFNRSwgJ19kJyk7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICB2YXIgYnVmZmVyLCBieXRlTGVuZ3RoLCBsZW5ndGgsIGtsYXNzO1xuICAgICAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgbGVuZ3RoID0gdG9JbmRleChkYXRhKTtcbiAgICAgICAgICBieXRlTGVuZ3RoID0gbGVuZ3RoICogQllURVM7XG4gICAgICAgICAgYnVmZmVyID0gbmV3ICRBcnJheUJ1ZmZlcihieXRlTGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyIHx8IChrbGFzcyA9IGNsYXNzb2YoZGF0YSkpID09IEFSUkFZX0JVRkZFUiB8fCBrbGFzcyA9PSBTSEFSRURfQlVGRkVSKSB7XG4gICAgICAgICAgYnVmZmVyID0gZGF0YTtcbiAgICAgICAgICBvZmZzZXQgPSB0b09mZnNldCgkb2Zmc2V0LCBCWVRFUyk7XG4gICAgICAgICAgdmFyICRsZW4gPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgaWYgKCRsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCRsZW4gJSBCWVRFUykgdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9ICRsZW4gLSBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAoYnl0ZUxlbmd0aCA8IDApIHRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9IHRvTGVuZ3RoKCRsZW5ndGgpICogQllURVM7XG4gICAgICAgICAgICBpZiAoYnl0ZUxlbmd0aCArIG9mZnNldCA+ICRsZW4pIHRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGVuZ3RoID0gYnl0ZUxlbmd0aCAvIEJZVEVTO1xuICAgICAgICB9IGVsc2UgaWYgKFRZUEVEX0FSUkFZIGluIGRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gZnJvbUxpc3QoVHlwZWRBcnJheSwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICRmcm9tLmNhbGwoVHlwZWRBcnJheSwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaGlkZSh0aGF0LCAnX2QnLCB7XG4gICAgICAgICAgYjogYnVmZmVyLFxuICAgICAgICAgIG86IG9mZnNldCxcbiAgICAgICAgICBsOiBieXRlTGVuZ3RoLFxuICAgICAgICAgIGU6IGxlbmd0aCxcbiAgICAgICAgICB2OiBuZXcgJERhdGFWaWV3KGJ1ZmZlcilcbiAgICAgICAgfSk7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkgYWRkRWxlbWVudCh0aGF0LCBpbmRleCsrKTtcbiAgICAgIH0pO1xuICAgICAgVHlwZWRBcnJheVByb3RvdHlwZSA9IFR5cGVkQXJyYXlbUFJPVE9UWVBFXSA9IGNyZWF0ZSgkVHlwZWRBcnJheVByb3RvdHlwZSQpO1xuICAgICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCAnY29uc3RydWN0b3InLCBUeXBlZEFycmF5KTtcbiAgICB9IGVsc2UgaWYgKCFmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgICBUeXBlZEFycmF5KDEpO1xuICAgIH0pIHx8ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgICBuZXcgVHlwZWRBcnJheSgtMSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgfSkgfHwgISRpdGVyRGV0ZWN0KGZ1bmN0aW9uIChpdGVyKSB7XG4gICAgICBuZXcgVHlwZWRBcnJheSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgICAgbmV3IFR5cGVkQXJyYXkobnVsbCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgICBuZXcgVHlwZWRBcnJheSgxLjUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgICAgbmV3IFR5cGVkQXJyYXkoaXRlcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgfSwgdHJ1ZSkpIHtcbiAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uICh0aGF0LCBkYXRhLCAkb2Zmc2V0LCAkbGVuZ3RoKSB7XG4gICAgICAgIGFuSW5zdGFuY2UodGhhdCwgVHlwZWRBcnJheSwgTkFNRSk7XG4gICAgICAgIHZhciBrbGFzcztcbiAgICAgICAgLy8gYHdzYCBtb2R1bGUgYnVnLCB0ZW1wb3JhcmlseSByZW1vdmUgdmFsaWRhdGlvbiBsZW5ndGggZm9yIFVpbnQ4QXJyYXlcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnNvY2tldHMvd3MvcHVsbC82NDVcbiAgICAgICAgaWYgKCFpc09iamVjdChkYXRhKSkgcmV0dXJuIG5ldyBCYXNlKHRvSW5kZXgoZGF0YSkpO1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mICRBcnJheUJ1ZmZlciB8fCAoa2xhc3MgPSBjbGFzc29mKGRhdGEpKSA9PSBBUlJBWV9CVUZGRVIgfHwga2xhc3MgPT0gU0hBUkVEX0JVRkZFUikge1xuICAgICAgICAgIHJldHVybiAkbGVuZ3RoICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gbmV3IEJhc2UoZGF0YSwgdG9PZmZzZXQoJG9mZnNldCwgQllURVMpLCAkbGVuZ3RoKVxuICAgICAgICAgICAgOiAkb2Zmc2V0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgPyBuZXcgQmFzZShkYXRhLCB0b09mZnNldCgkb2Zmc2V0LCBCWVRFUykpXG4gICAgICAgICAgICAgIDogbmV3IEJhc2UoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFRZUEVEX0FSUkFZIGluIGRhdGEpIHJldHVybiBmcm9tTGlzdChUeXBlZEFycmF5LCBkYXRhKTtcbiAgICAgICAgcmV0dXJuICRmcm9tLmNhbGwoVHlwZWRBcnJheSwgZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIGFycmF5Rm9yRWFjaChUQUMgIT09IEZ1bmN0aW9uLnByb3RvdHlwZSA/IGdPUE4oQmFzZSkuY29uY2F0KGdPUE4oVEFDKSkgOiBnT1BOKEJhc2UpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghKGtleSBpbiBUeXBlZEFycmF5KSkgaGlkZShUeXBlZEFycmF5LCBrZXksIEJhc2Vba2V5XSk7XG4gICAgICB9KTtcbiAgICAgIFR5cGVkQXJyYXlbUFJPVE9UWVBFXSA9IFR5cGVkQXJyYXlQcm90b3R5cGU7XG4gICAgICBpZiAoIUxJQlJBUlkpIFR5cGVkQXJyYXlQcm90b3R5cGUuY29uc3RydWN0b3IgPSBUeXBlZEFycmF5O1xuICAgIH1cbiAgICB2YXIgJG5hdGl2ZUl0ZXJhdG9yID0gVHlwZWRBcnJheVByb3RvdHlwZVtJVEVSQVRPUl07XG4gICAgdmFyIENPUlJFQ1RfSVRFUl9OQU1FID0gISEkbmF0aXZlSXRlcmF0b3JcbiAgICAgICYmICgkbmF0aXZlSXRlcmF0b3IubmFtZSA9PSAndmFsdWVzJyB8fCAkbmF0aXZlSXRlcmF0b3IubmFtZSA9PSB1bmRlZmluZWQpO1xuICAgIHZhciAkaXRlcmF0b3IgPSAkaXRlcmF0b3JzLnZhbHVlcztcbiAgICBoaWRlKFR5cGVkQXJyYXksIFRZUEVEX0NPTlNUUlVDVE9SLCB0cnVlKTtcbiAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIFRZUEVEX0FSUkFZLCBOQU1FKTtcbiAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIFZJRVcsIHRydWUpO1xuICAgIGhpZGUoVHlwZWRBcnJheVByb3RvdHlwZSwgREVGX0NPTlNUUlVDVE9SLCBUeXBlZEFycmF5KTtcblxuICAgIGlmIChDTEFNUEVEID8gbmV3IFR5cGVkQXJyYXkoMSlbVEFHXSAhPSBOQU1FIDogIShUQUcgaW4gVHlwZWRBcnJheVByb3RvdHlwZSkpIHtcbiAgICAgIGRQKFR5cGVkQXJyYXlQcm90b3R5cGUsIFRBRywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE5BTUU7IH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIE9bTkFNRV0gPSBUeXBlZEFycmF5O1xuXG4gICAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoVHlwZWRBcnJheSAhPSBCYXNlKSwgTyk7XG5cbiAgICAkZXhwb3J0KCRleHBvcnQuUywgTkFNRSwge1xuICAgICAgQllURVNfUEVSX0VMRU1FTlQ6IEJZVEVTXG4gICAgfSk7XG5cbiAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uICgpIHsgQmFzZS5vZi5jYWxsKFR5cGVkQXJyYXksIDEpOyB9KSwgTkFNRSwge1xuICAgICAgZnJvbTogJGZyb20sXG4gICAgICBvZjogJG9mXG4gICAgfSk7XG5cbiAgICBpZiAoIShCWVRFU19QRVJfRUxFTUVOVCBpbiBUeXBlZEFycmF5UHJvdG90eXBlKSkgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBCWVRFU19QRVJfRUxFTUVOVCwgQllURVMpO1xuXG4gICAgJGV4cG9ydCgkZXhwb3J0LlAsIE5BTUUsIHByb3RvKTtcblxuICAgIHNldFNwZWNpZXMoTkFNRSk7XG5cbiAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIEZPUkNFRF9TRVQsIE5BTUUsIHsgc2V0OiAkc2V0IH0pO1xuXG4gICAgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhQ09SUkVDVF9JVEVSX05BTUUsIE5BTUUsICRpdGVyYXRvcnMpO1xuXG4gICAgaWYgKCFMSUJSQVJZICYmIFR5cGVkQXJyYXlQcm90b3R5cGUudG9TdHJpbmcgIT0gYXJyYXlUb1N0cmluZykgVHlwZWRBcnJheVByb3RvdHlwZS50b1N0cmluZyA9IGFycmF5VG9TdHJpbmc7XG5cbiAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAgIG5ldyBUeXBlZEFycmF5KDEpLnNsaWNlKCk7XG4gICAgfSksIE5BTUUsIHsgc2xpY2U6ICRzbGljZSB9KTtcblxuICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBbMSwgMl0udG9Mb2NhbGVTdHJpbmcoKSAhPSBuZXcgVHlwZWRBcnJheShbMSwgMl0pLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgfSkgfHwgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAgIFR5cGVkQXJyYXlQcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwgMl0pO1xuICAgIH0pKSwgTkFNRSwgeyB0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nIH0pO1xuXG4gICAgSXRlcmF0b3JzW05BTUVdID0gQ09SUkVDVF9JVEVSX05BTUUgPyAkbmF0aXZlSXRlcmF0b3IgOiAkaXRlcmF0b3I7XG4gICAgaWYgKCFMSUJSQVJZICYmICFDT1JSRUNUX0lURVJfTkFNRSkgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBJVEVSQVRPUiwgJGl0ZXJhdG9yKTtcbiAgfTtcbn0gZWxzZSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfTtcblxufSx7XCIxMDBcIjoxMDAsXCIxMDRcIjoxMDQsXCIxMVwiOjExLFwiMTE0XCI6MTE0LFwiMTE1XCI6MTE1LFwiMTE2XCI6MTE2LFwiMTE4XCI6MTE4LFwiMTE5XCI6MTE5LFwiMTJcIjoxMixcIjEyMFwiOjEyMCxcIjEyMlwiOjEyMixcIjEyM1wiOjEyMyxcIjEyNFwiOjEyNCxcIjEyOFwiOjEyOCxcIjEyOVwiOjEyOSxcIjE0MVwiOjE0MSxcIjE3XCI6MTcsXCIyNVwiOjI1LFwiMjlcIjoyOSxcIjMzXCI6MzMsXCIzNVwiOjM1LFwiNDBcIjo0MCxcIjQxXCI6NDEsXCI0MlwiOjQyLFwiNDhcIjo0OCxcIjUxXCI6NTEsXCI1NlwiOjU2LFwiNThcIjo1OCxcIjZcIjo2LFwiNjBcIjo2MCxcIjcxXCI6NzEsXCI3MlwiOjcyLFwiNzVcIjo3NSxcIjc3XCI6NzcsXCI3OVwiOjc5LFwiOFwiOjgsXCI5XCI6OSxcIjkyXCI6OTIsXCI5M1wiOjkzfV0sMTIyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSBfZGVyZXFfKDQwKTtcbnZhciBERVNDUklQVE9SUyA9IF9kZXJlcV8oMjkpO1xudmFyIExJQlJBUlkgPSBfZGVyZXFfKDYwKTtcbnZhciAkdHlwZWQgPSBfZGVyZXFfKDEyMyk7XG52YXIgaGlkZSA9IF9kZXJlcV8oNDIpO1xudmFyIHJlZGVmaW5lQWxsID0gX2RlcmVxXyg5Myk7XG52YXIgZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciBhbkluc3RhbmNlID0gX2RlcmVxXyg2KTtcbnZhciB0b0ludGVnZXIgPSBfZGVyZXFfKDExNik7XG52YXIgdG9MZW5ndGggPSBfZGVyZXFfKDExOCk7XG52YXIgdG9JbmRleCA9IF9kZXJlcV8oMTE1KTtcbnZhciBnT1BOID0gX2RlcmVxXyg3NykuZjtcbnZhciBkUCA9IF9kZXJlcV8oNzIpLmY7XG52YXIgYXJyYXlGaWxsID0gX2RlcmVxXyg5KTtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IF9kZXJlcV8oMTAxKTtcbnZhciBBUlJBWV9CVUZGRVIgPSAnQXJyYXlCdWZmZXInO1xudmFyIERBVEFfVklFVyA9ICdEYXRhVmlldyc7XG52YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG52YXIgV1JPTkdfTEVOR1RIID0gJ1dyb25nIGxlbmd0aCEnO1xudmFyIFdST05HX0lOREVYID0gJ1dyb25nIGluZGV4ISc7XG52YXIgJEFycmF5QnVmZmVyID0gZ2xvYmFsW0FSUkFZX0JVRkZFUl07XG52YXIgJERhdGFWaWV3ID0gZ2xvYmFsW0RBVEFfVklFV107XG52YXIgTWF0aCA9IGdsb2JhbC5NYXRoO1xudmFyIFJhbmdlRXJyb3IgPSBnbG9iYWwuUmFuZ2VFcnJvcjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3ctcmVzdHJpY3RlZC1uYW1lc1xudmFyIEluZmluaXR5ID0gZ2xvYmFsLkluZmluaXR5O1xudmFyIEJhc2VCdWZmZXIgPSAkQXJyYXlCdWZmZXI7XG52YXIgYWJzID0gTWF0aC5hYnM7XG52YXIgcG93ID0gTWF0aC5wb3c7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xudmFyIGxvZyA9IE1hdGgubG9nO1xudmFyIExOMiA9IE1hdGguTE4yO1xudmFyIEJVRkZFUiA9ICdidWZmZXInO1xudmFyIEJZVEVfTEVOR1RIID0gJ2J5dGVMZW5ndGgnO1xudmFyIEJZVEVfT0ZGU0VUID0gJ2J5dGVPZmZzZXQnO1xudmFyICRCVUZGRVIgPSBERVNDUklQVE9SUyA/ICdfYicgOiBCVUZGRVI7XG52YXIgJExFTkdUSCA9IERFU0NSSVBUT1JTID8gJ19sJyA6IEJZVEVfTEVOR1RIO1xudmFyICRPRkZTRVQgPSBERVNDUklQVE9SUyA/ICdfbycgOiBCWVRFX09GRlNFVDtcblxuLy8gSUVFRTc1NCBjb252ZXJzaW9ucyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2llZWU3NTRcbmZ1bmN0aW9uIHBhY2tJRUVFNzU0KHZhbHVlLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGJ1ZmZlciA9IEFycmF5KG5CeXRlcyk7XG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxO1xuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMTtcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxO1xuICB2YXIgcnQgPSBtTGVuID09PSAyMyA/IHBvdygyLCAtMjQpIC0gcG93KDIsIC03NykgOiAwO1xuICB2YXIgaSA9IDA7XG4gIHZhciBzID0gdmFsdWUgPCAwIHx8IHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDAgPyAxIDogMDtcbiAgdmFyIGUsIG0sIGM7XG4gIHZhbHVlID0gYWJzKHZhbHVlKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICBpZiAodmFsdWUgIT0gdmFsdWUgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgIG0gPSB2YWx1ZSAhPSB2YWx1ZSA/IDEgOiAwO1xuICAgIGUgPSBlTWF4O1xuICB9IGVsc2Uge1xuICAgIGUgPSBmbG9vcihsb2codmFsdWUpIC8gTE4yKTtcbiAgICBpZiAodmFsdWUgKiAoYyA9IHBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tO1xuICAgICAgYyAqPSAyO1xuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gYztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBwb3coMiwgMSAtIGVCaWFzKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKys7XG4gICAgICBjIC89IDI7XG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDA7XG4gICAgICBlID0gZU1heDtcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogcG93KDIsIG1MZW4pO1xuICAgICAgZSA9IGUgKyBlQmlhcztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogcG93KDIsIGVCaWFzIC0gMSkgKiBwb3coMiwgbUxlbik7XG4gICAgICBlID0gMDtcbiAgICB9XG4gIH1cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW2krK10gPSBtICYgMjU1LCBtIC89IDI1NiwgbUxlbiAtPSA4KTtcbiAgZSA9IGUgPDwgbUxlbiB8IG07XG4gIGVMZW4gKz0gbUxlbjtcbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbaSsrXSA9IGUgJiAyNTUsIGUgLz0gMjU2LCBlTGVuIC09IDgpO1xuICBidWZmZXJbLS1pXSB8PSBzICogMTI4O1xuICByZXR1cm4gYnVmZmVyO1xufVxuZnVuY3Rpb24gdW5wYWNrSUVFRTc1NChidWZmZXIsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMTtcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7XG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMTtcbiAgdmFyIG5CaXRzID0gZUxlbiAtIDc7XG4gIHZhciBpID0gbkJ5dGVzIC0gMTtcbiAgdmFyIHMgPSBidWZmZXJbaS0tXTtcbiAgdmFyIGUgPSBzICYgMTI3O1xuICB2YXIgbTtcbiAgcyA+Pj0gNztcbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbaV0sIGktLSwgbkJpdHMgLT0gOCk7XG4gIG0gPSBlICYgKDEgPDwgLW5CaXRzKSAtIDE7XG4gIGUgPj49IC1uQml0cztcbiAgbkJpdHMgKz0gbUxlbjtcbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbaV0sIGktLSwgbkJpdHMgLT0gOCk7XG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhcztcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiBzID8gLUluZmluaXR5IDogSW5maW5pdHk7XG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBwb3coMiwgbUxlbik7XG4gICAgZSA9IGUgLSBlQmlhcztcbiAgfSByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIHBvdygyLCBlIC0gbUxlbik7XG59XG5cbmZ1bmN0aW9uIHVucGFja0kzMihieXRlcykge1xuICByZXR1cm4gYnl0ZXNbM10gPDwgMjQgfCBieXRlc1syXSA8PCAxNiB8IGJ5dGVzWzFdIDw8IDggfCBieXRlc1swXTtcbn1cbmZ1bmN0aW9uIHBhY2tJOChpdCkge1xuICByZXR1cm4gW2l0ICYgMHhmZl07XG59XG5mdW5jdGlvbiBwYWNrSTE2KGl0KSB7XG4gIHJldHVybiBbaXQgJiAweGZmLCBpdCA+PiA4ICYgMHhmZl07XG59XG5mdW5jdGlvbiBwYWNrSTMyKGl0KSB7XG4gIHJldHVybiBbaXQgJiAweGZmLCBpdCA+PiA4ICYgMHhmZiwgaXQgPj4gMTYgJiAweGZmLCBpdCA+PiAyNCAmIDB4ZmZdO1xufVxuZnVuY3Rpb24gcGFja0Y2NChpdCkge1xuICByZXR1cm4gcGFja0lFRUU3NTQoaXQsIDUyLCA4KTtcbn1cbmZ1bmN0aW9uIHBhY2tGMzIoaXQpIHtcbiAgcmV0dXJuIHBhY2tJRUVFNzU0KGl0LCAyMywgNCk7XG59XG5cbmZ1bmN0aW9uIGFkZEdldHRlcihDLCBrZXksIGludGVybmFsKSB7XG4gIGRQKENbUFJPVE9UWVBFXSwga2V5LCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpc1tpbnRlcm5hbF07IH0gfSk7XG59XG5cbmZ1bmN0aW9uIGdldCh2aWV3LCBieXRlcywgaW5kZXgsIGlzTGl0dGxlRW5kaWFuKSB7XG4gIHZhciBudW1JbmRleCA9ICtpbmRleDtcbiAgdmFyIGludEluZGV4ID0gdG9JbmRleChudW1JbmRleCk7XG4gIGlmIChpbnRJbmRleCArIGJ5dGVzID4gdmlld1skTEVOR1RIXSkgdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19JTkRFWCk7XG4gIHZhciBzdG9yZSA9IHZpZXdbJEJVRkZFUl0uX2I7XG4gIHZhciBzdGFydCA9IGludEluZGV4ICsgdmlld1skT0ZGU0VUXTtcbiAgdmFyIHBhY2sgPSBzdG9yZS5zbGljZShzdGFydCwgc3RhcnQgKyBieXRlcyk7XG4gIHJldHVybiBpc0xpdHRsZUVuZGlhbiA/IHBhY2sgOiBwYWNrLnJldmVyc2UoKTtcbn1cbmZ1bmN0aW9uIHNldCh2aWV3LCBieXRlcywgaW5kZXgsIGNvbnZlcnNpb24sIHZhbHVlLCBpc0xpdHRsZUVuZGlhbikge1xuICB2YXIgbnVtSW5kZXggPSAraW5kZXg7XG4gIHZhciBpbnRJbmRleCA9IHRvSW5kZXgobnVtSW5kZXgpO1xuICBpZiAoaW50SW5kZXggKyBieXRlcyA+IHZpZXdbJExFTkdUSF0pIHRocm93IFJhbmdlRXJyb3IoV1JPTkdfSU5ERVgpO1xuICB2YXIgc3RvcmUgPSB2aWV3WyRCVUZGRVJdLl9iO1xuICB2YXIgc3RhcnQgPSBpbnRJbmRleCArIHZpZXdbJE9GRlNFVF07XG4gIHZhciBwYWNrID0gY29udmVyc2lvbigrdmFsdWUpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzOyBpKyspIHN0b3JlW3N0YXJ0ICsgaV0gPSBwYWNrW2lzTGl0dGxlRW5kaWFuID8gaSA6IGJ5dGVzIC0gaSAtIDFdO1xufVxuXG5pZiAoISR0eXBlZC5BQlYpIHtcbiAgJEFycmF5QnVmZmVyID0gZnVuY3Rpb24gQXJyYXlCdWZmZXIobGVuZ3RoKSB7XG4gICAgYW5JbnN0YW5jZSh0aGlzLCAkQXJyYXlCdWZmZXIsIEFSUkFZX0JVRkZFUik7XG4gICAgdmFyIGJ5dGVMZW5ndGggPSB0b0luZGV4KGxlbmd0aCk7XG4gICAgdGhpcy5fYiA9IGFycmF5RmlsbC5jYWxsKEFycmF5KGJ5dGVMZW5ndGgpLCAwKTtcbiAgICB0aGlzWyRMRU5HVEhdID0gYnl0ZUxlbmd0aDtcbiAgfTtcblxuICAkRGF0YVZpZXcgPSBmdW5jdGlvbiBEYXRhVmlldyhidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgICBhbkluc3RhbmNlKHRoaXMsICREYXRhVmlldywgREFUQV9WSUVXKTtcbiAgICBhbkluc3RhbmNlKGJ1ZmZlciwgJEFycmF5QnVmZmVyLCBEQVRBX1ZJRVcpO1xuICAgIHZhciBidWZmZXJMZW5ndGggPSBidWZmZXJbJExFTkdUSF07XG4gICAgdmFyIG9mZnNldCA9IHRvSW50ZWdlcihieXRlT2Zmc2V0KTtcbiAgICBpZiAob2Zmc2V0IDwgMCB8fCBvZmZzZXQgPiBidWZmZXJMZW5ndGgpIHRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCEnKTtcbiAgICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA9PT0gdW5kZWZpbmVkID8gYnVmZmVyTGVuZ3RoIC0gb2Zmc2V0IDogdG9MZW5ndGgoYnl0ZUxlbmd0aCk7XG4gICAgaWYgKG9mZnNldCArIGJ5dGVMZW5ndGggPiBidWZmZXJMZW5ndGgpIHRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcbiAgICB0aGlzWyRCVUZGRVJdID0gYnVmZmVyO1xuICAgIHRoaXNbJE9GRlNFVF0gPSBvZmZzZXQ7XG4gICAgdGhpc1skTEVOR1RIXSA9IGJ5dGVMZW5ndGg7XG4gIH07XG5cbiAgaWYgKERFU0NSSVBUT1JTKSB7XG4gICAgYWRkR2V0dGVyKCRBcnJheUJ1ZmZlciwgQllURV9MRU5HVEgsICdfbCcpO1xuICAgIGFkZEdldHRlcigkRGF0YVZpZXcsIEJVRkZFUiwgJ19iJyk7XG4gICAgYWRkR2V0dGVyKCREYXRhVmlldywgQllURV9MRU5HVEgsICdfbCcpO1xuICAgIGFkZEdldHRlcigkRGF0YVZpZXcsIEJZVEVfT0ZGU0VULCAnX28nKTtcbiAgfVxuXG4gIHJlZGVmaW5lQWxsKCREYXRhVmlld1tQUk9UT1RZUEVdLCB7XG4gICAgZ2V0SW50ODogZnVuY3Rpb24gZ2V0SW50OChieXRlT2Zmc2V0KSB7XG4gICAgICByZXR1cm4gZ2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQpWzBdIDw8IDI0ID4+IDI0O1xuICAgIH0sXG4gICAgZ2V0VWludDg6IGZ1bmN0aW9uIGdldFVpbnQ4KGJ5dGVPZmZzZXQpIHtcbiAgICAgIHJldHVybiBnZXQodGhpcywgMSwgYnl0ZU9mZnNldClbMF07XG4gICAgfSxcbiAgICBnZXRJbnQxNjogZnVuY3Rpb24gZ2V0SW50MTYoYnl0ZU9mZnNldCAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgdmFyIGJ5dGVzID0gZ2V0KHRoaXMsIDIsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50c1sxXSk7XG4gICAgICByZXR1cm4gKGJ5dGVzWzFdIDw8IDggfCBieXRlc1swXSkgPDwgMTYgPj4gMTY7XG4gICAgfSxcbiAgICBnZXRVaW50MTY6IGZ1bmN0aW9uIGdldFVpbnQxNihieXRlT2Zmc2V0IC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICB2YXIgYnl0ZXMgPSBnZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKTtcbiAgICAgIHJldHVybiBieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF07XG4gICAgfSxcbiAgICBnZXRJbnQzMjogZnVuY3Rpb24gZ2V0SW50MzIoYnl0ZU9mZnNldCAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgcmV0dXJuIHVucGFja0kzMihnZXQodGhpcywgNCwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKSk7XG4gICAgfSxcbiAgICBnZXRVaW50MzI6IGZ1bmN0aW9uIGdldFVpbnQzMihieXRlT2Zmc2V0IC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICByZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pKSA+Pj4gMDtcbiAgICB9LFxuICAgIGdldEZsb2F0MzI6IGZ1bmN0aW9uIGdldEZsb2F0MzIoYnl0ZU9mZnNldCAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgcmV0dXJuIHVucGFja0lFRUU3NTQoZ2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50c1sxXSksIDIzLCA0KTtcbiAgICB9LFxuICAgIGdldEZsb2F0NjQ6IGZ1bmN0aW9uIGdldEZsb2F0NjQoYnl0ZU9mZnNldCAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgcmV0dXJuIHVucGFja0lFRUU3NTQoZ2V0KHRoaXMsIDgsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50c1sxXSksIDUyLCA4KTtcbiAgICB9LFxuICAgIHNldEludDg6IGZ1bmN0aW9uIHNldEludDgoYnl0ZU9mZnNldCwgdmFsdWUpIHtcbiAgICAgIHNldCh0aGlzLCAxLCBieXRlT2Zmc2V0LCBwYWNrSTgsIHZhbHVlKTtcbiAgICB9LFxuICAgIHNldFVpbnQ4OiBmdW5jdGlvbiBzZXRVaW50OChieXRlT2Zmc2V0LCB2YWx1ZSkge1xuICAgICAgc2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQsIHBhY2tJOCwgdmFsdWUpO1xuICAgIH0sXG4gICAgc2V0SW50MTY6IGZ1bmN0aW9uIHNldEludDE2KGJ5dGVPZmZzZXQsIHZhbHVlIC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICBzZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgcGFja0kxNiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG4gICAgfSxcbiAgICBzZXRVaW50MTY6IGZ1bmN0aW9uIHNldFVpbnQxNihieXRlT2Zmc2V0LCB2YWx1ZSAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgc2V0KHRoaXMsIDIsIGJ5dGVPZmZzZXQsIHBhY2tJMTYsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuICAgIH0sXG4gICAgc2V0SW50MzI6IGZ1bmN0aW9uIHNldEludDMyKGJ5dGVPZmZzZXQsIHZhbHVlIC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICBzZXQodGhpcywgNCwgYnl0ZU9mZnNldCwgcGFja0kzMiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG4gICAgfSxcbiAgICBzZXRVaW50MzI6IGZ1bmN0aW9uIHNldFVpbnQzMihieXRlT2Zmc2V0LCB2YWx1ZSAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgc2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIHBhY2tJMzIsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuICAgIH0sXG4gICAgc2V0RmxvYXQzMjogZnVuY3Rpb24gc2V0RmxvYXQzMihieXRlT2Zmc2V0LCB2YWx1ZSAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgc2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIHBhY2tGMzIsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuICAgIH0sXG4gICAgc2V0RmxvYXQ2NDogZnVuY3Rpb24gc2V0RmxvYXQ2NChieXRlT2Zmc2V0LCB2YWx1ZSAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgc2V0KHRoaXMsIDgsIGJ5dGVPZmZzZXQsIHBhY2tGNjQsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICBpZiAoIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAkQXJyYXlCdWZmZXIoMSk7XG4gIH0pIHx8ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgbmV3ICRBcnJheUJ1ZmZlcigtMSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gIH0pIHx8IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICBuZXcgJEFycmF5QnVmZmVyKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgbmV3ICRBcnJheUJ1ZmZlcigxLjUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgIG5ldyAkQXJyYXlCdWZmZXIoTmFOKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgICByZXR1cm4gJEFycmF5QnVmZmVyLm5hbWUgIT0gQVJSQVlfQlVGRkVSO1xuICB9KSkge1xuICAgICRBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIEFycmF5QnVmZmVyKGxlbmd0aCkge1xuICAgICAgYW5JbnN0YW5jZSh0aGlzLCAkQXJyYXlCdWZmZXIpO1xuICAgICAgcmV0dXJuIG5ldyBCYXNlQnVmZmVyKHRvSW5kZXgobGVuZ3RoKSk7XG4gICAgfTtcbiAgICB2YXIgQXJyYXlCdWZmZXJQcm90byA9ICRBcnJheUJ1ZmZlcltQUk9UT1RZUEVdID0gQmFzZUJ1ZmZlcltQUk9UT1RZUEVdO1xuICAgIGZvciAodmFyIGtleXMgPSBnT1BOKEJhc2VCdWZmZXIpLCBqID0gMCwga2V5OyBrZXlzLmxlbmd0aCA+IGo7KSB7XG4gICAgICBpZiAoISgoa2V5ID0ga2V5c1tqKytdKSBpbiAkQXJyYXlCdWZmZXIpKSBoaWRlKCRBcnJheUJ1ZmZlciwga2V5LCBCYXNlQnVmZmVyW2tleV0pO1xuICAgIH1cbiAgICBpZiAoIUxJQlJBUlkpIEFycmF5QnVmZmVyUHJvdG8uY29uc3RydWN0b3IgPSAkQXJyYXlCdWZmZXI7XG4gIH1cbiAgLy8gaU9TIFNhZmFyaSA3LnggYnVnXG4gIHZhciB2aWV3ID0gbmV3ICREYXRhVmlldyhuZXcgJEFycmF5QnVmZmVyKDIpKTtcbiAgdmFyICRzZXRJbnQ4ID0gJERhdGFWaWV3W1BST1RPVFlQRV0uc2V0SW50ODtcbiAgdmlldy5zZXRJbnQ4KDAsIDIxNDc0ODM2NDgpO1xuICB2aWV3LnNldEludDgoMSwgMjE0NzQ4MzY0OSk7XG4gIGlmICh2aWV3LmdldEludDgoMCkgfHwgIXZpZXcuZ2V0SW50OCgxKSkgcmVkZWZpbmVBbGwoJERhdGFWaWV3W1BST1RPVFlQRV0sIHtcbiAgICBzZXRJbnQ4OiBmdW5jdGlvbiBzZXRJbnQ4KGJ5dGVPZmZzZXQsIHZhbHVlKSB7XG4gICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcbiAgICB9LFxuICAgIHNldFVpbnQ4OiBmdW5jdGlvbiBzZXRVaW50OChieXRlT2Zmc2V0LCB2YWx1ZSkge1xuICAgICAgJHNldEludDguY2FsbCh0aGlzLCBieXRlT2Zmc2V0LCB2YWx1ZSA8PCAyNCA+PiAyNCk7XG4gICAgfVxuICB9LCB0cnVlKTtcbn1cbnNldFRvU3RyaW5nVGFnKCRBcnJheUJ1ZmZlciwgQVJSQVlfQlVGRkVSKTtcbnNldFRvU3RyaW5nVGFnKCREYXRhVmlldywgREFUQV9WSUVXKTtcbmhpZGUoJERhdGFWaWV3W1BST1RPVFlQRV0sICR0eXBlZC5WSUVXLCB0cnVlKTtcbmV4cG9ydHNbQVJSQVlfQlVGRkVSXSA9ICRBcnJheUJ1ZmZlcjtcbmV4cG9ydHNbREFUQV9WSUVXXSA9ICREYXRhVmlldztcblxufSx7XCIxMDFcIjoxMDEsXCIxMTVcIjoxMTUsXCIxMTZcIjoxMTYsXCIxMThcIjoxMTgsXCIxMjNcIjoxMjMsXCIyOVwiOjI5LFwiMzVcIjozNSxcIjQwXCI6NDAsXCI0MlwiOjQyLFwiNlwiOjYsXCI2MFwiOjYwLFwiNzJcIjo3MixcIjc3XCI6NzcsXCI5XCI6OSxcIjkzXCI6OTN9XSwxMjM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIGhpZGUgPSBfZGVyZXFfKDQyKTtcbnZhciB1aWQgPSBfZGVyZXFfKDEyNCk7XG52YXIgVFlQRUQgPSB1aWQoJ3R5cGVkX2FycmF5Jyk7XG52YXIgVklFVyA9IHVpZCgndmlldycpO1xudmFyIEFCViA9ICEhKGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBnbG9iYWwuRGF0YVZpZXcpO1xudmFyIENPTlNUUiA9IEFCVjtcbnZhciBpID0gMDtcbnZhciBsID0gOTtcbnZhciBUeXBlZDtcblxudmFyIFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnMgPSAoXG4gICdJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheSdcbikuc3BsaXQoJywnKTtcblxud2hpbGUgKGkgPCBsKSB7XG4gIGlmIChUeXBlZCA9IGdsb2JhbFtUeXBlZEFycmF5Q29uc3RydWN0b3JzW2krK11dKSB7XG4gICAgaGlkZShUeXBlZC5wcm90b3R5cGUsIFRZUEVELCB0cnVlKTtcbiAgICBoaWRlKFR5cGVkLnByb3RvdHlwZSwgVklFVywgdHJ1ZSk7XG4gIH0gZWxzZSBDT05TVFIgPSBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFCVjogQUJWLFxuICBDT05TVFI6IENPTlNUUixcbiAgVFlQRUQ6IFRZUEVELFxuICBWSUVXOiBWSUVXXG59O1xuXG59LHtcIjEyNFwiOjEyNCxcIjQwXCI6NDAsXCI0MlwiOjQyfV0sMTI0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBpZCA9IDA7XG52YXIgcHggPSBNYXRoLnJhbmRvbSgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7XG59O1xuXG59LHt9XSwxMjU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgVFlQRSkge1xuICBpZiAoIWlzT2JqZWN0KGl0KSB8fCBpdC5fdCAhPT0gVFlQRSkgdGhyb3cgVHlwZUVycm9yKCdJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICcgKyBUWVBFICsgJyByZXF1aXJlZCEnKTtcbiAgcmV0dXJuIGl0O1xufTtcblxufSx7XCI1MVwiOjUxfV0sMTI2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBnbG9iYWwgPSBfZGVyZXFfKDQwKTtcbnZhciBjb3JlID0gX2RlcmVxXygyMyk7XG52YXIgTElCUkFSWSA9IF9kZXJlcV8oNjApO1xudmFyIHdrc0V4dCA9IF9kZXJlcV8oMTI3KTtcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IF9kZXJlcV8oNzIpLmY7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7XG4gIGlmIChuYW1lLmNoYXJBdCgwKSAhPSAnXycgJiYgIShuYW1lIGluICRTeW1ib2wpKSBkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7IHZhbHVlOiB3a3NFeHQuZihuYW1lKSB9KTtcbn07XG5cbn0se1wiMTI3XCI6MTI3LFwiMjNcIjoyMyxcIjQwXCI6NDAsXCI2MFwiOjYwLFwiNzJcIjo3Mn1dLDEyNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5leHBvcnRzLmYgPSBfZGVyZXFfKDEyOCk7XG5cbn0se1wiMTI4XCI6MTI4fV0sMTI4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBzdG9yZSA9IF9kZXJlcV8oMTAzKSgnd2tzJyk7XG52YXIgdWlkID0gX2RlcmVxXygxMjQpO1xudmFyIFN5bWJvbCA9IF9kZXJlcV8oNDApLlN5bWJvbDtcbnZhciBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nO1xuXG52YXIgJGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiBzdG9yZVtuYW1lXSB8fCAoc3RvcmVbbmFtZV0gPVxuICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7XG59O1xuXG4kZXhwb3J0cy5zdG9yZSA9IHN0b3JlO1xuXG59LHtcIjEwM1wiOjEwMyxcIjEyNFwiOjEyNCxcIjQwXCI6NDB9XSwxMjk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIGNsYXNzb2YgPSBfZGVyZXFfKDE3KTtcbnZhciBJVEVSQVRPUiA9IF9kZXJlcV8oMTI4KSgnaXRlcmF0b3InKTtcbnZhciBJdGVyYXRvcnMgPSBfZGVyZXFfKDU4KTtcbm1vZHVsZS5leHBvcnRzID0gX2RlcmVxXygyMykuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKGl0ICE9IHVuZGVmaW5lZCkgcmV0dXJuIGl0W0lURVJBVE9SXVxuICAgIHx8IGl0WydAQGl0ZXJhdG9yJ11cbiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldO1xufTtcblxufSx7XCIxMjhcIjoxMjgsXCIxN1wiOjE3LFwiMjNcIjoyMyxcIjU4XCI6NTh9XSwxMzA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkcmUgPSBfZGVyZXFfKDk1KSgvW1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWdFeHAnLCB7IGVzY2FwZTogZnVuY3Rpb24gZXNjYXBlKGl0KSB7IHJldHVybiAkcmUoaXQpOyB9IH0pO1xuXG59LHtcIjMzXCI6MzMsXCI5NVwiOjk1fV0sMTMxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIyLjEuMy4zIEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluKHRhcmdldCwgc3RhcnQsIGVuZCA9IHRoaXMubGVuZ3RoKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdBcnJheScsIHsgY29weVdpdGhpbjogX2RlcmVxXyg4KSB9KTtcblxuX2RlcmVxXyg1KSgnY29weVdpdGhpbicpO1xuXG59LHtcIjMzXCI6MzMsXCI1XCI6NSxcIjhcIjo4fV0sMTMyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJGV2ZXJ5ID0gX2RlcmVxXygxMikoNCk7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIV9kZXJlcV8oMTA1KShbXS5ldmVyeSwgdHJ1ZSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4zLjUgLyAxNS40LjQuMTYgQXJyYXkucHJvdG90eXBlLmV2ZXJ5KGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG4gIGV2ZXJ5OiBmdW5jdGlvbiBldmVyeShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLykge1xuICAgIHJldHVybiAkZXZlcnkodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTJcIjoxMixcIjMzXCI6MzN9XSwxMzM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjIuMS4zLjYgQXJyYXkucHJvdG90eXBlLmZpbGwodmFsdWUsIHN0YXJ0ID0gMCwgZW5kID0gdGhpcy5sZW5ndGgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5JywgeyBmaWxsOiBfZGVyZXFfKDkpIH0pO1xuXG5fZGVyZXFfKDUpKCdmaWxsJyk7XG5cbn0se1wiMzNcIjozMyxcIjVcIjo1LFwiOVwiOjl9XSwxMzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkZmlsdGVyID0gX2RlcmVxXygxMikoMik7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIV9kZXJlcV8oMTA1KShbXS5maWx0ZXIsIHRydWUpLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMy43IC8gMTUuNC40LjIwIEFycmF5LnByb3RvdHlwZS5maWx0ZXIoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSlcbiAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICByZXR1cm4gJGZpbHRlcih0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pO1xuICB9XG59KTtcblxufSx7XCIxMDVcIjoxMDUsXCIxMlwiOjEyLFwiMzNcIjozM31dLDEzNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyAyMi4xLjMuOSBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4KHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJGZpbmQgPSBfZGVyZXFfKDEyKSg2KTtcbnZhciBLRVkgPSAnZmluZEluZGV4JztcbnZhciBmb3JjZWQgPSB0cnVlO1xuLy8gU2hvdWxkbid0IHNraXAgaG9sZXNcbmlmIChLRVkgaW4gW10pIEFycmF5KDEpW0tFWV0oZnVuY3Rpb24gKCkgeyBmb3JjZWQgPSBmYWxzZTsgfSk7XG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZvcmNlZCwgJ0FycmF5Jywge1xuICBmaW5kSW5kZXg6IGZ1bmN0aW9uIGZpbmRJbmRleChjYWxsYmFja2ZuIC8qICwgdGhhdCA9IHVuZGVmaW5lZCAqLykge1xuICAgIHJldHVybiAkZmluZCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuX2RlcmVxXyg1KShLRVkpO1xuXG59LHtcIjEyXCI6MTIsXCIzM1wiOjMzLFwiNVwiOjV9XSwxMzY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gMjIuMS4zLjggQXJyYXkucHJvdG90eXBlLmZpbmQocHJlZGljYXRlLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkZmluZCA9IF9kZXJlcV8oMTIpKDUpO1xudmFyIEtFWSA9ICdmaW5kJztcbnZhciBmb3JjZWQgPSB0cnVlO1xuLy8gU2hvdWxkbid0IHNraXAgaG9sZXNcbmlmIChLRVkgaW4gW10pIEFycmF5KDEpW0tFWV0oZnVuY3Rpb24gKCkgeyBmb3JjZWQgPSBmYWxzZTsgfSk7XG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZvcmNlZCwgJ0FycmF5Jywge1xuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNhbGxiYWNrZm4gLyogLCB0aGF0ID0gdW5kZWZpbmVkICovKSB7XG4gICAgcmV0dXJuICRmaW5kKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgfVxufSk7XG5fZGVyZXFfKDUpKEtFWSk7XG5cbn0se1wiMTJcIjoxMixcIjMzXCI6MzMsXCI1XCI6NX1dLDEzNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyICRmb3JFYWNoID0gX2RlcmVxXygxMikoMCk7XG52YXIgU1RSSUNUID0gX2RlcmVxXygxMDUpKFtdLmZvckVhY2gsIHRydWUpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFTVFJJQ1QsICdBcnJheScsIHtcbiAgLy8gMjIuMS4zLjEwIC8gMTUuNC40LjE4IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG4gIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICByZXR1cm4gJGZvckVhY2godGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTJcIjoxMixcIjMzXCI6MzN9XSwxMzg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIGN0eCA9IF9kZXJlcV8oMjUpO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b09iamVjdCA9IF9kZXJlcV8oMTE5KTtcbnZhciBjYWxsID0gX2RlcmVxXyg1Myk7XG52YXIgaXNBcnJheUl0ZXIgPSBfZGVyZXFfKDQ4KTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbnZhciBjcmVhdGVQcm9wZXJ0eSA9IF9kZXJlcV8oMjQpO1xudmFyIGdldEl0ZXJGbiA9IF9kZXJlcV8oMTI5KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX2RlcmVxXyg1NikoZnVuY3Rpb24gKGl0ZXIpIHsgQXJyYXkuZnJvbShpdGVyKTsgfSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuICBmcm9tOiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZSAvKiAsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkICovKSB7XG4gICAgdmFyIE8gPSB0b09iamVjdChhcnJheUxpa2UpO1xuICAgIHZhciBDID0gdHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBBcnJheTtcbiAgICB2YXIgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdmFyIG1hcGZuID0gYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgdmFyIG1hcHBpbmcgPSBtYXBmbiAhPT0gdW5kZWZpbmVkO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGl0ZXJGbiA9IGdldEl0ZXJGbihPKTtcbiAgICB2YXIgbGVuZ3RoLCByZXN1bHQsIHN0ZXAsIGl0ZXJhdG9yO1xuICAgIGlmIChtYXBwaW5nKSBtYXBmbiA9IGN0eChtYXBmbiwgYUxlbiA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQsIDIpO1xuICAgIC8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZVxuICAgIGlmIChpdGVyRm4gIT0gdW5kZWZpbmVkICYmICEoQyA9PSBBcnJheSAmJiBpc0FycmF5SXRlcihpdGVyRm4pKSkge1xuICAgICAgZm9yIChpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKE8pLCByZXN1bHQgPSBuZXcgQygpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7IGluZGV4KyspIHtcbiAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IGNhbGwoaXRlcmF0b3IsIG1hcGZuLCBbc3RlcC52YWx1ZSwgaW5kZXhdLCB0cnVlKSA6IHN0ZXAudmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gICAgICBmb3IgKHJlc3VsdCA9IG5ldyBDKGxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7XG4gICAgICAgIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgaW5kZXgsIG1hcHBpbmcgPyBtYXBmbihPW2luZGV4XSwgaW5kZXgpIDogT1tpbmRleF0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXN1bHQubGVuZ3RoID0gaW5kZXg7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufSk7XG5cbn0se1wiMTE4XCI6MTE4LFwiMTE5XCI6MTE5LFwiMTI5XCI6MTI5LFwiMjRcIjoyNCxcIjI1XCI6MjUsXCIzM1wiOjMzLFwiNDhcIjo0OCxcIjUzXCI6NTMsXCI1NlwiOjU2fV0sMTM5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJGluZGV4T2YgPSBfZGVyZXFfKDExKShmYWxzZSk7XG52YXIgJG5hdGl2ZSA9IFtdLmluZGV4T2Y7XG52YXIgTkVHQVRJVkVfWkVSTyA9ICEhJG5hdGl2ZSAmJiAxIC8gWzFdLmluZGV4T2YoMSwgLTApIDwgMDtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoTkVHQVRJVkVfWkVSTyB8fCAhX2RlcmVxXygxMDUpKCRuYXRpdmUpKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMTEgLyAxNS40LjQuMTQgQXJyYXkucHJvdG90eXBlLmluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKVxuICBpbmRleE9mOiBmdW5jdGlvbiBpbmRleE9mKHNlYXJjaEVsZW1lbnQgLyogLCBmcm9tSW5kZXggPSAwICovKSB7XG4gICAgcmV0dXJuIE5FR0FUSVZFX1pFUk9cbiAgICAgIC8vIGNvbnZlcnQgLTAgdG8gKzBcbiAgICAgID8gJG5hdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IDBcbiAgICAgIDogJGluZGV4T2YodGhpcywgc2VhcmNoRWxlbWVudCwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTFcIjoxMSxcIjMzXCI6MzN9XSwxNDA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjIuMS4yLjIgLyAxNS40LjMuMiBBcnJheS5pc0FycmF5KGFyZylcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnQXJyYXknLCB7IGlzQXJyYXk6IF9kZXJlcV8oNDkpIH0pO1xuXG59LHtcIjMzXCI6MzMsXCI0OVwiOjQ5fV0sMTQxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBhZGRUb1Vuc2NvcGFibGVzID0gX2RlcmVxXyg1KTtcbnZhciBzdGVwID0gX2RlcmVxXyg1Nyk7XG52YXIgSXRlcmF0b3JzID0gX2RlcmVxXyg1OCk7XG52YXIgdG9JT2JqZWN0ID0gX2RlcmVxXygxMTcpO1xuXG4vLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpXG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxuLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKVxuLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5tb2R1bGUuZXhwb3J0cyA9IF9kZXJlcV8oNTUpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbiAoaXRlcmF0ZWQsIGtpbmQpIHtcbiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZFxuLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbiAoKSB7XG4gIHZhciBPID0gdGhpcy5fdDtcbiAgdmFyIGtpbmQgPSB0aGlzLl9rO1xuICB2YXIgaW5kZXggPSB0aGlzLl9pKys7XG4gIGlmICghTyB8fCBpbmRleCA+PSBPLmxlbmd0aCkge1xuICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0ZXAoMSk7XG4gIH1cbiAgaWYgKGtpbmQgPT0gJ2tleXMnKSByZXR1cm4gc3RlcCgwLCBpbmRleCk7XG4gIGlmIChraW5kID09ICd2YWx1ZXMnKSByZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7XG4gIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTtcbn0sICd2YWx1ZXMnKTtcblxuLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KVxuSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTtcblxuYWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7XG5cbn0se1wiMTE3XCI6MTE3LFwiNVwiOjUsXCI1NVwiOjU1LFwiNTdcIjo1NyxcIjU4XCI6NTh9XSwxNDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5qb2luKHNlcGFyYXRvcilcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgdG9JT2JqZWN0ID0gX2RlcmVxXygxMTcpO1xudmFyIGFycmF5Sm9pbiA9IFtdLmpvaW47XG5cbi8vIGZhbGxiYWNrIGZvciBub3QgYXJyYXktbGlrZSBzdHJpbmdzXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChfZGVyZXFfKDQ3KSAhPSBPYmplY3QgfHwgIV9kZXJlcV8oMTA1KShhcnJheUpvaW4pKSwgJ0FycmF5Jywge1xuICBqb2luOiBmdW5jdGlvbiBqb2luKHNlcGFyYXRvcikge1xuICAgIHJldHVybiBhcnJheUpvaW4uY2FsbCh0b0lPYmplY3QodGhpcyksIHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkID8gJywnIDogc2VwYXJhdG9yKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTE3XCI6MTE3LFwiMzNcIjozMyxcIjQ3XCI6NDd9XSwxNDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b0lPYmplY3QgPSBfZGVyZXFfKDExNyk7XG52YXIgdG9JbnRlZ2VyID0gX2RlcmVxXygxMTYpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyICRuYXRpdmUgPSBbXS5sYXN0SW5kZXhPZjtcbnZhciBORUdBVElWRV9aRVJPID0gISEkbmF0aXZlICYmIDEgLyBbMV0ubGFzdEluZGV4T2YoMSwgLTApIDwgMDtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoTkVHQVRJVkVfWkVSTyB8fCAhX2RlcmVxXygxMDUpKCRuYXRpdmUpKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMTQgLyAxNS40LjQuMTUgQXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgWywgZnJvbUluZGV4XSlcbiAgbGFzdEluZGV4T2Y6IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgLyogLCBmcm9tSW5kZXggPSBAWyotMV0gKi8pIHtcbiAgICAvLyBjb252ZXJ0IC0wIHRvICswXG4gICAgaWYgKE5FR0FUSVZFX1pFUk8pIHJldHVybiAkbmF0aXZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgMDtcbiAgICB2YXIgTyA9IHRvSU9iamVjdCh0aGlzKTtcbiAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICAgIHZhciBpbmRleCA9IGxlbmd0aCAtIDE7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBpbmRleCA9IE1hdGgubWluKGluZGV4LCB0b0ludGVnZXIoYXJndW1lbnRzWzFdKSk7XG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBsZW5ndGggKyBpbmRleDtcbiAgICBmb3IgKDtpbmRleCA+PSAwOyBpbmRleC0tKSBpZiAoaW5kZXggaW4gTykgaWYgKE9baW5kZXhdID09PSBzZWFyY2hFbGVtZW50KSByZXR1cm4gaW5kZXggfHwgMDtcbiAgICByZXR1cm4gLTE7XG4gIH1cbn0pO1xuXG59LHtcIjEwNVwiOjEwNSxcIjExNlwiOjExNixcIjExN1wiOjExNyxcIjExOFwiOjExOCxcIjMzXCI6MzN9XSwxNDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkbWFwID0gX2RlcmVxXygxMikoMSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIV9kZXJlcV8oMTA1KShbXS5tYXAsIHRydWUpLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMy4xNSAvIDE1LjQuNC4xOSBBcnJheS5wcm90b3R5cGUubWFwKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG4gIG1hcDogZnVuY3Rpb24gbWFwKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKSB7XG4gICAgcmV0dXJuICRtYXAodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTJcIjoxMixcIjMzXCI6MzN9XSwxNDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBjcmVhdGVQcm9wZXJ0eSA9IF9kZXJlcV8oMjQpO1xuXG4vLyBXZWJLaXQgQXJyYXkub2YgaXNuJ3QgZ2VuZXJpY1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEYoKSB7IC8qIGVtcHR5ICovIH1cbiAgcmV0dXJuICEoQXJyYXkub2YuY2FsbChGKSBpbnN0YW5jZW9mIEYpO1xufSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4yLjMgQXJyYXkub2YoIC4uLml0ZW1zKVxuICBvZjogZnVuY3Rpb24gb2YoLyogLi4uYXJncyAqLykge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciByZXN1bHQgPSBuZXcgKHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgPyB0aGlzIDogQXJyYXkpKGFMZW4pO1xuICAgIHdoaWxlIChhTGVuID4gaW5kZXgpIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgaW5kZXgsIGFyZ3VtZW50c1tpbmRleCsrXSk7XG4gICAgcmVzdWx0Lmxlbmd0aCA9IGFMZW47XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufSk7XG5cbn0se1wiMjRcIjoyNCxcIjMzXCI6MzMsXCIzNVwiOjM1fV0sMTQ2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHJlZHVjZSA9IF9kZXJlcV8oMTMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFfZGVyZXFfKDEwNSkoW10ucmVkdWNlUmlnaHQsIHRydWUpLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMy4xOSAvIDE1LjQuNC4yMiBBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHQoY2FsbGJhY2tmbiBbLCBpbml0aWFsVmFsdWVdKVxuICByZWR1Y2VSaWdodDogZnVuY3Rpb24gcmVkdWNlUmlnaHQoY2FsbGJhY2tmbiAvKiAsIGluaXRpYWxWYWx1ZSAqLykge1xuICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c1sxXSwgdHJ1ZSk7XG4gIH1cbn0pO1xuXG59LHtcIjEwNVwiOjEwNSxcIjEzXCI6MTMsXCIzM1wiOjMzfV0sMTQ3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHJlZHVjZSA9IF9kZXJlcV8oMTMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFfZGVyZXFfKDEwNSkoW10ucmVkdWNlLCB0cnVlKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMTggLyAxNS40LjQuMjEgQXJyYXkucHJvdG90eXBlLnJlZHVjZShjYWxsYmFja2ZuIFssIGluaXRpYWxWYWx1ZV0pXG4gIHJlZHVjZTogZnVuY3Rpb24gcmVkdWNlKGNhbGxiYWNrZm4gLyogLCBpbml0aWFsVmFsdWUgKi8pIHtcbiAgICByZXR1cm4gJHJlZHVjZSh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoLCBhcmd1bWVudHNbMV0sIGZhbHNlKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTNcIjoxMyxcIjMzXCI6MzN9XSwxNDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBodG1sID0gX2RlcmVxXyg0Myk7XG52YXIgY29mID0gX2RlcmVxXygxOCk7XG52YXIgdG9BYnNvbHV0ZUluZGV4ID0gX2RlcmVxXygxMTQpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIGFycmF5U2xpY2UgPSBbXS5zbGljZTtcblxuLy8gZmFsbGJhY2sgZm9yIG5vdCBhcnJheS1saWtlIEVTMyBzdHJpbmdzIGFuZCBET00gb2JqZWN0c1xuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIGlmIChodG1sKSBhcnJheVNsaWNlLmNhbGwoaHRtbCk7XG59KSwgJ0FycmF5Jywge1xuICBzbGljZTogZnVuY3Rpb24gc2xpY2UoYmVnaW4sIGVuZCkge1xuICAgIHZhciBsZW4gPSB0b0xlbmd0aCh0aGlzLmxlbmd0aCk7XG4gICAgdmFyIGtsYXNzID0gY29mKHRoaXMpO1xuICAgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogZW5kO1xuICAgIGlmIChrbGFzcyA9PSAnQXJyYXknKSByZXR1cm4gYXJyYXlTbGljZS5jYWxsKHRoaXMsIGJlZ2luLCBlbmQpO1xuICAgIHZhciBzdGFydCA9IHRvQWJzb2x1dGVJbmRleChiZWdpbiwgbGVuKTtcbiAgICB2YXIgdXBUbyA9IHRvQWJzb2x1dGVJbmRleChlbmQsIGxlbik7XG4gICAgdmFyIHNpemUgPSB0b0xlbmd0aCh1cFRvIC0gc3RhcnQpO1xuICAgIHZhciBjbG9uZWQgPSBBcnJheShzaXplKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBzaXplOyBpKyspIGNsb25lZFtpXSA9IGtsYXNzID09ICdTdHJpbmcnXG4gICAgICA/IHRoaXMuY2hhckF0KHN0YXJ0ICsgaSlcbiAgICAgIDogdGhpc1tzdGFydCArIGldO1xuICAgIHJldHVybiBjbG9uZWQ7XG4gIH1cbn0pO1xuXG59LHtcIjExNFwiOjExNCxcIjExOFwiOjExOCxcIjE4XCI6MTgsXCIzM1wiOjMzLFwiMzVcIjozNSxcIjQzXCI6NDN9XSwxNDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkc29tZSA9IF9kZXJlcV8oMTIpKDMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFfZGVyZXFfKDEwNSkoW10uc29tZSwgdHJ1ZSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4zLjIzIC8gMTUuNC40LjE3IEFycmF5LnByb3RvdHlwZS5zb21lKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG4gIHNvbWU6IGZ1bmN0aW9uIHNvbWUoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICByZXR1cm4gJHNvbWUodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cbn0se1wiMTA1XCI6MTA1LFwiMTJcIjoxMixcIjMzXCI6MzN9XSwxNTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBhRnVuY3Rpb24gPSBfZGVyZXFfKDMpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIGZhaWxzID0gX2RlcmVxXygzNSk7XG52YXIgJHNvcnQgPSBbXS5zb3J0O1xudmFyIHRlc3QgPSBbMSwgMiwgM107XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gSUU4LVxuICB0ZXN0LnNvcnQodW5kZWZpbmVkKTtcbn0pIHx8ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIFY4IGJ1Z1xuICB0ZXN0LnNvcnQobnVsbCk7XG4gIC8vIE9sZCBXZWJLaXRcbn0pIHx8ICFfZGVyZXFfKDEwNSkoJHNvcnQpKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMjUgQXJyYXkucHJvdG90eXBlLnNvcnQoY29tcGFyZWZuKVxuICBzb3J0OiBmdW5jdGlvbiBzb3J0KGNvbXBhcmVmbikge1xuICAgIHJldHVybiBjb21wYXJlZm4gPT09IHVuZGVmaW5lZFxuICAgICAgPyAkc29ydC5jYWxsKHRvT2JqZWN0KHRoaXMpKVxuICAgICAgOiAkc29ydC5jYWxsKHRvT2JqZWN0KHRoaXMpLCBhRnVuY3Rpb24oY29tcGFyZWZuKSk7XG4gIH1cbn0pO1xuXG59LHtcIjEwNVwiOjEwNSxcIjExOVwiOjExOSxcIjNcIjozLFwiMzNcIjozMyxcIjM1XCI6MzV9XSwxNTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuX2RlcmVxXygxMDApKCdBcnJheScpO1xuXG59LHtcIjEwMFwiOjEwMH1dLDE1MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4zLjMuMSAvIDE1LjkuNC40IERhdGUubm93KClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnRGF0ZScsIHsgbm93OiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgfSB9KTtcblxufSx7XCIzM1wiOjMzfV0sMTUzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjMuNC4zNiAvIDE1LjkuNS40MyBEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZygpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIHRvSVNPU3RyaW5nID0gX2RlcmVxXygyNik7XG5cbi8vIFBoYW50b21KUyAvIG9sZCBXZWJLaXQgaGFzIGEgYnJva2VuIGltcGxlbWVudGF0aW9uc1xuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgIT09IHRvSVNPU3RyaW5nKSwgJ0RhdGUnLCB7XG4gIHRvSVNPU3RyaW5nOiB0b0lTT1N0cmluZ1xufSk7XG5cbn0se1wiMjZcIjoyNixcIjMzXCI6MzN9XSwxNTQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b09iamVjdCA9IF9kZXJlcV8oMTE5KTtcbnZhciB0b1ByaW1pdGl2ZSA9IF9kZXJlcV8oMTIwKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBuZXcgRGF0ZShOYU4pLnRvSlNPTigpICE9PSBudWxsXG4gICAgfHwgRGF0ZS5wcm90b3R5cGUudG9KU09OLmNhbGwoeyB0b0lTT1N0cmluZzogZnVuY3Rpb24gKCkgeyByZXR1cm4gMTsgfSB9KSAhPT0gMTtcbn0pLCAnRGF0ZScsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKGtleSkge1xuICAgIHZhciBPID0gdG9PYmplY3QodGhpcyk7XG4gICAgdmFyIHB2ID0gdG9QcmltaXRpdmUoTyk7XG4gICAgcmV0dXJuIHR5cGVvZiBwdiA9PSAnbnVtYmVyJyAmJiAhaXNGaW5pdGUocHYpID8gbnVsbCA6IE8udG9JU09TdHJpbmcoKTtcbiAgfVxufSk7XG5cbn0se1wiMTE5XCI6MTE5LFwiMTIwXCI6MTIwLFwiMzNcIjozMyxcIjM1XCI6MzV9XSwxNTU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIFRPX1BSSU1JVElWRSA9IF9kZXJlcV8oMTI4KSgndG9QcmltaXRpdmUnKTtcbnZhciBwcm90byA9IERhdGUucHJvdG90eXBlO1xuXG5pZiAoIShUT19QUklNSVRJVkUgaW4gcHJvdG8pKSBfZGVyZXFfKDQyKShwcm90bywgVE9fUFJJTUlUSVZFLCBfZGVyZXFfKDI3KSk7XG5cbn0se1wiMTI4XCI6MTI4LFwiMjdcIjoyNyxcIjQyXCI6NDJ9XSwxNTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIERhdGVQcm90byA9IERhdGUucHJvdG90eXBlO1xudmFyIElOVkFMSURfREFURSA9ICdJbnZhbGlkIERhdGUnO1xudmFyIFRPX1NUUklORyA9ICd0b1N0cmluZyc7XG52YXIgJHRvU3RyaW5nID0gRGF0ZVByb3RvW1RPX1NUUklOR107XG52YXIgZ2V0VGltZSA9IERhdGVQcm90by5nZXRUaW1lO1xuaWYgKG5ldyBEYXRlKE5hTikgKyAnJyAhPSBJTlZBTElEX0RBVEUpIHtcbiAgX2RlcmVxXyg5NCkoRGF0ZVByb3RvLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHZhciB2YWx1ZSA9IGdldFRpbWUuY2FsbCh0aGlzKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/ICR0b1N0cmluZy5jYWxsKHRoaXMpIDogSU5WQUxJRF9EQVRFO1xuICB9KTtcbn1cblxufSx7XCI5NFwiOjk0fV0sMTU3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjIuMy4yIC8gMTUuMy40LjUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQodGhpc0FyZywgYXJncy4uLilcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnRnVuY3Rpb24nLCB7IGJpbmQ6IF9kZXJlcV8oMTYpIH0pO1xuXG59LHtcIjE2XCI6MTYsXCIzM1wiOjMzfV0sMTU4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xudmFyIGdldFByb3RvdHlwZU9mID0gX2RlcmVxXyg3OSk7XG52YXIgSEFTX0lOU1RBTkNFID0gX2RlcmVxXygxMjgpKCdoYXNJbnN0YW5jZScpO1xudmFyIEZ1bmN0aW9uUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7XG4vLyAxOS4yLjMuNiBGdW5jdGlvbi5wcm90b3R5cGVbQEBoYXNJbnN0YW5jZV0oVilcbmlmICghKEhBU19JTlNUQU5DRSBpbiBGdW5jdGlvblByb3RvKSkgX2RlcmVxXyg3MikuZihGdW5jdGlvblByb3RvLCBIQVNfSU5TVEFOQ0UsIHsgdmFsdWU6IGZ1bmN0aW9uIChPKSB7XG4gIGlmICh0eXBlb2YgdGhpcyAhPSAnZnVuY3Rpb24nIHx8ICFpc09iamVjdChPKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIWlzT2JqZWN0KHRoaXMucHJvdG90eXBlKSkgcmV0dXJuIE8gaW5zdGFuY2VvZiB0aGlzO1xuICAvLyBmb3IgZW52aXJvbm1lbnQgdy9vIG5hdGl2ZSBgQEBoYXNJbnN0YW5jZWAgbG9naWMgZW5vdWdoIGBpbnN0YW5jZW9mYCwgYnV0IGFkZCB0aGlzOlxuICB3aGlsZSAoTyA9IGdldFByb3RvdHlwZU9mKE8pKSBpZiAodGhpcy5wcm90b3R5cGUgPT09IE8pIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59IH0pO1xuXG59LHtcIjEyOFwiOjEyOCxcIjUxXCI6NTEsXCI3MlwiOjcyLFwiNzlcIjo3OX1dLDE1OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgZFAgPSBfZGVyZXFfKDcyKS5mO1xudmFyIEZQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbnZhciBuYW1lUkUgPSAvXlxccypmdW5jdGlvbiAoW14gKF0qKS87XG52YXIgTkFNRSA9ICduYW1lJztcblxuLy8gMTkuMi40LjIgbmFtZVxuTkFNRSBpbiBGUHJvdG8gfHwgX2RlcmVxXygyOSkgJiYgZFAoRlByb3RvLCBOQU1FLCB7XG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAoJycgKyB0aGlzKS5tYXRjaChuYW1lUkUpWzFdO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cbn0pO1xuXG59LHtcIjI5XCI6MjksXCI3MlwiOjcyfV0sMTYwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBzdHJvbmcgPSBfZGVyZXFfKDE5KTtcbnZhciB2YWxpZGF0ZSA9IF9kZXJlcV8oMTI1KTtcbnZhciBNQVAgPSAnTWFwJztcblxuLy8gMjMuMSBNYXAgT2JqZWN0c1xubW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKDIyKShNQVAsIGZ1bmN0aW9uIChnZXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1hcCgpIHsgcmV0dXJuIGdldCh0aGlzLCBhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7IH07XG59LCB7XG4gIC8vIDIzLjEuMy42IE1hcC5wcm90b3R5cGUuZ2V0KGtleSlcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgdmFyIGVudHJ5ID0gc3Ryb25nLmdldEVudHJ5KHZhbGlkYXRlKHRoaXMsIE1BUCksIGtleSk7XG4gICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5LnY7XG4gIH0sXG4gIC8vIDIzLjEuMy45IE1hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpXG4gIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gc3Ryb25nLmRlZih2YWxpZGF0ZSh0aGlzLCBNQVApLCBrZXkgPT09IDAgPyAwIDoga2V5LCB2YWx1ZSk7XG4gIH1cbn0sIHN0cm9uZywgdHJ1ZSk7XG5cbn0se1wiMTI1XCI6MTI1LFwiMTlcIjoxOSxcIjIyXCI6MjJ9XSwxNjE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjAuMi4yLjMgTWF0aC5hY29zaCh4KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBsb2cxcCA9IF9kZXJlcV8oNjMpO1xudmFyIHNxcnQgPSBNYXRoLnNxcnQ7XG52YXIgJGFjb3NoID0gTWF0aC5hY29zaDtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKCRhY29zaFxuICAvLyBWOCBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zNTA5XG4gICYmIE1hdGguZmxvb3IoJGFjb3NoKE51bWJlci5NQVhfVkFMVUUpKSA9PSA3MTBcbiAgLy8gVG9yIEJyb3dzZXIgYnVnOiBNYXRoLmFjb3NoKEluZmluaXR5KSAtPiBOYU5cbiAgJiYgJGFjb3NoKEluZmluaXR5KSA9PSBJbmZpbml0eVxuKSwgJ01hdGgnLCB7XG4gIGFjb3NoOiBmdW5jdGlvbiBhY29zaCh4KSB7XG4gICAgcmV0dXJuICh4ID0gK3gpIDwgMSA/IE5hTiA6IHggPiA5NDkwNjI2NS42MjQyNTE1NlxuICAgICAgPyBNYXRoLmxvZyh4KSArIE1hdGguTE4yXG4gICAgICA6IGxvZzFwKHggLSAxICsgc3FydCh4IC0gMSkgKiBzcXJ0KHggKyAxKSk7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI2M1wiOjYzfV0sMTYyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi41IE1hdGguYXNpbmgoeClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJGFzaW5oID0gTWF0aC5hc2luaDtcblxuZnVuY3Rpb24gYXNpbmgoeCkge1xuICByZXR1cm4gIWlzRmluaXRlKHggPSAreCkgfHwgeCA9PSAwID8geCA6IHggPCAwID8gLWFzaW5oKC14KSA6IE1hdGgubG9nKHggKyBNYXRoLnNxcnQoeCAqIHggKyAxKSk7XG59XG5cbi8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hc2luaCgwKSAtPiAtMFxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKCRhc2luaCAmJiAxIC8gJGFzaW5oKDApID4gMCksICdNYXRoJywgeyBhc2luaDogYXNpbmggfSk7XG5cbn0se1wiMzNcIjozM31dLDE2MzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuNyBNYXRoLmF0YW5oKHgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyICRhdGFuaCA9IE1hdGguYXRhbmg7XG5cbi8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hdGFuaCgtMCkgLT4gMFxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKCRhdGFuaCAmJiAxIC8gJGF0YW5oKC0wKSA8IDApLCAnTWF0aCcsIHtcbiAgYXRhbmg6IGZ1bmN0aW9uIGF0YW5oKHgpIHtcbiAgICByZXR1cm4gKHggPSAreCkgPT0gMCA/IHggOiBNYXRoLmxvZygoMSArIHgpIC8gKDEgLSB4KSkgLyAyO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzfV0sMTY0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi45IE1hdGguY2JydCh4KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBzaWduID0gX2RlcmVxXyg2NSk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgY2JydDogZnVuY3Rpb24gY2JydCh4KSB7XG4gICAgcmV0dXJuIHNpZ24oeCA9ICt4KSAqIE1hdGgucG93KE1hdGguYWJzKHgpLCAxIC8gMyk7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI2NVwiOjY1fV0sMTY1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4xMSBNYXRoLmNsejMyKHgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGNsejMyOiBmdW5jdGlvbiBjbHozMih4KSB7XG4gICAgcmV0dXJuICh4ID4+Pj0gMCkgPyAzMSAtIE1hdGguZmxvb3IoTWF0aC5sb2coeCArIDAuNSkgKiBNYXRoLkxPRzJFKSA6IDMyO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzfV0sMTY2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4xMiBNYXRoLmNvc2goeClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZXhwID0gTWF0aC5leHA7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgY29zaDogZnVuY3Rpb24gY29zaCh4KSB7XG4gICAgcmV0dXJuIChleHAoeCA9ICt4KSArIGV4cCgteCkpIC8gMjtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozM31dLDE2NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMTQgTWF0aC5leHBtMSh4KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkZXhwbTEgPSBfZGVyZXFfKDYxKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoJGV4cG0xICE9IE1hdGguZXhwbTEpLCAnTWF0aCcsIHsgZXhwbTE6ICRleHBtMSB9KTtcblxufSx7XCIzM1wiOjMzLFwiNjFcIjo2MX1dLDE2ODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMTYgTWF0aC5mcm91bmQoeClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsgZnJvdW5kOiBfZGVyZXFfKDYyKSB9KTtcblxufSx7XCIzM1wiOjMzLFwiNjJcIjo2Mn1dLDE2OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMTcgTWF0aC5oeXBvdChbdmFsdWUxWywgdmFsdWUyWywg4oCmIF1dXSlcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgYWJzID0gTWF0aC5hYnM7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgaHlwb3Q6IGZ1bmN0aW9uIGh5cG90KHZhbHVlMSwgdmFsdWUyKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICB2YXIgc3VtID0gMDtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBsYXJnID0gMDtcbiAgICB2YXIgYXJnLCBkaXY7XG4gICAgd2hpbGUgKGkgPCBhTGVuKSB7XG4gICAgICBhcmcgPSBhYnMoYXJndW1lbnRzW2krK10pO1xuICAgICAgaWYgKGxhcmcgPCBhcmcpIHtcbiAgICAgICAgZGl2ID0gbGFyZyAvIGFyZztcbiAgICAgICAgc3VtID0gc3VtICogZGl2ICogZGl2ICsgMTtcbiAgICAgICAgbGFyZyA9IGFyZztcbiAgICAgIH0gZWxzZSBpZiAoYXJnID4gMCkge1xuICAgICAgICBkaXYgPSBhcmcgLyBsYXJnO1xuICAgICAgICBzdW0gKz0gZGl2ICogZGl2O1xuICAgICAgfSBlbHNlIHN1bSArPSBhcmc7XG4gICAgfVxuICAgIHJldHVybiBsYXJnID09PSBJbmZpbml0eSA/IEluZmluaXR5IDogbGFyZyAqIE1hdGguc3FydChzdW0pO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzfV0sMTcwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4xOCBNYXRoLmltdWwoeCwgeSlcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJGltdWwgPSBNYXRoLmltdWw7XG5cbi8vIHNvbWUgV2ViS2l0IHZlcnNpb25zIGZhaWxzIHdpdGggYmlnIG51bWJlcnMsIHNvbWUgaGFzIHdyb25nIGFyaXR5XG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIF9kZXJlcV8oMzUpKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICRpbXVsKDB4ZmZmZmZmZmYsIDUpICE9IC01IHx8ICRpbXVsLmxlbmd0aCAhPSAyO1xufSksICdNYXRoJywge1xuICBpbXVsOiBmdW5jdGlvbiBpbXVsKHgsIHkpIHtcbiAgICB2YXIgVUlOVDE2ID0gMHhmZmZmO1xuICAgIHZhciB4biA9ICt4O1xuICAgIHZhciB5biA9ICt5O1xuICAgIHZhciB4bCA9IFVJTlQxNiAmIHhuO1xuICAgIHZhciB5bCA9IFVJTlQxNiAmIHluO1xuICAgIHJldHVybiAwIHwgeGwgKiB5bCArICgoVUlOVDE2ICYgeG4gPj4+IDE2KSAqIHlsICsgeGwgKiAoVUlOVDE2ICYgeW4gPj4+IDE2KSA8PCAxNiA+Pj4gMCk7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCIzNVwiOjM1fV0sMTcxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4yMSBNYXRoLmxvZzEwKHgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGxvZzEwOiBmdW5jdGlvbiBsb2cxMCh4KSB7XG4gICAgcmV0dXJuIE1hdGgubG9nKHgpICogTWF0aC5MT0cxMEU7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzN9XSwxNzI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsgbG9nMXA6IF9kZXJlcV8oNjMpIH0pO1xuXG59LHtcIjMzXCI6MzMsXCI2M1wiOjYzfV0sMTczOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4yMiBNYXRoLmxvZzIoeClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgbG9nMjogZnVuY3Rpb24gbG9nMih4KSB7XG4gICAgcmV0dXJuIE1hdGgubG9nKHgpIC8gTWF0aC5MTjI7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzN9XSwxNzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjAuMi4yLjI4IE1hdGguc2lnbih4KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywgeyBzaWduOiBfZGVyZXFfKDY1KSB9KTtcblxufSx7XCIzM1wiOjMzLFwiNjVcIjo2NX1dLDE3NTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMzAgTWF0aC5zaW5oKHgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGV4cG0xID0gX2RlcmVxXyg2MSk7XG52YXIgZXhwID0gTWF0aC5leHA7XG5cbi8vIFY4IG5lYXIgQ2hyb21pdW0gMzggaGFzIGEgcHJvYmxlbSB3aXRoIHZlcnkgc21hbGwgbnVtYmVyc1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAhTWF0aC5zaW5oKC0yZS0xNykgIT0gLTJlLTE3O1xufSksICdNYXRoJywge1xuICBzaW5oOiBmdW5jdGlvbiBzaW5oKHgpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoeCA9ICt4KSA8IDFcbiAgICAgID8gKGV4cG0xKHgpIC0gZXhwbTEoLXgpKSAvIDJcbiAgICAgIDogKGV4cCh4IC0gMSkgLSBleHAoLXggLSAxKSkgKiAoTWF0aC5FIC8gMik7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCIzNVwiOjM1LFwiNjFcIjo2MX1dLDE3NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4yLjIuMzMgTWF0aC50YW5oKHgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGV4cG0xID0gX2RlcmVxXyg2MSk7XG52YXIgZXhwID0gTWF0aC5leHA7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgdGFuaDogZnVuY3Rpb24gdGFuaCh4KSB7XG4gICAgdmFyIGEgPSBleHBtMSh4ID0gK3gpO1xuICAgIHZhciBiID0gZXhwbTEoLXgpO1xuICAgIHJldHVybiBhID09IEluZmluaXR5ID8gMSA6IGIgPT0gSW5maW5pdHkgPyAtMSA6IChhIC0gYikgLyAoZXhwKHgpICsgZXhwKC14KSk7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI2MVwiOjYxfV0sMTc3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjIuMi4zNCBNYXRoLnRydW5jKHgpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIHRydW5jOiBmdW5jdGlvbiB0cnVuYyhpdCkge1xuICAgIHJldHVybiAoaXQgPiAwID8gTWF0aC5mbG9vciA6IE1hdGguY2VpbCkoaXQpO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzfV0sMTc4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSBfZGVyZXFfKDQwKTtcbnZhciBoYXMgPSBfZGVyZXFfKDQxKTtcbnZhciBjb2YgPSBfZGVyZXFfKDE4KTtcbnZhciBpbmhlcml0SWZSZXF1aXJlZCA9IF9kZXJlcV8oNDUpO1xudmFyIHRvUHJpbWl0aXZlID0gX2RlcmVxXygxMjApO1xudmFyIGZhaWxzID0gX2RlcmVxXygzNSk7XG52YXIgZ09QTiA9IF9kZXJlcV8oNzcpLmY7XG52YXIgZ09QRCA9IF9kZXJlcV8oNzUpLmY7XG52YXIgZFAgPSBfZGVyZXFfKDcyKS5mO1xudmFyICR0cmltID0gX2RlcmVxXygxMTEpLnRyaW07XG52YXIgTlVNQkVSID0gJ051bWJlcic7XG52YXIgJE51bWJlciA9IGdsb2JhbFtOVU1CRVJdO1xudmFyIEJhc2UgPSAkTnVtYmVyO1xudmFyIHByb3RvID0gJE51bWJlci5wcm90b3R5cGU7XG4vLyBPcGVyYSB+MTIgaGFzIGJyb2tlbiBPYmplY3QjdG9TdHJpbmdcbnZhciBCUk9LRU5fQ09GID0gY29mKF9kZXJlcV8oNzEpKHByb3RvKSkgPT0gTlVNQkVSO1xudmFyIFRSSU0gPSAndHJpbScgaW4gU3RyaW5nLnByb3RvdHlwZTtcblxuLy8gNy4xLjMgVG9OdW1iZXIoYXJndW1lbnQpXG52YXIgdG9OdW1iZXIgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgdmFyIGl0ID0gdG9QcmltaXRpdmUoYXJndW1lbnQsIGZhbHNlKTtcbiAgaWYgKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyAmJiBpdC5sZW5ndGggPiAyKSB7XG4gICAgaXQgPSBUUklNID8gaXQudHJpbSgpIDogJHRyaW0oaXQsIDMpO1xuICAgIHZhciBmaXJzdCA9IGl0LmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIHRoaXJkLCByYWRpeCwgbWF4Q29kZTtcbiAgICBpZiAoZmlyc3QgPT09IDQzIHx8IGZpcnN0ID09PSA0NSkge1xuICAgICAgdGhpcmQgPSBpdC5jaGFyQ29kZUF0KDIpO1xuICAgICAgaWYgKHRoaXJkID09PSA4OCB8fCB0aGlyZCA9PT0gMTIwKSByZXR1cm4gTmFOOyAvLyBOdW1iZXIoJysweDEnKSBzaG91bGQgYmUgTmFOLCBvbGQgVjggZml4XG4gICAgfSBlbHNlIGlmIChmaXJzdCA9PT0gNDgpIHtcbiAgICAgIHN3aXRjaCAoaXQuY2hhckNvZGVBdCgxKSkge1xuICAgICAgICBjYXNlIDY2OiBjYXNlIDk4OiByYWRpeCA9IDI7IG1heENvZGUgPSA0OTsgYnJlYWs7IC8vIGZhc3QgZXF1YWwgL14wYlswMV0rJC9pXG4gICAgICAgIGNhc2UgNzk6IGNhc2UgMTExOiByYWRpeCA9IDg7IG1heENvZGUgPSA1NTsgYnJlYWs7IC8vIGZhc3QgZXF1YWwgL14wb1swLTddKyQvaVxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gK2l0O1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgZGlnaXRzID0gaXQuc2xpY2UoMiksIGkgPSAwLCBsID0gZGlnaXRzLmxlbmd0aCwgY29kZTsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb2RlID0gZGlnaXRzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIC8vIHBhcnNlSW50IHBhcnNlcyBhIHN0cmluZyB0byBhIGZpcnN0IHVuYXZhaWxhYmxlIHN5bWJvbFxuICAgICAgICAvLyBidXQgVG9OdW1iZXIgc2hvdWxkIHJldHVybiBOYU4gaWYgYSBzdHJpbmcgY29udGFpbnMgdW5hdmFpbGFibGUgc3ltYm9sc1xuICAgICAgICBpZiAoY29kZSA8IDQ4IHx8IGNvZGUgPiBtYXhDb2RlKSByZXR1cm4gTmFOO1xuICAgICAgfSByZXR1cm4gcGFyc2VJbnQoZGlnaXRzLCByYWRpeCk7XG4gICAgfVxuICB9IHJldHVybiAraXQ7XG59O1xuXG5pZiAoISROdW1iZXIoJyAwbzEnKSB8fCAhJE51bWJlcignMGIxJykgfHwgJE51bWJlcignKzB4MScpKSB7XG4gICROdW1iZXIgPSBmdW5jdGlvbiBOdW1iZXIodmFsdWUpIHtcbiAgICB2YXIgaXQgPSBhcmd1bWVudHMubGVuZ3RoIDwgMSA/IDAgOiB2YWx1ZTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgcmV0dXJuIHRoYXQgaW5zdGFuY2VvZiAkTnVtYmVyXG4gICAgICAvLyBjaGVjayBvbiAxLi5jb25zdHJ1Y3Rvcihmb28pIGNhc2VcbiAgICAgICYmIChCUk9LRU5fQ09GID8gZmFpbHMoZnVuY3Rpb24gKCkgeyBwcm90by52YWx1ZU9mLmNhbGwodGhhdCk7IH0pIDogY29mKHRoYXQpICE9IE5VTUJFUilcbiAgICAgICAgPyBpbmhlcml0SWZSZXF1aXJlZChuZXcgQmFzZSh0b051bWJlcihpdCkpLCB0aGF0LCAkTnVtYmVyKSA6IHRvTnVtYmVyKGl0KTtcbiAgfTtcbiAgZm9yICh2YXIga2V5cyA9IF9kZXJlcV8oMjkpID8gZ09QTihCYXNlKSA6IChcbiAgICAvLyBFUzM6XG4gICAgJ01BWF9WQUxVRSxNSU5fVkFMVUUsTmFOLE5FR0FUSVZFX0lORklOSVRZLFBPU0lUSVZFX0lORklOSVRZLCcgK1xuICAgIC8vIEVTNiAoaW4gY2FzZSwgaWYgbW9kdWxlcyB3aXRoIEVTNiBOdW1iZXIgc3RhdGljcyByZXF1aXJlZCBiZWZvcmUpOlxuICAgICdFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsJyArXG4gICAgJ01JTl9TQUZFX0lOVEVHRVIscGFyc2VGbG9hdCxwYXJzZUludCxpc0ludGVnZXInXG4gICkuc3BsaXQoJywnKSwgaiA9IDAsIGtleTsga2V5cy5sZW5ndGggPiBqOyBqKyspIHtcbiAgICBpZiAoaGFzKEJhc2UsIGtleSA9IGtleXNbal0pICYmICFoYXMoJE51bWJlciwga2V5KSkge1xuICAgICAgZFAoJE51bWJlciwga2V5LCBnT1BEKEJhc2UsIGtleSkpO1xuICAgIH1cbiAgfVxuICAkTnVtYmVyLnByb3RvdHlwZSA9IHByb3RvO1xuICBwcm90by5jb25zdHJ1Y3RvciA9ICROdW1iZXI7XG4gIF9kZXJlcV8oOTQpKGdsb2JhbCwgTlVNQkVSLCAkTnVtYmVyKTtcbn1cblxufSx7XCIxMTFcIjoxMTEsXCIxMjBcIjoxMjAsXCIxOFwiOjE4LFwiMjlcIjoyOSxcIjM1XCI6MzUsXCI0MFwiOjQwLFwiNDFcIjo0MSxcIjQ1XCI6NDUsXCI3MVwiOjcxLFwiNzJcIjo3MixcIjc1XCI6NzUsXCI3N1wiOjc3LFwiOTRcIjo5NH1dLDE3OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4xLjIuMSBOdW1iZXIuRVBTSUxPTlxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7IEVQU0lMT046IE1hdGgucG93KDIsIC01MikgfSk7XG5cbn0se1wiMzNcIjozM31dLDE4MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4xLjIuMiBOdW1iZXIuaXNGaW5pdGUobnVtYmVyKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBfaXNGaW5pdGUgPSBfZGVyZXFfKDQwKS5pc0Zpbml0ZTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7XG4gIGlzRmluaXRlOiBmdW5jdGlvbiBpc0Zpbml0ZShpdCkge1xuICAgIHJldHVybiB0eXBlb2YgaXQgPT0gJ251bWJlcicgJiYgX2lzRmluaXRlKGl0KTtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozMyxcIjQwXCI6NDB9XSwxODE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjAuMS4yLjMgTnVtYmVyLmlzSW50ZWdlcihudW1iZXIpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHsgaXNJbnRlZ2VyOiBfZGVyZXFfKDUwKSB9KTtcblxufSx7XCIzM1wiOjMzLFwiNTBcIjo1MH1dLDE4MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMC4xLjIuNCBOdW1iZXIuaXNOYU4obnVtYmVyKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7XG4gIGlzTmFOOiBmdW5jdGlvbiBpc05hTihudW1iZXIpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgcmV0dXJuIG51bWJlciAhPSBudW1iZXI7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzN9XSwxODM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjAuMS4yLjUgTnVtYmVyLmlzU2FmZUludGVnZXIobnVtYmVyKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBpc0ludGVnZXIgPSBfZGVyZXFfKDUwKTtcbnZhciBhYnMgPSBNYXRoLmFicztcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7XG4gIGlzU2FmZUludGVnZXI6IGZ1bmN0aW9uIGlzU2FmZUludGVnZXIobnVtYmVyKSB7XG4gICAgcmV0dXJuIGlzSW50ZWdlcihudW1iZXIpICYmIGFicyhudW1iZXIpIDw9IDB4MWZmZmZmZmZmZmZmZmY7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI1MFwiOjUwfV0sMTg0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjEuMi42IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHsgTUFYX1NBRkVfSU5URUdFUjogMHgxZmZmZmZmZmZmZmZmZiB9KTtcblxufSx7XCIzM1wiOjMzfV0sMTg1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDIwLjEuMi4xMCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7IE1JTl9TQUZFX0lOVEVHRVI6IC0weDFmZmZmZmZmZmZmZmZmIH0pO1xuXG59LHtcIjMzXCI6MzN9XSwxODY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkcGFyc2VGbG9hdCA9IF9kZXJlcV8oODYpO1xuLy8gMjAuMS4yLjEyIE51bWJlci5wYXJzZUZsb2F0KHN0cmluZylcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE51bWJlci5wYXJzZUZsb2F0ICE9ICRwYXJzZUZsb2F0KSwgJ051bWJlcicsIHsgcGFyc2VGbG9hdDogJHBhcnNlRmxvYXQgfSk7XG5cbn0se1wiMzNcIjozMyxcIjg2XCI6ODZ9XSwxODc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkcGFyc2VJbnQgPSBfZGVyZXFfKDg3KTtcbi8vIDIwLjEuMi4xMyBOdW1iZXIucGFyc2VJbnQoc3RyaW5nLCByYWRpeClcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE51bWJlci5wYXJzZUludCAhPSAkcGFyc2VJbnQpLCAnTnVtYmVyJywgeyBwYXJzZUludDogJHBhcnNlSW50IH0pO1xuXG59LHtcIjMzXCI6MzMsXCI4N1wiOjg3fV0sMTg4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgdG9JbnRlZ2VyID0gX2RlcmVxXygxMTYpO1xudmFyIGFOdW1iZXJWYWx1ZSA9IF9kZXJlcV8oNCk7XG52YXIgcmVwZWF0ID0gX2RlcmVxXygxMTApO1xudmFyICR0b0ZpeGVkID0gMS4wLnRvRml4ZWQ7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xudmFyIGRhdGEgPSBbMCwgMCwgMCwgMCwgMCwgMF07XG52YXIgRVJST1IgPSAnTnVtYmVyLnRvRml4ZWQ6IGluY29ycmVjdCBpbnZvY2F0aW9uISc7XG52YXIgWkVSTyA9ICcwJztcblxudmFyIG11bHRpcGx5ID0gZnVuY3Rpb24gKG4sIGMpIHtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIGMyID0gYztcbiAgd2hpbGUgKCsraSA8IDYpIHtcbiAgICBjMiArPSBuICogZGF0YVtpXTtcbiAgICBkYXRhW2ldID0gYzIgJSAxZTc7XG4gICAgYzIgPSBmbG9vcihjMiAvIDFlNyk7XG4gIH1cbn07XG52YXIgZGl2aWRlID0gZnVuY3Rpb24gKG4pIHtcbiAgdmFyIGkgPSA2O1xuICB2YXIgYyA9IDA7XG4gIHdoaWxlICgtLWkgPj0gMCkge1xuICAgIGMgKz0gZGF0YVtpXTtcbiAgICBkYXRhW2ldID0gZmxvb3IoYyAvIG4pO1xuICAgIGMgPSAoYyAlIG4pICogMWU3O1xuICB9XG59O1xudmFyIG51bVRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaSA9IDY7XG4gIHZhciBzID0gJyc7XG4gIHdoaWxlICgtLWkgPj0gMCkge1xuICAgIGlmIChzICE9PSAnJyB8fCBpID09PSAwIHx8IGRhdGFbaV0gIT09IDApIHtcbiAgICAgIHZhciB0ID0gU3RyaW5nKGRhdGFbaV0pO1xuICAgICAgcyA9IHMgPT09ICcnID8gdCA6IHMgKyByZXBlYXQuY2FsbChaRVJPLCA3IC0gdC5sZW5ndGgpICsgdDtcbiAgICB9XG4gIH0gcmV0dXJuIHM7XG59O1xudmFyIHBvdyA9IGZ1bmN0aW9uICh4LCBuLCBhY2MpIHtcbiAgcmV0dXJuIG4gPT09IDAgPyBhY2MgOiBuICUgMiA9PT0gMSA/IHBvdyh4LCBuIC0gMSwgYWNjICogeCkgOiBwb3coeCAqIHgsIG4gLyAyLCBhY2MpO1xufTtcbnZhciBsb2cgPSBmdW5jdGlvbiAoeCkge1xuICB2YXIgbiA9IDA7XG4gIHZhciB4MiA9IHg7XG4gIHdoaWxlICh4MiA+PSA0MDk2KSB7XG4gICAgbiArPSAxMjtcbiAgICB4MiAvPSA0MDk2O1xuICB9XG4gIHdoaWxlICh4MiA+PSAyKSB7XG4gICAgbiArPSAxO1xuICAgIHgyIC89IDI7XG4gIH0gcmV0dXJuIG47XG59O1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICghISR0b0ZpeGVkICYmIChcbiAgMC4wMDAwOC50b0ZpeGVkKDMpICE9PSAnMC4wMDAnIHx8XG4gIDAuOS50b0ZpeGVkKDApICE9PSAnMScgfHxcbiAgMS4yNTUudG9GaXhlZCgyKSAhPT0gJzEuMjUnIHx8XG4gIDEwMDAwMDAwMDAwMDAwMDAxMjguMC50b0ZpeGVkKDApICE9PSAnMTAwMDAwMDAwMDAwMDAwMDEyOCdcbikgfHwgIV9kZXJlcV8oMzUpKGZ1bmN0aW9uICgpIHtcbiAgLy8gVjggfiBBbmRyb2lkIDQuMy1cbiAgJHRvRml4ZWQuY2FsbCh7fSk7XG59KSksICdOdW1iZXInLCB7XG4gIHRvRml4ZWQ6IGZ1bmN0aW9uIHRvRml4ZWQoZnJhY3Rpb25EaWdpdHMpIHtcbiAgICB2YXIgeCA9IGFOdW1iZXJWYWx1ZSh0aGlzLCBFUlJPUik7XG4gICAgdmFyIGYgPSB0b0ludGVnZXIoZnJhY3Rpb25EaWdpdHMpO1xuICAgIHZhciBzID0gJyc7XG4gICAgdmFyIG0gPSBaRVJPO1xuICAgIHZhciBlLCB6LCBqLCBrO1xuICAgIGlmIChmIDwgMCB8fCBmID4gMjApIHRocm93IFJhbmdlRXJyb3IoRVJST1IpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICBpZiAoeCAhPSB4KSByZXR1cm4gJ05hTic7XG4gICAgaWYgKHggPD0gLTFlMjEgfHwgeCA+PSAxZTIxKSByZXR1cm4gU3RyaW5nKHgpO1xuICAgIGlmICh4IDwgMCkge1xuICAgICAgcyA9ICctJztcbiAgICAgIHggPSAteDtcbiAgICB9XG4gICAgaWYgKHggPiAxZS0yMSkge1xuICAgICAgZSA9IGxvZyh4ICogcG93KDIsIDY5LCAxKSkgLSA2OTtcbiAgICAgIHogPSBlIDwgMCA/IHggKiBwb3coMiwgLWUsIDEpIDogeCAvIHBvdygyLCBlLCAxKTtcbiAgICAgIHogKj0gMHgxMDAwMDAwMDAwMDAwMDtcbiAgICAgIGUgPSA1MiAtIGU7XG4gICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgbXVsdGlwbHkoMCwgeik7XG4gICAgICAgIGogPSBmO1xuICAgICAgICB3aGlsZSAoaiA+PSA3KSB7XG4gICAgICAgICAgbXVsdGlwbHkoMWU3LCAwKTtcbiAgICAgICAgICBqIC09IDc7XG4gICAgICAgIH1cbiAgICAgICAgbXVsdGlwbHkocG93KDEwLCBqLCAxKSwgMCk7XG4gICAgICAgIGogPSBlIC0gMTtcbiAgICAgICAgd2hpbGUgKGogPj0gMjMpIHtcbiAgICAgICAgICBkaXZpZGUoMSA8PCAyMyk7XG4gICAgICAgICAgaiAtPSAyMztcbiAgICAgICAgfVxuICAgICAgICBkaXZpZGUoMSA8PCBqKTtcbiAgICAgICAgbXVsdGlwbHkoMSwgMSk7XG4gICAgICAgIGRpdmlkZSgyKTtcbiAgICAgICAgbSA9IG51bVRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtdWx0aXBseSgwLCB6KTtcbiAgICAgICAgbXVsdGlwbHkoMSA8PCAtZSwgMCk7XG4gICAgICAgIG0gPSBudW1Ub1N0cmluZygpICsgcmVwZWF0LmNhbGwoWkVSTywgZik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmID4gMCkge1xuICAgICAgayA9IG0ubGVuZ3RoO1xuICAgICAgbSA9IHMgKyAoayA8PSBmID8gJzAuJyArIHJlcGVhdC5jYWxsKFpFUk8sIGYgLSBrKSArIG0gOiBtLnNsaWNlKDAsIGsgLSBmKSArICcuJyArIG0uc2xpY2UoayAtIGYpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHMgKyBtO1xuICAgIH0gcmV0dXJuIG07XG4gIH1cbn0pO1xuXG59LHtcIjExMFwiOjExMCxcIjExNlwiOjExNixcIjMzXCI6MzMsXCIzNVwiOjM1LFwiNFwiOjR9XSwxODk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciBhTnVtYmVyVmFsdWUgPSBfZGVyZXFfKDQpO1xudmFyICR0b1ByZWNpc2lvbiA9IDEuMC50b1ByZWNpc2lvbjtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoJGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gSUU3LVxuICByZXR1cm4gJHRvUHJlY2lzaW9uLmNhbGwoMSwgdW5kZWZpbmVkKSAhPT0gJzEnO1xufSkgfHwgISRmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIFY4IH4gQW5kcm9pZCA0LjMtXG4gICR0b1ByZWNpc2lvbi5jYWxsKHt9KTtcbn0pKSwgJ051bWJlcicsIHtcbiAgdG9QcmVjaXNpb246IGZ1bmN0aW9uIHRvUHJlY2lzaW9uKHByZWNpc2lvbikge1xuICAgIHZhciB0aGF0ID0gYU51bWJlclZhbHVlKHRoaXMsICdOdW1iZXIjdG9QcmVjaXNpb246IGluY29ycmVjdCBpbnZvY2F0aW9uIScpO1xuICAgIHJldHVybiBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/ICR0b1ByZWNpc2lvbi5jYWxsKHRoYXQpIDogJHRvUHJlY2lzaW9uLmNhbGwodGhhdCwgcHJlY2lzaW9uKTtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozMyxcIjM1XCI6MzUsXCI0XCI6NH1dLDE5MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7IGFzc2lnbjogX2RlcmVxXyg3MCkgfSk7XG5cbn0se1wiMzNcIjozMyxcIjcwXCI6NzB9XSwxOTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxuJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7IGNyZWF0ZTogX2RlcmVxXyg3MSkgfSk7XG5cbn0se1wiMzNcIjozMyxcIjcxXCI6NzF9XSwxOTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbi8vIDE5LjEuMi4zIC8gMTUuMi4zLjcgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcylcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIV9kZXJlcV8oMjkpLCAnT2JqZWN0JywgeyBkZWZpbmVQcm9wZXJ0aWVzOiBfZGVyZXFfKDczKSB9KTtcblxufSx7XCIyOVwiOjI5LFwiMzNcIjozMyxcIjczXCI6NzN9XSwxOTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbi8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfZGVyZXFfKDI5KSwgJ09iamVjdCcsIHsgZGVmaW5lUHJvcGVydHk6IF9kZXJlcV8oNzIpLmYgfSk7XG5cbn0se1wiMjlcIjoyOSxcIjMzXCI6MzMsXCI3MlwiOjcyfV0sMTk0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjEuMi41IE9iamVjdC5mcmVlemUoTylcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xudmFyIG1ldGEgPSBfZGVyZXFfKDY2KS5vbkZyZWV6ZTtcblxuX2RlcmVxXyg4MykoJ2ZyZWV6ZScsIGZ1bmN0aW9uICgkZnJlZXplKSB7XG4gIHJldHVybiBmdW5jdGlvbiBmcmVlemUoaXQpIHtcbiAgICByZXR1cm4gJGZyZWV6ZSAmJiBpc09iamVjdChpdCkgPyAkZnJlZXplKG1ldGEoaXQpKSA6IGl0O1xuICB9O1xufSk7XG5cbn0se1wiNTFcIjo1MSxcIjY2XCI6NjYsXCI4M1wiOjgzfV0sMTk1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUClcbnZhciB0b0lPYmplY3QgPSBfZGVyZXFfKDExNyk7XG52YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IF9kZXJlcV8oNzUpLmY7XG5cbl9kZXJlcV8oODMpKCdnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSkge1xuICAgIHJldHVybiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSU9iamVjdChpdCksIGtleSk7XG4gIH07XG59KTtcblxufSx7XCIxMTdcIjoxMTcsXCI3NVwiOjc1LFwiODNcIjo4M31dLDE5NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxuX2RlcmVxXyg4MykoJ2dldE93blByb3BlcnR5TmFtZXMnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBfZGVyZXFfKDc2KS5mO1xufSk7XG5cbn0se1wiNzZcIjo3NixcIjgzXCI6ODN9XSwxOTc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pXG52YXIgdG9PYmplY3QgPSBfZGVyZXFfKDExOSk7XG52YXIgJGdldFByb3RvdHlwZU9mID0gX2RlcmVxXyg3OSk7XG5cbl9kZXJlcV8oODMpKCdnZXRQcm90b3R5cGVPZicsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKGl0KSB7XG4gICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpO1xuICB9O1xufSk7XG5cbn0se1wiMTE5XCI6MTE5LFwiNzlcIjo3OSxcIjgzXCI6ODN9XSwxOTg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4yLjExIE9iamVjdC5pc0V4dGVuc2libGUoTylcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xuXG5fZGVyZXFfKDgzKSgnaXNFeHRlbnNpYmxlJywgZnVuY3Rpb24gKCRpc0V4dGVuc2libGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGlzRXh0ZW5zaWJsZShpdCkge1xuICAgIHJldHVybiBpc09iamVjdChpdCkgPyAkaXNFeHRlbnNpYmxlID8gJGlzRXh0ZW5zaWJsZShpdCkgOiB0cnVlIDogZmFsc2U7XG4gIH07XG59KTtcblxufSx7XCI1MVwiOjUxLFwiODNcIjo4M31dLDE5OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAxOS4xLjIuMTIgT2JqZWN0LmlzRnJvemVuKE8pXG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcblxuX2RlcmVxXyg4MykoJ2lzRnJvemVuJywgZnVuY3Rpb24gKCRpc0Zyb3plbikge1xuICByZXR1cm4gZnVuY3Rpb24gaXNGcm96ZW4oaXQpIHtcbiAgICByZXR1cm4gaXNPYmplY3QoaXQpID8gJGlzRnJvemVuID8gJGlzRnJvemVuKGl0KSA6IGZhbHNlIDogdHJ1ZTtcbiAgfTtcbn0pO1xuXG59LHtcIjUxXCI6NTEsXCI4M1wiOjgzfV0sMjAwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjEuMi4xMyBPYmplY3QuaXNTZWFsZWQoTylcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xuXG5fZGVyZXFfKDgzKSgnaXNTZWFsZWQnLCBmdW5jdGlvbiAoJGlzU2VhbGVkKSB7XG4gIHJldHVybiBmdW5jdGlvbiBpc1NlYWxlZChpdCkge1xuICAgIHJldHVybiBpc09iamVjdChpdCkgPyAkaXNTZWFsZWQgPyAkaXNTZWFsZWQoaXQpIDogZmFsc2UgOiB0cnVlO1xuICB9O1xufSk7XG5cbn0se1wiNTFcIjo1MSxcIjgzXCI6ODN9XSwyMDE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4zLjEwIE9iamVjdC5pcyh2YWx1ZTEsIHZhbHVlMilcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHsgaXM6IF9kZXJlcV8oOTYpIH0pO1xuXG59LHtcIjMzXCI6MzMsXCI5NlwiOjk2fV0sMjAyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKVxudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyICRrZXlzID0gX2RlcmVxXyg4MSk7XG5cbl9kZXJlcV8oODMpKCdrZXlzJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCkge1xuICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpO1xuICB9O1xufSk7XG5cbn0se1wiMTE5XCI6MTE5LFwiODFcIjo4MSxcIjgzXCI6ODN9XSwyMDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMTkuMS4yLjE1IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhPKVxudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgbWV0YSA9IF9kZXJlcV8oNjYpLm9uRnJlZXplO1xuXG5fZGVyZXFfKDgzKSgncHJldmVudEV4dGVuc2lvbnMnLCBmdW5jdGlvbiAoJHByZXZlbnRFeHRlbnNpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50RXh0ZW5zaW9ucyhpdCkge1xuICAgIHJldHVybiAkcHJldmVudEV4dGVuc2lvbnMgJiYgaXNPYmplY3QoaXQpID8gJHByZXZlbnRFeHRlbnNpb25zKG1ldGEoaXQpKSA6IGl0O1xuICB9O1xufSk7XG5cbn0se1wiNTFcIjo1MSxcIjY2XCI6NjYsXCI4M1wiOjgzfV0sMjA0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDE5LjEuMi4xNyBPYmplY3Quc2VhbChPKVxudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgbWV0YSA9IF9kZXJlcV8oNjYpLm9uRnJlZXplO1xuXG5fZGVyZXFfKDgzKSgnc2VhbCcsIGZ1bmN0aW9uICgkc2VhbCkge1xuICByZXR1cm4gZnVuY3Rpb24gc2VhbChpdCkge1xuICAgIHJldHVybiAkc2VhbCAmJiBpc09iamVjdChpdCkgPyAkc2VhbChtZXRhKGl0KSkgOiBpdDtcbiAgfTtcbn0pO1xuXG59LHtcIjUxXCI6NTEsXCI2NlwiOjY2LFwiODNcIjo4M31dLDIwNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0JywgeyBzZXRQcm90b3R5cGVPZjogX2RlcmVxXyg5OSkuc2V0IH0pO1xuXG59LHtcIjMzXCI6MzMsXCI5OVwiOjk5fV0sMjA2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKVxudmFyIGNsYXNzb2YgPSBfZGVyZXFfKDE3KTtcbnZhciB0ZXN0ID0ge307XG50ZXN0W19kZXJlcV8oMTI4KSgndG9TdHJpbmdUYWcnKV0gPSAneic7XG5pZiAodGVzdCArICcnICE9ICdbb2JqZWN0IHpdJykge1xuICBfZGVyZXFfKDk0KShPYmplY3QucHJvdG90eXBlLCAndG9TdHJpbmcnLCBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gJ1tvYmplY3QgJyArIGNsYXNzb2YodGhpcykgKyAnXSc7XG4gIH0sIHRydWUpO1xufVxuXG59LHtcIjEyOFwiOjEyOCxcIjE3XCI6MTcsXCI5NFwiOjk0fV0sMjA3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHBhcnNlRmxvYXQgPSBfZGVyZXFfKDg2KTtcbi8vIDE4LjIuNCBwYXJzZUZsb2F0KHN0cmluZylcbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5GICogKHBhcnNlRmxvYXQgIT0gJHBhcnNlRmxvYXQpLCB7IHBhcnNlRmxvYXQ6ICRwYXJzZUZsb2F0IH0pO1xuXG59LHtcIjMzXCI6MzMsXCI4NlwiOjg2fV0sMjA4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHBhcnNlSW50ID0gX2RlcmVxXyg4Nyk7XG4vLyAxOC4yLjUgcGFyc2VJbnQoc3RyaW5nLCByYWRpeClcbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5GICogKHBhcnNlSW50ICE9ICRwYXJzZUludCksIHsgcGFyc2VJbnQ6ICRwYXJzZUludCB9KTtcblxufSx7XCIzM1wiOjMzLFwiODdcIjo4N31dLDIwOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgTElCUkFSWSA9IF9kZXJlcV8oNjApO1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIGN0eCA9IF9kZXJlcV8oMjUpO1xudmFyIGNsYXNzb2YgPSBfZGVyZXFfKDE3KTtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbnZhciBhRnVuY3Rpb24gPSBfZGVyZXFfKDMpO1xudmFyIGFuSW5zdGFuY2UgPSBfZGVyZXFfKDYpO1xudmFyIGZvck9mID0gX2RlcmVxXygzOSk7XG52YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gX2RlcmVxXygxMDQpO1xudmFyIHRhc2sgPSBfZGVyZXFfKDExMykuc2V0O1xudmFyIG1pY3JvdGFzayA9IF9kZXJlcV8oNjgpKCk7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSBfZGVyZXFfKDY5KTtcbnZhciBwZXJmb3JtID0gX2RlcmVxXyg5MCk7XG52YXIgcHJvbWlzZVJlc29sdmUgPSBfZGVyZXFfKDkxKTtcbnZhciBQUk9NSVNFID0gJ1Byb21pc2UnO1xudmFyIFR5cGVFcnJvciA9IGdsb2JhbC5UeXBlRXJyb3I7XG52YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzO1xudmFyICRQcm9taXNlID0gZ2xvYmFsW1BST01JU0VdO1xudmFyIGlzTm9kZSA9IGNsYXNzb2YocHJvY2VzcykgPT0gJ3Byb2Nlc3MnO1xudmFyIGVtcHR5ID0gZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9O1xudmFyIEludGVybmFsLCBuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHksIE93blByb21pc2VDYXBhYmlsaXR5LCBXcmFwcGVyO1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUuZjtcblxudmFyIFVTRV9OQVRJVkUgPSAhIWZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnRcbiAgICB2YXIgcHJvbWlzZSA9ICRQcm9taXNlLnJlc29sdmUoMSk7XG4gICAgdmFyIEZha2VQcm9taXNlID0gKHByb21pc2UuY29uc3RydWN0b3IgPSB7fSlbX2RlcmVxXygxMjgpKCdzcGVjaWVzJyldID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgICAgIGV4ZWMoZW1wdHksIGVtcHR5KTtcbiAgICB9O1xuICAgIC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3RcbiAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTtcbiAgfSBjYXRjaCAoZSkgeyAvKiBlbXB0eSAqLyB9XG59KCk7XG5cbi8vIGhlbHBlcnNcbnZhciBzYW1lQ29uc3RydWN0b3IgPSBMSUJSQVJZID8gZnVuY3Rpb24gKGEsIGIpIHtcbiAgLy8gd2l0aCBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlXG4gIHJldHVybiBhID09PSBiIHx8IGEgPT09ICRQcm9taXNlICYmIGIgPT09IFdyYXBwZXI7XG59IDogZnVuY3Rpb24gKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT09IGI7XG59O1xudmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIHRoZW47XG4gIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTtcbn07XG52YXIgbm90aWZ5ID0gZnVuY3Rpb24gKHByb21pc2UsIGlzUmVqZWN0KSB7XG4gIGlmIChwcm9taXNlLl9uKSByZXR1cm47XG4gIHByb21pc2UuX24gPSB0cnVlO1xuICB2YXIgY2hhaW4gPSBwcm9taXNlLl9jO1xuICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3Y7XG4gICAgdmFyIG9rID0gcHJvbWlzZS5fcyA9PSAxO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24gKHJlYWN0aW9uKSB7XG4gICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsO1xuICAgICAgdmFyIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlO1xuICAgICAgdmFyIHJlamVjdCA9IHJlYWN0aW9uLnJlamVjdDtcbiAgICAgIHZhciBkb21haW4gPSByZWFjdGlvbi5kb21haW47XG4gICAgICB2YXIgcmVzdWx0LCB0aGVuO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZS5faCA9PSAyKSBvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTtcbiAgICAgICAgICAgIHByb21pc2UuX2ggPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFuZGxlciA9PT0gdHJ1ZSkgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZG9tYWluKSBkb21haW4uZW50ZXIoKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGRvbWFpbikgZG9tYWluLmV4aXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSkge1xuICAgICAgICAgICAgcmVqZWN0KFR5cGVFcnJvcignUHJvbWlzZS1jaGFpbiBjeWNsZScpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdoaWxlIChjaGFpbi5sZW5ndGggPiBpKSBydW4oY2hhaW5baSsrXSk7IC8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoXG4gICAgcHJvbWlzZS5fYyA9IFtdO1xuICAgIHByb21pc2UuX24gPSBmYWxzZTtcbiAgICBpZiAoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpIG9uVW5oYW5kbGVkKHByb21pc2UpO1xuICB9KTtcbn07XG52YXIgb25VbmhhbmRsZWQgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdjtcbiAgICB2YXIgdW5oYW5kbGVkID0gaXNVbmhhbmRsZWQocHJvbWlzZSk7XG4gICAgdmFyIHJlc3VsdCwgaGFuZGxlciwgY29uc29sZTtcbiAgICBpZiAodW5oYW5kbGVkKSB7XG4gICAgICByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGlzTm9kZSkge1xuICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pIHtcbiAgICAgICAgICBoYW5kbGVyKHsgcHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiB2YWx1ZSB9KTtcbiAgICAgICAgfSBlbHNlIGlmICgoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXG4gICAgICBwcm9taXNlLl9oID0gaXNOb2RlIHx8IGlzVW5oYW5kbGVkKHByb21pc2UpID8gMiA6IDE7XG4gICAgfSBwcm9taXNlLl9hID0gdW5kZWZpbmVkO1xuICAgIGlmICh1bmhhbmRsZWQgJiYgcmVzdWx0LmUpIHRocm93IHJlc3VsdC52O1xuICB9KTtcbn07XG52YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICBpZiAocHJvbWlzZS5faCA9PSAxKSByZXR1cm4gZmFsc2U7XG4gIHZhciBjaGFpbiA9IHByb21pc2UuX2EgfHwgcHJvbWlzZS5fYztcbiAgdmFyIGkgPSAwO1xuICB2YXIgcmVhY3Rpb247XG4gIHdoaWxlIChjaGFpbi5sZW5ndGggPiBpKSB7XG4gICAgcmVhY3Rpb24gPSBjaGFpbltpKytdO1xuICAgIGlmIChyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSkgcmV0dXJuIGZhbHNlO1xuICB9IHJldHVybiB0cnVlO1xufTtcbnZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFuZGxlcjtcbiAgICBpZiAoaXNOb2RlKSB7XG4gICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTtcbiAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPSBnbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKSB7XG4gICAgICBoYW5kbGVyKHsgcHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiBwcm9taXNlLl92IH0pO1xuICAgIH1cbiAgfSk7XG59O1xudmFyICRyZWplY3QgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdmFyIHByb21pc2UgPSB0aGlzO1xuICBpZiAocHJvbWlzZS5fZCkgcmV0dXJuO1xuICBwcm9taXNlLl9kID0gdHJ1ZTtcbiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwXG4gIHByb21pc2UuX3YgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fcyA9IDI7XG4gIGlmICghcHJvbWlzZS5fYSkgcHJvbWlzZS5fYSA9IHByb21pc2UuX2Muc2xpY2UoKTtcbiAgbm90aWZ5KHByb21pc2UsIHRydWUpO1xufTtcbnZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gIHZhciB0aGVuO1xuICBpZiAocHJvbWlzZS5fZCkgcmV0dXJuO1xuICBwcm9taXNlLl9kID0gdHJ1ZTtcbiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwXG4gIHRyeSB7XG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB0aHJvdyBUeXBlRXJyb3IoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTtcbiAgICBpZiAodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKSB7XG4gICAgICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd3JhcHBlciA9IHsgX3c6IHByb21pc2UsIF9kOiBmYWxzZSB9OyAvLyB3cmFwXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgJHJlamVjdC5jYWxsKHdyYXBwZXIsIGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlO1xuICAgICAgcHJvbWlzZS5fcyA9IDE7XG4gICAgICBub3RpZnkocHJvbWlzZSwgZmFsc2UpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgICRyZWplY3QuY2FsbCh7IF93OiBwcm9taXNlLCBfZDogZmFsc2UgfSwgZSk7IC8vIHdyYXBcbiAgfVxufTtcblxuLy8gY29uc3RydWN0b3IgcG9seWZpbGxcbmlmICghVVNFX05BVElWRSkge1xuICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKVxuICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcbiAgICBhbkluc3RhbmNlKHRoaXMsICRQcm9taXNlLCBQUk9NSVNFLCAnX2gnKTtcbiAgICBhRnVuY3Rpb24oZXhlY3V0b3IpO1xuICAgIEludGVybmFsLmNhbGwodGhpcyk7XG4gICAgdHJ5IHtcbiAgICAgIGV4ZWN1dG9yKGN0eCgkcmVzb2x2ZSwgdGhpcywgMSksIGN0eCgkcmVqZWN0LCB0aGlzLCAxKSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTtcbiAgICB9XG4gIH07XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBJbnRlcm5hbCA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcbiAgICB0aGlzLl9jID0gW107ICAgICAgICAgICAgIC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9uc1xuICAgIHRoaXMuX2EgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnNcbiAgICB0aGlzLl9zID0gMDsgICAgICAgICAgICAgIC8vIDwtIHN0YXRlXG4gICAgdGhpcy5fZCA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBkb25lXG4gICAgdGhpcy5fdiA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSB2YWx1ZVxuICAgIHRoaXMuX2ggPSAwOyAgICAgICAgICAgICAgLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWRcbiAgICB0aGlzLl9uID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIG5vdGlmeVxuICB9O1xuICBJbnRlcm5hbC5wcm90b3R5cGUgPSBfZGVyZXFfKDkzKSgkUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICAvLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxuICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgIHZhciByZWFjdGlvbiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpO1xuICAgICAgcmVhY3Rpb24ub2sgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTtcbiAgICAgIHJlYWN0aW9uLmZhaWwgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7XG4gICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7XG4gICAgICBpZiAodGhpcy5fYSkgdGhpcy5fYS5wdXNoKHJlYWN0aW9uKTtcbiAgICAgIGlmICh0aGlzLl9zKSBub3RpZnkodGhpcywgZmFsc2UpO1xuICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7XG4gICAgfSxcbiAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKVxuICAgICdjYXRjaCc6IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7XG4gICAgfVxuICB9KTtcbiAgT3duUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgSW50ZXJuYWwoKTtcbiAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xuICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7XG4gICAgdGhpcy5yZWplY3QgPSBjdHgoJHJlamVjdCwgcHJvbWlzZSwgMSk7XG4gIH07XG4gIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmYgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIChDKSB7XG4gICAgcmV0dXJuIHNhbWVDb25zdHJ1Y3RvcigkUHJvbWlzZSwgQylcbiAgICAgID8gbmV3IE93blByb21pc2VDYXBhYmlsaXR5KEMpXG4gICAgICA6IG5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKTtcbiAgfTtcbn1cblxuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgeyBQcm9taXNlOiAkUHJvbWlzZSB9KTtcbl9kZXJlcV8oMTAxKSgkUHJvbWlzZSwgUFJPTUlTRSk7XG5fZGVyZXFfKDEwMCkoUFJPTUlTRSk7XG5XcmFwcGVyID0gX2RlcmVxXygyMylbUFJPTUlTRV07XG5cbi8vIHN0YXRpY3NcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHtcbiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocilcbiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocikge1xuICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcyk7XG4gICAgdmFyICQkcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7XG4gICAgJCRyZWplY3Qocik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIChMSUJSQVJZIHx8ICFVU0VfTkFUSVZFKSwgUFJPTUlTRSwge1xuICAvLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeClcbiAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KSB7XG4gICAgLy8gaW5zdGFuY2VvZiBpbnN0ZWFkIG9mIGludGVybmFsIHNsb3QgY2hlY2sgYmVjYXVzZSB3ZSBzaG91bGQgZml4IGl0IHdpdGhvdXQgcmVwbGFjZW1lbnQgbmF0aXZlIFByb21pc2UgY29yZVxuICAgIGlmICh4IGluc3RhbmNlb2YgJFByb21pc2UgJiYgc2FtZUNvbnN0cnVjdG9yKHguY29uc3RydWN0b3IsIHRoaXMpKSByZXR1cm4geDtcbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmUodGhpcywgeCk7XG4gIH1cbn0pO1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgX2RlcmVxXyg1NikoZnVuY3Rpb24gKGl0ZXIpIHtcbiAgJFByb21pc2UuYWxsKGl0ZXIpWydjYXRjaCddKGVtcHR5KTtcbn0pKSwgUFJPTUlTRSwge1xuICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSlcbiAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpIHtcbiAgICB2YXIgQyA9IHRoaXM7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKTtcbiAgICB2YXIgcmVzb2x2ZSA9IGNhcGFiaWxpdHkucmVzb2x2ZTtcbiAgICB2YXIgcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7XG4gICAgdmFyIHJlc3VsdCA9IHBlcmZvcm0oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgIHZhciByZW1haW5pbmcgPSAxO1xuICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICB2YXIgJGluZGV4ID0gaW5kZXgrKztcbiAgICAgICAgdmFyIGFscmVhZHlDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgcmVtYWluaW5nKys7XG4gICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIGlmIChhbHJlYWR5Q2FsbGVkKSByZXR1cm47XG4gICAgICAgICAgYWxyZWFkeUNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTtcbiAgICB9KTtcbiAgICBpZiAocmVzdWx0LmUpIHJlamVjdChyZXN1bHQudik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfSxcbiAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxuICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKSB7XG4gICAgdmFyIEMgPSB0aGlzO1xuICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQyk7XG4gICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5lKSByZWplY3QocmVzdWx0LnYpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuXG59LHtcIjEwMFwiOjEwMCxcIjEwMVwiOjEwMSxcIjEwNFwiOjEwNCxcIjExM1wiOjExMyxcIjEyOFwiOjEyOCxcIjE3XCI6MTcsXCIyM1wiOjIzLFwiMjVcIjoyNSxcIjNcIjozLFwiMzNcIjozMyxcIjM5XCI6MzksXCI0MFwiOjQwLFwiNTFcIjo1MSxcIjU2XCI6NTYsXCI2XCI6NixcIjYwXCI6NjAsXCI2OFwiOjY4LFwiNjlcIjo2OSxcIjkwXCI6OTAsXCI5MVwiOjkxLFwiOTNcIjo5M31dLDIxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyNi4xLjEgUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmd1bWVudCwgYXJndW1lbnRzTGlzdClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgYUZ1bmN0aW9uID0gX2RlcmVxXygzKTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgckFwcGx5ID0gKF9kZXJlcV8oNDApLlJlZmxlY3QgfHwge30pLmFwcGx5O1xudmFyIGZBcHBseSA9IEZ1bmN0aW9uLmFwcGx5O1xuLy8gTVMgRWRnZSBhcmd1bWVudHNMaXN0IGFyZ3VtZW50IGlzIG9wdGlvbmFsXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHJBcHBseShmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pO1xufSksICdSZWZsZWN0Jywge1xuICBhcHBseTogZnVuY3Rpb24gYXBwbHkodGFyZ2V0LCB0aGlzQXJndW1lbnQsIGFyZ3VtZW50c0xpc3QpIHtcbiAgICB2YXIgVCA9IGFGdW5jdGlvbih0YXJnZXQpO1xuICAgIHZhciBMID0gYW5PYmplY3QoYXJndW1lbnRzTGlzdCk7XG4gICAgcmV0dXJuIHJBcHBseSA/IHJBcHBseShULCB0aGlzQXJndW1lbnQsIEwpIDogZkFwcGx5LmNhbGwoVCwgdGhpc0FyZ3VtZW50LCBMKTtcbiAgfVxufSk7XG5cbn0se1wiM1wiOjMsXCIzM1wiOjMzLFwiMzVcIjozNSxcIjQwXCI6NDAsXCI3XCI6N31dLDIxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyNi4xLjIgUmVmbGVjdC5jb25zdHJ1Y3QodGFyZ2V0LCBhcmd1bWVudHNMaXN0IFssIG5ld1RhcmdldF0pXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGNyZWF0ZSA9IF9kZXJlcV8oNzEpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciBiaW5kID0gX2RlcmVxXygxNik7XG52YXIgckNvbnN0cnVjdCA9IChfZGVyZXFfKDQwKS5SZWZsZWN0IHx8IHt9KS5jb25zdHJ1Y3Q7XG5cbi8vIE1TIEVkZ2Ugc3VwcG9ydHMgb25seSAyIGFyZ3VtZW50cyBhbmQgYXJndW1lbnRzTGlzdCBhcmd1bWVudCBpcyBvcHRpb25hbFxuLy8gRkYgTmlnaHRseSBzZXRzIHRoaXJkIGFyZ3VtZW50IGFzIGBuZXcudGFyZ2V0YCwgYnV0IGRvZXMgbm90IGNyZWF0ZSBgdGhpc2AgZnJvbSBpdFxudmFyIE5FV19UQVJHRVRfQlVHID0gZmFpbHMoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGKCkgeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiAhKHJDb25zdHJ1Y3QoZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9LCBbXSwgRikgaW5zdGFuY2VvZiBGKTtcbn0pO1xudmFyIEFSR1NfQlVHID0gIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgckNvbnN0cnVjdChmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pO1xufSk7XG5cbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE5FV19UQVJHRVRfQlVHIHx8IEFSR1NfQlVHKSwgJ1JlZmxlY3QnLCB7XG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gY29uc3RydWN0KFRhcmdldCwgYXJncyAvKiAsIG5ld1RhcmdldCAqLykge1xuICAgIGFGdW5jdGlvbihUYXJnZXQpO1xuICAgIGFuT2JqZWN0KGFyZ3MpO1xuICAgIHZhciBuZXdUYXJnZXQgPSBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IFRhcmdldCA6IGFGdW5jdGlvbihhcmd1bWVudHNbMl0pO1xuICAgIGlmIChBUkdTX0JVRyAmJiAhTkVXX1RBUkdFVF9CVUcpIHJldHVybiByQ29uc3RydWN0KFRhcmdldCwgYXJncywgbmV3VGFyZ2V0KTtcbiAgICBpZiAoVGFyZ2V0ID09IG5ld1RhcmdldCkge1xuICAgICAgLy8gdy9vIGFsdGVyZWQgbmV3VGFyZ2V0LCBvcHRpbWl6YXRpb24gZm9yIDAtNCBhcmd1bWVudHNcbiAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IFRhcmdldCgpO1xuICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0pO1xuICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICBjYXNlIDM6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICBjYXNlIDQ6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pO1xuICAgICAgfVxuICAgICAgLy8gdy9vIGFsdGVyZWQgbmV3VGFyZ2V0LCBsb3Qgb2YgYXJndW1lbnRzIGNhc2VcbiAgICAgIHZhciAkYXJncyA9IFtudWxsXTtcbiAgICAgICRhcmdzLnB1c2guYXBwbHkoJGFyZ3MsIGFyZ3MpO1xuICAgICAgcmV0dXJuIG5ldyAoYmluZC5hcHBseShUYXJnZXQsICRhcmdzKSkoKTtcbiAgICB9XG4gICAgLy8gd2l0aCBhbHRlcmVkIG5ld1RhcmdldCwgbm90IHN1cHBvcnQgYnVpbHQtaW4gY29uc3RydWN0b3JzXG4gICAgdmFyIHByb3RvID0gbmV3VGFyZ2V0LnByb3RvdHlwZTtcbiAgICB2YXIgaW5zdGFuY2UgPSBjcmVhdGUoaXNPYmplY3QocHJvdG8pID8gcHJvdG8gOiBPYmplY3QucHJvdG90eXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gRnVuY3Rpb24uYXBwbHkuY2FsbChUYXJnZXQsIGluc3RhbmNlLCBhcmdzKTtcbiAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IGluc3RhbmNlO1xuICB9XG59KTtcblxufSx7XCIxNlwiOjE2LFwiM1wiOjMsXCIzM1wiOjMzLFwiMzVcIjozNSxcIjQwXCI6NDAsXCI1MVwiOjUxLFwiN1wiOjcsXCI3MVwiOjcxfV0sMjEyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDI2LjEuMyBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXMpXG52YXIgZFAgPSBfZGVyZXFfKDcyKTtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIHRvUHJpbWl0aXZlID0gX2RlcmVxXygxMjApO1xuXG4vLyBNUyBFZGdlIGhhcyBicm9rZW4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSAtIHRocm93aW5nIGluc3RlYWQgb2YgcmV0dXJuaW5nIGZhbHNlXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIF9kZXJlcV8oMzUpKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoZFAuZih7fSwgMSwgeyB2YWx1ZTogMSB9KSwgMSwgeyB2YWx1ZTogMiB9KTtcbn0pLCAnUmVmbGVjdCcsIHtcbiAgZGVmaW5lUHJvcGVydHk6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXMpIHtcbiAgICBhbk9iamVjdCh0YXJnZXQpO1xuICAgIHByb3BlcnR5S2V5ID0gdG9QcmltaXRpdmUocHJvcGVydHlLZXksIHRydWUpO1xuICAgIGFuT2JqZWN0KGF0dHJpYnV0ZXMpO1xuICAgIHRyeSB7XG4gICAgICBkUC5mKHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXMpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSk7XG5cbn0se1wiMTIwXCI6MTIwLFwiMzNcIjozMyxcIjM1XCI6MzUsXCI3XCI6NyxcIjcyXCI6NzJ9XSwyMTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjYuMS40IFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSlcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZ09QRCA9IF9kZXJlcV8oNzUpLmY7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG4gIGRlbGV0ZVByb3BlcnR5OiBmdW5jdGlvbiBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgdmFyIGRlc2MgPSBnT1BEKGFuT2JqZWN0KHRhcmdldCksIHByb3BlcnR5S2V5KTtcbiAgICByZXR1cm4gZGVzYyAmJiAhZGVzYy5jb25maWd1cmFibGUgPyBmYWxzZSA6IGRlbGV0ZSB0YXJnZXRbcHJvcGVydHlLZXldO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzLFwiN1wiOjcsXCI3NVwiOjc1fV0sMjE0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIDI2LjEuNSBSZWZsZWN0LmVudW1lcmF0ZSh0YXJnZXQpXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBFbnVtZXJhdGUgPSBmdW5jdGlvbiAoaXRlcmF0ZWQpIHtcbiAgdGhpcy5fdCA9IGFuT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG4gIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbiAgdmFyIGtleXMgPSB0aGlzLl9rID0gW107ICAgICAgLy8ga2V5c1xuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBpdGVyYXRlZCkga2V5cy5wdXNoKGtleSk7XG59O1xuX2RlcmVxXyg1NCkoRW51bWVyYXRlLCAnT2JqZWN0JywgZnVuY3Rpb24gKCkge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBrZXlzID0gdGhhdC5faztcbiAgdmFyIGtleTtcbiAgZG8ge1xuICAgIGlmICh0aGF0Ll9pID49IGtleXMubGVuZ3RoKSByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH0gd2hpbGUgKCEoKGtleSA9IGtleXNbdGhhdC5faSsrXSkgaW4gdGhhdC5fdCkpO1xuICByZXR1cm4geyB2YWx1ZToga2V5LCBkb25lOiBmYWxzZSB9O1xufSk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcbiAgZW51bWVyYXRlOiBmdW5jdGlvbiBlbnVtZXJhdGUodGFyZ2V0KSB7XG4gICAgcmV0dXJuIG5ldyBFbnVtZXJhdGUodGFyZ2V0KTtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozMyxcIjU0XCI6NTQsXCI3XCI6N31dLDIxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyNi4xLjcgUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSlcbnZhciBnT1BEID0gX2RlcmVxXyg3NSk7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgcmV0dXJuIGdPUEQuZihhbk9iamVjdCh0YXJnZXQpLCBwcm9wZXJ0eUtleSk7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI3XCI6NyxcIjc1XCI6NzV9XSwyMTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjYuMS44IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBnZXRQcm90byA9IF9kZXJlcV8oNzkpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuICBnZXRQcm90b3R5cGVPZjogZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YodGFyZ2V0KSB7XG4gICAgcmV0dXJuIGdldFByb3RvKGFuT2JqZWN0KHRhcmdldCkpO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzLFwiN1wiOjcsXCI3OVwiOjc5fV0sMjE3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDI2LjEuNiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3BlcnR5S2V5IFssIHJlY2VpdmVyXSlcbnZhciBnT1BEID0gX2RlcmVxXyg3NSk7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSBfZGVyZXFfKDc5KTtcbnZhciBoYXMgPSBfZGVyZXFfKDQxKTtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgaXNPYmplY3QgPSBfZGVyZXFfKDUxKTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG5cbmZ1bmN0aW9uIGdldCh0YXJnZXQsIHByb3BlcnR5S2V5IC8qICwgcmVjZWl2ZXIgKi8pIHtcbiAgdmFyIHJlY2VpdmVyID0gYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiBhcmd1bWVudHNbMl07XG4gIHZhciBkZXNjLCBwcm90bztcbiAgaWYgKGFuT2JqZWN0KHRhcmdldCkgPT09IHJlY2VpdmVyKSByZXR1cm4gdGFyZ2V0W3Byb3BlcnR5S2V5XTtcbiAgaWYgKGRlc2MgPSBnT1BELmYodGFyZ2V0LCBwcm9wZXJ0eUtleSkpIHJldHVybiBoYXMoZGVzYywgJ3ZhbHVlJylcbiAgICA/IGRlc2MudmFsdWVcbiAgICA6IGRlc2MuZ2V0ICE9PSB1bmRlZmluZWRcbiAgICAgID8gZGVzYy5nZXQuY2FsbChyZWNlaXZlcilcbiAgICAgIDogdW5kZWZpbmVkO1xuICBpZiAoaXNPYmplY3QocHJvdG8gPSBnZXRQcm90b3R5cGVPZih0YXJnZXQpKSkgcmV0dXJuIGdldChwcm90bywgcHJvcGVydHlLZXksIHJlY2VpdmVyKTtcbn1cblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0JywgeyBnZXQ6IGdldCB9KTtcblxufSx7XCIzM1wiOjMzLFwiNDFcIjo0MSxcIjUxXCI6NTEsXCI3XCI6NyxcIjc1XCI6NzUsXCI3OVwiOjc5fV0sMjE4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDI2LjEuOSBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3BlcnR5S2V5KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuICBoYXM6IGZ1bmN0aW9uIGhhcyh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgcmV0dXJuIHByb3BlcnR5S2V5IGluIHRhcmdldDtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozM31dLDIxOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyNi4xLjEwIFJlZmxlY3QuaXNFeHRlbnNpYmxlKHRhcmdldClcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyICRpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG4gIGlzRXh0ZW5zaWJsZTogZnVuY3Rpb24gaXNFeHRlbnNpYmxlKHRhcmdldCkge1xuICAgIGFuT2JqZWN0KHRhcmdldCk7XG4gICAgcmV0dXJuICRpc0V4dGVuc2libGUgPyAkaXNFeHRlbnNpYmxlKHRhcmdldCkgOiB0cnVlO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzLFwiN1wiOjd9XSwyMjA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjYuMS4xMSBSZWZsZWN0Lm93bktleXModGFyZ2V0KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0JywgeyBvd25LZXlzOiBfZGVyZXFfKDg1KSB9KTtcblxufSx7XCIzM1wiOjMzLFwiODVcIjo4NX1dLDIyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyNi4xLjEyIFJlZmxlY3QucHJldmVudEV4dGVuc2lvbnModGFyZ2V0KVxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgJHByZXZlbnRFeHRlbnNpb25zID0gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG4gIHByZXZlbnRFeHRlbnNpb25zOiBmdW5jdGlvbiBwcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpIHtcbiAgICBhbk9iamVjdCh0YXJnZXQpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoJHByZXZlbnRFeHRlbnNpb25zKSAkcHJldmVudEV4dGVuc2lvbnModGFyZ2V0KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI3XCI6N31dLDIyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyNi4xLjE0IFJlZmxlY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90bylcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgc2V0UHJvdG8gPSBfZGVyZXFfKDk5KTtcblxuaWYgKHNldFByb3RvKSAkZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG4gIHNldFByb3RvdHlwZU9mOiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvKSB7XG4gICAgc2V0UHJvdG8uY2hlY2sodGFyZ2V0LCBwcm90byk7XG4gICAgdHJ5IHtcbiAgICAgIHNldFByb3RvLnNldCh0YXJnZXQsIHByb3RvKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI5OVwiOjk5fV0sMjIzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIDI2LjEuMTMgUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSwgViBbLCByZWNlaXZlcl0pXG52YXIgZFAgPSBfZGVyZXFfKDcyKTtcbnZhciBnT1BEID0gX2RlcmVxXyg3NSk7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSBfZGVyZXFfKDc5KTtcbnZhciBoYXMgPSBfZGVyZXFfKDQxKTtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgY3JlYXRlRGVzYyA9IF9kZXJlcV8oOTIpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBpc09iamVjdCA9IF9kZXJlcV8oNTEpO1xuXG5mdW5jdGlvbiBzZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSwgViAvKiAsIHJlY2VpdmVyICovKSB7XG4gIHZhciByZWNlaXZlciA9IGFyZ3VtZW50cy5sZW5ndGggPCA0ID8gdGFyZ2V0IDogYXJndW1lbnRzWzNdO1xuICB2YXIgb3duRGVzYyA9IGdPUEQuZihhbk9iamVjdCh0YXJnZXQpLCBwcm9wZXJ0eUtleSk7XG4gIHZhciBleGlzdGluZ0Rlc2NyaXB0b3IsIHByb3RvO1xuICBpZiAoIW93bkRlc2MpIHtcbiAgICBpZiAoaXNPYmplY3QocHJvdG8gPSBnZXRQcm90b3R5cGVPZih0YXJnZXQpKSkge1xuICAgICAgcmV0dXJuIHNldChwcm90bywgcHJvcGVydHlLZXksIFYsIHJlY2VpdmVyKTtcbiAgICB9XG4gICAgb3duRGVzYyA9IGNyZWF0ZURlc2MoMCk7XG4gIH1cbiAgaWYgKGhhcyhvd25EZXNjLCAndmFsdWUnKSkge1xuICAgIGlmIChvd25EZXNjLndyaXRhYmxlID09PSBmYWxzZSB8fCAhaXNPYmplY3QocmVjZWl2ZXIpKSByZXR1cm4gZmFsc2U7XG4gICAgZXhpc3RpbmdEZXNjcmlwdG9yID0gZ09QRC5mKHJlY2VpdmVyLCBwcm9wZXJ0eUtleSkgfHwgY3JlYXRlRGVzYygwKTtcbiAgICBleGlzdGluZ0Rlc2NyaXB0b3IudmFsdWUgPSBWO1xuICAgIGRQLmYocmVjZWl2ZXIsIHByb3BlcnR5S2V5LCBleGlzdGluZ0Rlc2NyaXB0b3IpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBvd25EZXNjLnNldCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiAob3duRGVzYy5zZXQuY2FsbChyZWNlaXZlciwgViksIHRydWUpO1xufVxuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7IHNldDogc2V0IH0pO1xuXG59LHtcIjMzXCI6MzMsXCI0MVwiOjQxLFwiNTFcIjo1MSxcIjdcIjo3LFwiNzJcIjo3MixcIjc1XCI6NzUsXCI3OVwiOjc5LFwiOTJcIjo5Mn1dLDIyNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgZ2xvYmFsID0gX2RlcmVxXyg0MCk7XG52YXIgaW5oZXJpdElmUmVxdWlyZWQgPSBfZGVyZXFfKDQ1KTtcbnZhciBkUCA9IF9kZXJlcV8oNzIpLmY7XG52YXIgZ09QTiA9IF9kZXJlcV8oNzcpLmY7XG52YXIgaXNSZWdFeHAgPSBfZGVyZXFfKDUyKTtcbnZhciAkZmxhZ3MgPSBfZGVyZXFfKDM3KTtcbnZhciAkUmVnRXhwID0gZ2xvYmFsLlJlZ0V4cDtcbnZhciBCYXNlID0gJFJlZ0V4cDtcbnZhciBwcm90byA9ICRSZWdFeHAucHJvdG90eXBlO1xudmFyIHJlMSA9IC9hL2c7XG52YXIgcmUyID0gL2EvZztcbi8vIFwibmV3XCIgY3JlYXRlcyBhIG5ldyBvYmplY3QsIG9sZCB3ZWJraXQgYnVnZ3kgaGVyZVxudmFyIENPUlJFQ1RfTkVXID0gbmV3ICRSZWdFeHAocmUxKSAhPT0gcmUxO1xuXG5pZiAoX2RlcmVxXygyOSkgJiYgKCFDT1JSRUNUX05FVyB8fCBfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7XG4gIHJlMltfZGVyZXFfKDEyOCkoJ21hdGNoJyldID0gZmFsc2U7XG4gIC8vIFJlZ0V4cCBjb25zdHJ1Y3RvciBjYW4gYWx0ZXIgZmxhZ3MgYW5kIElzUmVnRXhwIHdvcmtzIGNvcnJlY3Qgd2l0aCBAQG1hdGNoXG4gIHJldHVybiAkUmVnRXhwKHJlMSkgIT0gcmUxIHx8ICRSZWdFeHAocmUyKSA9PSByZTIgfHwgJFJlZ0V4cChyZTEsICdpJykgIT0gJy9hL2knO1xufSkpKSB7XG4gICRSZWdFeHAgPSBmdW5jdGlvbiBSZWdFeHAocCwgZikge1xuICAgIHZhciB0aVJFID0gdGhpcyBpbnN0YW5jZW9mICRSZWdFeHA7XG4gICAgdmFyIHBpUkUgPSBpc1JlZ0V4cChwKTtcbiAgICB2YXIgZmlVID0gZiA9PT0gdW5kZWZpbmVkO1xuICAgIHJldHVybiAhdGlSRSAmJiBwaVJFICYmIHAuY29uc3RydWN0b3IgPT09ICRSZWdFeHAgJiYgZmlVID8gcFxuICAgICAgOiBpbmhlcml0SWZSZXF1aXJlZChDT1JSRUNUX05FV1xuICAgICAgICA/IG5ldyBCYXNlKHBpUkUgJiYgIWZpVSA/IHAuc291cmNlIDogcCwgZilcbiAgICAgICAgOiBCYXNlKChwaVJFID0gcCBpbnN0YW5jZW9mICRSZWdFeHApID8gcC5zb3VyY2UgOiBwLCBwaVJFICYmIGZpVSA/ICRmbGFncy5jYWxsKHApIDogZilcbiAgICAgICwgdGlSRSA/IHRoaXMgOiBwcm90bywgJFJlZ0V4cCk7XG4gIH07XG4gIHZhciBwcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBrZXkgaW4gJFJlZ0V4cCB8fCBkUCgkUmVnRXhwLCBrZXksIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gQmFzZVtrZXldOyB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiAoaXQpIHsgQmFzZVtrZXldID0gaXQ7IH1cbiAgICB9KTtcbiAgfTtcbiAgZm9yICh2YXIga2V5cyA9IGdPUE4oQmFzZSksIGkgPSAwOyBrZXlzLmxlbmd0aCA+IGk7KSBwcm94eShrZXlzW2krK10pO1xuICBwcm90by5jb25zdHJ1Y3RvciA9ICRSZWdFeHA7XG4gICRSZWdFeHAucHJvdG90eXBlID0gcHJvdG87XG4gIF9kZXJlcV8oOTQpKGdsb2JhbCwgJ1JlZ0V4cCcsICRSZWdFeHApO1xufVxuXG5fZGVyZXFfKDEwMCkoJ1JlZ0V4cCcpO1xuXG59LHtcIjEwMFwiOjEwMCxcIjEyOFwiOjEyOCxcIjI5XCI6MjksXCIzNVwiOjM1LFwiMzdcIjozNyxcIjQwXCI6NDAsXCI0NVwiOjQ1LFwiNTJcIjo1MixcIjcyXCI6NzIsXCI3N1wiOjc3LFwiOTRcIjo5NH1dLDIyNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMS4yLjUuMyBnZXQgUmVnRXhwLnByb3RvdHlwZS5mbGFncygpXG5pZiAoX2RlcmVxXygyOSkgJiYgLy4vZy5mbGFncyAhPSAnZycpIF9kZXJlcV8oNzIpLmYoUmVnRXhwLnByb3RvdHlwZSwgJ2ZsYWdzJywge1xuICBjb25maWd1cmFibGU6IHRydWUsXG4gIGdldDogX2RlcmVxXygzNylcbn0pO1xuXG59LHtcIjI5XCI6MjksXCIzN1wiOjM3LFwiNzJcIjo3Mn1dLDIyNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBAQG1hdGNoIGxvZ2ljXG5fZGVyZXFfKDM2KSgnbWF0Y2gnLCAxLCBmdW5jdGlvbiAoZGVmaW5lZCwgTUFUQ0gsICRtYXRjaCkge1xuICAvLyAyMS4xLjMuMTEgU3RyaW5nLnByb3RvdHlwZS5tYXRjaChyZWdleHApXG4gIHJldHVybiBbZnVuY3Rpb24gbWF0Y2gocmVnZXhwKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBPID0gZGVmaW5lZCh0aGlzKTtcbiAgICB2YXIgZm4gPSByZWdleHAgPT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVnZXhwW01BVENIXTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IGZuLmNhbGwocmVnZXhwLCBPKSA6IG5ldyBSZWdFeHAocmVnZXhwKVtNQVRDSF0oU3RyaW5nKE8pKTtcbiAgfSwgJG1hdGNoXTtcbn0pO1xuXG59LHtcIjM2XCI6MzZ9XSwyMjc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gQEByZXBsYWNlIGxvZ2ljXG5fZGVyZXFfKDM2KSgncmVwbGFjZScsIDIsIGZ1bmN0aW9uIChkZWZpbmVkLCBSRVBMQUNFLCAkcmVwbGFjZSkge1xuICAvLyAyMS4xLjMuMTQgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpXG4gIHJldHVybiBbZnVuY3Rpb24gcmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBPID0gZGVmaW5lZCh0aGlzKTtcbiAgICB2YXIgZm4gPSBzZWFyY2hWYWx1ZSA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBzZWFyY2hWYWx1ZVtSRVBMQUNFXTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZFxuICAgICAgPyBmbi5jYWxsKHNlYXJjaFZhbHVlLCBPLCByZXBsYWNlVmFsdWUpXG4gICAgICA6ICRyZXBsYWNlLmNhbGwoU3RyaW5nKE8pLCBzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKTtcbiAgfSwgJHJlcGxhY2VdO1xufSk7XG5cbn0se1wiMzZcIjozNn1dLDIyODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBAQHNlYXJjaCBsb2dpY1xuX2RlcmVxXygzNikoJ3NlYXJjaCcsIDEsIGZ1bmN0aW9uIChkZWZpbmVkLCBTRUFSQ0gsICRzZWFyY2gpIHtcbiAgLy8gMjEuMS4zLjE1IFN0cmluZy5wcm90b3R5cGUuc2VhcmNoKHJlZ2V4cClcbiAgcmV0dXJuIFtmdW5jdGlvbiBzZWFyY2gocmVnZXhwKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBPID0gZGVmaW5lZCh0aGlzKTtcbiAgICB2YXIgZm4gPSByZWdleHAgPT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVnZXhwW1NFQVJDSF07XG4gICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyBmbi5jYWxsKHJlZ2V4cCwgTykgOiBuZXcgUmVnRXhwKHJlZ2V4cClbU0VBUkNIXShTdHJpbmcoTykpO1xuICB9LCAkc2VhcmNoXTtcbn0pO1xuXG59LHtcIjM2XCI6MzZ9XSwyMjk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gQEBzcGxpdCBsb2dpY1xuX2RlcmVxXygzNikoJ3NwbGl0JywgMiwgZnVuY3Rpb24gKGRlZmluZWQsIFNQTElULCAkc3BsaXQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgaXNSZWdFeHAgPSBfZGVyZXFfKDUyKTtcbiAgdmFyIF9zcGxpdCA9ICRzcGxpdDtcbiAgdmFyICRwdXNoID0gW10ucHVzaDtcbiAgdmFyICRTUExJVCA9ICdzcGxpdCc7XG4gIHZhciBMRU5HVEggPSAnbGVuZ3RoJztcbiAgdmFyIExBU1RfSU5ERVggPSAnbGFzdEluZGV4JztcbiAgaWYgKFxuICAgICdhYmJjJ1skU1BMSVRdKC8oYikqLylbMV0gPT0gJ2MnIHx8XG4gICAgJ3Rlc3QnWyRTUExJVF0oLyg/OikvLCAtMSlbTEVOR1RIXSAhPSA0IHx8XG4gICAgJ2FiJ1skU1BMSVRdKC8oPzphYikqLylbTEVOR1RIXSAhPSAyIHx8XG4gICAgJy4nWyRTUExJVF0oLyguPykoLj8pLylbTEVOR1RIXSAhPSA0IHx8XG4gICAgJy4nWyRTUExJVF0oLygpKCkvKVtMRU5HVEhdID4gMSB8fFxuICAgICcnWyRTUExJVF0oLy4/LylbTEVOR1RIXVxuICApIHtcbiAgICB2YXIgTlBDRyA9IC8oKT8/Ly5leGVjKCcnKVsxXSA9PT0gdW5kZWZpbmVkOyAvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cFxuICAgIC8vIGJhc2VkIG9uIGVzNS1zaGltIGltcGxlbWVudGF0aW9uLCBuZWVkIHRvIHJld29yayBpdFxuICAgICRzcGxpdCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICB2YXIgc3RyaW5nID0gU3RyaW5nKHRoaXMpO1xuICAgICAgaWYgKHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkICYmIGxpbWl0ID09PSAwKSByZXR1cm4gW107XG4gICAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdFxuICAgICAgaWYgKCFpc1JlZ0V4cChzZXBhcmF0b3IpKSByZXR1cm4gX3NwbGl0LmNhbGwoc3RyaW5nLCBzZXBhcmF0b3IsIGxpbWl0KTtcbiAgICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICAgIHZhciBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/ICdpJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLm11bHRpbGluZSA/ICdtJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLnVuaWNvZGUgPyAndScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5zdGlja3kgPyAneScgOiAnJyk7XG4gICAgICB2YXIgbGFzdExhc3RJbmRleCA9IDA7XG4gICAgICB2YXIgc3BsaXRMaW1pdCA9IGxpbWl0ID09PSB1bmRlZmluZWQgPyA0Mjk0OTY3Mjk1IDogbGltaXQgPj4+IDA7XG4gICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weVxuICAgICAgdmFyIHNlcGFyYXRvckNvcHkgPSBuZXcgUmVnRXhwKHNlcGFyYXRvci5zb3VyY2UsIGZsYWdzICsgJ2cnKTtcbiAgICAgIHZhciBzZXBhcmF0b3IyLCBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoLCBpO1xuICAgICAgLy8gRG9lc24ndCBuZWVkIGZsYWdzIGd5LCBidXQgdGhleSBkb24ndCBodXJ0XG4gICAgICBpZiAoIU5QQ0cpIHNlcGFyYXRvcjIgPSBuZXcgUmVnRXhwKCdeJyArIHNlcGFyYXRvckNvcHkuc291cmNlICsgJyQoPyFcXFxccyknLCBmbGFncyk7XG4gICAgICB3aGlsZSAobWF0Y2ggPSBzZXBhcmF0b3JDb3B5LmV4ZWMoc3RyaW5nKSkge1xuICAgICAgICAvLyBgc2VwYXJhdG9yQ29weS5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG4gICAgICAgIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF1bTEVOR1RIXTtcbiAgICAgICAgaWYgKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCwgbWF0Y2guaW5kZXgpKTtcbiAgICAgICAgICAvLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3IgTlBDR1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb29wLWZ1bmNcbiAgICAgICAgICBpZiAoIU5QQ0cgJiYgbWF0Y2hbTEVOR1RIXSA+IDEpIG1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IGFyZ3VtZW50c1tMRU5HVEhdIC0gMjsgaSsrKSBpZiAoYXJndW1lbnRzW2ldID09PSB1bmRlZmluZWQpIG1hdGNoW2ldID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChtYXRjaFtMRU5HVEhdID4gMSAmJiBtYXRjaC5pbmRleCA8IHN0cmluZ1tMRU5HVEhdKSAkcHVzaC5hcHBseShvdXRwdXQsIG1hdGNoLnNsaWNlKDEpKTtcbiAgICAgICAgICBsYXN0TGVuZ3RoID0gbWF0Y2hbMF1bTEVOR1RIXTtcbiAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgIGlmIChvdXRwdXRbTEVOR1RIXSA+PSBzcGxpdExpbWl0KSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VwYXJhdG9yQ29weVtMQVNUX0lOREVYXSA9PT0gbWF0Y2guaW5kZXgpIHNlcGFyYXRvckNvcHlbTEFTVF9JTkRFWF0rKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgfVxuICAgICAgaWYgKGxhc3RMYXN0SW5kZXggPT09IHN0cmluZ1tMRU5HVEhdKSB7XG4gICAgICAgIGlmIChsYXN0TGVuZ3RoIHx8ICFzZXBhcmF0b3JDb3B5LnRlc3QoJycpKSBvdXRwdXQucHVzaCgnJyk7XG4gICAgICB9IGVsc2Ugb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgpKTtcbiAgICAgIHJldHVybiBvdXRwdXRbTEVOR1RIXSA+IHNwbGl0TGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgc3BsaXRMaW1pdCkgOiBvdXRwdXQ7XG4gICAgfTtcbiAgLy8gQ2hha3JhLCBWOFxuICB9IGVsc2UgaWYgKCcwJ1skU1BMSVRdKHVuZGVmaW5lZCwgMClbTEVOR1RIXSkge1xuICAgICRzcGxpdCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICByZXR1cm4gc2VwYXJhdG9yID09PSB1bmRlZmluZWQgJiYgbGltaXQgPT09IDAgPyBbXSA6IF9zcGxpdC5jYWxsKHRoaXMsIHNlcGFyYXRvciwgbGltaXQpO1xuICAgIH07XG4gIH1cbiAgLy8gMjEuMS4zLjE3IFN0cmluZy5wcm90b3R5cGUuc3BsaXQoc2VwYXJhdG9yLCBsaW1pdClcbiAgcmV0dXJuIFtmdW5jdGlvbiBzcGxpdChzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgdmFyIE8gPSBkZWZpbmVkKHRoaXMpO1xuICAgIHZhciBmbiA9IHNlcGFyYXRvciA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBzZXBhcmF0b3JbU1BMSVRdO1xuICAgIHJldHVybiBmbiAhPT0gdW5kZWZpbmVkID8gZm4uY2FsbChzZXBhcmF0b3IsIE8sIGxpbWl0KSA6ICRzcGxpdC5jYWxsKFN0cmluZyhPKSwgc2VwYXJhdG9yLCBsaW1pdCk7XG4gIH0sICRzcGxpdF07XG59KTtcblxufSx7XCIzNlwiOjM2LFwiNTJcIjo1Mn1dLDIzMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5fZGVyZXFfKDIyNSk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyICRmbGFncyA9IF9kZXJlcV8oMzcpO1xudmFyIERFU0NSSVBUT1JTID0gX2RlcmVxXygyOSk7XG52YXIgVE9fU1RSSU5HID0gJ3RvU3RyaW5nJztcbnZhciAkdG9TdHJpbmcgPSAvLi9bVE9fU1RSSU5HXTtcblxudmFyIGRlZmluZSA9IGZ1bmN0aW9uIChmbikge1xuICBfZGVyZXFfKDk0KShSZWdFeHAucHJvdG90eXBlLCBUT19TVFJJTkcsIGZuLCB0cnVlKTtcbn07XG5cbi8vIDIxLjIuNS4xNCBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nKClcbmlmIChfZGVyZXFfKDM1KShmdW5jdGlvbiAoKSB7IHJldHVybiAkdG9TdHJpbmcuY2FsbCh7IHNvdXJjZTogJ2EnLCBmbGFnczogJ2InIH0pICE9ICcvYS9iJzsgfSkpIHtcbiAgZGVmaW5lKGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHZhciBSID0gYW5PYmplY3QodGhpcyk7XG4gICAgcmV0dXJuICcvJy5jb25jYXQoUi5zb3VyY2UsICcvJyxcbiAgICAgICdmbGFncycgaW4gUiA/IFIuZmxhZ3MgOiAhREVTQ1JJUFRPUlMgJiYgUiBpbnN0YW5jZW9mIFJlZ0V4cCA/ICRmbGFncy5jYWxsKFIpIDogdW5kZWZpbmVkKTtcbiAgfSk7XG4vLyBGRjQ0LSBSZWdFeHAjdG9TdHJpbmcgaGFzIGEgd3JvbmcgbmFtZVxufSBlbHNlIGlmICgkdG9TdHJpbmcubmFtZSAhPSBUT19TVFJJTkcpIHtcbiAgZGVmaW5lKGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAkdG9TdHJpbmcuY2FsbCh0aGlzKTtcbiAgfSk7XG59XG5cbn0se1wiMjI1XCI6MjI1LFwiMjlcIjoyOSxcIjM1XCI6MzUsXCIzN1wiOjM3LFwiN1wiOjcsXCI5NFwiOjk0fV0sMjMxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBzdHJvbmcgPSBfZGVyZXFfKDE5KTtcbnZhciB2YWxpZGF0ZSA9IF9kZXJlcV8oMTI1KTtcbnZhciBTRVQgPSAnU2V0JztcblxuLy8gMjMuMiBTZXQgT2JqZWN0c1xubW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKDIyKShTRVQsIGZ1bmN0aW9uIChnZXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFNldCgpIHsgcmV0dXJuIGdldCh0aGlzLCBhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7IH07XG59LCB7XG4gIC8vIDIzLjIuMy4xIFNldC5wcm90b3R5cGUuYWRkKHZhbHVlKVxuICBhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICAgIHJldHVybiBzdHJvbmcuZGVmKHZhbGlkYXRlKHRoaXMsIFNFVCksIHZhbHVlID0gdmFsdWUgPT09IDAgPyAwIDogdmFsdWUsIHZhbHVlKTtcbiAgfVxufSwgc3Ryb25nKTtcblxufSx7XCIxMjVcIjoxMjUsXCIxOVwiOjE5LFwiMjJcIjoyMn1dLDIzMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4yIFN0cmluZy5wcm90b3R5cGUuYW5jaG9yKG5hbWUpXG5fZGVyZXFfKDEwOCkoJ2FuY2hvcicsIGZ1bmN0aW9uIChjcmVhdGVIVE1MKSB7XG4gIHJldHVybiBmdW5jdGlvbiBhbmNob3IobmFtZSkge1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdhJywgJ25hbWUnLCBuYW1lKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDIzMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4zIFN0cmluZy5wcm90b3R5cGUuYmlnKClcbl9kZXJlcV8oMTA4KSgnYmlnJywgZnVuY3Rpb24gKGNyZWF0ZUhUTUwpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGJpZygpIHtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYmlnJywgJycsICcnKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDIzNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBCLjIuMy40IFN0cmluZy5wcm90b3R5cGUuYmxpbmsoKVxuX2RlcmVxXygxMDgpKCdibGluaycsIGZ1bmN0aW9uIChjcmVhdGVIVE1MKSB7XG4gIHJldHVybiBmdW5jdGlvbiBibGluaygpIHtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYmxpbmsnLCAnJywgJycpO1xuICB9O1xufSk7XG5cbn0se1wiMTA4XCI6MTA4fV0sMjM1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIEIuMi4zLjUgU3RyaW5nLnByb3RvdHlwZS5ib2xkKClcbl9kZXJlcV8oMTA4KSgnYm9sZCcsIGZ1bmN0aW9uIChjcmVhdGVIVE1MKSB7XG4gIHJldHVybiBmdW5jdGlvbiBib2xkKCkge1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdiJywgJycsICcnKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDIzNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyICRhdCA9IF9kZXJlcV8oMTA2KShmYWxzZSk7XG4kZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcbiAgLy8gMjEuMS4zLjMgU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdChwb3MpXG4gIGNvZGVQb2ludEF0OiBmdW5jdGlvbiBjb2RlUG9pbnRBdChwb3MpIHtcbiAgICByZXR1cm4gJGF0KHRoaXMsIHBvcyk7XG4gIH1cbn0pO1xuXG59LHtcIjEwNlwiOjEwNixcIjMzXCI6MzN9XSwyMzc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gMjEuMS4zLjYgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aChzZWFyY2hTdHJpbmcgWywgZW5kUG9zaXRpb25dKVxuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbnZhciBjb250ZXh0ID0gX2RlcmVxXygxMDcpO1xudmFyIEVORFNfV0lUSCA9ICdlbmRzV2l0aCc7XG52YXIgJGVuZHNXaXRoID0gJydbRU5EU19XSVRIXTtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBfZGVyZXFfKDM0KShFTkRTX1dJVEgpLCAnU3RyaW5nJywge1xuICBlbmRzV2l0aDogZnVuY3Rpb24gZW5kc1dpdGgoc2VhcmNoU3RyaW5nIC8qICwgZW5kUG9zaXRpb24gPSBAbGVuZ3RoICovKSB7XG4gICAgdmFyIHRoYXQgPSBjb250ZXh0KHRoaXMsIHNlYXJjaFN0cmluZywgRU5EU19XSVRIKTtcbiAgICB2YXIgZW5kUG9zaXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbGVuID0gdG9MZW5ndGgodGhhdC5sZW5ndGgpO1xuICAgIHZhciBlbmQgPSBlbmRQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gbGVuIDogTWF0aC5taW4odG9MZW5ndGgoZW5kUG9zaXRpb24pLCBsZW4pO1xuICAgIHZhciBzZWFyY2ggPSBTdHJpbmcoc2VhcmNoU3RyaW5nKTtcbiAgICByZXR1cm4gJGVuZHNXaXRoXG4gICAgICA/ICRlbmRzV2l0aC5jYWxsKHRoYXQsIHNlYXJjaCwgZW5kKVxuICAgICAgOiB0aGF0LnNsaWNlKGVuZCAtIHNlYXJjaC5sZW5ndGgsIGVuZCkgPT09IHNlYXJjaDtcbiAgfVxufSk7XG5cbn0se1wiMTA3XCI6MTA3LFwiMTE4XCI6MTE4LFwiMzNcIjozMyxcIjM0XCI6MzR9XSwyMzg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuNiBTdHJpbmcucHJvdG90eXBlLmZpeGVkKClcbl9kZXJlcV8oMTA4KSgnZml4ZWQnLCBmdW5jdGlvbiAoY3JlYXRlSFRNTCkge1xuICByZXR1cm4gZnVuY3Rpb24gZml4ZWQoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ3R0JywgJycsICcnKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDIzOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBCLjIuMy43IFN0cmluZy5wcm90b3R5cGUuZm9udGNvbG9yKGNvbG9yKVxuX2RlcmVxXygxMDgpKCdmb250Y29sb3InLCBmdW5jdGlvbiAoY3JlYXRlSFRNTCkge1xuICByZXR1cm4gZnVuY3Rpb24gZm9udGNvbG9yKGNvbG9yKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2ZvbnQnLCAnY29sb3InLCBjb2xvcik7XG4gIH07XG59KTtcblxufSx7XCIxMDhcIjoxMDh9XSwyNDA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuOCBTdHJpbmcucHJvdG90eXBlLmZvbnRzaXplKHNpemUpXG5fZGVyZXFfKDEwOCkoJ2ZvbnRzaXplJywgZnVuY3Rpb24gKGNyZWF0ZUhUTUwpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZvbnRzaXplKHNpemUpIHtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnZm9udCcsICdzaXplJywgc2l6ZSk7XG4gIH07XG59KTtcblxufSx7XCIxMDhcIjoxMDh9XSwyNDE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b0Fic29sdXRlSW5kZXggPSBfZGVyZXFfKDExNCk7XG52YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcbnZhciAkZnJvbUNvZGVQb2ludCA9IFN0cmluZy5mcm9tQ29kZVBvaW50O1xuXG4vLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghISRmcm9tQ29kZVBvaW50ICYmICRmcm9tQ29kZVBvaW50Lmxlbmd0aCAhPSAxKSwgJ1N0cmluZycsIHtcbiAgLy8gMjEuMS4yLjIgU3RyaW5nLmZyb21Db2RlUG9pbnQoLi4uY29kZVBvaW50cylcbiAgZnJvbUNvZGVQb2ludDogZnVuY3Rpb24gZnJvbUNvZGVQb2ludCh4KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICB2YXIgcmVzID0gW107XG4gICAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgY29kZTtcbiAgICB3aGlsZSAoYUxlbiA+IGkpIHtcbiAgICAgIGNvZGUgPSArYXJndW1lbnRzW2krK107XG4gICAgICBpZiAodG9BYnNvbHV0ZUluZGV4KGNvZGUsIDB4MTBmZmZmKSAhPT0gY29kZSkgdGhyb3cgUmFuZ2VFcnJvcihjb2RlICsgJyBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50Jyk7XG4gICAgICByZXMucHVzaChjb2RlIDwgMHgxMDAwMFxuICAgICAgICA/IGZyb21DaGFyQ29kZShjb2RlKVxuICAgICAgICA6IGZyb21DaGFyQ29kZSgoKGNvZGUgLT0gMHgxMDAwMCkgPj4gMTApICsgMHhkODAwLCBjb2RlICUgMHg0MDAgKyAweGRjMDApXG4gICAgICApO1xuICAgIH0gcmV0dXJuIHJlcy5qb2luKCcnKTtcbiAgfVxufSk7XG5cbn0se1wiMTE0XCI6MTE0LFwiMzNcIjozM31dLDI0MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMS4xLjMuNyBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKHNlYXJjaFN0cmluZywgcG9zaXRpb24gPSAwKVxuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBjb250ZXh0ID0gX2RlcmVxXygxMDcpO1xudmFyIElOQ0xVREVTID0gJ2luY2x1ZGVzJztcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBfZGVyZXFfKDM0KShJTkNMVURFUyksICdTdHJpbmcnLCB7XG4gIGluY2x1ZGVzOiBmdW5jdGlvbiBpbmNsdWRlcyhzZWFyY2hTdHJpbmcgLyogLCBwb3NpdGlvbiA9IDAgKi8pIHtcbiAgICByZXR1cm4gISF+Y29udGV4dCh0aGlzLCBzZWFyY2hTdHJpbmcsIElOQ0xVREVTKVxuICAgICAgLmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuXG59LHtcIjEwN1wiOjEwNyxcIjMzXCI6MzMsXCIzNFwiOjM0fV0sMjQzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIEIuMi4zLjkgU3RyaW5nLnByb3RvdHlwZS5pdGFsaWNzKClcbl9kZXJlcV8oMTA4KSgnaXRhbGljcycsIGZ1bmN0aW9uIChjcmVhdGVIVE1MKSB7XG4gIHJldHVybiBmdW5jdGlvbiBpdGFsaWNzKCkge1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdpJywgJycsICcnKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDI0NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgJGF0ID0gX2RlcmVxXygxMDYpKHRydWUpO1xuXG4vLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5fZGVyZXFfKDU1KShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbiAoaXRlcmF0ZWQpIHtcbiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxufSwgZnVuY3Rpb24gKCkge1xuICB2YXIgTyA9IHRoaXMuX3Q7XG4gIHZhciBpbmRleCA9IHRoaXMuX2k7XG4gIHZhciBwb2ludDtcbiAgaWYgKGluZGV4ID49IE8ubGVuZ3RoKSByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIHBvaW50ID0gJGF0KE8sIGluZGV4KTtcbiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7XG4gIHJldHVybiB7IHZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2UgfTtcbn0pO1xuXG59LHtcIjEwNlwiOjEwNixcIjU1XCI6NTV9XSwyNDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuMTAgU3RyaW5nLnByb3RvdHlwZS5saW5rKHVybClcbl9kZXJlcV8oMTA4KSgnbGluaycsIGZ1bmN0aW9uIChjcmVhdGVIVE1MKSB7XG4gIHJldHVybiBmdW5jdGlvbiBsaW5rKHVybCkge1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdhJywgJ2hyZWYnLCB1cmwpO1xuICB9O1xufSk7XG5cbn0se1wiMTA4XCI6MTA4fV0sMjQ2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgdG9JT2JqZWN0ID0gX2RlcmVxXygxMTcpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1N0cmluZycsIHtcbiAgLy8gMjEuMS4yLjQgU3RyaW5nLnJhdyhjYWxsU2l0ZSwgLi4uc3Vic3RpdHV0aW9ucylcbiAgcmF3OiBmdW5jdGlvbiByYXcoY2FsbFNpdGUpIHtcbiAgICB2YXIgdHBsID0gdG9JT2JqZWN0KGNhbGxTaXRlLnJhdyk7XG4gICAgdmFyIGxlbiA9IHRvTGVuZ3RoKHRwbC5sZW5ndGgpO1xuICAgIHZhciBhTGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgcmVzID0gW107XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChsZW4gPiBpKSB7XG4gICAgICByZXMucHVzaChTdHJpbmcodHBsW2krK10pKTtcbiAgICAgIGlmIChpIDwgYUxlbikgcmVzLnB1c2goU3RyaW5nKGFyZ3VtZW50c1tpXSkpO1xuICAgIH0gcmV0dXJuIHJlcy5qb2luKCcnKTtcbiAgfVxufSk7XG5cbn0se1wiMTE3XCI6MTE3LFwiMTE4XCI6MTE4LFwiMzNcIjozM31dLDI0NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcbiAgLy8gMjEuMS4zLjEzIFN0cmluZy5wcm90b3R5cGUucmVwZWF0KGNvdW50KVxuICByZXBlYXQ6IF9kZXJlcV8oMTEwKVxufSk7XG5cbn0se1wiMTEwXCI6MTEwLFwiMzNcIjozM31dLDI0ODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4xMSBTdHJpbmcucHJvdG90eXBlLnNtYWxsKClcbl9kZXJlcV8oMTA4KSgnc21hbGwnLCBmdW5jdGlvbiAoY3JlYXRlSFRNTCkge1xuICByZXR1cm4gZnVuY3Rpb24gc21hbGwoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ3NtYWxsJywgJycsICcnKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDI0OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyAyMS4xLjMuMTggU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoKHNlYXJjaFN0cmluZyBbLCBwb3NpdGlvbiBdKVxuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b0xlbmd0aCA9IF9kZXJlcV8oMTE4KTtcbnZhciBjb250ZXh0ID0gX2RlcmVxXygxMDcpO1xudmFyIFNUQVJUU19XSVRIID0gJ3N0YXJ0c1dpdGgnO1xudmFyICRzdGFydHNXaXRoID0gJydbU1RBUlRTX1dJVEhdO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIF9kZXJlcV8oMzQpKFNUQVJUU19XSVRIKSwgJ1N0cmluZycsIHtcbiAgc3RhcnRzV2l0aDogZnVuY3Rpb24gc3RhcnRzV2l0aChzZWFyY2hTdHJpbmcgLyogLCBwb3NpdGlvbiA9IDAgKi8pIHtcbiAgICB2YXIgdGhhdCA9IGNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBTVEFSVFNfV0lUSCk7XG4gICAgdmFyIGluZGV4ID0gdG9MZW5ndGgoTWF0aC5taW4oYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIHRoYXQubGVuZ3RoKSk7XG4gICAgdmFyIHNlYXJjaCA9IFN0cmluZyhzZWFyY2hTdHJpbmcpO1xuICAgIHJldHVybiAkc3RhcnRzV2l0aFxuICAgICAgPyAkc3RhcnRzV2l0aC5jYWxsKHRoYXQsIHNlYXJjaCwgaW5kZXgpXG4gICAgICA6IHRoYXQuc2xpY2UoaW5kZXgsIGluZGV4ICsgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDtcbiAgfVxufSk7XG5cbn0se1wiMTA3XCI6MTA3LFwiMTE4XCI6MTE4LFwiMzNcIjozMyxcIjM0XCI6MzR9XSwyNTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5zdHJpa2UoKVxuX2RlcmVxXygxMDgpKCdzdHJpa2UnLCBmdW5jdGlvbiAoY3JlYXRlSFRNTCkge1xuICByZXR1cm4gZnVuY3Rpb24gc3RyaWtlKCkge1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdzdHJpa2UnLCAnJywgJycpO1xuICB9O1xufSk7XG5cbn0se1wiMTA4XCI6MTA4fV0sMjUxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIEIuMi4zLjEzIFN0cmluZy5wcm90b3R5cGUuc3ViKClcbl9kZXJlcV8oMTA4KSgnc3ViJywgZnVuY3Rpb24gKGNyZWF0ZUhUTUwpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHN1YigpIHtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc3ViJywgJycsICcnKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEwOFwiOjEwOH1dLDI1MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4xNCBTdHJpbmcucHJvdG90eXBlLnN1cCgpXG5fZGVyZXFfKDEwOCkoJ3N1cCcsIGZ1bmN0aW9uIChjcmVhdGVIVE1MKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzdXAoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ3N1cCcsICcnLCAnJyk7XG4gIH07XG59KTtcblxufSx7XCIxMDhcIjoxMDh9XSwyNTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gMjEuMS4zLjI1IFN0cmluZy5wcm90b3R5cGUudHJpbSgpXG5fZGVyZXFfKDExMSkoJ3RyaW0nLCBmdW5jdGlvbiAoJHRyaW0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRyaW0oKSB7XG4gICAgcmV0dXJuICR0cmltKHRoaXMsIDMpO1xuICB9O1xufSk7XG5cbn0se1wiMTExXCI6MTExfV0sMjU0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW1cbnZhciBnbG9iYWwgPSBfZGVyZXFfKDQwKTtcbnZhciBoYXMgPSBfZGVyZXFfKDQxKTtcbnZhciBERVNDUklQVE9SUyA9IF9kZXJlcV8oMjkpO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciByZWRlZmluZSA9IF9kZXJlcV8oOTQpO1xudmFyIE1FVEEgPSBfZGVyZXFfKDY2KS5LRVk7XG52YXIgJGZhaWxzID0gX2RlcmVxXygzNSk7XG52YXIgc2hhcmVkID0gX2RlcmVxXygxMDMpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gX2RlcmVxXygxMDEpO1xudmFyIHVpZCA9IF9kZXJlcV8oMTI0KTtcbnZhciB3a3MgPSBfZGVyZXFfKDEyOCk7XG52YXIgd2tzRXh0ID0gX2RlcmVxXygxMjcpO1xudmFyIHdrc0RlZmluZSA9IF9kZXJlcV8oMTI2KTtcbnZhciBrZXlPZiA9IF9kZXJlcV8oNTkpO1xudmFyIGVudW1LZXlzID0gX2RlcmVxXygzMik7XG52YXIgaXNBcnJheSA9IF9kZXJlcV8oNDkpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciB0b0lPYmplY3QgPSBfZGVyZXFfKDExNyk7XG52YXIgdG9QcmltaXRpdmUgPSBfZGVyZXFfKDEyMCk7XG52YXIgY3JlYXRlRGVzYyA9IF9kZXJlcV8oOTIpO1xudmFyIF9jcmVhdGUgPSBfZGVyZXFfKDcxKTtcbnZhciBnT1BORXh0ID0gX2RlcmVxXyg3Nik7XG52YXIgJEdPUEQgPSBfZGVyZXFfKDc1KTtcbnZhciAkRFAgPSBfZGVyZXFfKDcyKTtcbnZhciAka2V5cyA9IF9kZXJlcV8oODEpO1xudmFyIGdPUEQgPSAkR09QRC5mO1xudmFyIGRQID0gJERQLmY7XG52YXIgZ09QTiA9IGdPUE5FeHQuZjtcbnZhciAkU3ltYm9sID0gZ2xvYmFsLlN5bWJvbDtcbnZhciAkSlNPTiA9IGdsb2JhbC5KU09OO1xudmFyIF9zdHJpbmdpZnkgPSAkSlNPTiAmJiAkSlNPTi5zdHJpbmdpZnk7XG52YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG52YXIgSElEREVOID0gd2tzKCdfaGlkZGVuJyk7XG52YXIgVE9fUFJJTUlUSVZFID0gd2tzKCd0b1ByaW1pdGl2ZScpO1xudmFyIGlzRW51bSA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKTtcbnZhciBBbGxTeW1ib2xzID0gc2hhcmVkKCdzeW1ib2xzJyk7XG52YXIgT1BTeW1ib2xzID0gc2hhcmVkKCdvcC1zeW1ib2xzJyk7XG52YXIgT2JqZWN0UHJvdG8gPSBPYmplY3RbUFJPVE9UWVBFXTtcbnZhciBVU0VfTkFUSVZFID0gdHlwZW9mICRTeW1ib2wgPT0gJ2Z1bmN0aW9uJztcbnZhciBRT2JqZWN0ID0gZ2xvYmFsLlFPYmplY3Q7XG4vLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzNcbnZhciBzZXR0ZXIgPSAhUU9iamVjdCB8fCAhUU9iamVjdFtQUk9UT1RZUEVdIHx8ICFRT2JqZWN0W1BST1RPVFlQRV0uZmluZENoaWxkO1xuXG4vLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODdcbnZhciBzZXRTeW1ib2xEZXNjID0gREVTQ1JJUFRPUlMgJiYgJGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIF9jcmVhdGUoZFAoe30sICdhJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7IHZhbHVlOiA3IH0pLmE7IH1cbiAgfSkpLmEgIT0gNztcbn0pID8gZnVuY3Rpb24gKGl0LCBrZXksIEQpIHtcbiAgdmFyIHByb3RvRGVzYyA9IGdPUEQoT2JqZWN0UHJvdG8sIGtleSk7XG4gIGlmIChwcm90b0Rlc2MpIGRlbGV0ZSBPYmplY3RQcm90b1trZXldO1xuICBkUChpdCwga2V5LCBEKTtcbiAgaWYgKHByb3RvRGVzYyAmJiBpdCAhPT0gT2JqZWN0UHJvdG8pIGRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7XG59IDogZFA7XG5cbnZhciB3cmFwID0gZnVuY3Rpb24gKHRhZykge1xuICB2YXIgc3ltID0gQWxsU3ltYm9sc1t0YWddID0gX2NyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pO1xuICBzeW0uX2sgPSB0YWc7XG4gIHJldHVybiBzeW07XG59O1xuXG52YXIgaXNTeW1ib2wgPSBVU0VfTkFUSVZFICYmIHR5cGVvZiAkU3ltYm9sLml0ZXJhdG9yID09ICdzeW1ib2wnID8gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG59IDogZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7XG59O1xuXG52YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCkge1xuICBpZiAoaXQgPT09IE9iamVjdFByb3RvKSAkZGVmaW5lUHJvcGVydHkoT1BTeW1ib2xzLCBrZXksIEQpO1xuICBhbk9iamVjdChpdCk7XG4gIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEQpO1xuICBpZiAoaGFzKEFsbFN5bWJvbHMsIGtleSkpIHtcbiAgICBpZiAoIUQuZW51bWVyYWJsZSkge1xuICAgICAgaWYgKCFoYXMoaXQsIEhJRERFTikpIGRQKGl0LCBISURERU4sIGNyZWF0ZURlc2MoMSwge30pKTtcbiAgICAgIGl0W0hJRERFTl1ba2V5XSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSBpdFtISURERU5dW2tleV0gPSBmYWxzZTtcbiAgICAgIEQgPSBfY3JlYXRlKEQsIHsgZW51bWVyYWJsZTogY3JlYXRlRGVzYygwLCBmYWxzZSkgfSk7XG4gICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTtcbiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7XG59O1xudmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCkge1xuICBhbk9iamVjdChpdCk7XG4gIHZhciBrZXlzID0gZW51bUtleXMoUCA9IHRvSU9iamVjdChQKSk7XG4gIHZhciBpID0gMDtcbiAgdmFyIGwgPSBrZXlzLmxlbmd0aDtcbiAgdmFyIGtleTtcbiAgd2hpbGUgKGwgPiBpKSAkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKSB7XG4gIHJldHVybiBQID09PSB1bmRlZmluZWQgPyBfY3JlYXRlKGl0KSA6ICRkZWZpbmVQcm9wZXJ0aWVzKF9jcmVhdGUoaXQpLCBQKTtcbn07XG52YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoa2V5KSB7XG4gIHZhciBFID0gaXNFbnVtLmNhbGwodGhpcywga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSk7XG4gIGlmICh0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gRSB8fCAhaGFzKHRoaXMsIGtleSkgfHwgIWhhcyhBbGxTeW1ib2xzLCBrZXkpIHx8IGhhcyh0aGlzLCBISURERU4pICYmIHRoaXNbSElEREVOXVtrZXldID8gRSA6IHRydWU7XG59O1xudmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSkge1xuICBpdCA9IHRvSU9iamVjdChpdCk7XG4gIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7XG4gIGlmIChpdCA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpIHJldHVybjtcbiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpO1xuICBpZiAoRCAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pKSBELmVudW1lcmFibGUgPSB0cnVlO1xuICByZXR1cm4gRDtcbn07XG52YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KSB7XG4gIHZhciBuYW1lcyA9IGdPUE4odG9JT2JqZWN0KGl0KSk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdmFyIGkgPSAwO1xuICB2YXIga2V5O1xuICB3aGlsZSAobmFtZXMubGVuZ3RoID4gaSkge1xuICAgIGlmICghaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpIHJlc3VsdC5wdXNoKGtleSk7XG4gIH0gcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhpdCkge1xuICB2YXIgSVNfT1AgPSBpdCA9PT0gT2JqZWN0UHJvdG87XG4gIHZhciBuYW1lcyA9IGdPUE4oSVNfT1AgPyBPUFN5bWJvbHMgOiB0b0lPYmplY3QoaXQpKTtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICB2YXIgaSA9IDA7XG4gIHZhciBrZXk7XG4gIHdoaWxlIChuYW1lcy5sZW5ndGggPiBpKSB7XG4gICAgaWYgKGhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiAoSVNfT1AgPyBoYXMoT2JqZWN0UHJvdG8sIGtleSkgOiB0cnVlKSkgcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXG5pZiAoIVVTRV9OQVRJVkUpIHtcbiAgJFN5bWJvbCA9IGZ1bmN0aW9uIFN5bWJvbCgpIHtcbiAgICBpZiAodGhpcyBpbnN0YW5jZW9mICRTeW1ib2wpIHRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpO1xuICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpO1xuICAgIHZhciAkc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcyA9PT0gT2JqZWN0UHJvdG8pICRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTtcbiAgICAgIGlmIChoYXModGhpcywgSElEREVOKSAmJiBoYXModGhpc1tISURERU5dLCB0YWcpKSB0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlO1xuICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcbiAgICB9O1xuICAgIGlmIChERVNDUklQVE9SUyAmJiBzZXR0ZXIpIHNldFN5bWJvbERlc2MoT2JqZWN0UHJvdG8sIHRhZywgeyBjb25maWd1cmFibGU6IHRydWUsIHNldDogJHNldCB9KTtcbiAgICByZXR1cm4gd3JhcCh0YWcpO1xuICB9O1xuICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9rO1xuICB9KTtcblxuICAkR09QRC5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbiAgJERQLmYgPSAkZGVmaW5lUHJvcGVydHk7XG4gIF9kZXJlcV8oNzcpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgX2RlcmVxXyg4MikuZiA9ICRwcm9wZXJ0eUlzRW51bWVyYWJsZTtcbiAgX2RlcmVxXyg3OCkuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG5cbiAgaWYgKERFU0NSSVBUT1JTICYmICFfZGVyZXFfKDYwKSkge1xuICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpO1xuICB9XG5cbiAgd2tzRXh0LmYgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7XG4gIH07XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHsgU3ltYm9sOiAkU3ltYm9sIH0pO1xuXG5mb3IgKHZhciBlczZTeW1ib2xzID0gKFxuICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNFxuICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnXG4pLnNwbGl0KCcsJyksIGogPSAwOyBlczZTeW1ib2xzLmxlbmd0aCA+IGo7KXdrcyhlczZTeW1ib2xzW2orK10pO1xuXG5mb3IgKHZhciB3ZWxsS25vd25TeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgayA9IDA7IHdlbGxLbm93blN5bWJvbHMubGVuZ3RoID4gazspIHdrc0RlZmluZSh3ZWxsS25vd25TeW1ib2xzW2srK10pO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywge1xuICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcbiAgJ2Zvcic6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gaGFzKFN5bWJvbFJlZ2lzdHJ5LCBrZXkgKz0gJycpXG4gICAgICA/IFN5bWJvbFJlZ2lzdHJ5W2tleV1cbiAgICAgIDogU3ltYm9sUmVnaXN0cnlba2V5XSA9ICRTeW1ib2woa2V5KTtcbiAgfSxcbiAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pXG4gIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKGtleSkge1xuICAgIGlmIChpc1N5bWJvbChrZXkpKSByZXR1cm4ga2V5T2YoU3ltYm9sUmVnaXN0cnksIGtleSk7XG4gICAgdGhyb3cgVHlwZUVycm9yKGtleSArICcgaXMgbm90IGEgc3ltYm9sIScpO1xuICB9LFxuICB1c2VTZXR0ZXI6IGZ1bmN0aW9uICgpIHsgc2V0dGVyID0gdHJ1ZTsgfSxcbiAgdXNlU2ltcGxlOiBmdW5jdGlvbiAoKSB7IHNldHRlciA9IGZhbHNlOyB9XG59KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHtcbiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxuICBjcmVhdGU6ICRjcmVhdGUsXG4gIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LFxuICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKVxuICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcyxcbiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKVxuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG4gIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pXG4gIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9sc1xufSk7XG5cbi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKVxuJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFMgPSAkU3ltYm9sKCk7XG4gIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9XG4gIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbFxuICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9sc1xuICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoeyBhOiBTIH0pICE9ICd7fScgfHwgX3N0cmluZ2lmeShPYmplY3QoUykpICE9ICd7fSc7XG59KSksICdKU09OJywge1xuICBzdHJpbmdpZnk6IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCkge1xuICAgIGlmIChpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSkgcmV0dXJuOyAvLyBJRTggcmV0dXJucyBzdHJpbmcgb24gdW5kZWZpbmVkXG4gICAgdmFyIGFyZ3MgPSBbaXRdO1xuICAgIHZhciBpID0gMTtcbiAgICB2YXIgcmVwbGFjZXIsICRyZXBsYWNlcjtcbiAgICB3aGlsZSAoYXJndW1lbnRzLmxlbmd0aCA+IGkpIGFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XG4gICAgcmVwbGFjZXIgPSBhcmdzWzFdO1xuICAgIGlmICh0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykgJHJlcGxhY2VyID0gcmVwbGFjZXI7XG4gICAgaWYgKCRyZXBsYWNlciB8fCAhaXNBcnJheShyZXBsYWNlcikpIHJlcGxhY2VyID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmICgkcmVwbGFjZXIpIHZhbHVlID0gJHJlcGxhY2VyLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7XG4gICAgICBpZiAoIWlzU3ltYm9sKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgYXJnc1sxXSA9IHJlcGxhY2VyO1xuICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTtcbiAgfVxufSk7XG5cbi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludClcbiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IF9kZXJlcV8oNDIpKCRTeW1ib2xbUFJPVE9UWVBFXSwgVE9fUFJJTUlUSVZFLCAkU3ltYm9sW1BST1RPVFlQRV0udmFsdWVPZik7XG4vLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7XG4vLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpO1xuLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ11cbnNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCAnSlNPTicsIHRydWUpO1xuXG59LHtcIjEwMVwiOjEwMSxcIjEwM1wiOjEwMyxcIjExN1wiOjExNyxcIjEyMFwiOjEyMCxcIjEyNFwiOjEyNCxcIjEyNlwiOjEyNixcIjEyN1wiOjEyNyxcIjEyOFwiOjEyOCxcIjI5XCI6MjksXCIzMlwiOjMyLFwiMzNcIjozMyxcIjM1XCI6MzUsXCI0MFwiOjQwLFwiNDFcIjo0MSxcIjQyXCI6NDIsXCI0OVwiOjQ5LFwiNTlcIjo1OSxcIjYwXCI6NjAsXCI2NlwiOjY2LFwiN1wiOjcsXCI3MVwiOjcxLFwiNzJcIjo3MixcIjc1XCI6NzUsXCI3NlwiOjc2LFwiNzdcIjo3NyxcIjc4XCI6NzgsXCI4MVwiOjgxLFwiODJcIjo4MixcIjkyXCI6OTIsXCI5NFwiOjk0fV0sMjU1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHR5cGVkID0gX2RlcmVxXygxMjMpO1xudmFyIGJ1ZmZlciA9IF9kZXJlcV8oMTIyKTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgdG9BYnNvbHV0ZUluZGV4ID0gX2RlcmVxXygxMTQpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgQXJyYXlCdWZmZXIgPSBfZGVyZXFfKDQwKS5BcnJheUJ1ZmZlcjtcbnZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSBfZGVyZXFfKDEwNCk7XG52YXIgJEFycmF5QnVmZmVyID0gYnVmZmVyLkFycmF5QnVmZmVyO1xudmFyICREYXRhVmlldyA9IGJ1ZmZlci5EYXRhVmlldztcbnZhciAkaXNWaWV3ID0gJHR5cGVkLkFCViAmJiBBcnJheUJ1ZmZlci5pc1ZpZXc7XG52YXIgJHNsaWNlID0gJEFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZTtcbnZhciBWSUVXID0gJHR5cGVkLlZJRVc7XG52YXIgQVJSQVlfQlVGRkVSID0gJ0FycmF5QnVmZmVyJztcblxuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoQXJyYXlCdWZmZXIgIT09ICRBcnJheUJ1ZmZlciksIHsgQXJyYXlCdWZmZXI6ICRBcnJheUJ1ZmZlciB9KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhJHR5cGVkLkNPTlNUUiwgQVJSQVlfQlVGRkVSLCB7XG4gIC8vIDI0LjEuMy4xIEFycmF5QnVmZmVyLmlzVmlldyhhcmcpXG4gIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KGl0KSB7XG4gICAgcmV0dXJuICRpc1ZpZXcgJiYgJGlzVmlldyhpdCkgfHwgaXNPYmplY3QoaXQpICYmIFZJRVcgaW4gaXQ7XG4gIH1cbn0pO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuVSArICRleHBvcnQuRiAqIF9kZXJlcV8oMzUpKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICFuZXcgJEFycmF5QnVmZmVyKDIpLnNsaWNlKDEsIHVuZGVmaW5lZCkuYnl0ZUxlbmd0aDtcbn0pLCBBUlJBWV9CVUZGRVIsIHtcbiAgLy8gMjQuMS40LjMgQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHNsaWNlOiBmdW5jdGlvbiBzbGljZShzdGFydCwgZW5kKSB7XG4gICAgaWYgKCRzbGljZSAhPT0gdW5kZWZpbmVkICYmIGVuZCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJHNsaWNlLmNhbGwoYW5PYmplY3QodGhpcyksIHN0YXJ0KTsgLy8gRkYgZml4XG4gICAgdmFyIGxlbiA9IGFuT2JqZWN0KHRoaXMpLmJ5dGVMZW5ndGg7XG4gICAgdmFyIGZpcnN0ID0gdG9BYnNvbHV0ZUluZGV4KHN0YXJ0LCBsZW4pO1xuICAgIHZhciBmaW5hbCA9IHRvQWJzb2x1dGVJbmRleChlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IGVuZCwgbGVuKTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IChzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJEFycmF5QnVmZmVyKSkodG9MZW5ndGgoZmluYWwgLSBmaXJzdCkpO1xuICAgIHZhciB2aWV3UyA9IG5ldyAkRGF0YVZpZXcodGhpcyk7XG4gICAgdmFyIHZpZXdUID0gbmV3ICREYXRhVmlldyhyZXN1bHQpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgd2hpbGUgKGZpcnN0IDwgZmluYWwpIHtcbiAgICAgIHZpZXdULnNldFVpbnQ4KGluZGV4KyssIHZpZXdTLmdldFVpbnQ4KGZpcnN0KyspKTtcbiAgICB9IHJldHVybiByZXN1bHQ7XG4gIH1cbn0pO1xuXG5fZGVyZXFfKDEwMCkoQVJSQVlfQlVGRkVSKTtcblxufSx7XCIxMDBcIjoxMDAsXCIxMDRcIjoxMDQsXCIxMTRcIjoxMTQsXCIxMThcIjoxMTgsXCIxMjJcIjoxMjIsXCIxMjNcIjoxMjMsXCIzM1wiOjMzLFwiMzVcIjozNSxcIjQwXCI6NDAsXCI1MVwiOjUxLFwiN1wiOjd9XSwyNTY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIV9kZXJlcV8oMTIzKS5BQlYsIHtcbiAgRGF0YVZpZXc6IF9kZXJlcV8oMTIyKS5EYXRhVmlld1xufSk7XG5cbn0se1wiMTIyXCI6MTIyLFwiMTIzXCI6MTIzLFwiMzNcIjozM31dLDI1NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5fZGVyZXFfKDEyMSkoJ0Zsb2F0MzInLCA0LCBmdW5jdGlvbiAoaW5pdCkge1xuICByZXR1cm4gZnVuY3Rpb24gRmxvYXQzMkFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG4gIH07XG59KTtcblxufSx7XCIxMjFcIjoxMjF9XSwyNTg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuX2RlcmVxXygxMjEpKCdGbG9hdDY0JywgOCwgZnVuY3Rpb24gKGluaXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIEZsb2F0NjRBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cbn0se1wiMTIxXCI6MTIxfV0sMjU5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbl9kZXJlcV8oMTIxKSgnSW50MTYnLCAyLCBmdW5jdGlvbiAoaW5pdCkge1xuICByZXR1cm4gZnVuY3Rpb24gSW50MTZBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cbn0se1wiMTIxXCI6MTIxfV0sMjYwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbl9kZXJlcV8oMTIxKSgnSW50MzInLCA0LCBmdW5jdGlvbiAoaW5pdCkge1xuICByZXR1cm4gZnVuY3Rpb24gSW50MzJBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cbn0se1wiMTIxXCI6MTIxfV0sMjYxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbl9kZXJlcV8oMTIxKSgnSW50OCcsIDEsIGZ1bmN0aW9uIChpbml0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBJbnQ4QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgfTtcbn0pO1xuXG59LHtcIjEyMVwiOjEyMX1dLDI2MjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5fZGVyZXFfKDEyMSkoJ1VpbnQxNicsIDIsIGZ1bmN0aW9uIChpbml0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBVaW50MTZBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cbn0se1wiMTIxXCI6MTIxfV0sMjYzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbl9kZXJlcV8oMTIxKSgnVWludDMyJywgNCwgZnVuY3Rpb24gKGluaXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFVpbnQzMkFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG4gIH07XG59KTtcblxufSx7XCIxMjFcIjoxMjF9XSwyNjQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuX2RlcmVxXygxMjEpKCdVaW50OCcsIDEsIGZ1bmN0aW9uIChpbml0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBVaW50OEFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG4gIH07XG59KTtcblxufSx7XCIxMjFcIjoxMjF9XSwyNjU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuX2RlcmVxXygxMjEpKCdVaW50OCcsIDEsIGZ1bmN0aW9uIChpbml0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBVaW50OENsYW1wZWRBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSwgdHJ1ZSk7XG5cbn0se1wiMTIxXCI6MTIxfV0sMjY2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciBlYWNoID0gX2RlcmVxXygxMikoMCk7XG52YXIgcmVkZWZpbmUgPSBfZGVyZXFfKDk0KTtcbnZhciBtZXRhID0gX2RlcmVxXyg2Nik7XG52YXIgYXNzaWduID0gX2RlcmVxXyg3MCk7XG52YXIgd2VhayA9IF9kZXJlcV8oMjEpO1xudmFyIGlzT2JqZWN0ID0gX2RlcmVxXyg1MSk7XG52YXIgZmFpbHMgPSBfZGVyZXFfKDM1KTtcbnZhciB2YWxpZGF0ZSA9IF9kZXJlcV8oMTI1KTtcbnZhciBXRUFLX01BUCA9ICdXZWFrTWFwJztcbnZhciBnZXRXZWFrID0gbWV0YS5nZXRXZWFrO1xudmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGU7XG52YXIgdW5jYXVnaHRGcm96ZW5TdG9yZSA9IHdlYWsudWZzdG9yZTtcbnZhciB0bXAgPSB7fTtcbnZhciBJbnRlcm5hbE1hcDtcblxudmFyIHdyYXBwZXIgPSBmdW5jdGlvbiAoZ2V0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBXZWFrTWFwKCkge1xuICAgIHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpO1xuICB9O1xufTtcblxudmFyIG1ldGhvZHMgPSB7XG4gIC8vIDIzLjMuMy4zIFdlYWtNYXAucHJvdG90eXBlLmdldChrZXkpXG4gIGdldDogZnVuY3Rpb24gZ2V0KGtleSkge1xuICAgIGlmIChpc09iamVjdChrZXkpKSB7XG4gICAgICB2YXIgZGF0YSA9IGdldFdlYWsoa2V5KTtcbiAgICAgIGlmIChkYXRhID09PSB0cnVlKSByZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZSh2YWxpZGF0ZSh0aGlzLCBXRUFLX01BUCkpLmdldChrZXkpO1xuICAgICAgcmV0dXJuIGRhdGEgPyBkYXRhW3RoaXMuX2ldIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfSxcbiAgLy8gMjMuMy4zLjUgV2Vha01hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpXG4gIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gd2Vhay5kZWYodmFsaWRhdGUodGhpcywgV0VBS19NQVApLCBrZXksIHZhbHVlKTtcbiAgfVxufTtcblxuLy8gMjMuMyBXZWFrTWFwIE9iamVjdHNcbnZhciAkV2Vha01hcCA9IG1vZHVsZS5leHBvcnRzID0gX2RlcmVxXygyMikoV0VBS19NQVAsIHdyYXBwZXIsIG1ldGhvZHMsIHdlYWssIHRydWUsIHRydWUpO1xuXG4vLyBJRTExIFdlYWtNYXAgZnJvemVuIGtleXMgZml4XG5pZiAoZmFpbHMoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3ICRXZWFrTWFwKCkuc2V0KChPYmplY3QuZnJlZXplIHx8IE9iamVjdCkodG1wKSwgNykuZ2V0KHRtcCkgIT0gNzsgfSkpIHtcbiAgSW50ZXJuYWxNYXAgPSB3ZWFrLmdldENvbnN0cnVjdG9yKHdyYXBwZXIsIFdFQUtfTUFQKTtcbiAgYXNzaWduKEludGVybmFsTWFwLnByb3RvdHlwZSwgbWV0aG9kcyk7XG4gIG1ldGEuTkVFRCA9IHRydWU7XG4gIGVhY2goWydkZWxldGUnLCAnaGFzJywgJ2dldCcsICdzZXQnXSwgZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBwcm90byA9ICRXZWFrTWFwLnByb3RvdHlwZTtcbiAgICB2YXIgbWV0aG9kID0gcHJvdG9ba2V5XTtcbiAgICByZWRlZmluZShwcm90bywga2V5LCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgLy8gc3RvcmUgZnJvemVuIG9iamVjdHMgb24gaW50ZXJuYWwgd2Vha21hcCBzaGltXG4gICAgICBpZiAoaXNPYmplY3QoYSkgJiYgIWlzRXh0ZW5zaWJsZShhKSkge1xuICAgICAgICBpZiAoIXRoaXMuX2YpIHRoaXMuX2YgPSBuZXcgSW50ZXJuYWxNYXAoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2Zba2V5XShhLCBiKTtcbiAgICAgICAgcmV0dXJuIGtleSA9PSAnc2V0JyA/IHRoaXMgOiByZXN1bHQ7XG4gICAgICAvLyBzdG9yZSBhbGwgdGhlIHJlc3Qgb24gbmF0aXZlIHdlYWttYXBcbiAgICAgIH0gcmV0dXJuIG1ldGhvZC5jYWxsKHRoaXMsIGEsIGIpO1xuICAgIH0pO1xuICB9KTtcbn1cblxufSx7XCIxMlwiOjEyLFwiMTI1XCI6MTI1LFwiMjFcIjoyMSxcIjIyXCI6MjIsXCIzNVwiOjM1LFwiNTFcIjo1MSxcIjY2XCI6NjYsXCI3MFwiOjcwLFwiOTRcIjo5NH1dLDI2NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgd2VhayA9IF9kZXJlcV8oMjEpO1xudmFyIHZhbGlkYXRlID0gX2RlcmVxXygxMjUpO1xudmFyIFdFQUtfU0VUID0gJ1dlYWtTZXQnO1xuXG4vLyAyMy40IFdlYWtTZXQgT2JqZWN0c1xuX2RlcmVxXygyMikoV0VBS19TRVQsIGZ1bmN0aW9uIChnZXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFdlYWtTZXQoKSB7IHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOyB9O1xufSwge1xuICAvLyAyMy40LjMuMSBXZWFrU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpXG4gIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHdlYWsuZGVmKHZhbGlkYXRlKHRoaXMsIFdFQUtfU0VUKSwgdmFsdWUsIHRydWUpO1xuICB9XG59LCB3ZWFrLCBmYWxzZSwgdHJ1ZSk7XG5cbn0se1wiMTI1XCI6MTI1LFwiMjFcIjoyMSxcIjIyXCI6MjJ9XSwyNjg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1mbGF0TWFwLyNzZWMtQXJyYXkucHJvdG90eXBlLmZsYXRNYXBcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZmxhdHRlbkludG9BcnJheSA9IF9kZXJlcV8oMzgpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG52YXIgYXJyYXlTcGVjaWVzQ3JlYXRlID0gX2RlcmVxXygxNSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnQXJyYXknLCB7XG4gIGZsYXRNYXA6IGZ1bmN0aW9uIGZsYXRNYXAoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICB2YXIgTyA9IHRvT2JqZWN0KHRoaXMpO1xuICAgIHZhciBzb3VyY2VMZW4sIEE7XG4gICAgYUZ1bmN0aW9uKGNhbGxiYWNrZm4pO1xuICAgIHNvdXJjZUxlbiA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgICBBID0gYXJyYXlTcGVjaWVzQ3JlYXRlKE8sIDApO1xuICAgIGZsYXR0ZW5JbnRvQXJyYXkoQSwgTywgTywgc291cmNlTGVuLCAwLCAxLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pO1xuICAgIHJldHVybiBBO1xuICB9XG59KTtcblxuX2RlcmVxXyg1KSgnZmxhdE1hcCcpO1xuXG59LHtcIjExOFwiOjExOCxcIjExOVwiOjExOSxcIjE1XCI6MTUsXCIzXCI6MyxcIjMzXCI6MzMsXCIzOFwiOjM4LFwiNVwiOjV9XSwyNjk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1mbGF0TWFwLyNzZWMtQXJyYXkucHJvdG90eXBlLmZsYXR0ZW5cbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZmxhdHRlbkludG9BcnJheSA9IF9kZXJlcV8oMzgpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIHRvSW50ZWdlciA9IF9kZXJlcV8oMTE2KTtcbnZhciBhcnJheVNwZWNpZXNDcmVhdGUgPSBfZGVyZXFfKDE1KTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdBcnJheScsIHtcbiAgZmxhdHRlbjogZnVuY3Rpb24gZmxhdHRlbigvKiBkZXB0aEFyZyA9IDEgKi8pIHtcbiAgICB2YXIgZGVwdGhBcmcgPSBhcmd1bWVudHNbMF07XG4gICAgdmFyIE8gPSB0b09iamVjdCh0aGlzKTtcbiAgICB2YXIgc291cmNlTGVuID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICAgIHZhciBBID0gYXJyYXlTcGVjaWVzQ3JlYXRlKE8sIDApO1xuICAgIGZsYXR0ZW5JbnRvQXJyYXkoQSwgTywgTywgc291cmNlTGVuLCAwLCBkZXB0aEFyZyA9PT0gdW5kZWZpbmVkID8gMSA6IHRvSW50ZWdlcihkZXB0aEFyZykpO1xuICAgIHJldHVybiBBO1xuICB9XG59KTtcblxuX2RlcmVxXyg1KSgnZmxhdHRlbicpO1xuXG59LHtcIjExNlwiOjExNixcIjExOFwiOjExOCxcIjExOVwiOjExOSxcIjE1XCI6MTUsXCIzM1wiOjMzLFwiMzhcIjozOCxcIjVcIjo1fV0sMjcwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L0FycmF5LnByb3RvdHlwZS5pbmNsdWRlc1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkaW5jbHVkZXMgPSBfZGVyZXFfKDExKSh0cnVlKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdBcnJheScsIHtcbiAgaW5jbHVkZXM6IGZ1bmN0aW9uIGluY2x1ZGVzKGVsIC8qICwgZnJvbUluZGV4ID0gMCAqLykge1xuICAgIHJldHVybiAkaW5jbHVkZXModGhpcywgZWwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgfVxufSk7XG5cbl9kZXJlcV8oNSkoJ2luY2x1ZGVzJyk7XG5cbn0se1wiMTFcIjoxMSxcIjMzXCI6MzMsXCI1XCI6NX1dLDI3MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vcndhbGRyb24vdGMzOS1ub3Rlcy9ibG9iL21hc3Rlci9lczYvMjAxNC0wOS9zZXB0LTI1Lm1kIzUxMC1nbG9iYWxhc2FwLWZvci1lbnF1ZXVpbmctYS1taWNyb3Rhc2tcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgbWljcm90YXNrID0gX2RlcmVxXyg2OCkoKTtcbnZhciBwcm9jZXNzID0gX2RlcmVxXyg0MCkucHJvY2VzcztcbnZhciBpc05vZGUgPSBfZGVyZXFfKDE4KShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7XG5cbiRleHBvcnQoJGV4cG9ydC5HLCB7XG4gIGFzYXA6IGZ1bmN0aW9uIGFzYXAoZm4pIHtcbiAgICB2YXIgZG9tYWluID0gaXNOb2RlICYmIHByb2Nlc3MuZG9tYWluO1xuICAgIG1pY3JvdGFzayhkb21haW4gPyBkb21haW4uYmluZChmbikgOiBmbik7XG4gIH1cbn0pO1xuXG59LHtcIjE4XCI6MTgsXCIzM1wiOjMzLFwiNDBcIjo0MCxcIjY4XCI6Njh9XSwyNzI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9wcm9wb3NhbC1pcy1lcnJvclxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBjb2YgPSBfZGVyZXFfKDE4KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdFcnJvcicsIHtcbiAgaXNFcnJvcjogZnVuY3Rpb24gaXNFcnJvcihpdCkge1xuICAgIHJldHVybiBjb2YoaXQpID09PSAnRXJyb3InO1xuICB9XG59KTtcblxufSx7XCIxOFwiOjE4LFwiMzNcIjozM31dLDI3MzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1nbG9iYWxcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5HLCB7IGdsb2JhbDogX2RlcmVxXyg0MCkgfSk7XG5cbn0se1wiMzNcIjozMyxcIjQwXCI6NDB9XSwyNzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtbWFwLmZyb21cbl9kZXJlcV8oOTcpKCdNYXAnKTtcblxufSx7XCI5N1wiOjk3fV0sMjc1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLW1hcC5vZlxuX2RlcmVxXyg5OCkoJ01hcCcpO1xuXG59LHtcIjk4XCI6OTh9XSwyNzY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTlxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LlIsICdNYXAnLCB7IHRvSlNPTjogX2RlcmVxXygyMCkoJ01hcCcpIH0pO1xuXG59LHtcIjIwXCI6MjAsXCIzM1wiOjMzfV0sMjc3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy9cbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgY2xhbXA6IGZ1bmN0aW9uIGNsYW1wKHgsIGxvd2VyLCB1cHBlcikge1xuICAgIHJldHVybiBNYXRoLm1pbih1cHBlciwgTWF0aC5tYXgobG93ZXIsIHgpKTtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozM31dLDI3ODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7IERFR19QRVJfUkFEOiBNYXRoLlBJIC8gMTgwIH0pO1xuXG59LHtcIjMzXCI6MzN9XSwyNzk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zL1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBSQURfUEVSX0RFRyA9IDE4MCAvIE1hdGguUEk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgZGVncmVlczogZnVuY3Rpb24gZGVncmVlcyhyYWRpYW5zKSB7XG4gICAgcmV0dXJuIHJhZGlhbnMgKiBSQURfUEVSX0RFRztcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozM31dLDI4MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIHNjYWxlID0gX2RlcmVxXyg2NCk7XG52YXIgZnJvdW5kID0gX2RlcmVxXyg2Mik7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgZnNjYWxlOiBmdW5jdGlvbiBmc2NhbGUoeCwgaW5Mb3csIGluSGlnaCwgb3V0TG93LCBvdXRIaWdoKSB7XG4gICAgcmV0dXJuIGZyb3VuZChzY2FsZSh4LCBpbkxvdywgaW5IaWdoLCBvdXRMb3csIG91dEhpZ2gpKTtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozMyxcIjYyXCI6NjIsXCI2NFwiOjY0fV0sMjgxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGlhZGRoOiBmdW5jdGlvbiBpYWRkaCh4MCwgeDEsIHkwLCB5MSkge1xuICAgIHZhciAkeDAgPSB4MCA+Pj4gMDtcbiAgICB2YXIgJHgxID0geDEgPj4+IDA7XG4gICAgdmFyICR5MCA9IHkwID4+PiAwO1xuICAgIHJldHVybiAkeDEgKyAoeTEgPj4+IDApICsgKCgkeDAgJiAkeTAgfCAoJHgwIHwgJHkwKSAmIH4oJHgwICsgJHkwID4+PiAwKSkgPj4+IDMxKSB8IDA7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzN9XSwyODI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDNcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgaW11bGg6IGZ1bmN0aW9uIGltdWxoKHUsIHYpIHtcbiAgICB2YXIgVUlOVDE2ID0gMHhmZmZmO1xuICAgIHZhciAkdSA9ICt1O1xuICAgIHZhciAkdiA9ICt2O1xuICAgIHZhciB1MCA9ICR1ICYgVUlOVDE2O1xuICAgIHZhciB2MCA9ICR2ICYgVUlOVDE2O1xuICAgIHZhciB1MSA9ICR1ID4+IDE2O1xuICAgIHZhciB2MSA9ICR2ID4+IDE2O1xuICAgIHZhciB0ID0gKHUxICogdjAgPj4+IDApICsgKHUwICogdjAgPj4+IDE2KTtcbiAgICByZXR1cm4gdTEgKiB2MSArICh0ID4+IDE2KSArICgodTAgKiB2MSA+Pj4gMCkgKyAodCAmIFVJTlQxNikgPj4gMTYpO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzfV0sMjgzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGlzdWJoOiBmdW5jdGlvbiBpc3ViaCh4MCwgeDEsIHkwLCB5MSkge1xuICAgIHZhciAkeDAgPSB4MCA+Pj4gMDtcbiAgICB2YXIgJHgxID0geDEgPj4+IDA7XG4gICAgdmFyICR5MCA9IHkwID4+PiAwO1xuICAgIHJldHVybiAkeDEgLSAoeTEgPj4+IDApIC0gKCh+JHgwICYgJHkwIHwgfigkeDAgXiAkeTApICYgJHgwIC0gJHkwID4+PiAwKSA+Pj4gMzEpIHwgMDtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozM31dLDI4NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7IFJBRF9QRVJfREVHOiAxODAgLyBNYXRoLlBJIH0pO1xuXG59LHtcIjMzXCI6MzN9XSwyODU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zL1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciBERUdfUEVSX1JBRCA9IE1hdGguUEkgLyAxODA7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgcmFkaWFuczogZnVuY3Rpb24gcmFkaWFucyhkZWdyZWVzKSB7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiBERUdfUEVSX1JBRDtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozM31dLDI4NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7IHNjYWxlOiBfZGVyZXFfKDY0KSB9KTtcblxufSx7XCIzM1wiOjMzLFwiNjRcIjo2NH1dLDI4NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwOi8vamZiYXN0aWVuLmdpdGh1Yi5pby9wYXBlcnMvTWF0aC5zaWduYml0Lmh0bWxcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsgc2lnbmJpdDogZnVuY3Rpb24gc2lnbmJpdCh4KSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgcmV0dXJuICh4ID0gK3gpICE9IHggPyB4IDogeCA9PSAwID8gMSAvIHggPT0gSW5maW5pdHkgOiB4ID4gMDtcbn0gfSk7XG5cbn0se1wiMzNcIjozM31dLDI4ODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwM1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywge1xuICB1bXVsaDogZnVuY3Rpb24gdW11bGgodSwgdikge1xuICAgIHZhciBVSU5UMTYgPSAweGZmZmY7XG4gICAgdmFyICR1ID0gK3U7XG4gICAgdmFyICR2ID0gK3Y7XG4gICAgdmFyIHUwID0gJHUgJiBVSU5UMTY7XG4gICAgdmFyIHYwID0gJHYgJiBVSU5UMTY7XG4gICAgdmFyIHUxID0gJHUgPj4+IDE2O1xuICAgIHZhciB2MSA9ICR2ID4+PiAxNjtcbiAgICB2YXIgdCA9ICh1MSAqIHYwID4+PiAwKSArICh1MCAqIHYwID4+PiAxNik7XG4gICAgcmV0dXJuIHUxICogdjEgKyAodCA+Pj4gMTYpICsgKCh1MCAqIHYxID4+PiAwKSArICh0ICYgVUlOVDE2KSA+Pj4gMTYpO1xuICB9XG59KTtcblxufSx7XCIzM1wiOjMzfV0sMjg5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgdG9PYmplY3QgPSBfZGVyZXFfKDExOSk7XG52YXIgYUZ1bmN0aW9uID0gX2RlcmVxXygzKTtcbnZhciAkZGVmaW5lUHJvcGVydHkgPSBfZGVyZXFfKDcyKTtcblxuLy8gQi4yLjIuMiBPYmplY3QucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18oUCwgZ2V0dGVyKVxuX2RlcmVxXygyOSkgJiYgJGV4cG9ydCgkZXhwb3J0LlAgKyBfZGVyZXFfKDc0KSwgJ09iamVjdCcsIHtcbiAgX19kZWZpbmVHZXR0ZXJfXzogZnVuY3Rpb24gX19kZWZpbmVHZXR0ZXJfXyhQLCBnZXR0ZXIpIHtcbiAgICAkZGVmaW5lUHJvcGVydHkuZih0b09iamVjdCh0aGlzKSwgUCwgeyBnZXQ6IGFGdW5jdGlvbihnZXR0ZXIpLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG4gIH1cbn0pO1xuXG59LHtcIjExOVwiOjExOSxcIjI5XCI6MjksXCIzXCI6MyxcIjMzXCI6MzMsXCI3MlwiOjcyLFwiNzRcIjo3NH1dLDI5MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG52YXIgJGRlZmluZVByb3BlcnR5ID0gX2RlcmVxXyg3Mik7XG5cbi8vIEIuMi4yLjMgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZVNldHRlcl9fKFAsIHNldHRlcilcbl9kZXJlcV8oMjkpICYmICRleHBvcnQoJGV4cG9ydC5QICsgX2RlcmVxXyg3NCksICdPYmplY3QnLCB7XG4gIF9fZGVmaW5lU2V0dGVyX186IGZ1bmN0aW9uIF9fZGVmaW5lU2V0dGVyX18oUCwgc2V0dGVyKSB7XG4gICAgJGRlZmluZVByb3BlcnR5LmYodG9PYmplY3QodGhpcyksIFAsIHsgc2V0OiBhRnVuY3Rpb24oc2V0dGVyKSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuICB9XG59KTtcblxufSx7XCIxMTlcIjoxMTksXCIyOVwiOjI5LFwiM1wiOjMsXCIzM1wiOjMzLFwiNzJcIjo3MixcIjc0XCI6NzR9XSwyOTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyICRlbnRyaWVzID0gX2RlcmVxXyg4NCkodHJ1ZSk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge1xuICBlbnRyaWVzOiBmdW5jdGlvbiBlbnRyaWVzKGl0KSB7XG4gICAgcmV0dXJuICRlbnRyaWVzKGl0KTtcbiAgfVxufSk7XG5cbn0se1wiMzNcIjozMyxcIjg0XCI6ODR9XSwyOTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvcnNcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgb3duS2V5cyA9IF9kZXJlcV8oODUpO1xudmFyIHRvSU9iamVjdCA9IF9kZXJlcV8oMTE3KTtcbnZhciBnT1BEID0gX2RlcmVxXyg3NSk7XG52YXIgY3JlYXRlUHJvcGVydHkgPSBfZGVyZXFfKDI0KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7XG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnM6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqZWN0KSB7XG4gICAgdmFyIE8gPSB0b0lPYmplY3Qob2JqZWN0KTtcbiAgICB2YXIgZ2V0RGVzYyA9IGdPUEQuZjtcbiAgICB2YXIga2V5cyA9IG93bktleXMoTyk7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIga2V5LCBkZXNjO1xuICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IGkpIHtcbiAgICAgIGRlc2MgPSBnZXREZXNjKE8sIGtleSA9IGtleXNbaSsrXSk7XG4gICAgICBpZiAoZGVzYyAhPT0gdW5kZWZpbmVkKSBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGtleSwgZGVzYyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn0pO1xuXG59LHtcIjExN1wiOjExNyxcIjI0XCI6MjQsXCIzM1wiOjMzLFwiNzVcIjo3NSxcIjg1XCI6ODV9XSwyOTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciB0b09iamVjdCA9IF9kZXJlcV8oMTE5KTtcbnZhciB0b1ByaW1pdGl2ZSA9IF9kZXJlcV8oMTIwKTtcbnZhciBnZXRQcm90b3R5cGVPZiA9IF9kZXJlcV8oNzkpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IF9kZXJlcV8oNzUpLmY7XG5cbi8vIEIuMi4yLjQgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cEdldHRlcl9fKFApXG5fZGVyZXFfKDI5KSAmJiAkZXhwb3J0KCRleHBvcnQuUCArIF9kZXJlcV8oNzQpLCAnT2JqZWN0Jywge1xuICBfX2xvb2t1cEdldHRlcl9fOiBmdW5jdGlvbiBfX2xvb2t1cEdldHRlcl9fKFApIHtcbiAgICB2YXIgTyA9IHRvT2JqZWN0KHRoaXMpO1xuICAgIHZhciBLID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gICAgdmFyIEQ7XG4gICAgZG8ge1xuICAgICAgaWYgKEQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgSykpIHJldHVybiBELmdldDtcbiAgICB9IHdoaWxlIChPID0gZ2V0UHJvdG90eXBlT2YoTykpO1xuICB9XG59KTtcblxufSx7XCIxMTlcIjoxMTksXCIxMjBcIjoxMjAsXCIyOVwiOjI5LFwiMzNcIjozMyxcIjc0XCI6NzQsXCI3NVwiOjc1LFwiNzlcIjo3OX1dLDI5NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIHRvT2JqZWN0ID0gX2RlcmVxXygxMTkpO1xudmFyIHRvUHJpbWl0aXZlID0gX2RlcmVxXygxMjApO1xudmFyIGdldFByb3RvdHlwZU9mID0gX2RlcmVxXyg3OSk7XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX2RlcmVxXyg3NSkuZjtcblxuLy8gQi4yLjIuNSBPYmplY3QucHJvdG90eXBlLl9fbG9va3VwU2V0dGVyX18oUClcbl9kZXJlcV8oMjkpICYmICRleHBvcnQoJGV4cG9ydC5QICsgX2RlcmVxXyg3NCksICdPYmplY3QnLCB7XG4gIF9fbG9va3VwU2V0dGVyX186IGZ1bmN0aW9uIF9fbG9va3VwU2V0dGVyX18oUCkge1xuICAgIHZhciBPID0gdG9PYmplY3QodGhpcyk7XG4gICAgdmFyIEsgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTtcbiAgICB2YXIgRDtcbiAgICBkbyB7XG4gICAgICBpZiAoRCA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBLKSkgcmV0dXJuIEQuc2V0O1xuICAgIH0gd2hpbGUgKE8gPSBnZXRQcm90b3R5cGVPZihPKSk7XG4gIH1cbn0pO1xuXG59LHtcIjExOVwiOjExOSxcIjEyMFwiOjEyMCxcIjI5XCI6MjksXCIzM1wiOjMzLFwiNzRcIjo3NCxcIjc1XCI6NzUsXCI3OVwiOjc5fV0sMjk1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC12YWx1ZXMtZW50cmllc1xudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkdmFsdWVzID0gX2RlcmVxXyg4NCkoZmFsc2UpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtcbiAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoaXQpIHtcbiAgICByZXR1cm4gJHZhbHVlcyhpdCk7XG4gIH1cbn0pO1xuXG59LHtcIjMzXCI6MzMsXCI4NFwiOjg0fV0sMjk2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5wYXJzaW5nL2VzLW9ic2VydmFibGVcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZ2xvYmFsID0gX2RlcmVxXyg0MCk7XG52YXIgY29yZSA9IF9kZXJlcV8oMjMpO1xudmFyIG1pY3JvdGFzayA9IF9kZXJlcV8oNjgpKCk7XG52YXIgT0JTRVJWQUJMRSA9IF9kZXJlcV8oMTI4KSgnb2JzZXJ2YWJsZScpO1xudmFyIGFGdW5jdGlvbiA9IF9kZXJlcV8oMyk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIGFuSW5zdGFuY2UgPSBfZGVyZXFfKDYpO1xudmFyIHJlZGVmaW5lQWxsID0gX2RlcmVxXyg5Myk7XG52YXIgaGlkZSA9IF9kZXJlcV8oNDIpO1xudmFyIGZvck9mID0gX2RlcmVxXygzOSk7XG52YXIgUkVUVVJOID0gZm9yT2YuUkVUVVJOO1xuXG52YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24gKGZuKSB7XG4gIHJldHVybiBmbiA9PSBudWxsID8gdW5kZWZpbmVkIDogYUZ1bmN0aW9uKGZuKTtcbn07XG5cbnZhciBjbGVhbnVwU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICB2YXIgY2xlYW51cCA9IHN1YnNjcmlwdGlvbi5fYztcbiAgaWYgKGNsZWFudXApIHtcbiAgICBzdWJzY3JpcHRpb24uX2MgPSB1bmRlZmluZWQ7XG4gICAgY2xlYW51cCgpO1xuICB9XG59O1xuXG52YXIgc3Vic2NyaXB0aW9uQ2xvc2VkID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICByZXR1cm4gc3Vic2NyaXB0aW9uLl9vID09PSB1bmRlZmluZWQ7XG59O1xuXG52YXIgY2xvc2VTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gIGlmICghc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvbikpIHtcbiAgICBzdWJzY3JpcHRpb24uX28gPSB1bmRlZmluZWQ7XG4gICAgY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICB9XG59O1xuXG52YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzdWJzY3JpYmVyKSB7XG4gIGFuT2JqZWN0KG9ic2VydmVyKTtcbiAgdGhpcy5fYyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbyA9IG9ic2VydmVyO1xuICBvYnNlcnZlciA9IG5ldyBTdWJzY3JpcHRpb25PYnNlcnZlcih0aGlzKTtcbiAgdHJ5IHtcbiAgICB2YXIgY2xlYW51cCA9IHN1YnNjcmliZXIob2JzZXJ2ZXIpO1xuICAgIHZhciBzdWJzY3JpcHRpb24gPSBjbGVhbnVwO1xuICAgIGlmIChjbGVhbnVwICE9IG51bGwpIHtcbiAgICAgIGlmICh0eXBlb2YgY2xlYW51cC51bnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJykgY2xlYW51cCA9IGZ1bmN0aW9uICgpIHsgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7IH07XG4gICAgICBlbHNlIGFGdW5jdGlvbihjbGVhbnVwKTtcbiAgICAgIHRoaXMuX2MgPSBjbGVhbnVwO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgIHJldHVybjtcbiAgfSBpZiAoc3Vic2NyaXB0aW9uQ2xvc2VkKHRoaXMpKSBjbGVhbnVwU3Vic2NyaXB0aW9uKHRoaXMpO1xufTtcblxuU3Vic2NyaXB0aW9uLnByb3RvdHlwZSA9IHJlZGVmaW5lQWxsKHt9LCB7XG4gIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHsgY2xvc2VTdWJzY3JpcHRpb24odGhpcyk7IH1cbn0pO1xuXG52YXIgU3Vic2NyaXB0aW9uT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gIHRoaXMuX3MgPSBzdWJzY3JpcHRpb247XG59O1xuXG5TdWJzY3JpcHRpb25PYnNlcnZlci5wcm90b3R5cGUgPSByZWRlZmluZUFsbCh7fSwge1xuICBuZXh0OiBmdW5jdGlvbiBuZXh0KHZhbHVlKSB7XG4gICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuX3M7XG4gICAgaWYgKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSkge1xuICAgICAgdmFyIG9ic2VydmVyID0gc3Vic2NyaXB0aW9uLl9vO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG0gPSBnZXRNZXRob2Qob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBlcnJvcjogZnVuY3Rpb24gZXJyb3IodmFsdWUpIHtcbiAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5fcztcbiAgICBpZiAoc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvbikpIHRocm93IHZhbHVlO1xuICAgIHZhciBvYnNlcnZlciA9IHN1YnNjcmlwdGlvbi5fbztcbiAgICBzdWJzY3JpcHRpb24uX28gPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBtID0gZ2V0TWV0aG9kKG9ic2VydmVyLmVycm9yKTtcbiAgICAgIGlmICghbSkgdGhyb3cgdmFsdWU7XG4gICAgICB2YWx1ZSA9IG0uY2FsbChvYnNlcnZlciwgdmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodmFsdWUpIHtcbiAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5fcztcbiAgICBpZiAoIXN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pKSB7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287XG4gICAgICBzdWJzY3JpcHRpb24uX28gPSB1bmRlZmluZWQ7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5jb21wbGV0ZSk7XG4gICAgICAgIHZhbHVlID0gbSA/IG0uY2FsbChvYnNlcnZlciwgdmFsdWUpIDogdW5kZWZpbmVkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9IGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn0pO1xuXG52YXIgJE9ic2VydmFibGUgPSBmdW5jdGlvbiBPYnNlcnZhYmxlKHN1YnNjcmliZXIpIHtcbiAgYW5JbnN0YW5jZSh0aGlzLCAkT2JzZXJ2YWJsZSwgJ09ic2VydmFibGUnLCAnX2YnKS5fZiA9IGFGdW5jdGlvbihzdWJzY3JpYmVyKTtcbn07XG5cbnJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwge1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcikge1xuICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmVyLCB0aGlzLl9mKTtcbiAgfSxcbiAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICByZXR1cm4gbmV3IChjb3JlLlByb21pc2UgfHwgZ2xvYmFsLlByb21pc2UpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGFGdW5jdGlvbihmbik7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhhdC5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGZuKHZhbHVlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiByZWplY3QsXG4gICAgICAgIGNvbXBsZXRlOiByZXNvbHZlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbnJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLCB7XG4gIGZyb206IGZ1bmN0aW9uIGZyb20oeCkge1xuICAgIHZhciBDID0gdHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogJE9ic2VydmFibGU7XG4gICAgdmFyIG1ldGhvZCA9IGdldE1ldGhvZChhbk9iamVjdCh4KVtPQlNFUlZBQkxFXSk7XG4gICAgaWYgKG1ldGhvZCkge1xuICAgICAgdmFyIG9ic2VydmFibGUgPSBhbk9iamVjdChtZXRob2QuY2FsbCh4KSk7XG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZS5jb25zdHJ1Y3RvciA9PT0gQyA/IG9ic2VydmFibGUgOiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgICAgbWljcm90YXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFkb25lKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmb3JPZih4LCBmYWxzZSwgZnVuY3Rpb24gKGl0KSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoaXQpO1xuICAgICAgICAgICAgICBpZiAoZG9uZSkgcmV0dXJuIFJFVFVSTjtcbiAgICAgICAgICAgIH0pID09PSBSRVRVUk4pIHJldHVybjtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZG9uZSkgdGhyb3cgZTtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyBkb25lID0gdHJ1ZTsgfTtcbiAgICB9KTtcbiAgfSxcbiAgb2Y6IGZ1bmN0aW9uIG9mKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aCwgaXRlbXMgPSBBcnJheShsKTsgaSA8IGw7KSBpdGVtc1tpXSA9IGFyZ3VtZW50c1tpKytdO1xuICAgIHJldHVybiBuZXcgKHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nID8gdGhpcyA6ICRPYnNlcnZhYmxlKShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWRvbmUpIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGl0ZW1zLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGl0ZW1zW2pdKTtcbiAgICAgICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgICAgfSBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IGRvbmUgPSB0cnVlOyB9O1xuICAgIH0pO1xuICB9XG59KTtcblxuaGlkZSgkT2JzZXJ2YWJsZS5wcm90b3R5cGUsIE9CU0VSVkFCTEUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pO1xuXG4kZXhwb3J0KCRleHBvcnQuRywgeyBPYnNlcnZhYmxlOiAkT2JzZXJ2YWJsZSB9KTtcblxuX2RlcmVxXygxMDApKCdPYnNlcnZhYmxlJyk7XG5cbn0se1wiMTAwXCI6MTAwLFwiMTI4XCI6MTI4LFwiMjNcIjoyMyxcIjNcIjozLFwiMzNcIjozMyxcIjM5XCI6MzksXCI0MFwiOjQwLFwiNDJcIjo0MixcIjZcIjo2LFwiNjhcIjo2OCxcIjdcIjo3LFwiOTNcIjo5M31dLDI5NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLWZpbmFsbHlcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgY29yZSA9IF9kZXJlcV8oMjMpO1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9kZXJlcV8oMTA0KTtcbnZhciBwcm9taXNlUmVzb2x2ZSA9IF9kZXJlcV8oOTEpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuUiwgJ1Byb21pc2UnLCB7ICdmaW5hbGx5JzogZnVuY3Rpb24gKG9uRmluYWxseSkge1xuICB2YXIgQyA9IHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCBjb3JlLlByb21pc2UgfHwgZ2xvYmFsLlByb21pc2UpO1xuICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiBvbkZpbmFsbHkgPT0gJ2Z1bmN0aW9uJztcbiAgcmV0dXJuIHRoaXMudGhlbihcbiAgICBpc0Z1bmN0aW9uID8gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZShDLCBvbkZpbmFsbHkoKSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB4OyB9KTtcbiAgICB9IDogb25GaW5hbGx5LFxuICAgIGlzRnVuY3Rpb24gPyBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKEMsIG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsgdGhyb3cgZTsgfSk7XG4gICAgfSA6IG9uRmluYWxseVxuICApO1xufSB9KTtcblxufSx7XCIxMDRcIjoxMDQsXCIyM1wiOjIzLFwiMzNcIjozMyxcIjQwXCI6NDAsXCI5MVwiOjkxfV0sMjk4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtdHJ5XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gX2RlcmVxXyg2OSk7XG52YXIgcGVyZm9ybSA9IF9kZXJlcV8oOTApO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1Byb21pc2UnLCB7ICd0cnknOiBmdW5jdGlvbiAoY2FsbGJhY2tmbikge1xuICB2YXIgcHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eS5mKHRoaXMpO1xuICB2YXIgcmVzdWx0ID0gcGVyZm9ybShjYWxsYmFja2ZuKTtcbiAgKHJlc3VsdC5lID8gcHJvbWlzZUNhcGFiaWxpdHkucmVqZWN0IDogcHJvbWlzZUNhcGFiaWxpdHkucmVzb2x2ZSkocmVzdWx0LnYpO1xuICByZXR1cm4gcHJvbWlzZUNhcGFiaWxpdHkucHJvbWlzZTtcbn0gfSk7XG5cbn0se1wiMzNcIjozMyxcIjY5XCI6NjksXCI5MFwiOjkwfV0sMjk5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBtZXRhZGF0YSA9IF9kZXJlcV8oNjcpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciB0b01ldGFLZXkgPSBtZXRhZGF0YS5rZXk7XG52YXIgb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSA9IG1ldGFkYXRhLnNldDtcblxubWV0YWRhdGEuZXhwKHsgZGVmaW5lTWV0YWRhdGE6IGZ1bmN0aW9uIGRlZmluZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCB0YXJnZXQsIHRhcmdldEtleSkge1xuICBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCBhbk9iamVjdCh0YXJnZXQpLCB0b01ldGFLZXkodGFyZ2V0S2V5KSk7XG59IH0pO1xuXG59LHtcIjY3XCI6NjcsXCI3XCI6N31dLDMwMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgbWV0YWRhdGEgPSBfZGVyZXFfKDY3KTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgdG9NZXRhS2V5ID0gbWV0YWRhdGEua2V5O1xudmFyIGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAgPSBtZXRhZGF0YS5tYXA7XG52YXIgc3RvcmUgPSBtZXRhZGF0YS5zdG9yZTtcblxubWV0YWRhdGEuZXhwKHsgZGVsZXRlTWV0YWRhdGE6IGZ1bmN0aW9uIGRlbGV0ZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyogLCB0YXJnZXRLZXkgKi8pIHtcbiAgdmFyIHRhcmdldEtleSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSk7XG4gIHZhciBtZXRhZGF0YU1hcCA9IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoYW5PYmplY3QodGFyZ2V0KSwgdGFyZ2V0S2V5LCBmYWxzZSk7XG4gIGlmIChtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkIHx8ICFtZXRhZGF0YU1hcFsnZGVsZXRlJ10obWV0YWRhdGFLZXkpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChtZXRhZGF0YU1hcC5zaXplKSByZXR1cm4gdHJ1ZTtcbiAgdmFyIHRhcmdldE1ldGFkYXRhID0gc3RvcmUuZ2V0KHRhcmdldCk7XG4gIHRhcmdldE1ldGFkYXRhWydkZWxldGUnXSh0YXJnZXRLZXkpO1xuICByZXR1cm4gISF0YXJnZXRNZXRhZGF0YS5zaXplIHx8IHN0b3JlWydkZWxldGUnXSh0YXJnZXQpO1xufSB9KTtcblxufSx7XCI2N1wiOjY3LFwiN1wiOjd9XSwzMDE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIFNldCA9IF9kZXJlcV8oMjMxKTtcbnZhciBmcm9tID0gX2RlcmVxXygxMCk7XG52YXIgbWV0YWRhdGEgPSBfZGVyZXFfKDY3KTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSBfZGVyZXFfKDc5KTtcbnZhciBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IG1ldGFkYXRhLmtleXM7XG52YXIgdG9NZXRhS2V5ID0gbWV0YWRhdGEua2V5O1xuXG52YXIgb3JkaW5hcnlNZXRhZGF0YUtleXMgPSBmdW5jdGlvbiAoTywgUCkge1xuICB2YXIgb0tleXMgPSBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyhPLCBQKTtcbiAgdmFyIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pO1xuICBpZiAocGFyZW50ID09PSBudWxsKSByZXR1cm4gb0tleXM7XG4gIHZhciBwS2V5cyA9IG9yZGluYXJ5TWV0YWRhdGFLZXlzKHBhcmVudCwgUCk7XG4gIHJldHVybiBwS2V5cy5sZW5ndGggPyBvS2V5cy5sZW5ndGggPyBmcm9tKG5ldyBTZXQob0tleXMuY29uY2F0KHBLZXlzKSkpIDogcEtleXMgOiBvS2V5cztcbn07XG5cbm1ldGFkYXRhLmV4cCh7IGdldE1ldGFkYXRhS2V5czogZnVuY3Rpb24gZ2V0TWV0YWRhdGFLZXlzKHRhcmdldCAvKiAsIHRhcmdldEtleSAqLykge1xuICByZXR1cm4gb3JkaW5hcnlNZXRhZGF0YUtleXMoYW5PYmplY3QodGFyZ2V0KSwgYXJndW1lbnRzLmxlbmd0aCA8IDIgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzFdKSk7XG59IH0pO1xuXG59LHtcIjEwXCI6MTAsXCIyMzFcIjoyMzEsXCI2N1wiOjY3LFwiN1wiOjcsXCI3OVwiOjc5fV0sMzAyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBtZXRhZGF0YSA9IF9kZXJlcV8oNjcpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBnZXRQcm90b3R5cGVPZiA9IF9kZXJlcV8oNzkpO1xudmFyIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEgPSBtZXRhZGF0YS5oYXM7XG52YXIgb3JkaW5hcnlHZXRPd25NZXRhZGF0YSA9IG1ldGFkYXRhLmdldDtcbnZhciB0b01ldGFLZXkgPSBtZXRhZGF0YS5rZXk7XG5cbnZhciBvcmRpbmFyeUdldE1ldGFkYXRhID0gZnVuY3Rpb24gKE1ldGFkYXRhS2V5LCBPLCBQKSB7XG4gIHZhciBoYXNPd24gPSBvcmRpbmFyeUhhc093bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKTtcbiAgaWYgKGhhc093bikgcmV0dXJuIG9yZGluYXJ5R2V0T3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuICB2YXIgcGFyZW50ID0gZ2V0UHJvdG90eXBlT2YoTyk7XG4gIHJldHVybiBwYXJlbnQgIT09IG51bGwgPyBvcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBwYXJlbnQsIFApIDogdW5kZWZpbmVkO1xufTtcblxubWV0YWRhdGEuZXhwKHsgZ2V0TWV0YWRhdGE6IGZ1bmN0aW9uIGdldE1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyogLCB0YXJnZXRLZXkgKi8pIHtcbiAgcmV0dXJuIG9yZGluYXJ5R2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xufSB9KTtcblxufSx7XCI2N1wiOjY3LFwiN1wiOjcsXCI3OVwiOjc5fV0sMzAzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBtZXRhZGF0YSA9IF9kZXJlcV8oNjcpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IG1ldGFkYXRhLmtleXM7XG52YXIgdG9NZXRhS2V5ID0gbWV0YWRhdGEua2V5O1xuXG5tZXRhZGF0YS5leHAoeyBnZXRPd25NZXRhZGF0YUtleXM6IGZ1bmN0aW9uIGdldE93bk1ldGFkYXRhS2V5cyh0YXJnZXQgLyogLCB0YXJnZXRLZXkgKi8pIHtcbiAgcmV0dXJuIG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1sxXSkpO1xufSB9KTtcblxufSx7XCI2N1wiOjY3LFwiN1wiOjd9XSwzMDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyIG1ldGFkYXRhID0gX2RlcmVxXyg2Nyk7XG52YXIgYW5PYmplY3QgPSBfZGVyZXFfKDcpO1xudmFyIG9yZGluYXJ5R2V0T3duTWV0YWRhdGEgPSBtZXRhZGF0YS5nZXQ7XG52YXIgdG9NZXRhS2V5ID0gbWV0YWRhdGEua2V5O1xuXG5tZXRhZGF0YS5leHAoeyBnZXRPd25NZXRhZGF0YTogZnVuY3Rpb24gZ2V0T3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCAvKiAsIHRhcmdldEtleSAqLykge1xuICByZXR1cm4gb3JkaW5hcnlHZXRPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgYW5PYmplY3QodGFyZ2V0KVxuICAgICwgYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzJdKSk7XG59IH0pO1xuXG59LHtcIjY3XCI6NjcsXCI3XCI6N31dLDMwNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgbWV0YWRhdGEgPSBfZGVyZXFfKDY3KTtcbnZhciBhbk9iamVjdCA9IF9kZXJlcV8oNyk7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSBfZGVyZXFfKDc5KTtcbnZhciBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gbWV0YWRhdGEuaGFzO1xudmFyIHRvTWV0YUtleSA9IG1ldGFkYXRhLmtleTtcblxudmFyIG9yZGluYXJ5SGFzTWV0YWRhdGEgPSBmdW5jdGlvbiAoTWV0YWRhdGFLZXksIE8sIFApIHtcbiAgdmFyIGhhc093biA9IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuICBpZiAoaGFzT3duKSByZXR1cm4gdHJ1ZTtcbiAgdmFyIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pO1xuICByZXR1cm4gcGFyZW50ICE9PSBudWxsID8gb3JkaW5hcnlIYXNNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKSA6IGZhbHNlO1xufTtcblxubWV0YWRhdGEuZXhwKHsgaGFzTWV0YWRhdGE6IGZ1bmN0aW9uIGhhc01ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyogLCB0YXJnZXRLZXkgKi8pIHtcbiAgcmV0dXJuIG9yZGluYXJ5SGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xufSB9KTtcblxufSx7XCI2N1wiOjY3LFwiN1wiOjcsXCI3OVwiOjc5fV0sMzA2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciBtZXRhZGF0YSA9IF9kZXJlcV8oNjcpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gbWV0YWRhdGEuaGFzO1xudmFyIHRvTWV0YUtleSA9IG1ldGFkYXRhLmtleTtcblxubWV0YWRhdGEuZXhwKHsgaGFzT3duTWV0YWRhdGE6IGZ1bmN0aW9uIGhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyogLCB0YXJnZXRLZXkgKi8pIHtcbiAgcmV0dXJuIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldClcbiAgICAsIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xufSB9KTtcblxufSx7XCI2N1wiOjY3LFwiN1wiOjd9XSwzMDc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xudmFyICRtZXRhZGF0YSA9IF9kZXJlcV8oNjcpO1xudmFyIGFuT2JqZWN0ID0gX2RlcmVxXyg3KTtcbnZhciBhRnVuY3Rpb24gPSBfZGVyZXFfKDMpO1xudmFyIHRvTWV0YUtleSA9ICRtZXRhZGF0YS5rZXk7XG52YXIgb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSA9ICRtZXRhZGF0YS5zZXQ7XG5cbiRtZXRhZGF0YS5leHAoeyBtZXRhZGF0YTogZnVuY3Rpb24gbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQsIHRhcmdldEtleSkge1xuICAgIG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEoXG4gICAgICBtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSxcbiAgICAgICh0YXJnZXRLZXkgIT09IHVuZGVmaW5lZCA/IGFuT2JqZWN0IDogYUZ1bmN0aW9uKSh0YXJnZXQpLFxuICAgICAgdG9NZXRhS2V5KHRhcmdldEtleSlcbiAgICApO1xuICB9O1xufSB9KTtcblxufSx7XCIzXCI6MyxcIjY3XCI6NjcsXCI3XCI6N31dLDMwODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1zZXQuZnJvbVxuX2RlcmVxXyg5NykoJ1NldCcpO1xuXG59LHtcIjk3XCI6OTd9XSwzMDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtc2V0Lm9mXG5fZGVyZXFfKDk4KSgnU2V0Jyk7XG5cbn0se1wiOThcIjo5OH1dLDMxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuUiwgJ1NldCcsIHsgdG9KU09OOiBfZGVyZXFfKDIwKSgnU2V0JykgfSk7XG5cbn0se1wiMjBcIjoyMCxcIjMzXCI6MzN9XSwzMTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvU3RyaW5nLnByb3RvdHlwZS5hdFxudmFyICRleHBvcnQgPSBfZGVyZXFfKDMzKTtcbnZhciAkYXQgPSBfZGVyZXFfKDEwNikodHJ1ZSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywge1xuICBhdDogZnVuY3Rpb24gYXQocG9zKSB7XG4gICAgcmV0dXJuICRhdCh0aGlzLCBwb3MpO1xuICB9XG59KTtcblxufSx7XCIxMDZcIjoxMDYsXCIzM1wiOjMzfV0sMzEyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vU3RyaW5nLnByb3RvdHlwZS5tYXRjaEFsbC9cbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgZGVmaW5lZCA9IF9kZXJlcV8oMjgpO1xudmFyIHRvTGVuZ3RoID0gX2RlcmVxXygxMTgpO1xudmFyIGlzUmVnRXhwID0gX2RlcmVxXyg1Mik7XG52YXIgZ2V0RmxhZ3MgPSBfZGVyZXFfKDM3KTtcbnZhciBSZWdFeHBQcm90byA9IFJlZ0V4cC5wcm90b3R5cGU7XG5cbnZhciAkUmVnRXhwU3RyaW5nSXRlcmF0b3IgPSBmdW5jdGlvbiAocmVnZXhwLCBzdHJpbmcpIHtcbiAgdGhpcy5fciA9IHJlZ2V4cDtcbiAgdGhpcy5fcyA9IHN0cmluZztcbn07XG5cbl9kZXJlcV8oNTQpKCRSZWdFeHBTdHJpbmdJdGVyYXRvciwgJ1JlZ0V4cCBTdHJpbmcnLCBmdW5jdGlvbiBuZXh0KCkge1xuICB2YXIgbWF0Y2ggPSB0aGlzLl9yLmV4ZWModGhpcy5fcyk7XG4gIHJldHVybiB7IHZhbHVlOiBtYXRjaCwgZG9uZTogbWF0Y2ggPT09IG51bGwgfTtcbn0pO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcbiAgbWF0Y2hBbGw6IGZ1bmN0aW9uIG1hdGNoQWxsKHJlZ2V4cCkge1xuICAgIGRlZmluZWQodGhpcyk7XG4gICAgaWYgKCFpc1JlZ0V4cChyZWdleHApKSB0aHJvdyBUeXBlRXJyb3IocmVnZXhwICsgJyBpcyBub3QgYSByZWdleHAhJyk7XG4gICAgdmFyIFMgPSBTdHJpbmcodGhpcyk7XG4gICAgdmFyIGZsYWdzID0gJ2ZsYWdzJyBpbiBSZWdFeHBQcm90byA/IFN0cmluZyhyZWdleHAuZmxhZ3MpIDogZ2V0RmxhZ3MuY2FsbChyZWdleHApO1xuICAgIHZhciByeCA9IG5ldyBSZWdFeHAocmVnZXhwLnNvdXJjZSwgfmZsYWdzLmluZGV4T2YoJ2cnKSA/IGZsYWdzIDogJ2cnICsgZmxhZ3MpO1xuICAgIHJ4Lmxhc3RJbmRleCA9IHRvTGVuZ3RoKHJlZ2V4cC5sYXN0SW5kZXgpO1xuICAgIHJldHVybiBuZXcgJFJlZ0V4cFN0cmluZ0l0ZXJhdG9yKHJ4LCBTKTtcbiAgfVxufSk7XG5cbn0se1wiMTE4XCI6MTE4LFwiMjhcIjoyOCxcIjMzXCI6MzMsXCIzN1wiOjM3LFwiNTJcIjo1MixcIjU0XCI6NTR9XSwzMTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHBhZCA9IF9kZXJlcV8oMTA5KTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdTdHJpbmcnLCB7XG4gIHBhZEVuZDogZnVuY3Rpb24gcGFkRW5kKG1heExlbmd0aCAvKiAsIGZpbGxTdHJpbmcgPSAnICcgKi8pIHtcbiAgICByZXR1cm4gJHBhZCh0aGlzLCBtYXhMZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCBmYWxzZSk7XG4gIH1cbn0pO1xuXG59LHtcIjEwOVwiOjEwOSxcIjMzXCI6MzN9XSwzMTQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcbnZhciAkZXhwb3J0ID0gX2RlcmVxXygzMyk7XG52YXIgJHBhZCA9IF9kZXJlcV8oMTA5KTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdTdHJpbmcnLCB7XG4gIHBhZFN0YXJ0OiBmdW5jdGlvbiBwYWRTdGFydChtYXhMZW5ndGggLyogLCBmaWxsU3RyaW5nID0gJyAnICovKSB7XG4gICAgcmV0dXJuICRwYWQodGhpcywgbWF4TGVuZ3RoLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgdHJ1ZSk7XG4gIH1cbn0pO1xuXG59LHtcIjEwOVwiOjEwOSxcIjMzXCI6MzN9XSwzMTU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlYm1hcmtiYWdlL2VjbWFzY3JpcHQtc3RyaW5nLWxlZnQtcmlnaHQtdHJpbVxuX2RlcmVxXygxMTEpKCd0cmltTGVmdCcsIGZ1bmN0aW9uICgkdHJpbSkge1xuICByZXR1cm4gZnVuY3Rpb24gdHJpbUxlZnQoKSB7XG4gICAgcmV0dXJuICR0cmltKHRoaXMsIDEpO1xuICB9O1xufSwgJ3RyaW1TdGFydCcpO1xuXG59LHtcIjExMVwiOjExMX1dLDMxNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vc2VibWFya2JhZ2UvZWNtYXNjcmlwdC1zdHJpbmctbGVmdC1yaWdodC10cmltXG5fZGVyZXFfKDExMSkoJ3RyaW1SaWdodCcsIGZ1bmN0aW9uICgkdHJpbSkge1xuICByZXR1cm4gZnVuY3Rpb24gdHJpbVJpZ2h0KCkge1xuICAgIHJldHVybiAkdHJpbSh0aGlzLCAyKTtcbiAgfTtcbn0sICd0cmltRW5kJyk7XG5cbn0se1wiMTExXCI6MTExfV0sMzE3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbl9kZXJlcV8oMTI2KSgnYXN5bmNJdGVyYXRvcicpO1xuXG59LHtcIjEyNlwiOjEyNn1dLDMxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG5fZGVyZXFfKDEyNikoJ29ic2VydmFibGUnKTtcblxufSx7XCIxMjZcIjoxMjZ9XSwzMTk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtZ2xvYmFsXG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1N5c3RlbScsIHsgZ2xvYmFsOiBfZGVyZXFfKDQwKSB9KTtcblxufSx7XCIzM1wiOjMzLFwiNDBcIjo0MH1dLDMyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrbWFwLmZyb21cbl9kZXJlcV8oOTcpKCdXZWFrTWFwJyk7XG5cbn0se1wiOTdcIjo5N31dLDMyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrbWFwLm9mXG5fZGVyZXFfKDk4KSgnV2Vha01hcCcpO1xuXG59LHtcIjk4XCI6OTh9XSwzMjI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtd2Vha3NldC5mcm9tXG5fZGVyZXFfKDk3KSgnV2Vha1NldCcpO1xuXG59LHtcIjk3XCI6OTd9XSwzMjM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtd2Vha3NldC5vZlxuX2RlcmVxXyg5OCkoJ1dlYWtTZXQnKTtcblxufSx7XCI5OFwiOjk4fV0sMzI0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbnZhciAkaXRlcmF0b3JzID0gX2RlcmVxXygxNDEpO1xudmFyIGdldEtleXMgPSBfZGVyZXFfKDgxKTtcbnZhciByZWRlZmluZSA9IF9kZXJlcV8oOTQpO1xudmFyIGdsb2JhbCA9IF9kZXJlcV8oNDApO1xudmFyIGhpZGUgPSBfZGVyZXFfKDQyKTtcbnZhciBJdGVyYXRvcnMgPSBfZGVyZXFfKDU4KTtcbnZhciB3a3MgPSBfZGVyZXFfKDEyOCk7XG52YXIgSVRFUkFUT1IgPSB3a3MoJ2l0ZXJhdG9yJyk7XG52YXIgVE9fU1RSSU5HX1RBRyA9IHdrcygndG9TdHJpbmdUYWcnKTtcbnZhciBBcnJheVZhbHVlcyA9IEl0ZXJhdG9ycy5BcnJheTtcblxudmFyIERPTUl0ZXJhYmxlcyA9IHtcbiAgQ1NTUnVsZUxpc3Q6IHRydWUsIC8vIFRPRE86IE5vdCBzcGVjIGNvbXBsaWFudCwgc2hvdWxkIGJlIGZhbHNlLlxuICBDU1NTdHlsZURlY2xhcmF0aW9uOiBmYWxzZSxcbiAgQ1NTVmFsdWVMaXN0OiBmYWxzZSxcbiAgQ2xpZW50UmVjdExpc3Q6IGZhbHNlLFxuICBET01SZWN0TGlzdDogZmFsc2UsXG4gIERPTVN0cmluZ0xpc3Q6IGZhbHNlLFxuICBET01Ub2tlbkxpc3Q6IHRydWUsXG4gIERhdGFUcmFuc2Zlckl0ZW1MaXN0OiBmYWxzZSxcbiAgRmlsZUxpc3Q6IGZhbHNlLFxuICBIVE1MQWxsQ29sbGVjdGlvbjogZmFsc2UsXG4gIEhUTUxDb2xsZWN0aW9uOiBmYWxzZSxcbiAgSFRNTEZvcm1FbGVtZW50OiBmYWxzZSxcbiAgSFRNTFNlbGVjdEVsZW1lbnQ6IGZhbHNlLFxuICBNZWRpYUxpc3Q6IHRydWUsIC8vIFRPRE86IE5vdCBzcGVjIGNvbXBsaWFudCwgc2hvdWxkIGJlIGZhbHNlLlxuICBNaW1lVHlwZUFycmF5OiBmYWxzZSxcbiAgTmFtZWROb2RlTWFwOiBmYWxzZSxcbiAgTm9kZUxpc3Q6IHRydWUsXG4gIFBhaW50UmVxdWVzdExpc3Q6IGZhbHNlLFxuICBQbHVnaW46IGZhbHNlLFxuICBQbHVnaW5BcnJheTogZmFsc2UsXG4gIFNWR0xlbmd0aExpc3Q6IGZhbHNlLFxuICBTVkdOdW1iZXJMaXN0OiBmYWxzZSxcbiAgU1ZHUGF0aFNlZ0xpc3Q6IGZhbHNlLFxuICBTVkdQb2ludExpc3Q6IGZhbHNlLFxuICBTVkdTdHJpbmdMaXN0OiBmYWxzZSxcbiAgU1ZHVHJhbnNmb3JtTGlzdDogZmFsc2UsXG4gIFNvdXJjZUJ1ZmZlckxpc3Q6IGZhbHNlLFxuICBTdHlsZVNoZWV0TGlzdDogdHJ1ZSwgLy8gVE9ETzogTm90IHNwZWMgY29tcGxpYW50LCBzaG91bGQgYmUgZmFsc2UuXG4gIFRleHRUcmFja0N1ZUxpc3Q6IGZhbHNlLFxuICBUZXh0VHJhY2tMaXN0OiBmYWxzZSxcbiAgVG91Y2hMaXN0OiBmYWxzZVxufTtcblxuZm9yICh2YXIgY29sbGVjdGlvbnMgPSBnZXRLZXlzKERPTUl0ZXJhYmxlcyksIGkgPSAwOyBpIDwgY29sbGVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgdmFyIE5BTUUgPSBjb2xsZWN0aW9uc1tpXTtcbiAgdmFyIGV4cGxpY2l0ID0gRE9NSXRlcmFibGVzW05BTUVdO1xuICB2YXIgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXTtcbiAgdmFyIHByb3RvID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTtcbiAgdmFyIGtleTtcbiAgaWYgKHByb3RvKSB7XG4gICAgaWYgKCFwcm90b1tJVEVSQVRPUl0pIGhpZGUocHJvdG8sIElURVJBVE9SLCBBcnJheVZhbHVlcyk7XG4gICAgaWYgKCFwcm90b1tUT19TVFJJTkdfVEFHXSkgaGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7XG4gICAgSXRlcmF0b3JzW05BTUVdID0gQXJyYXlWYWx1ZXM7XG4gICAgaWYgKGV4cGxpY2l0KSBmb3IgKGtleSBpbiAkaXRlcmF0b3JzKSBpZiAoIXByb3RvW2tleV0pIHJlZGVmaW5lKHByb3RvLCBrZXksICRpdGVyYXRvcnNba2V5XSwgdHJ1ZSk7XG4gIH1cbn1cblxufSx7XCIxMjhcIjoxMjgsXCIxNDFcIjoxNDEsXCI0MFwiOjQwLFwiNDJcIjo0MixcIjU4XCI6NTgsXCI4MVwiOjgxLFwiOTRcIjo5NH1dLDMyNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyICR0YXNrID0gX2RlcmVxXygxMTMpO1xuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkIsIHtcbiAgc2V0SW1tZWRpYXRlOiAkdGFzay5zZXQsXG4gIGNsZWFySW1tZWRpYXRlOiAkdGFzay5jbGVhclxufSk7XG5cbn0se1wiMTEzXCI6MTEzLFwiMzNcIjozM31dLDMyNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4vLyBpZTktIHNldFRpbWVvdXQgJiBzZXRJbnRlcnZhbCBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgZml4XG52YXIgZ2xvYmFsID0gX2RlcmVxXyg0MCk7XG52YXIgJGV4cG9ydCA9IF9kZXJlcV8oMzMpO1xudmFyIGludm9rZSA9IF9kZXJlcV8oNDYpO1xudmFyIHBhcnRpYWwgPSBfZGVyZXFfKDg4KTtcbnZhciBuYXZpZ2F0b3IgPSBnbG9iYWwubmF2aWdhdG9yO1xudmFyIE1TSUUgPSAhIW5hdmlnYXRvciAmJiAvTVNJRSAuXFwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOyAvLyA8LSBkaXJ0eSBpZTktIGNoZWNrXG52YXIgd3JhcCA9IGZ1bmN0aW9uIChzZXQpIHtcbiAgcmV0dXJuIE1TSUUgPyBmdW5jdGlvbiAoZm4sIHRpbWUgLyogLCAuLi5hcmdzICovKSB7XG4gICAgcmV0dXJuIHNldChpbnZva2UoXG4gICAgICBwYXJ0aWFsLFxuICAgICAgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gICAgICB0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJyA/IGZuIDogRnVuY3Rpb24oZm4pXG4gICAgKSwgdGltZSk7XG4gIH0gOiBzZXQ7XG59O1xuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkIgKyAkZXhwb3J0LkYgKiBNU0lFLCB7XG4gIHNldFRpbWVvdXQ6IHdyYXAoZ2xvYmFsLnNldFRpbWVvdXQpLFxuICBzZXRJbnRlcnZhbDogd3JhcChnbG9iYWwuc2V0SW50ZXJ2YWwpXG59KTtcblxufSx7XCIzM1wiOjMzLFwiNDBcIjo0MCxcIjQ2XCI6NDYsXCI4OFwiOjg4fV0sMzI3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbl9kZXJlcV8oMjU0KTtcbl9kZXJlcV8oMTkxKTtcbl9kZXJlcV8oMTkzKTtcbl9kZXJlcV8oMTkyKTtcbl9kZXJlcV8oMTk1KTtcbl9kZXJlcV8oMTk3KTtcbl9kZXJlcV8oMjAyKTtcbl9kZXJlcV8oMTk2KTtcbl9kZXJlcV8oMTk0KTtcbl9kZXJlcV8oMjA0KTtcbl9kZXJlcV8oMjAzKTtcbl9kZXJlcV8oMTk5KTtcbl9kZXJlcV8oMjAwKTtcbl9kZXJlcV8oMTk4KTtcbl9kZXJlcV8oMTkwKTtcbl9kZXJlcV8oMjAxKTtcbl9kZXJlcV8oMjA1KTtcbl9kZXJlcV8oMjA2KTtcbl9kZXJlcV8oMTU3KTtcbl9kZXJlcV8oMTU5KTtcbl9kZXJlcV8oMTU4KTtcbl9kZXJlcV8oMjA4KTtcbl9kZXJlcV8oMjA3KTtcbl9kZXJlcV8oMTc4KTtcbl9kZXJlcV8oMTg4KTtcbl9kZXJlcV8oMTg5KTtcbl9kZXJlcV8oMTc5KTtcbl9kZXJlcV8oMTgwKTtcbl9kZXJlcV8oMTgxKTtcbl9kZXJlcV8oMTgyKTtcbl9kZXJlcV8oMTgzKTtcbl9kZXJlcV8oMTg0KTtcbl9kZXJlcV8oMTg1KTtcbl9kZXJlcV8oMTg2KTtcbl9kZXJlcV8oMTg3KTtcbl9kZXJlcV8oMTYxKTtcbl9kZXJlcV8oMTYyKTtcbl9kZXJlcV8oMTYzKTtcbl9kZXJlcV8oMTY0KTtcbl9kZXJlcV8oMTY1KTtcbl9kZXJlcV8oMTY2KTtcbl9kZXJlcV8oMTY3KTtcbl9kZXJlcV8oMTY4KTtcbl9kZXJlcV8oMTY5KTtcbl9kZXJlcV8oMTcwKTtcbl9kZXJlcV8oMTcxKTtcbl9kZXJlcV8oMTcyKTtcbl9kZXJlcV8oMTczKTtcbl9kZXJlcV8oMTc0KTtcbl9kZXJlcV8oMTc1KTtcbl9kZXJlcV8oMTc2KTtcbl9kZXJlcV8oMTc3KTtcbl9kZXJlcV8oMjQxKTtcbl9kZXJlcV8oMjQ2KTtcbl9kZXJlcV8oMjUzKTtcbl9kZXJlcV8oMjQ0KTtcbl9kZXJlcV8oMjM2KTtcbl9kZXJlcV8oMjM3KTtcbl9kZXJlcV8oMjQyKTtcbl9kZXJlcV8oMjQ3KTtcbl9kZXJlcV8oMjQ5KTtcbl9kZXJlcV8oMjMyKTtcbl9kZXJlcV8oMjMzKTtcbl9kZXJlcV8oMjM0KTtcbl9kZXJlcV8oMjM1KTtcbl9kZXJlcV8oMjM4KTtcbl9kZXJlcV8oMjM5KTtcbl9kZXJlcV8oMjQwKTtcbl9kZXJlcV8oMjQzKTtcbl9kZXJlcV8oMjQ1KTtcbl9kZXJlcV8oMjQ4KTtcbl9kZXJlcV8oMjUwKTtcbl9kZXJlcV8oMjUxKTtcbl9kZXJlcV8oMjUyKTtcbl9kZXJlcV8oMTUyKTtcbl9kZXJlcV8oMTU0KTtcbl9kZXJlcV8oMTUzKTtcbl9kZXJlcV8oMTU2KTtcbl9kZXJlcV8oMTU1KTtcbl9kZXJlcV8oMTQwKTtcbl9kZXJlcV8oMTM4KTtcbl9kZXJlcV8oMTQ1KTtcbl9kZXJlcV8oMTQyKTtcbl9kZXJlcV8oMTQ4KTtcbl9kZXJlcV8oMTUwKTtcbl9kZXJlcV8oMTM3KTtcbl9kZXJlcV8oMTQ0KTtcbl9kZXJlcV8oMTM0KTtcbl9kZXJlcV8oMTQ5KTtcbl9kZXJlcV8oMTMyKTtcbl9kZXJlcV8oMTQ3KTtcbl9kZXJlcV8oMTQ2KTtcbl9kZXJlcV8oMTM5KTtcbl9kZXJlcV8oMTQzKTtcbl9kZXJlcV8oMTMxKTtcbl9kZXJlcV8oMTMzKTtcbl9kZXJlcV8oMTM2KTtcbl9kZXJlcV8oMTM1KTtcbl9kZXJlcV8oMTUxKTtcbl9kZXJlcV8oMTQxKTtcbl9kZXJlcV8oMjI0KTtcbl9kZXJlcV8oMjMwKTtcbl9kZXJlcV8oMjI1KTtcbl9kZXJlcV8oMjI2KTtcbl9kZXJlcV8oMjI3KTtcbl9kZXJlcV8oMjI4KTtcbl9kZXJlcV8oMjI5KTtcbl9kZXJlcV8oMjA5KTtcbl9kZXJlcV8oMTYwKTtcbl9kZXJlcV8oMjMxKTtcbl9kZXJlcV8oMjY2KTtcbl9kZXJlcV8oMjY3KTtcbl9kZXJlcV8oMjU1KTtcbl9kZXJlcV8oMjU2KTtcbl9kZXJlcV8oMjYxKTtcbl9kZXJlcV8oMjY0KTtcbl9kZXJlcV8oMjY1KTtcbl9kZXJlcV8oMjU5KTtcbl9kZXJlcV8oMjYyKTtcbl9kZXJlcV8oMjYwKTtcbl9kZXJlcV8oMjYzKTtcbl9kZXJlcV8oMjU3KTtcbl9kZXJlcV8oMjU4KTtcbl9kZXJlcV8oMjEwKTtcbl9kZXJlcV8oMjExKTtcbl9kZXJlcV8oMjEyKTtcbl9kZXJlcV8oMjEzKTtcbl9kZXJlcV8oMjE0KTtcbl9kZXJlcV8oMjE3KTtcbl9kZXJlcV8oMjE1KTtcbl9kZXJlcV8oMjE2KTtcbl9kZXJlcV8oMjE4KTtcbl9kZXJlcV8oMjE5KTtcbl9kZXJlcV8oMjIwKTtcbl9kZXJlcV8oMjIxKTtcbl9kZXJlcV8oMjIzKTtcbl9kZXJlcV8oMjIyKTtcbl9kZXJlcV8oMjcwKTtcbl9kZXJlcV8oMjY4KTtcbl9kZXJlcV8oMjY5KTtcbl9kZXJlcV8oMzExKTtcbl9kZXJlcV8oMzE0KTtcbl9kZXJlcV8oMzEzKTtcbl9kZXJlcV8oMzE1KTtcbl9kZXJlcV8oMzE2KTtcbl9kZXJlcV8oMzEyKTtcbl9kZXJlcV8oMzE3KTtcbl9kZXJlcV8oMzE4KTtcbl9kZXJlcV8oMjkyKTtcbl9kZXJlcV8oMjk1KTtcbl9kZXJlcV8oMjkxKTtcbl9kZXJlcV8oMjg5KTtcbl9kZXJlcV8oMjkwKTtcbl9kZXJlcV8oMjkzKTtcbl9kZXJlcV8oMjk0KTtcbl9kZXJlcV8oMjc2KTtcbl9kZXJlcV8oMzEwKTtcbl9kZXJlcV8oMjc1KTtcbl9kZXJlcV8oMzA5KTtcbl9kZXJlcV8oMzIxKTtcbl9kZXJlcV8oMzIzKTtcbl9kZXJlcV8oMjc0KTtcbl9kZXJlcV8oMzA4KTtcbl9kZXJlcV8oMzIwKTtcbl9kZXJlcV8oMzIyKTtcbl9kZXJlcV8oMjczKTtcbl9kZXJlcV8oMzE5KTtcbl9kZXJlcV8oMjcyKTtcbl9kZXJlcV8oMjc3KTtcbl9kZXJlcV8oMjc4KTtcbl9kZXJlcV8oMjc5KTtcbl9kZXJlcV8oMjgwKTtcbl9kZXJlcV8oMjgxKTtcbl9kZXJlcV8oMjgzKTtcbl9kZXJlcV8oMjgyKTtcbl9kZXJlcV8oMjg0KTtcbl9kZXJlcV8oMjg1KTtcbl9kZXJlcV8oMjg2KTtcbl9kZXJlcV8oMjg4KTtcbl9kZXJlcV8oMjg3KTtcbl9kZXJlcV8oMjk3KTtcbl9kZXJlcV8oMjk4KTtcbl9kZXJlcV8oMjk5KTtcbl9kZXJlcV8oMzAwKTtcbl9kZXJlcV8oMzAyKTtcbl9kZXJlcV8oMzAxKTtcbl9kZXJlcV8oMzA0KTtcbl9kZXJlcV8oMzAzKTtcbl9kZXJlcV8oMzA1KTtcbl9kZXJlcV8oMzA2KTtcbl9kZXJlcV8oMzA3KTtcbl9kZXJlcV8oMjcxKTtcbl9kZXJlcV8oMjk2KTtcbl9kZXJlcV8oMzI2KTtcbl9kZXJlcV8oMzI1KTtcbl9kZXJlcV8oMzI0KTtcbm1vZHVsZS5leHBvcnRzID0gX2RlcmVxXygyMyk7XG5cbn0se1wiMTMxXCI6MTMxLFwiMTMyXCI6MTMyLFwiMTMzXCI6MTMzLFwiMTM0XCI6MTM0LFwiMTM1XCI6MTM1LFwiMTM2XCI6MTM2LFwiMTM3XCI6MTM3LFwiMTM4XCI6MTM4LFwiMTM5XCI6MTM5LFwiMTQwXCI6MTQwLFwiMTQxXCI6MTQxLFwiMTQyXCI6MTQyLFwiMTQzXCI6MTQzLFwiMTQ0XCI6MTQ0LFwiMTQ1XCI6MTQ1LFwiMTQ2XCI6MTQ2LFwiMTQ3XCI6MTQ3LFwiMTQ4XCI6MTQ4LFwiMTQ5XCI6MTQ5LFwiMTUwXCI6MTUwLFwiMTUxXCI6MTUxLFwiMTUyXCI6MTUyLFwiMTUzXCI6MTUzLFwiMTU0XCI6MTU0LFwiMTU1XCI6MTU1LFwiMTU2XCI6MTU2LFwiMTU3XCI6MTU3LFwiMTU4XCI6MTU4LFwiMTU5XCI6MTU5LFwiMTYwXCI6MTYwLFwiMTYxXCI6MTYxLFwiMTYyXCI6MTYyLFwiMTYzXCI6MTYzLFwiMTY0XCI6MTY0LFwiMTY1XCI6MTY1LFwiMTY2XCI6MTY2LFwiMTY3XCI6MTY3LFwiMTY4XCI6MTY4LFwiMTY5XCI6MTY5LFwiMTcwXCI6MTcwLFwiMTcxXCI6MTcxLFwiMTcyXCI6MTcyLFwiMTczXCI6MTczLFwiMTc0XCI6MTc0LFwiMTc1XCI6MTc1LFwiMTc2XCI6MTc2LFwiMTc3XCI6MTc3LFwiMTc4XCI6MTc4LFwiMTc5XCI6MTc5LFwiMTgwXCI6MTgwLFwiMTgxXCI6MTgxLFwiMTgyXCI6MTgyLFwiMTgzXCI6MTgzLFwiMTg0XCI6MTg0LFwiMTg1XCI6MTg1LFwiMTg2XCI6MTg2LFwiMTg3XCI6MTg3LFwiMTg4XCI6MTg4LFwiMTg5XCI6MTg5LFwiMTkwXCI6MTkwLFwiMTkxXCI6MTkxLFwiMTkyXCI6MTkyLFwiMTkzXCI6MTkzLFwiMTk0XCI6MTk0LFwiMTk1XCI6MTk1LFwiMTk2XCI6MTk2LFwiMTk3XCI6MTk3LFwiMTk4XCI6MTk4LFwiMTk5XCI6MTk5LFwiMjAwXCI6MjAwLFwiMjAxXCI6MjAxLFwiMjAyXCI6MjAyLFwiMjAzXCI6MjAzLFwiMjA0XCI6MjA0LFwiMjA1XCI6MjA1LFwiMjA2XCI6MjA2LFwiMjA3XCI6MjA3LFwiMjA4XCI6MjA4LFwiMjA5XCI6MjA5LFwiMjEwXCI6MjEwLFwiMjExXCI6MjExLFwiMjEyXCI6MjEyLFwiMjEzXCI6MjEzLFwiMjE0XCI6MjE0LFwiMjE1XCI6MjE1LFwiMjE2XCI6MjE2LFwiMjE3XCI6MjE3LFwiMjE4XCI6MjE4LFwiMjE5XCI6MjE5LFwiMjIwXCI6MjIwLFwiMjIxXCI6MjIxLFwiMjIyXCI6MjIyLFwiMjIzXCI6MjIzLFwiMjI0XCI6MjI0LFwiMjI1XCI6MjI1LFwiMjI2XCI6MjI2LFwiMjI3XCI6MjI3LFwiMjI4XCI6MjI4LFwiMjI5XCI6MjI5LFwiMjNcIjoyMyxcIjIzMFwiOjIzMCxcIjIzMVwiOjIzMSxcIjIzMlwiOjIzMixcIjIzM1wiOjIzMyxcIjIzNFwiOjIzNCxcIjIzNVwiOjIzNSxcIjIzNlwiOjIzNixcIjIzN1wiOjIzNyxcIjIzOFwiOjIzOCxcIjIzOVwiOjIzOSxcIjI0MFwiOjI0MCxcIjI0MVwiOjI0MSxcIjI0MlwiOjI0MixcIjI0M1wiOjI0MyxcIjI0NFwiOjI0NCxcIjI0NVwiOjI0NSxcIjI0NlwiOjI0NixcIjI0N1wiOjI0NyxcIjI0OFwiOjI0OCxcIjI0OVwiOjI0OSxcIjI1MFwiOjI1MCxcIjI1MVwiOjI1MSxcIjI1MlwiOjI1MixcIjI1M1wiOjI1MyxcIjI1NFwiOjI1NCxcIjI1NVwiOjI1NSxcIjI1NlwiOjI1NixcIjI1N1wiOjI1NyxcIjI1OFwiOjI1OCxcIjI1OVwiOjI1OSxcIjI2MFwiOjI2MCxcIjI2MVwiOjI2MSxcIjI2MlwiOjI2MixcIjI2M1wiOjI2MyxcIjI2NFwiOjI2NCxcIjI2NVwiOjI2NSxcIjI2NlwiOjI2NixcIjI2N1wiOjI2NyxcIjI2OFwiOjI2OCxcIjI2OVwiOjI2OSxcIjI3MFwiOjI3MCxcIjI3MVwiOjI3MSxcIjI3MlwiOjI3MixcIjI3M1wiOjI3MyxcIjI3NFwiOjI3NCxcIjI3NVwiOjI3NSxcIjI3NlwiOjI3NixcIjI3N1wiOjI3NyxcIjI3OFwiOjI3OCxcIjI3OVwiOjI3OSxcIjI4MFwiOjI4MCxcIjI4MVwiOjI4MSxcIjI4MlwiOjI4MixcIjI4M1wiOjI4MyxcIjI4NFwiOjI4NCxcIjI4NVwiOjI4NSxcIjI4NlwiOjI4NixcIjI4N1wiOjI4NyxcIjI4OFwiOjI4OCxcIjI4OVwiOjI4OSxcIjI5MFwiOjI5MCxcIjI5MVwiOjI5MSxcIjI5MlwiOjI5MixcIjI5M1wiOjI5MyxcIjI5NFwiOjI5NCxcIjI5NVwiOjI5NSxcIjI5NlwiOjI5NixcIjI5N1wiOjI5NyxcIjI5OFwiOjI5OCxcIjI5OVwiOjI5OSxcIjMwMFwiOjMwMCxcIjMwMVwiOjMwMSxcIjMwMlwiOjMwMixcIjMwM1wiOjMwMyxcIjMwNFwiOjMwNCxcIjMwNVwiOjMwNSxcIjMwNlwiOjMwNixcIjMwN1wiOjMwNyxcIjMwOFwiOjMwOCxcIjMwOVwiOjMwOSxcIjMxMFwiOjMxMCxcIjMxMVwiOjMxMSxcIjMxMlwiOjMxMixcIjMxM1wiOjMxMyxcIjMxNFwiOjMxNCxcIjMxNVwiOjMxNSxcIjMxNlwiOjMxNixcIjMxN1wiOjMxNyxcIjMxOFwiOjMxOCxcIjMxOVwiOjMxOSxcIjMyMFwiOjMyMCxcIjMyMVwiOjMyMSxcIjMyMlwiOjMyMixcIjMyM1wiOjMyMyxcIjMyNFwiOjMyNCxcIjMyNVwiOjMyNSxcIjMyNlwiOjMyNn1dLDMyODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBodHRwczovL3Jhdy5naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL21hc3Rlci9MSUNFTlNFIGZpbGUuIEFuXG4gKiBhZGRpdGlvbmFsIGdyYW50IG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW5cbiAqIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG4hKGZ1bmN0aW9uKGdsb2JhbCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIHZhciBpbk1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCI7XG4gIHZhciBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZTtcbiAgaWYgKHJ1bnRpbWUpIHtcbiAgICBpZiAoaW5Nb2R1bGUpIHtcbiAgICAgIC8vIElmIHJlZ2VuZXJhdG9yUnVudGltZSBpcyBkZWZpbmVkIGdsb2JhbGx5IGFuZCB3ZSdyZSBpbiBhIG1vZHVsZSxcbiAgICAgIC8vIG1ha2UgdGhlIGV4cG9ydHMgb2JqZWN0IGlkZW50aWNhbCB0byByZWdlbmVyYXRvclJ1bnRpbWUuXG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IHJ1bnRpbWU7XG4gICAgfVxuICAgIC8vIERvbid0IGJvdGhlciBldmFsdWF0aW5nIHRoZSByZXN0IG9mIHRoaXMgZmlsZSBpZiB0aGUgcnVudGltZSB3YXNcbiAgICAvLyBhbHJlYWR5IGRlZmluZWQgZ2xvYmFsbHkuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRGVmaW5lIHRoZSBydW50aW1lIGdsb2JhbGx5IChhcyBleHBlY3RlZCBieSBnZW5lcmF0ZWQgY29kZSkgYXMgZWl0aGVyXG4gIC8vIG1vZHVsZS5leHBvcnRzIChpZiB3ZSdyZSBpbiBhIG1vZHVsZSkgb3IgYSBuZXcsIGVtcHR5IG9iamVjdC5cbiAgcnVudGltZSA9IGdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWUgPSBpbk1vZHVsZSA/IG1vZHVsZS5leHBvcnRzIDoge307XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgcnVudGltZS53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgSXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGVbdG9TdHJpbmdUYWdTeW1ib2xdID1cbiAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBwcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBydW50aW1lLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHtcbiAgICAgICAgZ2VuRnVuW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgcnVudGltZS5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBob3dldmVyLCB0aGVcbiAgICAgICAgICAvLyByZXN1bHQgZm9yIHRoaXMgaXRlcmF0aW9uIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgc2FtZVxuICAgICAgICAgIC8vIHJlYXNvbi4gTm90ZSB0aGF0IHJlamVjdGlvbnMgb2YgeWllbGRlZCBQcm9taXNlcyBhcmUgbm90XG4gICAgICAgICAgLy8gdGhyb3duIGJhY2sgaW50byB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBhcyBpcyB0aGUgY2FzZVxuICAgICAgICAgIC8vIHdoZW4gYW4gYXdhaXRlZCBQcm9taXNlIGlzIHJlamVjdGVkLiBUaGlzIGRpZmZlcmVuY2UgaW5cbiAgICAgICAgICAvLyBiZWhhdmlvciBiZXR3ZWVuIHlpZWxkIGFuZCBhd2FpdCBpcyBpbXBvcnRhbnQsIGJlY2F1c2UgaXRcbiAgICAgICAgICAvLyBhbGxvd3MgdGhlIGNvbnN1bWVyIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlIHlpZWxkZWRcbiAgICAgICAgICAvLyByZWplY3Rpb24gKHN3YWxsb3cgaXQgYW5kIGNvbnRpbnVlLCBtYW51YWxseSAudGhyb3cgaXQgYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGdlbmVyYXRvciwgYWJhbmRvbiBpdGVyYXRpb24sIHdoYXRldmVyKS4gV2l0aFxuICAgICAgICAgIC8vIGF3YWl0LCBieSBjb250cmFzdCwgdGhlcmUgaXMgbm8gb3Bwb3J0dW5pdHkgdG8gZXhhbWluZSB0aGVcbiAgICAgICAgICAvLyByZWplY3Rpb24gcmVhc29uIG91dHNpZGUgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgc28gdGhlXG4gICAgICAgICAgLy8gb25seSBvcHRpb24gaXMgdG8gdGhyb3cgaXQgZnJvbSB0aGUgYXdhaXQgZXhwcmVzc2lvbiwgYW5kXG4gICAgICAgICAgLy8gbGV0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaGFuZGxlIHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbC5wcm9jZXNzID09PSBcIm9iamVjdFwiICYmIGdsb2JhbC5wcm9jZXNzLmRvbWFpbikge1xuICAgICAgaW52b2tlID0gZ2xvYmFsLnByb2Nlc3MuZG9tYWluLmJpbmQoaW52b2tlKTtcbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBydW50aW1lLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBydW50aW1lLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdClcbiAgICApO1xuXG4gICAgcmV0dXJuIHJ1bnRpbWUuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBHcFt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvclwiO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIHJ1bnRpbWUua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBydW50aW1lLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xufSkoXG4gIC8vIEFtb25nIHRoZSB2YXJpb3VzIHRyaWNrcyBmb3Igb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWxcbiAgLy8gb2JqZWN0LCB0aGlzIHNlZW1zIHRvIGJlIHRoZSBtb3N0IHJlbGlhYmxlIHRlY2huaXF1ZSB0aGF0IGRvZXMgbm90XG4gIC8vIHVzZSBpbmRpcmVjdCBldmFsICh3aGljaCB2aW9sYXRlcyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSkuXG4gIHR5cGVvZiBnbG9iYWwgPT09IFwib2JqZWN0XCIgPyBnbG9iYWwgOlxuICB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiID8gd2luZG93IDpcbiAgdHlwZW9mIHNlbGYgPT09IFwib2JqZWN0XCIgPyBzZWxmIDogdGhpc1xuKTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG59LHt9XX0se30sWzFdKTtcbiIsIi8qXG4gKiBjbGFzc0xpc3QuanM6IENyb3NzLWJyb3dzZXIgZnVsbCBlbGVtZW50LmNsYXNzTGlzdCBpbXBsZW1lbnRhdGlvbi5cbiAqIDEuMS4yMDE3MDQyN1xuICpcbiAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cbiAqIExpY2Vuc2U6IERlZGljYXRlZCB0byB0aGUgcHVibGljIGRvbWFpbi5cbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L2NsYXNzTGlzdC5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cblxuLypnbG9iYWwgc2VsZiwgZG9jdW1lbnQsIERPTUV4Y2VwdGlvbiAqL1xuXG4vKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvY2xhc3NMaXN0LmpzL2Jsb2IvbWFzdGVyL2NsYXNzTGlzdC5qcyAqL1xuXG5pZiAoXCJkb2N1bWVudFwiIGluIHdpbmRvdy5zZWxmKSB7XG5cbi8vIEZ1bGwgcG9seWZpbGwgZm9yIGJyb3dzZXJzIHdpdGggbm8gY2xhc3NMaXN0IHN1cHBvcnRcbi8vIEluY2x1ZGluZyBJRSA8IEVkZ2UgbWlzc2luZyBTVkdFbGVtZW50LmNsYXNzTGlzdFxuaWYgKCEoXCJjbGFzc0xpc3RcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKSkgXG5cdHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhKFwiY2xhc3NMaXN0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIikpKSB7XG5cbihmdW5jdGlvbiAodmlldykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKCEoJ0VsZW1lbnQnIGluIHZpZXcpKSByZXR1cm47XG5cbnZhclxuXHQgIGNsYXNzTGlzdFByb3AgPSBcImNsYXNzTGlzdFwiXG5cdCwgcHJvdG9Qcm9wID0gXCJwcm90b3R5cGVcIlxuXHQsIGVsZW1DdHJQcm90byA9IHZpZXcuRWxlbWVudFtwcm90b1Byb3BdXG5cdCwgb2JqQ3RyID0gT2JqZWN0XG5cdCwgc3RyVHJpbSA9IFN0cmluZ1twcm90b1Byb3BdLnRyaW0gfHwgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpO1xuXHR9XG5cdCwgYXJySW5kZXhPZiA9IEFycmF5W3Byb3RvUHJvcF0uaW5kZXhPZiB8fCBmdW5jdGlvbiAoaXRlbSkge1xuXHRcdHZhclxuXHRcdFx0ICBpID0gMFxuXHRcdFx0LCBsZW4gPSB0aGlzLmxlbmd0aFxuXHRcdDtcblx0XHRmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fVxuXHQvLyBWZW5kb3JzOiBwbGVhc2UgYWxsb3cgY29udGVudCBjb2RlIHRvIGluc3RhbnRpYXRlIERPTUV4Y2VwdGlvbnNcblx0LCBET01FeCA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XG5cdFx0dGhpcy5uYW1lID0gdHlwZTtcblx0XHR0aGlzLmNvZGUgPSBET01FeGNlcHRpb25bdHlwZV07XG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0fVxuXHQsIGNoZWNrVG9rZW5BbmRHZXRJbmRleCA9IGZ1bmN0aW9uIChjbGFzc0xpc3QsIHRva2VuKSB7XG5cdFx0aWYgKHRva2VuID09PSBcIlwiKSB7XG5cdFx0XHR0aHJvdyBuZXcgRE9NRXgoXG5cdFx0XHRcdCAgXCJTWU5UQVhfRVJSXCJcblx0XHRcdFx0LCBcIkFuIGludmFsaWQgb3IgaWxsZWdhbCBzdHJpbmcgd2FzIHNwZWNpZmllZFwiXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRpZiAoL1xccy8udGVzdCh0b2tlbikpIHtcblx0XHRcdHRocm93IG5ldyBET01FeChcblx0XHRcdFx0ICBcIklOVkFMSURfQ0hBUkFDVEVSX0VSUlwiXG5cdFx0XHRcdCwgXCJTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXJcIlxuXHRcdFx0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGFyckluZGV4T2YuY2FsbChjbGFzc0xpc3QsIHRva2VuKTtcblx0fVxuXHQsIENsYXNzTGlzdCA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdFx0dmFyXG5cdFx0XHQgIHRyaW1tZWRDbGFzc2VzID0gc3RyVHJpbS5jYWxsKGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIilcblx0XHRcdCwgY2xhc3NlcyA9IHRyaW1tZWRDbGFzc2VzID8gdHJpbW1lZENsYXNzZXMuc3BsaXQoL1xccysvKSA6IFtdXG5cdFx0XHQsIGkgPSAwXG5cdFx0XHQsIGxlbiA9IGNsYXNzZXMubGVuZ3RoXG5cdFx0O1xuXHRcdGZvciAoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdHRoaXMucHVzaChjbGFzc2VzW2ldKTtcblx0XHR9XG5cdFx0dGhpcy5fdXBkYXRlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLnRvU3RyaW5nKCkpO1xuXHRcdH07XG5cdH1cblx0LCBjbGFzc0xpc3RQcm90byA9IENsYXNzTGlzdFtwcm90b1Byb3BdID0gW11cblx0LCBjbGFzc0xpc3RHZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIG5ldyBDbGFzc0xpc3QodGhpcyk7XG5cdH1cbjtcbi8vIE1vc3QgRE9NRXhjZXB0aW9uIGltcGxlbWVudGF0aW9ucyBkb24ndCBhbGxvdyBjYWxsaW5nIERPTUV4Y2VwdGlvbidzIHRvU3RyaW5nKClcbi8vIG9uIG5vbi1ET01FeGNlcHRpb25zLiBFcnJvcidzIHRvU3RyaW5nKCkgaXMgc3VmZmljaWVudCBoZXJlLlxuRE9NRXhbcHJvdG9Qcm9wXSA9IEVycm9yW3Byb3RvUHJvcF07XG5jbGFzc0xpc3RQcm90by5pdGVtID0gZnVuY3Rpb24gKGkpIHtcblx0cmV0dXJuIHRoaXNbaV0gfHwgbnVsbDtcbn07XG5jbGFzc0xpc3RQcm90by5jb250YWlucyA9IGZ1bmN0aW9uICh0b2tlbikge1xuXHR0b2tlbiArPSBcIlwiO1xuXHRyZXR1cm4gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSAhPT0gLTE7XG59O1xuY2xhc3NMaXN0UHJvdG8uYWRkID0gZnVuY3Rpb24gKCkge1xuXHR2YXJcblx0XHQgIHRva2VucyA9IGFyZ3VtZW50c1xuXHRcdCwgaSA9IDBcblx0XHQsIGwgPSB0b2tlbnMubGVuZ3RoXG5cdFx0LCB0b2tlblxuXHRcdCwgdXBkYXRlZCA9IGZhbHNlXG5cdDtcblx0ZG8ge1xuXHRcdHRva2VuID0gdG9rZW5zW2ldICsgXCJcIjtcblx0XHRpZiAoY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSA9PT0gLTEpIHtcblx0XHRcdHRoaXMucHVzaCh0b2tlbik7XG5cdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHR9XG5cdH1cblx0d2hpbGUgKCsraSA8IGwpO1xuXG5cdGlmICh1cGRhdGVkKSB7XG5cdFx0dGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG5cdH1cbn07XG5jbGFzc0xpc3RQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdHZhclxuXHRcdCAgdG9rZW5zID0gYXJndW1lbnRzXG5cdFx0LCBpID0gMFxuXHRcdCwgbCA9IHRva2Vucy5sZW5ndGhcblx0XHQsIHRva2VuXG5cdFx0LCB1cGRhdGVkID0gZmFsc2Vcblx0XHQsIGluZGV4XG5cdDtcblx0ZG8ge1xuXHRcdHRva2VuID0gdG9rZW5zW2ldICsgXCJcIjtcblx0XHRpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG5cdFx0d2hpbGUgKGluZGV4ICE9PSAtMSkge1xuXHRcdFx0dGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0dXBkYXRlZCA9IHRydWU7XG5cdFx0XHRpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG5cdFx0fVxuXHR9XG5cdHdoaWxlICgrK2kgPCBsKTtcblxuXHRpZiAodXBkYXRlZCkge1xuXHRcdHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpO1xuXHR9XG59O1xuY2xhc3NMaXN0UHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gKHRva2VuLCBmb3JjZSkge1xuXHR0b2tlbiArPSBcIlwiO1xuXG5cdHZhclxuXHRcdCAgcmVzdWx0ID0gdGhpcy5jb250YWlucyh0b2tlbilcblx0XHQsIG1ldGhvZCA9IHJlc3VsdCA/XG5cdFx0XHRmb3JjZSAhPT0gdHJ1ZSAmJiBcInJlbW92ZVwiXG5cdFx0OlxuXHRcdFx0Zm9yY2UgIT09IGZhbHNlICYmIFwiYWRkXCJcblx0O1xuXG5cdGlmIChtZXRob2QpIHtcblx0XHR0aGlzW21ldGhvZF0odG9rZW4pO1xuXHR9XG5cblx0aWYgKGZvcmNlID09PSB0cnVlIHx8IGZvcmNlID09PSBmYWxzZSkge1xuXHRcdHJldHVybiBmb3JjZTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gIXJlc3VsdDtcblx0fVxufTtcbmNsYXNzTGlzdFByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5qb2luKFwiIFwiKTtcbn07XG5cbmlmIChvYmpDdHIuZGVmaW5lUHJvcGVydHkpIHtcblx0dmFyIGNsYXNzTGlzdFByb3BEZXNjID0ge1xuXHRcdCAgZ2V0OiBjbGFzc0xpc3RHZXR0ZXJcblx0XHQsIGVudW1lcmFibGU6IHRydWVcblx0XHQsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHR9O1xuXHR0cnkge1xuXHRcdG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcblx0fSBjYXRjaCAoZXgpIHsgLy8gSUUgOCBkb2Vzbid0IHN1cHBvcnQgZW51bWVyYWJsZTp0cnVlXG5cdFx0Ly8gYWRkaW5nIHVuZGVmaW5lZCB0byBmaWdodCB0aGlzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L2NsYXNzTGlzdC5qcy9pc3N1ZXMvMzZcblx0XHQvLyBtb2Rlcm5pZSBJRTgtTVNXNyBtYWNoaW5lIGhhcyBJRTggOC4wLjYwMDEuMTg3MDIgYW5kIGlzIGFmZmVjdGVkXG5cdFx0aWYgKGV4Lm51bWJlciA9PT0gdW5kZWZpbmVkIHx8IGV4Lm51bWJlciA9PT0gLTB4N0ZGNUVDNTQpIHtcblx0XHRcdGNsYXNzTGlzdFByb3BEZXNjLmVudW1lcmFibGUgPSBmYWxzZTtcblx0XHRcdG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcblx0XHR9XG5cdH1cbn0gZWxzZSBpZiAob2JqQ3RyW3Byb3RvUHJvcF0uX19kZWZpbmVHZXR0ZXJfXykge1xuXHRlbGVtQ3RyUHJvdG8uX19kZWZpbmVHZXR0ZXJfXyhjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RHZXR0ZXIpO1xufVxuXG59KHdpbmRvdy5zZWxmKSk7XG5cbn1cblxuLy8gVGhlcmUgaXMgZnVsbCBvciBwYXJ0aWFsIG5hdGl2ZSBjbGFzc0xpc3Qgc3VwcG9ydCwgc28ganVzdCBjaGVjayBpZiB3ZSBuZWVkXG4vLyB0byBub3JtYWxpemUgdGhlIGFkZC9yZW1vdmUgYW5kIHRvZ2dsZSBBUElzLlxuXG4oZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKTtcblxuXHR0ZXN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYzFcIiwgXCJjMlwiKTtcblxuXHQvLyBQb2x5ZmlsbCBmb3IgSUUgMTAvMTEgYW5kIEZpcmVmb3ggPDI2LCB3aGVyZSBjbGFzc0xpc3QuYWRkIGFuZFxuXHQvLyBjbGFzc0xpc3QucmVtb3ZlIGV4aXN0IGJ1dCBzdXBwb3J0IG9ubHkgb25lIGFyZ3VtZW50IGF0IGEgdGltZS5cblx0aWYgKCF0ZXN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJjMlwiKSkge1xuXHRcdHZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbihtZXRob2QpIHtcblx0XHRcdHZhciBvcmlnaW5hbCA9IERPTVRva2VuTGlzdC5wcm90b3R5cGVbbWV0aG9kXTtcblxuXHRcdFx0RE9NVG9rZW5MaXN0LnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odG9rZW4pIHtcblx0XHRcdFx0dmFyIGksIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0dG9rZW4gPSBhcmd1bWVudHNbaV07XG5cdFx0XHRcdFx0b3JpZ2luYWwuY2FsbCh0aGlzLCB0b2tlbik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fTtcblx0XHRjcmVhdGVNZXRob2QoJ2FkZCcpO1xuXHRcdGNyZWF0ZU1ldGhvZCgncmVtb3ZlJyk7XG5cdH1cblxuXHR0ZXN0RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiYzNcIiwgZmFsc2UpO1xuXG5cdC8vIFBvbHlmaWxsIGZvciBJRSAxMCBhbmQgRmlyZWZveCA8MjQsIHdoZXJlIGNsYXNzTGlzdC50b2dnbGUgZG9lcyBub3Rcblx0Ly8gc3VwcG9ydCB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuXHRpZiAodGVzdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYzNcIikpIHtcblx0XHR2YXIgX3RvZ2dsZSA9IERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlO1xuXG5cdFx0RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbih0b2tlbiwgZm9yY2UpIHtcblx0XHRcdGlmICgxIGluIGFyZ3VtZW50cyAmJiAhdGhpcy5jb250YWlucyh0b2tlbikgPT09ICFmb3JjZSkge1xuXHRcdFx0XHRyZXR1cm4gZm9yY2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gX3RvZ2dsZS5jYWxsKHRoaXMsIHRva2VuKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdH1cblxuXHR0ZXN0RWxlbWVudCA9IG51bGw7XG59KCkpO1xuXG59XG4iLCIvKiFcbkNvcHlyaWdodCAoQykgMjAxMy0yMDE1IGJ5IFdlYlJlZmxlY3Rpb25cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuKGZ1bmN0aW9uKHdpbmRvdyl7XG4gIC8qISAoQykgV2ViUmVmbGVjdGlvbiBNaXQgU3R5bGUgTGljZW5zZSAqL1xuICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHJldHVybjtcbiAgdmFyXG4gICAgRFVOTk9BQk9VVERPTUxPQURFRCA9IHRydWUsXG4gICAgUkVBRFlFVkVOVERJU1BBVENIRUQgPSBmYWxzZSxcbiAgICBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJyxcbiAgICBET01DT05URU5UTE9BREVEID0gJ0RPTUNvbnRlbnRMb2FkZWQnLFxuICAgIFNFQ1JFVCA9ICdfX0lFOF9fJyArIE1hdGgucmFuZG9tKCksXG4gICAgLy8gT2JqZWN0ID0gd2luZG93Lk9iamVjdCxcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fFxuICAgIC8vIGp1c3QgaW4gY2FzZSAuLi5cbiAgICBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgfSxcbiAgICBkZWZpbmVQcm9wZXJ0aWVzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgfHxcbiAgICAvLyBJRTggaW1wbGVtZW50ZWQgZGVmaW5lUHJvcGVydHkgYnV0IG5vdCB0aGUgcGx1cmFsLi4uXG4gICAgZnVuY3Rpb24gKG9iamVjdCwgZGVzY3JpcHRvcnMpIHtcbiAgICAgIGZvcih2YXIga2V5IGluIGRlc2NyaXB0b3JzKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGRlc2NyaXB0b3JzLCBrZXkpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCBkZXNjcmlwdG9yc1trZXldKTtcbiAgICAgICAgICB9IGNhdGNoKG9fTykge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGtleSArICcgZmFpbGVkIG9uIG9iamVjdDonLCBvYmplY3QsIG9fTy5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgIC8vIGhlcmUgSUU3IHdpbGwgYnJlYWsgbGlrZSBhIGNoYXJtXG4gICAgRWxlbWVudFByb3RvdHlwZSA9IHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZSxcbiAgICBUZXh0UHJvdG90eXBlID0gd2luZG93LlRleHQucHJvdG90eXBlLFxuICAgIC8vIG5vbmUgb2YgYWJvdmUgbmF0aXZlIGNvbnN0cnVjdG9ycyBleGlzdC9hcmUgZXhwb3NlZFxuICAgIHBvc3NpYmx5TmF0aXZlRXZlbnQgPSAvXlthLXpdKyQvLFxuICAgIC8vIF4gYWN0dWFsbHkgY291bGQgcHJvYmFibHkgYmUganVzdCAvXlthLXpdKyQvXG4gICAgcmVhZHlTdGF0ZU9LID0gL2xvYWRlZHxjb21wbGV0ZS8sXG4gICAgdHlwZXMgPSB7fSxcbiAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICBodG1sID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgIHJlbW92ZUF0dHJpYnV0ZSA9IGh0bWwucmVtb3ZlQXR0cmlidXRlLFxuICAgIHNldEF0dHJpYnV0ZSA9IGh0bWwuc2V0QXR0cmlidXRlLFxuICAgIHZhbHVlRGVzYyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgO1xuXG4gIGZ1bmN0aW9uIGNvbW1vbkV2ZW50TG9vcChjdXJyZW50VGFyZ2V0LCBlLCAkaGFuZGxlcnMsIHN5bnRoZXRpYykge1xuICAgIGZvcih2YXJcbiAgICAgIGhhbmRsZXIsXG4gICAgICBjb250aW51ZVByb3BhZ2F0aW9uLFxuICAgICAgaGFuZGxlcnMgPSAkaGFuZGxlcnMuc2xpY2UoKSxcbiAgICAgIGV2dCA9IGVucmljaChlLCBjdXJyZW50VGFyZ2V0KSxcbiAgICAgIGkgPSAwLCBsZW5ndGggPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrK1xuICAgICkge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIuaGFuZGxlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBoYW5kbGVyLmhhbmRsZUV2ZW50KGV2dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbmRsZXIuY2FsbChjdXJyZW50VGFyZ2V0LCBldnQpO1xuICAgICAgfVxuICAgICAgaWYgKGV2dC5zdG9wcGVkSW1tZWRpYXRlUHJvcGFnYXRpb24pIGJyZWFrO1xuICAgIH1cbiAgICBjb250aW51ZVByb3BhZ2F0aW9uID0gIWV2dC5zdG9wcGVkUHJvcGFnYXRpb247XG4gICAgLypcbiAgICBpZiAoY29udGludWVQcm9wYWdhdGlvbiAmJiAhc3ludGhldGljICYmICFsaXZlKGN1cnJlbnRUYXJnZXQpKSB7XG4gICAgICBldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgKi9cbiAgICByZXR1cm4gKFxuICAgICAgc3ludGhldGljICYmXG4gICAgICBjb250aW51ZVByb3BhZ2F0aW9uICYmXG4gICAgICBjdXJyZW50VGFyZ2V0LnBhcmVudE5vZGVcbiAgICApID9cbiAgICAgIGN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KGV2dCkgOlxuICAgICAgIWV2dC5kZWZhdWx0UHJldmVudGVkXG4gICAgO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tbW9uRGVzY3JpcHRvcihnZXQsIHNldCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBpZiB5b3UgdHJ5IHdpdGggZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgLy8gSUU4IHdpbGwgbWlzZXJhYmx5IGZhaWxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZ2V0LFxuICAgICAgc2V0OiBzZXRcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY29tbW9uVGV4dENvbnRlbnQocHJvdG9EZXN0LCBwcm90b1NvdXJjZSwgcHJvcGVydHkpIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgIHByb3RvU291cmNlIHx8IHByb3RvRGVzdCwgcHJvcGVydHlcbiAgICApO1xuICAgIGRlZmluZVByb3BlcnR5KFxuICAgICAgcHJvdG9EZXN0LFxuICAgICAgJ3RleHRDb250ZW50JyxcbiAgICAgIGNvbW1vbkRlc2NyaXB0b3IoXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZGVzY3JpcHRvci5nZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgZGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLCB0ZXh0Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5yaWNoKGUsIGN1cnJlbnRUYXJnZXQpIHtcbiAgICBlLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xuICAgIGUuZXZlbnRQaGFzZSA9IChcbiAgICAgIC8vIEFUX1RBUkdFVCA6IEJVQkJMSU5HX1BIQVNFXG4gICAgICBlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0ID8gMiA6IDNcbiAgICApO1xuICAgIHJldHVybiBlO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZChhcnJheSwgdmFsdWUpIHtcbiAgICB2YXIgaSA9IGFycmF5Lmxlbmd0aDtcbiAgICB3aGlsZShpLS0gJiYgYXJyYXlbaV0gIT09IHZhbHVlKTtcbiAgICByZXR1cm4gaTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRleHRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnRhZ05hbWUgPT09ICdCUicpIHJldHVybiAnXFxuJztcbiAgICB2YXJcbiAgICAgIHRleHROb2RlID0gdGhpcy5maXJzdENoaWxkLFxuICAgICAgYXJyYXlDb250ZW50ID0gW11cbiAgICA7XG4gICAgd2hpbGUodGV4dE5vZGUpIHtcbiAgICAgIGlmICh0ZXh0Tm9kZS5ub2RlVHlwZSAhPT0gOCAmJiB0ZXh0Tm9kZS5ub2RlVHlwZSAhPT0gNykge1xuICAgICAgICBhcnJheUNvbnRlbnQucHVzaCh0ZXh0Tm9kZS50ZXh0Q29udGVudCk7XG4gICAgICB9XG4gICAgICB0ZXh0Tm9kZSA9IHRleHROb2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlDb250ZW50LmpvaW4oJycpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGl2ZShzZWxmKSB7XG4gICAgcmV0dXJuIHNlbGYubm9kZVR5cGUgIT09IDkgJiYgaHRtbC5jb250YWlucyhzZWxmKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ua2V5dXAoZSkge1xuICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBldnQuaW5pdEV2ZW50KCdpbnB1dCcsIHRydWUsIHRydWUpO1xuICAgIChlLnNyY0VsZW1lbnQgfHwgZS5mcm9tRWxlbWVudCB8fCBkb2N1bWVudCkuZGlzcGF0Y2hFdmVudChldnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25SZWFkeVN0YXRlKGUpIHtcbiAgICBpZiAoIVJFQURZRVZFTlRESVNQQVRDSEVEICYmIHJlYWR5U3RhdGVPSy50ZXN0KFxuICAgICAgZG9jdW1lbnQucmVhZHlTdGF0ZVxuICAgICkpIHtcbiAgICAgIFJFQURZRVZFTlRESVNQQVRDSEVEID0gIVJFQURZRVZFTlRESVNQQVRDSEVEO1xuICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoT05SRUFEWVNUQVRFQ0hBTkdFLCBvblJlYWR5U3RhdGUpO1xuICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQoRE9NQ09OVEVOVExPQURFRCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0dGVyKGF0dHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaHRtbFthdHRyXSB8fCAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5W2F0dHJdKSB8fCAwO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUZXh0Q29udGVudCh0ZXh0Q29udGVudCkge1xuICAgIHZhciBub2RlO1xuICAgIHdoaWxlICgobm9kZSA9IHRoaXMubGFzdENoaWxkKSkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG4gICAgLypqc2hpbnQgZXFudWxsOnRydWUgKi9cbiAgICBpZiAodGV4dENvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0Q29udGVudCkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZlcmlmeShzZWxmLCBlKSB7XG4gICAgaWYgKCFlKSB7XG4gICAgICBlID0gd2luZG93LmV2ZW50O1xuICAgIH1cbiAgICBpZiAoIWUudGFyZ2V0KSB7XG4gICAgICBlLnRhcmdldCA9IGUuc3JjRWxlbWVudCB8fCBlLmZyb21FbGVtZW50IHx8IGRvY3VtZW50O1xuICAgIH1cbiAgICBpZiAoIWUudGltZVN0YW1wKSB7XG4gICAgICBlLnRpbWVTdGFtcCA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9XG5cbiAgLy8gbm9ybWFsaXplZCB0ZXh0Q29udGVudCBmb3I6XG4gIC8vICBjb21tZW50LCBzY3JpcHQsIHN0eWxlLCB0ZXh0LCB0aXRsZVxuICBjb21tb25UZXh0Q29udGVudChcbiAgICB3aW5kb3cuSFRNTENvbW1lbnRFbGVtZW50LnByb3RvdHlwZSxcbiAgICBFbGVtZW50UHJvdG90eXBlLFxuICAgICdub2RlVmFsdWUnXG4gICk7XG5cbiAgY29tbW9uVGV4dENvbnRlbnQoXG4gICAgd2luZG93LkhUTUxTY3JpcHRFbGVtZW50LnByb3RvdHlwZSxcbiAgICBudWxsLFxuICAgICd0ZXh0J1xuICApO1xuXG4gIGNvbW1vblRleHRDb250ZW50KFxuICAgIFRleHRQcm90b3R5cGUsXG4gICAgbnVsbCxcbiAgICAnbm9kZVZhbHVlJ1xuICApO1xuXG4gIGNvbW1vblRleHRDb250ZW50KFxuICAgIHdpbmRvdy5IVE1MVGl0bGVFbGVtZW50LnByb3RvdHlwZSxcbiAgICBudWxsLFxuICAgICd0ZXh0J1xuICApO1xuXG4gIGRlZmluZVByb3BlcnR5KFxuICAgIHdpbmRvdy5IVE1MU3R5bGVFbGVtZW50LnByb3RvdHlwZSxcbiAgICAndGV4dENvbnRlbnQnLFxuICAgIChmdW5jdGlvbihkZXNjcmlwdG9yKXtcbiAgICAgIHJldHVybiBjb21tb25EZXNjcmlwdG9yKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3IuZ2V0LmNhbGwodGhpcy5zdHlsZVNoZWV0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgZGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLnN0eWxlU2hlZXQsIHRleHRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KGdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUsICdjc3NUZXh0JykpKVxuICApO1xuXG4gIHZhciBvcGFjaXR5cmUgPSAvXFxiXFxzKmFscGhhXFxzKlxcKFxccypvcGFjaXR5XFxzKj1cXHMqKFxcZCspXFxzKlxcKS87XG4gIGRlZmluZVByb3BlcnR5KFxuICAgIHdpbmRvdy5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZSxcbiAgICAnb3BhY2l0eScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtID0gdGhpcy5maWx0ZXIubWF0Y2gob3BhY2l0eXJlKTtcbiAgICAgICAgcmV0dXJuIG0gPyAobVsxXSAvIDEwMCkudG9TdHJpbmcoKSA6ICcnO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy56b29tID0gMTtcbiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmICh2YWx1ZSA8IDEpIHtcbiAgICAgICAgICB2YWx1ZSA9ICcgYWxwaGEob3BhY2l0eT0nICsgTWF0aC5yb3VuZCh2YWx1ZSAqIDEwMCkgKyAnKSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbHRlciA9IHRoaXMuZmlsdGVyLnJlcGxhY2Uob3BhY2l0eXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7IGZvdW5kID0gdHJ1ZTsgcmV0dXJuIHZhbHVlOyB9KTtcbiAgICAgICAgaWYgKCFmb3VuZCAmJiB2YWx1ZSkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyICs9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIGRlZmluZVByb3BlcnRpZXMoXG4gICAgRWxlbWVudFByb3RvdHlwZSxcbiAgICB7XG4gICAgICAvLyBib251c1xuICAgICAgdGV4dENvbnRlbnQ6IHtcbiAgICAgICAgZ2V0OiBnZXRUZXh0Q29udGVudCxcbiAgICAgICAgc2V0OiBzZXRUZXh0Q29udGVudFxuICAgICAgfSxcbiAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0VsZW1lbnRUcmF2ZXJzYWwvI2ludGVyZmFjZS1lbGVtZW50VHJhdmVyc2FsXG4gICAgICBmaXJzdEVsZW1lbnRDaGlsZDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IodmFyXG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gdGhpcy5jaGlsZE5vZGVzIHx8IFtdLFxuICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PSAxKSByZXR1cm4gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBsYXN0RWxlbWVudENoaWxkOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvcih2YXJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSB0aGlzLmNoaWxkTm9kZXMgfHwgW10sXG4gICAgICAgICAgICBpID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PSAxKSByZXR1cm4gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbmlucHV0OiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vbmlucHV0IHx8IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG9uaW5wdXQpIHtcbiAgICAgICAgICBpZiAodGhpcy5fb25pbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX29uaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5fb25pbnB1dCA9IG9uaW5wdXQ7XG4gICAgICAgICAgICBpZiAob25pbnB1dCkge1xuICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25pbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJldmlvdXNFbGVtZW50U2libGluZzoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50U2libGluZyA9IHRoaXMucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgIHdoaWxlIChwcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIHByZXZpb3VzRWxlbWVudFNpYmxpbmcubm9kZVR5cGUgIT0gMSkge1xuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50U2libGluZyA9IHByZXZpb3VzRWxlbWVudFNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG5leHRFbGVtZW50U2libGluZzoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgbmV4dEVsZW1lbnRTaWJsaW5nID0gdGhpcy5uZXh0U2libGluZztcbiAgICAgICAgICB3aGlsZSAobmV4dEVsZW1lbnRTaWJsaW5nICYmIG5leHRFbGVtZW50U2libGluZy5ub2RlVHlwZSAhPSAxKSB7XG4gICAgICAgICAgICBuZXh0RWxlbWVudFNpYmxpbmcgPSBuZXh0RWxlbWVudFNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjaGlsZEVsZW1lbnRDb3VudDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IodmFyXG4gICAgICAgICAgICBjb3VudCA9IDAsXG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gdGhpcy5jaGlsZE5vZGVzIHx8IFtdLFxuICAgICAgICAgICAgaSA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpLS07IGNvdW50ICs9IGNoaWxkTm9kZXNbaV0ubm9kZVR5cGUgPT0gMVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLypcbiAgICAgIC8vIGNoaWxkcmVuIHdvdWxkIGJlIGFuIG92ZXJyaWRlXG4gICAgICAvLyBJRTggYWxyZWFkeSBzdXBwb3J0cyB0aGVtIGJ1dCB3aXRoIGNvbW1lbnRzIHRvb1xuICAgICAgLy8gbm90IGp1c3Qgbm9kZVR5cGUgMVxuICAgICAgY2hpbGRyZW46IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yKHZhclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBbXSxcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSB0aGlzLmNoaWxkTm9kZXMgfHwgW10sXG4gICAgICAgICAgICBpID0gMCwgbGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzW2ldLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKi9cbiAgICAgIC8vIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IG1ldGhvZHMgYW5kIGV2ZW50c1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogdmFsdWVEZXNjKGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyLCBjYXB0dXJlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaGFuZGxlciAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICAgICAgdmFyXG4gICAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgb250eXBlID0gJ29uJyArIHR5cGUsXG4gICAgICAgICAgdGVtcGxlID0gIHNlbGZbU0VDUkVUXSB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiwgU0VDUkVULCB7dmFsdWU6IHt9fVxuICAgICAgICAgICAgICAgICAgICAgIClbU0VDUkVUXSxcbiAgICAgICAgICBjdXJyZW50VHlwZSA9IHRlbXBsZVtvbnR5cGVdIHx8ICh0ZW1wbGVbb250eXBlXSA9IHt9KSxcbiAgICAgICAgICBoYW5kbGVycyAgPSBjdXJyZW50VHlwZS5oIHx8IChjdXJyZW50VHlwZS5oID0gW10pLFxuICAgICAgICAgIGUsIGF0dHJcbiAgICAgICAgO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoY3VycmVudFR5cGUsICd3JykpIHtcbiAgICAgICAgICBjdXJyZW50VHlwZS53ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGVbU0VDUkVUXSBpcyBhIHNpbGVudCBub3RpZmljYXRpb24gbmVlZGVkIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBmaXJlZCBldmVudHMgZHVyaW5nIGxpdmUgdGVzdFxuICAgICAgICAgICAgcmV0dXJuIGVbU0VDUkVUXSB8fCBjb21tb25FdmVudExvb3Aoc2VsZiwgdmVyaWZ5KHNlbGYsIGUpLCBoYW5kbGVycywgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gaWYgbm90IGRldGVjdGVkIHlldFxuICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlcywgb250eXBlKSkge1xuICAgICAgICAgICAgLy8gYW5kIHBvdGVudGlhbGx5IGEgbmF0aXZlIGV2ZW50XG4gICAgICAgICAgICBpZihwb3NzaWJseU5hdGl2ZUV2ZW50LnRlc3QodHlwZSkpIHtcbiAgICAgICAgICAgICAgLy8gZG8gdGhpcyBoZWF2eSB0aGluZ1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86ICBzaG91bGQgSSBjb25zaWRlciB0YWdOYW1lIHRvbyBzbyB0aGF0XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIElOUFVUW29udHlwZV0gY291bGQgYmUgZGlmZmVyZW50ID9cbiAgICAgICAgICAgICAgICBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgY2xvbmUgZXZlciBhIG5vZGVcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWFsbHkgYSBkb2N1bWVudCBvbmUgLi4uXG4gICAgICAgICAgICAgICAgLy8gdXNlIHRoZSBzZWNyZXQgdG8gaWdub3JlIHRoZW0gYWxsXG4gICAgICAgICAgICAgICAgZVtTRUNSRVRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCBhIHBhcnQgaWYgYSBub2RlIGhhcyBuZXZlciBiZWVuXG4gICAgICAgICAgICAgICAgLy8gYWRkZWQgdG8gYW55IG90aGVyIG5vZGUsIGZpcmVFdmVudCBtaWdodFxuICAgICAgICAgICAgICAgIC8vIGJlaGF2ZSB2ZXJ5IHdlaXJkbHkgKHJlYWQ6IHRyaWdnZXIgdW5zcGVjaWZpZWQgZXJyb3JzKVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLm5vZGVUeXBlICE9IDkpIHtcbiAgICAgICAgICAgICAgICAgIC8qanNoaW50IGVxbnVsbDp0cnVlICovXG4gICAgICAgICAgICAgICAgICBpZiAoc2VsZi5wYXJlbnROb2RlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKHNlbGYpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKChhdHRyID0gc2VsZi5nZXRBdHRyaWJ1dGUob250eXBlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLmNhbGwoc2VsZiwgb250eXBlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VsZi5maXJlRXZlbnQob250eXBlLCBlKTtcbiAgICAgICAgICAgICAgICB0eXBlc1tvbnR5cGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSBjYXRjaChtZWgpIHtcbiAgICAgICAgICAgICAgICB0eXBlc1tvbnR5cGVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGRpdi5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgIGRpdi5yZW1vdmVDaGlsZChkaXYuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChhdHRyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRBdHRyaWJ1dGUuY2FsbChzZWxmLCBvbnR5cGUsIGF0dHIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIGJvdGhlciBzaW5jZVxuICAgICAgICAgICAgICAvLyAneC1ldmVudCcgYWluJ3QgbmF0aXZlIGZvciBzdXJlXG4gICAgICAgICAgICAgIHR5cGVzW29udHlwZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChjdXJyZW50VHlwZS5uID0gdHlwZXNbb250eXBlXSkpIHtcbiAgICAgICAgICAgIHNlbGYuYXR0YWNoRXZlbnQob250eXBlLCBjdXJyZW50VHlwZS53KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbmQoaGFuZGxlcnMsIGhhbmRsZXIpIDwgMCkge1xuICAgICAgICAgIGhhbmRsZXJzW2NhcHR1cmUgPyAndW5zaGlmdCcgOiAncHVzaCddKGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgc2VsZi5hdHRhY2hFdmVudCgnb25rZXl1cCcsIG9ua2V5dXApO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGRpc3BhdGNoRXZlbnQ6IHZhbHVlRGVzYyhmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICBvbnR5cGUgPSAnb24nICsgZS50eXBlLFxuICAgICAgICAgIHRlbXBsZSA9ICBzZWxmW1NFQ1JFVF0sXG4gICAgICAgICAgY3VycmVudFR5cGUgPSB0ZW1wbGUgJiYgdGVtcGxlW29udHlwZV0sXG4gICAgICAgICAgdmFsaWQgPSAhIWN1cnJlbnRUeXBlLFxuICAgICAgICAgIHBhcmVudE5vZGVcbiAgICAgICAgO1xuICAgICAgICBpZiAoIWUudGFyZ2V0KSBlLnRhcmdldCA9IHNlbGY7XG4gICAgICAgIHJldHVybiAodmFsaWQgPyAoXG4gICAgICAgICAgY3VycmVudFR5cGUubiAvKiAmJiBsaXZlKHNlbGYpICovID9cbiAgICAgICAgICAgIHNlbGYuZmlyZUV2ZW50KG9udHlwZSwgZSkgOlxuICAgICAgICAgICAgY29tbW9uRXZlbnRMb29wKFxuICAgICAgICAgICAgICBzZWxmLFxuICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICBjdXJyZW50VHlwZS5oLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApXG4gICAgICAgICkgOiAoXG4gICAgICAgICAgKHBhcmVudE5vZGUgPSBzZWxmLnBhcmVudE5vZGUpIC8qICYmIGxpdmUoc2VsZikgKi8gP1xuICAgICAgICAgICAgcGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KGUpIDpcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgKSksICFlLmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICB9KSxcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IHZhbHVlRGVzYyhmdW5jdGlvbiAodHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGhhbmRsZXIgIT09ICdvYmplY3QnKSByZXR1cm47XG4gICAgICAgIHZhclxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyB0eXBlLFxuICAgICAgICAgIHRlbXBsZSA9ICBzZWxmW1NFQ1JFVF0sXG4gICAgICAgICAgY3VycmVudFR5cGUgPSB0ZW1wbGUgJiYgdGVtcGxlW29udHlwZV0sXG4gICAgICAgICAgaGFuZGxlcnMgPSBjdXJyZW50VHlwZSAmJiBjdXJyZW50VHlwZS5oLFxuICAgICAgICAgIGkgPSBoYW5kbGVycyA/IGZpbmQoaGFuZGxlcnMsIGhhbmRsZXIpIDogLTFcbiAgICAgICAgO1xuICAgICAgICBpZiAoLTEgPCBpKSBoYW5kbGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICB9KVxuICAgIH1cbiAgKTtcblxuICAvKiB0aGlzIGlzIG5vdCBuZWVkZWQgaW4gSUU4XG4gIGRlZmluZVByb3BlcnRpZXMod2luZG93LkhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZSwge1xuICAgIHZhbHVlOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIC8vKi9cblxuICAvLyBFdmVudFRhcmdldCBtZXRob2RzIGZvciBUZXh0IG5vZGVzIHRvb1xuICBkZWZpbmVQcm9wZXJ0aWVzKFRleHRQcm90b3R5cGUsIHtcbiAgICBhZGRFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyKSxcbiAgICBkaXNwYXRjaEV2ZW50OiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50KSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICB9KTtcblxuICBkZWZpbmVQcm9wZXJ0aWVzKFxuICAgIHdpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsXG4gICAge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogdmFsdWVEZXNjKGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyLCBjYXB0dXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyB0eXBlLFxuICAgICAgICAgIHRlbXBsZSA9ICBzZWxmW1NFQ1JFVF0gfHxcbiAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYsIFNFQ1JFVCwge3ZhbHVlOiB7fX1cbiAgICAgICAgICAgICAgICAgICAgICApW1NFQ1JFVF0sXG4gICAgICAgICAgY3VycmVudFR5cGUgPSB0ZW1wbGVbb250eXBlXSB8fCAodGVtcGxlW29udHlwZV0gPSB7fSksXG4gICAgICAgICAgaGFuZGxlcnMgID0gY3VycmVudFR5cGUuaCB8fCAoY3VycmVudFR5cGUuaCA9IFtdKVxuICAgICAgICA7XG4gICAgICAgIGlmIChmaW5kKGhhbmRsZXJzLCBoYW5kbGVyKSA8IDApIHtcbiAgICAgICAgICBpZiAoIXNlbGZbb250eXBlXSkge1xuICAgICAgICAgICAgc2VsZltvbnR5cGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgICAgICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGFuZGxlcnNbY2FwdHVyZSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgZGlzcGF0Y2hFdmVudDogdmFsdWVEZXNjKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyBlLnR5cGUsXG4gICAgICAgICAgdGVtcGxlID0gIHNlbGZbU0VDUkVUXSxcbiAgICAgICAgICBjdXJyZW50VHlwZSA9IHRlbXBsZSAmJiB0ZW1wbGVbb250eXBlXSxcbiAgICAgICAgICB2YWxpZCA9ICEhY3VycmVudFR5cGVcbiAgICAgICAgO1xuICAgICAgICByZXR1cm4gdmFsaWQgJiYgKFxuICAgICAgICAgIGN1cnJlbnRUeXBlLm4gLyogJiYgbGl2ZShzZWxmKSAqLyA/XG4gICAgICAgICAgICBzZWxmLmZpcmVFdmVudChvbnR5cGUsIGUpIDpcbiAgICAgICAgICAgIGNvbW1vbkV2ZW50TG9vcChcbiAgICAgICAgICAgICAgc2VsZixcbiAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgY3VycmVudFR5cGUuaCxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSksXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICAgIH1cbiAgKTtcblxuICB2YXIgYnV0dG9uR2V0dGVyID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEV2ZW50LnByb3RvdHlwZSwgJ2J1dHRvbicpLmdldDtcbiAgZGVmaW5lUHJvcGVydGllcyhcbiAgICB3aW5kb3cuRXZlbnQucHJvdG90eXBlLFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHZhbHVlRGVzYyh0cnVlKSxcbiAgICAgIGNhbmNlbGFibGU6IHZhbHVlRGVzYyh0cnVlKSxcbiAgICAgIHByZXZlbnREZWZhdWx0OiB2YWx1ZURlc2MoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jYW5jZWxhYmxlKSB7XG4gICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHN0b3BQcm9wYWdhdGlvbjogdmFsdWVEZXNjKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICB9KSxcbiAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogdmFsdWVEZXNjKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkSW1tZWRpYXRlUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSksXG4gICAgICBpbml0RXZlbnQ6IHZhbHVlRGVzYyhmdW5jdGlvbih0eXBlLCBidWJibGVzLCBjYW5jZWxhYmxlKXtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5idWJibGVzID0gISFidWJibGVzO1xuICAgICAgICB0aGlzLmNhbmNlbGFibGUgPSAhIWNhbmNlbGFibGU7XG4gICAgICAgIGlmICghdGhpcy5idWJibGVzKSB7XG4gICAgICAgICAgdGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBwYWdlWDoge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuX3BhZ2VYIHx8ICh0aGlzLl9wYWdlWCA9IHRoaXMuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYIC0gKGh0bWwuY2xpZW50TGVmdCB8fCAwKSk7IH19LFxuICAgICAgcGFnZVk6IHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLl9wYWdlWSB8fCAodGhpcy5fcGFnZVkgPSB0aGlzLmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsWSAtIChodG1sLmNsaWVudFRvcCB8fCAwKSk7IH19LFxuICAgICAgd2hpY2g6IHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmtleUNvZGUgPyB0aGlzLmtleUNvZGUgOiAoaXNOYU4odGhpcy5idXR0b24pID8gdW5kZWZpbmVkIDogdGhpcy5idXR0b24gKyAxKTsgfX0sXG4gICAgICBjaGFyQ29kZToge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuICh0aGlzLmtleUNvZGUgJiYgdGhpcy50eXBlID09ICdrZXlwcmVzcycpID8gdGhpcy5rZXlDb2RlIDogMDsgfX0sXG4gICAgICBidXR0b25zOiB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gYnV0dG9uR2V0dGVyLmNhbGwodGhpcyk7IH19LFxuICAgICAgYnV0dG9uOiB7Z2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnM7XG4gICAgICAgIHJldHVybiAoYnV0dG9ucyAmIDEgPyAwIDogKGJ1dHRvbnMgJiAyID8gMiA6IChidXR0b25zICYgNCA/IDEgOiB1bmRlZmluZWQpKSk7XG4gICAgICB9fSxcbiAgICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IHtnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBpZiBwcmV2ZW50RGVmYXVsdCgpIHdhcyBuZXZlciBjYWxsZWQsIG9yIHJldHVyblZhbHVlIG5vdCBnaXZlbiBhIHZhbHVlXG4gICAgICAgIC8vIHRoZW4gcmV0dXJuVmFsdWUgaXMgdW5kZWZpbmVkXG4gICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHRoaXMucmV0dXJuVmFsdWUsIHVuZGVmO1xuICAgICAgICByZXR1cm4gIShyZXR1cm5WYWx1ZSA9PT0gdW5kZWYgfHwgcmV0dXJuVmFsdWUpO1xuICAgICAgfX0sXG4gICAgICByZWxhdGVkVGFyZ2V0OiB7Z2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgICAgIGlmICh0eXBlID09PSAnbW91c2VvdmVyJykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmZyb21FbGVtZW50O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtb3VzZW91dCcpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50b0VsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgfVxuICApO1xuXG4gIGRlZmluZVByb3BlcnRpZXMoXG4gICAgd2luZG93LkhUTUxEb2N1bWVudC5wcm90b3R5cGUsXG4gICAge1xuICAgICAgZGVmYXVsdFZpZXc6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50V2luZG93O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGV4dENvbnRlbnQ6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubm9kZVR5cGUgPT09IDExID8gZ2V0VGV4dENvbnRlbnQuY2FsbCh0aGlzKSA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgaWYgKHRoaXMubm9kZVR5cGUgPT09IDExKSB7XG4gICAgICAgICAgICBzZXRUZXh0Q29udGVudC5jYWxsKHRoaXMsIHRleHRDb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoZnVuY3Rpb24odHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIEVsZW1lbnRQcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHNlbGYsIHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpO1xuICAgICAgICAvLyBOT1RFOiAgaXQgd29uJ3QgZmlyZSBpZiBhbHJlYWR5IGxvYWRlZCwgdGhpcyBpcyBOT1QgYSAkLnJlYWR5KCkgc2hpbSFcbiAgICAgICAgLy8gICAgICAgIHRoaXMgYmVoYXZlcyBqdXN0IGxpa2Ugc3RhbmRhcmQgYnJvd3NlcnNcbiAgICAgICAgaWYgKFxuICAgICAgICAgIERVTk5PQUJPVVRET01MT0FERUQgJiZcbiAgICAgICAgICB0eXBlID09PSBET01DT05URU5UTE9BREVEICYmXG4gICAgICAgICAgIXJlYWR5U3RhdGVPSy50ZXN0KFxuICAgICAgICAgICAgc2VsZi5yZWFkeVN0YXRlXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBEVU5OT0FCT1VURE9NTE9BREVEID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5hdHRhY2hFdmVudChPTlJFQURZU1RBVEVDSEFOR0UsIG9uUmVhZHlTdGF0ZSk7XG4gICAgICAgICAgLyogZ2xvYmFsIHRvcCAqL1xuICAgICAgICAgIGlmICh3aW5kb3cgPT0gdG9wKSB7XG4gICAgICAgICAgICAoZnVuY3Rpb24gZ29ubmEoZSl7dHJ5e1xuICAgICAgICAgICAgICBzZWxmLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgnbGVmdCcpO1xuICAgICAgICAgICAgICBvblJlYWR5U3RhdGUoKTtcbiAgICAgICAgICAgICAgfWNhdGNoKG9fTyl7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZ29ubmEsIDUwKTtcbiAgICAgICAgICAgIH19KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBkaXNwYXRjaEV2ZW50OiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50KSxcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IHZhbHVlRGVzYyhFbGVtZW50UHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIpLFxuICAgICAgY3JlYXRlRXZlbnQ6IHZhbHVlRGVzYyhmdW5jdGlvbihDbGFzcyl7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAoQ2xhc3MgIT09ICdFdmVudCcpIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgJyArIENsYXNzKTtcbiAgICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgICAgIGUudGltZVN0YW1wID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9KVxuICAgIH1cbiAgKTtcblxuICBkZWZpbmVQcm9wZXJ0aWVzKFxuICAgIHdpbmRvdy5XaW5kb3cucHJvdG90eXBlLFxuICAgIHtcbiAgICAgIGdldENvbXB1dGVkU3R5bGU6IHZhbHVlRGVzYyhmdW5jdGlvbigpe1xuXG4gICAgICAgIHZhciAvLyBwYXJ0aWFsbHkgZ3JhYmJlZCBmcm9tIGpRdWVyeSBhbmQgRGVhbidzIGhhY2tcbiAgICAgICAgICBub3RwaXhlbCA9IC9eKD86WystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpKSg/IXB4KVthLXolXSskLyxcbiAgICAgICAgICBwb3NpdGlvbiA9IC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxcbiAgICAgICAgICByZSA9IC9cXC0oW2Etel0pL2csXG4gICAgICAgICAgcGxhY2UgPSBmdW5jdGlvbiAobWF0Y2gsICQxKSB7XG4gICAgICAgICAgICByZXR1cm4gJDEudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIDtcblxuICAgICAgICBmdW5jdGlvbiBDb21wdXRlZFN0eWxlKF8pIHtcbiAgICAgICAgICB0aGlzLl8gPSBfO1xuICAgICAgICB9XG5cbiAgICAgICAgQ29tcHV0ZWRTdHlsZS5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBlbCA9IHRoaXMuXyxcbiAgICAgICAgICAgIHN0eWxlID0gZWwuc3R5bGUsXG4gICAgICAgICAgICBjdXJyZW50U3R5bGUgPSBlbC5jdXJyZW50U3R5bGUsXG4gICAgICAgICAgICBydW50aW1lU3R5bGUgPSBlbC5ydW50aW1lU3R5bGUsXG4gICAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgcnRMZWZ0XG4gICAgICAgICAgO1xuICAgICAgICAgIGlmIChuYW1lID09ICdvcGFjaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlLm9wYWNpdHkgfHwgJzEnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuYW1lID0gKG5hbWUgPT09ICdmbG9hdCcgPyAnc3R5bGUtZmxvYXQnIDogbmFtZSkucmVwbGFjZShyZSwgcGxhY2UpO1xuICAgICAgICAgIHJlc3VsdCA9IGN1cnJlbnRTdHlsZSA/IGN1cnJlbnRTdHlsZVtuYW1lXSA6IHN0eWxlW25hbWVdO1xuICAgICAgICAgIGlmIChub3RwaXhlbC50ZXN0KHJlc3VsdCkgJiYgIXBvc2l0aW9uLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIGxlZnQgPSBzdHlsZS5sZWZ0O1xuICAgICAgICAgICAgcnRMZWZ0ID0gcnVudGltZVN0eWxlICYmIHJ1bnRpbWVTdHlsZS5sZWZ0O1xuICAgICAgICAgICAgaWYgKHJ0TGVmdCkge1xuICAgICAgICAgICAgICBydW50aW1lU3R5bGUubGVmdCA9IGN1cnJlbnRTdHlsZS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3R5bGUubGVmdCA9IG5hbWUgPT09ICdmb250U2l6ZScgPyAnMWVtJyA6IHJlc3VsdDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHN0eWxlLnBpeGVsTGVmdCArICdweCc7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIGlmIChydExlZnQpIHtcbiAgICAgICAgICAgICAgcnVudGltZVN0eWxlLmxlZnQgPSBydExlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8qanNoaW50IGVxbnVsbDp0cnVlICovXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PSBudWxsID9cbiAgICAgICAgICAgIHJlc3VsdCA6ICgocmVzdWx0ICsgJycpIHx8ICdhdXRvJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdW5zdXBwb3J0ZWRcbiAgICAgICAgZnVuY3Rpb24gUHNldWRvQ29tcHV0ZWRTdHlsZSgpIHt9XG4gICAgICAgIFBzZXVkb0NvbXB1dGVkU3R5bGUucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbCwgcHNldWRvKSB7XG4gICAgICAgICAgcmV0dXJuIHBzZXVkbyA/XG4gICAgICAgICAgICBuZXcgUHNldWRvQ29tcHV0ZWRTdHlsZShlbCkgOlxuICAgICAgICAgICAgbmV3IENvbXB1dGVkU3R5bGUoZWwpO1xuICAgICAgICB9O1xuXG4gICAgICB9KCkpLFxuXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgc2VsZiA9IHdpbmRvdyxcbiAgICAgICAgICBvbnR5cGUgPSAnb24nICsgdHlwZSxcbiAgICAgICAgICBoYW5kbGVyc1xuICAgICAgICA7XG4gICAgICAgIGlmICghc2VsZltvbnR5cGVdKSB7XG4gICAgICAgICAgc2VsZltvbnR5cGVdID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbkV2ZW50TG9vcChzZWxmLCB2ZXJpZnkoc2VsZiwgZSksIGhhbmRsZXJzLCBmYWxzZSkgJiYgdW5kZWZpbmVkO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMgPSBzZWxmW29udHlwZV1bU0VDUkVUXSB8fCAoXG4gICAgICAgICAgc2VsZltvbnR5cGVdW1NFQ1JFVF0gPSBbXVxuICAgICAgICApO1xuICAgICAgICBpZiAoZmluZChoYW5kbGVycywgaGFuZGxlcikgPCAwKSB7XG4gICAgICAgICAgaGFuZGxlcnNbY2FwdHVyZSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgZGlzcGF0Y2hFdmVudDogdmFsdWVEZXNjKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSB3aW5kb3dbJ29uJyArIGUudHlwZV07XG4gICAgICAgIHJldHVybiBtZXRob2QgPyBtZXRob2QuY2FsbCh3aW5kb3csIGUpICE9PSBmYWxzZSAmJiAhZS5kZWZhdWx0UHJldmVudGVkIDogdHJ1ZTtcbiAgICAgIH0pLFxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogdmFsdWVEZXNjKGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyLCBjYXB0dXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyB0eXBlLFxuICAgICAgICAgIGhhbmRsZXJzID0gKHdpbmRvd1tvbnR5cGVdIHx8IE9iamVjdClbU0VDUkVUXSxcbiAgICAgICAgICBpID0gaGFuZGxlcnMgPyBmaW5kKGhhbmRsZXJzLCBoYW5kbGVyKSA6IC0xXG4gICAgICAgICA7XG4gICAgICAgIGlmICgtMSA8IGkpIGhhbmRsZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIH0pLFxuICAgICAgcGFnZVhPZmZzZXQ6IHtnZXQ6IGdldHRlcignc2Nyb2xsTGVmdCcpfSxcbiAgICAgIHBhZ2VZT2Zmc2V0OiB7Z2V0OiBnZXR0ZXIoJ3Njcm9sbFRvcCcpfSxcbiAgICAgIHNjcm9sbFg6IHtnZXQ6IGdldHRlcignc2Nyb2xsTGVmdCcpfSxcbiAgICAgIHNjcm9sbFk6IHtnZXQ6IGdldHRlcignc2Nyb2xsVG9wJyl9LFxuICAgICAgaW5uZXJXaWR0aDoge2dldDogZ2V0dGVyKCdjbGllbnRXaWR0aCcpfSxcbiAgICAgIGlubmVySGVpZ2h0OiB7Z2V0OiBnZXR0ZXIoJ2NsaWVudEhlaWdodCcpfVxuICAgIH1cbiAgKTtcblxuICB3aW5kb3cuSFRNTEVsZW1lbnQgPSB3aW5kb3cuRWxlbWVudDtcblxuICAoZnVuY3Rpb24gKHN0eWxlU2hlZXRzLCBIVE1MNUVsZW1lbnQsIGkpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgSFRNTDVFbGVtZW50Lmxlbmd0aDsgaSsrKSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KEhUTUw1RWxlbWVudFtpXSk7XG4gICAgaWYgKCFzdHlsZVNoZWV0cy5sZW5ndGgpIGRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoJycpO1xuICAgIHN0eWxlU2hlZXRzWzBdLmFkZFJ1bGUoSFRNTDVFbGVtZW50LmpvaW4oJywnKSwgJ2Rpc3BsYXk6YmxvY2s7Jyk7XG4gIH0oZG9jdW1lbnQuc3R5bGVTaGVldHMsIFsnaGVhZGVyJywgJ25hdicsICdzZWN0aW9uJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnZm9vdGVyJ10pKTtcbn0odGhpcy53aW5kb3cgfHwgZ2xvYmFsKSk7IiwiLy9cbi8vIHJlcXVlc3RBbmltYXRpb25GcmFtZSBwb2x5ZmlsbCBieSBFcmlrIE3DtmxsZXIuXG4vLyAgV2l0aCBmaXhlcyBmcm9tIFBhdWwgSXJpc2ggYW5kIFRpbm8gWmlqZGVsXG4vL1xuLy8gIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXG4vLyAgaHR0cDovL215Lm9wZXJhLmNvbS9lbW9sbGVyL2Jsb2cvMjAxMS8xMi8yMC9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWVyLWFuaW1hdGluZ1xuLy9cbi8vICBNSVQgbGljZW5zZVxuLy9cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgbGFzdFRpbWUgPSAwO1xuICAgIHZhciB2ZW5kb3JzID0gWyd3ZWJraXQnLCAnbW96J107XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArICdSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID1cbiAgICAgICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ10gfHwgd2luZG93W3ZlbmRvcnNbeF0gKyAnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgfVxuXG4gICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuICAgICAgICAgICAgfSwgdGltZVRvQ2FsbCk7XG4gICAgICAgICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcbiAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfTtcblxuICAgIGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKVxuICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgICAgfTtcbn0oKSk7IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkuYXV0aCB7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKCkge1xuICAgICAgICByZXR1cm4gYXBpLnJlcXVlc3QoXCJhdXRoL3ZhbGlkYXRlXCIpO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmFwaS5zZXR0aW5ncyB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5nc0Zyb21BUEkge1xuICAgICAgICBFbmFibGVTaGFyaW5nOiBib29sZWFuO1xuICAgICAgICBTdXNwZW5zaW9uUmFuZ2VzOiB7XG4gICAgICAgICAgICBbc3R5bGVUeXBlRHJpdmVUeXBlOnN0cmluZ106e1xuICAgICAgICAgICAgICAgIE1pbjogbnVtYmVyLFxuICAgICAgICAgICAgICAgIE1heDogbnVtYmVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFVzZVJhd1RpcmVEZXNjcmlwdGlvbjogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBsZXQgZGVmYXVsdFNldHRpbmdzOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSSA9IHtcbiAgICAgICAgRW5hYmxlU2hhcmluZzogdHJ1ZSxcbiAgICAgICAgU3VzcGVuc2lvblJhbmdlczoge1xuICAgICAgICAgICAgRGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIE1pbjogLTQsXG4gICAgICAgICAgICAgICAgTWF4OiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVHJ1Y2s0V0Q6IHtcbiAgICAgICAgICAgICAgICBNaW46IC00LFxuICAgICAgICAgICAgICAgIE1heDogNFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFZhbjRXRDoge1xuICAgICAgICAgICAgICAgIE1pbjogLTQsXG4gICAgICAgICAgICAgICAgTWF4OiA0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFVzZVJhd1RpcmVEZXNjcmlwdGlvbjogZmFsc2VcbiAgICB9O1xuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldFNldHRpbmdzKCk6UmlkZVN0eWxlclByb21pc2U8UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwib3JnYW5pemF0aW9uL2dldHNldHRpbmdzXCIsIHtcbiAgICAgICAgICAgIEtleXM6IFtcbiAgICAgICAgICAgICAgICAnRU5BQkxFX1NIQVJJTkcnLFxuICAgICAgICAgICAgICAgICdTVVNQRU5TSU9OX1JBTkdFUycsXG4gICAgICAgICAgICAgICAgJ1JBV1RJUkVERVNDJ1xuICAgICAgICAgICAgXVxuICAgICAgICB9KSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgbGV0IHNldHRpbmdzID0gcmVzcG9uc2UuU2V0dGluZ3M7XG5cbiAgICAgICAgICAgIGlmICghc2V0dGluZ3MpIHJldHVybiBkZWZhdWx0U2V0dGluZ3M7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgRW5hYmxlU2hhcmluZzogcGFyc2VCb29sZWFuKHNldHRpbmdzW1wiRU5BQkxFX1NIQVJJTkdcIl0gfHwgZGVmYXVsdFNldHRpbmdzLkVuYWJsZVNoYXJpbmcpLFxuICAgICAgICAgICAgICAgIFN1c3BlbnNpb25SYW5nZXM6IHBhcnNlU3VzcGVuc2lvblJhbmdlcyhzZXR0aW5nc1tcIlNVU1BFTlNJT05fUkFOR0VTXCJdKSxcbiAgICAgICAgICAgICAgICBVc2VSYXdUaXJlRGVzY3JpcHRpb246IHBhcnNlQm9vbGVhbihzZXR0aW5nc1tcIlJBV1RJUkVERVNDXCJdIHx8IGRlZmF1bHRTZXR0aW5ncy5Vc2VSYXdUaXJlRGVzY3JpcHRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VCb29sZWFuKGJvb2xlYW46c3RyaW5nfGJvb2xlYW4pOmJvb2xlYW4ge1xuICAgICAgICAvLyBOb3QgYSBzdHJpbmcsIG9yIGFuIGVtcHR5IHN0cmluZywgcmV0dXJuIHRydWUgb3IgZmFsc2VcbiAgICAgICAgaWYgKHR5cGVvZiBib29sZWFuICE9PSAnc3RyaW5nJyB8fCAhYm9vbGVhbikgcmV0dXJuICEhYm9vbGVhbjtcblxuICAgICAgICBsZXQgZmlyc3RDaGFyID0gYm9vbGVhblswXTtcblxuICAgICAgICAvLyBUcnVlIGlzOiB0aGUgZmlyc3QgY2hhciBiZWluZyB1cHBlcmNhc2UvbG93ZXJjYXNlIFQgb3IgWVxuICAgICAgICBpZiAoZmlyc3RDaGFyID09PSAneScgfHwgZmlyc3RDaGFyID09PSAnWScgfHwgZmlyc3RDaGFyID09PSAndCcgfHwgZmlyc3RDaGFyID09PSAnVCcpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIC8vIEZhbHNlIGlzIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHBhcnNlU3VzcGVuc2lvblJhbmdlcyhzdXNwZW5zaW9uUmFuZ2VzU2V0dGluZzpzdHJpbmcpOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSVtcIlN1c3BlbnNpb25SYW5nZXNcIl0ge1xuICAgICAgICBpZiAoIXN1c3BlbnNpb25SYW5nZXNTZXR0aW5nKSByZXR1cm4gZGVmYXVsdFNldHRpbmdzLlN1c3BlbnNpb25SYW5nZXM7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VzOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSVtcIlN1c3BlbnNpb25SYW5nZXNcIl0gPSBKU09OLnBhcnNlKHN1c3BlbnNpb25SYW5nZXNTZXR0aW5nKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN1c3BlbnNpb25SYW5nZXM7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0U2V0dGluZ3MuU3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc3t9XG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3NLZXlUb2tlbiBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5ncyB7XG4gICAgICAgIHRva2VuPzpzdHJpbmc7XG4gICAgICAgIGtleT86c3RyaW5nO1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXIgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3Mge1xuICAgICAgICB1c2VybmFtZTogc3RyaW5nO1xuICAgICAgICBwYXNzd29yZDogc3RyaW5nO1xuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgYXBpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemUgdGhlIFJpZGVTdHlsZXIgQVBJIGJ5IHBhc3NpbmcgaW4gYSB1c2VyL3Bhc3N3b3JkIGNvbWJpbmF0aW9uLCBhIHVzZXIgdG9rZW4sIG9yIGEga2V5LlxuICAgICAgICAgKiBAcGFyYW0gc2V0dGluZ3MgVGhlIEFQSSBpbml0aWFsaXphdGlvbiBzZXR0aW5nc1xuICAgICAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCAob3IgcmVqZWN0ZWQpIHdoZW4gdGhlIEFQSSBpcyBhdXRoZW50aWNhdGVkIChvciBmYWlscyBhdXRoZW50aWNhdGlvbilcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3NLZXlUb2tlbnxSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3NVc2VyKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICAvLyBJZiBhdXRoZW50aWNhdGlvbiBpbmZvcm1hdGlvbiB3YXMgcGFzc2VkIGluLCBsZXQncyB1c2UgdGhhdFxuICAgICAgICAgICAgaWYgKHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCd1c2VybmFtZScgaW4gc2V0dGluZ3MgJiYgJ3Bhc3N3b3JkJyBpbiBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbiB1c2luZyBhIHVzZXJuYW1lIGFuZCBwYXNzd29yZFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncyA9IHNldHRpbmdzIGFzIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgcmlkZXN0eWxlci5hdXRoLnN0YXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VybmFtZTogc2V0dGluZ3MudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFzc3dvcmQ6IHNldHRpbmdzLnBhc3N3b3JkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlN1Y2Nlc3MpIGF1dGhlbnRpY2F0ZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYXV0aGVudGljYXRlZC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRVUkwoKVxuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGNhbGxpbmcgdmFsaWRhdGUgYmVsb3dcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3Rva2VuJyBpbiBzZXR0aW5ncyB8fCAna2V5JyBpbiBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbiB1c2luZyBhIGtleSBvciB0b2tlblxuICAgICAgICAgICAgICAgICAgICByaWRlc3R5bGVyLmF1dGguc2V0KHNldHRpbmdzIGFzIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHRoZSB1c2VyJ3Mga2V5IG9yIHRva2VuXG4gICAgICAgICAgICBhdXRoLnZhbGlkYXRlKClcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHJpZGVzdHlsZXIuYWpheC51cmwoJycsIHVuZGVmaW5lZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKC9cXC9hcGktYWxwaGFcXC4vaS50ZXN0KHVybCkpIGVudmlyb25tZW50ID0gRW52aXJvbm1lbnQuQWxwaGE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKC9cXC9hcGktYmV0YVxcLi9pLnRlc3QodXJsKSkgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5CZXRhO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgvXFwvYXBpXFwuL2kudGVzdCh1cmwpKSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50LkxpdmU7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5PdGhlcjtcblxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IGF1dGhlbnRpY2F0ZWQucmVqZWN0KCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBsZXQgYXV0aGVudGljYXRlZCA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZC5zdGF0ZSgpID09PSByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlU3RhdGUuUmVzb2x2ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGFmdGVyQXV0aGVudGljYXRlZChjYWxsYmFjazogRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQoKSkgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGVsc2UgYXV0aGVudGljYXRlZC5kb25lKCgpID0+IGNhbGxiYWNrKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHJlcXVlc3Q8QWN0aW9uIGV4dGVuZHMga2V5b2YgcmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVzcG9uc2VNYXBwaW5nPihhY3Rpb246QWN0aW9uLCBkYXRhPzpyaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXF1ZXN0TWFwcGluZ1tBY3Rpb25dKSA6IFJpZGVTdHlsZXJQcm9taXNlPHJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlc3BvbnNlTWFwcGluZ1tBY3Rpb25dPiB7XG4gICAgICAgICAgICB0eXBlIFJlc3BvbnNlID0gcmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVzcG9uc2VNYXBwaW5nW0FjdGlvbl07XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxSZXNwb25zZT4oKTtcbiAgICAgICAgICAgICAgICByaWRlc3R5bGVyLmFqYXguc2VuZDxBY3Rpb24+KHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5TdWNjZXNzKSBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBwcm9taXNlLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFVSTDxBY3Rpb24gZXh0ZW5kcyByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElFbmRwb2ludD4oYWN0aW9uOkFjdGlvbiwgZGF0YT86cmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVxdWVzdE1hcHBpbmdbQWN0aW9uXSkgOiBzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHJpZGVzdHlsZXIuYWpheC51cmwoYWN0aW9uLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBlbnVtIEVudmlyb25tZW50IHtcbiAgICAgICAgICAgIEFscGhhLFxuICAgICAgICAgICAgQmV0YSxcbiAgICAgICAgICAgIExpdmUsXG4gICAgICAgICAgICBPdGhlclxuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGxldCBlbnZpcm9ubWVudDpFbnZpcm9ubWVudDtcbiAgICB9XG59IixudWxsLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogQSBtYXBwaW5nIG9mIGV2ZW50cyB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQsIG1hcHBlZCB0byB0aGVpciBldmVudCBwYXJhbWV0ZXIgdHlwZVxuICAgICAqL1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nIHtcbiAgICAgICAgXCJzdGF0ZS1jaGFuZ2VkXCI6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50O1xuICAgICAgICBcImluaXRpYWxpemVkXCI6IHVuZGVmaW5lZDtcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdGVkXCI6IFJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwuU2VsZWN0ZWRWZWhpY2xlRGF0YTtcbiAgICAgICAgXCJtb2RhbC1zaG93XCI6IHsgbW9kYWw6IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIH07XG4gICAgICAgIFwibW9kYWwtaGlkZVwiOiB7IG1vZGFsOiBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCB9O1xuICAgICAgICBcInJlc2l6ZVwiOiB1bmRlZmluZWQ7XG4gICAgICAgIFwicmVzaXplZFwiOiB1bmRlZmluZWQ7XG4gICAgICAgIFwiYnJlYWtwb2ludC1jaGFuZ2VkXCI6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHlsZXMuQnJlYWtwb2ludDtcbiAgICAgICAgXCJ2ZWhpY2xlLWRlc2NyaXB0aW9uLWxvYWRlZFwiOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgXCJwb3BTdGF0ZVwiOiB1bmRlZmluZWQ7IFxuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlRXZlbnRIYW5kbGVyPERhdGFUeXBlID0gYW55PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZXYgVGhlIGV2ZW50IGRhdGFcbiAgICAgICAgICogQHJldHVybiAgIGZhbHNlIHRvIGNhbmNlbCB0aGUgZXZlbnQgc3RvcCBwcm9jZXNzaW5nIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgKGV2OiBEYXRhVHlwZSk6IGJvb2xlYW58dm9pZFxuICAgIH07XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIERlYnVnQ2FsbGJhY2sge1xuICAgICAgICA8SyBleHRlbmRzIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZz4oZXZlbnROYW1lOkssIGV2ZW50RGF0YTogUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdLCBldmVudEhhbmRsZXJzOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXJbXSk6dm9pZDtcbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyIHtcbiAgICAgICAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiB7W2V2ZW50TmFtZSBpbiBrZXlvZiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmddPzpSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXJbXX0gPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTGlzdGVuIGZvciBhbiBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gZm9yXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayAgVGhlIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWRcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBvbjxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6IEssIGNhbGxiYWNrOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXI8UmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdPik6IHZvaWQge1xuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50SGFuZGxlcnMgPT09IGZhbHNlKSB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIGFuIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHN0b3AgbGlzdGVuaW5nIHRvXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdGhhdCB3YXMgb3JpZ2luYWxseSByZWdpc3RlcmVkXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgb2ZmPEsgZXh0ZW5kcyBrZXlvZiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmc+KGV2ZW50TmFtZTogSywgY2FsbGJhY2s6IFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50SGFuZGxlcjxSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10+KTogdm9pZCB7XG4gICAgICAgICAgICBpZiAoZXZlbnROYW1lIGluIHRoaXMuZXZlbnRIYW5kbGVycyA9PT0gZmFsc2UpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdID0gQXJyYXlIZWxwZXIucmVtb3ZlKHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdLCBjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciBhbiBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byB0cmlnZ2VyXG4gICAgICAgICAqIEBwYXJhbSBldiAgICAgICAgVGhlIGRhdGEgdG8gc2VuZCB0byB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICogQHJldHVybnMgICAgICAgICBmYWxzZSwgaWYgdGhlIGV2ZW50IGhhcyBiZWVuIGNhbmNlbGxlZCBieSBhIGhhbmRsZXIsIG90aGVyd2lzZSB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgdHJpZ2dlcjxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6IEssIGV2OiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10pOiBib29sZWFuIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdDYWxsYmFjayhldmVudE5hbWUsIGV2LCB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSB8fCBbXSk7XG5cbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgaW4gdGhpcy5ldmVudEhhbmRsZXJzID09PSBmYWxzZSkgcmV0dXJuIHRydWU7XG4gICAgICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgZXZlbnRIYW5kbGVyIG9mIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbG93cyB0aGUgZGVmaW5pdGlvbiBvZiBhIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGRlYnVnZ2luZyB0cmlnZ2VyZWQgZXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgZGVidWdDYWxsYmFjazogRGVidWdDYWxsYmFjaztcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzIHtcbiAgICBleHBvcnQgdHlwZSBGaWx0ZXJQcm92aWRlclR5cGUgPSAndGlyZSd8J3doZWVsJ3wnZ2xvYmFsJztcblxuICAgIGltcG9ydCBXaGVlbEZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5XaGVlbEZpbHRlck1vZGVsO1xuICAgIGltcG9ydCBUaXJlRmlsdGVyTW9kZWwgPSByaWRlc3R5bGVyLlJlcXVlc3RzLlRpcmVGaWx0ZXJNb2RlbDtcbiAgICBleHBvcnQgdHlwZSBHbG9iYWxGaWx0ZXJNb2RlbCA9IFdoZWVsRmlsdGVyTW9kZWwgJiBUaXJlRmlsdGVyTW9kZWw7XG5cbiAgICBpbXBvcnQgRml0bWVudEZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5GaXRtZW50RmlsdGVyTW9kZWw7XG5cbiAgICBleHBvcnQgY2xhc3MgRmlsdGVyQ29udHJvbGxlciB7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBnbG9iYWxGaWx0ZXJzOkdsb2JhbEZpbHRlclByb3ZpZGVyO1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgdGlyZUZpbHRlcnM6VGlyZUZpbHRlclByb3ZpZGVyO1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgd2hlZWxGaWx0ZXJzOldoZWVsRmlsdGVyUHJvdmlkZXI7XG5cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMgPSBuZXcgR2xvYmFsRmlsdGVyUHJvdmlkZXIoKTtcbiAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMgPSBuZXcgVGlyZUZpbHRlclByb3ZpZGVyKHRoaXMuZ2xvYmFsRmlsdGVycyk7XG4gICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycyA9IG5ldyBXaGVlbEZpbHRlclByb3ZpZGVyKHRoaXMuZ2xvYmFsRmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZSh2ZWhpY2xlOlZlaGljbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXJzKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlKHZlaGljbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBjbGVhckZpbHRlcnModHJpZ2dlckNoYW5nZT86IGJvb2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVmVoaWNsZSB7XG4gICAgICAgIHZlaGljbGVDb25maWd1cmF0aW9uSUQ6IHN0cmluZztcbiAgICAgICAgdmVoaWNsZVRpcmVPcHRpb25JRDogc3RyaW5nO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVmVoaWNsZURlc2NyaXB0aW9uIHtcbiAgICAgICAgSGFzU2lkZUltYWdlOiBib29sZWFuO1xuICAgICAgICBIYXNBbmdsZWRJbWFnZTogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIEZpbHRlclZhbHVlIHtcbiAgICAgICAga2V5OiBzdHJpbmc7XG4gICAgICAgIHZhbHVlOiBhbnk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRmlsdGVyPFZhbHVlVHlwZSwgRmlsdGVyVHlwZT4ge1xuICAgICAgICBrZXk6IHN0cmluZztcbiAgICAgICAgbGFiZWw/OiBzdHJpbmc7XG4gICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbD86IHN0cmluZztcbiAgICAgICAgdmlzaWJsZT86IGJvb2xlYW47XG5cbiAgICAgICAgcmV0cmlldmVPcHRpb25zPzogKGdsb2JhbEZpbHRlcnM6R2xvYmFsRmlsdGVyTW9kZWwpID0+IFJpZGVTdHlsZXJQcm9taXNlPElGaWx0ZXJPcHRpb248VmFsdWVUeXBlPltdLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XG4gICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM/OiAoZmlsdGVyczpGaWx0ZXJUeXBlKSA9PiBhbnk7XG4gICAgICAgIGFwcGx5OiAoZmlsdGVyczpGaWx0ZXJUeXBlLCB2YWx1ZTpWYWx1ZVR5cGUpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRmlsdGVyT3B0aW9uPFZhbHVlVHlwZT4ge1xuICAgICAgICBsYWJlbDogc3RyaW5nO1xuICAgICAgICB2YWx1ZTogVmFsdWVUeXBlO1xuICAgIH1cblxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWx0ZXJQcm92aWRlcjxGaWx0ZXJUeXBlIGV4dGVuZHMgb2JqZWN0PiB7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSB0eXBlOkZpbHRlclByb3ZpZGVyVHlwZTtcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZpbHRlck9wdGlvbnM6SUZpbHRlcjxhbnksIEZpbHRlclR5cGU+W107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgYXBwbGllZCBmaWx0ZXJzXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudEZpbHRlcnM6RmlsdGVyVHlwZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogT3ZlcnJpZGFibGUgaW4gZGVyaXZpbmcgY2xhc3NlcyB0byBzZXQgYmFzZSBmaWx0ZXJzIGZvciByZXF1ZXN0c1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGJhc2VGaWx0ZXJzOkZpbHRlclR5cGU7XG4gICAgICAgIFxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZ2xvYmFsRmlsdGVyUHJvdmlkZXI6IEdsb2JhbEZpbHRlclByb3ZpZGVyO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHR5cGU6RmlsdGVyUHJvdmlkZXJUeXBlLCBnbG9iYWxGaWx0ZXJQcm92aWRlcjpHbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fSBhcyBGaWx0ZXJUeXBlO1xuXG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID0gZ2xvYmFsRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc3BlY2lmaWVkLCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBlYWNoIHRpbWUgdGhlIGZpbHRlcnMgY2hhbmdlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgb25GaWx0ZXJzQ2hhbmdlZDooZmlsdGVyczpGaWx0ZXJUeXBlKSA9PiB2b2lkO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlnZ2VyIHRoZSBmaWx0ZXIgY2hhbmdlZCBjYWxsYmFja1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIHRyaWdnZXJGaWx0ZXJDaGFuZ2UoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25GaWx0ZXJzQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmlsdGVyc0NoYW5nZWQodGhpcy5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBmaWx0ZXIgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGZpbHRlciB2YWx1ZXMgc2V0LCBcbiAgICAgICAgICogd2l0aG91dCBhY3R1YWxseSBzZXR0aW5nIHRoZW1cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBwcmV2aWV3RmlsdGVycyhmaWx0ZXJWYWx1ZXM6RmlsdGVyVmFsdWVbXSk6RmlsdGVyVHlwZSB7XG4gICAgICAgICAgICBjb25zdCBnbG9iYWxGaWx0ZXJzOkZpbHRlclR5cGUgPSAodGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA/IFxuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpIDogXG4gICAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICkgYXMgRmlsdGVyVHlwZTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcnM6RmlsdGVyVHlwZSA9IHt9IGFzIEZpbHRlclR5cGU7XG4gICAgICAgICAgICBjb25zdCBiYXNlRmlsdGVyczpGaWx0ZXJUeXBlID0gdGhpcy5iYXNlRmlsdGVycztcblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWx0ZXJWYWx1ZSBvZiBmaWx0ZXJWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7a2V5LCB2YWx1ZX0gPSBmaWx0ZXJWYWx1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKGtleSwgdmFsdWUsIGZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0SGVscGVyLmFzc2lnbjxGaWx0ZXJUeXBlPihcbiAgICAgICAgICAgICAgICB7fSBhcyBGaWx0ZXJUeXBlLFxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMsIFxuICAgICAgICAgICAgICAgIGdsb2JhbEZpbHRlcnMgYXMgRmlsdGVyVHlwZSwgXG4gICAgICAgICAgICAgICAgZmlsdGVyc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYXBwbGllZCBmaWx0ZXJzXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgZ2V0RmlsdGVycygpOkZpbHRlclR5cGUge1xuICAgICAgICAgICAgY29uc3QgZ2xvYmFsRmlsdGVyczpGaWx0ZXJUeXBlID0gKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgPyBcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6IFxuICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICApIGFzIEZpbHRlclR5cGU7XG5cbiAgICAgICAgICAgIHJldHVybiBPYmplY3RIZWxwZXIuYXNzaWduPEZpbHRlclR5cGU+KFxuICAgICAgICAgICAgICAgIHt9IGFzIEZpbHRlclR5cGUsXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlRmlsdGVycyxcbiAgICAgICAgICAgICAgICBnbG9iYWxGaWx0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0cmlldmUgdGhlIG9wdGlvbnMgZm9yIGEgZmlsdGVyXG4gICAgICAgICAqIEBwYXJhbSBmaWx0ZXIgVGhlIGZpbHRlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHJldHJpZXZlT3B0aW9uczxWYWx1ZVR5cGU+KGZpbHRlcjpJRmlsdGVyPFZhbHVlVHlwZSwgRmlsdGVyVHlwZT4pOlJpZGVTdHlsZXJQcm9taXNlPElGaWx0ZXJPcHRpb248VmFsdWVUeXBlPltdLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5yZXRyaWV2ZU9wdGlvbnModGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IGEgZmlsdGVyIG9wdGlvbiwgb24gYSBzcGVjaWZpYyBmaWx0ZXIgbW9kZWxcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleSB0byBhcHBseVxuICAgICAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGFwcGx5IHRvIHRoZSBmaWx0ZXJcbiAgICAgICAgICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlcnMgdG8gYXBwbHkgdGhlbSB0b1xuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldEZpbHRlcjxWYWx1ZVR5cGUgPSBhbnk+KGtleTpzdHJpbmcsIHZhbHVlOlZhbHVlVHlwZSwgZmlsdGVyczpGaWx0ZXJUeXBlID0gdGhpcy5jdXJyZW50RmlsdGVycyk6dm9pZCB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSB0aGlzLmZpbmRGaWx0ZXJPcHRpb24oa2V5KTtcblxuICAgICAgICAgICAgaWYgKGZpbHRlck9wdGlvbikge1xuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbi5hcHBseShmaWx0ZXJzLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgZmlsdGVyIG9wdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBrZXlcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGZpbmRGaWx0ZXJPcHRpb24oa2V5OnN0cmluZyk6IElGaWx0ZXI8YW55LCBGaWx0ZXJUeXBlPiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiB0aGlzLmZpbHRlck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFwcGx5IGEgbGlzdCBvZiBzZWxlY3RlZCBmaWx0ZXIga2V5LXZhbHVlIHBhaXJzXG4gICAgICAgICAqIEBwYXJhbSBzZWxlY3RlZEZpbHRlcnMgQSBsaXN0IG9mIHNlbGVjdGVkIGZpbHRlciBrZXktdmFsdWUgcGFpcnMgdG8gYXBwbHlcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXJzKHNlbGVjdGVkRmlsdGVyczpGaWx0ZXJWYWx1ZVtdLCB0cmlnZ2VyQ2hhbmdlPzogYm9vbGVhbik6Ym9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFwcGx5IGEgZmlsdGVyXG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgZmlsdGVyIHRvIGFwcGx5XG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXBwbHkgdG8gdGhlIGZpbHRlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldEZpbHRlcnMoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIHRyaWdnZXJDaGFuZ2U/OmJvb2xlYW4pOmJvb2xlYW47XG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXJzKHNlbGVjdGVkRmlsdGVyc09yS2V5OkZpbHRlclZhbHVlW118c3RyaW5nLCB2YWx1ZT86YW55LCB0cmlnZ2VyQ2hhbmdlPzogYm9vbGVhbik6Ym9vbGVhbiB7XG4gICAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJzOkZpbHRlclR5cGUgPSB7fSBhcyBGaWx0ZXJUeXBlO1xuXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRGaWx0ZXJzOiBGaWx0ZXJWYWx1ZVtdO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGVkRmlsdGVyc09yS2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IFt7XG4gICAgICAgICAgICAgICAgICAgIGtleTogc2VsZWN0ZWRGaWx0ZXJzT3JLZXksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBzZWxlY3RlZEZpbHRlcnNPcktleTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHRyaWdnZXJDaGFuZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEZpbHRlciBvZiBzZWxlY3RlZEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7a2V5LCB2YWx1ZX0gPSBzZWxlY3RlZEZpbHRlcjtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKGtleSwgdmFsdWUsIG5ld0ZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3RmlsdGVycykge1xuICAgICAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsdGVyVmFsdWUgPSBuZXdGaWx0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXJWYWx1ZSA9IHRoaXMuY3VycmVudEZpbHRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJWYWx1ZSAhPT0gY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzW2tleV0gPSBuZXdGaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyaWdnZXJDaGFuZ2UgPT09ICd1bmRlZmluZWQnKSB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChoYXNDaGFuZ2VkICYmIHRyaWdnZXJDaGFuZ2UpIHRoaXMudHJpZ2dlckZpbHRlckNoYW5nZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRDb3VudChmaWx0ZXJzOkZpbHRlclR5cGUpOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+O1xuXG4gICAgICAgIHB1YmxpYyBjbGVhcih0cmlnZ2VyQ2hhbmdlOiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9IGFzIEZpbHRlclR5cGU7XG4gICAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSkgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5ID0gJ3ZlaGljbGUtY29uZmlnJztcbiAgICBleHBvcnQgY2xhc3MgR2xvYmFsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlcjxHbG9iYWxGaWx0ZXJNb2RlbD4ge1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZmlsdGVyT3B0aW9uczpJRmlsdGVyPGFueSwgR2xvYmFsRmlsdGVyTW9kZWw+W107XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBiYXNlRmlsdGVyczogR2xvYmFsRmlsdGVyTW9kZWwgPSB7XG4gICAgICAgICAgICBIYXNGaXRtZW50czogdHJ1ZSxcbiAgICAgICAgICAgIEhhc0NhdGFsb2dJbWFnZTogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoJ2dsb2JhbCcsIHVuZGVmaW5lZCk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zID0gW1xuICAgICAgICAgICAgICAgIC8vIFZlaGljbGVDb25maWd1cmF0aW9uICYgVmVoaWNsZVRpcmVPcHRpb25cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogdmVoaWNsZUNvbmZpZ0ZpbHRlcktleSxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZTpWZWhpY2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVDb25maWd1cmF0aW9uSUQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVRpcmVPcHRpb25JRFxuICAgICAgICAgICAgICAgICAgICAgICAgfSA9IHZlaGljbGU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlQ29uZmlndXJhdGlvbklEKSBmaWx0ZXJzLlZlaGljbGVDb25maWd1cmF0aW9uID0gdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlVGlyZU9wdGlvbklEKSBmaWx0ZXJzLlZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdnbG9iYWxXaGVlbCcsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZURlc2NyaXB0aW9uOlZlaGljbGVEZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSkgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSkgZmlsdGVycy5IYXNBbmdsZWRJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAqIEFwcGxpZXMgYSB2ZWhpY2xlIHNlbGVjdGlvbiB0byBhbGwgXG4gICAgICAgICogQHBhcmFtIHZlaGljbGUgVGhlIHZlaGljbGUgdG8gYXBwbHkgdG8gZmlsdGVyIHF1ZXJpZXNcbiAgICAgICAgKi9cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uOlZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICB0aGlzLnNldEZpbHRlcignZ2xvYmFsV2hlZWwnLCB2ZWhpY2xlRGVzY3JpcHRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZlaGljbGUodmVoaWNsZTpWZWhpY2xlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEZpbHRlcih2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5LCB2ZWhpY2xlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBnZXRDb3VudCgpOm5ldmVyIHtcbiAgICAgICAgICAgIC8vIFdlJ2xsIG5ldmVyIGNhbGwgZ2V0Q291bnQgb24gdGhlIEdsb2JhbEZpbHRlck1vZGVsXG4gICAgICAgICAgICB0aHJvdyAnQ2Fubm90IGNvdW50IEdsb2JhbEZpbHRlck1vZGVsJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBUaXJlRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlcjxUaXJlRmlsdGVyTW9kZWw+IHtcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZpbHRlck9wdGlvbnM6SUZpbHRlcjxhbnksIFRpcmVGaWx0ZXJNb2RlbD5bXTtcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGJhc2VGaWx0ZXJzOlRpcmVGaWx0ZXJNb2RlbCA9IHtcbiAgICAgICAgICAgIFJlcXVpcmVkRml0bWVudFJlc291cmNlVHlwZXM6IFtcbiAgICAgICAgICAgICAgICByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlRpcmVGaXRtZW50UmVzb3VyY2VUeXBlLkNhdGFsb2dcbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcjpHbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgc3VwZXIoJ3RpcmUnLCBnbG9iYWxGaWx0ZXJQcm92aWRlcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAvLyBCcmFuZFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdicmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYWxsLWJyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLWJyYW5kJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgQnJhbmRzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KCd0aXJlL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQnJhbmRzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuVGlyZUJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5UaXJlQnJhbmRJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlRpcmVCcmFuZCxcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB0aXJlQnJhbmRJRDpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuVGlyZUJyYW5kID0gdGlyZUJyYW5kSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnZmVhdHVyZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYW55LWZlYXR1cmVzJyksXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtbW9kZWwtYXR0cmlidXRlJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgndGlyZS9nZXRtb2RlbGF0dHJpYnV0ZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkF0dHJpYnV0ZXMsIGF0dHJpYnV0ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYXR0cmlidXRlLlRpcmVNb2RlbEF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXR0cmlidXRlLlRpcmVNb2RlbEF0dHJpYnV0ZUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuUmVxdWlyZWRUaXJlTW9kZWxBdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgYXR0cmlidXRlSUQ6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5SZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSA9IGF0dHJpYnV0ZUlEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBTcGVlZCBSYXRpbmdcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3BlZWQtcmF0aW5nJyksXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FueS1zcGVlZC1yYXRpbmdzJyksXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtc3BlZWQtcmF0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgndGlyZS9nZXRzcGVlZHJhdGluZ3MnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLlNwZWVkUmF0aW5ncywgYnJhbmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJyYW5kLlRpcmVTcGVlZFJhdGluZ0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuVGlyZVNwZWVkUmF0aW5nSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5TcGVlZFJhdGluZyxcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBzcGVlZFJhdGluZ0lEOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuU3BlZWRSYXRpbmcgPSBzcGVlZFJhdGluZ0lEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBnZXRDb3VudChmaWx0ZXJzOlRpcmVGaWx0ZXJNb2RlbCk6UmlkZVN0eWxlclByb21pc2U8bnVtYmVyLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcInRpcmUvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFdoZWVsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlcjxXaGVlbEZpbHRlck1vZGVsPiB7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmaWx0ZXJPcHRpb25zOklGaWx0ZXI8YW55LCBXaGVlbEZpbHRlck1vZGVsPltdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKGdsb2JhbEZpbHRlclByb3ZpZGVyOkdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICBzdXBlcignd2hlZWwnLCBnbG9iYWxGaWx0ZXJQcm92aWRlcik7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAvLyBCcmFuZFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdicmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYWxsLWJyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1icmFuZCcsXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IEJyYW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgnd2hlZWwvZ2V0YnJhbmRzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5CcmFuZHMsIGJyYW5kID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5XaGVlbEJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5XaGVlbEJyYW5kSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5XaGVlbEJyYW5kLFxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHdoZWVsQnJhbmRJRDpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuV2hlZWxCcmFuZCA9IHdoZWVsQnJhbmRJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gRmluaXNoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbmlzaGVzJyksXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1maW5pc2hlcycpLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1maW5pc2gnLFxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBmaW5pc2hlc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgnd2hlZWwvZ2V0ZmluaXNoZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBmaW5pc2hlcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheUhlbHBlci5tYXAocmVzcG9uc2UuRmluaXNoZXMsIGZpbmlzaENhdGVnb3J5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaW5pc2hDYXRlZ29yeS5XaGVlbEZpbmlzaENhdGVnb3J5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmaW5pc2hDYXRlZ29yeS5XaGVlbEZpbmlzaENhdGVnb3J5SURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5XaGVlbEZpbmlzaENhdGVnb3J5LFxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHdoZWVsRmluaXNoQ2F0ZWdvcnlJRDpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuV2hlZWxGaW5pc2hDYXRlZ29yeSA9IHdoZWVsRmluaXNoQ2F0ZWdvcnlJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gRGlhbWV0ZXJcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc2l6ZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYWxsLXNpemVzJyksXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLXNpemUnLFxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBkaWFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3doZWVsL2dldGRpYW1ldGVycycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGRpYW1ldGVycyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheUhlbHBlci5tYXAocmVzcG9uc2UuRGlhbWV0ZXJzLCBkaWFtZXRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBnZXRGaXRtZW50RmlsdGVyVmFsdWUoZmlsdGVycywgJ0RpYW1ldGVyJyksXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgZGlhbWV0ZXI6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMuRml0bWVudEZpbHRlcnMpIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlGaXRtZW50RmlsdGVyKGZpbHRlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaWFtZXRlcjogZGlhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlKSBmaWx0ZXJzLkhhc1NpZGVJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlKSBmaWx0ZXJzLkhhc0FuZ2xlZEltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoJ3doZWVsJywgdmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIHB1YmxpYyBnZXRDb3VudChmaWx0ZXJzOldoZWVsRmlsdGVyTW9kZWwpOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5Db3VudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Rml0bWVudEZpbHRlclZhbHVlPEZpdG1lbnRGaWx0ZXJLZXkgZXh0ZW5kcyBrZXlvZiBGaXRtZW50RmlsdGVyTW9kZWw+KGZpbHRlcnM6e0ZpdG1lbnRGaWx0ZXJzPzogRml0bWVudEZpbHRlck1vZGVsW119LCBrZXk6IEZpdG1lbnRGaWx0ZXJLZXkpOkZpdG1lbnRGaWx0ZXJNb2RlbFtGaXRtZW50RmlsdGVyS2V5XSB7XG4gICAgICAgIGZvciAoY29uc3QgZml0bWVudEZpbHRlciBvZiBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzIHx8IFtdKSB7XG4gICAgICAgICAgICBpZiAoZml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpdG1lbnRGaWx0ZXJba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgZml0bWVudEZpbHRlckdyb3VwS2V5ID0gXCJyaWRlc3R5bGVyLXNob3djYXNlLWZpbHRlcnNcIjtcbiAgICBmdW5jdGlvbiBhcHBseUZpdG1lbnRGaWx0ZXIoZmlsdGVyczp7Rml0bWVudEZpbHRlcnM/OiBGaXRtZW50RmlsdGVyTW9kZWxbXX0sIGZpdG1lbnRGaWx0ZXI6IEZpdG1lbnRGaWx0ZXJNb2RlbCkge1xuICAgICAgICBsZXQgZml0bWVudEZpbHRlcnMgPSBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzIHx8IFtdO1xuICAgICAgICBsZXQgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXA6Rml0bWVudEZpbHRlck1vZGVsO1xuXG4gICAgICAgIGZvciAoY29uc3QgYXBwbGllZEZpdG1lbnRGaWx0ZXIgb2YgZml0bWVudEZpbHRlcnMpIHtcbiAgICAgICAgICAgIGlmIChhcHBsaWVkRml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAgPSBhcHBsaWVkRml0bWVudEZpbHRlcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXApIHtcbiAgICAgICAgICAgIGZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPSBmaXRtZW50RmlsdGVyR3JvdXBLZXk7XG4gICAgICAgICAgICBmaXRtZW50RmlsdGVycy5wdXNoKGZpdG1lbnRGaWx0ZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBXZSd2ZSBtb2RpZmllZCB0aGUgYXJyYXkgc28gdXBkYXRlIHRoZSBhcnJheSBpbiB0aGUgZmlsdGVyc1xuICAgICAgICAgICAgZmlsdGVycy5GaXRtZW50RmlsdGVycyA9IGZpdG1lbnRGaWx0ZXJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0SGVscGVyLmFzc2lnbjxGaXRtZW50RmlsdGVyTW9kZWw+KGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwLCBmaXRtZW50RmlsdGVyKTtcbiAgICAgICAgICAgIGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwLkdyb3VwS2V5ID0gZml0bWVudEZpbHRlckdyb3VwS2V5O1xuICAgICAgICB9XG4gICAgfVxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIHZhciBmaWx0ZXJzO1xuICAgIChmdW5jdGlvbiAoZmlsdGVyc18xKSB7XG4gICAgICAgIGNsYXNzIEZpbHRlckNvbnRyb2xsZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzID0gbmV3IEdsb2JhbEZpbHRlclByb3ZpZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aXJlRmlsdGVycyA9IG5ldyBUaXJlRmlsdGVyUHJvdmlkZXIodGhpcy5nbG9iYWxGaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycyA9IG5ldyBXaGVlbEZpbHRlclByb3ZpZGVyKHRoaXMuZ2xvYmFsRmlsdGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRWZWhpY2xlKHZlaGljbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVycyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzLnNldFZlaGljbGUodmVoaWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzLnNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJGaWx0ZXJzKHRyaWdnZXJDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50aXJlRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJzXzEuRmlsdGVyQ29udHJvbGxlciA9IEZpbHRlckNvbnRyb2xsZXI7XG4gICAgICAgIGNsYXNzIEZpbHRlclByb3ZpZGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHR5cGUsIGdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA9IGdsb2JhbEZpbHRlclByb3ZpZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUcmlnZ2VyIHRoZSBmaWx0ZXIgY2hhbmdlZCBjYWxsYmFja1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmlnZ2VyRmlsdGVyQ2hhbmdlKCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkZpbHRlcnNDaGFuZ2VkID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRmlsdGVyc0NoYW5nZWQodGhpcy5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm5zIGEgZmlsdGVyIG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBmaWx0ZXIgdmFsdWVzIHNldCxcbiAgICAgICAgICAgICAqIHdpdGhvdXQgYWN0dWFsbHkgc2V0dGluZyB0aGVtXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByZXZpZXdGaWx0ZXJzKGZpbHRlclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZpbHRlcnMgPSAodGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpIDpcbiAgICAgICAgICAgICAgICAgICAge30pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlRmlsdGVycyA9IHRoaXMuYmFzZUZpbHRlcnM7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWx0ZXJWYWx1ZSBvZiBmaWx0ZXJWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgZmlsdGVycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5iYXNlRmlsdGVycywgZ2xvYmFsRmlsdGVycywgZmlsdGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhcHBsaWVkIGZpbHRlcnNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxGaWx0ZXJzID0gKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6XG4gICAgICAgICAgICAgICAgICAgIHt9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuYmFzZUZpbHRlcnMsIGdsb2JhbEZpbHRlcnMsIHRoaXMuY3VycmVudEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXRyaWV2ZSB0aGUgb3B0aW9ucyBmb3IgYSBmaWx0ZXJcbiAgICAgICAgICAgICAqIEBwYXJhbSBmaWx0ZXIgVGhlIGZpbHRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnMoZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5yZXRyaWV2ZU9wdGlvbnModGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgYSBmaWx0ZXIgb3B0aW9uLCBvbiBhIHNwZWNpZmljIGZpbHRlciBtb2RlbFxuICAgICAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleSB0byBhcHBseVxuICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBhcHBseSB0byB0aGUgZmlsdGVyXG4gICAgICAgICAgICAgKiBAcGFyYW0gZmlsdGVycyBUaGUgZmlsdGVycyB0byBhcHBseSB0aGVtIHRvXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNldEZpbHRlcihrZXksIHZhbHVlLCBmaWx0ZXJzID0gdGhpcy5jdXJyZW50RmlsdGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlck9wdGlvbiA9IHRoaXMuZmluZEZpbHRlck9wdGlvbihrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uLmFwcGx5KGZpbHRlcnMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybnMgdGhlIGZpbHRlciBvcHRpb24gZm9yIHRoZSBzcGVjaWZpZWQga2V5XG4gICAgICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBmaWx0ZXIga2V5XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZpbmRGaWx0ZXJPcHRpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWx0ZXIgb2YgdGhpcy5maWx0ZXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIua2V5ID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldEZpbHRlcnMoc2VsZWN0ZWRGaWx0ZXJzT3JLZXksIHZhbHVlLCB0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEZpbHRlcnM7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RlZEZpbHRlcnNPcktleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzID0gW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHNlbGVjdGVkRmlsdGVyc09yS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBzZWxlY3RlZEZpbHRlcnNPcktleTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdGVkRmlsdGVyIG9mIHNlbGVjdGVkRmlsdGVycykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IHNlbGVjdGVkRmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcihrZXksIHZhbHVlLCBuZXdGaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXdGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbHRlclZhbHVlID0gbmV3RmlsdGVyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbHRlclZhbHVlID0gdGhpcy5jdXJyZW50RmlsdGVyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZpbHRlclZhbHVlICE9PSBjdXJyZW50RmlsdGVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzW2tleV0gPSBuZXdGaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRyaWdnZXJDaGFuZ2UgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCAmJiB0cmlnZ2VyQ2hhbmdlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJGaWx0ZXJDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyKHRyaWdnZXJDaGFuZ2UgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJGaWx0ZXJDaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJzXzEuRmlsdGVyUHJvdmlkZXIgPSBGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgY29uc3QgdmVoaWNsZUNvbmZpZ0ZpbHRlcktleSA9ICd2ZWhpY2xlLWNvbmZpZyc7XG4gICAgICAgIGNsYXNzIEdsb2JhbEZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoJ2dsb2JhbCcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlRmlsdGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgSGFzRml0bWVudHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIEhhc0NhdGFsb2dJbWFnZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVoaWNsZUNvbmZpZ3VyYXRpb24gJiBWZWhpY2xlVGlyZU9wdGlvblxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHZlaGljbGVDb25maWdGaWx0ZXJLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7IHZlaGljbGVDb25maWd1cmF0aW9uSUQsIHZlaGljbGVUaXJlT3B0aW9uSUQgfSA9IHZlaGljbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVDb25maWd1cmF0aW9uSUQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuVmVoaWNsZUNvbmZpZ3VyYXRpb24gPSB2ZWhpY2xlQ29uZmlndXJhdGlvbklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlVGlyZU9wdGlvbklEKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnZ2xvYmFsV2hlZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlRGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLkhhc1NpZGVJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5IYXNBbmdsZWRJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAqIEFwcGxpZXMgYSB2ZWhpY2xlIHNlbGVjdGlvbiB0byBhbGxcbiAgICAgICAgICAgICogQHBhcmFtIHZlaGljbGUgVGhlIHZlaGljbGUgdG8gYXBwbHkgdG8gZmlsdGVyIHF1ZXJpZXNcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoJ2dsb2JhbFdoZWVsJywgdmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFZlaGljbGUodmVoaWNsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKHZlaGljbGVDb25maWdGaWx0ZXJLZXksIHZlaGljbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0Q291bnQoKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UnbGwgbmV2ZXIgY2FsbCBnZXRDb3VudCBvbiB0aGUgR2xvYmFsRmlsdGVyTW9kZWxcbiAgICAgICAgICAgICAgICB0aHJvdyAnQ2Fubm90IGNvdW50IEdsb2JhbEZpbHRlck1vZGVsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJzXzEuR2xvYmFsRmlsdGVyUHJvdmlkZXIgPSBHbG9iYWxGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgY2xhc3MgVGlyZUZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoZ2xvYmFsRmlsdGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigndGlyZScsIGdsb2JhbEZpbHRlclByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VGaWx0ZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICBSZXF1aXJlZEZpdG1lbnRSZXNvdXJjZVR5cGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAyIC8qIENhdGFsb2cgKi9cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zID0gW1xuICAgICAgICAgICAgICAgICAgICAvLyBCcmFuZFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdicmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLWJyYW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBCcmFuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3RpcmUvZ2V0YnJhbmRzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyLm1hcChyZXNwb25zZS5CcmFuZHMsIGJyYW5kID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJyYW5kLlRpcmVCcmFuZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJyYW5kLlRpcmVCcmFuZElEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuVGlyZUJyYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB0aXJlQnJhbmRJRCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuVGlyZUJyYW5kID0gdGlyZUJyYW5kSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnZmVhdHVyZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbnktZmVhdHVyZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtbW9kZWwtYXR0cmlidXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBTcGVlZCBSYXRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd0aXJlL2dldG1vZGVsYXR0cmlidXRlcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQXR0cmlidXRlcywgYXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGF0dHJpYnV0ZS5UaXJlTW9kZWxBdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhdHRyaWJ1dGUuVGlyZU1vZGVsQXR0cmlidXRlSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5SZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgYXR0cmlidXRlSUQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlJlcXVpcmVkVGlyZU1vZGVsQXR0cmlidXRlID0gYXR0cmlidXRlSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIFNwZWVkIFJhdGluZ1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzcGVlZC1yYXRpbmcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbnktc3BlZWQtcmF0aW5ncycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1zcGVlZC1yYXRpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IFNwZWVkIFJhdGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3RpcmUvZ2V0c3BlZWRyYXRpbmdzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyLm1hcChyZXNwb25zZS5TcGVlZFJhdGluZ3MsIGJyYW5kID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJyYW5kLlRpcmVTcGVlZFJhdGluZ0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJyYW5kLlRpcmVTcGVlZFJhdGluZ0lEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuU3BlZWRSYXRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHNwZWVkUmF0aW5nSUQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlNwZWVkUmF0aW5nID0gc3BlZWRSYXRpbmdJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXRDb3VudChmaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwidGlyZS9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLlRpcmVGaWx0ZXJQcm92aWRlciA9IFRpcmVGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgY2xhc3MgV2hlZWxGaWx0ZXJQcm92aWRlciBleHRlbmRzIEZpbHRlclByb3ZpZGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoJ3doZWVsJywgZ2xvYmFsRmlsdGVyUHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnJhbmRcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWxsLWJyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtYnJhbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IEJyYW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgnd2hlZWwvZ2V0YnJhbmRzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyLm1hcChyZXNwb25zZS5CcmFuZHMsIGJyYW5kID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJyYW5kLldoZWVsQnJhbmROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5XaGVlbEJyYW5kSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5XaGVlbEJyYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB3aGVlbEJyYW5kSUQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLldoZWVsQnJhbmQgPSB3aGVlbEJyYW5kSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmlzaFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdmaW5pc2hlcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1maW5pc2hlcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtZmluaXNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBmaW5pc2hlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgnd2hlZWwvZ2V0ZmluaXNoZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgZmluaXNoZXMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuRmluaXNoZXMsIGZpbmlzaENhdGVnb3J5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZpbmlzaENhdGVnb3J5LldoZWVsRmluaXNoQ2F0ZWdvcnlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmaW5pc2hDYXRlZ29yeS5XaGVlbEZpbmlzaENhdGVnb3J5SURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5XaGVlbEZpbmlzaENhdGVnb3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB3aGVlbEZpbmlzaENhdGVnb3J5SUQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLldoZWVsRmluaXNoQ2F0ZWdvcnkgPSB3aGVlbEZpbmlzaENhdGVnb3J5SUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIERpYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWxsLXNpemVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1zaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBkaWFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGRpYW1ldGVycycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBkaWFtZXRlcnMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuRGlhbWV0ZXJzLCBkaWFtZXRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBkaWFtZXRlci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBnZXRGaXRtZW50RmlsdGVyVmFsdWUoZmlsdGVycywgJ0RpYW1ldGVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGRpYW1ldGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlGaXRtZW50RmlsdGVyKGZpbHRlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhbWV0ZXI6IGRpYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZURlc2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuSGFzQW5nbGVkSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcignd2hlZWwnLCB2ZWhpY2xlRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0Q291bnQoZmlsdGVycykge1xuICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcIndoZWVsL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5Db3VudDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJzXzEuV2hlZWxGaWx0ZXJQcm92aWRlciA9IFdoZWVsRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGZ1bmN0aW9uIGdldEZpdG1lbnRGaWx0ZXJWYWx1ZShmaWx0ZXJzLCBrZXkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZml0bWVudEZpbHRlciBvZiBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzIHx8IFtdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPT09IGZpdG1lbnRGaWx0ZXJHcm91cEtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZml0bWVudEZpbHRlcltrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZml0bWVudEZpbHRlckdyb3VwS2V5ID0gXCJyaWRlc3R5bGVyLXNob3djYXNlLWZpbHRlcnNcIjtcbiAgICAgICAgZnVuY3Rpb24gYXBwbHlGaXRtZW50RmlsdGVyKGZpbHRlcnMsIGZpdG1lbnRGaWx0ZXIpIHtcbiAgICAgICAgICAgIGxldCBmaXRtZW50RmlsdGVycyA9IGZpbHRlcnMuRml0bWVudEZpbHRlcnMgfHwgW107XG4gICAgICAgICAgICBsZXQgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFwcGxpZWRGaXRtZW50RmlsdGVyIG9mIGZpdG1lbnRGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGxpZWRGaXRtZW50RmlsdGVyLkdyb3VwS2V5ID09PSBmaXRtZW50RmlsdGVyR3JvdXBLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAgPSBhcHBsaWVkRml0bWVudEZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIGZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPSBmaXRtZW50RmlsdGVyR3JvdXBLZXk7XG4gICAgICAgICAgICAgICAgZml0bWVudEZpbHRlcnMucHVzaChmaXRtZW50RmlsdGVyKTtcbiAgICAgICAgICAgICAgICAvLyBXZSd2ZSBtb2RpZmllZCB0aGUgYXJyYXkgc28gdXBkYXRlIHRoZSBhcnJheSBpbiB0aGUgZmlsdGVyc1xuICAgICAgICAgICAgICAgIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgPSBmaXRtZW50RmlsdGVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwLCBmaXRtZW50RmlsdGVyKTtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cC5Hcm91cEtleSA9IGZpdG1lbnRGaWx0ZXJHcm91cEtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pKGZpbHRlcnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycyB8fCAoUmlkZVN0eWxlclNob3djYXNlLmZpbHRlcnMgPSB7fSkpO1xufSkoUmlkZVN0eWxlclNob3djYXNlIHx8IChSaWRlU3R5bGVyU2hvd2Nhc2UgPSB7fSkpO1xuIiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5wYXJhbWV0ZXJzIHtcclxuICAgIHZhciBrZXlWYWx1ZVN0b3JlID0ge307XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVBhcmFtZXRlcnMge1xyXG4gICAgICAgIHB1YmxpYyBnZXQoKSB7XHJcbiAgICAgICAgICAgbGV0IGN1cnJlbnRVcmwgPSBkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKSk7XHJcbiAgICAgICAgICAgbGV0IHNwbGl0VXJsID0gW107XHJcbiAgICAgICAgICAgY3VycmVudFVybC5zcGxpdChcIiZcIikuZm9yRWFjaChpbm5lckFycmF5ID0+IHtcclxuICAgICAgICAgICAgICAgc3BsaXRVcmwucHVzaChpbm5lckFycmF5LnNwbGl0KFwiPVwiKSk7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgIGtleVZhbHVlU3RvcmUgPSBzcGxpdFVybC5yZWR1Y2UoZnVuY3Rpb24obywgW2ssIHZdKSB7cmV0dXJuICAob1trXT12LCBvKX0sIHt9KTtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShrZXlWYWx1ZVN0b3JlLCBudWxsLCBudWxsKVxyXG4gICAgICAgICAgIHJldHVybiBrZXlWYWx1ZVN0b3JlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHNldChzdGF0ZURhdGEpIHtcclxuICAgICAgICAgICAgbGV0IGhpc3RvcnlTdGF0ZSA9IGhpc3Rvcnkuc3RhdGU7XHJcbiAgICAgICAgICAgIGxldCBuZXdEYXRhID0gT2JqZWN0LmFzc2lnbihoaXN0b3J5U3RhdGUsIHN0YXRlRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdmVoaWNsZUZyYWdtZW50cyA9IHtcclxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICBUaXJlT3B0aW9uSUQ6IGhpc3RvcnlTdGF0ZS5UaXJlT3B0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICBUaXJlT3B0aW9uU3RyaW5nOiBoaXN0b3J5U3RhdGUuVGlyZU9wdGlvblN0cmluZyxcclxuICAgICAgICAgICAgICAgIFRpcmVNb2RlbElEOiAhc3RhdGVEYXRhLmN1cnJlbnRUaXJlID8gdW5kZWZpbmVkIDogc3RhdGVEYXRhLmN1cnJlbnRUaXJlLlRpcmVNb2RlbElELFxyXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogc3RhdGVEYXRhLmN1cnJlbnRXaGVlbCA9PSB1bmRlZmluZWQgPyBoaXN0b3J5U3RhdGUuV2hlZWxNb2RlbCA6IHN0YXRlRGF0YS5jdXJyZW50V2hlZWwuV2hlZWxNb2RlbElELFxyXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50SUQ6IHN0YXRlRGF0YS5jdXJyZW50V2hlZWxGaXRtZW50ID09IHVuZGVmaW5lZCA/IGhpc3RvcnlTdGF0ZS5XaGVlbEZpdG1lbnRJRCA6IHN0YXRlRGF0YS5jdXJyZW50V2hlZWxGaXRtZW50LldoZWVsRml0bWVudElELFxyXG4gICAgICAgICAgICAgICAgU3VzcGVuc2lvbjogIChzdGF0ZURhdGEuY3VycmVudFN1c3BlbnNpb24gIT09IGhpc3RvcnlTdGF0ZS5TdXNwZW5zaW9uICYmIHN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbiA9PT0gMCkgPyBoaXN0b3J5U3RhdGUuU3VzcGVuc2lvbiA6IHN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbixcclxuICAgICAgICAgICAgICAgIFBhaW50U2NoZW1lOiBzdGF0ZURhdGEuY3VycmVudFBhaW50U2NoZW1lID09IHVuZGVmaW5lZCA/IGhpc3RvcnlTdGF0ZS5QYWludFNjaGVtZSA6IHN0YXRlRGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuVmVoaWNsZVBhaW50U2NoZW1lSUQsXHJcbiAgICAgICAgICAgICAgICBQYWludE5hbWU6IHN0YXRlRGF0YS5jdXJyZW50UGFpbnRTY2hlbWUgPT0gdW5kZWZpbmVkID8gaGlzdG9yeVN0YXRlLlBhaW50TmFtZSA6IHN0YXRlRGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuU2NoZW1lTmFtZSxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmVoaWNsZUZyYWdtZW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmVoaWNsZUZyYWdtZW50cykpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHVybCA9IFwiP1wiICsgT2JqZWN0LmtleXModmVoaWNsZUZyYWdtZW50cykubWFwKGZ1bmN0aW9uKGspIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoaykgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmVoaWNsZUZyYWdtZW50c1trXSlcclxuICAgICAgICAgICAgfSkuam9pbignJicpO1xyXG5cclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobmV3RGF0YSwgbnVsbCwgdXJsKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgcG9wRXZlbnRMaXN0ZW5lcihjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBoaXN0b3J5U3RhdGUgPSBlLnN0YXRlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhdGUuZXh0ZW5kRGF0YShoaXN0b3J5U3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5hY3RpdmVXaGVlbERpYW1ldGVyU2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnZpZXdwb3J0LlVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IGhpc3RvcnlTdGF0ZS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcclxuICAgICAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogaGlzdG9yeVN0YXRlLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklELFxyXG4gICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogIWhpc3RvcnlTdGF0ZS5jdXJyZW50V2hlZWxGaXRtZW50ID8gbnVsbCA6IGhpc3RvcnlTdGF0ZS5jdXJyZW50V2hlZWxGaXRtZW50LldoZWVsRml0bWVudElELFxyXG4gICAgICAgICAgICAgICAgICAgIFN1c3BlbnNpb246ICFoaXN0b3J5U3RhdGUuY3VycmVudFN1c3BlbnNpb24/IG51bGwgOiBoaXN0b3J5U3RhdGUuY3VycmVudFN1c3BlbnNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgUGFpbnRDb2xvcjogIWhpc3RvcnlTdGF0ZS5jdXJyZW50UGFpbnRTY2hlbWUgPyBudWxsIDogaGlzdG9yeVN0YXRlLmN1cnJlbnRQYWludFNjaGVtZS5Db2xvcnNbMF0uSGV4LFxyXG4gICAgICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9OyAgXHJcbiAgICB9O1xyXG59O1xyXG4iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgZW51bSBTdGF0ZXMge1xuICAgICAgICBDaG9vc2VWZWhpY2xlID0gMCxcbiAgICAgICAgVmlzdWFsaXplID0gMVxuICAgIH1cbn1cblxubmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5zdGF0ZSB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUNoYW5nZWRFdmVudCB7XG4gICAgICAgIG9sZFN0YXRlOiBTdGF0ZXM7XG4gICAgICAgIG5ld1N0YXRlOiBTdGF0ZXM7XG4gICAgICAgIG5ld0RhdGE6IFN0YXRlRGF0YVxuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVDaGFuZ2VkQ2FsbGJhY2sge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGV2ZW50ICBUaGUgc3RhdGUgY2hhbmdlZCBldmVudFxuICAgICAgICAgKiBAcmV0dXJuICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIChldmVudDpTdGF0ZUNoYW5nZWRFdmVudCk6IGJvb2xlYW47XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUNoYW5nZWRDYWxsYmFjayB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQgIFRoZSBzdGF0ZSBjaGFuZ2VkIGV2ZW50XG4gICAgICAgICAqIEByZXR1cm4gICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgKGV2ZW50OlN0YXRlQ2hhbmdlZEV2ZW50KTogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIERlYnVnU3RhdGVDYWxsYmFjayB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQgICAgVGhlIHN0YXRlIGNoYW5nZWQgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGZpbmlzaGVkIElmIGZhbHNlLCB0aGUgc3RhdGUgY2hhbmdlIGlzIGJlZ2lubmluZywgb3RoZXJ3aXNlIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICogICAgICAgICAgICAgICAgIGhhcyBmaW5pc2hlZFxuICAgICAgICAgKi9cbiAgICAgICAgKGV2ZW50OlN0YXRlQ2hhbmdlZEV2ZW50LCBmaW5pc2hlZDpib29sZWFuKTogdm9pZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlRXhpdENhbGxiYWNrIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBjdXJyZW50U3RhdGUgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIGZyb21cbiAgICAgICAgICogQHBhcmFtIG5ld1N0YXRlICAgICAgVGhlIHN0YXRlIGJlaW5nIGNoYW5nZWQgdG9cbiAgICAgICAgICogQHJldHVybiAgICAgICAgICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgKGN1cnJlbnRTdGF0ZTpTdGF0ZXMsIG5ld1N0YXRlOlN0YXRlcywgbmV3RGF0YTpTdGF0ZURhdGEpOiBib29sZWFuO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVFbnRlckNhbGxiYWNrIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBvbGRTdGF0ZSAgICAgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIGZyb21cbiAgICAgICAgICogQHBhcmFtIGN1cnJlbnRTdGF0ZSAgVGhlIHN0YXRlIGJlaW5nIGNoYW5nZWQgdG9cbiAgICAgICAgICogQHJldHVybiAgICAgICAgICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgKG9sZFN0YXRlOlN0YXRlcywgY3VycmVudFN0YXRlOlN0YXRlcywgbmV3RGF0YTpTdGF0ZURhdGEpOiBib29sZWFuO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBuZXdEYXRhIFRoZSBuZXcgc3RhdGUgZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgKG5ld0RhdGE6U3RhdGVEYXRhKTogdm9pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHJlZ2lzdGVyIGhvbGRpbmcgdGhlIGV4aXQvZW50ZXIgY2FsbGJhY2tzIGZvciBhIHNwZWNpZmljIHN0YXRlXG4gICAgICovXG4gICAgY2xhc3MgU3RhdGVDYWxsYmFja1JlZ2lzdGVyIHtcbiAgICAgICAgc3RhdGU6U3RhdGVzO1xuICAgICAgICBleGl0Q2FsbGJhY2tzOiBTdGF0ZUV4aXRDYWxsYmFja1tdO1xuICAgICAgICBlbnRlckNhbGxiYWNrczogU3RhdGVFbnRlckNhbGxiYWNrW107XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc3RhdGU6U3RhdGVzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB0aGlzLmV4aXRDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZW50ZXJDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlnZ2VyIGFsbCBvZiB0aGUgZXhpdCBjYWxsYmFja3MgZm9yIHRoaXMgc3RhdGUuIElmIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZSxcbiAgICAgICAgICogc2tpcCB0cmlnZ2VyaW5nIHRoZSByZW1haW5pbmcgY2FsbGJhY2tzIGFuZCByZXR1cm4gZmFsc2U7XG4gICAgICAgICAqL1xuICAgICAgICB0cmlnZ2VyRXhpdENhbGxiYWNrcyhjdXJyZW50U3RhdGU6U3RhdGVzLCBuZXdTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKSA6IGJvb2xlYW4ge1xuICAgICAgICAgICAgZm9yIChsZXQgZXhpdENhbGxiYWNrIG9mIHRoaXMuZXhpdENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIGlmIChleGl0Q2FsbGJhY2soY3VycmVudFN0YXRlLCBuZXdTdGF0ZSwgbmV3RGF0YSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciBhbGwgb2YgdGhlIGVudGVyIGNhbGxiYWNrcyBmb3IgdGhpcyBzdGF0ZS4gSWYgYSBjYWxsYmFjayByZXR1cm5zIGZhbHNlLFxuICAgICAgICAgKiBza2lwIHRyaWdnZXJpbmcgdGhlIHJlbWFpbmluZyBjYWxsYmFja3MgYW5kIHJldHVybiBmYWxzZTtcbiAgICAgICAgICovXG4gICAgICAgIHRyaWdnZXJFbnRlckNhbGxiYWNrcyhvbGRTdGF0ZTpTdGF0ZXMsIGN1cnJlbnRTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKSA6IGJvb2xlYW4ge1xuICAgICAgICAgICAgZm9yIChsZXQgZW50ZXJDYWxsYmFjayBvZiB0aGlzLmVudGVyQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudGVyQ2FsbGJhY2sob2xkU3RhdGUsIGN1cnJlbnRTdGF0ZSwgbmV3RGF0YSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZURhdGEge1xuICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc3RyaW5nO1xuICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZURlc2NyaXB0aW9uTW9kZWw7XG5cbiAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ6IHN0cmluZztcbiAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHN0cmluZztcblxuICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiBib29sZWFuO1xuICAgICAgICB2ZWhpY2xlSGFzQW5nbGVkSW1hZ2U6IGJvb2xlYW47XG5cbiAgICAgICAgY3VycmVudFBhaW50U2NoZW1lOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsO1xuICAgICAgICBjdXJyZW50V2hlZWw6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsO1xuICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xuICAgICAgICBjdXJyZW50VGlyZTogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgY3VycmVudFRpcmVPcHRpb246IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgXG4gICAgICAgIGN1cnJlbnRTdXNwZW5zaW9uOiBudW1iZXI7XG4gICAgfVxuXG4gICAgZXhwb3J0IHR5cGUgUGFydGlhbFN0YXRlRGF0YSA9IHtcbiAgICAgICAgW1AgaW4ga2V5b2YgU3RhdGVEYXRhXT86IFN0YXRlRGF0YVtQXTtcbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlU3RhdGUge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBjdXJyZW50U3RhdGU6U3RhdGVzO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yIChpbml0aWFsU3RhdGU6U3RhdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgY3VycmVudERhdGE6U3RhdGVEYXRhID0ge1xuICAgICAgICAgICAgY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmVoaWNsZUhhc1NpZGVJbWFnZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50UGFpbnRTY2hlbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRUaXJlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50V2hlZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRTdXNwZW5zaW9uOiB1bmRlZmluZWRcbiAgICAgICAgfTtcblxuICAgICAgICBwdWJsaWMgZ2V0RGF0YSgpIHsgcmV0dXJuIHRoaXMuY3VycmVudERhdGE7IH1cblxuICAgICAgICBwdWJsaWMgc2V0RGF0YShuZXdEYXRhOlN0YXRlRGF0YSkge1xuICAgICAgICAgICAgbGV0IGJlZm9yZUNhbGxiYWNrczpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2tbXSA9IFtdLFxuICAgICAgICAgICAgICAgIGFmdGVyQ2FsbGJhY2tzOlN0YXRlRGF0YUNoYW5nZWRDYWxsYmFja1tdID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGRhdGFDaGFuZ2VkQ2FsbGJhY2sgb2YgdGhpcy5kYXRhQ2hhbmdlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIGxldCB7Y2FsbGJhY2ssIGJlZm9yZX0gPSBkYXRhQ2hhbmdlZENhbGxiYWNrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZSkgYmVmb3JlQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGVsc2UgYWZ0ZXJDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIGJlZm9yZUNhbGxiYWNrcylcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXdEYXRhKTtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IG5ld0RhdGE7XG4gICAgICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgYWZ0ZXJDYWxsYmFja3MpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5jdXJyZW50RGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcHVibGljIGV4dGVuZERhdGEoZGF0YUV4dGVuc2lvbjpQYXJ0aWFsU3RhdGVEYXRhKTogU3RhdGVEYXRhIHtcbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgbmV3RGF0YTogUGFydGlhbFN0YXRlRGF0YSA9IHt9OyBcbiAgICAgICAgICAgIGxldCBjdXJyZW50RGF0YTogU3RhdGVEYXRhID0gdGhpcy5jdXJyZW50RGF0YTtcblxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGN1cnJlbnREYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnREYXRhW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWx1ZSA9IGRhdGFFeHRlbnNpb25ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gZGF0YUV4dGVuc2lvbiAmJiBjdXJyZW50VmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGFba2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YVtrZXldID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0YShuZXdEYXRhIGFzIFN0YXRlRGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGljdGlvbmFyeSBvZiBTdGF0ZXMgdG8gU3RhdGVDYWxsYmFja1JlZ2lzdGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjYWxsYmFja3M6IHtbc3RhdGU6IG51bWJlcl06IFN0YXRlQ2FsbGJhY2tSZWdpc3Rlcn0gPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RhdGUgY2hhbmdlZCBjYWxsYmFja3NcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgY2hhbmdlQ2FsbGJhY2tzOlN0YXRlQ2hhbmdlZENhbGxiYWNrW10gPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGF0YSBjaGFuZ2VkIGNhbGxiYWNrc1xuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBkYXRhQ2hhbmdlZENhbGxiYWNrczp7Y2FsbGJhY2s6U3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrLCBiZWZvcmU6Ym9vbGVhbn1bXSA9IFtdO1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbiBleGl0aW5nIGNhbGxiYWNrIHJlZ2lzdGVyIGZvciB0aGUgc3BlY2lmaWVkIHN0YXRlIG9yIGNyZWF0ZXNcbiAgICAgICAgICogYSBuZXcgb25lXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgc3RhdGUgdG8gcmV0dXJuIGEgY2FsbGJhY2sgcmVnaXN0ZXIgZm9yXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGNhbGxiYWNrc0ZvclN0YXRlKHN0YXRlOiBTdGF0ZXMpOlN0YXRlQ2FsbGJhY2tSZWdpc3RlclxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoc3RhdGUgaW4gdGhpcy5jYWxsYmFja3MpIHJldHVybiB0aGlzLmNhbGxiYWNrc1tzdGF0ZV07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja3Nbc3RhdGVdID0gbmV3IFN0YXRlQ2FsbGJhY2tSZWdpc3RlcihzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayB0aGF0IGlzIHRyaWdnZXJlZCB3aGVuIGV4aXRpbmcgYSBzcGVjaWZpYyBzdGF0ZVxuICAgICAgICAgKiBAcGFyYW0gc3RhdGUgVGhlIHN0YXRlIHRvIHJlZ2lzdGVyIGEgZXhpdCBjYWxsYmFjayBmb3JcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlIHdoZW4gZXhpdGluZyB0aGUgc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIG9uRXhpdCAoc3RhdGU6U3RhdGVzLCBjYWxsYmFjazpTdGF0ZUV4aXRDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NGb3JTdGF0ZShzdGF0ZSkuZXhpdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgaXMgdHJpZ2dlcmVkIHdoZW4gZW50ZXJpbmcgYSBzcGVjaWZpYyBzdGF0ZVxuICAgICAgICAgKiBAcGFyYW0gc3RhdGUgVGhlIHN0YXRlIHRvIHJlZ2lzdGVyIGFuIGVudGVyIGNhbGxiYWNrIGZvclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUgd2hlbiBlbnRlcmluZyB0aGUgc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIG9uRW50ZXIoc3RhdGU6U3RhdGVzLCBjYWxsYmFjazpTdGF0ZUVudGVyQ2FsbGJhY2spICB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc0ZvclN0YXRlKHN0YXRlKS5lbnRlckNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgc3RhdGUgaGFzIGJlZW4gY2hhbmdlZFxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIHJ1blxuICAgICAgICAgKi9cbiAgICAgICAgb25DaGFuZ2UoY2FsbGJhY2s6U3RhdGVDaGFuZ2VkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGJlZm9yZSB0aGUgc3RhdGUgZGF0YSBoYXMgYmVlbiBjaGFuZ2VkLlxuICAgICAgICAgKiBUaGlzIGFsbG93cyBjYWxsYmFjayBmdW5jdGlvbnMgdG8gbW9kaWZ5IHRoZSBkYXRhIGJlZm9yZSBpdCdzIHNlbnQgdG8gb3RoZXIgY2FsbGJhY2tzLlxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIHJ1blxuICAgICAgICAgKi9cbiAgICAgICAgYmVmb3JlRGF0YUNoYW5nZShjYWxsYmFjazpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5nZWRDYWxsYmFja3MucHVzaCh7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIGJlZm9yZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHN0YXRlIGRhdGEgaGFzIGNoYW5nZWRcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW5cbiAgICAgICAgICovXG4gICAgICAgIGFmdGVyRGF0YUNoYW5nZShjYWxsYmFjazpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5nZWRDYWxsYmFja3MucHVzaCh7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIGJlZm9yZTogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hhbmdlU3RhdGUobmV3U3RhdGU6U3RhdGVzLCBuZXdEYXRhPzpTdGF0ZURhdGEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGF0ZSA9PT0gbmV3U3RhdGUpIHJldHVybjtcblxuICAgICAgICAgICAgbGV0IHByZXZpb3VzU3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZTtcblxuICAgICAgICAgICAgLy8gU2V0IG91ciBzdGF0ZSBkYXRhXG4gICAgICAgICAgICBpZiAobmV3RGF0YSkgdGhpcy5zZXREYXRhKG5ld0RhdGEpO1xuXG4gICAgICAgICAgICB2YXIgc3RhdGVDaGFuZ2VkRXZlbnQ6U3RhdGVDaGFuZ2VkRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgb2xkU3RhdGU6IHByZXZpb3VzU3RhdGUsXG4gICAgICAgICAgICAgICAgbmV3U3RhdGU6IG5ld1N0YXRlLFxuICAgICAgICAgICAgICAgIG5ld0RhdGE6IHRoaXMuY3VycmVudERhdGFcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB0aGlzLmRlYnVnQ2FsbGJhY2soc3RhdGVDaGFuZ2VkRXZlbnQsIGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgc3RhdGUtY2hhbmdlZCBldmVudCwgY2FuY2VsIHN0YXRlIGNoYW5nZSBpZiBjYW5jZWxsZWRcbiAgICAgICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIHRoaXMuY2hhbmdlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjayhzdGF0ZUNoYW5nZWRFdmVudCkpIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBleGl0IGNhbGxiYWNrc1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzRm9yU3RhdGUocHJldmlvdXNTdGF0ZSkudHJpZ2dlckV4aXRDYWxsYmFja3MocHJldmlvdXNTdGF0ZSwgbmV3U3RhdGUsIHRoaXMuY3VycmVudERhdGEpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIE9uZSBvZiB0aGUgZXhpdCBjYWxsYmFja3MgY2FuY2VsZWQgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBlbnRlciBjYWxsYmFja3NcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbGxiYWNrc0ZvclN0YXRlKG5ld1N0YXRlKS50cmlnZ2VyRW50ZXJDYWxsYmFja3MocHJldmlvdXNTdGF0ZSwgbmV3U3RhdGUsIHRoaXMuY3VycmVudERhdGEpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIE9uZSBvZiB0aGUgZW50ZXIgY2FsbGJhY2tzIGNhbmNlbGVkIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB0aGlzLmRlYnVnQ2FsbGJhY2soc3RhdGVDaGFuZ2VkRXZlbnQsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBBbGwgb2YgdGhlIGNhbGxiYWNrcyBoYXZlIGJlZW4gcmFuLCBjaGFuZ2UgdGhlIHN0YXRlXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVidWdDYWxsYmFjazogRGVidWdTdGF0ZUNhbGxiYWNrO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgYWxsIG9mIG91ciBhY2NlcHRhYmxlIHN0cmluZyBrZXlzXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgU3RyaW5nS2V5cyA9IFxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXZpc3VhbGl6ZS1pbnRyb1wiIHxcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdC1zaGFyZS1pbnRyb1wiIHxcbiAgICAgICAgXCJzZWxlY3QteW91ci12ZWhpY2xlXCIgfFxuICAgICAgICBcInRpcmVzXCIgfFxuICAgICAgICBcIndoZWVsc1wiIHxcbiAgICAgICAgXCJzdXNwZW5zaW9uXCIgfFxuICAgICAgICBcInBhaW50XCIgfFxuICAgICAgICBcImZyb250XCIgfFxuICAgICAgICBcInJlYXJcIiB8XG4gICAgICAgIFwidmVoaWNsZS1kZXRhaWxzXCIgfFxuICAgICAgICBcImNoYW5nZS12ZWhpY2xlXCIgfFxuICAgICAgICBcIndoZWVsLWRldGFpbHNcIiB8XG4gICAgICAgIFwidGlyZS1kZXRhaWxzXCIgfFxuICAgICAgICAnc2VsZWN0LXBhaW50JyB8XG4gICAgICAgICdzZWxlY3Qtd2hlZWxzJyB8XG4gICAgICAgICdzZWxlY3QtdGlyZXMnIHxcbiAgICAgICAgJ2FkanVzdC1zdXNwZW5zaW9uJyB8XG4gICAgICAgICdjaGFuZ2Utd2hlZWwtc2l6ZScgfFxuICAgICAgICAnbm8tcmVzdWx0cycgfFxuICAgICAgICAnbm8td2hlZWwtcmVzdWx0cycgfCBcbiAgICAgICAgJ3doZWVsLWZlYXR1cmVzLXNwZWNzJyB8XG4gICAgICAgICdzaGFyZS1teS12ZWhpY2xlJyB8XG4gICAgICAgICdzaGFyZS1pbnN0cnVjdGlvbnMnIHxcbiAgICAgICAgJ25vLWRlc2NyaXB0aW9uLXdoZWVsJyB8XG4gICAgICAgICdzaG93LXNwZWNzJyB8XG4gICAgICAgICdjYWxsJyB8IFxuICAgICAgICAnc2l6ZScgfFxuICAgICAgICAnb2Zmc2V0JyB8XG4gICAgICAgICdib2x0LXBhdHRlcm4nIHxcbiAgICAgICAgJ2NlbnRlcmJvcmUnIHwgXG4gICAgICAgICdwcmljZScgfFxuICAgICAgICAnaXRlbS1udW1iZXInIHxcbiAgICAgICAgJ2JyYW5kcycgfFxuICAgICAgICAnZmluaXNoZXMnIHwgXG4gICAgICAgICdzaXplcycgfCBcbiAgICAgICAgJ2FsbCcgfFxuICAgICAgICAnYWxsLWJyYW5kcycgfFxuICAgICAgICAnYWxsLWZpbmlzaGVzJyB8IFxuICAgICAgICAnYWxsLXNpemVzJyB8IFxuICAgICAgICAnZmlsdGVyLXJlc3VsdHMnIHxcbiAgICAgICAgJ2xvYWRpbmctZWxsaXBzaXMnIHxcbiAgICAgICAgJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscycgfFxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtdGlyZXMnIHxcbiAgICAgICAgJ3NwZWNpZmljYXRpb25zJyB8IFxuICAgICAgICAnc3BlZWQtcmF0aW5nJyB8IFxuICAgICAgICAnYW55LXNwZWVkLXJhdGluZ3MnIHwgXG4gICAgICAgICdmZWF0dXJlcycgfCBcbiAgICAgICAgJ2FueS1mZWF0dXJlcycgfFxuICAgICAgICAnZmluaXNoJyB8XG4gICAgICAgICdzdW1tYXJ5JyB8XG4gICAgICAgICdjaGVjay1vdXQtbXktdmVoaWNsZSc7XG5cbiAgICBsZXQgZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXI6SVN0cmluZ3NMYW5ndWFnZUZvcm1hdFByb3ZpZGVyID0ge1xuICAgICAgICBjdXJyZW5jeTogKG51bWJlciwgc3ltYm9sKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3ltYm9sICsgKCtudW1iZXIudG9GaXhlZCgyKSkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB3aGF0IGEgc3RyaW5ncyBkaWN0aW9uYXJ5IHNob3VsZCBsb29rIGxpa2VcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBJU3RyaW5nc0xhbmd1YWdlRGljdGlvbmFyeSA9IHtcbiAgICAgICAgW3N0cmluZ0tleSBpbiBTdHJpbmdLZXlzXTpzdHJpbmc7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RyaW5nc0xhbmd1YWdlRm9ybWF0UHJvdmlkZXIge1xuICAgICAgICBjdXJyZW5jeT86IChhbW91bnQ6bnVtYmVyLCBzeW1ib2w6c3RyaW5nKSA9PiBzdHJpbmc7XG4gICAgfVxuXG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdHJpbmdzTGFuZ3VhZ2UgZXh0ZW5kcyBJU3RyaW5nc0xhbmd1YWdlRGljdGlvbmFyeSB7XG4gICAgICAgIGZvcm1hdD86IElTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgYWNjZXB0YWJsZSBsYW5ndWFnZXNcbiAgICAgKi9cbiAgICBleHBvcnQgZW51bSBMYW5ndWFnZUtleXMge1xuICAgICAgICBFblxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBbiBpbnRlcm5hbCBzdHJ1Y3R1cmUgZm9yIGhvbGRpbmcgbGFuZ3VhZ2UgZGF0YVxuICAgICAqL1xuICAgIGNsYXNzIExhbmd1YWdlUmVnaXN0ZXIge1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGxhbmd1YWdlOiBJU3RyaW5nc0xhbmd1YWdlO1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZm9ybWF0OiBJU3RyaW5nc0xhbmd1YWdlRm9ybWF0UHJvdmlkZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIHJlZ2lzdGVyIGZvciBhIGxhbmd1YWdlXG4gICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZSBUaGUgbGFuZ3VhZ2UgZGVmaW5pdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IobGFuZ3VhZ2U6SVN0cmluZ3NMYW5ndWFnZSkge1xuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBsYW5ndWFnZS5mb3JtYXQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEga2V5IGZyb20gdGhlIGxhbmd1YWdlIGRpY3Rpb25hcnlcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUgc3RyaW5nIGtleVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0U3RyaW5nKGtleTpTdHJpbmdLZXlzKTpzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFuZ3VhZ2Vba2V5XTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IGxhbmd1YWdlIHRvIHVzZSBpZiBvbmUgaXMgbm90IHByb3ZpZGVkIHRvIGdldFN0cmluZ3NcbiAgICAgKi9cbiAgICBsZXQgZGVmYXVsdExhbmd1YWdlOkxhbmd1YWdlUmVnaXN0ZXI7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnRlcm5hbCBsaXN0IG9mIGFsbCByZWdpc3RlcmVkIGxhbmd1YWdlcyBhbmQgdGhlaXIgc3RyaW5nc1xuICAgICAqL1xuICAgIGxldCBsYW5ndWFnZVJlZ2lzdGVyczoge1tsYW5ndWFnZUtleTpudW1iZXJdOkxhbmd1YWdlUmVnaXN0ZXJ9ID0ge31cblxuICAgIGV4cG9ydCBuYW1lc3BhY2Ugc3RyaW5ncyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciBhIGxhbmd1YWdlIHRvIGJlIHVzZWQgaW4gdGhlIHNob3djYXNlXG4gICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZUtleSBUaGUga2V5IG9mIHRoZSBsYW5ndWFnZSB5b3UgYXJlIHJlZ2lzdGVyaW5nXG4gICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZSBUaGUgbGFuZ3VhZ2UgcHJvdmlkZXJcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlckxhbmd1YWdlKGxhbmd1YWdlS2V5Okxhbmd1YWdlS2V5cywgbGFuZ3VhZ2U6SVN0cmluZ3NMYW5ndWFnZSwgc2V0QXNEZWZhdWx0PzogYm9vbGVhbikge1xuICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgZm9ybWF0IHByb3ZpZGVyXG4gICAgICAgICAgICBpZiAoIWxhbmd1YWdlLmZvcm1hdCkgbGFuZ3VhZ2UuZm9ybWF0ID0gZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXI7XG4gICAgICAgICAgICBlbHNlIGZvciAobGV0IGtleSBpbiBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkZWZhdWx0TGFuZ3VhZ2VQcm92aWRlciBoYXMgYSBmb3JtYXQgZnVuY3Rpb24gdGhhdCBpcyBtaXNzaW5nIG9uIHRoZSBsYW5ndWFnZSdzIGZvcm1hdCBwcm92aWRlcixcbiAgICAgICAgICAgICAgICAvLyBpbXBsZW1lbnQgaXQgaW4gdGhlIGxhbmd1YWdlJ3MgZm9ybWF0IHByb3ZpZGVyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyLmhhc093blByb3BlcnR5KGtleSkgJiYga2V5IGluIGxhbmd1YWdlLmZvcm1hdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2UuZm9ybWF0W2tleV0gPSBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcltrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGxhbmd1YWdlUmVnaXN0ZXIgPSBsYW5ndWFnZVJlZ2lzdGVyc1tsYW5ndWFnZUtleV0gPSBuZXcgTGFuZ3VhZ2VSZWdpc3RlcihsYW5ndWFnZSk7XG5cbiAgICAgICAgICAgIGlmIChzZXRBc0RlZmF1bHQgfHwgIWRlZmF1bHRMYW5ndWFnZSkgZGVmYXVsdExhbmd1YWdlID0gbGFuZ3VhZ2VSZWdpc3RlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgYSBsYW5ndWFnZSB0byBiZSB1c2VkIGJ5IGRlZmF1bHQsIHdoZW4gbm8ga2V5IGlzIHBhc3NlZCBpbnRvIGdldFN0cmluZ3NcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBsYW5ndWFnZSBrZXkgdG8gdXNlIGJ5IGRlZmF1bHRcbiAgICAgICAgICogQHJldHVybnMgdHJ1ZSwgaWYgdGhlIGxhbmd1YWdlIGlzIHJlZ2lzdGVyZWQgYW5kIHNldCBhcyBkZWZhdWx0OyBvdGhlcndpc2UgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TGFuZ3VhZ2UobGFuZ3VhZ2VLZXk6TGFuZ3VhZ2VLZXlzKTpib29sZWFuIHtcbiAgICAgICAgICAgIGlmIChsYW5ndWFnZUtleSBpbiBsYW5ndWFnZVJlZ2lzdGVycykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZSA9IGxhbmd1YWdlUmVnaXN0ZXJzW2xhbmd1YWdlS2V5XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRlbGxzIHlvdSB3aGV0aGVyIG9yIG5vdCBhIGxhbmd1YWdlIGlzIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBrZXkgZm9yIHRoZSBsYW5ndWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGxhbmd1YWdlSXNSZWdpc3RlcmVkKGxhbmd1YWdlS2V5Okxhbmd1YWdlS2V5cyk6Ym9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VLZXkgaW4gbGFuZ3VhZ2VSZWdpc3RlcnM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgc3BlY2lmaWVkIGxhbmd1YWdlLCBvciB0aGUgZGVmYXVsdCBsYW5ndWFnZSBpZiBpdCBjb3VsZCBub3QgYmUgZm91bmRcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBrZXkgb2YgdGhlIGxhbmd1YWdlIHRvIHJldHJpZXZlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRMYW5ndWFnZShsYW5ndWFnZUtleT86TGFuZ3VhZ2VLZXlzKTpMYW5ndWFnZVJlZ2lzdGVyIHtcbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZUtleSBpbiBsYW5ndWFnZVJlZ2lzdGVycyA/XG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VSZWdpc3RlcnNbbGFuZ3VhZ2VLZXldIDpcbiAgICAgICAgICAgICAgICBkZWZhdWx0TGFuZ3VhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEgc3RyaW5nIGZyb20gdGhlIHJlZ2lzdGVyZWQgc3RyaW5nc1xuICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBzdHJpbmcga2V5IHRvIHJldHVybiBhIHN0cmluZyBmb3JcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBsYW5ndWFnZSB5b3Ugd2FudCB0byB1c2VcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmcoa2V5OlN0cmluZ0tleXMsIGxhbmd1YWdlS2V5PzpMYW5ndWFnZUtleXMpOnN0cmluZyB7XG4gICAgICAgICAgICBsZXQgbGFuZ3VhZ2VSZWdpc3RlcjpMYW5ndWFnZVJlZ2lzdGVyID0gZ2V0TGFuZ3VhZ2UobGFuZ3VhZ2VLZXkpO1xuICAgICAgICAgICAgbGV0IHN0cmluZzpzdHJpbmc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBsYW5ndWFnZSwgb3IgY291bGQgbm90IGdldCB0aGUgc3RyaW5nIGZyb20gdGhlIHJlZ2lzdGVyIFxuICAgICAgICAgICAgaWYgKCEoc3RyaW5nID0gbGFuZ3VhZ2VSZWdpc3Rlci5nZXRTdHJpbmcoa2V5KSkpXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gZm9ybWF0KGxhbmd1YWdlS2V5PzpMYW5ndWFnZUtleXMpOklTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlciB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TGFuZ3VhZ2UobGFuZ3VhZ2VLZXkpLmZvcm1hdDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLnN0eWxlcyB7XG4gICAgZXhwb3J0IHR5cGUgQnJlYWtwb2ludEtleSA9ICdwaG9uZS1wb3J0cmFpdCcgfCAncGhvbmUtbGFuZHNjYXBlJyB8ICd0YWJsZXQnIHwgJ2Rlc2t0b3AnIHwgJ2Rlc2t0b3AteGwnIHwgJ3R2JztcbiAgICBleHBvcnQgdHlwZSBCcmVha3BvaW50ID0gW0JyZWFrcG9pbnRLZXksIG51bWJlcl07XG4gICAgXG4gICAgbGV0IHdpZHRoQnJlYWtwb2ludHM6QnJlYWtwb2ludFtdID0gW1xuICAgICAgICBbJ3Bob25lLXBvcnRyYWl0JywgMF0sXG4gICAgICAgIFsncGhvbmUtbGFuZHNjYXBlJywgNDIwXSxcbiAgICAgICAgWyd0YWJsZXQnLCA3NjhdLFxuICAgICAgICBbJ3Bob25lLWxhbmRzY2FwZScsIDgxMl0sXG4gICAgICAgIFsndGFibGV0JywgODI0XSxcbiAgICAgICAgWydkZXNrdG9wJywgOTkyXSxcbiAgICAgICAgWydkZXNrdG9wLXhsJywgMTIwMF0sXG4gICAgICAgIFsndHYnLCAxNjAwXVxuICAgIF07XG5cbiAgICBleHBvcnQgY2xhc3MgU3R5bGVNYW5hZ2VyIHtcbiAgICAgICAgZWxlbWVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvciAoZWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVCcmVha3BvaW50cygpO1xuICAgICAgICAgICAgdGhpcy53YXRjaFNpemUoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNTUygpO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlT25ET01Mb2FkKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTdHlsZUNsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplZDpSaWRlU3R5bGVyUHJvbWlzZTtcblxuICAgICAgICBwcml2YXRlIHJlc29sdmVPbkRPTUxvYWQoKSB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBET00gaXMgYWxyZWFkeSBsb2FkZWRcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkLnJlc29sdmUoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIERPTSB0byBsb2FkXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHRoaXMuaW5pdGlhbGl6ZWQucmVzb2x2ZSgpLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZCB0aGUgQ1NTIGZyb20ge0BsaW5rIFJpZGVTdHlsZXJTaG93Y2FzZS5jc3N9IGludG8gdGhlIGZpcnN0IEhFQUQgZWxlbWVudFxuICAgICAgICAgKiBmb3VuZCBpbiB0aGUgZG9jdW1lbnQgb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplQ1NTKCkge1xuICAgICAgICAgICAgaWYgKCFTdHlsZUhlbHBlci5pc09mZnNldFBvc2l0aW9uZWQodGhpcy5lbGVtZW50KSlcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuXG4gICAgICAgICAgICBpZiAoJ2NzcycgaW4gUmlkZVN0eWxlclNob3djYXNlID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyRG9jdW1lbnQgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIGxldCBoZWFkID0gY29udGFpbmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpLml0ZW0oMCk7XG5cbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBIRUFEIGVsZW1lbnQsIGNyZWF0ZSBvbmUgYW5kIGFkZCBpdCB0byB0aGUgRE9NXG4gICAgICAgICAgICBpZiAoIWhlYWQpIHtcbiAgICAgICAgICAgICAgICBoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZCcpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoaGVhZCwgY29udGFpbmVyRG9jdW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBzdHlsZXNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgICAgICAgICAgLy8gQWRkIG91ciBDU1MgdG8gdGhlIHN0eWxlc2hlZXRcbiAgICAgICAgICAgIHN0eWxlc2hlZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoUmlkZVN0eWxlclNob3djYXNlLmNzcykpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIENTUyB0byB0aGUgaGVhZGVyIGJlZm9yZSB0aGUgZmlyc3QgSEVBRCBlbGVtZW50XG4gICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzdHlsZXNoZWV0LCBIVE1MSGVscGVyLmZpcnN0Q2hpbGRXaXRoVGFnKGhlYWQsIFwiU1RZTEVcIikpO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIENTUyBmcm9tIG91ciBvYmplY3Qgc28gaXQncyBub3Qgc3BlY2lmaWVkIHR3aWNlXG4gICAgICAgICAgICBkZWxldGUgUmlkZVN0eWxlclNob3djYXNlLmNzcztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVN0eWxlQ2xhc3NlcygpIHtcbiAgICAgICAgICAgIGlmIChTdHlsZUhlbHBlci5pc1RvdWNoRGV2aWNlKVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy10b3VjaCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplQnJlYWtwb2ludHMoKSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgb3VyIGJyZWFrcG9pbnRzIGFyZSBzb3J0ZWRcbiAgICAgICAgICAgIHdpZHRoQnJlYWtwb2ludHMuc29ydChmdW5jdGlvbiAoYSxiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMV0gLSBiWzFdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGRvY3VtZW50LnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9hZGluZ1wiOlxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmdldERvY3VtZW50KHRoaXMuZWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gdGhpcy5hcHBseUJyZWFrcG9pbnRDbGFzc2VzKCkpO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJpbnRlcmFjdGl2ZVwiOlxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmdldFdpbmRvdyh0aGlzLmVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHRoaXMuYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgcmVzaXplKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUJyZWFrcG9pbnRDbGFzc2VzKCk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vblJlc2l6ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vblJlc2l6ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByZXNpemVkKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uUmVzaXplZCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vblJlc2l6ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnJlYWtwb2ludENoYW5nZWQobmV3QnJlYWtwb2ludDpCcmVha3BvaW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25CcmVha3BvaW50Q2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vbkJyZWFrcG9pbnRDaGFuZ2VkKG5ld0JyZWFrcG9pbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbGJhY2sgZWFjaCB0aW1lIHRoZSBlbGVtZW50IGlzIHJlc2l6ZWRcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBvblJlc2l6ZTogKCkgPT4gdm9pZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayBmb3IgYWZ0ZXIgdGhlIHVzZXIgaXMgZG9uZSByZXNpemluZyB0aGUgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIG9uUmVzaXplZDogKCkgPT4gdm9pZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayBmb3IgYWZ0ZXIgdGhlIGJyZWFrcG9pbnQgaGFzIGNoYW5nZWRcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBvbkJyZWFrcG9pbnRDaGFuZ2VkOiAobmV3QnJlYWtwb2ludDpCcmVha3BvaW50KSA9PiB2b2lkO1xuXG4gICAgICAgIHByaXZhdGUgd2F0Y2hTaXplKCkge1xuICAgICAgICAgICAgbGV0IGVsZW1lbnQ6SFRNTEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGxldCB0aW1lcjpudW1iZXI7XG4gICAgICAgICAgICBjb25zdCByZXNpemVkRXZlbnREZWxheSA9IDIwMDtcblxuICAgICAgICAgICAgbGV0IGVsZW1lbnRTaXplID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZ2V0V2luZG93KGVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RWxlbWVudFNpemUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXdFbGVtZW50U2l6ZS53aWR0aCAhPT0gZWxlbWVudFNpemUud2lkdGggfHwgbmV3RWxlbWVudFNpemUuaGVpZ2h0ICE9PSBlbGVtZW50U2l6ZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQncyBzaXplIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTaXplID0gbmV3RWxlbWVudFNpemU7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcblxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcmVzaXplZEV2ZW50RGVsYXkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgYXBwbGllZCBicmVha3BvaW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGN1cnJlbnRCcmVha3BvaW50OkJyZWFrcG9pbnQ7XG5cbiAgICAgICAgcHVibGljIGdldEN1cnJlbnRCcmVha3BvaW50KCk6QnJlYWtwb2ludCB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnJlYWtwb2ludDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpIHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50OkhUTUxFbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBsZXQgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgICAvLyBEb24ndCBydW4gaWYgd2UgZG9uJ3QgaGF2ZSBhIGhlaWdodCBvciB3aWR0aCB5ZXRcbiAgICAgICAgICAgIGlmICghaGVpZ2h0IHx8ICF3aWR0aCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBsZXQgbmV3QnJlYWtwb2ludDpCcmVha3BvaW50O1xuXG4gICAgICAgICAgICAvLyBUaGUgbmV3IGJyZWFrcG9pbnQgaXMgdGhlIG5leHQgbG93ZXN0IHZhbHVlIGluIHRoZSBhcnJheVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBpOm51bWJlcjtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSB3aWR0aEJyZWFrcG9pbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGhCcmVha3BvaW50c1tpXVsxXSA8PSB3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgbmV3QnJlYWtwb2ludCA9IGkgPj0gMCA/IHdpZHRoQnJlYWtwb2ludHNbaV0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGJyZWFrcG9pbnQgaGFzbid0IGNoYW5nZWQsIGRvbid0IHJ1biB0aGUgcmVzdCBvZiB0aGlzIGxvZ2ljXG4gICAgICAgICAgICBpZiAobmV3QnJlYWtwb2ludCA9PT0gdGhpcy5jdXJyZW50QnJlYWtwb2ludCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBTZXQgb3VyIGN1cnJlbnQgYnJlYWtwb2ludCB0byB0aGUgbmV3bHkgZGVmaW5lZCBvbmVcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnQgPSBuZXdCcmVha3BvaW50O1xuXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbENsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lXG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzc05hbWU7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgYnJlYWtwb2ludCBjbGFzc2VzIGZyb20gdGhlIGVsZW1lbnQncyBjbGFzc1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnJlcGxhY2UoL1xcYnJpZGVzdHlsZXItc2hvd2Nhc2UtYnJlYWtwb2ludC0uKz8oPz0gfCQpL2dpLCBcIlwiKS50cmltKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBpbiB0aGUgYnJlYWtwb2ludCBjbGFzcyBpZiB3ZSBoYXZlIG9uZVxuICAgICAgICAgICAgaWYgKG5ld0JyZWFrcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgKz0gJyByaWRlc3R5bGVyLXNob3djYXNlLWJyZWFrcG9pbnQtJyArIG5ld0JyZWFrcG9pbnRbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBjbGFzc05hbWUgaGFzbid0IGNoYW5nZWQgZG8gbm90aGluZ1xuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gb3JpZ2luYWxDbGFzc05hbWUpIHJldHVybjtcblxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgICAgICB0aGlzLmJyZWFrcG9pbnRDaGFuZ2VkKG5ld0JyZWFrcG9pbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25zIHtcbiAgICAgICAgZGVidWc/OiB7XG4gICAgICAgICAgICBldmVudHM/OmJvb2xlYW47XG4gICAgICAgICAgICBzdGF0ZT86Ym9vbGVhbjtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBleHBvcnQgdHlwZSBSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncyA9IFxuICAgICAgICAoUmlkZVN0eWxlclNob3djYXNlT3B0aW9ucyAmIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VuKSB8IFxuICAgICAgICAoUmlkZVN0eWxlclNob3djYXNlT3B0aW9ucyAmIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXIpO1xuXG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VDb250YWluZXIgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJpZGVzdHlsZXJTaG93Y2FzZTogUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIGNvbnRhaW5lciBmb3IgdGhlIHNob3djYXNlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29udGFpbmVyOiBSaWRlU3R5bGVyU2hvd2Nhc2VDb250YWluZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIGNvbXBvbmVudHMgKHNjcmVlbnMgZm9yIGV4YW1wbGUpIHRvIGJlIHJlbmRlcmVkIGluIHRoZSBzaG93Y2FzZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBtYWluQ29tcG9uZW50czogTWFpbkNvbXBvbmVudEJhc2VbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogT3RoZXIgY29tcG9uZW50cyB0byBiZSByZW5kZXJlZCBpbiB0aGUgc2hvd2Nhc2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgb3RoZXJDb21wb25lbnRzOiBDb21wb25lbnRCYXNlW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiBzdGF0ZXMgdG8gbWFpbiBjb21wb25lbnRzXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHN0YXRlQ29tcG9uZW50TWFwcGluZzoge1tzdGF0ZTogbnVtYmVyXTpNYWluQ29tcG9uZW50QmFzZX07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgdmlzaWJsZSBtYWluIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50TWFpbkNvbXBvbmVudDogTWFpbkNvbXBvbmVudEJhc2U7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN0YXRlIGhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzdGF0ZTpzdGF0ZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN0eWxlIG1hbmFnZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzdHlsZTpzdHlsZXMuU3R5bGVNYW5hZ2VyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGV2ZW50czpldmVudHMuRXZlbnRIYW5kbGVyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXJsIGNoZWNrIGhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBwYXJhbWV0ZXJzOnBhcmFtZXRlcnMuUmlkZVN0eWxlclNob3djYXNlUGFyYW1ldGVyczsgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXR0aW5ncyBzcGVjaWZpZWQgd2hlbiB0aGUgc2hvd2Nhc2Ugd2FzIGNyZWF0ZWRcbiAgICAgICAgICovXG5cbiAgICAgICAgcHVibGljIHNldHRpbmdzOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXR0aW5ncyBsb2FkZWQgZnJvbSB0aGUgQVBJXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0dGluZ3NGcm9tQVBJOmFwaS5zZXR0aW5ncy5SaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5nc0Zyb21BUEk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmaWx0ZXIgY29udHJvbGxlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGZpbHRlcnM6ZmlsdGVycy5GaWx0ZXJDb250cm9sbGVyO1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGRvIG5vdCBpbml0aWFsaXplIGl0XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgUmlkZVN0eWxlciBTaG93Y2FzZSBpbnN0YW5jZSBhbmQgaW5pdGlhbGl6ZSBpdCBpbnNpZGUgYSBjb250YWluZXIgd2l0aCB0aGUgc3BlY2lmaWVkIElEXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXJJRCBTcGVjaWZpZXMgdGhlIElEIG9mIHRoZSBjb250YWluZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hvd2Nhc2UgaW5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb250YWluZXJJRDogc3RyaW5nLCBzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBpbml0aWFsaXplIGl0IGluc2lkZSB0aGUgc3BlY2lmaWVkIGNvbnRhaW5lclxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFNwZWNpZmllcyB0aGUgZWxlbWVudCB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yIChjb250YWluZXI6IEhUTUxFbGVtZW50LCBzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MpO1xuXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvciAoY29udGFpbmVyPzogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kZWJ1ZyA9IHRoaXMuc2V0dGluZ3MuZGVidWcgfHwge307XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IGV2ZW50cy5FdmVudEhhbmRsZXIoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWcuZXZlbnRzID09PSB0cnVlKVxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmRlYnVnQ2FsbGJhY2sgPSBmdW5jdGlvbiAobmFtZSwgZSwgaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdyZXNpemUnKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSaWRlU3R5bGVyU2hvd2Nhc2UgRXZlbnRdIE5hbWU6ICR7bmFtZX0gRGF0YTpgLCBlLCBoYW5kbGVycyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbmVyKSBjb25zb2xlLmVycm9yKCdUaGUgSUQgXCInICsgY29udGFpbmVyICsgJ1wiIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgRE9NLicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZShjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIHRoZSBtYWluIGNvbXBvbmVudHMgdXNlZCBieSB0aGUgc2hvd2Nhc2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJDb21wb25lbnRzKCk6IHZvaWQge1xuICAgICAgICAgICAgbGV0IGV2ZW50SGFuZGxlciA9IHRoaXMuZXZlbnRzO1xuXG4gICAgICAgICAgICAvLyBSZWdpc3RlciBvdGhlciBjb21wb25lbnRzIHRvIGJlIGRpc3BsYXllZFxuICAgICAgICAgICAgdGhpcy5vdGhlckNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQodGhpcylcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG91ciBtYXBwaW5nIG9mIHN0YXRlcyB0byBtYWluIGNvbXBvbmVudHNcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nID0ge307XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tTdGF0ZXMuQ2hvb3NlVmVoaWNsZV0gPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW1N0YXRlcy5WaXN1YWxpemVdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBtYWluQ29tcG9uZW50cyBmcm9tIHRoZSBzdGF0ZUNvbXBvbmVudE1hcHBpbmdcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHN0YXRlIGluIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbXBvbmVudHMucHVzaCh0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tzdGF0ZV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgY29udGFpbmVyIG9mIHRoaXMgc2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgKG9yIHJlLWluaXRpYWxpemUpIGl0XG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBpbml0aWFsaXplIHRoaXMgc2hvd2Nhc2UgaW5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIDogdm9pZCB7XG5cbiAgICAgICAgICAgIGlmICghY29udGFpbmVyKSB0aHJvdyBcIkNhbm5vdCBpbml0aWFsaXplIHNob3djYXNlIHdpdGhvdXQgYSBjb250YWluZXIgdG8gcHV0IGl0IGluLlwiO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IE9iamVjdEhlbHBlci5hc3NpZ24oY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgcmlkZXN0eWxlclNob3djYXNlOiB0aGlzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhcmFtZXRlcnMoKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU3RhdGUoKTtcblxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNvbXBvbmVudHMoKTtcblxuICAgICAgICAgICAgYXBpLmluaXRpYWxpemUodGhpcy5zZXR0aW5ncyk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0eWxlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZpbHRlcnMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29tcG9uZW50cygpO1xuXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbihcInZlaGljbGUtc2VsZWN0ZWRcIiwgc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdmVoaWNsZVNlbGVjdGlvblN0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc2VsZWN0aW9uLlZlaGljbGVDb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOiBzZWxlY3Rpb24uVmVoaWNsZURlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDogc2VsZWN0aW9uLlRpcmVPcHRpb25JRCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHNlbGVjdGlvbi5UaXJlT3B0aW9uU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFpbnRTY2hlbWU6IHNlbGVjdGlvbi5QYWludFNjaGVtZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogc2VsZWN0aW9uLnZlaGljbGVIYXNBbmdsZWRJbWFnZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHNlbGVjdGlvbi52ZWhpY2xlSGFzU2lkZUltYWdlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IHNlbGVjdGlvbi5jdXJyZW50VGlyZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbDogc2VsZWN0aW9uLmN1cnJlbnRXaGVlbCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IHNlbGVjdGlvbi5jdXJyZW50V2hlZWxGaXRtZW50IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmVPcHRpb246IHNlbGVjdGlvbi5jdXJyZW50VGlyZU9wdGlvbiB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogc2VsZWN0aW9uLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdXNwZW5zaW9uOiBzZWxlY3Rpb24uY3VycmVudFN1c3BlbnNpb24gfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNoYW5nZVN0YXRlKFN0YXRlcy5WaXN1YWxpemUsIHZlaGljbGVTZWxlY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHNldHRpbmdzUmV0cmlldmVkID0gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5hdXRoZW50aWNhdGVkLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5zZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRvbmUoc2V0dGluZ3NGcm9tQVBJID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc0Zyb21BUEkgPSBzZXR0aW5nc0Zyb21BUEk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwoW3RoaXMuc3R5bGUuaW5pdGlhbGl6ZWQsIHNldHRpbmdzUmV0cmlldmVkXSkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignaW5pdGlhbGl6ZWQnLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZWQoe1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlOiB0aGlzLnN0YXRlLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICAgICAgICBvbGRTdGF0ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG5ld0RhdGE6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBuZXcgc3RhdGUuUmlkZVN0eWxlclNob3djYXNlU3RhdGUoU3RhdGVzLkNob29zZVZlaGljbGUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Zy5zdGF0ZSA9PT0gdHJ1ZSkgdGhpcy5zdGF0ZS5kZWJ1Z0NhbGxiYWNrID0gZnVuY3Rpb24oZSwgZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmluaXNoZWRTdHJpbmcgPSBmaW5pc2hlZCA/ICdGaW5pc2hlZCcgOiAnQmVnaW5uaW5nJztcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGVDaGFuZ2UgPSBcInRvIFwiICsgU3RhdGVzW2UubmV3U3RhdGVdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLm9sZFN0YXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZUNoYW5nZSA9IFwiZnJvbSBcIiArIFN0YXRlc1tlLm9sZFN0YXRlXSArIFwiIFwiICsgc3RhdGVDaGFuZ2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSaWRlU3R5bGVyU2hvd2Nhc2UgU3RhdGVdICR7c3RhdGVDaGFuZ2V9ICR7ZmluaXNoZWRTdHJpbmd9YCwgZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm9uQ2hhbmdlKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLnRyaWdnZXIoXCJzdGF0ZS1jaGFuZ2VkXCIsIGUpICYmIHRoaXMub25TdGF0ZUNoYW5nZWQoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVN0eWxlKCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBzdHlsZXMuU3R5bGVNYW5hZ2VyKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25SZXNpemUgPSAoKSA9PiB0aGlzLmV2ZW50cy50cmlnZ2VyKCdyZXNpemUnLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5vblJlc2l6ZWQgPSAoKSA9PiB0aGlzLmV2ZW50cy50cmlnZ2VyKCdyZXNpemVkJywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25CcmVha3BvaW50Q2hhbmdlZCA9IG5ld0JyZWFrcG9pbnQgPT4gdGhpcy5ldmVudHMudHJpZ2dlcignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdyaWRlc3R5bGVyLXNob3djYXNlJykpXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplUGFyYW1ldGVycygpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IG5ldyBwYXJhbWV0ZXJzLlJpZGVTdHlsZXJTaG93Y2FzZVBhcmFtZXRlcnMoKTtcblxuICAgICAgICB9O1xuXG5cbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplRmlsdGVycygpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IG5ldyBmaWx0ZXJzLkZpbHRlckNvbnRyb2xsZXIoKTtcblxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnNldFZlaGljbGUoe1xuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOiBzZWxlY3Rpb24uVmVoaWNsZUNvbmZpZ3VyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSUQ6IHNlbGVjdGlvbi5UaXJlT3B0aW9uSURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbihcInZlaGljbGUtZGVzY3JpcHRpb24tbG9hZGVkXCIsIHNlbGVjdGVkVmVoaWNsZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnNldFZlaGljbGVEZXNjcmlwdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIEhhc1NpZGVJbWFnZTogc2VsZWN0ZWRWZWhpY2xlLkhhc1NpZGVJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgSGFzQW5nbGVkSW1hZ2U6IHNlbGVjdGVkVmVoaWNsZS5IYXNBbmdsZWRJbWFnZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVDb21wb25lbnRzKCkge1xuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5vdGhlckNvbXBvbmVudHMpXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5tYWluQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29tcG9uZW50LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByaXZhdGUgb25TdGF0ZUNoYW5nZWQoZXY6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50KTpib29sZWFuIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudENvbXBvbmVudChldik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYWN0aXZlTG9hZGluZ1Nlc3Npb25LZXlzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ3VycmVudENvbXBvbmVudChldjpzdGF0ZS5TdGF0ZUNoYW5nZWRFdmVudCkge1xuICAgICAgICAgICAgbGV0IG5ld0NvbXBvbmVudDpNYWluQ29tcG9uZW50QmFzZSA9IHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW2V2Lm5ld1N0YXRlXTtcbiAgICAgICAgICAgIGxldCBvbGRDb21wb25lbnQ6TWFpbkNvbXBvbmVudEJhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNsYXNzUHJlZml4ID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc3RhdGUtJztcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBldi5vbGRTdGF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBvbGRDb21wb25lbnQgPSB0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tldi5vbGRTdGF0ZV07XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShzdGF0ZUNsYXNzUHJlZml4ICsgU3RhdGVzW2V2Lm9sZFN0YXRlXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChzdGF0ZUNsYXNzUHJlZml4ICsgU3RhdGVzW2V2Lm5ld1N0YXRlXS50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgICAgaWYgKG9sZENvbXBvbmVudCAmJiBvbGRDb21wb25lbnQuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICBvbGRDb21wb25lbnQuaGlkZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBkbyBub3QgaW5pdGlhbGl6ZSBpdFxuICAgICAqIEBwYXJhbSBzZXR0aW5nc1xuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBJRFxuICAgICAqIEBwYXJhbSBjb250YWluZXJJRCBTcGVjaWZpZXMgdGhlIElEIG9mIHRoZSBjb250YWluZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hvd2Nhc2UgaW5cbiAgICAgKiBAcGFyYW0gc2V0dGluZ3NcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlKGNvbnRhaW5lcklEOiBzdHJpbmcsIHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBpbml0aWFsaXplIGl0IGluc2lkZSB0aGUgc3BlY2lmaWVkIGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSBjb250YWluZXIgU3BlY2lmaWVzIHRoZSBlbGVtZW50IHRvIGluaXRpYWxpemUgdGhlIHNob3djYXNlIGluXG4gICAgICogQHBhcmFtIHNldHRpbmdzXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSAoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUgKGNvbnRhaW5lcj86IGFueSwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UoY29udGFpbmVyLCBzZXR0aW5ncyk7XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnRCYXNlIGltcGxlbWVudHMgSUNvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yIChzaG93Y2FzZUluc3RhbmNlOiBSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgdGhpcy5zaG93Y2FzZSA9IHNob3djYXNlSW5zdGFuY2U7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHNob3djYXNlSW5zdGFuY2UuZXZlbnRzO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHNob3djYXNlSW5zdGFuY2Uuc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBzaG93Y2FzZUluc3RhbmNlLnBhcmFtZXRlcnM7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBvbmVudCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc2hvd2Nhc2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2U7XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBldmVudHM6ZXZlbnRzLkV2ZW50SGFuZGxlcjtcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IHN0YXRlOnN0YXRlLlJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlO1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcGFyYW1ldGVyczpwYXJhbWV0ZXJzLlJpZGVTdHlsZXJTaG93Y2FzZVBhcmFtZXRlcnM7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1haW4gZWxlbWVudCBmb3IgdGhpcyBjb21wb25lbnRcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBjb21wb25lbnQ6IEhUTUxFbGVtZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciB0aGUgYmFzZSBjb21wb25lbnQgaXMgaW5pdGlhbGl6ZWRcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge31cbiAgICB9XG59IixudWxsLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWFpbkNvbXBvbmVudEJhc2UgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtbWFpbi1jb21wb25lbnQnKTtcblxuICAgICAgICAgICAgaWYgKFN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkKVxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoU3R5bGVIZWxwZXIudHJhbnNpdGlvbkVuZEV2ZW50LCBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB0cmFuc2l0aW9ucyBvbiB0aGlzIGNvbXBvbmVudCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcy5jb21wb25lbnQpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5idWlsZENvbXBvbmVudCh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZU1haW5Db21wb25lbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciB0aGUgYmFzZSBjb21wb25lbnQgaXMgY29uc3RydWN0ZWRcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge31cblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvdmVycmlkYWJsZSBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgdGhlIG1haW4gY29tcG9uZW50IGlzIGNvbnN0cnVjdGVkXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZU1haW5Db21wb25lbnQoKSB7fVxuXG4gICAgICAgIHByaXZhdGUgX3Zpc2libGU6IGJvb2xlYW47XG4gICAgICAgIHByaXZhdGUgX2FuaW1hdGluZzogYm9vbGVhbjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGNvbnRhaW5lciBUaGUgY29udGFpbmVyIHRvIGJ1aWxkIHRoZSBjb21wb25lbnQgaW5cbiAgICAgICAgICovXG5cbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcjpIVE1MRWxlbWVudCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9uZW50IGlzIHZpc2libGVcbiAgICAgICAgICogQHJldHVybiB0cnVlLCBpZiB0aGlzIGNvbXBvbmVudCBpcyB2aXNpYmxlLCBvdGhlcndpc2UgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGlzVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92aXNpYmxlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUvc2hvdyB0aGUgY29tcG9uZW50IHdpdGhvdXQgYW5pbWF0aW9uXG4gICAgICAgICAqIEBwYXJhbSB2aXNpYmxlIElmIHRydWUsIHNob3cgdGhlIGNvbXBvbmVudCwgb3RoZXJ3aXNlIGhpZGUgdGhlIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0VmlzaWJsZSh2aXNpYmxlOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl92aXNpYmxlID09PSB2aXNpYmxlKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlU3R5bGluZyh2aXNpYmxlKVxuXG4gICAgICAgICAgICBTdHlsZUhlbHBlci5za2lwVHJhbnNpdGlvbih0aGlzLmNvbXBvbmVudCwgKCkgPT4gdmlzaWJsZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZXRWaXNpYmxlU3R5bGluZyh2aXNpYmxlOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGxldCBzdHlsZXMgPSB0aGlzLmNvbXBvbmVudC5zdHlsZTtcblxuICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBzdHlsZXMudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgICAgICAgICBzdHlsZXMudG9wID0gJyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlcy52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgc3R5bGVzLnRvcCA9ICcxMDAwJSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjazoodGhpczp0aGlzKT0+dm9pZCkge1xuICAgICAgICAgICAgLy8gQ2FsbCB0aGUgY2FsbGJhY2sgYWZ0ZXIgdGhlIHZpZXcgaGFzIGJlZW4gYW5pbWF0ZWQgaW4gXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiBjYWxsYmFjay5jYWxsKHRoaXMpKTtcbiAgICAgICAgICAgIGVsc2UgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgYmVmb3JlIHRoaXMgY29tcG9uZW50IGlzIHNob3duXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93KCkge31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhpcyBjb21wb25lbnQgaXMgc2hvd24gYnV0IGFmdGVyIGl0IGhhcyByZWNlaXZlZCBkaW1lbnNpb25zXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25EaXNwbGF5KCkge31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBhZnRlciB0aGUgY29tcG9uZW50IGlzIHNob3duXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93bigpe31cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBoaWRkZW5cbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGUoKSB7fVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgaGlkZGVuXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25IaWRkZW4oKSB7fVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbmltYXRlIHRoZSBjb21wb25lbnQgaW50byB0aGUgdmlld1xuICAgICAgICAgKi9cbiAgICAgICAgc2hvdyhjYWxsYmFjaz86KHRoaXM6dGhpcyk9PnZvaWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luJykpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgY29tcG9uZW50IGlzIGFscmVhZHkgdmlzaWJsZSwgdHJpZ2dlciB0aGUgY2FsbGJhY2sgYXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbFdoZW5Eb25lQW5pbWF0aW5nKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9hbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHZpZXcgaXMgYW5pbWF0aW5nIG91dCwgc2hvdyBpdCBhZnRlciBpdCdzIGRvbmVcbiAgICAgICAgICAgICAgICBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiB0aGlzLnNob3coY2FsbGJhY2spKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW5nID0gU3R5bGVIZWxwZXIudHJhbnNpdGlvbnNTdXBwb3J0ZWQ7XG5cblxuICAgICAgICAgICAgdGhpcy5vblNob3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlU3R5bGluZyh0cnVlKTtcblxuICAgICAgICAgICAgU3R5bGVIZWxwZXIudHJpZ2dlclJlZmxvdyh0aGlzLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIHRoaXMub25EaXNwbGF5KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2FsbFdoZW5Eb25lQW5pbWF0aW5nKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hvd24oKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuaW1hdGUgdGhlIGNvbXBvbmVudCBvdXQgb2YgdGhlIHZpZXdcbiAgICAgICAgICovXG4gICAgICAgIGhpZGUoY2FsbGJhY2s/Oih0aGlzOnRoaXMpPT52b2lkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5jb250YWlucygnaW4nKSkge1xuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgaGlkZGVuXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2aWV3IGlzIGFuaW1hdGluZyBpbiwgc2hvdyBpdCBhZnRlciBpdCdzIGRvbmVcbiAgICAgICAgICAgICAgICBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiB0aGlzLmhpZGUoY2FsbGJhY2spKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IFN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhpZGRlbigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QucmVtb3ZlKCdpbicpO1xuXG4gICAgICAgICAgICBpZiAoIVN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkKVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZVN0eWxpbmcoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUgY29tcG9uZW50cyBhZnRlciB0cmFuc2l0aW9uIG91dFxuICAgICAgICAgKi9cbiAgICAgICAgb25UcmFuc2l0aW9uRW5kKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luJykpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlU3R5bGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBCb3ggPSBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5Cb3g7XG5cbiAgICBjb25zdCBkZWZhdWx0U2l6ZTpCb3ggPSB7XG4gICAgICAgIHdpZHRoOiAyMDAsXG4gICAgICAgIGhlaWdodDogMjAwXG4gICAgfTtcblxuICAgIGNvbnN0IG1pbmltdW1TaXplOkJveCA9IHtcbiAgICAgICAgd2lkdGg6IDUwLFxuICAgICAgICBoZWlnaHQ6IDUwXG4gICAgfTtcblxuICAgIGNvbnN0IG1heGltdW1TaXplOkJveCA9IHtcbiAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgaGVpZ2h0OiA4MDBcbiAgICB9O1xuXG4gICAgY29uc3QgZGVmYXVsdFBvc2l0aW9uOnJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VSZW5kZXJSZXF1ZXN0ID0ge1xuICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5OZWFyLCAvLyBUb3AsXG4gICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLk5lYXIgIC8vIExlZnRcbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgUmVzaXplYWJsZVJlc291cmNlSW1hZ2U8XG4gICAgICAgIEVuZHBvaW50IGV4dGVuZHMgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJRW5kcG9pbnQsXG4gICAgICAgIEltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zIGV4dGVuZHMgcmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVxdWVzdE1hcHBpbmdbRW5kcG9pbnRdfHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VSZW5kZXJSZXF1ZXN0XG4gICAgICAgICAgICAgPSByaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXF1ZXN0TWFwcGluZ1tFbmRwb2ludF1cbiAgICA+IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJvdW5kaW5nIGNvbnRhaW5lciBmb3IgdGhlIGltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGNvbnRhaW5lcjpIVE1MRWxlbWVudDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW1hZ2U6SFRNTEltYWdlRWxlbWVudDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBkZXRlY3RlZCBzaXplIG9mIHRoZSBjb250YWluZXJcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgY3VycmVudFNpemU6Qm94O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgUmlkZVN0eWxlciBBUEkgYWN0aW9uIHRvIGNhbGwgdG8gcmVuZGVyIHRoZSBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBhY3Rpb246RW5kcG9pbnQ7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzZXQgb2YgYmFzZSBpbnN0cnVjdGlvbnMgdG8gcmVuZGVyIHRoZSB2ZWhpY2xlIHdpdGhcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgYmFzZUluc3RydWN0aW9uczpJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgaW5zdHJ1Y3Rpb25zL3BhcmFtZXRlcnMgdG8gcmVuZGVyIHRoZSBpbWFnZSB3aXRoXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGluc3RydWN0aW9uczpJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucztcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSAob3IgdHJhbnNpdGlvbmluZyB0byBiZSB2aXNpYmxlKVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2aXNpYmxlOmJvb2xlYW47XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIHRyYW5zaXRpb25zIHNob3VsZCBiZSB1c2VkXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHVzZVRyYW5zaXRpb25zOmJvb2xlYW47XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjbGFzcyB0byBhdHRhY2ggdG8gdGhlIGVsZW1lbnQgdG8gc2hvdyBpdCB3aXRoIGEgdHJhbnNpdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2l0aW9uSW5DbGFzczpzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbGJhY2sgdG8gYXR0YWNoIHRvIHRoZSBpbWFnZSBsb2FkIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGltYWdlTG9hZENhbGxiYWNrOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlTG9hZENhbGxiYWNrO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNhbGxiYWNrIHRvIGF0dGFjaCB0byB0aGUgaW1hZ2UgZXJyb3IgZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgaW1hZ2VFcnJvckNhbGxiYWNrOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlRXJyb3JDYWxsYmFjaztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayB0byBjYWxsIHdoZW4gdGhlIGltYWdlIGlzIGRpc3BsYXllZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBpbWFnZURpc3BsYXlDYWxsYmFjazpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUV2ZW50Q2FsbGJhY2s7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwYWRkaW5nIG9mIHRoZSBjb250YWluZXIgb3IgcGFkZGluZyBjYWxjdWxhdG9yXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHBhZGRpbmc6IEJveHxSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5QYWRkaW5nQ2FsY3VsYXRvcjtcblxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50czpbRXZlbnRUYXJnZXQsc3RyaW5nLEV2ZW50TGlzdGVuZXJdW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byByZW5kZXIgdGhlIGltYWdlIGluXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb250YWluZXI6SFRNTEVsZW1lbnQsIG9wdGlvbnM6e1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgaW1hZ2UgZW5kcG9pbnRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYWN0aW9uOiBFbmRwb2ludCxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbnN0cnVjdGlvbnMgZm9yIHJlbmRlcmluZyB0aGUgaW1hZ2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zPzogSW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnMsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQmFzZSBpbnN0cnVjdGlvbnMgZm9yIHJlbmRlcmluZyB0aGUgaW1hZ2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYmFzZUluc3RydWN0aW9ucz86IEltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIGxvYWQgdGhlIGltYWdlIHdoZW4gZmlyc3QgY3JlYXRlZFxuICAgICAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbG9hZEluaXRpYWxseT86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgbGlzdGVuIHRvIHRoZSB3aW5kb3cgcmVzaXplIGV2ZW50XG4gICAgICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxpc3RlblRvV2luZG93UmVzaXplPzogYm9vbGVhbjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBIGZ1bmN0aW9uIHRvIGNhbGwgZWFjaCB0aW1lIHRoZSBpbWFnZSBpcyBsb2FkZWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb25Mb2FkPzogUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VMb2FkQ2FsbGJhY2s7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGltYWdlIGhhcyBhbiBlcnJvciBsb2FkaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uRXJyb3I/OiBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUVycm9yQ2FsbGJhY2s7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGltYWdlIGlzIGZ1bGx5IHZpc2libGUgKGFmdGVyIGFueSB0cmFuc2l0aW9ucylcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb25EaXNwbGF5ZWQ/OiBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUV2ZW50Q2FsbGJhY2s7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIHBhZGRpbmcgZm9yIHRoZSBjb250YWluZXIgdG8gZGlzcGxheSB0aGUgaW1hZ2UgaW4uIElmIG5vdCBzcGVjaWZpZWRcbiAgICAgICAgICAgICAqIGl0IHdpbGwgYmUgY2FsY3VsYXRlZC4gSWYgZmFsc2UgcGFkZGluZyB3aWxsIG5vdCBiZSBjYWxjdWxhdGVkLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwYWRkaW5nPzogZmFsc2V8UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuQm94fFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLlBhZGRpbmdDYWxjdWxhdG9yO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHNwZWNpZmllZCB1c2UgdGhlIGZvbGxvd2luZyB0cmFuc2l0aW9uIGNsYXNzIHRvIGRpc3BsYXkgdGhlIGltYWdlLlxuICAgICAgICAgICAgICogSWYgdW5zcGVjaWZpZWQgZG9uJ3QgdXNlIHRyYW5zaXRpb25zXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJhbnNpdGlvbkNsYXNzPzogc3RyaW5nO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBjbGFzcyB0byBhcHBseSB0byB0aGUgaW1hZ2UgdG8gdHJhbnNpdGlvbiBpdCBcImluXCJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IFwiaW5cIlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmFuc2l0aW9uSW5DbGFzcz86IHN0cmluZztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgZGVmYXVsdCBzaXplIGF0IHdoaWNoIHRvIHJlbmRlciB0aGUgaW1hZ2UgaWYgb25lIGNhbm5vdFxuICAgICAgICAgICAgICogYmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IHtcIndpZHRoXCI6IDIwMCwgXCJoZWlnaHRcIjogMjAwfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT86IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGhlaWdodDogbnVtYmVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9IG9wdGlvbnMuYWN0aW9uO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmltYWdlKTtcblxuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBbXTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudHJhbnNpdGlvbkNsYXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5jbGFzc0xpc3QuYWRkKG9wdGlvbnMudHJhbnNpdGlvbkNsYXNzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZVRyYW5zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uSW5DbGFzcyA9IG9wdGlvbnMudHJhbnNpdGlvbkluQ2xhc3M7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wYWRkaW5nID09PSAndW5kZWZpbmVkJykgdGhpcy5wYWRkaW5nID0gU3R5bGVIZWxwZXIuY2FsY3VsYXRlUGFkZGluZztcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucGFkZGluZyA9PT0gZmFsc2UpIHRoaXMucGFkZGluZyA9IHt3aWR0aDogMCwgaGVpZ2h0OiAwfTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy5wYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlTG9hZENhbGxiYWNrID0gb3B0aW9ucy5vbkxvYWQ7XG4gICAgICAgICAgICB0aGlzLmltYWdlRXJyb3JDYWxsYmFjayA9IG9wdGlvbnMub25FcnJvcjtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yID0+IHRoaXMub25JbWFnZUVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICB0aGlzLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBldmVudCA9PiB0aGlzLm9uSW1hZ2VMb2FkKGV2ZW50KSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5iYXNlSW5zdHJ1Y3Rpb25zID09PSAnb2JqZWN0JykgdGhpcy5iYXNlSW5zdHJ1Y3Rpb25zID0gb3B0aW9ucy5iYXNlSW5zdHJ1Y3Rpb25zXG5cbiAgICAgICAgICAgIGlmICh0aGlzLmluc3RydWN0aW9ucyAmJiBvcHRpb25zLmxvYWRJbml0aWFsbHkgIT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMuaW5zdHJ1Y3Rpb25zKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGlzdGVuVG9XaW5kb3dSZXNpemUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpbWVvdXQ6bnVtYmVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdhaXRNcyA9IDUwMDtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCByZXNpemVDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCB3YWl0TXMpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMucHVzaChbd2luZG93LCAncmVzaXplJywgcmVzaXplQ2FsbGJhY2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsIHRoaXMgZnVuY3Rpb24gYWZ0ZXIgdGhlIGNvbXBvbmVudCB3aWxsIG5vIGxvbmdlciBiZSB1c2VkXG4gICAgICAgICAqIHRvIHJlbW92ZSBhbnkgaW50ZXJuYWxseSBhdHRhY2hlZCBldmVudCBoYW5kbGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlZ2lzdGVyZWRFdmVudCBvZiB0aGlzLmV2ZW50cykge1xuICAgICAgICAgICAgICAgIGxldCBbdGFyZ2V0LCBldmVudFR5cGUsIGxpc3RlbmVyXSA9IHJlZ2lzdGVyZWRFdmVudDtcblxuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByZXNpemVDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoZWQgdG8gdGhlIGltYWdlIGVycm9yIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSBlcnJvckV2ZW50IFRoZSBlcnJvciBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBvbkltYWdlRXJyb3IoZXJyb3JFdmVudDpFcnJvckV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW1hZ2VFcnJvckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlRXJyb3JDYWxsYmFjayh0aGlzLmltYWdlLCBlcnJvckV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRhY2hlZCB0byB0aGUgaW1hZ2UgbG9hZCBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIGltYWdlIGxvYWQgZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgb25JbWFnZUxvYWQoZXZlbnQ6RXZlbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbWFnZUxvYWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRDYWxsYmFjayh0aGlzLmltYWdlLCBldmVudCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy52aXNpYmxlKSB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93IHRoZSBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBzaG93KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlzaWJsZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAodGhpcy51c2VUcmFuc2l0aW9ucykge1xuICAgICAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2hvdyh0aGlzLmltYWdlLCB0aGlzLnRyYW5zaXRpb25JbkNsYXNzKS5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltYWdlRGlzcGxheUNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VEaXNwbGF5Q2FsbGJhY2sodGhpcy5pbWFnZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBzaXplIG9mIHRoZSBpbWFnZSBmcm9tIHRoZSBjb250YWluZXJcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgY2FsY3VsYXRlUmVuZGVyU2l6ZSgpOkJveCB7XG4gICAgICAgICAgICAvLyBHcmFiIHRoZSBzaXplIG9mIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgIGxldCB7Y2xpZW50V2lkdGgsIGNsaWVudEhlaWdodH0gPSB0aGlzLmNvbnRhaW5lcjtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIGRlZmF1bHQgc2l6ZSBpZiB0aGUgY29udGFpbmVyIHdhcyBub3QgYWJsZSB0byBiZSBkZXRlY3RlZFxuICAgICAgICAgICAgaWYgKCFjbGllbnRIZWlnaHQgfHwgIWNsaWVudFdpZHRoKSByZXR1cm4gZGVmYXVsdFNpemU7XG5cbiAgICAgICAgICAgIC8vIEdyYWIgdGhlIHBhZGRpbmcgc2l6ZVxuICAgICAgICAgICAgbGV0IHBhZGRpbmc6UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuQm94ID0gdHlwZW9mIHRoaXMucGFkZGluZyA9PT0gJ2Z1bmN0aW9uJyA/IFxuICAgICAgICAgICAgICAgIHRoaXMucGFkZGluZyh0aGlzLmNvbnRhaW5lcikgOlxuICAgICAgICAgICAgICAgIHRoaXMucGFkZGluZztcblxuICAgICAgICAgICAgLy8gVGhlIGRldGVjdGVkIHNpemUgb2YgdGhlIGNvbnRhaW5lciBtaW51cyBwYWRkaW5nXG4gICAgICAgICAgICBsZXQgZGV0ZWN0ZWRTaXplOkJveCA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogY2xpZW50V2lkdGggLSBwYWRkaW5nLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY2xpZW50SGVpZ2h0IC0gcGFkZGluZy5oZWlnaHRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgcGl4ZWwgcmF0aW8gZm9yIHJldGluYSBzY3JlZW5zXG4gICAgICAgICAgICBsZXQgcGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG5cbiAgICAgICAgICAgIC8vIEFkanVzdCB0aGUgZGV0ZWN0ZWQgc2l6ZSB0byBhY2NvdW50IGZvciBwaXhlbCByYXRpb1xuICAgICAgICAgICAgZGV0ZWN0ZWRTaXplLndpZHRoICo9IHBpeGVsUmF0aW87XG4gICAgICAgICAgICBkZXRlY3RlZFNpemUuaGVpZ2h0ICo9IHBpeGVsUmF0aW87XG5cbiAgICAgICAgICAgIHJldHVybiBCb3hIZWxwZXIuZmxvb3IoQm94SGVscGVyLmJvdW5kKGRldGVjdGVkU2l6ZSwgbWluaW11bVNpemUsIG1heGltdW1TaXplKSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHNpemVJc0RpZmZlcmVudChib3g6IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkJveCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudFNpemUpIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzV2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzSGVpZ2h0XG4gICAgICAgICAgICB9ID0gdGhpcy5jdXJyZW50U2l6ZTtcblxuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogYm94V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBib3hIZWlnaHRcbiAgICAgICAgICAgIH0gPSBib3g7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzV2lkdGggIT09IGJveFdpZHRoIHx8IHRoaXNIZWlnaHQgIT09IGJveEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgb3IgY3JlYXRlIHRoZSBpbWFnZVxuICAgICAgICAgKiBAcGFyYW0gaW5zdHJ1Y3Rpb25zIE5ldyBpbnN0cnVjdGlvbnMgdG8gcmVuZGVyIHRoZSBpbWFnZSB3aXRoXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgdXBkYXRlKGluc3RydWN0aW9ucz86SW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCBuZWVkc1VwZGF0ZTpib29sZWFuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbnN0cnVjdGlvbnNcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbnMgJiYgdGhpcy5pbnN0cnVjdGlvbnMgIT09IGluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zO1xuICAgICAgICAgICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIHNpemVcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVuZGVyU2l6ZTpCb3ggPSB0aGlzLmNhbGN1bGF0ZVJlbmRlclNpemUoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpemVJc0RpZmZlcmVudChyZW5kZXJTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTaXplID0gcmVuZGVyU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMuY3VycmVudFNpemU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IHJpZGVzdHlsZXIuYWpheC51cmwodGhpcy5hY3Rpb24sIE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBXaWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIEhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICAgICAgfSwgZGVmYXVsdFBvc2l0aW9uLCB0aGlzLmJhc2VJbnN0cnVjdGlvbnMsIHRoaXMuaW5zdHJ1Y3Rpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBCb3gge1xuICAgICAgICAgICAgd2lkdGg6IG51bWJlcjtcbiAgICAgICAgICAgIGhlaWdodDogbnVtYmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBJbWFnZUV2ZW50Q2FsbGJhY2sge1xuICAgICAgICAgICAgKGltYWdlOkhUTUxJbWFnZUVsZW1lbnQpOnZvaWQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VMb2FkQ2FsbGJhY2sgZXh0ZW5kcyBJbWFnZUV2ZW50Q2FsbGJhY2sge1xuICAgICAgICAgICAgKGltYWdlOkhUTUxJbWFnZUVsZW1lbnQsIGV2ZW50OkV2ZW50KTp2b2lkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEltYWdlRXJyb3JDYWxsYmFjayBleHRlbmRzIEltYWdlRXZlbnRDYWxsYmFjayB7XG4gICAgICAgICAgICAoaW1hZ2U6SFRNTEltYWdlRWxlbWVudCwgZXZlbnQ6RXJyb3JFdmVudCk6dm9pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFkZGluZ0NhbGN1bGF0b3Ige1xuICAgICAgICAgICAgKGNvbnRhaW5lcjpFbGVtZW50KTpCb3g7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgY29tcG9uZW50OkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1iYWNrZ3JvdW5kJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kVGV4dHVyZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYmFja2dyb3VuZC10ZXh0dXJlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogYmFja2dyb3VuZEVsZW1lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGJhY2tncm91bmRFbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXInO1xuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gY2xhc3NOYW1lICsgJy1vcHRpb24nO1xuICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWFjdGl2ZSc7XG4gICAgbGV0ICAgb3B0aW9uc0NvdW50ID0gMTtcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8VD4gZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHVibGljIG9wdGlvbkNsaWNrZWQ6IGJvb2xlYW47IFxuICAgICAgICBwcml2YXRlIG9wdGlvbkNvbnRhaW5lcjpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOiBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIuU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzIuNWVtJyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnLFxuICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbnMudGl0bGUsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9PSAnMCcgPyAnMScgOiAnMCc7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID09ICdzY2FsZVkoMCknID8gJ3NjYWxlWSgxKScgOiAnc2NhbGVZKDApJztcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPT0gJzBweCcgPyAnYXV0bycgOiAnMHB4JztcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9PSAnMi41ZW0nID8gJzQuNWVtJyA6ICcyLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnN2VtJyA6ICcyLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnOS4yNWVtJyA6ICcyLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnMTEuMjVlbScgOiAnMi41ZW0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnMi41ZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW9wdGlvbi1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAnMCcsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWSgwKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wdGlvbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVZKDEpJztcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnYXV0byc7ICBcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICc0LjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzdlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzkuMjVlbSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzExLjI1ZW0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnMi41ZW0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVkoMCknO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiBcbiAgICAgICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLk9wdGlvbjxUPltdKSB7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgb3B0aW9uc0NvdW50ID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbkVsZW1lbnQ6UmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLk9wdGlvbkVsZW1lbnQ8VD4gPSBPYmplY3QuYXNzaWduKEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb24ubGFiZWxcbiAgICAgICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmFjdGl2ZSkgb3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcblxuICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uT3B0aW9uQ2xpY2soZXZlbnQ6TW91c2VFdmVudCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6SFRNTEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBwYXJlbnRzIHVudGlsIHdlJ3ZlIHJlYWNoZWQgdGhlIGJvdW5kIGVsZW1lbnRcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLm9wdGlvbkNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25DbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQW4gb3B0aW9uIHdhcyBjbGlja2VkXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBhY3RpdmUgY2xhc3MgZnJvbSB0aGUgb2xkIG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBIVE1MSGVscGVyLmNoaWxkcmVuV2l0aENsYXNzZXModGhpcy5vcHRpb25Db250YWluZXIsIGFjdGl2ZUNsYXNzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgbmV3IG9uZVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoYWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25TZWxlY3RlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25TZWxlY3RlZENhbGxiYWNrKChjdXJyZW50VGFyZ2V0IGFzIFJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5PcHRpb25FbGVtZW50PFQ+KS52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgb3B0aW9uU2VsZWN0ZWRDYWxsYmFjazogKHZhbHVlOlQpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzIHtcbiAgICAgICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbkVsZW1lbnQ8VD4gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgICAgICB2YWx1ZTogVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uPFQ+IHtcbiAgICAgICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICAgICAgICB2YWx1ZTogVDtcbiAgICAgICAgICAgIGFjdGl2ZT86IGJvb2xlYW47XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbD4ge1xuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2Utd2hlZWwtc2l6ZScpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jaGFuZ2Utd2hlZWwtc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzOldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSwgYWN0aXZlRml0bWVudD86V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCkge1xuICAgICAgICAgICAgbGV0IHNlZW5EaWFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGxldCBkaWFtZXRlckZpdG1lbnRzOltudW1iZXIsV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbF1bXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBmaXRtZW50IG9mIGZpdG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpYW1ldGVyID0gZml0bWVudC5EaWFtZXRlck1pbjtcblxuICAgICAgICAgICAgICAgIGlmIChkaWFtZXRlciBpbiBzZWVuRGlhbWV0ZXJzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWVuRGlhbWV0ZXJzW2RpYW1ldGVyXSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5wdXNoKFtkaWFtZXRlciwgZml0bWVudF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChkaWFtZXRlckZpdG1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9ucyhBcnJheUhlbHBlci5tYXAoZGlhbWV0ZXJGaXRtZW50cywgZGlhbWV0ZXJGaXRtZW50ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXJGaXRtZW50WzBdICsgJ+KAsycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlckZpdG1lbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZGlhbWV0ZXJGaXRtZW50WzFdID09PSBhY3RpdmVGaXRtZW50XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBtb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtbW9kYWwnO1xuICAgIGNvbnN0IGJhY2tkcm9wQ2xhc3MgPSBtb2RhbENsYXNzICsgJy1iYWNrZHJvcCc7XG5cbiAgICBpbXBvcnQgQWN0aW9uID0gUmlkZVN0eWxlclNob3djYXNlTW9kYWwuQWN0aW9uO1xuICAgIGltcG9ydCBPcHRpb25zID0gUmlkZVN0eWxlclNob3djYXNlTW9kYWwuT3B0aW9ucztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1haW4gbW9kYWwgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGNvbXBvbmVudDogSFRNTEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IGRpc3BsYXllZCBiYWNrZHJvcFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGJhY2tkcm9wOiBIVE1MRWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwYXJlbnQgZWxlbWVudCBvZiB0aGUgbW9kYWxcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcGFyZW50Ok5vZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3B0aW9ucyB0aGF0IHRoZSBtb2RhbCB3YXMgY3JlYXRlZCB3aXRoXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb3B0aW9uczogT3B0aW9ucztcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOiBPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBiYWNrZHJvcCBpZiBuZWVkZWRcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQmFja2Ryb3BJZk5lZWRlZCgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG1vZGFsXG4gICAgICAgICAgICB0aGlzLmJ1aWxkTW9kYWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9kYWxzIHN0YXJ0IG9mZiBoaWRkZW4gdW50aWwgc2hvd25cbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eShmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIE1vZGFscyBhcmUgYXBwZW5kZWQgdG8gdGhlIHNob3djYXNlIGNvbnRhaW5lclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBzaG93Y2FzZUluc3RhbmNlLmNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdWlsZCB0aGUgbW9kYWwgRE9NIHN0cnVjdHVyZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkTW9kYWwoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IE9iamVjdC5hc3NpZ24oSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBtb2RhbENsYXNzXG4gICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgIG1vZGFsOiB0aGlzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mdWxsKSB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKG1vZGFsQ2xhc3MgKyAnLWZ1bGwnKVxuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG1vZGFsQ2xhc3MgKyAnLWNsb3NlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYWN0aW9ucylcbiAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkQWN0aW9ucyh0aGlzLm9wdGlvbnMuYWN0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkQWN0aW9ucyhhY3Rpb25zOiBBY3Rpb25bXSkge1xuICAgICAgICAgICAgbGV0IGFjdGlvbkNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogbW9kYWxDbGFzcyArICctYWN0aW9ucycsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uQnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oT2JqZWN0SGVscGVyLmFzc2lnbjxIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbk9wdGlvbnM+KHtcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGFjdGlvbkNvbnRhaW5lclxuICAgICAgICAgICAgICAgIH0sIGFjdGlvbikpO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbi5hY3Rpb24gPT09ICdmdW5jdGlvbicpIGFjdGlvbi5hY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uLmFjdGlvbiA9PT0gJ2hpZGUtbW9kYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoaXMgbW9kYWwgaXMgbGF5ZWQtb3V0IGFuZCBhYm91dCB0byB0cmFuc2l0aW9uIGluXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93KCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignbW9kYWwtc2hvdycsIHsgbW9kYWw6IHRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoaXMgbW9kYWwgaXMgdmlzaWJsZVxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uU2hvd24oKSB7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoaXMgbW9kYWwgaXMgYWJvdXQgdG8gdHJhbnNpdGlvbiBvdXRcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGUoKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdtb2RhbC1oaWRlJywgeyBtb2RhbDogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyBoaWRkZW5cbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGRlbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVtb3ZlT25IaWRkZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gVmlzaWJpbGl0eUhlbHBlci5zaG93KHRoaXMuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgdGhpcy5vblNob3coKTtcbiAgICAgICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiB0aGlzLm9uU2hvd24oKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGhpZGUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFZpc2liaWxpdHlIZWxwZXIuaGlkZSh0aGlzLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIHRoaXMub25IaWRlKCk7XG4gICAgICAgICAgICBwcm9taXNlLmRvbmUoKCkgPT4gdGhpcy5vbkhpZGRlbigpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmlzaWJpbGl0eSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgICAgICAgICBWaXNpYmlsaXR5SGVscGVyLnNldFZpc2liaWxpdHkodGhpcy5jb21wb25lbnQsIHZpc2libGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgdGhlIGJhY2tkcm9wIGlmIG5lZWRlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVCYWNrZHJvcElmTmVlZGVkKCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBwcmV2aW91c2x5IGV4aXN0aW5nIGJhY2tkcm9wIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGlmICghSFRNTEhlbHBlci5oYXNDaGlsZFdpdGhDbGFzcyh0aGlzLnNob3djYXNlLmNvbnRhaW5lciwgYmFja2Ryb3BDbGFzcykpXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsQmFja2Ryb3AodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlTW9kYWxCYWNrZHJvcCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBiYWNrZHJvcFxuICAgICAgICAgICAgdGhpcy5idWlsZEJhY2tkcm9wKCk7XG5cbiAgICAgICAgICAgIC8vIFRoZSBiYWNrZHJvcCBzdGFydHMgb2ZmIGhpZGRlblxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBiYWNrZHJvcCB0byB0aGUgc2hvd2Nhc2UgY29udGFpbmVyXG4gICAgICAgICAgICBzaG93Y2FzZUluc3RhbmNlLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkQmFja2Ryb3AoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgYmFja2Ryb3BDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0b3BWaXNpYmxlTW9kYWwgPSBIVE1MSGVscGVyLmxhc3RTaWJsaW5nV2l0aENsYXNzPFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsLk1vZGFsRWxlbWVudD4odGhpcy5jb21wb25lbnQsIG1vZGFsQ2xhc3MsICdpbicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRvcFZpc2libGVNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BWaXNpYmxlTW9kYWwubW9kYWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignbW9kYWwtc2hvdycsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdtb2RhbC1oaWRlJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIaWRlIG9yIHNob3cgdGhlIGJhY2tkcm9wIGJhc2VkIG9mZiB0aGUgbnVtYmVyIG9mIHZpc2libGUgbW9kYWxzXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIGxldCBoYXNWaXNpYmxlTW9kYWw6Ym9vbGVhbiA9IEhUTUxIZWxwZXIuaGFzU2libGluZ1dpdGhDbGFzcyh0aGlzLmNvbXBvbmVudCwgbW9kYWxDbGFzcywgJ2luJyk7XG5cbiAgICAgICAgICAgIHRoaXNbaGFzVmlzaWJsZU1vZGFsID8gJ3Nob3cnIDogJ2hpZGUnXSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNob3coKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICByZXR1cm4gVmlzaWJpbGl0eUhlbHBlci5zaG93KHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHVibGljIGhpZGUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICByZXR1cm4gVmlzaWJpbGl0eUhlbHBlci5oaWRlKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmlsaXR5KHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eSh0aGlzLmNvbXBvbmVudCwgdmlzaWJsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBNb2RhbEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudHtcbiAgICAgICAgICAgIG1vZGFsOiBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbFxuICAgICAgICB9O1xuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uIGV4dGVuZHMgSFRNTEhlbHBlci5jcmVhdGVCdXR0b25PcHRpb25zIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGFjdGlvbiB0byBwcmVmb3JtIHdoZW4gdGhpcyBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhY3Rpb246ICdoaWRlLW1vZGFsJ3xGdW5jdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XG4gICAgICAgICAgICAvLyBJZiB0cnVlLCB0aGUgbW9kYWwgd2lsbCByZW1vdmUgaXRzZWxmIGZyb20gdGhlIERPTSB3aGVuIGl0J3MgaGlkZGVuXG4gICAgICAgICAgICByZW1vdmVPbkhpZGRlbj86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIC8vIElmIHRydWUsIGRpc3BsYXkgdGhpcyBtb2RhbCBzaG91bGQgdGFrZSB1cCB0aGUgZnVsbCBzaXplIG9mIHRoZSBzaG93Y2FzZVxuICAgICAgICAgICAgZnVsbD86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIGFjdGlvbnM/OiBBY3Rpb25bXTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBvcHRpb25NZW51Q2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1vcHRpb24tbWVudSc7XG4gICAgY29uc3Qgb3B0aW9uTWVudU9wdGlvbkNsYXNzID0gb3B0aW9uTWVudUNsYXNzICsgJy1vcHRpb24nO1xuICAgIGNvbnN0IG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcyA9IG9wdGlvbk1lbnVPcHRpb25DbGFzcyArICctYWN0aXZlJztcbiAgICBjb25zdCBvcHRpb25NZW51TG9hZGluZ0NsYXNzID0gb3B0aW9uTWVudUNsYXNzICsgJy1sb2FkaW5nJztcblxuICAgIGltcG9ydCBPcHRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51Lk9wdGlvbjtcbiAgICBpbXBvcnQgT3B0aW9uRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUuT3B0aW9uRWxlbWVudDtcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51IGltcGxlbWVudHMgSUNvbXBvbmVudCB7XG4gICAgICAgIGNvbXBvbmVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZTpzdHJpbmc7XG4gICAgICAgIHB1YmxpYyB2YWx1ZTphbnk7XG4gICAgICAgIFxuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lOnN0cmluZywgb3B0aW9ucz86IE9wdGlvbltdKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25NZW51Q2xhc3NcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrRXZlbnQgPT4gdGhpcy5vbkNsaWNrZWQoY2xpY2tFdmVudCkpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucykgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgZWxzZSB0aGlzLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0TG9hZGluZyhsb2FkaW5nOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC50b2dnbGUob3B0aW9uTWVudUxvYWRpbmdDbGFzcywgbG9hZGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdlbmVyYXRlT3B0aW9uRWxlbWVudChvcHRpb246T3B0aW9uKTpIVE1MRWxlbWVudCB7XG4gICAgICAgICAgICBsZXQgb3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25NZW51T3B0aW9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogb3B0aW9uLmxhYmVsXG4gICAgICAgICAgICB9KSBhcyBPcHRpb25FbGVtZW50O1xuXG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LnZhbHVlID0gb3B0aW9uLnZhbHVlO1xuXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uRWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgY2xlYXJPcHRpb25zKCkge1xuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGFwcGVuZE9wdGlvbnMob3B0aW9uczogT3B0aW9uW10pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlT3B0aW9uRWxlbWVudChvcHRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6IE9wdGlvbltdKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5jb21wb25lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IHRoaXMuY29tcG9uZW50LmNoaWxkcmVuW2luZGV4XSBhcyBPcHRpb25FbGVtZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IG9wdGlvbkVsZW1lbnQudmFsdWUgPT09IHZhbHVlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MsIGFjdGl2ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgb25DaGFuZ2U6KG5ld1ZhbHVlOmFueSk9PnZvaWQ7XG5cbiAgICAgICAgcHJpdmF0ZSBvbkNsaWNrZWQoY2xpY2tFdmVudDogTW91c2VFdmVudCkge1xuICAgICAgICAgICAgbGV0IHRhcmdldDpIVE1MRWxlbWVudCA9IGNsaWNrRXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uTWVudU9wdGlvbkNsYXNzKSkgcmV0dXJuOyAvLyBUaGUgY2xpY2sgd2FzIG5vdCBvbiBhbiBvcHRpb25cbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcykpIHJldHVybjsgLy8gVGhlIGNsaWNrIHdhcyBvbiBhbiBhY3RpdmUgb3B0aW9uXG5cbiAgICAgICAgICAgIGxldCBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb246T3B0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuZmlyc3RDaGlsZFdpdGhDbGFzcyh0aGlzLmNvbXBvbmVudCwgb3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgIGxldCBuZXdTZWxlY3RlZE9wdGlvbjpPcHRpb25FbGVtZW50ID0gdGFyZ2V0IGFzIE9wdGlvbkVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24pIHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICBuZXdTZWxlY3RlZE9wdGlvbi5jbGFzc0xpc3QuYWRkKG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXdTZWxlY3RlZE9wdGlvbi52YWx1ZTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uQ2hhbmdlKG5ld1NlbGVjdGVkT3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudSB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uIHtcbiAgICAgICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICAgICAgICB2YWx1ZTogYW55O1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICAgICAgdmFsdWU/OiBhbnk7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgcHJldkJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1wcmV2JztcbiAgICBjb25zdCBuZXh0QnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW5leHQnO1xuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24nO1xuICAgIGNvbnN0IG9wdGlvblNlbGVjdGVkQ2xhc3MgPSBvcHRpb25DbGFzcyArICctc2VsZWN0ZWQnO1xuICAgIGNvbnN0IG9wdGlvbkxvYWRpbmdDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1sb2FkaW5nJztcbiAgICBjb25zdCBvcHRpb25Mb2FkZXJDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1sb2FkZXInO1xuICAgIGNvbnN0IG5vUmVzdWx0c0NsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLW5vLXJlc3VsdHMnXG5cbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcm90ZWN0ZWQgb3B0aW9uQ29udGFpbmVyOkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBzZWxlY3RlZE9wdGlvbjpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgcHJldkJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIG5leHRCdXR0b246SFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIHRvdWNoU2Nyb2xsSGFuZGxlcjpJbXBldHVzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCB0aGlzIGhhcyBtb3JlIHJlc3VsdHMgdGhhdCBpdCBjYW4gbG9hZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGhhc01vcmVSZXN1bHRzOiBib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIHRoaXMgaXMgbG9hZGluZ1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGlzTG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgdGhlIGZpcnN0IGxvYWQgaXMgYmVpbmcgcHJlZm9ybWVkIG9yIGhhc24ndCBiZWVuIHByZWZvcm1lZCB5ZXQuXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaXNGaXJzdExvYWQ6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSB0byBub3Qgc2hvdyB0aGUgbm8gcmVzdWx0cyBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgZW5hYmxlU2hvd05vUmVzdWx0czpib29sZWFuID0gdHJ1ZTtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcmV2QnV0dG9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLWxlZnQnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogbmV4dEJ1dHRvbkNsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IEhUTUxIZWxwZXIuY3JlYXRlSWNvbignY2hldnJvbi1yaWdodCcpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBjbGlja3Mgb24gb3B0aW9uc1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ29tcG9uZW50Q2xpY2soZXZlbnQpKTtcblxuICAgICAgICAgICAgLy8gUnVuIGNsZWFyIG9wdGlvbnMgdG8gZ2V0IHRoZSBsb2FkZXJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XG5cbiAgICAgICAgICAgIC8vIExvYWQgcGFnaW5hdGlvbiBhZnRlciB0aGlzIGNvbXBvbmVudCBoYXMgYmVlbiBzZXR1cFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRNb3JlKCksIDApO1xuXG4gICAgICAgICAgICBTY3JvbGxIZWxwZXIuYXR0YWNoV2hlZWxMaXN0ZW5lcih0aGlzLmNvbXBvbmVudCwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGFYIHx8IGV2ZW50LmRlbHRhWTtcbiAgICAgICAgICAgICAgICBjb25zdCB7c2Nyb2xsTGVmdCwgc2Nyb2xsV2lkdGgsIG9mZnNldFdpZHRofSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBNYXRoLm1pbihzY3JvbGxMZWZ0ICsgZGVsdGEsIHNjcm9sbFdpZHRoIC0gb2Zmc2V0V2lkdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBuZXdWYWx1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyLnNldFZhbHVlcyhuZXdWYWx1ZSwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyID0gbmV3IEltcGV0dXMoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5vcHRpb25Db250YWluZXIsXG4gICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyOiAtMSxcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICh4LCB5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBNYXRoLmZsb29yKHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxUb3AgPSB5O1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvdW5kWTogWzAsIDBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBsZW1lbnQgdGhpcyB0byBsb2FkIGFkZGl0aW9uYWwgcmVzdWx0c1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IF9sb2FkTW9yZSgpOlJpZGVTdHlsZXJQcm9taXNlO1xuICAgICAgICBwdWJsaWMgbG9hZE1vcmUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZE1vcmUoKS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdXBkYXRlQm91bmRzKCkge1xuICAgICAgICAgICAgY29uc3Qge3Njcm9sbFdpZHRoLCBvZmZzZXRXaWR0aH0gPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyLnNldEJvdW5kWChbMCwgc2Nyb2xsV2lkdGggLSBvZmZzZXRXaWR0aF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvblNjcm9sbCgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKTtcblxuICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgY29uc3QgcmVhY2hlZEVuZFRvbGVyYW5jZSA9IDEwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FbmRWaXNpYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uRW5kVmlzaWJsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0xvYWRpbmcgJiYgdGhpcy5oYXNNb3JlUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uTG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uQ29tcG9uZW50Q2xpY2soZXZlbnQ6TW91c2VFdmVudCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6SFRNTEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBwYXJlbnRzIHVudGlsIHdlJ3ZlIHJlYWNoZWQgdGhlIGJvdW5kIGVsZW1lbnRcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25DbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wdGlvbkNsaWNrKGN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLnByZXZCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFRhcmdldCA9PT0gdGhpcy5uZXh0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uQ29udGFpbmVyID0gdGhpcy5vcHRpb25Db250YWluZXI7XG5cbiAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbi5kaXNhYmxlZCA9IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID09PSAwO1xuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIGEgc3Bpbm5lciB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IGluZGljYXRpbmcgc29tZXRoaW5nIGlzIGxvYWRpbmdcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBhZGRPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzICsgJyAnICsgb3B0aW9uTG9hZGVyQ2xhc3NcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBjbGVhck9wdGlvbkxvYWRlcigpIHtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIucmVtb3ZlQ2hpbGRyZW5XaXRoQ2xhc3Nlcyh0aGlzLm9wdGlvbkNvbnRhaW5lciwgb3B0aW9uTG9hZGVyQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldE9wdGlvbkVsZW1lbnRWYWx1ZShlbGVtZW50OkhUTUxFbGVtZW50KTogc3RyaW5nOyBcblxuICAgICAgICBwcm90ZWN0ZWQgYWRkT3B0aW9uRWxlbWVudHMoZWxlbWVudHM6Tm9kZVtdfE5vZGUpIHtcbiAgIFxuICAgICAgICAgICAgbGV0IGhhc05vUmVzdWx0cyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudHMgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgICAgICAgICAgICAgaGFzTm9SZXN1bHRzID0gZWxlbWVudHMuY2hpbGROb2Rlcy5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc05vUmVzdWx0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50cyBhcyBOb2RlW10pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXNOb1Jlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkxvYWRlcigpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgbm9SZXN1bHRzRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIHNob3dOb1Jlc3VsdHMoKSB7XG4gICAgICAgICAgICB0aGlzLm5vUmVzdWx0c0VsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzICsgJyAnICsgbm9SZXN1bHRzQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ25vLXJlc3VsdHMnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5vcHRpb25Db250YWluZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGNsZWFyT3B0aW9ucygpIHtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5vcHRpb25Db250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2Nyb2xsVG8obmV3TGVmdDpudW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0TGVmdCA9IHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGguYWJzKHN0YXJ0TGVmdCAtIG5ld0xlZnQpIC8gMlxuXG4gICAgICAgICAgICBUaW55QW5pbWF0ZS5hbmltYXRlKHN0YXJ0TGVmdCwgbmV3TGVmdCwgZHVyYXRpb24sIGN1cnJlbnRMZWZ0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gY3VycmVudExlZnRcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3TGVmdCwgMCk7XG4gICAgICAgICAgICB9LCAnZWFzZU91dEN1YmljJywgKCkgPT4gdGhpcy51cGRhdGUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgcHJldmlvdXNQYWdlKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0IC0gdGhpcy5vcHRpb25Db250YWluZXIuY2xpZW50V2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIG5leHRQYWdlKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ICsgdGhpcy5vcHRpb25Db250YWluZXIuY2xpZW50V2lkdGgpO1xuICAgICAgICAgICAgICAgIGxldCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gNTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRW5kVmlzaWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNlbGVjdE9wdGlvbihvcHRpb25FbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbiA9PT0gb3B0aW9uRWxlbWVudCkgcmV0dXJuOyAvLyBBbHJlYWR5IHNlbGVjdGVkXG4gICAgICAgICAgICBsZXQgb2xkT3B0aW9uRWxlbWVudCA9IHRoaXMuc2VsZWN0ZWRPcHRpb247XG5cbiAgICAgICAgICAgIGlmIChvbGRPcHRpb25FbGVtZW50KVxuICAgICAgICAgICAgICAgIG9sZE9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShvcHRpb25TZWxlY3RlZENsYXNzLCBvcHRpb25Mb2FkaW5nQ2xhc3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQob3B0aW9uU2VsZWN0ZWRDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25FbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvciByZW1vdmUgdGhlIGxvYWRpbmcgY2xhc3MgZnJvbSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvblxuICAgICAgICAgKiBAcGFyYW0gaXNMb2FkaW5nIElmIHRydWUsIGFkZCB0aGUgbG9hZGluZyBjbGFzcywgb3RoZXJ3aXNlIHJlbW92ZSBpdFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldE9wdGlvbklzTG9hZGluZyhpc0xvYWRpbmc6Ym9vbGVhbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkT3B0aW9uKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24uY2xhc3NMaXN0W2lzTG9hZGluZyA/ICdhZGQnIDogJ3JlbW92ZSddKG9wdGlvbkxvYWRpbmdDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gYW4gb3B0aW9uIGVsZW1lbnQgaXMgY2xpY2tlZCBvbi5cbiAgICAgICAgICogQHBhcmFtIG9wdGlvbkVsZW1lbnQgVGhlIG9wdGlvbiBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWQgb25cbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNvbnN0IHByZXZCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tcHJldic7XG4gICAgY29uc3QgbmV4dEJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1uZXh0JztcbiAgICBjb25zdCBvcHRpb25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJztcbiAgICBjb25zdCBvcHRpb25TZWxlY3RlZENsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLXNlbGVjdGVkJztcbiAgICBjb25zdCBvcHRpb25Mb2FkaW5nQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbG9hZGluZyc7XG4gICAgY29uc3Qgb3B0aW9uTG9hZGVyQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbG9hZGVyJztcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJztcbiAgICBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlLkNvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIHRoaXMgaGFzIG1vcmUgcmVzdWx0cyB0aGF0IGl0IGNhbiBsb2FkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaGFzTW9yZVJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCB0aGlzIGlzIGxvYWRpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgdGhlIGZpcnN0IGxvYWQgaXMgYmVpbmcgcHJlZm9ybWVkIG9yIGhhc24ndCBiZWVuIHByZWZvcm1lZCB5ZXQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSB0cnVlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSB0byBub3Qgc2hvdyB0aGUgbm8gcmVzdWx0cyBtZXNzYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2hvd05vUmVzdWx0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLXdyYXBwZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJldkJ1dHRvbkNsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tbGVmdCcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG5leHRCdXR0b25DbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLXJpZ2h0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBjbGlja3Mgb24gb3B0aW9uc1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ29tcG9uZW50Q2xpY2soZXZlbnQpKTtcbiAgICAgICAgICAgIC8vIFJ1biBjbGVhciBvcHRpb25zIHRvIGdldCB0aGUgbG9hZGVyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xuICAgICAgICAgICAgLy8gTG9hZCBwYWdpbmF0aW9uIGFmdGVyIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIHNldHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZE1vcmUoKSwgMCk7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuU2Nyb2xsSGVscGVyLmF0dGFjaFdoZWVsTGlzdGVuZXIodGhpcy5jb21wb25lbnQsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhWCB8fCBldmVudC5kZWx0YVk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGggfSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gTWF0aC5taW4oc2Nyb2xsTGVmdCArIGRlbHRhLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld1ZhbHVlLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyID0gbmV3IEltcGV0dXMoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5vcHRpb25Db250YWluZXIsXG4gICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyOiAtMSxcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICh4LCB5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBNYXRoLmZsb29yKHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxUb3AgPSB5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3VuZFk6IFswLCAwXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZE1vcmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZE1vcmUoKS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQm91bmRzKCkge1xuICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGggfSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0Qm91bmRYKFswLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoXSk7XG4gICAgICAgIH1cbiAgICAgICAgb25TY3JvbGwoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCk7XG4gICAgICAgICAgICBsZXQgb3B0aW9uQ29udGFpbmVyID0gdGhpcy5vcHRpb25Db250YWluZXI7XG4gICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gMTA7XG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FbmRWaXNpYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIG9uRW5kVmlzaWJsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0xvYWRpbmcgJiYgdGhpcy5oYXNNb3JlUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uTG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25Db21wb25lbnRDbGljayhldmVudCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcGFyZW50cyB1bnRpbCB3ZSd2ZSByZWFjaGVkIHRoZSBib3VuZCBlbGVtZW50XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudFRhcmdldCAhPT0gdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PcHRpb25DbGljayhjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLnByZXZCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLm5leHRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0UGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbi5kaXNhYmxlZCA9IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID09PSAwO1xuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIHNwaW5uZXIgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCBpbmRpY2F0aW5nIHNvbWV0aGluZyBpcyBsb2FkaW5nXG4gICAgICAgICAqL1xuICAgICAgICBhZGRPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyArICcgJyArIG9wdGlvbkxvYWRlckNsYXNzXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5yZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzKHRoaXMub3B0aW9uQ29udGFpbmVyLCBvcHRpb25Mb2FkZXJDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkT3B0aW9uRWxlbWVudHMoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGxldCBoYXNOb1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSBlbGVtZW50cy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNOb1Jlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2hvd05vUmVzdWx0cygpIHtcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzICsgJyAnICsgbm9SZXN1bHRzQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCduby1yZXN1bHRzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMub3B0aW9uQ29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck9wdGlvbnMoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxUbyhuZXdMZWZ0KSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydExlZnQgPSB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBNYXRoLmFicyhzdGFydExlZnQgLSBuZXdMZWZ0KSAvIDI7XG4gICAgICAgICAgICBUaW55QW5pbWF0ZS5hbmltYXRlKHN0YXJ0TGVmdCwgbmV3TGVmdCwgZHVyYXRpb24sIGN1cnJlbnRMZWZ0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gY3VycmVudExlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld0xlZnQsIDApO1xuICAgICAgICAgICAgfSwgJ2Vhc2VPdXRDdWJpYycsICgpID0+IHRoaXMudXBkYXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzUGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCAtIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0UGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCArIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcbiAgICAgICAgICAgIGxldCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRFbmRUb2xlcmFuY2UgPSA1O1xuICAgICAgICAgICAgaWYgKG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID49IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxXaWR0aCAtIG9wdGlvbkNvbnRhaW5lci5vZmZzZXRXaWR0aCAtIHJlYWNoZWRFbmRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRW5kVmlzaWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RPcHRpb24ob3B0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPT09IG9wdGlvbkVsZW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IHNlbGVjdGVkXG4gICAgICAgICAgICBsZXQgb2xkT3B0aW9uRWxlbWVudCA9IHRoaXMuc2VsZWN0ZWRPcHRpb247XG4gICAgICAgICAgICBpZiAob2xkT3B0aW9uRWxlbWVudClcbiAgICAgICAgICAgICAgICBvbGRPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uU2VsZWN0ZWRDbGFzcywgb3B0aW9uTG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25TZWxlY3RlZENsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25FbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgb3IgcmVtb3ZlIHRoZSBsb2FkaW5nIGNsYXNzIGZyb20gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb25cbiAgICAgICAgICogQHBhcmFtIGlzTG9hZGluZyBJZiB0cnVlLCBhZGQgdGhlIGxvYWRpbmcgY2xhc3MsIG90aGVyd2lzZSByZW1vdmUgaXRcbiAgICAgICAgICovXG4gICAgICAgIHNldE9wdGlvbklzTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZE9wdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdFtpc0xvYWRpbmcgPyAnYWRkJyA6ICdyZW1vdmUnXShvcHRpb25Mb2FkaW5nQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiBhbiBvcHRpb24gZWxlbWVudCBpcyBjbGlja2VkIG9uLlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uRWxlbWVudCBUaGUgb3B0aW9uIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZCBvblxuICAgICAgICAgKi9cbiAgICAgICAgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQ7XG59KShSaWRlU3R5bGVyU2hvd2Nhc2UgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZSA9IHt9KSk7XG4iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgVmVoaWNsZVBhaW50QXR0cmlidXRlcyA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVBhaW50QXR0cmlidXRlcztcbiAgICBpbXBvcnQgVmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWw7XG5cbiAgICBjb25zdCByZXN1bHRzUGVyUmVxdWVzdCA9IDIwO1xuXG4gICAgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2NoZW1lT3B0aW9uRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgcGFpbnRTY2hlbWU/OiBWZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsO1xuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHtjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRH0gPSBzaG93Y2FzZUluc3RhbmNlLnN0YXRlLmdldERhdGEoKTtcblxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEID0gY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgX2xvYWRNb3JlKCkge1xuICAgICAgICAgICAgdGhpcy5oYXNNb3JlUmVzdWx0cyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBMb2FkIHBhaW50IHNjaGVtZXMgZm9yIHRoZSB2ZWhpY2xlXG4gICAgICAgICAgICByZXR1cm4gYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldHBhaW50c2NoZW1lZGVzY3JpcHRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5kb25lKHJlc3BvbnNlID0+IHRoaXMuY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5TY2hlbWVzKSlcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHRoaXMuaXNMb2FkaW5nID0gZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVPcHRpb25zKHNjaGVtZXM6VmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbFtdKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBmcmFnbWVudCBzbyB3ZSBhZGQgYWxsIG9wdGlvbnMgdG8gdGhlIGVsZW1lbnQgYXQgb25jZVxuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgZWFjaCBvcHRpb24gYW5kIGFkZCBpdCB0byB0aGUgZnJhZ21lbnRcbiAgICAgICAgICAgIGZvciAobGV0IHNjaGVtZSBvZiBzY2hlbWVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uIHJpZGVzdHlsZXItc2hvd2Nhc2UtcGFpbnQtb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGZyYWdtZW50XG4gICAgICAgICAgICAgICAgfSkgYXMgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTY2hlbWVPcHRpb25FbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgb3B0aW9uLnBhaW50U2NoZW1lID0gc2NoZW1lO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlIG1haW4gY29sb3IgdG8gYmUgcmVwcmVzZW50ZWQgaW4gdGhlIHN3YXRjaFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IG11bHRpLWNvbG9yIHBhaW50IHNjaGVtZXNcbiAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBzY2hlbWUuQ29sb3JzWzBdO1xuXG4gICAgICAgICAgICAgICAgLy8gXCJzd2F0Y2hcIjogVGhlIGRpc3BsYXkgb2YgdGhlIHBhaW50IGNvbG9yXG4gICAgICAgICAgICAgICAgbGV0IHN3YXRjaCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWRpc3BsYXkgcmlkZXN0eWxlci1zaG93Y2FzZS1wYWludC1zd2F0Y2gnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvci5IZXhcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlIG5hbWUgb2YgdGhlIHBhaW50IHNjaGVtZSBhcyB0aGUgbGFiZWxcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2NoZW1lLlNjaGVtZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXMgb2YgdGhlIGNvbG9yIGZvciB0aGUgc2Vjb25kYXJ5IGxhYmVsXG4gICAgICAgICAgICAgICAgbGV0IGF0dHJpYnV0ZXMgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yLmNyZWF0ZUF0dHJpYnV0ZUxhYmVsKGNvbG9yLkF0dHJpYnV0ZXMpLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsZWFyIG91dCBvdXIgc2xpZGVXcmFwcGVyIG9mIGFsbCBlbGVtZW50c1xuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICAvLyBBZGQgYWxsIG9wdGlvbnMgdG8gdGhlIHNsaWRlV3JhcHBlciBhdCBvbmNlXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgb25QYWludFNjaGVtZVNlbGVjdGVkOiAocGFpbnRTY2hlbWU6VmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbCk9PnZvaWQ7XG4gICAgICAgIHByb3RlY3RlZCBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBwYWludFNjaGVtZSA9IChvcHRpb25FbGVtZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2NoZW1lT3B0aW9uRWxlbWVudCkucGFpbnRTY2hlbWU7XG5cbiAgICAgICAgICAgIGlmIChwYWludFNjaGVtZSkge1xuICAgICAgICAgICAgICAgIHN1cGVyLm9uT3B0aW9uQ2xpY2sob3B0aW9uRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFpbnRTY2hlbWU6IHBhaW50U2NoZW1lXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25QYWludFNjaGVtZVNlbGVjdGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25QYWludFNjaGVtZVNlbGVjdGVkKHBhaW50U2NoZW1lKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZUxhYmVsKGF0dHJpYnV0ZXM6cmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUGFpbnRBdHRyaWJ1dGVzKTpzdHJpbmcge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEF0dHJpYnV0ZVN0cmluZyA9ICdHbG9zc3knO1xuXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5Ob25lKSByZXR1cm4gZGVmYXVsdEF0dHJpYnV0ZVN0cmluZztcblxuICAgICAgICAgICAgbGV0IHN0cmluZ0F0dHJpYnV0ZXM6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIGVhY2ggc2VsZWN0ZWQgcGFpbnQgYXR0cmlidXRlIGZsYWcgZm9yIHRoZSBjb2xvciB0byB0aGUgbGlzdFxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NYXR0ZSA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NYXR0ZSkgc3RyaW5nQXR0cmlidXRlcy5wdXNoKCdNYXR0ZScpO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NZXRhbGxpYyA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NZXRhbGxpYykgc3RyaW5nQXR0cmlidXRlcy5wdXNoKCdNZXRhbGxpYycpO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgVmVoaWNsZVBhaW50QXR0cmlidXRlcy5QZWFybGVzY2VudCA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5QZWFybGVzY2VudCkgc3RyaW5nQXR0cmlidXRlcy5wdXNoKCdQZWFybGVzY2VudCcpO1xuXG4gICAgICAgICAgICBpZiAoc3RyaW5nQXR0cmlidXRlcy5sZW5ndGggPT09IDApIHJldHVybiBkZWZhdWx0QXR0cmlidXRlU3RyaW5nO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nQXR0cmlidXRlcy5qb2luKCcsICcpO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IHBvcG92ZXJDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBvcG92ZXInO1xuICAgIGNvbnN0IHBvcG92ZXJJbkNsYXNzID0gJ2luJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyIHtcbiAgICAgICAgcHVibGljIGNvbXBvbmVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHBvcG92ZXJDbGFzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBoaWRlKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmxlKHZpc2libGU6Ym9vbGVhbikge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LnRvZ2dsZShwb3BvdmVySW5DbGFzcywgdmlzaWJsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlKCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHBvcG92ZXJJbkNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB0b2dnbGUoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUodGhpcy5pc1Zpc2libGUoKSA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFBhZ2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwuUGFnZTtcblxuICAgIGNvbnN0IHByb2R1Y3RNb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcHJvZHVjdC1tb2RhbCc7XG4gICAgY29uc3QgdGl0bGVDbGFzcyA9IHByb2R1Y3RNb2RhbENsYXNzICsgJy10aXRsZSc7XG4gICAgY29uc3QgcGFnZUNsYXNzID0gcHJvZHVjdE1vZGFsQ2xhc3MgKyAnLXBhZ2UnO1xuXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIHtcbiAgICAgICAgcHJvdGVjdGVkIHRpdGxlRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIGJyYW5kVGl0bGVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgc3VidGl0bGVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgc3VtbWFyeUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBzdW1tYXJ5Q29udGFpbmVyOkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCB0b2dnbGVCdXR0b246UmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uO1xuICAgICAgICBcbiAgICAgICAgcHJvdGVjdGVkIGltYWdlQ29udGFpbmVyOkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgaW1hZ2U6UmVzaXplYWJsZVJlc291cmNlSW1hZ2U8YW55PjtcblxuICAgICAgICBwcm90ZWN0ZWQgcGFnZXM6UGFnZVtdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UsIHtcbiAgICAgICAgICAgICAgICByZW1vdmVPbkhpZGRlbjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYnVpbGRNb2RhbCgpIHtcbiAgICAgICAgICAgIHN1cGVyLmJ1aWxkTW9kYWwoKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZChwcm9kdWN0TW9kYWxDbGFzcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbih0aGlzLnNob3djYXNlKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLm9uQ2hhbmdlZCA9IHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAvLyBTaG93IHRoZSBjb3JyZWN0IHBhZ2Ugd2hlbiB0aGUgdG9nZ2xlIGJ1dHRvbiBpcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMucGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UubGFiZWwgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQYWdlKHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMudG9nZ2xlQnV0dG9uLmNvbXBvbmVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaDEnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0aXRsZUNsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5icmFuZFRpdGxlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnc3BhbicsIHRpdGxlQ2xhc3MgKyAnLWJyYW5kJyksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdzcGFuJyksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VidGl0bGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdzcGFuJywgdGl0bGVDbGFzcyArICctc3VidGl0bGUnKVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJvZHVjdE1vZGFsQ2xhc3MgKyAnLXN1bW1hcnktY29udGFpbmVyJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJvZHVjdE1vZGFsQ2xhc3MgKyAnLWltYWdlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5zdW1tYXJ5Q29udGFpbmVyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZSA9IHRoaXMuY3JlYXRlSW1hZ2UoKTtcblxuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5RWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcm9kdWN0TW9kYWxDbGFzcyArICctc3VtbWFyeScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuc3VtbWFyeUNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkUGFnZSh7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzdW1tYXJ5JyksXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLnN1bW1hcnlDb250YWluZXJcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgUmVzaXplYWJsZVJlc291cmNlSW1hZ2UgZWxlbWVudCBmb3IgdGhpcyBwcm9kdWN0XG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY3JlYXRlSW1hZ2UoKTpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxhbnk+O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgYSBuZXcgcGFnZSB0byB0aGUgcHJvZHVjdCBtb2RhbCBhbmQgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgKiBAcGFyYW0gcGFnZSBUaGUgbmV3IHBhZ2VcbiAgICAgICAgICogQHBhcmFtIHNldFZpc2libGUgSWYgdHJ1ZSwgc2hvdyB0aGUgcGFnZSBhZnRlciBhZGRpbmcgaXRcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBhZGRQYWdlKHBhZ2U6UGFnZSwgc2V0VmlzaWJsZTpib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYWdlcykgdGhpcy5wYWdlcyA9IFtdO1xuXG4gICAgICAgICAgICB0aGlzLnBhZ2VzLnB1c2gocGFnZSk7XG5cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmFkZE9wdGlvbih7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHBhZ2UubGFiZWwsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhZ2UubGFiZWxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2V0VmlzaWJsZSkgdGhpcy5zaG93UGFnZShwYWdlKTtcbiAgICAgICAgICAgIGVsc2UgVmlzaWJpbGl0eUhlbHBlci5zZXRWaXNpYmlsaXR5KHBhZ2UuY29udGFpbmVyLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIHBhZ2UuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQocGFnZUNsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQocGFnZS5jb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgcGFnZSBhcyB2aXNpYmxlIGFuZCBoaWRlIHRoZSBvdGhlciBwYWdlcywgdXBkYXRlIHRoZSBzdGF0ZSBvZiB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgKiBAcGFyYW0gbmV3UGFnZSBUaGUgcGFnZSB0byBzaG93XG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgc2hvd1BhZ2UobmV3UGFnZTpQYWdlKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgdGhpcy5wYWdlcylcbiAgICAgICAgICAgICAgICBWaXNpYmlsaXR5SGVscGVyLnNldFZpc2liaWxpdHkocGFnZS5jb250YWluZXIsIHBhZ2UgPT09IG5ld1BhZ2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5zZXRWYWx1ZShuZXdQYWdlLmxhYmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGRlbigpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2UuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFBhZ2Uge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgY29udGFpbmVyIHRvIHNob3cgd2hlbiB0aGUgcGFnZSBpcyBhY3RpdmF0ZWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29udGFpbmVyOkhUTUxFbGVtZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBsYWJlbCB0byBzaG93IGZvciB0aGUgY29udGFpbmVyIGluIHRoZSB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxhYmVsOnN0cmluZztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFByb2R1Y3RFbGVtZW50PFQ+IGV4dGVuZHMgTm9kZSB7XG4gICAgICAgIHByb2R1Y3Q/OiBUO1xuICAgIH1cbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yPERhdGFUeXBlLEZpbHRlclR5cGUgZXh0ZW5kcyByaWRlc3R5bGVyLlJlcXVlc3RzLkFjdGlvblJlcXVlc3RQYWdlZE1vZGVsPiBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQge1xuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudEZpbHRlcnM6IEZpbHRlclR5cGU7XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBkZWZhdWx0RmlsdGVyczogRmlsdGVyVHlwZTtcblxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcmVzdWx0c1BlckxvYWQgPSA1MDtcblxuICAgICAgICBwcm90ZWN0ZWQgY291bnQ6bnVtYmVyID0gLTE7XG4gICAgICAgIHByb3RlY3RlZCBpbmRleDpudW1iZXIgPSAwO1xuXG4gICAgICAgIHByb3RlY3RlZCBfbG9hZE1vcmUoKSB7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBjb3VudFByb21pc2U6UmlkZVN0eWxlclByb21pc2U8bnVtYmVyLHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuY291bnQgPiAtMSkge1xuICAgICAgICAgICAgICAgIGNvdW50UHJvbWlzZSA9IFByb21pc2VIZWxwZXIucmVzb2x2ZWQodGhpcy5jb3VudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvdW50UHJvbWlzZSA9IHRoaXMuY291bnRSZXN1bHRzKHRoaXMuY3VycmVudEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzUGVyTG9hZCA9IHRoaXMucmVzdWx0c1BlckxvYWQ7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oY291bnRQcm9taXNlLCBwcm9kdWN0Q291bnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBwcm9kdWN0Q291bnQ7XG5cbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyczpGaWx0ZXJUeXBlID0gT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBDb3VudDogcmVzdWx0c1BlckxvYWRcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzKSBhcyBGaWx0ZXJUeXBlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlc3VsdHMoZmlsdGVycykuZG9uZShwcm9kdWN0cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggKz0gcmVzdWx0c1BlckxvYWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzTW9yZVJlc3VsdHMgPSB0aGlzLmluZGV4IDwgdGhpcy5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVPcHRpb25zKHByb2R1Y3RzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGNvdW50UmVzdWx0cyhmaWx0ZXJzOiBGaWx0ZXJUeXBlKSA6IFJpZGVTdHlsZXJQcm9taXNlPG51bWJlcixyaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRSZXN1bHRzKGZpbHRlcnM6IEZpbHRlclR5cGUpIDogUmlkZVN0eWxlclByb21pc2U8RGF0YVR5cGVbXSxyaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBmaWx0ZXJzIGFuZCByZWxvYWRcbiAgICAgICAgICogQHBhcmFtIG5ld0ZpbHRlcnMgVGhlIG5ldyBmaWx0ZXJzXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0RmlsdGVycyhuZXdGaWx0ZXJzOiBGaWx0ZXJUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBvdXIgY291bnRcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAtMTtcblxuICAgICAgICAgICAgLy8gUmVzZXQgb3VyIGluZGV4XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcblxuICAgICAgICAgICAgLy8gU2V0IG91ciBmaWx0ZXJzXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0gT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgbmV3RmlsdGVycyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIExvYWQgZmlyc3QgcmVzdWx0IHNldFxuICAgICAgICAgICAgdGhpcy5sb2FkTW9yZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBmaWx0ZXJzIGFuZCByZWxvYWRcbiAgICAgICAgICogQHBhcmFtIGZpbHRlclVwZGF0ZXMgVGhlIGZpbHRlciBwcm9wZXJ0aWVzIHRvIHVwZGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHVwZGF0ZUZpbHRlcnMoZmlsdGVyVXBkYXRlczogRmlsdGVyVHlwZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKE9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuY3VycmVudEZpbHRlcnMsIGZpbHRlclVwZGF0ZXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGZhbHNlIGlmIHRoZSBwcm9kdWN0IHNob3VsZCBub3QgYmUgZGlzcGxheWVkIGluIHRoZSBsaXN0XG4gICAgICAgICAqIEBwYXJhbSBwcm9kdWN0IFRoZSBwcm9kdWN0XG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcHJvZHVjdEZpbHRlcihwcm9kdWN0OiBEYXRhVHlwZSk6Ym9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBVUkwgZm9yIHRoZSBwcm9kdWN0IG9yIGZhbHNlLWlzaCBpZiB0aGVyZSBpcyBub3Qgb25lXG4gICAgICAgICAqIEBwYXJhbSBwcm9kdWN0IFRoZSBwcm9kdWN0XG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcHJvZHVjdEltYWdlU291cmNlKHByb2R1Y3Q6IERhdGFUeXBlKTpzdHJpbmc7XG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwcm9kdWN0SW1hZ2VMYWJlbHMocHJvZHVjdDogRGF0YVR5cGUpOntcbiAgICAgICAgICAgIHByaW1hcnk6IHN0cmluZztcbiAgICAgICAgICAgIHNlY29uZGFyeT86IHN0cmluZztcbiAgICAgICAgICAgIHRlcnRpYXJ5Pzogc3RyaW5nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHByaXZhdGUgY3JlYXRlT3B0aW9ucyhwcm9kdWN0czogRGF0YVR5cGVbXSkge1xuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9kdWN0IG9mIHByb2R1Y3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByb2R1Y3RGaWx0ZXIocHJvZHVjdCkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGZyYWdtZW50XG4gICAgICAgICAgICAgICAgfSkgYXMgUHJvZHVjdEVsZW1lbnQ8RGF0YVR5cGU+O1xuXG4gICAgICAgICAgICAgICAgb3B0aW9uLnByb2R1Y3QgPSBwcm9kdWN0O1xuXG4gICAgICAgICAgICAgICAgLy8gSW1hZ2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZVNvdXJjZSA9IHRoaXMucHJvZHVjdEltYWdlU291cmNlKHByb2R1Y3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdpbWcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1kaXNwbGF5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBpbWFnZVNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHByb2R1Y3RJbWFnZUxhYmVscyA9IHRoaXMucHJvZHVjdEltYWdlTGFiZWxzKHByb2R1Y3QpO1xuXG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMucHJpbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RJbWFnZUxhYmVscy5zZWNvbmRhcnkpXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnRlcnRpYXJ5KVxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwtdGVydGlhcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnRlcnRpYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25FbGVtZW50cyhmcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IChvcHRpb25FbGVtZW50IGFzIFByb2R1Y3RFbGVtZW50PERhdGFUeXBlPikucHJvZHVjdDtcblxuICAgICAgICAgICAgaWYgKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICBzdXBlci5vbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9kdWN0Q2xpY2socHJvZHVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgcHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2s6IChwcm9kdWN0OkRhdGFUeXBlKT0+dm9pZDtcblxuICAgICAgICBwcm90ZWN0ZWQgb25Qcm9kdWN0Q2xpY2socHJvZHVjdDpEYXRhVHlwZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayhwcm9kdWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJ2YXIgUmlkZVN0eWxlclNob3djYXNlO1xuKGZ1bmN0aW9uIChSaWRlU3R5bGVyU2hvd2Nhc2UpIHtcbiAgICBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3IgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0c1BlckxvYWQgPSA1MDtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIF9sb2FkTW9yZSgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjb3VudFByb21pc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgY291bnRQcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIucmVzb2x2ZWQodGhpcy5jb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb3VudFByb21pc2UgPSB0aGlzLmNvdW50UmVzdWx0cyh0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHNQZXJMb2FkID0gdGhpcy5yZXN1bHRzUGVyTG9hZDtcbiAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKGNvdW50UHJvbWlzZSwgcHJvZHVjdENvdW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gcHJvZHVjdENvdW50O1xuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgQ291bnQ6IHJlc3VsdHNQZXJMb2FkXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5jdXJyZW50RmlsdGVycyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cyhmaWx0ZXJzKS5kb25lKHByb2R1Y3RzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCArPSByZXN1bHRzUGVyTG9hZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNNb3JlUmVzdWx0cyA9IHRoaXMuaW5kZXggPCB0aGlzLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU9wdGlvbnMocHJvZHVjdHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBmaWx0ZXJzIGFuZCByZWxvYWRcbiAgICAgICAgICogQHBhcmFtIG5ld0ZpbHRlcnMgVGhlIG5ldyBmaWx0ZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZXRGaWx0ZXJzKG5ld0ZpbHRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XG4gICAgICAgICAgICAvLyBSZXNldCBvdXIgY291bnRcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAtMTtcbiAgICAgICAgICAgIC8vIFJlc2V0IG91ciBpbmRleFxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICAvLyBTZXQgb3VyIGZpbHRlcnNcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgbmV3RmlsdGVycyk7XG4gICAgICAgICAgICAvLyBMb2FkIGZpcnN0IHJlc3VsdCBzZXRcbiAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGZpbHRlcnMgYW5kIHJlbG9hZFxuICAgICAgICAgKiBAcGFyYW0gZmlsdGVyVXBkYXRlcyBUaGUgZmlsdGVyIHByb3BlcnRpZXMgdG8gdXBkYXRlXG4gICAgICAgICAqL1xuICAgICAgICB1cGRhdGVGaWx0ZXJzKGZpbHRlclVwZGF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVycyhSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgZmlsdGVyVXBkYXRlcykpO1xuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZU9wdGlvbnMocHJvZHVjdHMpIHtcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHByb2R1Y3Qgb2YgcHJvZHVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvZHVjdEZpbHRlcihwcm9kdWN0KSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBmcmFnbWVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG9wdGlvbi5wcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgICAgICAgICAvLyBJbWFnZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlU291cmNlID0gdGhpcy5wcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaW1nJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tZGlzcGxheScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogaW1hZ2VTb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcHJvZHVjdEltYWdlTGFiZWxzID0gdGhpcy5wcm9kdWN0SW1hZ2VMYWJlbHMocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnByaW1hcnksXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RJbWFnZUxhYmVscy50ZXJ0aWFyeSlcbiAgICAgICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC10ZXJ0aWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMudGVydGlhcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25FbGVtZW50cyhmcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IG9wdGlvbkVsZW1lbnQucHJvZHVjdDtcbiAgICAgICAgICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgc3VwZXIub25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZHVjdENsaWNrKHByb2R1Y3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9uUHJvZHVjdENsaWNrKHByb2R1Y3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2socHJvZHVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciA9IFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvcjtcbn0pKFJpZGVTdHlsZXJTaG93Y2FzZSB8fCAoUmlkZVN0eWxlclNob3djYXNlID0ge30pKTtcbiIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXFyLWRpc3BsYXknO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCBpbXBsZW1lbnRzIElDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIHFyQ29kZUVsZW1lbnQ6SFRNTEFuY2hvckVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgcXJDb2RlOlFSQ29kZTtcblxuICAgICAgICBwdWJsaWMgY29tcG9uZW50OkhUTUxFbGVtZW50O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKGxpbms/OnN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucXJDb2RlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5xckNvZGUgPSBuZXcgUVJDb2RlKHRoaXMucXJDb2RlRWxlbWVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChsaW5rKSB0aGlzLmRpc3BsYXlVUkwobGluayk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZGlzcGxheVVSTCh1cmw6c3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnFyQ29kZUVsZW1lbnQuaHJlZiA9IHVybDtcbiAgICAgICAgICAgIHRoaXMucXJDb2RlLm1ha2VDb2RlKHVybCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5zaGFyZSB7XG4gICAgY29uc3QgYnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zaGFyZS1idXR0b24nXG5cbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhcmVCdXR0b24gaW1wbGVtZW50cyBJQ29tcG9uZW50IHtcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNvbXBvbmVudDpIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBVUkwgdG8gc2hhcmVcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50VVJMOnN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRhZ3MgdG8gYXR0YWNoIHRvIHRoZSBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgdGFnczpzdHJpbmdbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRleHQgdG8gc2hhcmUgd2l0aCB0aGUgVVJMXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgbWVzc2FnZTpzdHJpbmc7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6U2hhcmVCdXR0b24uU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYnV0dG9uQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuY2xhc3NOYW1lKSB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudGl0bGUpIHRoaXMuY29tcG9uZW50LnRpdGxlID0gc2V0dGluZ3MudGl0bGU7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vbkNsaWNrKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgVVJMIGZvciB0aGlzIHNoYXJlIGJ1dHRvbiB0byBzaGFyZVxuICAgICAgICAgKiBAcGFyYW0gdXJsIFRoZSBVUkwgdG8gc2hhcmVcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRVUkwodXJsOnN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VVJMID0gdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaCB0YWdzIHRvIHRoZSBtZXNzYWdlIGJlaW5nIHNoYXJlZFxuICAgICAgICAgKiBAcGFyYW0gdGFncyBUaGUgdGFncyB0byBhdHRhY2ggdG8gdGhlIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRUYWdzKHRhZ3M6c3RyaW5nW10pIHtcbiAgICAgICAgICAgIHRoaXMudGFncyA9IHRhZ3M7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IGEgbWVzc2FnZSB0byBzaGFyZSB3aXRoIHRoZSBVUkxcbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gc2hhcmUgYWxvbmcgd2l0aCB0aGUgVVJMXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0TWVzc2FnZShtZXNzYWdlOnN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgZXZlcnkgdGltZSB0aGUgc2hhcmUgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkNsaWNrKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVUkwpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zaGFyZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYXJlIHRoZSBjdXJyZW50IFVSTFxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNoYXJlKCkge31cblxuICAgICAgICBwcm90ZWN0ZWQgb3Blbk5ld1dpbmRvdyh1cmw6c3RyaW5nLCBzZXR0aW5ncz86e1xuICAgICAgICAgICAgd2lkdGg/OiBudW1iZXIsXG4gICAgICAgICAgICBoZWlnaHQ/OiBudW1iZXIsXG4gICAgICAgICAgICBlbmFibGVTY3JvbGxiYXJzPzogYm9vbGVhbixcbiAgICAgICAgICAgIGVuYWJsZVJlc2l6ZWFibGU/OiBib29sZWFuLFxuICAgICAgICAgICAgZW5hYmxlVG9vbGJhcj86IGJvb2xlYW4sXG4gICAgICAgICAgICBlbmFibGVMb2NhdGlvbj86IGJvb2xlYW4sXG4gICAgICAgICAgICB0YXJnZXQ/OiBzdHJpbmdcbiAgICAgICAgfSkge1xuICAgICAgICAgICAgc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcblxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEhlaWdodCA9IDQyMCxcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHRXaWR0aCA9IDU1MDtcblxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBzZXR0aW5ncy53aWR0aCB8fCBkZWZhdWx0V2lkdGgsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQgPSBzZXR0aW5ncy5oZWlnaHQgfHwgZGVmYXVsdEhlaWdodDtcblxuICAgICAgICAgICAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gc2NyZWVuLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgIHNjcmVlbldpZHRoID0gc2NyZWVuLndpZHRoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0b3AgPSBzY3JlZW5IZWlnaHQgPiBoZWlnaHQgPyBNYXRoLnJvdW5kKChzY3JlZW5IZWlnaHQgLyAyKSAtIChoZWlnaHQgLyAyKSkgOiAwLFxuICAgICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgucm91bmQoKHNjcmVlbldpZHRoIC8gMikgLSAod2lkdGggLyAyKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNldHRpbmdzLnRhcmdldCB8fCAnc2hhcmUnO1xuXG4gICAgICAgICAgICBjb25zdCB3aW5kb3dTZXR0aW5nczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgYWRkU2V0dGluZyA9IChuYW1lOnN0cmluZywgdmFsdWU6c3RyaW5nKSA9PiB3aW5kb3dTZXR0aW5ncy5wdXNoKG5hbWUgKyAnPScgKyB2YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBhZGRCb29sZWFuU2V0dGluZyA9IChuYW1lOnN0cmluZywgZW5hYmxlZDpib29sZWFuLCBlbmFibGVkQnlEZWZhdWx0OmJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVuYWJsZWQgIT09ICdib29sZWFuJykgZW5hYmxlZCA9IGVuYWJsZWRCeURlZmF1bHQ7XG5cbiAgICAgICAgICAgICAgICBhZGRTZXR0aW5nKG5hbWUsIGVuYWJsZWQgPyAneWVzJyA6ICdubycpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYWRkQm9vbGVhblNldHRpbmcoJ3Njcm9sbGJhcnMnLCBzZXR0aW5ncy5lbmFibGVTY3JvbGxiYXJzLCB0cnVlKTtcbiAgICAgICAgICAgIGFkZEJvb2xlYW5TZXR0aW5nKCdyZXNpemFibGUnLCBzZXR0aW5ncy5lbmFibGVSZXNpemVhYmxlLCB0cnVlKTtcbiAgICAgICAgICAgIGFkZEJvb2xlYW5TZXR0aW5nKCd0b29sYmFyJywgc2V0dGluZ3MuZW5hYmxlVG9vbGJhciwgZmFsc2UpO1xuICAgICAgICAgICAgYWRkQm9vbGVhblNldHRpbmcoJ2xvY2F0aW9uJywgc2V0dGluZ3MuZW5hYmxlTG9jYXRpb24sIHRydWUpO1xuXG4gICAgICAgICAgICBhZGRTZXR0aW5nKCd3aWR0aCcsIHdpZHRoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYWRkU2V0dGluZygnaGVpZ2h0JywgaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYWRkU2V0dGluZygndG9wJywgdG9wLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYWRkU2V0dGluZygnbGVmdCcsIGxlZnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwgdGFyZ2V0LCB0YXJnZXQgIT09ICdfYmxhbmsnID8gd2luZG93U2V0dGluZ3Muam9pbignLCcpIDogJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdldFNoYXJlUmVkaXJlY3RVUkwoKTpzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGFwcFVSTCA9ICdodHRwczovL2FwcC5yaWRlc3R5bGVyLm5ldCc7XG5cbiAgICAgICAgICAgIGlmIChhcGkuZW52aXJvbm1lbnQgPT09IGFwaS5FbnZpcm9ubWVudC5BbHBoYSkgYXBwVVJMID0gJ2h0dHA6Ly9hcHAtYWxwaGEucmlkZXN0eWxlci5uZXQnO1xuICAgICAgICAgICAgZWxzZSBpZiAoYXBpLmVudmlyb25tZW50ID09PSBhcGkuRW52aXJvbm1lbnQuQmV0YSkgYXBwVVJMID0gJ2h0dHA6Ly9hcHAtYmV0YS5yaWRlc3R5bGVyLm5ldCc7XG5cbiAgICAgICAgICAgIHJldHVybiBhcHBVUkwgKyAnL3NoYXJlZC5odG1sJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgU2hhcmVCdXR0b24ge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZT86IHN0cmluZztcbiAgICAgICAgICAgIHRpdGxlPzogc3RyaW5nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdHdpdHRlckludGVudFVSTCA9ICcnO1xuICAgIGV4cG9ydCBjbGFzcyBUd2l0dGVyU2hhcmVCdXR0b24gZXh0ZW5kcyBTaGFyZUJ1dHRvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYnV0dG9uQ2xhc3MgKyAnLXR3aXR0ZXInLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnVHdpdHRlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYXJlIHRoZSBjdXJyZW50IFVSTCB2aWEgVHdpdHRlclxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNoYXJlKCkge1xuICAgICAgICAgICAgbGV0IHVybCA9ICdodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD8nO1xuICAgICAgICAgICAgbGV0IHR3aXR0ZXJJbnRlbnRQYXJhbWV0ZXJzID0gW1xuICAgICAgICAgICAgICAgICd1cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmN1cnJlbnRVUkwpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlKSBcbiAgICAgICAgICAgICAgICB0d2l0dGVySW50ZW50UGFyYW1ldGVycy5wdXNoKCd0ZXh0PScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5tZXNzYWdlKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnRhZ3MgJiYgdGhpcy50YWdzLmxlbmd0aClcbiAgICAgICAgICAgICAgICB0d2l0dGVySW50ZW50UGFyYW1ldGVycy5wdXNoKCdoYXNodGFncz0nICsgQXJyYXlIZWxwZXIubWFwKHRoaXMudGFncywgdGFnID0+IGVuY29kZVVSSUNvbXBvbmVudCh0YWcpKS5qb2luKCcsJykpO1xuXG4gICAgICAgICAgICB1cmwgKz0gdHdpdHRlckludGVudFBhcmFtZXRlcnMuam9pbignJicpO1xuXG4gICAgICAgICAgICB0aGlzLm9wZW5OZXdXaW5kb3codXJsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBGYWNlYm9va1NoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzICsgJy1mYWNlYm9vaycsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdGYWNlYm9vaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2hhcmUgdGhlIGN1cnJlbnQgVVJMIHZpYSBGYWNlYm9va1xuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNoYXJlKCkge1xuICAgICAgICAgICAgbGV0IHVybCA9ICdodHRwczovL3d3dy5mYWNlYm9vay5jb20vZGlhbG9nL3NoYXJlPyc7XG4gICAgICAgICAgICBsZXQgZmFjZWJvb2tEaWFsb2dQYXJhbWV0ZXJzID0gW1xuICAgICAgICAgICAgICAgICdhcHBfaWQ9MTU3NjM4MDQxMjU4Mjg0NScsXG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXk9cG9wdXAnLFxuICAgICAgICAgICAgICAgICdocmVmPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jdXJyZW50VVJMKSxcbiAgICAgICAgICAgICAgICAncmVkaXJlY3RfdXJpPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5nZXRTaGFyZVJlZGlyZWN0VVJMKCkpXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGYWNlYm9vayBvbmx5IGxldHMgeW91IHNwZWNpZnkgb25lIGhhc2h0YWcsIHNvIHdlIHVzZSB0aGUgZmlyc3RcbiAgICAgICAgICAgIGlmICh0aGlzLnRhZ3MgJiYgdGhpcy50YWdzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmYWNlYm9va0RpYWxvZ1BhcmFtZXRlcnMucHVzaCgnaGFzaHRhZz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCcjJyArIHRoaXMudGFnc1swXSkpO1xuXG4gICAgICAgICAgICB1cmwgKz0gZmFjZWJvb2tEaWFsb2dQYXJhbWV0ZXJzLmpvaW4oJyYnKTtcblxuICAgICAgICAgICAgdGhpcy5vcGVuTmV3V2luZG93KHVybCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgTmV3V2luZG93U2hhcmVCdXR0b24gZXh0ZW5kcyBTaGFyZUJ1dHRvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYnV0dG9uQ2xhc3MgKyAnLWxpbmsnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYXJlIHRoZSBjdXJyZW50IFVSTCBieSBvcGVuaW5nIGl0IGluIGEgbmV3IHdpbmRvd1xuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNoYXJlKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuTmV3V2luZG93KHRoaXMuY3VycmVudFVSTCwge1xuICAgICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFFSU2hhcmVCdXR0b24gZXh0ZW5kcyBTaGFyZUJ1dHRvbiB7XG4gICAgICAgIHByaXZhdGUgcG9wb3ZlcjpSaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyO1xuICAgICAgICBwcml2YXRlIHFyQ29kZTpSaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQ7XG5cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBidXR0b25DbGFzcyArICctcXItY29kZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnBvcG92ZXIgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlUG9wb3ZlcigpO1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5wb3BvdmVyLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIHRoaXMucXJDb2RlID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCgpO1xuICAgICAgICAgICAgdGhpcy5wb3BvdmVyLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnFyQ29kZS5jb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFVSTCh1cmw6c3RyaW5nKSB7XG4gICAgICAgICAgICBzdXBlci5zZXRVUkwodXJsKTtcblxuICAgICAgICAgICAgdGhpcy5xckNvZGUuZGlzcGxheVVSTCh1cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICB0aGlzLnBvcG92ZXIudG9nZ2xlKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3Qgc2hhcmVNb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUnO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM6cmlkZXN0eWxlci5SZXF1ZXN0cy5WZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zO1xuICAgICAgICBwcml2YXRlIHNoYXJlQnV0dG9uczpzaGFyZS5TaGFyZUJ1dHRvbltdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6IFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCB2ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zOnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZ1bGw6IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDb3B5IHRoZSByZW5kZXIgaW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB2ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMub25JbnN0cnVjdGlvbnNDaGFuZ2VkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHZlaGljbGVWaWV3cG9ydDogUmlkZVN0eWxlclZpZXdwb3J0O1xuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSByb3RhdGVFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgICAgICBwcml2YXRlIGltYWdlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdWlsZCB0aGUgRE9NIHN0cnVjdHVyZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkTW9kYWwoKSB7XG4gICAgICAgICAgICBzdXBlci5idWlsZE1vZGFsKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoc2hhcmVNb2RhbENsYXNzKTtcblxuICAgICAgICAgICAgbGV0IGJhY2tncm91bmQgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCh0aGlzLnNob3djYXNlKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKGJhY2tncm91bmQuY29tcG9uZW50KTsgICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEluc3RydWN0aW9uc1xuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdwJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUtaW5zdHJ1Y3Rpb25zJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2hhcmUtaW5zdHJ1Y3Rpb25zJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTaGFyZUJ1dHRvbnMoKTtcblxuICAgICAgICAgICAgLy8gUm90YXRlIFVJXG4gICAgICAgICAgICBpZiAodGhpcy5jYW5Td2l0Y2hBbmdsZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN3aXRjaEFuZ2xlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTaGFyZUJ1dHRvbnMoKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXJlQnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuRmFjZWJvb2tTaGFyZUJ1dHRvbigpLFxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5Ud2l0dGVyU2hhcmVCdXR0b24oKSxcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuUVJTaGFyZUJ1dHRvbigpLFxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5OZXdXaW5kb3dTaGFyZUJ1dHRvbigpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBjb25zdCBzaGFyZUJ1dHRvbkNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBzaGFyZU1vZGFsQ2xhc3MgKyAnLWJ1dHRvbnMnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIFxuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHNoYXJlQnV0dG9uLmNvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByb3RlY3RlZCBvblNob3coKSB7XG4gICAgICAgICAgICBzdXBlci5vblNob3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXR1cFZpZXdwb3J0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgdGhpcy5yZXNpemVkQ2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xuICAgICAgICAgICAgc3VwZXIub25IaWRkZW4oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5ldmVudHMub2ZmKCdyZXNpemVkJywgdGhpcy5yZXNpemVkQ2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByZXNpemVkQ2FsbGJhY2sgPSAoKSA9PiB0aGlzLnVwZGF0ZVZpZXdwb3J0KCk7XG4gICAgICAgIHByaXZhdGUgdXBkYXRlVmlld3BvcnQoKSB7IHRoaXMudmVoaWNsZVZpZXdwb3J0LlVwZGF0ZSh0aGlzLnZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMpOyB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRTaGFyZVVSTCgpOnN0cmluZyB7XG4gICAgICAgICAgICBsZXQgYXBwVVJMID0gJ2h0dHBzOi8vYXBwLnJpZGVzdHlsZXIubmV0JztcblxuICAgICAgICAgICAgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkFscGhhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1hbHBoYS5yaWRlc3R5bGVyLm5ldCc7XG4gICAgICAgICAgICBlbHNlIGlmIChhcGkuZW52aXJvbm1lbnQgPT09IGFwaS5FbnZpcm9ubWVudC5CZXRhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1iZXRhLnJpZGVzdHlsZXIubmV0JztcblxuICAgICAgICAgICAgY29uc3Qgc2hhcmVQYXRoID0gJy9zaGFyZS5jc2h0bWw/JztcblxuICAgICAgICAgICAgY29uc3Qgc2hhcmVQYXJhbXMgPSByaWRlc3R5bGVyLnV0aWxzLnRvUGFyYW1TdHJpbmcoXG4gICAgICAgICAgICAgICAgT2JqZWN0SGVscGVyLmFzc2lnbihcbiAgICAgICAgICAgICAgICAgICAgcmlkZXN0eWxlci5hdXRoLmF1dGhlbnRpY2F0ZURhdGEobnVsbCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9uc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiBhcHBVUkwgKyBzaGFyZVBhdGggKyBzaGFyZVBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFZpZXdwb3J0KCkge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgJ3JpZGVzdHlsZXItc2hvd2Nhc2Utdmlld3BvcnQnKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHZpZXdwb3J0RWxlbWVudCk7XG5cbiAgICAgICAgICAgIHZpZXdwb3J0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc3dpdGNoQW5nbGUoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVZpZXdwb3J0ID0gbmV3IFJpZGVTdHlsZXJWaWV3cG9ydCh2aWV3cG9ydEVsZW1lbnQpO1xuXG4gICAgICAgICAgICBsZXQgdmlld3BvcnRVcGRhdGVkID0gdGhpcy52ZWhpY2xlVmlld3BvcnQuVXBkYXRlKHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdGF0ZUVsZW1lbnQpIHZpZXdwb3J0VXBkYXRlZC5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBwcml2YXRlIGNhblN3aXRjaEFuZ2xlKCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbFxuICAgICAgICAgICAgfSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNTaWRlSW1hZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlVVJMID0gdGhpcy5nZXRTaGFyZVVSTCgpO1xuXG4gICAgICAgICAgICB0aGlzLnNldEVuYWJsZWQoZmFsc2UpO1xuXG4gICAgICAgICAgICBhcGkucmVxdWVzdChcImxpbmsvY3JlYXRlXCIsIHtcbiAgICAgICAgICAgICAgICBVUkw6IHRoaXMuZ2V0U2hhcmVVUkwoKVxuICAgICAgICAgICAgfSkuZG9uZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVVUkwocmVzcG9uc2UuU2hvcnRVUkwpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZXRFbmFibGVkKGVuYWJsZWQ6Ym9vbGVhbikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzaGFyZUJ1dHRvbiBvZiB0aGlzLnNoYXJlQnV0dG9ucykge1xuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLmNvbXBvbmVudC5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVVUkwoc2hhcmVVUkw6c3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFyZVRhZ3M6c3RyaW5nW10gPSBbJ3ZlaGljbGUnXTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlTWVzc2FnZSA9IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGVjay1vdXQtbXktdmVoaWNsZScpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zLldoZWVsRml0bWVudCkgc2hhcmVUYWdzLnB1c2goJ3doZWVscycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNoYXJlIGJ1dHRvbnNcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIHtcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRVUkwoc2hhcmVVUkwpO1xuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLnNldFRhZ3Moc2hhcmVUYWdzKTtcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRNZXNzYWdlKHNoYXJlTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHN3aXRjaEFuZ2xlKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblN3aXRjaEFuZ2xlKCkgfHwgdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsLkhhc1NpZGVJbWFnZSA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGUpXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuU2lkZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zLlR5cGUgPSB0aGlzLmltYWdlVHlwZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlVmlld3BvcnQuVXBkYXRlKHtcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXN1c3BlbnNpb24tc2VsZWN0b3InO1xuICAgIGNvbnN0IGVsZW1lbnRDbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zdXNwZW5zaW9uLXNlbGVjdG9yLWVsZW1lbnQnO1xuXG4gICAgY29uc3QgZGVmYXVsdFN1c3BlbnNpb25SYW5nZSA9IHtcbiAgICAgICAgTWluOiAtNCxcbiAgICAgICAgTWF4OiAwXG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3RvciBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICAvLyBwcml2YXRlIGZyb250OlN1c3BlbnNpb25VSUVsZW1lbnQ7XG4gICAgICAgIC8vIHByaXZhdGUgcmVhcjpTdXNwZW5zaW9uVUlFbGVtZW50O1xuICAgICAgICBwcml2YXRlIGZyb250QW5kUmVhcjpTdXNwZW5zaW9uVUlFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDtcbiAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uT3B0aW9uczpTdXNwZW5zaW9uT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBtaW46IGRlZmF1bHRTdXNwZW5zaW9uUmFuZ2UuTWluLFxuICAgICAgICAgICAgICAgIG1heDogZGVmYXVsdFN1c3BlbnNpb25SYW5nZS5NYXgsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbiB8fCAwLFxuICAgICAgICAgICAgICAgIHN0ZXA6IDEsXG4gICAgICAgICAgICAgICAgZGVjaW1hbFBsYWNlczogMSxcbiAgICAgICAgICAgICAgICB1bml0QWJicmV2aWF0aW9uOiAn4oCzJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUmV0cmlldmUgc3VzcGVuc2lvbiBmcm9tIEFQSSBzZXR0aW5nc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VzID0gdGhpcy5zaG93Y2FzZS5zZXR0aW5nc0Zyb21BUEkuU3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgICAgICAgICBsZXQge1N0eWxlVHlwZSxEcml2ZVR5cGV9ID0gdmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VLZXkgPSBTdHlsZVR5cGUgKyBEcml2ZVR5cGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2lvblJhbmdlS2V5IGluIHN1c3BlbnNpb25SYW5nZXMgPT09IGZhbHNlKSBzdXNwZW5zaW9uUmFuZ2VLZXkgPSAnRGVmYXVsdCc7XG4gICAgICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZSA9IHN1c3BlbnNpb25SYW5nZXNbc3VzcGVuc2lvblJhbmdlS2V5XSB8fCBkZWZhdWx0U3VzcGVuc2lvblJhbmdlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb25PcHRpb25zLm1pbiA9IHN1c3BlbnNpb25SYW5nZS5NaW47XG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbk9wdGlvbnMubWF4ID0gc3VzcGVuc2lvblJhbmdlLk1heDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mcm9udEFuZFJlYXIgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXG4gICAgICAgICAgICB9LCBzdXNwZW5zaW9uT3B0aW9ucykpO1xuXG4gICAgICAgICAgICB0aGlzLmZyb250QW5kUmVhci5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN1c3BlbnNpb246IHRoaXMuZnJvbnRBbmRSZWFyLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5mcm9udEFuZFJlYXIuY29tcG9uZW50KTtcblxuXG4gICAgICAgICAgICAvLyBsZXQgZnJvbnRPcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zID0gT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAvLyAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdmcm9udCcpXG4gICAgICAgICAgICAvLyB9LCBzdXNwZW5zaW9uT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMuZnJvbnQgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIGZyb250T3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIGxldCByZWFyT3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygncmVhcicpXG4gICAgICAgICAgICAvLyB9LCBzdXNwZW5zaW9uT3B0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHRoaXMucmVhciA9IG5ldyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQodGhpcy5zaG93Y2FzZSwgcmVhck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLmZyb250LmNvbXBvbmVudCk7XG4gICAgICAgICAgICAvLyB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnJlYXIuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgLy8gdGhpcy5mcm9udC5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gdGhpcy5yZWFyLnN1c3BlbnNpb25DaGFuZ2VkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKHR5cGVvZiB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayh7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBTdXNwZW5zaW9uRnJvbnQ6IHRoaXMuZnJvbnQudmFsdWUsXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBTdXNwZW5zaW9uUmVhcjogdGhpcy5yZWFyLnZhbHVlXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBzdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2s6IChyZW5kZXJSZXF1ZXN0Q2hhbmdlOnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykgPT4gdm9pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGdlbmVyYWwgaW50ZXJmYWNlIGZvciBVSSBjb21wb25lbnRzIHRoYXQgbW9kaWZ5IHN1c3BlbnNpb25cbiAgICAgKi9cbiAgICBhYnN0cmFjdCBjbGFzcyBTdXNwZW5zaW9uVUlFbGVtZW50IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByb3RlY3RlZCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zO1xuICAgICAgICBcbiAgICAgICAgcHVibGljIHZhbHVlOm51bWJlcjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gb3B0aW9ucy5zdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBvblN1c3BlbnNpb25DaGFuZ2VkKG5ld1ZhbHVlOm51bWJlcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdXNwZW5zaW9uOiB0aGlzLnZhbHVlXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrOiAobmV3U3VzcGVuc2lvbjpudW1iZXIpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgaW50ZXJmYWNlIFN1c3BlbnNpb25PcHRpb25zIHtcbiAgICAgICAgbWluOiBudW1iZXI7XG4gICAgICAgIG1heDogbnVtYmVyO1xuICAgICAgICBzdGFydDogbnVtYmVyO1xuICAgICAgICBzdGVwOiBudW1iZXI7XG4gICAgICAgIGRlY2ltYWxQbGFjZXM6IG51bWJlcjtcbiAgICAgICAgdW5pdEFiYnJldmlhdGlvbjogc3RyaW5nO1xuICAgIH1cblxuICAgIGludGVyZmFjZSBTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyBleHRlbmRzIFN1c3BlbnNpb25PcHRpb25zIHtcbiAgICAgICAgbGFiZWw6IHN0cmluZztcbiAgICB9XG5cbiAgICBjbGFzcyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQgZXh0ZW5kcyBTdXNwZW5zaW9uVUlFbGVtZW50IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzbGlkZXJFbGVtZW50Om5vVWlTbGlkZXIuSW5zdGFuY2U7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2xpZGVyOm5vVWlTbGlkZXIubm9VaVNsaWRlcjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlciAoc2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBlbGVtZW50Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSArICctbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLmxhYmVsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgc2xpZGVyRWxlbWVudDpIVE1MRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSArICctc2xpZGVyJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShzbGlkZXJFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IG9wdGlvbnMuc3RhcnQsXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgbWluOiBvcHRpb25zLm1pbixcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBvcHRpb25zLm1heFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RlcDogb3B0aW9ucy5zdGVwLFxuICAgICAgICAgICAgICAgIHBpcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3N0ZXBzJyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3RmaXg6c3RyaW5nID0gb3B0aW9ucy51bml0QWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlY2ltYWxQbGFjZXM6bnVtYmVyID0gb3B0aW9ucy5kZWNpbWFsUGxhY2VzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAodmFsdWU6bnVtYmVyKSA9PiB2YWx1ZS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgcG9zdGZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAodmFsdWU6c3RyaW5nKSA9PiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChTdHJpbmdIZWxwZXIuZXNjYXBlUmVnRXhwKHBvc3RmaXgpICsgJyQnKSwgXCJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyRWxlbWVudCA9IChzbGlkZXJFbGVtZW50IGFzIG5vVWlTbGlkZXIuSW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIgPSB0aGlzLnNsaWRlckVsZW1lbnQubm9VaVNsaWRlcjtcblxuICAgICAgICAgICAgdGhpcy5zbGlkZXIub24oJ3VwZGF0ZScsIChmb3JtYXR0ZWRWYWx1ZXMsIGhhbmRsZSwgdmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN1c3BlbnNpb25DaGFuZ2VkKHZhbHVlc1swXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBiYXJDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXRhYi1iYXInO1xuICAgIGNvbnN0IHRhYkNsYXNzID0gYmFyQ2xhc3MgKyAnLXRhYic7XG4gICAgY29uc3QgdGFiQmFja2dyb3VuZENsYXNzID0gdGFiQ2xhc3MgKyAnLWJhY2tncm91bmQnO1xuICAgIGNvbnN0IGFjdGl2ZVRhYkNsYXNzID0gdGFiQ2xhc3MgKyAnLWFjdGl2ZSc7XG4gICAgY29uc3QgbW9kZUNsYXNzID0gYmFyQ2xhc3MgKyAnLSc7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJhckNsYXNzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXRNb2RlKCd2ZXJ0aWNhbCcpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB0aGlzLm9uQ2xpY2soZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBtb2RlOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuTW9kZTtcblxuICAgICAgICBwdWJsaWMgdGFiU3dpdGNoZWRDYWxsYmFjazogUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYlN3aXRjaGVkQ2FsbGJhY2s7XG4gICAgICAgIHB1YmxpYyB0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXTtcbiAgICAgICAgcHVibGljIGN1cnJlbnRUYWI6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYjtcblxuICAgICAgICBwdWJsaWMgc2V0TW9kZShtb2RlOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuTW9kZSkge1xuICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGUgbW9kZXMgYXJlIHRoZSBzYW1lXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSBtb2RlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZSA9IChjbGFzc05hbWU6c3RyaW5nLCBmb3JjZTpib29sZWFuKSA9PiB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgZm9yY2UpO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGN1cnJlbnQgbW9kZSBjbGFzc1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm1vZGUgPT09ICdzdHJpbmcnKSB0b2dnbGUobW9kZUNsYXNzICsgdGhpcy5tb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgbmV3IG1vZGVcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgY3VycmVudCBtb2RlIGNsYXNzXG4gICAgICAgICAgICB0b2dnbGUobW9kZUNsYXNzICsgbW9kZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFicycgbW9kZVxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJEaXNwbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByaXZhdGUgdXBkYXRlVGFiRGlzcGxheSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50YWJzKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhYlBlcmNlbnQgPSAoMTAwL3RoaXMudGFicy5sZW5ndGgpICsgJyUnO1xuICAgICAgICAgICAgY29uc3QgbW9kZSA9IHRoaXMubW9kZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFiIG9mIHRoaXMudGFicykge1xuICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5lbGVtZW50LnN0eWxlLmhlaWdodCA9IHRhYlBlcmNlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5lbGVtZW50LnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5lbGVtZW50LnN0eWxlLndpZHRoID0gdGFiUGVyY2VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGFiLnVwZGF0ZUJhY2tncm91bmRQb2x5Z29uKG1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFRhYnModGFiczpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiQ3JlYXRlT3B0aW9uc1tdKTtcbiAgICAgICAgcHVibGljIHNldFRhYnModGFiczpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiW10pO1xuICAgICAgICBwdWJsaWMgc2V0VGFicyh0YWJzT3JUYWJDcmVhdGVPcHRpb25zOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXXxSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiQ3JlYXRlT3B0aW9uc1tdKSB7XG4gICAgICAgICAgICBsZXQgdGFiczpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiW107XG5cbiAgICAgICAgICAgIGlmICh0YWJzT3JUYWJDcmVhdGVPcHRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRhYnMgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFic09yVGFiQ3JlYXRlT3B0aW9uc1swXSBpbnN0YW5jZW9mIFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIpIHtcbiAgICAgICAgICAgICAgICB0YWJzID0gdGFic09yVGFiQ3JlYXRlT3B0aW9ucyBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhYnMgPSBuZXcgQXJyYXkodGFic09yVGFiQ3JlYXRlT3B0aW9ucy5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRhYnNPclRhYkNyZWF0ZU9wdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjcmVhdGVPcHRpb25zID0gdGFic09yVGFiQ3JlYXRlT3B0aW9uc1tpbmRleF0gYXMgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYkNyZWF0ZU9wdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIHRhYnNbaW5kZXhdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoY3JlYXRlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRhYnMgPSBBcnJheUhlbHBlci5jb3B5KHRhYnMpO1xuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgbGV0IHRhYlBlcmNlbnQgPSAoMTAwL3RhYnMubGVuZ3RoKSArICclJztcblxuICAgICAgICAgICAgZm9yIChsZXQgdGFiIG9mIHRhYnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0YWIuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiRGlzcGxheSgpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYih0YWJzWzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBjbGVhckFjdGl2ZVRhYigpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0QWN0aXZlVGFiKG5ld1RhYjpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKSB7XG4gICAgICAgICAgICBsZXQgb2xkVGFiID0gdGhpcy5jdXJyZW50VGFiO1xuXG4gICAgICAgICAgICBpZiAob2xkVGFiID09PSBuZXdUYWIpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gbmV3VGFiO1xuXG4gICAgICAgICAgICAvLyBTd2l0Y2ggdGhlIGFjdGl2ZSBjbGFzc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChvbGRUYWIpXG4gICAgICAgICAgICAgICAgICAgIG9sZFRhYi5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlVGFiQ2xhc3MpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChuZXdUYWIpXG4gICAgICAgICAgICAgICAgICAgIG5ld1RhYi5lbGVtZW50LmNsYXNzTGlzdC5hZGQoYWN0aXZlVGFiQ2xhc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZW5kIG9mZiB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmIChuZXdUYWIgJiYgdHlwZW9mIHRoaXMudGFiU3dpdGNoZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICB0aGlzLnRhYlN3aXRjaGVkQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICBvbGRUYWI6IG9sZFRhYixcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFiOiBuZXdUYWJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25DbGljayhlOk1vdXNlRXZlbnQpIHtcbiAgICAgICAgICAgIGxldCBjbGlja1RhcmdldDpIVE1MRWxlbWVudCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRFbGVtZW50OkhUTUxFbGVtZW50ID0gY2xpY2tUYXJnZXQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEdvIHVwIHRocm91Z2ggdGhlIHBhcmVudCBlbGVtZW50cyB1bnRpbCB3ZSByZWFjaCB0aGUgdGFiIGJhclxuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRFbGVtZW50ICE9PSB0aGlzLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGVsZW1lbnQgaXMgYSB0YWJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHRhYkNsYXNzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVGFiQ2xpY2sodGhpcy50YWJGb3JFbGVtZW50KGN1cnJlbnRFbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uVGFiQ2xpY2sodGFiOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIpIHtcbiAgICAgICAgICAgIGlmICghdGFiKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHRhYik7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdGFiRm9yTGFiZWwobGFiZWw6c3RyaW5nKTpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRhYiBvZiB0aGlzLnRhYnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFiLmxhYmVsID09PSBsYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB0YWJGb3JFbGVtZW50KGVsZW1lbnQ6SFRNTEVsZW1lbnQpOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFiIG9mIHRoaXMudGFicykge1xuICAgICAgICAgICAgICAgIGlmICh0YWIuZWxlbWVudCA9PT0gZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyIHtcbiAgICAgICAgZXhwb3J0IHR5cGUgTW9kZSA9ICdob3Jpem9udGFsJyB8ICd2ZXJ0aWNhbCc7XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBUYWJTd2l0Y2hlZEV2ZW50IHtcbiAgICAgICAgICAgIG5ld1RhYjpUYWI7XG4gICAgICAgICAgICBvbGRUYWI6VGFiO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBUYWJTd2l0Y2hlZENhbGxiYWNrIHtcbiAgICAgICAgICAgICh0aGlzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciwgZXZlbnQ6VGFiU3dpdGNoZWRFdmVudCk6dm9pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgVGFiQ3JlYXRlT3B0aW9ucyB7XG4gICAgICAgICAgICBpY29uOnN0cmluZztcbiAgICAgICAgICAgIGxhYmVsOnN0cmluZztcbiAgICAgICAgICAgIGtleTpzdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgY2xhc3MgVGFiIHtcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBpY29uQ2xhc3M6c3RyaW5nO1xuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGxhYmVsOnN0cmluZztcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBlbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGtleTpzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHByaXZhdGUgYmFja2dyb3VuZE1vZGU6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLk1vZGU7XG4gICAgICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGJhY2tncm91bmRQb2x5Z29uOlNWR1BvbHlnb25FbGVtZW50O1xuXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihjcmVhdGVPcHRpb25zOlRhYkNyZWF0ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsID0gY3JlYXRlT3B0aW9ucy5sYWJlbDtcbiAgICAgICAgICAgICAgICB0aGlzLmljb25DbGFzcyA9IGNyZWF0ZU9wdGlvbnMuaWNvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmtleSA9IGNyZWF0ZU9wdGlvbnMua2V5O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kTW9kZSA9ICdob3Jpem9udGFsJztcblxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRhYkNsYXNzXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUljb24oe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiBjcmVhdGVPcHRpb25zLmljb24sXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHdyYXA6IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgdGFiQ2xhc3MgKyAnLWljb24nKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYmFja2dyb3VuZCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGFiQmFja2dyb3VuZENsYXNzLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5lbGVtZW50XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoU3R5bGVIZWxwZXIuc3ZnU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlU1ZHRWxlbWVudCgnc3ZnJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbzogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g6ICcwIDAgMTAwIDEwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQ6ICh0aGlzLmJhY2tncm91bmRQb2x5Z29uID0gSFRNTEhlbHBlci5jcmVhdGVTVkdFbGVtZW50KCdwb2x5Z29uJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogJ2JsYWNrJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQuY2xhc3NMaXN0LmFkZCh0YWJCYWNrZ3JvdW5kQ2xhc3MgKyAnLW5vc3ZnJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRpdGxlID0gY3JlYXRlT3B0aW9ucy5sYWJlbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHVibGljIHVwZGF0ZUJhY2tncm91bmRQb2x5Z29uKG1vZGU6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5Nb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmJhY2tncm91bmRQb2x5Z29uKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUaGUgaGVpZ2h0IGluIHBlcmNlbnRhZ2Ugb2YgdGhlIHRyaWFuZ2xlIHNpemVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCB0cmlhbmdsZUhlaWdodCA9IG1vZGUgPT09ICd2ZXJ0aWNhbCcgPyAzMCA6IDE1O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoZSB3aWR0aCBpbiBwZXJjZW50YWdlIG9mIHRoZSB0cmlhbmdsZSBzaXplXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29uc3QgdHJpYW5nbGVXaWR0aCA9IG1vZGUgPT09ICd2ZXJ0aWNhbCcgPyAxNSA6IDMwO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kUG9seWdvbi5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIG1vZGUgPT09ICd2ZXJ0aWNhbCcgPyBcbiAgICAgICAgICAgICAgICAgICAgYDAsMCAxMDAsMCAxMDAsJHs1MC10cmlhbmdsZUhlaWdodC8yfSAkezEwMC10cmlhbmdsZVdpZHRofSw1MCAxMDAsJHs1MCt0cmlhbmdsZUhlaWdodC8yfSAxMDAsMTAwIDAsMTAwYCA6XG4gICAgICAgICAgICAgICAgICAgIGAwLDAgJHs1MC10cmlhbmdsZUhlaWdodC8yfSwwIDUwLCR7dHJpYW5nbGVIZWlnaHR9ICR7NTArdHJpYW5nbGVIZWlnaHQvMn0sMCAxMDAsMCAxMDAsMTAwLCAwLDEwMGBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBDb2x1bW4gPSBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5Db2x1bW47XG4gICAgaW1wb3J0IE9wdGlvbnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5PcHRpb25zO1xuXG4gICAgY29uc3QgdGFibGVDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXRhYmxlJztcbiAgICBjb25zdCBoZWFkQ2xhc3MgPSB0YWJsZUNsYXNzICsgJy1oZWFkJztcbiAgICBjb25zdCBib2R5Q2xhc3MgPSB0YWJsZUNsYXNzICsgJy1ib2R5JztcbiAgICBjb25zdCBib2R5TG9hZGluZ0NsYXNzID0gYm9keUNsYXNzICsgJy1sb2FkaW5nJztcbiAgICBjb25zdCBjb250YWluZXJDbGFzcyA9IHRhYmxlQ2xhc3MgKyAnLWNvbnRhaW5lcic7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVGFibGU8Um93VHlwZT4gZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IG9wdGlvbnM6T3B0aW9uczxSb3dUeXBlPjtcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGNvbHVtbnM6Q29sdW1uPFJvd1R5cGU+W107XG5cbiAgICAgICAgcHJvdGVjdGVkIHRib2R5OkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZW1wdHlDZWxsU3RyaW5nOnN0cmluZyA9ICctJztcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOk9wdGlvbnM8Um93VHlwZT4pIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBPYmplY3RIZWxwZXIuYXNzaWduKHtcblxuICAgICAgICAgICAgfSwgb3B0aW9ucykgXG5cbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gb3B0aW9ucy5jb2x1bW5zO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgdGFibGUgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywge1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRhYmxlQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgdGhlYWQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJywge1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0YWJsZSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGhlYWRDbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGJvZHkgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jywge1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0YWJsZSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJvZHlDbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVIZWFkZXJzKHRoZWFkKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSB0YWJsZTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucm93cykgdGhpcy5hcHBlbmRSb3dzKG9wdGlvbnMucm93cyk7XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnN0YXJ0TG9hZGluZykgdGhpcy5zZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdlbmVyYXRlSGVhZGVyQ2VsbChjb2x1bW46Q29sdW1uPFJvd1R5cGU+KTpIVE1MVGFibGVIZWFkZXJDZWxsRWxlbWVudCB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gY29sdW1uLmhlYWRlcjtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBoZWFkZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdGVkSGVhZGVyID0gaGVhZGVyKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGdlbmVyYXRlZEhlYWRlciA9PT0gJ3N0cmluZycgPyBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RoJywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnZW5lcmF0ZWRIZWFkZXJcbiAgICAgICAgICAgICAgICB9KSA6IGdlbmVyYXRlZEhlYWRlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRoID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0aCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBoZWFkZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdGg7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZ2VuZXJhdGVIZWFkZXJzKHRoZWFkOkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyUm93ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVIZWFkZXJDZWxsKGNvbHVtbikpOyAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZW5lcmF0ZVJvd0NlbGwocm93OlJvd1R5cGUsIGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUNlbGxFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCBjZWxsID0gY29sdW1uLmNlbGw7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0ZWRDZWxsID0gKGNlbGwgYXMgUmlkZVN0eWxlclNob3djYXNlVGFibGUuQ2VsbEdlbmVyYXRvcjxSb3dUeXBlPikocm93LCBjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBnZW5lcmF0ZWRDZWxsID09PSAnc3RyaW5nJyA/IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGdlbmVyYXRlZENlbGxcbiAgICAgICAgICAgICAgICB9KSA6IGdlbmVyYXRlZENlbGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB0ZCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogcm93W2NlbGwgYXMga2V5b2YgUm93VHlwZV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0ZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZW5lcmF0ZVJvdyhyb3c6Um93VHlwZSk6SFRNTFRhYmxlUm93RWxlbWVudCB7XG4gICAgICAgICAgICBsZXQgdHIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlUm93Q2VsbChyb3csIGNvbHVtbikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgYXBwZW5kUm93cyhyb3dzOlJvd1R5cGVbXSkge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IHJvd3NGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgICAgICAgICByb3dzRnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZVJvdyhyb3cpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50Ym9keS5hcHBlbmRDaGlsZChyb3dzRnJhZ21lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHNldExvYWRpbmcobG9hZGluZzpib29sZWFuKSB7XG4gICAgICAgICAgICB0aGlzLnRib2R5LmNsYXNzTGlzdC50b2dnbGUoYm9keUxvYWRpbmdDbGFzcywgbG9hZGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc3RhdGljIGZvcm1hdENlbGw8VD4ob2JqZWN0OiBULCBrZXk6a2V5b2YgVCwgcG9zdGZpeD86c3RyaW5nKTpIVE1MVGFibGVDZWxsRWxlbWVudCB7XG4gICAgICAgICAgICBsZXQgc3RyaW5nOnN0cmluZyA9IG9iamVjdFtrZXldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZyA/IChwb3N0Zml4ID8gc3RyaW5nICsgcG9zdGZpeCA6IHN0cmluZykgOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5lbXB0eUNlbGxTdHJpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZSB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSGVhZGVyR2VuZXJhdG9yPFJvd1R5cGU+IHtcbiAgICAgICAgICAgIChjb2x1bW46Q29sdW1uPFJvd1R5cGU+KTpIVE1MVGFibGVIZWFkZXJDZWxsRWxlbWVudHxzdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIENlbGxHZW5lcmF0b3I8Um93VHlwZT4ge1xuICAgICAgICAgICAgKHJvdzpSb3dUeXBlLCBjb2x1bW46Q29sdW1uPFJvd1R5cGU+KTpIVE1MVGFibGVDZWxsRWxlbWVudHxzdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIENvbHVtbjxSb3dUeXBlPiB7XG4gICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3xIZWFkZXJHZW5lcmF0b3I8Um93VHlwZT47XG4gICAgICAgICAgICBjZWxsOiBrZXlvZiBSb3dUeXBlfENlbGxHZW5lcmF0b3I8Um93VHlwZT47XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbnM8Um93VHlwZT4ge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb2x1bW4gc2V0dGluZ3NcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29sdW1uczogQ29sdW1uPFJvd1R5cGU+W107XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUm93cyB0byBpbml0aWFsaXplIHRoZSB0YWJsZSB3aXRoXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJvd3M/OiBSb3dUeXBlW107XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgc3RhcnQgdGhlIHRhYmxlIGluIHRoZSBsb2FkaW5nIHN0YXRlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN0YXJ0TG9hZGluZz86IGJvb2xlYW47XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFRpcmVGaWx0ZXJNb2RlbCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuVGlyZUZpbHRlck1vZGVsO1xuICAgIGltcG9ydCBUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsID0gcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbDtcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3I8VGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbCwgVGlyZUZpbHRlck1vZGVsPiB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdmVoaWNsZVRpcmVPcHRpb25JRDpzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc3VwcG9ydGVkVmVoaWNsZUltYWdlcnk6IHtcbiAgICAgICAgICAgIGFuZ2xlZDogYm9vbGVhbjtcbiAgICAgICAgICAgIHNpZGU6IGJvb2xlYW47XG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlZmF1bHRGaWx0ZXJzOiBUaXJlRmlsdGVyTW9kZWw7XG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50RmlsdGVyczogVGlyZUZpbHRlck1vZGVsO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gc2hvd2Nhc2VJbnN0YW5jZS5zdGF0ZS5nZXREYXRhKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydGVkVmVoaWNsZUltYWdlcnkgPSB7XG4gICAgICAgICAgICAgICAgYW5nbGVkOiBzdGF0ZURhdGEudmVoaWNsZUhhc0FuZ2xlZEltYWdlLFxuICAgICAgICAgICAgICAgIHNpZGU6IHN0YXRlRGF0YS52ZWhpY2xlSGFzU2lkZUltYWdlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRGaWx0ZXJzID0ge1xuICAgICAgICAgICAgICAgIFZlaGljbGVUaXJlT3B0aW9uOiB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQsXG4gICAgICAgICAgICAgICAgSGFzQ2F0YWxvZ0ltYWdlOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGNvdW50UmVzdWx0cyhmaWx0ZXJzOiBUaXJlRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiByZXNwb25zZS5Db3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIGdldFJlc3VsdHMoZmlsdGVyczogVGlyZUZpbHRlck1vZGVsKTogcmlkZXN0eWxlci5SaWRlU3R5bGVyUHJvbWlzZTxUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsW10sIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwidGlyZS9nZXRtb2RlbGRlc2NyaXB0aW9uc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4gcmVzcG9uc2UuTW9kZWxzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEZpbHRlcihwcm9kdWN0OiBUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogYm9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEltYWdlU291cmNlKHByb2R1Y3Q6IFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHJpZGVzdHlsZXIudGlyZS5pbWFnZSh7XG4gICAgICAgICAgICAgICAgVGlyZUZpdG1lbnRSZXNvdXJjZVR5cGU6IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVGlyZUZpdG1lbnRSZXNvdXJjZVR5cGUuQ2F0YWxvZyxcbiAgICAgICAgICAgICAgICBUaXJlTW9kZWw6IHByb2R1Y3QuVGlyZU1vZGVsSUQsXG4gICAgICAgICAgICAgICAgV2lkdGg6IDEwMCxcbiAgICAgICAgICAgICAgICBIZWlnaHQ6IDEwMCxcbiAgICAgICAgICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXG4gICAgICAgICAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxuICAgICAgICAgICAgICAgIEluY2x1ZGVTaGFkb3c6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0SW1hZ2VMYWJlbHMocHJvZHVjdDogVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IHsgcHJpbWFyeTogc3RyaW5nOyBzZWNvbmRhcnk/OiBzdHJpbmc7IHRlcnRpYXJ5Pzogc3RyaW5nOyB9IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeTogcHJvZHVjdC5UaXJlQnJhbmROYW1lLFxuICAgICAgICAgICAgICAgIHNlY29uZGFyeTogcHJvZHVjdC5UaXJlTW9kZWxOYW1lLFxuICAgICAgICAgICAgICAgIHRlcnRpYXJ5OiBwcm9kdWN0LkF0dHJpYnV0ZXMgJiYgcHJvZHVjdC5BdHRyaWJ1dGVzLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3QuQXR0cmlidXRlcy5qb2luKCcsICcpIDogJydcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgT3B0aW9uID0gUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uLk9wdGlvbjtcbiAgICBpbXBvcnQgT3B0aW9uRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi5PcHRpb25FbGVtZW50O1xuICAgIGltcG9ydCBPcHRpb25DaGFuZ2VkQ2FsbGJhY2sgPSBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24uT3B0aW9uQ2hhbmdlZENhbGxiYWNrO1xuXG4gICAgY29uc3QgdG9nZ2xlQnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS10b2dnbGUtYnV0dG9uJztcbiAgICBjb25zdCBvcHRpb25DbGFzcyA9IHRvZ2dsZUJ1dHRvbkNsYXNzICsgJy1vcHRpb24nO1xuICAgIGNvbnN0IG9wdGlvbkFjdGl2ZUNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWFjdGl2ZSc7XG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbiBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRvZ2dsZSBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyB2YWx1ZTpzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaCBhIGNoYW5nZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHZhbHVlIGlzIGNoYW5nZWRcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBvbkNoYW5nZWQ6T3B0aW9uQ2hhbmdlZENhbGxiYWNrO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgdGhlIERPTSBmb3IgdGhlIHRvZ2dsZSBidXR0b25cbiAgICAgICAgICogXG4gICAgICAgICAqIEBvdmVycmlkZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0b2dnbGVCdXR0b25DbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tFdmVudCA9PiB0aGlzLm9uQ2xpY2tlZChjbGlja0V2ZW50KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhlIHRvZ2dsZSBidXR0b24gaXMgY2xpY2tlZCBvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBvbkNsaWNrZWQoY2xpY2tFdmVudDpNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQ6SFRNTEVsZW1lbnQgPSBjbGlja0V2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbkNsYXNzKSkgcmV0dXJuOyAvLyBUaGUgY2xpY2sgd2FzIG5vdCBvbiBhbiBvcHRpb25cbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbkFjdGl2ZUNsYXNzKSkgcmV0dXJuOyAvLyBUaGUgY2xpY2sgd2FzIG9uIGFuIGFjdGl2ZSBvcHRpb25cblxuICAgICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb25FbGVtZW50KHRhcmdldCBhcyBPcHRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2VsZWN0T3B0aW9uRWxlbWVudChvcHRpb25FbGVtZW50Ok9wdGlvbkVsZW1lbnQsIHRyaWdnZXJDaGFuZ2U6Ym9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlOnN0cmluZyA9IG9wdGlvbkVsZW1lbnQudmFsdWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbmV3VmFsdWU7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgdGhpcy5jb21wb25lbnQuY2hpbGRyZW4ubGVuZ3RoOyBjaGlsZEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE9wdGlvbkVsZW1lbnQ6T3B0aW9uRWxlbWVudCA9IHRoaXMuY29tcG9uZW50LmNoaWxkcmVuW2NoaWxkSW5kZXhdIGFzIE9wdGlvbkVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgY2hpbGRPcHRpb25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUob3B0aW9uQWN0aXZlQ2xhc3MsIGNoaWxkT3B0aW9uRWxlbWVudCA9PT0gb3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkNoYW5nZWQgPT09ICdmdW5jdGlvbicgJiYgdHJpZ2dlckNoYW5nZSkgdGhpcy5vbkNoYW5nZWQobmV3VmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZhbHVlKHZhbHVlOnN0cmluZykge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHZhbHVlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGZvciAobGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgdGhpcy5jb21wb25lbnQuY2hpbGRyZW4ubGVuZ3RoOyBjaGlsZEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE9wdGlvbkVsZW1lbnQ6T3B0aW9uRWxlbWVudCA9IHRoaXMuY29tcG9uZW50LmNoaWxkcmVuW2NoaWxkSW5kZXhdIGFzIE9wdGlvbkVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkT3B0aW9uRWxlbWVudC52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb25FbGVtZW50KGNoaWxkT3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0T3B0aW9ucyhvcHRpb25zOk9wdGlvbltdKSB7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9wdGlvbihvcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGFkZE9wdGlvbihvcHRpb246T3B0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50Ok9wdGlvbkVsZW1lbnQgPSBPYmplY3RIZWxwZXIuYXNzaWduKEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzLFxuICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbi5sYWJlbCxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbi52YWx1ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB1bmRlZmluZWQpIHRoaXMuc2VsZWN0T3B0aW9uRWxlbWVudChvcHRpb25FbGVtZW50LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbiB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbkNoYW5nZWRDYWxsYmFjayB7XG4gICAgICAgICAgICAodmFsdWU6c3RyaW5nKTp2b2lkO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb24ge1xuICAgICAgICAgICAgbGFiZWw6c3RyaW5nO1xuICAgICAgICAgICAgdmFsdWU6c3RyaW5nO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlU2VsZWN0aW9uIGV4dGVuZHMgTWFpbkNvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcml2YXRlIGNob29zZVZlaGljbGVCdXR0b246SFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgY29udGVudENvbnRhaW5lcjpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbENvbnRhaW5lcjpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSBtb2RhbDpSaWRlU3R5bGVyVmVoaWNsZVNlbGVjdGlvbk1vZGFsO1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplTWFpbkNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwgPSBuZXcgUmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbCh7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiAoKSA9PiB0aGlzLmNvbXBvbmVudC5wYXJlbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoc2VsZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uRmluYWxTZWxlY3Rpb25NYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVmVoaWNsZVNlbGVjdGVkKHNlbGVjdGlvbi5WZWhpY2xlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgSW1hZ2VTZXR0aW5nczogb3B0aW9ucyA9PiB0aGlzLmdlbmVyYXRlVmVoaWNsZVByZXZpZXdTZXR0aW5ncygpLFxuICAgICAgICAgICAgICAgIEluY2x1ZGVPRVRpcmVPcHRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhcGkuYWZ0ZXJBdXRoZW50aWNhdGVkKCgpID0+IHRoaXMub25BdXRoZW50aWNhdGVkKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAgICAgICAgICAgLy9VUkwgQ0hFQ0sgTE9HSUNcblxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1zZWxlY3Rpb24nKTtcblxuICAgICAgICAgICAgdGhpcy5jb250ZW50Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1jb250ZW50IHJpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1zZWxlY3Rpb24tY29udGVudCcsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IGNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb3B5KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hvb3NlVmVoaWNsZUJ1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXlvdXItdmVoaWNsZScpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbnRlbnRDb250YWluZXIsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbGFyZ2U6IHRydWUsXG4gICAgICAgICAgICAgICAgaWQ6ICdyaWRlc3R5bGVyLXNob3djYXNlLXNlbGVjdC15b3VyLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgIHdyYXA6IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhJRCgnZGl2JywgJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2VsZWN0LXlvdXItdmVoaWNsZS13cmFwcGVyJylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNob29zZVZlaGljbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5TaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRDb3B5KCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gZW1ib2xkZW5GaXJzdFdvcmQgKHN0cmluZzpzdHJpbmcpIDogW0hUTUxFbGVtZW50LCBUZXh0XSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0V29yZCA9IFN0cmluZ0hlbHBlci5nZXRGaXJzdFdvcmQoc3RyaW5nKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nU3RyaW5nID0gc3RyaW5nLnN1YnN0cihmaXJzdFdvcmQubGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhUZXh0KCdzdHJvbmcnLCBmaXJzdFdvcmQpLFxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZVRleHRFbGVtZW50KHJlbWFpbmluZ1N0cmluZylcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdmlzdWFsaXplU3RyaW5nID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IGVtYm9sZGVuRmlyc3RXb3JkKHN0cmluZ3MuZ2V0U3RyaW5nKFwidmVoaWNsZS1zZWxlY3QtdmlzdWFsaXplLWludHJvXCIpKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb250ZW50Q29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBzaGFyZVN0cmluZyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaDEnLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kOiBlbWJvbGRlbkZpcnN0V29yZChzdHJpbmdzLmdldFN0cmluZyhcInZlaGljbGUtc2VsZWN0LXNoYXJlLWludHJvXCIpKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb250ZW50Q29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25BdXRoZW50aWNhdGVkKCkge1xuICAgICAgICAgICAgdGhpcy5jaG9vc2VWZWhpY2xlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0bW9kZWxzXCIsIHtcbiAgICAgICAgICAgICAgICBDb3VudDogMyxcbiAgICAgICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcbiAgICAgICAgICAgIH0pLmRvbmUocmVzcG9uc2UgPT4gdGhpcy5zaG93V2hlZWxzKHJlc3BvbnNlLk1vZGVscykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvblZlaGljbGVTZWxlY3RlZChzZWxlY3Rpb246UmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbC5TZWxlY3RlZFZlaGljbGVEYXRhKSB7XG4gICAgICAgICAgICAvLyBUaGUgdXNlciBoYXMgc2VsZWN0ZWQgYSB2ZWhpY2xlIHVzaW5nIHRoZSB2ZWhpY2xlIHNlbGVjdGlvbiBtb2RhbC5cbiAgICAgICAgICAgIC8vIE5vdyB3ZSBuZWVkIHRvIG9idGFpbiBhIE9FIHRpcmUgb3B0aW9uIGZvciB0aGVtLlxuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcihcInZlaGljbGUtc2VsZWN0ZWRcIiwgc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHNlbGVjdGlvbiwgbnVsbCwgbnVsbClcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93IHRoZSBwYXNzZWQgaW4gd2hlZWwgbW9kZWxzIGluIHRoZSB3aGVlbCBzaG93Y2FzZSBzZWN0aW9uIG9mIHRoZSB2ZWhpY2xlIHNlbGVjdGlvbiBzY3JlZW5cbiAgICAgICAgICogQHBhcmFtIG1vZGVscyBUaGUgd2hlZWwgbW9kZWxzIHRvIHNob3dcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgc2hvd1doZWVscyhtb2RlbHM6cmlkZXN0eWxlci5EYXRhT2JqZWN0cy5XaGVlbE1vZGVsRGF0YU9iamVjdFtdKSB7XG4gICAgICAgICAgICBsZXQgd2hlZWxDb250YWluZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aGVlbENvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHdoZWVsQ29udGFpbmVyID0gdGhpcy53aGVlbENvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uLXdoZWVsLXNob3djYXNlJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoZWVsQ29udGFpbmVyID0gdGhpcy53aGVlbENvbnRhaW5lcjtcblxuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkod2hlZWxDb250YWluZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbW9kZWxJbWFnZXM6SFRNTEltYWdlRWxlbWVudFtdID0gW107XG4gICAgICAgICAgICBsZXQgb25Nb2RlbEltYWdlTG9hZCA9IGZ1bmN0aW9uICh0aGlzOkhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtb2RlbEltYWdlIG9mIG1vZGVsSW1hZ2VzKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGVsSW1hZ2UuY29tcGxldGUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hlZWxDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAobGV0IG1vZGVsIG9mIG1vZGVscykge1xuICAgICAgICAgICAgICAgIGxldCBtb2RlbEltYWdlU291cmNlID0gcmlkZXN0eWxlci53aGVlbC5pbWFnZSh7XG4gICAgICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IG1vZGVsLldoZWVsTW9kZWxJRCxcbiAgICAgICAgICAgICAgICAgICAgV2lkdGg6IDQwMCxcbiAgICAgICAgICAgICAgICAgICAgSGVpZ2h0OiA0MDAsXG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxuICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGU6IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlLkNhdGFsb2csXG4gICAgICAgICAgICAgICAgICAgIEluY2x1ZGVTaGFkb3c6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgbW9kZWxJbWFnZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbW9kZWxJbWFnZS5jbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS12ZWhpY2xlLXNlbGVjdGlvbi13aGVlbC1zaG93Y2FzZS1pbWFnZSc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbW9kZWxJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25Nb2RlbEltYWdlTG9hZCk7XG4gICAgICAgICAgICAgICAgbW9kZWxJbWFnZXMucHVzaCggKTtcblxuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2Uuc3JjID0gbW9kZWxJbWFnZVNvdXJjZTtcbiAgICAgICAgICAgICAgICB3aGVlbENvbnRhaW5lci5hcHBlbmRDaGlsZChtb2RlbEltYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhdGVWZWhpY2xlUHJldmlld1NldHRpbmdzKCk6cmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVJlbmRlclJlcXVlc3Qge1xuICAgICAgICAgICAgbGV0IHNjYWxlID0gTWF0aC5tYXgod2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMCwgMSk7XG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb21wb25lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoVG9IZWlnaHQgPSAuNTtcbiAgICAgICAgICAgIGNvbnN0IG1heFJlcXVlc3RSZXNvbHV0aW9uID0gMTkyMDtcblxuICAgICAgICAgICAgLy8gV2lkdGggaXMgODAlIG9mIHRoZSBjb250YWluZXIgd2lkdGhcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aCAqIC44MDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gV2lkdGggaXMgNTAwIGlmIG5vdCBmb3VuZFxuICAgICAgICAgICAgaWYgKCF3aWR0aCkgd2lkdGggPSA1MDA7XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IG91ciBzY2FsZVxuICAgICAgICAgICAgd2lkdGggKj0gc2NhbGU7XG5cbiAgICAgICAgICAgIC8vIExpbWl0IHdpZHRoIHRvIG1heCByZXF1ZXN0IHJlc29sdXRpb25cbiAgICAgICAgICAgIGlmICh3aWR0aCA+IG1heFJlcXVlc3RSZXNvbHV0aW9uKSB3aWR0aCA9IG1heFJlcXVlc3RSZXNvbHV0aW9uO1xuXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaGVpZ2h0XG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gd2lkdGggKiB3aWR0aFRvSGVpZ2h0O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFdpZHRoOiB+fndpZHRoLFxuICAgICAgICAgICAgICAgIEhlaWdodDogfn5oZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFRhYiA9IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWI7XG4gICAgXG5cbiAgICBjb25zdCBjdXN0b21pemF0aW9uc0NsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbnMnO1xuICAgIGNvbnN0IGxvYWRpbmdDbGFzcyA9IGN1c3RvbWl6YXRpb25zQ2xhc3MgKyAnLWxvYWRpbmcnO1xuXG4gICAgdHlwZSBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5cyA9ICdwYWludCcgfCAnd2hlZWxzJyB8ICd0aXJlcycgfCAnc3VzcGVuc2lvbic7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24gZXh0ZW5kcyBNYWluQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByaXZhdGUgcHJvZHVjdFNlbGVjdG9yID0gUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yO1xuICAgICAgICBwcml2YXRlIHZpZXdwb3J0OlJpZGVTdHlsZXJWaWV3cG9ydDtcbiAgICAgICAgcHJpdmF0ZSB0YWJCYXI6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyO1xuICAgICAgICBwcml2YXRlIGNoYW5nZVdoZWVsU2l6ZTpSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemU7XG5cbiAgICAgICAgcHJpdmF0ZSB0aXRsZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgcm90YXRlRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSBmaWx0ZXJCdXR0b246SFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgc2hhcmVCdXR0b246SFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGV0YWlsczpWZWhpY2xlRGV0YWlscztcblxuICAgICAgICBwcml2YXRlIHRhYnM6IHtcbiAgICAgICAgICAgIFtrZXkgaW4gY3VzdG9taXphdGlvbkNvbXBvbmVudEtleXNdOiBUYWI7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBwcml2YXRlIGN1c3RvbWl6YXRpb25Db21wb25lbnRPcmRlcjpjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c1tdID0gWydwYWludCcsICd3aGVlbHMnLCAndGlyZXMnLCAnc3VzcGVuc2lvbiddO1xuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyOkhUTUxFbGVtZW50O1xuICAgICAgICBwcml2YXRlIGN1c3RvbWl6YXRpb25Db21wb25lbnRzOntcbiAgICAgICAgICAgIHBhaW50OiBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yO1xuICAgICAgICAgICAgd2hlZWxzOiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yO1xuICAgICAgICAgICAgdGlyZXM6IFJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvcjtcbiAgICAgICAgICAgIHN1c3BlbnNpb246IFJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3RvcjtcbiAgICAgICAgfTtcblxuICAgICAgICBwcml2YXRlIGN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nczoge1xuICAgICAgICAgICAgW2tleSBpbiBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c106IEN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncztcbiAgICAgICAgfSA9IHtcbiAgICAgICAgICAgIHBhaW50OiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3QtcGFpbnQnKSxcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd2hlZWxzOiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3Qtd2hlZWxzJyksXG4gICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGlyZXM6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC10aXJlcycpLFxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1c3BlbnNpb246IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXRTdHJpbmcoJ2FkanVzdC1zdXNwZW5zaW9uJyksXG4gICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByZXN1bHRzQXJyOkFycmF5PGFueT4gPSBbXTtcblxuICAgICAgICBwcml2YXRlIGNvbXBvbmVudHM6SUNvbXBvbmVudFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIElEIG9mIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIHZlaGljbGVcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgY3VycmVudGx5IGRpc3BsYXllZCB2ZWhpY2xlXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVEZXNjcmlwdGlvbjpzdHJpbmc7XG5cbiAgICAgICAgcHJpdmF0ZSB0YXJnZXREaWFtZXRlcjpudW1iZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBJbWFnZSBUeXBlIGZvciBkaXNwbGF5aW5nIHdoYXQgYW5nbGUgdGhlIGNhciBpcyBiZWluZyB2aWV3ZWRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgaW1hZ2VUeXBlOnJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIElEIG9mIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIE9FIHRpcmUgb3B0aW9uIGZvciB0aGUgdmVoaWNsZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbklEOnN0cmluZzsgXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVzY3JpcHRpb24gb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBPRSB0aXJlIG9wdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOnN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBPRSB0aXJlIG9wdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbjpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uTW9kZWw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkZXNjcmlwdGlvbiBtb2RlbCBvZiB0aGUgY3VycmVudGx5IGRpc3BsYXllZCB2ZWhpY2xlLFxuICAgICAgICAgKiBsb2FkZWQgZnJvbSB0aGUgQVBJXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVEZXNjcmlwdGlvbk1vZGVsOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlbmRlciBpbnN0cnVjdGlvbnMgZm9yIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIHZlaGljbGVcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgY3VycmVudFJlbmRlckluc3RydWN0aW9uczogcmlkZXN0eWxlci5SZXF1ZXN0cy5WZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zO1xuXG4gICAgICAgIHByb3RlY3RlZCBidWlsZENvbXBvbmVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBXYWl0IGZvciBpbml0aWFsaXphdGlvbiBiZWZvcmUgY3JlYXRpbmcgdGhlIHZpZXdwb3J0IGJlY2F1c2UgaXQgZGV0ZWN0c1xuICAgICAgICAgICAgLy8gdGhlIG9mZnNldCBwb3NpdGlvbmluZyBvZiB0aGUgdmlld3BvcnQgZWxlbWVudCB3aGVuIGNyZWF0ZWQgYW5kIG91ciBDU1NcbiAgICAgICAgICAgIC8vIGlzbid0IGd1YXJhbnRlZWQgdG8gYmUgbG9hZGVkIHVudGlsIHRoZSBpbml0aWFsaXplZCBldmVudFxuXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cFZpZXdwb3J0KGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNldHVwIGluaXRpYWwgdGFiIGxheW91dFxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiTGF5b3V0KCk7XG5cbiAgICAgICAgICAgICAgICAvL0NoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYSB2ZWhpY2xlIGluIHRoZSB1cmwgYW5kIHBhcnNlcyB0aGUgZGF0YSB0byBtYWtlIHRoZSBBUEkgY2FsbHNcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmluZGV4T2YoJ1ZlaGljbGVDb25maWd1cmF0aW9uJykgIT09IC0xICkgeyAgICAgXG4gICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVXJsRGF0YSh0aGlzLnBhcmFtZXRlcnMuZ2V0KCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCd2ZWhpY2xlLXNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0LlJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC8vIEhpZGUgdGhlIHNoYXJlIGJ1dHRvbiBpZiBzaGFyaW5nIGlzIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3djYXNlLnNldHRpbmdzRnJvbUFQSS5FbmFibGVTaGFyaW5nKVxuICAgICAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBjb3VudFRpcmVCcmFuZHMgPSBhcGkucmVxdWVzdChcInRpcmUvY291bnRicmFuZHNcIiwgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLnRpcmVGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50V2hlZWxCcmFuZHMgPSBhcGkucmVxdWVzdChcIndoZWVsL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMuZ2V0RmlsdGVycygpKTtcblxuICAgICAgICAgICAgICAgIFByb21pc2VIZWxwZXIuYWxsKFtjb3VudFRpcmVCcmFuZHMsIGNvdW50V2hlZWxCcmFuZHNdKS5kb25lKHJlc3VsdHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGlyZUJyYW5kQ291bnQgPSByZXN1bHRzWzBdLkNvdW50O1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2hlZWxCcmFuZENvdW50ID0gcmVzdWx0c1sxXS5Db3VudDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpcmVCcmFuZENvdW50KSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy50aXJlcy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2hlZWxCcmFuZENvdW50KSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy53aGVlbHMuZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0dXBUYWJzKCk7XG5cbiAgICAgICAgICAgICAgICAvL1NldHMgdGhlIGRpYW1ldGVyIHRvIHN0YXRlLCB1cGRhdGVzIHRoZSB2aWV3cG9ydCwgYW5kIHB1c2hlcyB0aGUgZGVzY3JpcHRpb24gdG8gdGhlIHVybFxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplKHRoaXMuc2hvd2Nhc2UpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUub3B0aW9uU2VsZWN0ZWRDYWxsYmFjayA9IG5ld09wdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsRml0bWVudDogbmV3T3B0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogbmV3T3B0aW9uLldoZWVsRml0bWVudElEXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW1xuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURldGFpbHMgPSBuZXcgVmVoaWNsZURldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFdoZWVsRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBuZXcgVGlyZURldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIsXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemVcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3VzdG9taXphdGlvbnNDbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBcHBlbmQgYW55IHN1YiBjb21wb25lbnRzXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQoY29tcG9uZW50LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEFuZ2xlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb24tY29tcG9uZW50LXRpdGxlLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb24tY29tcG9uZW50LXRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnZmlsdGVyLXJlc3VsdHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5ueTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWx0ZXJzKCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBsZXQgc2hhcmVCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaGFyZS1teS12ZWhpY2xlLWJ1dHRvbicsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogJzEnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNoYXJlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsKHRoaXMuc2hvd2Nhc2UsIHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucykuc2hvdygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKHN0YXRlRGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciByZXNpemUgZXZlbnRzXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbigncmVzaXplZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFN0YXJ0IGxpc3RlbmluZyBmb3IgYnJlYWtwb2ludCBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVEZXRhaWxzLnBhaW50U3dhdGNoQ2xpY2tDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHNldHVwVmlld3BvcnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utdmlld3BvcnQnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBjb250YWluZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2aWV3cG9ydEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMucG9wRXZlbnRMaXN0ZW5lcih0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdGFrZXMgaW4gdGhlIFVSTCBkYXRhIGFuZCByZXR1cm5zIGFuIHVwZGF0ZWQgVmlld3BvcnRcbiAgICAgICAgcHJpdmF0ZSBsb2FkVXJsRGF0YSh1cmxPYmplY3QpIHtcbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICAgIGxldCBEZXNjcmlwdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IGZ1bmN0aW9uKHZlaGljbGVTZWxlY3RBcmdzKSB7IFxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRkZXNjcmlwdGlvbnNcIiwgeyBWZWhpY2xlQ29uZmlndXJhdGlvbjogdXJsT2JqZWN0LlZlaGljbGVDb25maWd1cmF0aW9uIH0pOyBcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuRGVzY3JpcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5WZWhpY2xlQ29uZmlndXJhdGlvbiA9IHIuRGVzY3JpcHRpb25zWzBdLkNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5WZWhpY2xlRGVzY3JpcHRpb24gPSByLkRlc2NyaXB0aW9uc1swXS5GdWxsRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgVGlyZU9wdGlvbklEOiAgZnVuY3Rpb24odmVoaWNsZVNlbGVjdEFyZ3MpIHsgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gYXBpLnJlcXVlc3QoJ3ZlaGljbGUvZ2V0dGlyZW9wdGlvbmRldGFpbHMnLCB7VmVoaWNsZUNvbmZpZ3VyYXRpb246IHVybE9iamVjdC5WZWhpY2xlQ29uZmlndXJhdGlvbn0pOyBcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuRGV0YWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuVGlyZU9wdGlvbklEID0gci5EZXRhaWxzWzBdLlRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5UaXJlT3B0aW9uU3RyaW5nID0gci5EZXRhaWxzWzBdLkZyb250LkRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQudGFyZ2V0RGlhbWV0ZXIgPSByLkRldGFpbHNbMF0uRnJvbnQuSW5zaWRlRGlhbWV0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgVGlyZU1vZGVsSUQ6ICBmdW5jdGlvbih2ZWhpY2xlU2VsZWN0QXJncykgeyBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBhcGkucmVxdWVzdChcInRpcmUvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwge1RpcmVNb2RlbDogdXJsT2JqZWN0LlRpcmVNb2RlbElEfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuU3VjY2VzcyAmJiByLk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuY3VycmVudFRpcmUgPSByLk1vZGVsc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsgXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBQYWludE5hbWU6ICBmdW5jdGlvbih2ZWhpY2xlU2VsZWN0QXJncykgeyBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBhcGkucmVxdWVzdChcInZlaGljbGUvZ2V0cGFpbnRzY2hlbWVkZXNjcmlwdGlvbnNcIiwge1ZlaGljbGVQYWludFNjaGVtZTogdXJsT2JqZWN0LlBhaW50U2NoZW1lfSk7IFxuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5TY2hlbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHNjaGVtZSBvZiByLlNjaGVtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjaGVtZS5TY2hlbWVOYW1lID09IHVybE9iamVjdC5QYWludE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLlBhaW50U2NoZW1lID0gc2NoZW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6ICBmdW5jdGlvbih2ZWhpY2xlU2VsZWN0QXJncykgeyBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBhcGkucmVxdWVzdChcIndoZWVsL2dldG1vZGVsZGVzY3JpcHRpb25zXCIsIHtXaGVlbE1vZGVsOiB1cmxPYmplY3QuV2hlZWxNb2RlbH0pOyBcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5jdXJyZW50V2hlZWwgPSByLk1vZGVsc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50czogIGZ1bmN0aW9uKHZlaGljbGVTZWxlY3RBcmdzKSB7IFxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9uc1wiLCB7VmVoaWNsZUNvbmZpZ3VyYXRpb246IHVybE9iamVjdC5WZWhpY2xlQ29uZmlndXJhdGlvbiwgV2hlZWxNb2RlbDogdXJsT2JqZWN0LldoZWVsTW9kZWx9KTtcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldEJlc3RGaXRtZW50KHVybE9iamVjdCwgcik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnRJRDogIGZ1bmN0aW9uKHZlaGljbGVTZWxlY3RBcmdzKSB7IFxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9uc1wiLCB7V2hlZWxGaXRtZW50czogdXJsT2JqZWN0LldoZWVsRml0bWVudElEfSk7IFxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5GaXRtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5jdXJyZW50V2hlZWxGaXRtZW50ID0gci5GaXRtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWN0aXZlV2hlZWxEaWFtZXRlclNlbGVjdChyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvbWlzZUJ1aWxkZXIodXJsT2JqZWN0LCBEZXNjcmlwdGlvbnMpO1xuICAgICAgICB9ICAgIFxuXG4gICAgICAgIHByaXZhdGUgcHJvbWlzZUJ1aWxkZXIodXJsT2JqZWN0LCBEZXNjcmlwdGlvbnMpe1xuICAgICAgICAgICAgbGV0IHByb21BcnIgPSBbXTtcbiAgICAgICAgICAgIGxldCB2ZWhpY2xlU2VsZWN0QXJncyA9IHtcbiAgICAgICAgICAgICAgICBJbWFnZVVybDogJycsXG4gICAgICAgICAgICAgICAgY3VycmVudFN1c3BlbnNpb246IE51bWJlcih1cmxPYmplY3QuU3VzcGVuc2lvbilcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBEZXNjcmlwdGlvbnMpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodXJsT2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbUFyci5wdXNoKERlc2NyaXB0aW9uc1trZXldKHZlaGljbGVTZWxlY3RBcmdzKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gJ1doZWVsTW9kZWwnKSBwcm9tQXJyLnB1c2goRGVzY3JpcHRpb25zLldoZWVsRml0bWVudHModmVoaWNsZVNlbGVjdEFyZ3MpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICAgIFByb21pc2VIZWxwZXIuYWxsKHByb21BcnIpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5ldmVudHMudHJpZ2dlcihcInZlaGljbGUtc2VsZWN0ZWRcIiwgdmVoaWNsZVNlbGVjdEFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy9SZW1vdmVzIHRoZSBhY3RpdmUgY2xhc3MgaW4gdGhlICd3aGVlbCBzaXplJyB0YWJcbiAgICAgICAgLy9hcHBlbmRzIGl0IHRvIHRoZSBwcm9wZXIgZWxlbWVudCBhbmQgdXBkYXRlcyB0aGUgc3RhdGVcbiAgICAgICAgcHVibGljIGFjdGl2ZVdoZWVsRGlhbWV0ZXJTZWxlY3QocmVzdWx0cyl7XG4gICAgICAgICAgICBsZXQgY3VycmVudFdoZWVsRGlhbWV0ZXIgPSAhcmVzdWx0cyA/IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNaW4gKyAn4oCzJyA6IHJlc3VsdHMuRml0bWVudHNbMF0uRGlhbWV0ZXJNaW4gKyAn4oCzJztcbiAgICAgICAgICAgIGxldCB3aGVlbFNpemVBY3RpdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbi1waWNrZXItb3B0aW9uLWFjdGl2ZScpWzBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aGVlbFNpemVBY3RpdmUuY2xhc3NMaXN0LnJlbW92ZSgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbi1hY3RpdmUnKTsgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgd2hlZWxTaXplTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYnV0dG9uLXBpY2tlci1vcHRpb24nKVxuICAgICAgICAgICAgbGV0IGN1cnJlbnRTaXplOyBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aGVlbFNpemVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh3aGVlbFNpemVMaXN0W2ldLmlubmVySFRNTCA9PT0gY3VycmVudFdoZWVsRGlhbWV0ZXIpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2l6ZSA9IHdoZWVsU2l6ZUxpc3RbaV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiAhcmVzdWx0cyA/IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbEZpdG1lbnQgOiByZXN1bHRzLkZpdG1lbnRzWzBdXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY3VycmVudFNpemUuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbi1hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlVGFicygpIHtcbiAgICAgICAgICAgIGxldCB0YWJzOlRhYltdID0gW107XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCBkaXNhYmxlZCBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1trZXldLmVuYWJsZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKHRoaXMudGFic1trZXldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0VGFicyh0YWJzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiTGF5b3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHVwZGF0ZVRhYkxheW91dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5zaG93Y2FzZS5zdHlsZS5nZXRDdXJyZW50QnJlYWtwb2ludCgpO1xuXG4gICAgICAgICAgICBjb25zdCBob3Jpem9udGFsOmJvb2xlYW4gPSBjdXJyZW50QnJlYWtwb2ludCAmJiBjdXJyZW50QnJlYWtwb2ludFswXSA9PT0gJ3Bob25lLXBvcnRyYWl0JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0TW9kZShob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHNldHVwVGFicygpIHtcbiAgICAgICAgICAgIHRoaXMudGFiQmFyICA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIodGhpcy5zaG93Y2FzZSk7XG5cbiAgICAgICAgICAgIC8vIERlZmluZSBvdXIgdGFic1xuICAgICAgICAgICAgdGhpcy50YWJzID0ge1xuICAgICAgICAgICAgICAgIHBhaW50OiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdwYWludCcsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BhaW50JyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdwYWludCcpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgd2hlZWxzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVscycsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnd2hlZWxzJylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aXJlczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAndGlyZScsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmVzJyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCd0aXJlcycpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbjogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VzcGVuc2lvbicsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3N1c3BlbnNpb24nLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3N1c3BlbnNpb24nKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBTd2l0Y2ggdGhlIGJvdHRvbSB2aWV3LCB0aGUgY3VzdG9taXphdGlvbiBjb21wb25lbnQgd2hlbiBhIHRhYiBpcyBjbGlja2VkIG9uXG4gICAgICAgICAgICB0aGlzLnRhYkJhci50YWJTd2l0Y2hlZENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFiID0gZS5uZXdUYWI7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbmV3VGFiLmtleTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cyAmJiBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50c1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgbGV0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQgfHwgIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyeWluZyB0byBzaG93IHRoZSB2aXN1YWxpemUgc2NyZWVuIHdpdGhvdXQgYSB2ZWhpY2xlIGNvbmZpZ3VyYXRpb24gb3IgdGlyZSBvcHRpb24uJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2ZWhpY2xlQ2hhbmdlZCA9ICFHVUlESGVscGVyLmFyZUVxdWFsKHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCwgdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEKTtcbiAgICAgICAgICAgIGxldCB0aXJlT3B0aW9uQ2hhbmdlZCA9ICFHVUlESGVscGVyLmFyZUVxdWFsKHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCwgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEKTtcblxuICAgICAgICAgICAgcmV0dXJuIHZlaGljbGVDaGFuZ2VkIHx8IHRpcmVPcHRpb25DaGFuZ2VkO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uRGlzcGxheSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSkge1xuICAgICAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSURcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbiA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLmNsZWFyQWN0aXZlVGFiKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVDaGFuZ2VkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25WZWhpY2xlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyKTtcblxuICAgICAgICAgICAgLy8gU2V0IHRoZSBjdXN0b21pemF0aW9uIGNvbnRhaW5lciBhcyBsb2FkaW5nIHdoaWxlIHdlJ3JlIGxvYWRpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICAgICAgICAgICAgLy8gYWJvdXQgdGhlIHZlaGljbGVcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGxvYWRpbmdDbGFzcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xuXG4gICAgICAgICAgICAvLyBEZXNlbGVjdCBhbnkgYWN0aXZlIHRhYlxuICAgICAgICAgICAgdGhpcy50YWJCYXIuY2xlYXJBY3RpdmVUYWIoKTtcblxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XG5cbiAgICAgICAgICAgIC8vIExvYWQgdGhlIHZlaGljbGUncyBkZXNjcmlwdGlvbiBtb2RlbFxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVEZXNjcmlwdGlvbiA9IGFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRkZXNjcmlwdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgIENvdW50OiAxLFxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSURcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgZ2V0VmVoaWNsZVRpcmVPcHRpb24gPSBhcGkucmVxdWVzdCgndmVoaWNsZS9nZXR0aXJlb3B0aW9uZGV0YWlscycsIHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwoW2dldFZlaGljbGVEZXNjcmlwdGlvbiwgZ2V0VmVoaWNsZVRpcmVPcHRpb25dKS5kb25lKHJlc3BvbnNlcyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHZlaGljbGVEZXNjcmlwdGlvbiA9IHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwgPSByZXNwb25zZXNbMF0uRGVzY3JpcHRpb25zWzBdO1xuICAgICAgICAgICAgICAgIGxldCB2ZWhpY2xlVGlyZU9wdGlvbjpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uTW9kZWw7XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkVGlyZU9wdGlvbklEOkd1aWQgPSBHVUlESGVscGVyLnBhcnNlKHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0aXJlT3B0aW9uIG9mIHJlc3BvbnNlc1sxXS5EZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChHVUlESGVscGVyLmFyZUVxdWFsKHRpcmVPcHRpb24uVGlyZU9wdGlvbklELCBzZWxlY3RlZFRpcmVPcHRpb25JRCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVRpcmVPcHRpb24gPSB0aXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb247XG5cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzQW5nbGVkSW1hZ2U6IHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgdmVoaWNsZUhhc1NpZGVJbWFnZTogdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmVPcHRpb246IHZlaGljbGVUaXJlT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHZlaGljbGVEZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVGb3JOZXdWZWhpY2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIiwgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0aGlzLnRhYnMucGFpbnQpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbXBvbmVudHMgdGhhdCB3aWxsIGJlIHN3aXRjaGVkIHdpdGggdGhlIHRhYnNcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICAgICAgcGFpbnQ6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHdoZWVsczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsU2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbjogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3Rvcih0aGlzLnNob3djYXNlKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyh0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldEZpbHRlcnMoZmlsdGVycyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMuc2V0RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQub25QYWludFNjaGVtZVNlbGVjdGVkID0gcGFpbnRTY2hlbWUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7Y3VycmVudFBhaW50U2NoZW1lOiBwYWludFNjaGVtZX0pXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7UGFpbnRDb2xvcjogcGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleH0pLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPSBtb2RlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0T3B0aW9uSXNMb2FkaW5nKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuUmVuZGVyT25DdXJyZW50QW5nbGUgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9PT0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlICYmIG1vZGVsLkhhc0FuZ2xlSW1hZ2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPT09IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5TaWRlICYmIG1vZGVsLkhhc1NpZGVJbWFnZTtcbiAgICAgICAgICAgICAgICBpZiAoIWNhblJlbmRlck9uQ3VycmVudEFuZ2xlKSB0aGlzLnN3aXRjaEFuZ2xlKCk7XG5cbiAgICAgICAgICAgICAgICBhcGkucmVxdWVzdCgnd2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogbW9kZWwuV2hlZWxNb2RlbElELFxuICAgICAgICAgICAgICAgICAgICBJbmNsdWRlUHJpY2luZzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmRvbmUocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZml0bWVudHM6cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbFtdID0gcmVzcG9uc2UuRml0bWVudHM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiZXN0Rml0bWVudDpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGlhbWV0ZXIgPSB0aGlzLnZlaGljbGVUaXJlT3B0aW9uLkZyb250Lkluc2lkZURpYW1ldGVyO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpdG1lbnRzLnNvcnQoZnVuY3Rpb24gKGEsYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYURpZmYgPSBNYXRoLmFicyhhLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYkRpZmYgPSBNYXRoLmFicyhiLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYURpZmYgLSBiRGlmZjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYmVzdEZpdG1lbnQgPSBmaXRtZW50c1swXTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsOiBtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5zZXRGaXRtZW50T3B0aW9ucyhmaXRtZW50cywgYmVzdEZpdG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogYmVzdEZpdG1lbnQuV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKSk7ICAgXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnRpcmVzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrID0gbW9kZWwgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaXJlOiBtb2RlbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnN1c3BlbnNpb24uc3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrID0gcmVuZGVyVXBkYXRlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe2N1cnJlbnRTdXNwZW5zaW9uOiByZW5kZXJVcGRhdGUuU3VzcGVuc2lvbiB9KVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQocmVuZGVyVXBkYXRlKVxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuc3RhdGUuZ2V0RGF0YSgpMicsIHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGN1c3RvbWl6YXRpb25Db21wb25lbnQgb2YgT2JqZWN0SGVscGVyLmdldFZhbHVlczxJQ29tcG9uZW50Pih0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIuYXBwZW5kQ2hpbGQoY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCF0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlKSB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5TaWRlO1xuXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMuY2FuU3dpdGNoQW5nbGUoKSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgbGV0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7IFxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiAhc3RhdGVEYXRhLmN1cnJlbnRXaGVlbEZpdG1lbnQgPyB1bmRlZmluZWQgOiBzdGF0ZURhdGEuY3VycmVudFdoZWVsRml0bWVudC5XaGVlbEZpdG1lbnRJRCxcbiAgICAgICAgICAgICAgICBQYWludENvbG9yOiAhc3RhdGVEYXRhLmN1cnJlbnRQYWludFNjaGVtZSA/IHVuZGVmaW5lZCA6IHN0YXRlRGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCxcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5GYXIsXG4gICAgICAgICAgICAgICAgU3VzcGVuc2lvbjogIXN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbiA/IHVuZGVmaW5lZCA6IHN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbixcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUobG9hZGluZ0NsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50O1xuICAgICAgICBwcml2YXRlIHNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQoY3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgY29tcG9uZW50S2V5OnN0cmluZyA9IHRoaXMuZ2V0Q29tcG9uZW50S2V5KGN1c3RvbWl6YXRpb25Db21wb25lbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgc2V0dGluZ3M6Q3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzID0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3NbY29tcG9uZW50S2V5XTtcbiAgICAgICAgICAgIGxldCB0YWI6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYiA9IHRoaXMudGFic1tjb21wb25lbnRLZXldO1xuXG4gICAgICAgICAgICBpZiAodGFiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0QWN0aXZlVGFiKHRhYik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSBjdXN0b21pemF0aW9uQ29tcG9uZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIChjdXN0b21pemF0aW9uQ29tcG9uZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQpLnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAoY3VzdG9taXphdGlvbkNvbXBvbmVudCBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50KS51cGRhdGUoKTtcblxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBcbiAgICAgICAgICAgICAgICBjdXN0b21pemF0aW9uQ29tcG9uZW50IGluc3RhbmNlb2YgUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciAmJiBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gXG4gICAgICAgICAgICAgICAgJycgOiAnbm9uZSc7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBzZXR0aW5ncy5zaG93RmlsdGVyQnV0dG9uID8gJycgOiAnbm9uZSc7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgc2V0dGluZ3MudGl0bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50KTpzdHJpbmcge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50c1trZXldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gY3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlVmlld3BvcnQoaW5zdHJ1Y3Rpb25zPzpyaWRlc3R5bGVyLlJlcXVlc3RzLlZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMsIGluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydC5VcGRhdGUoaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgY2FuU3dpdGNoQW5nbGUoKTpib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzU2lkZUltYWdlIDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vUmV0dXJucyBmaXRtZW50cyBmb3Igd2hlZWwgc3RhdGVcbiAgICAgICAgcHJpdmF0ZSBnZXRCZXN0Rml0bWVudCh1cmxPYmplY3QsIHJlc3VsdHMpeyAgICAgICAgXG4gICAgICAgICAgICBsZXQgZml0bWVudHM6cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbFtdID0gcmVzdWx0cy5GaXRtZW50cztcbiAgICAgICAgICAgIGxldCBiZXN0Rml0bWVudDpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmaXRtZW50cy5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhRGlmZiA9IE1hdGguYWJzKGEuRGlhbWV0ZXJNaW4gLSB0aGlzLnRhcmdldERpYW1ldGVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiRGlmZiA9IE1hdGguYWJzKGIuRGlhbWV0ZXJNaW4gLSB0aGlzLnRhcmdldERpYW1ldGVyKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYURpZmYgLSBiRGlmZjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBiZXN0Rml0bWVudCA9IGZpdG1lbnRzWzBdO1xuXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5zZXRGaXRtZW50T3B0aW9ucyhmaXRtZW50cywgYmVzdEZpdG1lbnQpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2hvd0ZpbHRlcnMoKSB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50ID0gdGhpcy5hY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50O1xuICAgICAgICAgICAgbGV0IGZpbHRlck1vZGFsOlJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsPGFueSwgYW55PjtcblxuICAgICAgICAgICAgaWYgKGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPT09IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3VudFRleHRGb3JtYXQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzaG93LWNvdW50LWZvcm1hdC10aXJlcycpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPT09IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwodGhpcy5zaG93Y2FzZSwge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJQcm92aWRlcjogdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscycpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWx0ZXJNb2RhbCkge1xuICAgICAgICAgICAgICAgIGZpbHRlck1vZGFsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vQ2huYWdlcyBhbmdsZWQgdmlldyBvZiB2ZWhpY2xlXG4gICAgICAgIHByaXZhdGUgc3dpdGNoQW5nbGUoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU3dpdGNoQW5nbGUoKSB8fCB0aGlzLnN0YXRlLmdldERhdGEoKS5jdXJyZW50V2hlZWwuSGFzU2lkZUltYWdlID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVR5cGUgPT09IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZSkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuU2lkZTsgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgVHlwZTogdGhpcy5pbWFnZVR5cGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW50ZXJmYWNlIEN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncyB7XG4gICAgICAgIHRpdGxlOnN0cmluZztcbiAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogYm9vbGVhbjtcbiAgICAgICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICB9XG59IiwidmFyIFJpZGVTdHlsZXJTaG93Y2FzZTtcbihmdW5jdGlvbiAoUmlkZVN0eWxlclNob3djYXNlKSB7XG4gICAgY29uc3QgY3VzdG9taXphdGlvbnNDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb25zJztcbiAgICBjb25zdCBsb2FkaW5nQ2xhc3MgPSBjdXN0b21pemF0aW9uc0NsYXNzICsgJy1sb2FkaW5nJztcbiAgICBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlVmlzdWFsaXphdGlvbiBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZS5NYWluQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdG9yID0gUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvcjtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyID0gWydwYWludCcsICd3aGVlbHMnLCAndGlyZXMnLCAnc3VzcGVuc2lvbiddO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXBhaW50JyksXG4gICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3aGVlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXdoZWVscycpLFxuICAgICAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aXJlczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3QtdGlyZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhZGp1c3Qtc3VzcGVuc2lvbicpLFxuICAgICAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJlc3VsdHNBcnIgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBidWlsZENvbXBvbmVudChjb250YWluZXIpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGluaXRpYWxpemF0aW9uIGJlZm9yZSBjcmVhdGluZyB0aGUgdmlld3BvcnQgYmVjYXVzZSBpdCBkZXRlY3RzXG4gICAgICAgICAgICAvLyB0aGUgb2Zmc2V0IHBvc2l0aW9uaW5nIG9mIHRoZSB2aWV3cG9ydCBlbGVtZW50IHdoZW4gY3JlYXRlZCBhbmQgb3VyIENTU1xuICAgICAgICAgICAgLy8gaXNuJ3QgZ3VhcmFudGVlZCB0byBiZSBsb2FkZWQgdW50aWwgdGhlIGluaXRpYWxpemVkIGV2ZW50XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cFZpZXdwb3J0KGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgaW5pdGlhbCB0YWIgbGF5b3V0XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgICAgICAgICAvL0NoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYSB2ZWhpY2xlIGluIHRoZSB1cmwgYW5kIHBhcnNlcyB0aGUgZGF0YSB0byBtYWtlIHRoZSBBUEkgY2FsbHNcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24uc2VhcmNoLmluZGV4T2YoJ1ZlaGljbGVDb25maWd1cmF0aW9uJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFVybERhdGEodGhpcy5wYXJhbWV0ZXJzLmdldCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ3ZlaGljbGUtc2VsZWN0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnQuUmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBzaGFyZSBidXR0b24gaWYgc2hhcmluZyBpcyBkaXNhYmxlZFxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93Y2FzZS5zZXR0aW5nc0Zyb21BUEkuRW5hYmxlU2hhcmluZylcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBsZXQgY291bnRUaXJlQnJhbmRzID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwidGlyZS9jb3VudGJyYW5kc1wiLCB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgICAgICBsZXQgY291bnRXaGVlbEJyYW5kcyA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcIndoZWVsL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci5hbGwoW2NvdW50VGlyZUJyYW5kcywgY291bnRXaGVlbEJyYW5kc10pLmRvbmUocmVzdWx0cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aXJlQnJhbmRDb3VudCA9IHJlc3VsdHNbMF0uQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEJyYW5kQ291bnQgPSByZXN1bHRzWzFdLkNvdW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpcmVCcmFuZENvdW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3MudGlyZXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdoZWVsQnJhbmRDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLndoZWVscy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldHVwVGFicygpO1xuICAgICAgICAgICAgLy9TZXRzIHRoZSBkaWFtZXRlciB0byBzdGF0ZSwgdXBkYXRlcyB0aGUgdmlld3BvcnQsIGFuZCBwdXNoZXMgdGhlIGRlc2NyaXB0aW9uIHRvIHRoZSB1cmxcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5vcHRpb25TZWxlY3RlZENhbGxiYWNrID0gbmV3T3B0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiBuZXdPcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiBuZXdPcHRpb24uV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscyA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuVmVoaWNsZURldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5XaGVlbERldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5UaXJlRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhcixcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lciA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN1c3RvbWl6YXRpb25zQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEFwcGVuZCBhbnkgc3ViIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChjb21wb25lbnQuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXJvdGF0ZS12ZWhpY2xlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudC10aXRsZS1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbHRlci1yZXN1bHRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lubnk6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbHRlcnMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHNoYXJlQnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNoYXJlLW15LXZlaGljbGUtYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogJzEnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzaGFyZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwodGhpcy5zaG93Y2FzZSwgdGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zKS5zaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKHN0YXRlRGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTdGFydCBsaXN0ZW5pbmcgZm9yIHJlc2l6ZSBldmVudHNcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGxpc3RlbmluZyBmb3IgYnJlYWtwb2ludCBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBzZXR1cFZpZXdwb3J0KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXZpZXdwb3J0JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogY29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZpZXdwb3J0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEFuZ2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMucG9wRXZlbnRMaXN0ZW5lcih0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICAvL3Rha2VzIGluIHRoZSBVUkwgZGF0YSBhbmQgcmV0dXJucyBhbiB1cGRhdGVkIFZpZXdwb3J0XG4gICAgICAgIGxvYWRVcmxEYXRhKHVybE9iamVjdCkge1xuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgbGV0IERlc2NyaXB0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogZnVuY3Rpb24gKHZlaGljbGVTZWxlY3RBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRkZXNjcmlwdGlvbnNcIiwgeyBWZWhpY2xlQ29uZmlndXJhdGlvbjogdXJsT2JqZWN0LlZlaGljbGVDb25maWd1cmF0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuRGVzY3JpcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5WZWhpY2xlQ29uZmlndXJhdGlvbiA9IHIuRGVzY3JpcHRpb25zWzBdLkNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5WZWhpY2xlRGVzY3JpcHRpb24gPSByLkRlc2NyaXB0aW9uc1swXS5GdWxsRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFRpcmVPcHRpb25JRDogZnVuY3Rpb24gKHZlaGljbGVTZWxlY3RBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd2ZWhpY2xlL2dldHRpcmVvcHRpb25kZXRhaWxzJywgeyBWZWhpY2xlQ29uZmlndXJhdGlvbjogdXJsT2JqZWN0LlZlaGljbGVDb25maWd1cmF0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuRGV0YWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuVGlyZU9wdGlvbklEID0gci5EZXRhaWxzWzBdLlRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlU2VsZWN0QXJncy5UaXJlT3B0aW9uU3RyaW5nID0gci5EZXRhaWxzWzBdLkZyb250LkRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQudGFyZ2V0RGlhbWV0ZXIgPSByLkRldGFpbHNbMF0uRnJvbnQuSW5zaWRlRGlhbWV0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFRpcmVNb2RlbElEOiBmdW5jdGlvbiAodmVoaWNsZVNlbGVjdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ0aXJlL2dldG1vZGVsZGVzY3JpcHRpb25zXCIsIHsgVGlyZU1vZGVsOiB1cmxPYmplY3QuVGlyZU1vZGVsSUQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZG9uZShyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLlN1Y2Nlc3MgJiYgci5Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLmN1cnJlbnRUaXJlID0gci5Nb2RlbHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFBhaW50TmFtZTogZnVuY3Rpb24gKHZlaGljbGVTZWxlY3RBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRwYWludHNjaGVtZWRlc2NyaXB0aW9uc1wiLCB7IFZlaGljbGVQYWludFNjaGVtZTogdXJsT2JqZWN0LlBhaW50U2NoZW1lIH0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuU2NoZW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc2NoZW1lIG9mIHIuU2NoZW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1lLlNjaGVtZU5hbWUgPT0gdXJsT2JqZWN0LlBhaW50TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuUGFpbnRTY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogZnVuY3Rpb24gKHZlaGljbGVTZWxlY3RBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwgeyBXaGVlbE1vZGVsOiB1cmxPYmplY3QuV2hlZWxNb2RlbCB9KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuU3VjY2VzcyAmJiByLk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVNlbGVjdEFyZ3MuY3VycmVudFdoZWVsID0gci5Nb2RlbHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudHM6IGZ1bmN0aW9uICh2ZWhpY2xlU2VsZWN0QXJncykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcIndoZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnNcIiwgeyBWZWhpY2xlQ29uZmlndXJhdGlvbjogdXJsT2JqZWN0LlZlaGljbGVDb25maWd1cmF0aW9uLCBXaGVlbE1vZGVsOiB1cmxPYmplY3QuV2hlZWxNb2RlbCB9KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5nZXRCZXN0Rml0bWVudCh1cmxPYmplY3QsIHIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudElEOiBmdW5jdGlvbiAodmVoaWNsZVNlbGVjdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRmaXRtZW50ZGVzY3JpcHRpb25zXCIsIHsgV2hlZWxGaXRtZW50czogdXJsT2JqZWN0LldoZWVsRml0bWVudElEIH0pO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmRvbmUociA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5TdWNjZXNzICYmIHIuRml0bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVTZWxlY3RBcmdzLmN1cnJlbnRXaGVlbEZpdG1lbnQgPSByLkZpdG1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWN0aXZlV2hlZWxEaWFtZXRlclNlbGVjdChyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnByb21pc2VCdWlsZGVyKHVybE9iamVjdCwgRGVzY3JpcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9taXNlQnVpbGRlcih1cmxPYmplY3QsIERlc2NyaXB0aW9ucykge1xuICAgICAgICAgICAgbGV0IHByb21BcnIgPSBbXTtcbiAgICAgICAgICAgIGxldCB2ZWhpY2xlU2VsZWN0QXJncyA9IHtcbiAgICAgICAgICAgICAgICBJbWFnZVVybDogJycsXG4gICAgICAgICAgICAgICAgY3VycmVudFN1c3BlbnNpb246IE51bWJlcih1cmxPYmplY3QuU3VzcGVuc2lvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gRGVzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVybE9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21BcnIucHVzaChEZXNjcmlwdGlvbnNba2V5XSh2ZWhpY2xlU2VsZWN0QXJncykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdXaGVlbE1vZGVsJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21BcnIucHVzaChEZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50cyh2ZWhpY2xlU2VsZWN0QXJncykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLmFsbChwcm9tQXJyKS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1zZWxlY3RlZFwiLCB2ZWhpY2xlU2VsZWN0QXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvL1JlbW92ZXMgdGhlIGFjdGl2ZSBjbGFzcyBpbiB0aGUgJ3doZWVsIHNpemUnIHRhYlxuICAgICAgICAvL2FwcGVuZHMgaXQgdG8gdGhlIHByb3BlciBlbGVtZW50IGFuZCB1cGRhdGVzIHRoZSBzdGF0ZVxuICAgICAgICBhY3RpdmVXaGVlbERpYW1ldGVyU2VsZWN0KHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50V2hlZWxEaWFtZXRlciA9ICFyZXN1bHRzID8gdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1pbiArICfigLMnIDogcmVzdWx0cy5GaXRtZW50c1swXS5EaWFtZXRlck1pbiArICfigLMnO1xuICAgICAgICAgICAgbGV0IHdoZWVsU2l6ZUFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYnV0dG9uLXBpY2tlci1vcHRpb24tYWN0aXZlJylbMF07XG4gICAgICAgICAgICB3aGVlbFNpemVBY3RpdmUuY2xhc3NMaXN0LnJlbW92ZSgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbi1hY3RpdmUnKTtcbiAgICAgICAgICAgIGxldCB3aGVlbFNpemVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyLW9wdGlvbicpO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRTaXplO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aGVlbFNpemVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHdoZWVsU2l6ZUxpc3RbaV0uaW5uZXJIVE1MID09PSBjdXJyZW50V2hlZWxEaWFtZXRlcikge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2l6ZSA9IHdoZWVsU2l6ZUxpc3RbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiAhcmVzdWx0cyA/IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbEZpdG1lbnQgOiByZXN1bHRzLkZpdG1lbnRzWzBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGN1cnJlbnRTaXplLmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYnV0dG9uLXBpY2tlci1vcHRpb24tYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlVGFicygpIHtcbiAgICAgICAgICAgIGxldCB0YWJzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRPcmRlcikge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgZGlzYWJsZWQgY29tcG9uZW50c1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3Nba2V5XS5lbmFibGVkKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB0YWJzLnB1c2godGhpcy50YWJzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0VGFicyh0YWJzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiTGF5b3V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlVGFiTGF5b3V0KCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEJyZWFrcG9pbnQgPSB0aGlzLnNob3djYXNlLnN0eWxlLmdldEN1cnJlbnRCcmVha3BvaW50KCk7XG4gICAgICAgICAgICBjb25zdCBob3Jpem9udGFsID0gY3VycmVudEJyZWFrcG9pbnQgJiYgY3VycmVudEJyZWFrcG9pbnRbMF0gPT09ICdwaG9uZS1wb3J0cmFpdCc7XG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRNb2RlKGhvcml6b250YWwgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnKTtcbiAgICAgICAgfVxuICAgICAgICBzZXR1cFRhYnMoKSB7XG4gICAgICAgICAgICB0aGlzLnRhYkJhciA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyKHRoaXMuc2hvd2Nhc2UpO1xuICAgICAgICAgICAgLy8gRGVmaW5lIG91ciB0YWJzXG4gICAgICAgICAgICB0aGlzLnRhYnMgPSB7XG4gICAgICAgICAgICAgICAgcGFpbnQ6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdwYWludCcsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BhaW50JyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygncGFpbnQnKVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHdoZWVsczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3doZWVsJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWxzJyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnd2hlZWxzJylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aXJlczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3RpcmUnLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlcycsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3RpcmVzJylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VzcGVuc2lvbicsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3N1c3BlbnNpb24nLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzdXNwZW5zaW9uJylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFN3aXRjaCB0aGUgYm90dG9tIHZpZXcsIHRoZSBjdXN0b21pemF0aW9uIGNvbXBvbmVudCB3aGVuIGEgdGFiIGlzIGNsaWNrZWQgb25cbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnRhYlN3aXRjaGVkQ2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWIgPSBlLm5ld1RhYjtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBuZXdUYWIua2V5O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzICYmIGtleSBpbiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmVoaWNsZURpZmZlcmVudEZyb21TdGF0ZSgpIHtcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgIGlmICghc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEIHx8ICFzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUcnlpbmcgdG8gc2hvdyB0aGUgdmlzdWFsaXplIHNjcmVlbiB3aXRob3V0IGEgdmVoaWNsZSBjb25maWd1cmF0aW9uIG9yIHRpcmUgb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZlaGljbGVDaGFuZ2VkID0gIVJpZGVTdHlsZXJTaG93Y2FzZS5HVUlESGVscGVyLmFyZUVxdWFsKHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCwgdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEKTtcbiAgICAgICAgICAgIGxldCB0aXJlT3B0aW9uQ2hhbmdlZCA9ICFSaWRlU3R5bGVyU2hvd2Nhc2UuR1VJREhlbHBlci5hcmVFcXVhbChzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQsIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XG4gICAgICAgICAgICByZXR1cm4gdmVoaWNsZUNoYW5nZWQgfHwgdGlyZU9wdGlvbkNoYW5nZWQ7XG4gICAgICAgIH1cbiAgICAgICAgb25EaXNwbGF5KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmVoaWNsZURpZmZlcmVudEZyb21TdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbiA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb24gPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIuY2xlYXJBY3RpdmVUYWIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVmVoaWNsZUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvblZlaGljbGVDaGFuZ2VkKCkge1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuZW1wdHkodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyKTtcbiAgICAgICAgICAgIC8vIFNldCB0aGUgY3VzdG9taXphdGlvbiBjb250YWluZXIgYXMgbG9hZGluZyB3aGlsZSB3ZSdyZSBsb2FkaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIC8vIGFib3V0IHRoZSB2ZWhpY2xlXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIuY2xhc3NMaXN0LmFkZChsb2FkaW5nQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XG4gICAgICAgICAgICAvLyBEZXNlbGVjdCBhbnkgYWN0aXZlIHRhYlxuICAgICAgICAgICAgdGhpcy50YWJCYXIuY2xlYXJBY3RpdmVUYWIoKTtcbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpbicpO1xuICAgICAgICAgICAgLy8gTG9hZCB0aGUgdmVoaWNsZSdzIGRlc2NyaXB0aW9uIG1vZGVsXG4gICAgICAgICAgICBsZXQgZ2V0VmVoaWNsZURlc2NyaXB0aW9uID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRkZXNjcmlwdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgIENvdW50OiAxLFxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSURcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVUaXJlT3B0aW9uID0gUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd2ZWhpY2xlL2dldHRpcmVvcHRpb25kZXRhaWxzJywge1xuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSURcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIuYWxsKFtnZXRWZWhpY2xlRGVzY3JpcHRpb24sIGdldFZlaGljbGVUaXJlT3B0aW9uXSkuZG9uZShyZXNwb25zZXMgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB2ZWhpY2xlRGVzY3JpcHRpb24gPSB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsID0gcmVzcG9uc2VzWzBdLkRlc2NyaXB0aW9uc1swXTtcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZVRpcmVPcHRpb247XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkVGlyZU9wdGlvbklEID0gUmlkZVN0eWxlclNob3djYXNlLkdVSURIZWxwZXIucGFyc2UodGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0aXJlT3B0aW9uIG9mIHJlc3BvbnNlc1sxXS5EZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChSaWRlU3R5bGVyU2hvd2Nhc2UuR1VJREhlbHBlci5hcmVFcXVhbCh0aXJlT3B0aW9uLlRpcmVPcHRpb25JRCwgc2VsZWN0ZWRUaXJlT3B0aW9uSUQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlVGlyZU9wdGlvbiA9IHRpcmVPcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb247XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgdmVoaWNsZUhhc0FuZ2xlZEltYWdlOiB2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiB2ZWhpY2xlVGlyZU9wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsOiB2ZWhpY2xlRGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRm9yTmV3VmVoaWNsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIiwgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0aGlzLnRhYnMucGFpbnQpO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21wb25lbnRzIHRoYXQgd2lsbCBiZSBzd2l0Y2hlZCB3aXRoIHRoZSB0YWJzXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzID0ge1xuICAgICAgICAgICAgICAgIHBhaW50OiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgd2hlZWxzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsU2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb246IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyh0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLm9uRmlsdGVyc0NoYW5nZWQgPSBmaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycy5vbkZpbHRlcnNDaGFuZ2VkID0gZmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQub25QYWludFNjaGVtZVNlbGVjdGVkID0gcGFpbnRTY2hlbWUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7IGN1cnJlbnRQYWludFNjaGVtZTogcGFpbnRTY2hlbWUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7IFBhaW50Q29sb3I6IHBhaW50U2NoZW1lLkNvbG9yc1swXS5IZXggfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuUmVuZGVyT25DdXJyZW50QW5nbGUgPSB0aGlzLmltYWdlVHlwZSA9PT0gMiAvKiBBbmdsZSAqLyAmJiBtb2RlbC5IYXNBbmdsZUltYWdlIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSAxIC8qIFNpZGUgKi8gJiYgbW9kZWwuSGFzU2lkZUltYWdlO1xuICAgICAgICAgICAgICAgIGlmICghY2FuUmVuZGVyT25DdXJyZW50QW5nbGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXG4gICAgICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IG1vZGVsLldoZWVsTW9kZWxJRCxcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVByaWNpbmc6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZG9uZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXRtZW50cyA9IHJlc3BvbnNlLkZpdG1lbnRzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdEZpdG1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXREaWFtZXRlciA9IHRoaXMudmVoaWNsZVRpcmVPcHRpb24uRnJvbnQuSW5zaWRlRGlhbWV0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGZpdG1lbnRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFEaWZmID0gTWF0aC5hYnMoYS5EaWFtZXRlck1pbiAtIHRhcmdldERpYW1ldGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJEaWZmID0gTWF0aC5hYnMoYi5EaWFtZXRlck1pbiAtIHRhcmdldERpYW1ldGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhRGlmZiAtIGJEaWZmO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYmVzdEZpdG1lbnQgPSBmaXRtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbDogbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiBiZXN0Rml0bWVudFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuc2V0Rml0bWVudE9wdGlvbnMoZml0bWVudHMsIGJlc3RGaXRtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50LldoZWVsRml0bWVudElEXG4gICAgICAgICAgICAgICAgICAgIH0pLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZTogbW9kZWxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2V0KHRoaXMuc3RhdGUuZ2V0RGF0YSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnN1c3BlbnNpb24uc3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrID0gcmVuZGVyVXBkYXRlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoeyBjdXJyZW50U3VzcGVuc2lvbjogcmVuZGVyVXBkYXRlLlN1c3BlbnNpb24gfSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydChyZW5kZXJVcGRhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5zZXQodGhpcy5zdGF0ZS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnN0YXRlLmdldERhdGEoKTInLCB0aGlzLnN0YXRlLmdldERhdGEoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGN1c3RvbWl6YXRpb25Db21wb25lbnQgb2YgUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5nZXRWYWx1ZXModGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykpIHtcbiAgICAgICAgICAgICAgICBjdXN0b21pemF0aW9uQ29tcG9uZW50LmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKCdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb24tY29tcG9uZW50Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gMiAvKiBBbmdsZSAqLztcbiAgICAgICAgICAgIGlmICghdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNBbmdsZWRJbWFnZSlcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IDEgLyogU2lkZSAqLztcbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdGhpcy5jYW5Td2l0Y2hBbmdsZSgpID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklELFxuICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogIXN0YXRlRGF0YS5jdXJyZW50V2hlZWxGaXRtZW50ID8gdW5kZWZpbmVkIDogc3RhdGVEYXRhLmN1cnJlbnRXaGVlbEZpdG1lbnQuV2hlZWxGaXRtZW50SUQsXG4gICAgICAgICAgICAgICAgUGFpbnRDb2xvcjogIXN0YXRlRGF0YS5jdXJyZW50UGFpbnRTY2hlbWUgPyB1bmRlZmluZWQgOiBzdGF0ZURhdGEuY3VycmVudFBhaW50U2NoZW1lLkNvbG9yc1swXS5IZXgsXG4gICAgICAgICAgICAgICAgVmVoaWNsZVRpcmVPcHRpb246IHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCxcbiAgICAgICAgICAgICAgICBQb3NpdGlvblg6IDEgLyogQ2VudGVyICovLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogMiAvKiBGYXIgKi8sXG4gICAgICAgICAgICAgICAgU3VzcGVuc2lvbjogIXN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbiA/IHVuZGVmaW5lZCA6IHN0YXRlRGF0YS5jdXJyZW50U3VzcGVuc2lvbixcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNldCh0aGlzLnN0YXRlLmdldERhdGEoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGxvYWRpbmdDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudChjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgY29tcG9uZW50S2V5ID0gdGhpcy5nZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudCk7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgbGV0IHRhYiA9IHRoaXMudGFic1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0YWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSBjdXN0b21pemF0aW9uQ29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21pemF0aW9uQ29tcG9uZW50LnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICBjdXN0b21pemF0aW9uQ29tcG9uZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQgaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciAmJiBzdGF0ZURhdGEuY3VycmVudFdoZWVsID9cbiAgICAgICAgICAgICAgICAgICAgJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gc2V0dGluZ3Muc2hvd0ZpbHRlckJ1dHRvbiA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgc2V0dGluZ3MudGl0bGUpO1xuICAgICAgICB9XG4gICAgICAgIGdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gY3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVWaWV3cG9ydChpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zLCBpbnN0cnVjdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuVXBkYXRlKGluc3RydWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2FuU3dpdGNoQW5nbGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNBbmdsZWRJbWFnZSAmJiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc1NpZGVJbWFnZTtcbiAgICAgICAgfVxuICAgICAgICAvL1JldHVybnMgZml0bWVudHMgZm9yIHdoZWVsIHN0YXRlXG4gICAgICAgIGdldEJlc3RGaXRtZW50KHVybE9iamVjdCwgcmVzdWx0cykge1xuICAgICAgICAgICAgbGV0IGZpdG1lbnRzID0gcmVzdWx0cy5GaXRtZW50cztcbiAgICAgICAgICAgIGxldCBiZXN0Rml0bWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGZpdG1lbnRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhRGlmZiA9IE1hdGguYWJzKGEuRGlhbWV0ZXJNaW4gLSB0aGlzLnRhcmdldERpYW1ldGVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiRGlmZiA9IE1hdGguYWJzKGIuRGlhbWV0ZXJNaW4gLSB0aGlzLnRhcmdldERpYW1ldGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYURpZmYgLSBiRGlmZjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmVzdEZpdG1lbnQgPSBmaXRtZW50c1swXTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplLnNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzLCBiZXN0Rml0bWVudCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHNob3dGaWx0ZXJzKCkge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9IHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudDtcbiAgICAgICAgICAgIGxldCBmaWx0ZXJNb2RhbDtcbiAgICAgICAgICAgIGlmIChhY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50ID09PSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnRpcmVzKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsKHRoaXMuc2hvd2Nhc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUHJvdmlkZXI6IHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzaG93LWNvdW50LWZvcm1hdC10aXJlcycpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50ID09PSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscykge1xuICAgICAgICAgICAgICAgIGZpbHRlck1vZGFsID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q291bnRUZXh0Rm9ybWF0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscycpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsdGVyTW9kYWwpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9DaG5hZ2VzIGFuZ2xlZCB2aWV3IG9mIHZlaGljbGVcbiAgICAgICAgc3dpdGNoQW5nbGUoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU3dpdGNoQW5nbGUoKSB8fCB0aGlzLnN0YXRlLmdldERhdGEoKS5jdXJyZW50V2hlZWwuSGFzU2lkZUltYWdlID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVR5cGUgPT09IDIgLyogQW5nbGUgKi8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IDEgLyogU2lkZSAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IDIgLyogQW5nbGUgKi87XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uID0gUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb247XG59KShSaWRlU3R5bGVyU2hvd2Nhc2UgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZSA9IHt9KSk7XG4iLG51bGwsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsXG4gICAgaW1wb3J0IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xuICAgIGltcG9ydCBXaGVlbFByaWNpbmdEYXRhT2JqZWN0ID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5XaGVlbFByaWNpbmdEYXRhT2JqZWN0O1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIHtcbiAgICAgICAgcHJvdGVjdGVkIGltYWdlOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFwid2hlZWwvaW1hZ2VcIj47XG5cbiAgICAgICAgcHJpdmF0ZSBzcGVjc1RhYmxlOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsPjtcbiAgICAgICAgcHJpdmF0ZSBzdW1tYXJ5VGFibGU6UmlkZVN0eWxlclNob3djYXNlVGFibGU8U3VtbWFyeVRhYmxlUm93PjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCB3aGVlbE1vZGVsOldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgLy8gSW1hZ2VcbiAgICAgICAgICAgIHRoaXMuaW1hZ2UudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGU6IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlLkNhdGFsb2csXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogd2hlZWxNb2RlbC5XaGVlbE1vZGVsSURcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBCcmFuZFxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuYnJhbmRUaXRsZUVsZW1lbnQsIHdoZWVsTW9kZWwuV2hlZWxCcmFuZE5hbWUpO1xuXG4gICAgICAgICAgICAvLyBNb2RlbCBOYW1lXG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXRsZUVsZW1lbnQsIHdoZWVsTW9kZWwuV2hlZWxNb2RlbE5hbWUpO1xuXG4gICAgICAgICAgICAvLyBGaW5pc2hcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnN1YnRpdGxlRWxlbWVudCwgd2hlZWxNb2RlbC5XaGVlbE1vZGVsRmluaXNoRGVzY3JpcHRpb24pO1xuXG4gICAgICAgICAgICAvLyBTdW1tYXJ5IFRhYmxlXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlUYWJsZSA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxTdW1tYXJ5VGFibGVSb3c+KHRoaXMuc2hvd2Nhc2UsIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6ICdzaXplJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdwcmljZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogJ3ByaWNlJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdGFydExvYWRpbmc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3VtbWFyeVRhYmxlLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIHRoaXMuYnVpbGRTcGVjc1BhZ2UoKTtcblxuICAgICAgICAgICAgYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogd2hlZWxNb2RlbC5XaGVlbE1vZGVsSUQsXG4gICAgICAgICAgICAgICAgSW5jbHVkZVByb21vdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgSW5jbHVkZVByaWNpbmc6IHRydWVcbiAgICAgICAgICAgIH0pLmRvbmUocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3VtbWFyeVRhYmxlLmFwcGVuZFJvd3ModGhpcy5idWlsZFN1bW1hcnlUYWJsZShyZXNwb25zZS5GaXRtZW50cykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3BlY3NUYWJsZS5hcHBlbmRSb3dzKHJlc3BvbnNlLkZpdG1lbnRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBidWlsZFN1bW1hcnlUYWJsZShmaXRtZW50czogV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbFtdKTpTdW1tYXJ5VGFibGVSb3dbXSB7XG4gICAgICAgICAgICBjb25zdCBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnM6e2RpYW1ldGVyOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIHByaWNlOm51bWJlcn1bXSA9IFtdO1xuXG4gICAgICAgICAgICAvLyBHZXQgYSBsaXN0IG9mIGVhY2ggZml0bWVudCBzaXplL3ByaWNlIGNvbWJpbmF0aW9uXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnQgb2YgZml0bWVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZml0bWVudFByaWNlID0gUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50UmV0YWlsUHJpY2VEYXRhT2JqZWN0KGZpdG1lbnQpO1xuICAgICAgICAgICAgICAgIGxldCBmaXRtZW50UHJpY2VBbW91bnQgPSBmaXRtZW50UHJpY2UgPyBmaXRtZW50UHJpY2UuV2hlZWxQcmljaW5nQW1vdW50IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFsbFNpemVQcmljZUNvbWJpbmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXI6IGZpdG1lbnQuRGlhbWV0ZXJNaW4sXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWluLFxuICAgICAgICAgICAgICAgICAgICBwcmljZTogZml0bWVudFByaWNlQW1vdW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkaWFtZXRlcjogZml0bWVudC5EaWFtZXRlck1pbixcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGZpdG1lbnQuV2lkdGhNYXgsXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBmaXRtZW50UHJpY2VBbW91bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWF4LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZml0bWVudC5XaWR0aE1pbixcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGZpdG1lbnRQcmljZUFtb3VudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFsbFNpemVQcmljZUNvbWJpbmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXI6IGZpdG1lbnQuRGlhbWV0ZXJNYXgsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWF4LFxuICAgICAgICAgICAgICAgICAgICBwcmljZTogZml0bWVudFByaWNlQW1vdW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNpemVQcmljZVJhbmdlczp7XG4gICAgICAgICAgICAgICAgW3NpemU6c3RyaW5nXTpQcmljZVJhbmdlXG4gICAgICAgICAgICB9ID0ge307XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHByaWNlIHJhbmdlcyBmb3IgZWFjaCB1bmlxdWUgc2l6ZSBkZXNjcmlwdGlvbiBjcmVhdGVkIGFib3ZlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNpemVQcmljZUNvbWJvIG9mIGFsbFNpemVQcmljZUNvbWJpbmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHtkaWFtZXRlciwgcHJpY2UsIHdpZHRofSA9IHNpemVQcmljZUNvbWJvO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpemU6c3RyaW5nID0gZGlhbWV0ZXIgKyAn4oCzIHggJyArIHdpZHRoO1xuXG4gICAgICAgICAgICAgICAgbGV0IHByaWNlUmFuZ2U6UHJpY2VSYW5nZTtcblxuICAgICAgICAgICAgICAgIGlmIChzaXplIGluIHNpemVQcmljZVJhbmdlcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VSYW5nZSA9IHNpemVQcmljZVJhbmdlc1tzaXplXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogSW5maW5pdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IC1JbmZpbml0eVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHByaWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIE51bWJlckhlbHBlci5leHRlbmRSYW5nZShwcmljZSwgcHJpY2VSYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUcmFuc2xhdGUgc2l6ZVByaWNlUmFuZ2VzIGludG8gU3VtbWFyeVRhYmxlUm93c1xuICAgICAgICAgICAgbGV0IHN1bW1hcnlUYWJsZVJvd3M6U3VtbWFyeVRhYmxlUm93W10gPSBbXTtcblxuICAgICAgICAgICAgY29uc3QgcHJpY2VJc1Vuc3BlY2lmaWVkID0gKHByaWNlOm51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFByaWNlIG11c3QgYmUgYSBudW1iZXIsIGFuZCBub3QgKy0gaW5maW5pdHlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHByaWNlICE9PSAnbnVtYmVyJyB8fCBpc05hTihwcmljZSkgfHwgcHJpY2UgPT09IEluZmluaXR5IHx8IHByaWNlID09PSAtSW5maW5pdHk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNpemUgaW4gc2l6ZVByaWNlUmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaXplUHJpY2VSYW5nZXMuaGFzT3duUHJvcGVydHkoc2l6ZSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcHJpY2VSYW5nZSA9IHNpemVQcmljZVJhbmdlc1tzaXplXTtcblxuICAgICAgICAgICAgICAgIGxldCBwcmljZVN0cmluZzpzdHJpbmc7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJpY2VJc1Vuc3BlY2lmaWVkKHByaWNlUmFuZ2UubWluKSB8fCBwcmljZUlzVW5zcGVjaWZpZWQocHJpY2VSYW5nZS5tYXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlU3RyaW5nID0gc3RyaW5ncy5nZXRTdHJpbmcoJ2NhbGwnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJpY2VSYW5nZS5taW4gPT09IHByaWNlUmFuZ2UubWF4KSBwcmljZVN0cmluZyA9IHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5taW4sICckJyk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgcHJpY2VTdHJpbmcgPSBzdHJpbmdzLmZvcm1hdCgpLmN1cnJlbmN5KHByaWNlUmFuZ2UubWluLCAnJCcpICsgJyAtICcgKyBzdHJpbmdzLmZvcm1hdCgpLmN1cnJlbmN5KHByaWNlUmFuZ2UubWF4LCAnJCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN1bW1hcnlUYWJsZVJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZVN0cmluZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc3VtbWFyeVRhYmxlUm93cztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRTcGVjc1BhZ2UoKSB7XG4gICAgICAgICAgICB0aGlzLnNwZWNzVGFibGUgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFibGU8V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbD4odGhpcy5zaG93Y2FzZSwge1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnc2l6ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdvZmZzZXQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IGZpdG1lbnQgPT4gUmlkZVN0eWxlclNob3djYXNlVGFibGUuZm9ybWF0Q2VsbChmaXRtZW50LCAnT2Zmc2V0TWluJywgJ21tJylcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnYm9sdC1wYXR0ZXJuJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsOiAnQm9sdFBhdHRlcm5EZXNjcmlwdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnY2VudGVyYm9yZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogZml0bWVudCA9PiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5mb3JtYXRDZWxsKGZpdG1lbnQsICdDZW50ZXJib3JlTU0nLCAnbW0nKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6ICdQcmljZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsOiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsLmdldEZpdG1lbnRQcmljZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdpdGVtLW51bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50SXRlbU51bWJlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNwZWNzQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzY3JvbGxhYmxlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IHRoaXMuc3BlY3NUYWJsZS5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2Uoe1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogc3BlY3NDb250YWluZXIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzcGVjaWZpY2F0aW9ucycpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVJbWFnZSgpOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFwid2hlZWwvaW1hZ2VcIj4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxcIndoZWVsL2ltYWdlXCI+KHRoaXMuaW1hZ2VDb250YWluZXIsIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFwid2hlZWwvaW1hZ2VcIixcbiAgICAgICAgICAgICAgICBiYXNlSW5zdHJ1Y3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uTmVhcixcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0Rml0bWVudFJldGFpbFByaWNlRGF0YU9iamVjdChmaXRtZW50OiBXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsKTpXaGVlbFByaWNpbmdEYXRhT2JqZWN0IHtcbiAgICAgICAgICAgIHJldHVybiBmaXRtZW50LlByaWNpbmcgJiYgZml0bWVudC5QcmljaW5nWydSZXRhaWwnXSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uKGZpdG1lbnQ6V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCB7RGlhbWV0ZXJNaW4sIFdpZHRoTWlufSA9IGZpdG1lbnQ7XG5cbiAgICAgICAgICAgIGlmICghRGlhbWV0ZXJNaW4gfHwgIVdpZHRoTWluKSByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlVGFibGUuZW1wdHlDZWxsU3RyaW5nO1xuXG4gICAgICAgICAgICByZXR1cm4gYCR7RGlhbWV0ZXJNaW594oCzIHggJHtXaWR0aE1pbn1gO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0Rml0bWVudFByaWNlKGZpdG1lbnQ6IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwpOnN0cmluZyB7XG4gICAgICAgICAgICBjb25zdCBub1ByaWNlU3RyaW5nID0gc3RyaW5ncy5nZXRTdHJpbmcoJ2NhbGwnKTtcbiAgICAgICAgICAgIGxldCByZXRhaWxQcmljZURhdGFPYmplY3Q6V2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFJldGFpbFByaWNlRGF0YU9iamVjdChmaXRtZW50KTtcbiAgICBcbiAgICAgICAgICAgIGlmICghcmV0YWlsUHJpY2VEYXRhT2JqZWN0KSByZXR1cm4gbm9QcmljZVN0cmluZztcbiAgICBcbiAgICAgICAgICAgIGxldCBwcmljZTpudW1iZXIgPSByZXRhaWxQcmljZURhdGFPYmplY3QuV2hlZWxQcmljaW5nQW1vdW50O1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHByaWNlID8gc3RyaW5ncy5mb3JtYXQoKS5jdXJyZW5jeShwcmljZSwgJyQnKSA6IG5vUHJpY2VTdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRGaXRtZW50SXRlbU51bWJlcihmaXRtZW50OiBXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsKTpzdHJpbmcge1xuICAgICAgICAgICAgbGV0IHJldGFpbFByaWNlRGF0YU9iamVjdDpXaGVlbFByaWNpbmdEYXRhT2JqZWN0ID0gUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50UmV0YWlsUHJpY2VEYXRhT2JqZWN0KGZpdG1lbnQpO1xuXG4gICAgICAgICAgICBsZXQgaXRlbU51bWJlcjpzdHJpbmc7XG5cbiAgICAgICAgICAgIC8vIEl0ZW0gbnVtYmVyIGlzIHRoZSByZXRhaWwgcHJpY2luZyBpdGVtIG51bWJlciBieSBkZWZhdWx0XG4gICAgICAgICAgICBpZiAocmV0YWlsUHJpY2VEYXRhT2JqZWN0KSBpdGVtTnVtYmVyID0gcmV0YWlsUHJpY2VEYXRhT2JqZWN0LldoZWVsUHJpY2luZ0l0ZW1OdW1iZXI7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHJldGFpbCBwcmljaW5nLCBvciB0aGUgcmV0YWlsIHByaWNlIGRvZXNuJ3QgaGF2ZSBhIGl0ZW0gbnVtYmVyIHVzZSB0aGUgZml0bWVudCdzIHBhcnQgbnVtYmVyXG4gICAgICAgICAgICBpZiAoIWl0ZW1OdW1iZXIpIGl0ZW1OdW1iZXIgPSBmaXRtZW50LlBhcnROdW1iZXI7XG5cbiAgICAgICAgICAgIHJldHVybiBpdGVtTnVtYmVyIHx8IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmVtcHR5Q2VsbFN0cmluZztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGludGVyZmFjZSBQcmljZVJhbmdlIHtcbiAgICAgICAgbWluOiBudW1iZXIsXG4gICAgICAgIG1heDogbnVtYmVyXG4gICAgfVxuXG4gICAgaW50ZXJmYWNlIFN1bW1hcnlUYWJsZVJvdyB7XG4gICAgICAgIHNpemU6IHN0cmluZztcbiAgICAgICAgcHJpY2U6IHN0cmluZztcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFdoZWVsRmlsdGVyTW9kZWwgPSByaWRlc3R5bGVyLlJlcXVlc3RzLldoZWVsRmlsdGVyTW9kZWw7XG4gICAgaW1wb3J0IFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsID0gcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWw7XG4gICAgaW1wb3J0IFdoZWVsTW9kZWxSZXF1ZXN0ID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5XaGVlbE1vZGVsRGVzY3JpcHRpb25SZXF1ZXN0TW9kZWw7XG5cbiAgICBjb25zdCBvcHRpb25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJztcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJ1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsU2VsZWN0b3IgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3I8V2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwsIFdoZWVsRmlsdGVyTW9kZWw+IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOnN0cmluZztcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeToge1xuICAgICAgICAgICAgYW5nbGVkOiBib29sZWFuO1xuICAgICAgICAgICAgc2lkZTogYm9vbGVhbjtcbiAgICAgICAgfTtcblxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGVmYXVsdEZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWw7XG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50RmlsdGVyczogV2hlZWxGaWx0ZXJNb2RlbDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzaG93Tm9SZXN1bHRzKCkge1xuICAgICAgICAgICAgdGhpcy5ub1Jlc3VsdHNFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyArICcgJyArIG5vUmVzdWx0c0NsYXNzLFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCduby13aGVlbC1yZXN1bHRzJykgKyAnICcsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMub3B0aW9uQ29udGFpbmVyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLm5vUmVzdWx0c0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2NoYW5nZS12ZWhpY2xlJyksXG4gICAgICAgICAgICAgICAgbGluazogdHJ1ZVxuICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGFuZ2VTdGF0ZShTdGF0ZXMuQ2hvb3NlVmVoaWNsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBjb3VudFJlc3VsdHMoZmlsdGVyczogV2hlZWxGaWx0ZXJNb2RlbCk6IHJpZGVzdHlsZXIuUmlkZVN0eWxlclByb21pc2U8bnVtYmVyLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcIndoZWVsL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiByZXNwb25zZS5Db3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIGdldFJlc3VsdHMoZmlsdGVyczogV2hlZWxGaWx0ZXJNb2RlbCk6IHJpZGVzdHlsZXIuUmlkZVN0eWxlclByb21pc2U8V2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWxbXSwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRtb2RlbGRlc2NyaXB0aW9uc1wiLCBPYmplY3RIZWxwZXIuYXNzaWduPFdoZWVsTW9kZWxSZXF1ZXN0Pih7XG4gICAgICAgICAgICAgICAgSW5jbHVkZU1ldGFLZXlzOiBbXG4gICAgICAgICAgICAgICAgICAgICdEZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICdIaWdobGlnaHRzJ1xuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgSGFzRml0bWVudHM6IHRydWVcbiAgICAgICAgICAgIH0sIGZpbHRlcnMpKSwgcmVzcG9uc2UgPT4gcmVzcG9uc2UuTW9kZWxzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEZpbHRlcihwcm9kdWN0OiBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RJbWFnZVNvdXJjZShwcm9kdWN0OiBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IHN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci53aGVlbC5pbWFnZSh7XG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IHByb2R1Y3QuV2hlZWxNb2RlbElELFxuICAgICAgICAgICAgICAgIFdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgICAgSGVpZ2h0OiAxMDAsXG4gICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICBJbmNsdWRlU2hhZG93OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEltYWdlTGFiZWxzKHByb2R1Y3Q6IFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogeyBwcmltYXJ5OiBzdHJpbmc7IHNlY29uZGFyeT86IHN0cmluZzsgdGVydGlhcnk/OiBzdHJpbmc7IH0ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5OiBwcm9kdWN0LldoZWVsQnJhbmROYW1lLFxuICAgICAgICAgICAgICAgIHNlY29uZGFyeTogcHJvZHVjdC5XaGVlbE1vZGVsTmFtZSxcbiAgICAgICAgICAgICAgICB0ZXJ0aWFyeTogcHJvZHVjdC5XaGVlbE1vZGVsRmluaXNoRGVzY3JpcHRpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdGlyZS1kZXRhaWxzJ1xuXG4gICAgZXhwb3J0IGNsYXNzIFRpcmVEZXRhaWxzIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByaXZhdGUgdGlyZU5hbWVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcml2YXRlIHRpcmVEZXNjcmlwdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgY2xhc3NOYW1lICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzXCIpO1xuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3RpcmUtZGV0YWlscycpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGlyZU5hbWVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW5hbWUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGlyZURlc2NyaXB0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1kZXNjcmlwdGlvbiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtc2Vjb25kYXJ5JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFmdGVyRGF0YUNoYW5nZShkYXRhID0+IHRoaXMub25EYXRhQ2hhbmdlKGRhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25EYXRhQ2hhbmdlKGRhdGE6c3RhdGUuU3RhdGVEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VGlyZSA9IGRhdGEuY3VycmVudFRpcmU7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBjdXJyZW50VGlyZSA/ICcnIDogJ25vbmUnO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRpcmUpIHtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXJlTmFtZUVsZW1lbnQsIGN1cnJlbnRUaXJlLlRpcmVCcmFuZE5hbWUgKyAnICcgKyBjdXJyZW50VGlyZS5UaXJlTW9kZWxOYW1lKTtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXJlRGVzY3JpcHRpb25FbGVtZW50LCBjdXJyZW50VGlyZS5BdHRyaWJ1dGVzICYmIGN1cnJlbnRUaXJlLkF0dHJpYnV0ZXMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmUuQXR0cmlidXRlcy5qb2luKCcsICcpIDogJycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1kZXRhaWxzJ1xuICAgIGNvbnN0IGZpcnN0UGFpbnRDb2xvciA9ICcjOTk5JztcblxuICAgIGV4cG9ydCBjbGFzcyBWZWhpY2xlRGV0YWlscyBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmVoaWNsZSBkZXNjcmlwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb25FbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhaW50IHN3YXRjaCBuZXh0IHRvIHRoZSB2ZWhpY2xlIGRlc2NyaXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZlaGljbGVQYWludFN3YXRjaEVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGlyZSBzaXplXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHRpcmVTaXplRWxlbWVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBjbGFzc05hbWUgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHNcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRpdGxlXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3ZlaGljbGUtZGV0YWlscycpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFZlaGljbGUgRGVzY3JpcHRpb24vUGFpbnQgU3dhdGNoIENvbnRhaW5lclxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXZlaGljbGUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFpbnQgU3dhdGNoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXZlaGljbGUtc3dhdGNoIHJpZGVzdHlsZXItc2hvd2Nhc2UtcGFpbnQtc3dhdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBmaXJzdFBhaW50Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVoaWNsZSBEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy12ZWhpY2xlLWRldGFpbHMnXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFRpcmUgU2l6ZVxuICAgICAgICAgICAgdGhpcy50aXJlU2l6ZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGlyZS1zaXplIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSBWZWhpY2xlIEJ1dHRvblxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1jaGFuZ2UtdmVoaWNsZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2UtdmVoaWNsZScpLFxuICAgICAgICAgICAgICAgIGxpbms6IHRydWVcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY2hhbmdlU3RhdGUoU3RhdGVzLkNob29zZVZlaGljbGUpO1xuICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsICcgJylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGRhdGEgY2hhbmdlc1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2UoZGF0YSA9PiB0aGlzLm9uRGF0YUNoYW5nZShkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0byBwYWludCB3aGVuIGNsaWNraW5nIG9uIHRoZSBwYWludCBzd2F0Y2hcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbCBiYWNrIGZvciB3aGVuIHRoZSBwYWludCBzd2F0Y2ggd2FzIGNsaWNrZWQgb25cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBwYWludFN3YXRjaENsaWNrQ2FsbGJhY2s6KCkgPT4gdm9pZDtcblxuICAgICAgICBwcml2YXRlIG9uRGF0YUNoYW5nZShkYXRhOnN0YXRlLlN0YXRlRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgdmVoaWNsZURlc2NyaXB0aW9uID0gZGF0YS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgY29uc3Qgc2hvcnRWZWhpY2xlRGVzY3JpcHRpb24gPSAgKHZlaGljbGVEZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHZlaGljbGVEZXNjcmlwdGlvbi5sZW5ndGggPiA0MCkgPyB2ZWhpY2xlRGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDM4KSArICcuLi4nIDogdmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVQYWludFN3YXRjaEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZGF0YS5jdXJyZW50UGFpbnRTY2hlbWUgPyAoIWRhdGEuY3VycmVudFBhaW50U2NoZW1lLkNvbG9ycyA/IGRhdGEuY3VycmVudFBhaW50U2NoZW1lIDogZGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCkgIDogZmlyc3RQYWludENvbG9yO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy52ZWhpY2xlRGVzY3JpcHRpb25FbGVtZW50LCBzaG9ydFZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXJlU2l6ZUVsZW1lbnQsIGRhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXdoZWVsLWRldGFpbHMnXG5cbiAgICBleHBvcnQgY2xhc3MgV2hlZWxEZXRhaWxzIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByaXZhdGUgd2hlZWxOYW1lRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbERlc2NyaXB0aW9uRWxlbWVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBjbGFzc05hbWUgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHNcIik7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy10aXRsZScgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtdGl0bGVcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnd2hlZWwtZGV0YWlscycpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMud2hlZWxOYW1lRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1uYW1lJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLndoZWVsRGVzY3JpcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLWRlc2NyaXB0aW9uIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctZmVhdHVyZXMtc3BlY3MnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnd2hlZWwtZmVhdHVyZXMtc3BlY3MnKSxcbiAgICAgICAgICAgICAgICBsaW5rOiB0cnVlXG4gICAgICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dXaGVlbE1vZGFsKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2UoZGF0YSA9PiB0aGlzLm9uRGF0YUNoYW5nZShkYXRhKSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc2hvd1doZWVsTW9kYWwoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcblxuICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwodGhpcy5zaG93Y2FzZSwgc3RhdGVEYXRhLmN1cnJlbnRXaGVlbCkuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uRGF0YUNoYW5nZShkYXRhOnN0YXRlLlN0YXRlRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFdoZWVsID0gZGF0YS5jdXJyZW50V2hlZWw7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50V2hlZWxGaXRtZW50ID0gZGF0YS5jdXJyZW50V2hlZWxGaXRtZW50O1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gY3VycmVudFdoZWVsID8gJycgOiAnbm9uZSc7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50V2hlZWwpIHtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy53aGVlbE5hbWVFbGVtZW50LCBjdXJyZW50V2hlZWwuV2hlZWxCcmFuZE5hbWUgKyAnICcgKyBjdXJyZW50V2hlZWwuV2hlZWxNb2RlbE5hbWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V2hlZWxGaXRtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkaWFtZXRlcjpzdHJpbmcgPSBjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWluLnRvU3RyaW5nKCkgKyAn4oCzJztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1pbiAhPT0gY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1heClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyID0gJygnICsgY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1pbiArICctJyArIGN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNYXggKyAnKeKAsyc7XG5cbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMud2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQsIGRpYW1ldGVyICsgJyAnICsgY3VycmVudFdoZWVsLldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMud2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQsIGN1cnJlbnRXaGVlbC5XaGVlbE1vZGVsRmluaXNoRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgRmlsdGVyUHJvdmlkZXIgPSBmaWx0ZXJzLkZpbHRlclByb3ZpZGVyO1xuXG4gICAgY29uc3QgZmlsdGVyTW9kYWxDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLWZpbHRlci1tb2RhbCc7XG4gICAgY29uc3QgZmlsdGVyTW9kYWxNZW51VGl0bGVDbGFzcyA9IGZpbHRlck1vZGFsQ2xhc3MgKyAnLW1lbnUtdGl0bGUnO1xuXG4gICAgY29uc3QgY291bnRGb3JtYXRUb2tlbiA9ICd7Y291bnR9JztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbDxGaWx0ZXJUeXBlIGV4dGVuZHMgb2JqZWN0LCBGaWx0ZXJQcm92aWRlclR5cGUgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlcjxGaWx0ZXJUeXBlPj4gZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZmlsdGVyUHJvdmlkZXI6IEZpbHRlclByb3ZpZGVyVHlwZTtcbiAgICAgICAgcHJpdmF0ZSBtZW51czogUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudVtdO1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNob3dDb3VudFRleHRGb3JtYXQ6c3RyaW5nO1xuXG4gICAgICAgIHByaXZhdGUgc2hvd0J1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOiBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbC5PcHRpb25zPEZpbHRlclByb3ZpZGVyVHlwZT4pIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UsIHtcbiAgICAgICAgICAgICAgICByZW1vdmVPbkhpZGRlbjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyUHJvdmlkZXIgPSBvcHRpb25zLmZpbHRlclByb3ZpZGVyO1xuICAgICAgICAgICAgdGhpcy5zaG93Q291bnRUZXh0Rm9ybWF0ID0gb3B0aW9ucy5zaG93Q291bnRUZXh0Rm9ybWF0O1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKGZpbHRlck1vZGFsQ2xhc3MpO1xuXG4gICAgICAgICAgICB0aGlzLmJ1aWxkU2hvd0J1dHRvbigpO1xuXG4gICAgICAgICAgICB0aGlzLmJ1aWxkRmlsdGVyTWVudXMoKS5kb25lKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvdW50KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5zaG93QnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRGaWx0ZXJNZW51cygpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1lbnVzQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGZpbHRlck1vZGFsQ2xhc3MgKyAnLW1lbnVzJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJQcm92aWRlciA9IHRoaXMuZmlsdGVyUHJvdmlkZXI7XG4gICAgICAgICAgICBjb25zdCBtZW51TG9hZGVkUHJvbWlzZXMgPSBbXTtcblxuICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbHRlcnMgPSBmaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCk7XG5cbiAgICAgICAgICAgIHRoaXMubWVudXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWx0ZXJPcHRpb24gb2YgZmlsdGVyUHJvdmlkZXIuZmlsdGVyT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IHNob3cgbm9uLXZpc2libGUgZmlsdGVyIG9wdGlvbnMgb3IgZmlsdGVyIG9wdGlvbnMgd2l0aG91dCBsYWJlbHNcbiAgICAgICAgICAgICAgICBpZiAoIShmaWx0ZXJPcHRpb24udmlzaWJsZSAhPT0gZmFsc2UgJiYgZmlsdGVyT3B0aW9uLmxhYmVsKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IG1lbnU6UmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudSA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51KGZpbHRlck9wdGlvbi5rZXkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudUNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmlsdGVyTW9kYWxDbGFzcyArICctbWVudS1jb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogbWVudXNDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGZpbHRlck1vZGFsTWVudVRpdGxlQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZmlsdGVyT3B0aW9uLmxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGxldCBtZW51TG9hZGVkUHJvbWlzZSA9IGZpbHRlclByb3ZpZGVyLnJldHJpZXZlT3B0aW9ucyhmaWx0ZXJPcHRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKG9wdGlvbnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZmlsdGVyT3B0aW9uLnVuc2VsZWN0ZWRPcHRpb25MYWJlbCB8fCBzdHJpbmdzLmdldFN0cmluZygnYWxsJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXJPcHRpb24uZ2V0VmFsdWVGcm9tRmlsdGVycyA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LnNldFZhbHVlKGZpbHRlck9wdGlvbi5nZXRWYWx1ZUZyb21GaWx0ZXJzKGN1cnJlbnRGaWx0ZXJzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0VmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtZW51Lm9uQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvdW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1lbnVMb2FkZWRQcm9taXNlcy5wdXNoKG1lbnVMb2FkZWRQcm9taXNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVzLnB1c2gobWVudSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLmFsbChtZW51TG9hZGVkUHJvbWlzZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBidWlsZFNob3dCdXR0b24oKTp2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0J1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBsYXJnZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnbG9hZGluZy1lbGxpcHNpcycpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5zaG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyUHJvdmlkZXIuc2V0RmlsdGVycyh0aGlzLmdldFZhbHVlcygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRWYWx1ZXMoKTpmaWx0ZXJzLkZpbHRlclZhbHVlW10ge1xuICAgICAgICAgICAgbGV0IHZhbHVlczogZmlsdGVycy5GaWx0ZXJWYWx1ZVtdID0gW107XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVudSBvZiB0aGlzLm1lbnVzKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IG1lbnUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1lbnUudmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2V0RmlsdGVycygpOkZpbHRlclR5cGUge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyUHJvdmlkZXIucHJldmlld0ZpbHRlcnModGhpcy5nZXRWYWx1ZXMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHVwZGF0ZUNvdW50KCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb3VudFRleHQoZmFsc2UpO1xuXG4gICAgICAgICAgICB0aGlzLmZpbHRlclByb3ZpZGVyLmdldENvdW50KHRoaXMuZ2V0RmlsdGVycygpKS5kb25lKGNvdW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvdW50VGV4dChjb3VudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIGNvdW50IHRleHQgdG8gYSBsb2FkaW5nIHN0YXRlXG4gICAgICAgICAqIEBwYXJhbSBjb3VudCBcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgc2V0Q291bnRUZXh0KGNvdW50OmZhbHNlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGNvdW50IHRleHRcbiAgICAgICAgICogQHBhcmFtIGNvdW50IFRoZSBjb3VudCB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgc2V0Q291bnRUZXh0KGNvdW50Om51bWJlcik7XG4gICAgICAgIHByaXZhdGUgc2V0Q291bnRUZXh0KGNvdW50Om51bWJlcnxmYWxzZSkge1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnNob3dCdXR0b24sIHN0cmluZ3MuZ2V0U3RyaW5nKCdsb2FkaW5nLWVsbGlwc2lzJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnNob3dCdXR0b24sIHRoaXMuc2hvd0NvdW50VGV4dEZvcm1hdC5yZXBsYWNlKGNvdW50Rm9ybWF0VG9rZW4sIGNvdW50LnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dCdXR0b24uZGlzYWJsZWQgPSBjb3VudCA9PT0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbnM8RmlsdGVyUHJvdmlkZXJUeXBlPiB7XG4gICAgICAgICAgICBmaWx0ZXJQcm92aWRlcjogRmlsdGVyUHJvdmlkZXJUeXBlO1xuICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjb3B5PEFycmF5VHlwZSBleHRlbmRzIEFycmF5PGFueT4+KGFycmF5OkFycmF5VHlwZSk6QXJyYXlUeXBlIHtcbiAgICAgICAgbGV0IGNvcHkgPSBuZXcgQXJyYXkoYXJyYXkubGVuZ3RoKSBhcyBBcnJheVR5cGU7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGFycmF5Lmxlbmd0aDsgaW5kZXgrKylcbiAgICAgICAgICAgIGNvcHlbaW5kZXhdID0gYXJyYXlbaW5kZXhdO1xuXG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmU8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6VCk6IFRbXTtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlPFQ+KGFycmF5OlRbXSwgaXRlbU1hdGNoOihUKT0+Ym9vbGVhbik6IFRbXTtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlPFQ+KGFycmF5OlRbXSwgaXRlbU1hdGNoOlR8KChUKT0+Ym9vbGVhbikpOiBUW10ge1xuICAgICAgICBsZXQgbmV3QXJyYXk6VFtdID0gbmV3IEFycmF5KGFycmF5Lmxlbmd0aCk7XG5cbiAgICAgICAgbGV0IG5ld0FycmF5SW5kZXggPSAtMTtcblxuICAgICAgICBmb3IgKGxldCBhcnJheUluZGV4ID0gMDsgYXJyYXlJbmRleCA8IGFycmF5Lmxlbmd0aDsgYXJyYXlJbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgaXRlbTpUID0gYXJyYXlbYXJyYXlJbmRleF07XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbU1hdGNoID09PSAnZnVuY3Rpb24nICYmIGl0ZW1NYXRjaChpdGVtKSB8fCBpdGVtID09PSBpdGVtTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGl0ZW1zIHRoYXQgbWF0Y2ggdGhlIGl0ZW1NYXRjaCBmdW5jdGlvbiBvciB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdBcnJheVsrK25ld0FycmF5SW5kZXhdID0gaXRlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3J0ZW4gYXJyYXkgdG8gZXhjbHVkZSBsZW5ndGggZnJvbSByZW1vdmVkIGl0ZW1zXG4gICAgICAgIG5ld0FycmF5Lmxlbmd0aCA9IG5ld0FycmF5SW5kZXggKyAxO1xuXG4gICAgICAgIHJldHVybiBuZXdBcnJheTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQ+KGFycmF5OlRbXSwgaXRlbU1hdGNoOihUKT0+Ym9vbGVhbik6IFRbXSB7XG4gICAgICAgIHJldHVybiByZW1vdmUoYXJyYXksIGl0ZW0gPT4gIWl0ZW1NYXRjaChpdGVtKSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1hcDxULCBVPihhcnJheTpUW10sIG1hcEZ1bmN0aW9uOiAodmFsdWU6IFQsIGluZGV4OiBudW1iZXIsIGFycmF5OiBUW10pID0+IFUsIHRoaXNBcmc/OiBhbnkpOiBVW10ge1xuICAgICAgICBpZiAodHlwZW9mIEFycmF5LnByb3RvdHlwZS5tYXAgPT09ICdmdW5jdGlvbicpIHJldHVybiBhcnJheS5tYXAobWFwRnVuY3Rpb24sIHRoaXNBcmcpO1xuXG4gICAgICAgIGxldCByZXN1bHQ6VVtdID0gbmV3IEFycmF5KGFycmF5Lmxlbmd0aCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBhcnJheVtpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzQXJnID09PSAndW5kZWZpbmVkJykgcmVzdWx0W2ldID0gbWFwRnVuY3Rpb24oYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICAgICAgICAgIGVsc2UgcmVzdWx0W2ldID0gbWFwRnVuY3Rpb24uY2FsbCh0aGlzQXJnLCBhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gcmVkdWNlPFQ+KGFycmF5OlRbXSwgcmVkdWNlcjogKHByZXZpb3VzVmFsdWU6IFQsIGN1cnJlbnRWYWx1ZTogVCwgY3VycmVudEluZGV4OiBudW1iZXIsIGFycmF5OiBUW10pID0+IFQsIGluaXRpYWxWYWx1ZT86IFQpOiBUO1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VCwgVSA9IFQ+KGFycmF5OlRbXSwgcmVkdWNlcjogKHByZXZpb3VzVmFsdWU6IFUsIGN1cnJlbnRWYWx1ZTogVCwgY3VycmVudEluZGV4OiBudW1iZXIsIGFycmF5OiBUW10pID0+IFUsIGluaXRpYWxWYWx1ZTogVSk6IFU7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxUPihhcnJheTpUW10sIHJlZHVjZXI6IChwcmV2aW91c1ZhbHVlOiBULCBjdXJyZW50VmFsdWU6IFQsIGN1cnJlbnRJbmRleDogbnVtYmVyLCBhcnJheTogVFtdKSA9PiBULCBpbml0aWFsVmFsdWU6IFQpOiBUIHtcbiAgICAgICAgaWYgKHR5cGVvZiBBcnJheS5wcm90b3R5cGUucmVkdWNlID09PSAnZnVuY3Rpb24nKSByZXR1cm4gYXJyYXkucmVkdWNlKHJlZHVjZXIsIGluaXRpYWxWYWx1ZSk7XG5cbiAgICAgICAgbGV0IGFjY3VtdWxhdG9yOlQgPSBpbml0aWFsVmFsdWU7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3IgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgcmVkdWNlci5jYWxsKHVuZGVmaW5lZCwgYWNjdW11bGF0b3IsIGFycmF5W2ldLCBpLCBhcnJheSkgOlxuICAgICAgICAgICAgICAgIGFycmF5W2ldO1xuXG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5Cb3hIZWxwZXIge1xuICAgIC8qKlxuICAgICAqIEJvdW5kIGEgYm94IHRvIGEgbWluaW11bSBhbmQvb3IgbWF4aW11bSBib3VuZGluZyBib3hcbiAgICAgKiBAcGFyYW0gYm94IFRoZSBib3ggdG8gYm91bmRcbiAgICAgKiBAcGFyYW0gYm91bmRzTWluIFRoZSBtaW5pbXVtIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSBib3VuZHNNYXggVGhlIG1heGltdW0gYm91bmRpbmcgYm94XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGJvdW5kKGJveDpCb3gsIGJvdW5kc01pbj86Qm94fG51bWJlciwgYm91bmRzTWF4PzpCb3h8bnVtYmVyKTpCb3gge1xuICAgICAgICBpZiAodHlwZW9mIGJvdW5kc01pbiA9PT0gJ251bWJlcicpIGJvdW5kc01pbiA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBib3VuZHNNaW4sXG4gICAgICAgICAgICBoZWlnaHQ6IGJvdW5kc01pblxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0eXBlb2YgYm91bmRzTWF4ID09PSAnbnVtYmVyJykgYm91bmRzTWF4ID0ge1xuICAgICAgICAgICAgd2lkdGg6IGJvdW5kc01heCxcbiAgICAgICAgICAgIGhlaWdodDogYm91bmRzTWF4XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzY2FsZSBjaGFuZ2UgdG8gc2NhbGUgYm94IGRvd24gdG8gbWF4aW11bSBib3VuZHNcbiAgICAgICAgbGV0IHNjYWxlVG9NYXg6bnVtYmVyID0gYm91bmRzTWF4ID8gTWF0aC5taW4oYm91bmRzTWF4LndpZHRoL2JveC53aWR0aCwgYm91bmRzTWF4LmhlaWdodC9ib3guaGVpZ2h0KSA6IDE7XG4gICAgICAgIC8vIEdldCB0aGUgc2NhbGUgY2hhbmdlIHRvIHNjYWxlIGJveCB1cCB0byBtaW5pbXVtIGJvdW5kc1xuICAgICAgICBsZXQgc2NhbGVUb01pbjpudW1iZXIgPSBib3VuZHNNaW4gPyBNYXRoLm1heChib3VuZHNNaW4ud2lkdGgvYm94LndpZHRoLCBib3VuZHNNaW4uaGVpZ2h0L2JveC5oZWlnaHQpIDogMTtcblxuICAgICAgICBsZXQgc2NhbGFyOm51bWJlcjtcblxuICAgICAgICBpZiAoc2NhbGVUb01heCA8IDEpIHNjYWxhciA9IHNjYWxlVG9NYXg7XG4gICAgICAgIGVsc2UgaWYgKHNjYWxlVG9NaW4gPiAxKSBzY2FsYXIgPSBzY2FsZVRvTWluO1xuICAgICAgICBlbHNlIHJldHVybiBib3g7XG5cbiAgICAgICAgcmV0dXJuIHNjYWxlKGJveCwgc2NhbGFyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBhIGJveCBieSBhIHNjYWxhclxuICAgICAqIEBwYXJhbSBib3ggVGhlIGJveFxuICAgICAqIEBwYXJhbSBzY2FsYXIgVGhlIG51bWJlciB0byBzY2FsZSB0aGUgYm94IGJ5XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGJveDpCb3gsIHNjYWxhcjpudW1iZXJ8Qm94KTpCb3gge1xuICAgICAgICBpZiAodHlwZW9mIHNjYWxhciA9PT0gJ251bWJlcicpIHNjYWxhciA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBzY2FsYXIsXG4gICAgICAgICAgICBoZWlnaHQ6IHNjYWxhclxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogYm94LndpZHRoICogc2NhbGFyLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBib3guaGVpZ2h0ICogc2NhbGFyLmhlaWdodFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJveCwgd2l0aG91dCBkZWNpbWFsc1xuICAgICAqIEBwYXJhbSBib3ggVGhlIGJveFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmbG9vcihib3g6Qm94KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogfn5ib3gud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IH5+Ym94LmhlaWdodFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBCb3gge1xuICAgICAgICB3aWR0aDogbnVtYmVyO1xuICAgICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZXtcbiAgICBleHBvcnQgdHlwZSBHdWlkID0gbnVtYmVyW107XG4gICAgZXhwb3J0IG5hbWVzcGFjZSBHVUlESGVscGVyIHtcbiAgICAgICAgLy8gTWFwcyBmb3IgbnVtYmVyIDwtPiBoZXggc3RyaW5nIGNvbnZlcnNpb25cbiAgICAgICAgbGV0IGJ5dGVUb0hleDpzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgaGV4VG9CeXRlOntbaGV4OnN0cmluZ106bnVtYmVyfSA9IHt9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgICAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbiAgICAgICAgICAgIGhleFRvQnl0ZVtieXRlVG9IZXhbaV1dID0gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJzZSBhIEd1aWQgaW50byBhIGNvbW1vbiBmb3JtYXRcbiAgICAgICAgICogQHBhcmFtIGlkIFRoZSBJRCB0byBwYXJzZVxuICAgICAgICAgKiBAcGFyYW0gYnVmZmVyIEFuIGV4aXN0aW5nIEd1aWQvYXJyYXkgdG8gd3JpdGUgdG9cbiAgICAgICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHRvIGJlZ2luIHdyaXRpbmcgYXRcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBwYXJzZShpZDpzdHJpbmcsIGJ1ZmZlcj86R3VpZCwgb2Zmc2V0PzpudW1iZXIpOkd1aWQge1xuICAgICAgICAgICAgY29uc3QgaSA9IChidWZmZXIgJiYgb2Zmc2V0KSB8fCAwO1xuICAgICAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyIHx8IFtdO1xuXG4gICAgICAgICAgICBpZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1swLTlhLWZdezJ9L2csIGZ1bmN0aW9uKG9jdCkge1xuICAgICAgICAgICAgICAgIGlmIChqIDwgMTYpIC8vIERvbid0IG92ZXJmbG93IVxuICAgICAgICAgICAgICAgICAgICBidWZmZXJbaSArIGorK10gPSBoZXhUb0J5dGVbb2N0XTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgLy8gWmVybyBvdXQgcmVtYWluaW5nIGJ5dGVzIGlmIHN0cmluZyB3YXMgc2hvcnRcbiAgICAgICAgICAgIHdoaWxlIChqIDwgMTYpIGJ1ZmZlcltpICsgaisrXSA9IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgYSBwYXJzZWQgR3VpZCBiYWNrIGludG8gYSBzdHJpbmdcbiAgICAgICAgICogQHBhcmFtIGlkIEEgcGFyc2VkIEd1aWQgdG8gdW5wYXJzZVxuICAgICAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0aW5nIGluZGV4IGluIHRoZSBpZCB0byBiZWdpbiByZWFkaW5nIGZyb21cbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB1bnBhcnNlKGlkOkd1aWQsIG9mZnNldD86bnVtYmVyKTpzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGkgPSBvZmZzZXQgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGJ0aCA9IGJ5dGVUb0hleDtcblxuICAgICAgICAgICAgcmV0dXJuICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcGFyZSB0d28gR3VpZHMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWFsXG4gICAgICAgICAqIEBwYXJhbSBpZEEgVGhlIGZpcnN0IElEIHRvIHBhcnNlIChpZiBuZWVkZWQpIGFuZCB0aGVuIGNvbXBhcmVcbiAgICAgICAgICogQHBhcmFtIGlkQiBUaGUgc2Vjb25kIElEIHRvIHBhcnNlIChpZiBuZWVkZWQpIGFuZCB0aGVuIGNvbXBhcmVcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbChpZEE6c3RyaW5nfEd1aWQsIGlkQjpzdHJpbmd8R3VpZCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgdW5kZWZpbmVkL3Vuc3BlY2lmaWVkIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlkQSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkQikgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpZEIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGd1aWRBOkd1aWQ7XG4gICAgICAgICAgICBsZXQgZ3VpZEI6R3VpZDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZEEgPT09ICdzdHJpbmcnKSBndWlkQSA9IHBhcnNlKGlkQSk7XG4gICAgICAgICAgICBlbHNlIGd1aWRBID0gaWRBO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGlkQiA9PT0gJ3N0cmluZycpIGd1aWRCID0gcGFyc2UoaWRCKTtcbiAgICAgICAgICAgIGVsc2UgZ3VpZEIgPSBpZEI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3VpZEEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYnl0ZUE6bnVtYmVyID0gZ3VpZEFbaV07XG4gICAgICAgICAgICAgICAgbGV0IGJ5dGVCOm51bWJlciA9IGd1aWRCW2ldXG5cbiAgICAgICAgICAgICAgICBpZiAoYnl0ZUEgIT09IGJ5dGVCKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlciB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBFbGVtZW50TGlzdDxUIGV4dGVuZHMgRWxlbWVudCA9IEhUTUxFbGVtZW50PiB7XG4gICAgICAgIGxlbmd0aDogbnVtYmVyO1xuICAgICAgICBbaW5kZXg6IG51bWJlcl06IFQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCBvZiBlbGVtZW50cyBtYXRjaGVkIGZyb20gdGhlIG9yaWdpbmFsIHNldFxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBUaGUgZWxlbWVudHMgdG8gbWF0Y2hcbiAgICAgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoaW5nIGZ1bmN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRzTWF0Y2hpbmc8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnRzOkVsZW1lbnRMaXN0PFQ+LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOiBUW10ge1xuICAgICAgICBsZXQgbWF0Y2hpbmdFbGVtZW50czogVFtdID0gbmV3IEFycmF5KGVsZW1lbnRzLmxlbmd0aCk7XG5cbiAgICAgICAgbGV0IG1hdGNoaW5nRWxlbWVudHNJbmRleCA9IDA7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGVsZW1lbnRzW2luZGV4XSBhcyBUO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2goY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdFbGVtZW50c1ttYXRjaGluZ0VsZW1lbnRzSW5kZXgrK10gPSBjaGlsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG1hdGNoaW5nRWxlbWVudHMubGVuZ3RoID0gbWF0Y2hpbmdFbGVtZW50c0luZGV4O1xuICAgICAgICByZXR1cm4gbWF0Y2hpbmdFbGVtZW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBzZXQgdG8gbWF0Y2ggdGhlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGVsZW1lbnRzIFRoZSBzZXQgb2YgZWxlbWVudHMgdG8gc2VhcmNoIGluXG4gICAgICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaGluZyBmdW5jdGlvblxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmaXJzdEVsZW1lbnRNYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudHM6RWxlbWVudExpc3Q8VD4sIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6IFQge1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZWxlbWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaChjaGlsZCkpIHJldHVybiBjaGlsZCBhcyBUO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBzZXQgdG8gbWF0Y2ggdGhlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGVsZW1lbnRzIFRoZSBzZXQgb2YgZWxlbWVudHMgdG8gc2VhcmNoIGluXG4gICAgICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaGluZyBmdW5jdGlvblxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBsYXN0RWxlbWVudE1hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50czpFbGVtZW50TGlzdDxUPiwgbWF0Y2g6IChlbGVtZW50OkVsZW1lbnQpPT5ib29sZWFuKTogVCB7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gZWxlbWVudHMubGVuZ3RoIC0gMTsgaW5kZXggPj0gMDsgaW5kZXgtLSkge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobWF0Y2goY2hpbGQpKSByZXR1cm4gY2hpbGQgYXMgVDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNoaWxkcmVuTWF0Y2hpbmc8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6RWxlbWVudCwgbWF0Y2g6IChlbGVtZW50OkVsZW1lbnQpPT5ib29sZWFuKTogVFtdIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzTWF0Y2hpbmcoZWxlbWVudC5jaGlsZHJlbiwgbWF0Y2gpIGFzIFRbXTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGFuIGVsZW1lbnQgZm9yIHRoZSBmaXJzdCBjaGlsZCBtYXRjaGluZyB0aGUgbWF0Y2ggZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggY2hpbGRyZW4gb2ZcbiAgICAgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoIGZ1bmN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpcnN0Q2hpbGRNYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOlQge1xuICAgICAgICByZXR1cm4gZmlyc3RFbGVtZW50TWF0Y2hpbmcoZWxlbWVudC5jaGlsZHJlbiwgbWF0Y2gpIGFzIFQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50J3MgY2hpbGRyZW4gbWF0Y2hpbmcgdGhlIHBhc3NlZCBpbiBzZXQgb2YgXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIHRoZSBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBzZXQgb2YgY2xhc3NlcyB0byBtYXRjaCBjaGlsZHJlbiB3aXRoXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNoaWxkcmVuV2l0aENsYXNzZXM8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6RWxlbWVudCwgLi4uY2xhc3NlczpzdHJpbmdbXSk6VFtdIHtcbiAgICAgICAgY2xhc3NlcyA9IFN0eWxlSGVscGVyLmZsYXR0ZW5DbGFzc0xpc3QoY2xhc3Nlcyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2hpbGRyZW5NYXRjaGluZyhlbGVtZW50LCBjaGlsZCA9PiBTdHlsZUhlbHBlci5oYXNDbGFzc2VzKGNoaWxkIGFzIEhUTUxFbGVtZW50LCBjbGFzc2VzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBjaGlsZHJlbiBmcm9tIHRoZSBlbGVtZW50IG1hdGNoaW5nIGEgY2xhc3Mgb3Igc2V0IG9mIGNsYXNzZXNcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIGNoaWxkcmVuXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzZXMgdG8gbWF0Y2ggY2hpbGRyZW4gdG8gcmVtb3ZlXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuV2l0aENsYXNzZXMoZWxlbWVudDpIVE1MRWxlbWVudCwgLi4uY2xhc3NlczpzdHJpbmdbXSkge1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbldpdGhDbGFzc2VzKGVsZW1lbnQsIC4uLmNsYXNzZXMpKSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBhbiBlbGVtZW50IGZvciB0aGUgZmlyc3QgY2hpbGQgd2l0aCB0aGUgc3BlY2lmaWVkIHRhZ1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgdG8gbG9vayBmb3JcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmlyc3RDaGlsZFdpdGhUYWc8VCBleHRlbmRzIEhUTUxFbGVtZW50PihlbGVtZW50OkhUTUxFbGVtZW50LCB0YWdOYW1lOnN0cmluZyk6VCB7XG4gICAgICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIGZpcnN0Q2hpbGRNYXRjaGluZyhlbGVtZW50LCBjaGlsZCA9PiBjaGlsZC50YWdOYW1lID09PSB0YWdOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggYW4gZWxlbWVudCBmb3IgdGhlIGZpcnN0IGNoaWxkIHdpdGggdGhlIHNwZWNpZmllZCBjbGFzcyhlcykgaW4gaXRzIGNsYXNzIGxpc3RcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggY2hpbGRyZW4gb2ZcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmaXJzdENoaWxkV2l0aENsYXNzPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50OiBFbGVtZW50LCAuLi5jbGFzc2VzOiBzdHJpbmdbXSk6VCB7XG4gICAgICAgIHJldHVybiBmaXJzdENoaWxkTWF0Y2hpbmcoZWxlbWVudCwgY2hpbGQgPT4gU3R5bGVIZWxwZXIuaGFzQ2xhc3NlcyhjaGlsZCBhcyBIVE1MRWxlbWVudCwgY2xhc3NlcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdHMgaWYgYW4gZWxlbWVudCBoYXMgYSBjaGlsZCB3aXRoIHRoZSBzcGVjaWZpZWQgY2xhc3MoZXMpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIHRoZSBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzcyhlcykgdG8gbG9vayBmb3JcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzQ2hpbGRXaXRoQ2xhc3MoZWxlbWVudDogSFRNTEVsZW1lbnQsIC4uLmNsYXNzZXM6IHN0cmluZ1tdKTpib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhZmlyc3RDaGlsZFdpdGhDbGFzcyhlbGVtZW50LCAuLi5jbGFzc2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIGlmIGFuIGVsZW1lbnQgaGFzIGEgc2libGluZyB3aXRoIHRoZSBzcGVjaWZpZWQgY2xhc3MoZXMpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIHRoZSBzaWJsaW5ncyBvZlxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzcyhlcykgdG8gbG9vayBmb3JcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzU2libGluZ1dpdGhDbGFzcyhlbGVtZW50OkVsZW1lbnQsIC4uLmNsYXNzZXM6c3RyaW5nW10pOmJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaGFzQ2hpbGRXaXRoQ2xhc3MoZWxlbWVudC5wYXJlbnRFbGVtZW50LCAuLi5jbGFzc2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IHNpYmxpbmcgb2YgYW4gZWxlbWVudCBtYXRjaGluZyBhIHNwZWNpZmllZCBjbGFzcyAob3Igc3BlY2lmaWVkIGNsYXNzZXMpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIHNpYmxpbmdzXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzZXMgdG8gbG9vayBmb3JcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gbGFzdFNpYmxpbmdXaXRoQ2xhc3M8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6RWxlbWVudCwgLi4uY2xhc3NlczpzdHJpbmdbXSk6VCB7XG4gICAgICAgIHJldHVybiBsYXN0RWxlbWVudE1hdGNoaW5nKGVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlbiwgc2libGluZyA9PiBzaWJsaW5nICE9PSBlbGVtZW50ICYmIFN0eWxlSGVscGVyLmhhc0NsYXNzZXMoc2libGluZyBhcyBIVE1MRWxlbWVudCwgY2xhc3NlcykpIGFzIFQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBjcmVhdGVFbGVtZW50T3B0aW9uczxFbGVtZW50VHlwZSBleHRlbmRzIEVsZW1lbnQ+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhIGNsYXNzIHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lPzpzdHJpbmc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYW4gSUQgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBpZD86IHN0cmluZztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhbiBlbGVtZW50IHRvIGFwcGVuZCB0aGUgY3JlYXRlZCBlbGVtZW50IHRvXG4gICAgICAgICAqL1xuICAgICAgICBhcHBlbmRUbz86Tm9kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0ZXh0IHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGV4dD86c3RyaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGFuIGVsZW1lbnQgb3IgZWxlbWVudHMgdG8gYXBwZW5kIHRvIHRoZSBjcmVhdGVkIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGFwcGVuZD86IE5vZGV8Tm9kZVtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGF0dHJpYnV0ZXMgdG8gYWRkIHRvIHRoZSBjcmVhdGVkIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGF0dHJpYnV0ZXM/OiB7XG4gICAgICAgICAgICBba2V5OnN0cmluZ106IHN0cmluZztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHN0eWxlcyB0byBzZXQgb24gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgc3R5bGU/OiB7XG4gICAgICAgICAgICBbcCBpbiBrZXlvZiBDU1NTdHlsZURlY2xhcmF0aW9uXT86IENTU1N0eWxlRGVjbGFyYXRpb25bcF07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgcHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvcGVydGllcz86IHtcbiAgICAgICAgICAgIFtrZXkgaW4ga2V5b2YgRWxlbWVudFR5cGVdPzpFbGVtZW50VHlwZVtrZXldO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGEgSFRNTCBlbGVtZW50IHRvIHdyYXAgdGhlIGNyZWF0ZWQgZWxlbWVudCBpbi4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICAgICAgICogYXBwZW5kVG8sIHRoZSB3cmFwcGVyIHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB3cmFwPzogSFRNTEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpb25zKGVsZW1lbnQ6RWxlbWVudCwgb3B0aW9uczogY3JlYXRlRWxlbWVudE9wdGlvbnM8RWxlbWVudD4pIHtcbiAgICAgICAgbGV0IGh0bWxFbGVtZW50ID0gZWxlbWVudCBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2xhc3NOYW1lID09PSAnc3RyaW5nJykgZWxlbWVudC5jbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmlkID09PSAnc3RyaW5nJykgZWxlbWVudC5pZCA9IG9wdGlvbnMuaWQ7XG4gICAgICAgIGlmIChvcHRpb25zLndyYXApIG9wdGlvbnMud3JhcC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBwZW5kVG8pIG9wdGlvbnMuYXBwZW5kVG8uYXBwZW5kQ2hpbGQob3B0aW9ucy53cmFwIHx8IGVsZW1lbnQpO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGV4dCA9PT0gJ3N0cmluZycpIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob3B0aW9ucy50ZXh0KSk7XG4gICAgICAgIGlmIChvcHRpb25zLmFwcGVuZCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXBwZW5kIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZEVsZW1lbnQgb2Ygb3B0aW9ucy5hcHBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb25zLmFwcGVuZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROU1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBvcHRpb25zLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRpb25zLmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnN0eWxlICYmIHR5cGVvZiBodG1sRWxlbWVudC5zdHlsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBvcHRpb25zLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3R5bGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBodG1sRWxlbWVudC5zdHlsZVtrZXldID0gb3B0aW9ucy5zdHlsZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3B0aW9ucy5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRba2V5XSA9IG9wdGlvbnMucHJvcGVydGllc1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIERJVlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3BlcmF0aW9ucyB0byBwZXJmb3JtIG9uIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQob3B0aW9ucz86Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTERpdkVsZW1lbnQ+KTogSFRNTERpdkVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3BlcmF0aW9ucyB0byBwZXJmb3JtIG9uIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQ8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTogSywgb3B0aW9ucz86Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdPik6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcGVyYXRpb25zIHRvIHBlcmZvcm0gb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWdOYW1lOiBzdHJpbmcsIG9wdGlvbnM/OmNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxFbGVtZW50Pik6IEhUTUxFbGVtZW50O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWVPckRpdk9wdGlvbnM6c3RyaW5nfGNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxEaXZFbGVtZW50Piwgb3B0aW9ucz86Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTEVsZW1lbnQ+KTogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgdGFnTmFtZTpzdHJpbmc7XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mIHRhZ05hbWVPckRpdk9wdGlvbnMgPT09ICdzdHJpbmcnKSB0YWdOYW1lID0gdGFnTmFtZU9yRGl2T3B0aW9ucztcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YWdOYW1lID0gJ2Rpdic7XG4gICAgICAgICAgICBvcHRpb25zID0gdGFnTmFtZU9yRGl2T3B0aW9ucztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblxuICAgICAgICBhcHBseU9wdGlvbnMoZWxlbWVudCwgb3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoVGV4dDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPih0YWdOYW1lOiBLLCB0ZXh0OnN0cmluZyk6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXTtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhUZXh0KHRhZ05hbWU6IHN0cmluZywgdGV4dDpzdHJpbmcpOiBIVE1MRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIHRleHRcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIGFkZCB0byB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoVGV4dCh0YWdOYW1lOnN0cmluZywgdGV4dDpzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KHRhZ05hbWUsIHt0ZXh0OiB0ZXh0fSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgY2xhc3NcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBjbGFzc05hbWUgVGhlIGNsYXNzIHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aENsYXNzPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6IEssIGNsYXNzTmFtZTpzdHJpbmcpOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS107XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBjbGFzc1xuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3ModGFnTmFtZTogc3RyaW5nLCBjbGFzc05hbWU6c3RyaW5nKTogSFRNTEVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIERJViBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBjbGFzc1xuICAgICAqIEBwYXJhbSBjbGFzc05hbWUgVGhlIGNsYXNzIHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aENsYXNzKGNsYXNzTmFtZTpzdHJpbmcpOkhUTUxEaXZFbGVtZW50O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aENsYXNzKHRhZ05hbWVPckNsYXNzTmFtZTpzdHJpbmcsIGNsYXNzTmFtZT86c3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgdGFnTmFtZSA9IHRhZ05hbWVPckNsYXNzTmFtZTtcblxuICAgICAgICBpZiAodHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRhZ05hbWUgPSAnZGl2JztcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IHRhZ05hbWVPckNsYXNzTmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KHRhZ05hbWUsIHtjbGFzc05hbWU6IGNsYXNzTmFtZX0pO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aElEPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6IEssIGlkOnN0cmluZyk6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXTtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhJRCh0YWdOYW1lOiBzdHJpbmcsIGlkOnN0cmluZyk6IEhUTUxFbGVtZW50O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgaWRcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBpZCBUaGUgaWQgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoSUQodGFnTmFtZTpzdHJpbmcsIGlkOnN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwge2lkOiBpZH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyB0ZXh0IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBjcmVhdGUgdGhlIHRleHQgZWxlbWVudCB3aXRoXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRleHRFbGVtZW50KHRleHQ6c3RyaW5nKTogVGV4dCB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIGNyZWF0ZUJ1dHRvbk9wdGlvbnMgZXh0ZW5kcyBjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MQnV0dG9uRWxlbWVudD4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgZGlzYWJsZSB0aGUgY3JlYXRlZCBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGRpc2FibGVkPzpib29sZWFuO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgY3JlYXRlIGEgbGFyZ2UgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBsYXJnZT86Ym9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIGNyZWF0ZSBhIGxpbmsgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBsaW5rPzogYm9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIGNyZWF0ZSBhIHNraW5ueSBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIHNraW5ueT86IGJvb2xlYW47XG4gICAgfVxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCdXR0b24ob3B0aW9uczpjcmVhdGVCdXR0b25PcHRpb25zKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgb3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYnV0dG9uJztcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkNsYXNzTmFtZSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMubGFyZ2UpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25DbGFzc05hbWUgKyAnLWxhcmdlJyk7XG4gICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVkKSBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKG9wdGlvbnMubGluaykgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkNsYXNzTmFtZSArICctbGluaycpXG4gICAgICAgIGlmIChvcHRpb25zLnNraW5ueSkgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkNsYXNzTmFtZSArICctc2tpbm55Jyk7XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgaWNvbkNsYXNzUHJlZml4ID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtaWNvbiByaWRlc3R5bGVyLXNob3djYXNlLWljb24tJztcbiAgICBleHBvcnQgaW50ZXJmYWNlIGNyZWF0ZUljb25PcHRpb25zIGV4dGVuZHMgY3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTEVsZW1lbnQ+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjbGFzcyBvZiB0aGUgaWNvbiB0byBjcmVhdGVcbiAgICAgICAgICovXG4gICAgICAgIGljb246IHN0cmluZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGljb25cbiAgICAgKiBAcGFyYW0gaWNvbiBUaGUgY2xhc3Mgb2YgdGhlIGljb24gdG8gY3JlYXRlXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUljb24oaWNvbjpzdHJpbmcpIDogSFRNTEVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGljb25cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIGNyZWF0ZSB0aGUgaWNvbiB3aXRoXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUljb24ob3B0aW9uczpjcmVhdGVJY29uT3B0aW9ucykgOiBIVE1MRWxlbWVudDtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbihpY29uT3JPcHRpb25zOiBzdHJpbmd8Y3JlYXRlSWNvbk9wdGlvbnMpIDogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgb3B0aW9uczpjcmVhdGVJY29uT3B0aW9ucztcblxuICAgICAgICAvLyBTZXR1cCBvcHRpb25zXG4gICAgICAgIGlmICh0eXBlb2YgaWNvbk9yT3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgaWNvbjogaWNvbk9yT3B0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBpY29uT3JPcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBCdWlsZCBpY29uIGNsYXNzTmFtZVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgaWNvbkNsYXNzID0gb3B0aW9ucy5pY29uO1xuXG4gICAgICAgICAgICBpZiAoIWljb25DbGFzcy5zdGFydHNXaXRoKGljb25DbGFzc1ByZWZpeCkpXG4gICAgICAgICAgICAgICAgaWNvbkNsYXNzID0gaWNvbkNsYXNzUHJlZml4ICsgaWNvbkNsYXNzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2xhc3NOYW1lID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSBvcHRpb25zLmNsYXNzTmFtZSArICcgJyArIGljb25DbGFzcztcblxuICAgICAgICAgICAgb3B0aW9ucy5jbGFzc05hbWUgPSBpY29uQ2xhc3M7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KCdpJywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNWR0VsZW1lbnQ8SyBleHRlbmRzIGtleW9mIEVsZW1lbnRUYWdOYW1lTWFwPih0YWdOYW1lOkssIG9wdGlvbnM6Y3JlYXRlRWxlbWVudE9wdGlvbnM8RWxlbWVudFRhZ05hbWVNYXBbS10+KSA6IEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTVkdFbGVtZW50KHRhZ05hbWU6c3RyaW5nLCBvcHRpb25zOmNyZWF0ZUVsZW1lbnRPcHRpb25zPFNWR0VsZW1lbnQ+KSA6IFNWR0VsZW1lbnQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNWR0VsZW1lbnQodGFnTmFtZTpzdHJpbmcsIG9wdGlvbnM6Y3JlYXRlRWxlbWVudE9wdGlvbnM8U1ZHRWxlbWVudD4pIDogU1ZHRWxlbWVudCB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHRhZ05hbWUpO1xuXG4gICAgICAgIGFwcGx5T3B0aW9ucyhlbGVtZW50LCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVzY3JpcHRpb25MaXN0KHZhbHVlcz86e2xhYmVsOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmd9W10pOkhUTUxETGlzdEVsZW1lbnQge1xuICAgICAgICBsZXQgZGVzY3JpcHRpb25MaXN0ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkbCcsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtZGVzY3JpcHRpb24tbGlzdCcsXG4gICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5zdW1tYXJ5RWxlbWVudFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodmFsdWVzKSBhcHBlbmREZXNjcmlwdGlvbkxpc3RWYWx1ZXMoZGVzY3JpcHRpb25MaXN0LCB2YWx1ZXMpO1xuXG4gICAgICAgIHJldHVybiBkZXNjcmlwdGlvbkxpc3Q7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZERlc2NyaXB0aW9uTGlzdFZhbHVlcyhkZXNjcmlwdGlvbkxpc3Q6SFRNTERMaXN0RWxlbWVudCwgdmFsdWVzPzp7bGFiZWw6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ31bXSkge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkdCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB2YWx1ZS5sYWJlbCxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogZGVzY3JpcHRpb25MaXN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGQnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogdmFsdWUuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IGRlc2NyaXB0aW9uTGlzdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gZW1wdHlcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZW1wdHkoZWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICBsZXQgY2hpbGQ6Tm9kZTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChjaGlsZCA9IGVsZW1lbnQubGFzdENoaWxkKVxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZHMgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBpcyBleGVjdXRlZCBvbmNlIGFuZCB0aGVuIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGJpbmQgYSBsaXN0ZW5lciB0b1xuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgZXZlbnQgbGlzdGVuZXIgdG8gY2FsbCB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWRcbiAgICAgKiBAcGFyYW0gdXNlQ2FwdHVyZSBJZiB0cnVlLCBydW4gdGhlIGxpc3RlbmVyIGluIHRoZSBjYXB0dXJlIHBoYXNlIG9mIHRoZSBldmVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBvbmNlPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwPihlbGVtZW50OkhUTUxFbGVtZW50LCB0eXBlOiBLLCBsaXN0ZW5lcjogKHRoaXM6IEhUTUxFbGVtZW50LCBldjogSFRNTEVsZW1lbnRFdmVudE1hcFtLXSkgPT4gYW55LCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IHZvaWQ7XG4gICAgLyoqXG4gICAgICogQmluZHMgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBpcyBleGVjdXRlZCBvbmNlIGFuZCB0aGVuIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGJpbmQgYSBsaXN0ZW5lciB0b1xuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIGV2ZW50IHRvIGxpc3RlbiB0b1xuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgZXZlbnQgbGlzdGVuZXIgdG8gY2FsbCB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWRcbiAgICAgKiBAcGFyYW0gdXNlQ2FwdHVyZSBJZiB0cnVlLCBydW4gdGhlIGxpc3RlbmVyIGluIHRoZSBjYXB0dXJlIHBoYXNlIG9mIHRoZSBldmVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBvbmNlKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogdm9pZDtcbiAgICBleHBvcnQgZnVuY3Rpb24gb25jZShlbGVtZW50OkhUTUxFbGVtZW50LCB0eXBlOiBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBsZXQgb25jZUxpc3RlbmVyOkV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgb25jZUxpc3RlbmVyLCB1c2VDYXB0dXJlKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ29iamVjdCcpIGxpc3RlbmVyID0gbGlzdGVuZXIuaGFuZGxlRXZlbnQ7XG5cbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIG9uY2VMaXN0ZW5lciwgdXNlQ2FwdHVyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZG9jdW1lbnQgdGhhdCB0aGUgZWxlbWVudCBpcyBhIHBhcnQgb2YgKGlmIHRoZXJlIGlzIG9uZSlcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXREb2N1bWVudChlbGVtZW50OkhUTUxFbGVtZW50KTpEb2N1bWVudCB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgd2luZG93IHRoYXQgdGhlIGVsZW1lbnQgaXMgYSBwYXJ0IG9mIChpZiB0aGVyZSBpcyBvbmUpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW1lbnQ6SFRNTEVsZW1lbnQpOldpbmRvdyB7XG4gICAgICAgIHJldHVybiBnZXREb2N1bWVudChlbGVtZW50KS5kZWZhdWx0VmlldztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb250ZW50IG9mIGFuIGVsZW1lbnQgdG8gYSBzdHJpbmdcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0XG4gICAgICogQHJldHVybnMgVGhlIGVsZW1lbnQgdGhhdCB3YXMgcGFzc2VkIGluXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldFRleHQoZWxlbWVudDpIVE1MRWxlbWVudCwgdGV4dDpzdHJpbmcpOkhUTUxFbGVtZW50IHtcbiAgICAgICAgZW1wdHkoZWxlbWVudCk7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5OdW1iZXJIZWxwZXIge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBib3VuZGVkIHRvIGEgcmFuZ2VcbiAgICAgKiBAcGFyYW0gbnVtYmVyIFRoZSBudW1iZXIgdG8gYm91bmRcbiAgICAgKiBAcGFyYW0gbWluIFRoZSBtaW5pbXVtIGFsbG93YWJsZSBudW1iZXJcbiAgICAgKiBAcGFyYW0gbWF4IFRoZSBtYXhpbXVtIGFsbG93YWJsZSBudW1iZXJcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gYm91bmQobnVtYmVyOm51bWJlciwgbWluOm51bWJlciwgbWF4Om51bWJlcik6bnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIG51bWJlciA8IG1pbiA/IG1pbiA6IChudW1iZXIgPiBtYXggPyBtYXggOiBudW1iZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dGVuZCBhIG51bWJlciByYW5nZSB3aXRoIGEgbnVtYmVyXG4gICAgICogQHBhcmFtIG51bWJlciBUaGUgbnVtYmVyIHRvIGV4dGVuZCB0aGUgcmFuZ2Ugd2l0aFxuICAgICAqIEBwYXJhbSByYW5nZSBUaGUgcmFuZ2UgdG8gZXh0ZW5kXG4gICAgICogXG4gICAgICogQHJldHVybnMgVGhlIHJhbmdlIG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgaW4gZXh0ZW5kZWQgYnkgdGhlIG51bWJlclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBleHRlbmRSYW5nZShudW1iZXI6bnVtYmVyLCByYW5nZTpSYW5nZSk6UmFuZ2Uge1xuICAgICAgICBpZiAoIXJhbmdlKSByYW5nZSA9IHtcbiAgICAgICAgICAgIG1pbjogSW5maW5pdHksXG4gICAgICAgICAgICBtYXg6IC1JbmZpbml0eVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChudW1iZXIgPCByYW5nZS5taW4pIHJhbmdlLm1pbiA9IG51bWJlcjtcbiAgICAgICAgaWYgKG51bWJlciA+IHJhbmdlLm1heCkgcmFuZ2UubWF4ID0gbnVtYmVyO1xuXG4gICAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIFJhbmdlIHtcbiAgICAgICAgbWluOiBudW1iZXI7XG4gICAgICAgIG1heDogbnVtYmVyO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgbmFtZXNwYWNlIE9iamVjdEhlbHBlciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3B5IGFsbCBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIGZyb20gb25lIG9yIG1vcmUgc291cmNlIG9iamVjdHMgdG8gYSB0YXJnZXQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIGFzc2lnbk9iamVjdHMgVGhlIHNvdXJjZSBvYmplY3QocylcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhc3NpZ248VDEsVDI+KHRhcmdldDpUMSwgLi4uYXNzaWduT2JqZWN0czpUMltdKSA6IFQxICYgVDI7XG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhc3NpZ248VD4odGFyZ2V0OlQsIC4uLmFzc2lnbk9iamVjdHM6VFtdKTogVDtcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQ6b2JqZWN0LCAuLi5hc3NpZ25PYmplY3RzOm9iamVjdFtdKTpvYmplY3Q7XG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0Om9iamVjdCwgLi4uYXNzaWduT2JqZWN0czpvYmplY3RbXSk6b2JqZWN0IHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcblxuICAgICAgICAgICAgbGV0IHRvOm9iamVjdCA9IE9iamVjdCh0YXJnZXQpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBzb3VyY2Ugb2YgYXNzaWduT2JqZWN0cykge1xuICAgICAgICAgICAgICAgIGlmICghc291cmNlKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIFxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRvO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGNvcHk8VD4odGFyZ2V0OlQpOlQge1xuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGFsbCBvZiB0aGUga2V5cyBmb3Igb3duIHByb3BlcnRpZXMgb24gYW4gb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldEtleXModGFyZ2V0Om9iamVjdCk6c3RyaW5nW10ge1xuICAgICAgICAgICAgbGV0IGtleXM6c3RyaW5nW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRhcmdldClcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuXG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGFsbCBvZiB0aGUgdmFsdWVzIGZvciBvd24gcHJvcGVydGllcyBvbiBhbiBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVzPFQ+KHRhcmdldDp7XG4gICAgICAgICAgICBbazpzdHJpbmddOlQ7XG4gICAgICAgIH0pOlRbXSB7XG4gICAgICAgICAgICBsZXQgdmFsdWVzOlRbXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGFyZ2V0KVxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godGFyZ2V0W2tleV0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlciB7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUPihwcm9taXNlczogKFQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUPilbXSk6IFJpZGVTdHlsZXJQcm9taXNlPFRbXT47XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUMSwgVDI+KHByb21pc2VzOiBbVDEgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMT4sIFQyIHwgUmlkZVN0eWxlclByb21pc2U8VDI+XSk6IFJpZGVTdHlsZXJQcm9taXNlPFtUMSwgVDJdPjtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQxLCBUMiwgVDM+KHByb21pc2VzOiBbVDEgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMT4sIFQyIHwgUmlkZVN0eWxlclByb21pc2U8VDI+LCBUMyB8IFJpZGVTdHlsZXJQcm9taXNlPFQzPl0pOiBSaWRlU3R5bGVyUHJvbWlzZTxbVDEsIFQyLCBUM10+O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGw8VDEsIFQyLCBUMywgVDQ+KHByb21pc2VzOiBbVDEgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMT4sIFQyIHwgUmlkZVN0eWxlclByb21pc2U8VDI+LCBUMyB8IFJpZGVTdHlsZXJQcm9taXNlPFQzPiwgVDQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUND5dKTogUmlkZVN0eWxlclByb21pc2U8W1QxLCBUMiwgVDMsIFQ0XT47XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUMSwgVDIsIFQzLCBUNCwgVDU+KHByb21pc2VzOiBbVDEgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMT4sIFQyIHwgUmlkZVN0eWxlclByb21pc2U8VDI+LCBUMyB8IFJpZGVTdHlsZXJQcm9taXNlPFQzPiwgVDQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUND4sIFQ1IHwgUmlkZVN0eWxlclByb21pc2U8VDU+XSk6IFJpZGVTdHlsZXJQcm9taXNlPFtUMSwgVDIsIFQzLCBUNCwgVDVdPjtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDY+KHByb21pc2VzOiBbVDEgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMT4sIFQyIHwgUmlkZVN0eWxlclByb21pc2U8VDI+LCBUMyB8IFJpZGVTdHlsZXJQcm9taXNlPFQzPiwgVDQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUND4sIFQ1IHwgUmlkZVN0eWxlclByb21pc2U8VDU+LCBUNiB8IFJpZGVTdHlsZXJQcm9taXNlPFQ2Pl0pOiBSaWRlU3R5bGVyUHJvbWlzZTxbVDEsIFQyLCBUMywgVDQsIFQ1LCBUNl0+O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGw8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDc+KHByb21pc2VzOiBbVDEgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMT4sIFQyIHwgUmlkZVN0eWxlclByb21pc2U8VDI+LCBUMyB8IFJpZGVTdHlsZXJQcm9taXNlPFQzPiwgVDQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUND4sIFQ1IHwgUmlkZVN0eWxlclByb21pc2U8VDU+LCBUNiB8IFJpZGVTdHlsZXJQcm9taXNlPFQ2PiwgVDcgfCBSaWRlU3R5bGVyUHJvbWlzZTxUNz5dKTogUmlkZVN0eWxlclByb21pc2U8W1QxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3XT47XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbChwcm9taXNlczogKG9iamVjdCB8IFJpZGVTdHlsZXJQcm9taXNlKVtdKTogUmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IEFycmF5SGVscGVyLnJlZHVjZShwcm9taXNlcywgZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCBjdXJyZW50UHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoZW4odGhlbihhY2N1bXVsYXRvciBhcyBSaWRlU3R5bGVyUHJvbWlzZSwgKCkgPT4gY3VycmVudFByb21pc2UpLCByID0+IHJlc3VsdHMucHVzaChyKSk7XG4gICAgICAgIH0sIHJlc29sdmVkKG51bGwpKTtcblxuICAgICAgICBQcm9taXNlLmFsbFxuXG4gICAgICAgIHJldHVybiB0aGVuKG1lcmdlZCBhcyBSaWRlU3R5bGVyUHJvbWlzZSwgKCkgPT4gcmVzdWx0cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBBdHRhY2hlcyBjYWxsYmFja3MgZm9yIHRoZSByZXNvbHV0aW9uIGFuZC9vciByZWplY3Rpb24gb2YgdGhlIFByb21pc2UuXG4gICAgKiBAcGFyYW0gb25mdWxmaWxsZWQgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUgd2hlbiB0aGUgUHJvbWlzZSBpcyByZXNvbHZlZC5cbiAgICAqIEBwYXJhbSBvbnJlamVjdGVkIFRoZSBjYWxsYmFjayB0byBleGVjdXRlIHdoZW4gdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQuXG4gICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSBjb21wbGV0aW9uIG9mIHdoaWNoIGV2ZXIgY2FsbGJhY2sgaXMgZXhlY3V0ZWQuXG4gICAgKi9cblxuICAgIGV4cG9ydCBmdW5jdGlvbiB0aGVuPFRfSW4sIEVfSW49VF9JbiwgVF9PdXQ9VF9JbiwgRV9PdXQ9RV9Jbj4ocHJvbWlzZTpSaWRlU3R5bGVyUHJvbWlzZTxUX0luLCBFX0luPiwgb25mdWxmaWxsZWQ/OiAoKHZhbHVlOiBUX0luKSA9PiBUX091dCB8IFJpZGVTdHlsZXJQcm9taXNlPFRfT3V0LCBFX091dD4pIHwgdW5kZWZpbmVkIHwgbnVsbCwgb25yZWplY3RlZD86ICgocmVhc29uOiBFX0luKSA9PiBUX091dCB8IFByb21pc2VMaWtlPFRfT3V0PikgfCB1bmRlZmluZWQgfCBudWxsKTogUmlkZVN0eWxlclByb21pc2U8VF9PdXQsIEVfT3V0PiB7XG4gICAgICAgIGNvbnN0IHJldHVyblByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2U8YW55PigpO1xuXG4gICAgICAgIHByb21pc2UuZG9uZShmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uZnVsZmlsbGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvbmZ1bGZpbGxlZFJlc3VsdCA9IG9uZnVsZmlsbGVkKHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShvbmZ1bGZpbGxlZFJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZFxuICAgICAgICAgICAgICAgICAgICAgICAgb25mdWxmaWxsZWRSZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9uZShyZXN1bHQgPT4gcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIHJldHVybmVkIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlc29sdmUob25mdWxmaWxsZWRSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBwcm9taXNlLmZhaWwoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbnJlamVjdGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvbnJlamVjdGVkUmVzdWx0ID0gb25yZWplY3RlZChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShvbnJlamVjdGVkUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2ZSB0aGUgcHJvbWlzZSB3aGVuIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHJlc29sdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBvbnJlamVjdGVkUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVzb2x2ZShyZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKHJlc3VsdCA9PiByZXR1cm5Qcm9taXNlLnJlamVjdChyZXN1bHQpKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyByZXR1cm5Qcm9taXNlLnJlc29sdmUob25yZWplY3RlZFJlc3VsdCk7IH1cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlamVjdChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiByZXR1cm5Qcm9taXNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgcmVzb2x2ZWQgcHJvbWlzZSB3aXRoIGFuIG9wdGlvbmFsIHZhbHVlXG4gICAgICogQHBhcmFtIHZhbHVlIE9wdGlvbmFsbHksIGEgdmFsdWUgdG8gcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVkPFQ+KHZhbHVlPzpUKTogUmlkZVN0eWxlclByb21pc2U8VCwgbmV2ZXI+IHtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxULCBuZXZlcj4oKTtcbiAgICAgICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyBhbiBvYmplY3QgZm9yIGEgUmlkZXN0eWxlclByb21pc2UtbGlrZSBpbnRlcmZhY2UsIHRlc3RpbmcgZm9yXG4gICAgICogZG9uZSwgZmFpbCBhbmQgYWx3YXlzIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0gbyBUaGUgb2JqZWN0IHRvIHRlc3RcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNQcm9taXNlKG86IGFueSk6IG8gaXMgUmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICB0eXBlb2Ygby5kb25lID09PSAnZnVuY3Rpb24nICYmIFxuICAgICAgICAgICAgICAgdHlwZW9mIG8uZmFpbCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgdHlwZW9mIG8uYWx3YXlzID09PSAnZnVuY3Rpb24nO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlNjcm9sbEhlbHBlciB7XG4gICAgbGV0IHNjcm9sbEV2ZW50Oid3aGVlbCd8J21vdXNld2hlZWwnfCdNb3pNb3VzZVBpeGVsU2Nyb2xsJztcbiAgICBjb25zdCBtb3VzZXdoZWVsRXZlbnRTY2FsZSA9IC0xLzQwO1xuXG4gICAge1xuICAgICAgICBjb25zdCB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIHNjcm9sbEV2ZW50ID0gJ29ud2hlZWwnIGluIHRlc3RFbGVtZW50ID8gJ3doZWVsJyA6ICAgICAgICAgICAgICAgICAvLyBNb2Rlcm4gYnJvd2VycyBzdXBwb3J0IFwid2hlZWxcIlxuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V3aGVlbCAhPT0gdW5kZWZpbmVkID8gJ21vdXNld2hlZWwnIDogLy8gV2Via2l0IGFuZCBJRSBzdXBwb3J0IGF0IGxlYXN0IFwibW91c2V3aGVlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgJ01vek1vdXNlUGl4ZWxTY3JvbGwnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbGRlciBGaXJlZm94XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaFdoZWVsTGlzdGVuZXIoZWxlbWVudDpIVE1MRWxlbWVudCwgbGlzdGVuZXI6KGV2ZW50Ok5vcm1hbGl6ZWRXaGVlbEV2ZW50KSA9PiBhbnkpIHtcbiAgICAgICAgaWYgKHNjcm9sbEV2ZW50ID09PSAnd2hlZWwnKSB7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGV2ZW50OldoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRXZlbnQ6Tm9ybWFsaXplZFdoZWVsRXZlbnQgPSBPYmplY3RIZWxwZXIuYXNzaWduKGV2ZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIobm9ybWFsaXplZEV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRXZlbnQsIChldmVudDpXaGVlbEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50KSBldmVudCA9IHdpbmRvdy5ldmVudCBhcyBXaGVlbEV2ZW50O1xuXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRXZlbnQ6Tm9ybWFsaXplZFdoZWVsRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnd2hlZWwnLFxuICAgICAgICAgICAgICAgIGRlbHRhTW9kZTogZXZlbnQudHlwZSA9PT0gJ01vek1vdXNlUGl4ZWxTY3JvbGwnID8gMCA6IDEsXG4gICAgICAgICAgICAgICAgZGVsdGFYOiAwLFxuICAgICAgICAgICAgICAgIGRlbHRhWTogMCxcbiAgICAgICAgICAgICAgICBkZWx0YVo6IDAsXG5cbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50LnByZXZlbnREZWZhdWx0ID09PSAnZnVuY3Rpb24nKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoc2Nyb2xsRXZlbnQgPT09ICdtb3VzZXdoZWVsJykge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRFdmVudC5kZWx0YVkgPSBtb3VzZXdoZWVsRXZlbnRTY2FsZSAqIGV2ZW50LndoZWVsRGVsdGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoZWVsRGVsdGFYKVxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkRXZlbnQuZGVsdGFYID0gbW91c2V3aGVlbEV2ZW50U2NhbGUgKiBldmVudC53aGVlbERlbHRhWDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZEV2ZW50LmRlbHRhWSA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKG5vcm1hbGl6ZWRFdmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTm9ybWFsaXplZFdoZWVsRXZlbnQge1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBXaGVlbEV2ZW50O1xuICAgICAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0O1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIGRlbHRhTW9kZTogbnVtYmVyO1xuICAgICAgICBkZWx0YVg6IG51bWJlcjtcbiAgICAgICAgZGVsdGFZOiBudW1iZXI7XG4gICAgICAgIGRlbHRhWjogbnVtYmVyO1xuICAgICAgICBwcmV2ZW50RGVmYXVsdCgpOiB2b2lkO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlN0cmluZ0hlbHBlciB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3Qgd29yZCBvZiB0aGUgc3BlY2lmaWVkIHN0cmluZ1xuICAgICAqIEBwYXJhbSBzdHJpbmcgVGhlIHN0cmluZyB0byBnZXQgdGhlIGZpcnN0IHdvcmQgb2ZcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RXb3JkKHN0cmluZzpzdHJpbmcpOnN0cmluZyB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHN0cmluZy50cmltKCkuc3Vic3RyKDAsIHN0cmluZy5pbmRleE9mKCcgJykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2VxdWVuY2Ugb2YgZWxlbWVudHMgb2Ygc2VhcmNoU3RyaW5nIGNvbnZlcnRlZCB0byBhIFN0cmluZyBpcyB0aGVcbiAgICAgKiBzYW1lIGFzIHRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnRzIG9mIHRoaXMgb2JqZWN0IChjb252ZXJ0ZWQgdG8gYSBTdHJpbmcpIHN0YXJ0aW5nIGF0XG4gICAgICogZW5kUG9zaXRpb24g4oCTIGxlbmd0aCh0aGlzKS4gT3RoZXJ3aXNlIHJldHVybnMgZmFsc2UuXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVuZHNXaXRoKHN0cmluZzpzdHJpbmcsIGVuZGluZzpzdHJpbmcsIGluZGV4PzpudW1iZXIpIHtcbiAgICAgICAgaWYgKCEoaW5kZXggPCB0aGlzLmxlbmd0aCkpIGluZGV4ID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGVsc2UgaW5kZXggfD0gMDtcbiAgICAgICAgXG4gICAgICAgIGxldCBlbmRpbmdMZW5ndGggPSBlbmRpbmcubGVuZ3RoO1xuICAgICAgICByZXR1cm4gc3RyaW5nLnN1YnN0cihpbmRleCAtIGVuZGluZ0xlbmd0aCwgZW5kaW5nTGVuZ3RoKSA9PT0gZW5kaW5nO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nOnN0cmluZyk6c3RyaW5nIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAgICAgICAgICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wYXR0ZXJucykuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG4gICAgICAgIGNvbnN0IHJlSGFzUmVnRXhwQ2hhciA9IFJlZ0V4cChyZVJlZ0V4cENoYXIuc291cmNlKTtcblxuICAgICAgICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1JlZ0V4cENoYXIudGVzdChzdHJpbmcpKVxuICAgICAgICAgICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAgICAgICAgICAgOiBzdHJpbmc7XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuU3R5bGVIZWxwZXIge1xuICAgIC8qKlxuICAgICAqIElmIHRydWUsIHRoZSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBsZXQgaGFzR2V0Q29tcHV0ZWRTdHlsZSA9ICdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3c7XG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCBIVE1MRWxlbWVudC5jdXJyZW50U3R5bGUgaXMgYXZhaWxhYmxlXG4gICAgICovXG4gICAgbGV0IGhhc0N1cnJlbnRTdHlsZVN1cHBvcnQgPSBmYWxzZTtcblxuICAgIC8vIFRlc3QgZm9yIHN1cHBvcnQgb24gZWxlbWVudCBwcm9wZXJ0aWVzXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgaGFzQ3VycmVudFN0eWxlU3VwcG9ydCA9ICdjdXJyZW50U3R5bGUnIGluIHRlc3RFbGVtZW50O1xuXG4gICAgICAgIHRyYW5zaXRpb25FbmRFdmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGV2ZW50IG1hcHBpbmdcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAndHJhbnNpdGlvbicgICAgICAgOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgICAgICAgICAgICAgJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxuICAgICAgICAgICAgICAgICdNb3pUcmFuc2l0aW9uJyAgICA6ICd0cmFuc2l0aW9uZW5kJyxcbiAgICAgICAgICAgICAgICAnT1RyYW5zaXRpb24nICAgICAgOiAnb1RyYW5zaXRpb25FbmQnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHRyYW5zaXRpb25zKVxuICAgICAgICAgICAgICAgIGlmIChrIGluIHRlc3RFbGVtZW50LnN0eWxlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbnNba107XG5cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgdHJhbnNpdGlvbnNTdXBwb3J0ZWQgPSAhIXRyYW5zaXRpb25FbmRFdmVudDtcbiAgICB9KSgpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRyYW5zaXRpb24gZW5kIGV2ZW50IGZvciB0aGlzIGJyb3dzZXJcbiAgICAgKi9cbiAgICBleHBvcnQgbGV0IHRyYW5zaXRpb25FbmRFdmVudDpzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBJZiBmYWxzZSwgdHJhbnNpdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXJcbiAgICAgKi9cbiAgICBleHBvcnQgbGV0IHRyYW5zaXRpb25zU3VwcG9ydGVkOmJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBJZiBmYWxzZSwgdGhpcyBpcyBub3QgYSB0b3VjaCBkZXZpY2VcbiAgICAgKi9cbiAgICBleHBvcnQgbGV0IGlzVG91Y2hEZXZpY2U6Ym9vbGVhbiA9ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuXG4gICAgLyoqXG4gICAgICogSWYgZmFsc2UsIFNWR3MgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXJcbiAgICAgKi9cbiAgICBleHBvcnQgbGV0IHN2Z1N1cHBvcnRlZDpib29sZWFuID0gISFkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgJiYgISFkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpLmNyZWF0ZVNWR1JlY3Q7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgc3R5bGUgb2YgYW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWxlbWVudDpIVE1MRWxlbWVudCk6Q1NTU3R5bGVEZWNsYXJhdGlvbiB7XG4gICAgICAgIGlmIChoYXNHZXRDb21wdXRlZFN0eWxlKSByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgICAgIGlmIChoYXNDdXJyZW50U3R5bGVTdXBwb3J0ICYmIGVsZW1lbnRbJ2N1cnJlbnRTdHlsZSddICE9PSBudWxsKSByZXR1cm4gZWxlbWVudFsnY3VycmVudFN0eWxlJ107XG5cbiAgICAgICAgdGhyb3cgXCJVbmFibGUgdG8gZ2V0IGNvbXB1dGVkIHN0eWxlXCI7XG4gICAgfVxuXG4gICAgbGV0IG9mZnNldFBvc2l0aW9uaW5ncyA9IFsnYWJzb2x1dGUnLCAncmVsYXRpdmUnLCAnZml4ZWQnXTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIHdoZXRoZXIgb3Igbm90IGFic29sdXRlL3JlbGF0aXZlL2ZpeGVkIHBvc2l0aW9uaW5nIGlzIGVuYWJsZWQgb24gYW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzT2Zmc2V0UG9zaXRpb25lZChlbGVtZW50OkhUTUxFbGVtZW50KTpib29sZWFuIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gZWxlbWVudC5zdHlsZS5wb3NpdGlvbjtcblxuICAgICAgICBpZiAoIXBvc2l0aW9uKVxuICAgICAgICAgICAgcG9zaXRpb24gPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uO1xuXG4gICAgICAgIC8vIElmIHdlIHN0aWxsIGRvbid0IGhhdmUgYSBwb3NpdGlvbiBhdCB0aGlzIHBvaW50IGl0J3Mgbm90IG9mZnNldCBwb3NpdGlvbmVkXG4gICAgICAgIGlmICghcG9zaXRpb24pIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBUaGUgZWxlbWVudCBpcyBvZmZzZXQgcG9zaXRpb25lZCBpZiBpdHMgb25lIG9mIHRoZSBhYm92ZSBsaXN0XG4gICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgZm9yIChsZXQgcG9zaXRpb25pbmcgb2Ygb2Zmc2V0UG9zaXRpb25pbmdzKVxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSBwb3NpdGlvbmluZykgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBmbGF0dGVuQ2xhc3NMaXN0KC4uLmNsYXNzZXM6KHN0cmluZ3xzdHJpbmdbXSlbXSk6c3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIucmVkdWNlPHN0cmluZ3xzdHJpbmdbXSwgc3RyaW5nW10+KGNsYXNzZXMsIChjbGFzc0xpc3QsIGNsYXNzTmFtZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHN1YmNsYXNzTGlzdDpzdHJpbmdbXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnKSBzdWJjbGFzc0xpc3QgPSBbY2xhc3NOYW1lXTtcbiAgICAgICAgICAgIGVsc2Ugc3ViY2xhc3NMaXN0ID0gY2xhc3NOYW1lO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjIG9mIHN1YmNsYXNzTGlzdCkge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdCA9IGNsYXNzTGlzdC5jb25jYXQoYy5zcGxpdCgvXFxzKy8pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNsYXNzTGlzdDtcbiAgICAgICAgIH0sIFtdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXVzZXMgdGhlIGJyb3dzZXIgdG8gcmVjYWxjdWxhdGUgdGhlIHN0eWxlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyUmVmbG93KGVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2tpcCBhIHRyYW5zaXRpb24gb24gYW4gZWxlbWVudCBwcmVmb3JtZWQgYnkgYSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEEgZnVuY3Rpb24gdG8gcnVuIGNhdXNpbmcgYSB0cmFuc2l0aW9uIHRvIGJlIGZpcmVkIG9uIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNraXBUcmFuc2l0aW9uKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIGNhbGxiYWNrOkZ1bmN0aW9uKTp2b2lkIHtcbiAgICAgICAgaWYgKCF0cmFuc2l0aW9uc1N1cHBvcnRlZCkgcmV0dXJuIGNhbGxiYWNrKCk7XG5cbiAgICAgICAgbGV0IG9sZFRyYW5zaXRpb24gPSBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb247XG5cbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICB0cmlnZ2VyUmVmbG93KGVsZW1lbnQpO1xuXG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IG9sZFRyYW5zaXRpb247XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9uTmV4dFRyYW5zaXRpb25FbmQoZWxlbWVudDpIVE1MRWxlbWVudCwgbGlzdGVuZXI6RXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCkge1xuICAgICAgICByZXR1cm4gSFRNTEhlbHBlci5vbmNlKGVsZW1lbnQsIHRyYW5zaXRpb25FbmRFdmVudCwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGFsbCBvZiB0aGUgc3VwcGxpZWQgY2xhc3Nlc1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzZXMgdG8gY2hlY2tcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCBjbGFzc2VzOiBzdHJpbmdbXSk6Ym9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IGhhcyBhbGwgb2YgdGhlIHN1cHBsaWVkIGNsYXNzZXNcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzc2VzIHRvIGNoZWNrXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhc0NsYXNzZXMoZWxlbWVudDpIVE1MRWxlbWVudCwgLi4uY2xhc3Nlczogc3RyaW5nW10pOmJvb2xlYW47XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhc0NsYXNzZXMoZWxlbWVudDpIVE1MRWxlbWVudCwgY2xhc3NBcnJheTogc3RyaW5nW118c3RyaW5nLCAuLi5jbGFzc0xpc3Q6c3RyaW5nW10pOmJvb2xlYW4ge1xuICAgICAgICBsZXQgY2xhc3Nlczogc3RyaW5nW107XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc0FycmF5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY2xhc3NlcyA9IGNsYXNzTGlzdCB8fCBbXTtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChjbGFzc0FycmF5KTtcbiAgICAgICAgfSBlbHNlIGNsYXNzZXMgPSBjbGFzc0FycmF5O1xuXG4gICAgICAgIGZvciAobGV0IGNsYXNzTmFtZSBvZiBjbGFzc2VzKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUGl4ZWxzKHBpeGVsczpzdHJpbmcpOm51bWJlciB7XG4gICAgICAgIGlmICghU3RyaW5nSGVscGVyLmVuZHNXaXRoKHBpeGVscywgJ3B4JykpIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBpeGVscyk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBhZGRpbmcoZWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgcGFkZGluZ0JvdHRvbSxcbiAgICAgICAgICAgIHBhZGRpbmdUb3AsXG4gICAgICAgICAgICBwYWRkaW5nTGVmdCxcbiAgICAgICAgICAgIHBhZGRpbmdSaWdodFxuICAgICAgICB9ID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgICAgICBsZXQgd2lkdGggPSBwYXJzZVBpeGVscyhwYWRkaW5nTGVmdCkgKyBwYXJzZVBpeGVscyhwYWRkaW5nUmlnaHQpO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gcGFyc2VQaXhlbHMocGFkZGluZ1RvcCkgKyBwYXJzZVBpeGVscyhwYWRkaW5nQm90dG9tKTtcblxuICAgICAgICBpZiAoaXNOYU4od2lkdGgpKSB3aWR0aCA9IDA7XG4gICAgICAgIGlmIChpc05hTihoZWlnaHQpKSBoZWlnaHQgPSAwO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuVmlzaWJpbGl0eUhlbHBlciB7XG4gICAgY29uc3QgZGVmYXVsdFRyYW5zaXRpb25JbkNsYXNzID0gJ2luJ1xuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNob3coZWxlbWVudDpIVE1MRWxlbWVudCwgdHJhbnNpdGlvbkNsYXNzOnN0cmluZyA9IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICBzZXRWaXNpYmlsaXR5KGVsZW1lbnQsIHRydWUpO1xuXG4gICAgICAgIFN0eWxlSGVscGVyLnRyaWdnZXJSZWZsb3coZWxlbWVudCk7XG5cbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRyYW5zaXRpb25DbGFzcyk7XG5cbiAgICAgICAgbGV0IHByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2UoKTtcblxuICAgICAgICBpZiAoIVN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkKSBwcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgZWxzZSBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKGVsZW1lbnQsICgpID0+IHByb21pc2UucmVzb2x2ZSgpKTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gaGlkZShlbGVtZW50OkhUTUxFbGVtZW50LCB0cmFuc2l0aW9uQ2xhc3M6c3RyaW5nID0gZGVmYXVsdFRyYW5zaXRpb25JbkNsYXNzKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0cmFuc2l0aW9uQ2xhc3MpO1xuXG4gICAgICAgIGxldCBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG5cbiAgICAgICAgcHJvbWlzZS5kb25lKCgpID0+IHNldFZpc2liaWxpdHkoZWxlbWVudCwgZmFsc2UpKTtcblxuICAgICAgICBpZiAoIVN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkKSBwcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgZWxzZSBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKGVsZW1lbnQsICgpID0+IHByb21pc2UucmVzb2x2ZSgpKTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0VmlzaWJpbGl0eShlbGVtZW50OkhUTUxFbGVtZW50LCB2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgICAgIGlmICghdmlzaWJsZSkge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnJztcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncyB7XG4gICAgcmVnaXN0ZXJMYW5ndWFnZShMYW5ndWFnZUtleXMuRW4sIHtcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdC12aXN1YWxpemUtaW50cm9cIjogXCJWaXN1YWxpemUgd2hlZWxzLCB0aXJlcyBhbmQgc3VzcGVuc2lvbiBtb2RpZmljYXRpb25zIG9uIHlvdXIgdmVoaWNsZS5cIixcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdC1zaGFyZS1pbnRyb1wiOiAgICAgXCJTaGFyZSB3aXRoIHlvdXIgZnJpZW5kcywgb3Igc2F2ZSBmb3IgaW5zcGlyYXRpb24uXCIsXG4gICAgICAgIFwic2VsZWN0LXlvdXItdmVoaWNsZVwiOiAgICAgICAgICAgIFwiU2VsZWN0IFlvdXIgVmVoaWNsZVwiLFxuICAgICAgICBcInBhaW50XCI6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlBhaW50XCIsXG4gICAgICAgIFwic3VzcGVuc2lvblwiOiAgICAgICAgICAgICAgICAgICAgIFwiU3VzcGVuc2lvblwiLFxuICAgICAgICBcIndoZWVsc1wiOiAgICAgICAgICAgICAgICAgICAgICAgICBcIldoZWVsc1wiLFxuICAgICAgICBcInRpcmVzXCI6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlRpcmVzXCIsXG4gICAgICAgIFwiZnJvbnRcIjogICAgICAgICAgICAgICAgICAgICAgICAgIFwiRnJvbnRcIixcbiAgICAgICAgXCJyZWFyXCI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWFyXCIsXG4gICAgICAgIFwidmVoaWNsZS1kZXRhaWxzXCI6ICAgICAgICAgICAgICAgIFwiVmVoaWNsZSBEZXRhaWxzXCIsXG4gICAgICAgIFwiY2hhbmdlLXZlaGljbGVcIjogICAgICAgICAgICAgICAgIFwiQ2hhbmdlIFZlaGljbGVcIixcbiAgICAgICAgXCJ3aGVlbC1kZXRhaWxzXCI6ICAgICAgICAgICAgICAgICAgXCJXaGVlbCBEZXRhaWxzXCIsXG4gICAgICAgIFwidGlyZS1kZXRhaWxzXCI6ICAgICAgICAgICAgICAgICAgIFwiVGlyZSBEZXRhaWxzXCIsXG4gICAgICAgIFwic2VsZWN0LXBhaW50XCI6ICAgICAgICAgICAgICAgICAgIFwiU2VsZWN0IFBhaW50XCIsXG4gICAgICAgIFwic2VsZWN0LXdoZWVsc1wiOiAgICAgICAgICAgICAgICAgIFwiU2VsZWN0IFdoZWVsc1wiLFxuICAgICAgICBcInNlbGVjdC10aXJlc1wiOiAgICAgICAgICAgICAgICAgICBcIlNlbGVjdCBUaXJlc1wiLFxuICAgICAgICBcImFkanVzdC1zdXNwZW5zaW9uXCI6ICAgICAgICAgICAgICBcIkFkanVzdCBTdXNwZW5zaW9uXCIsXG4gICAgICAgIFwiY2hhbmdlLXdoZWVsLXNpemVcIjogICAgICAgICAgICAgIFwiV2hlZWwgU2l6ZVwiLFxuICAgICAgICBcIm5vLXJlc3VsdHNcIjogICAgICAgICAgICAgICAgICAgICBcIk5vIFJlc3VsdHMgRm91bmRcIixcbiAgICAgICAgXCJuby13aGVlbC1yZXN1bHRzXCI6ICAgICAgICAgICAgICAgXCJObyB3aGVlbHMgZm91bmQgZm9yIHRoaXMgdmVoaWNsZS5cIixcbiAgICAgICAgXCJ3aGVlbC1mZWF0dXJlcy1zcGVjc1wiOiAgICAgICAgICAgXCJGZWF0dXJlcyAmIFNwZWNzLlwiLFxuICAgICAgICBcInNoYXJlLW15LXZlaGljbGVcIjogICAgICAgICAgICAgICBcIlNoYXJlIE15IFZlaGljbGVcIixcbiAgICAgICAgXCJzaGFyZS1pbnN0cnVjdGlvbnNcIjogICAgICAgICAgICAgXCJVc2UgdGhlIGJ1dHRvbnMgdG8gc2hhcmUgb3Igc2F2ZSB5b3VyIHZlaGljbGUgY29uZmlndXJhdGlvbi5cIixcbiAgICAgICAgXCJuby1kZXNjcmlwdGlvbi13aGVlbFwiOiAgICAgICAgICAgXCJXZSBkb24ndCBoYXZlIGEgZGVzY3JpcHRpb24gZm9yIHRoaXMgd2hlZWwgeWV0XCIsXG4gICAgICAgICdzaG93LXNwZWNzJzogICAgICAgICAgICAgICAgICAgICBcIlNob3cgU3BlY3NcIixcbiAgICAgICAgJ2NhbGwnOiAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2FsbFwiLFxuICAgICAgICAnc2l6ZSc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTaXplXCIsXG4gICAgICAgICdvZmZzZXQnOiAgICAgICAgICAgICAgICAgICAgICAgICBcIk9mZnNldFwiLFxuICAgICAgICAnYm9sdC1wYXR0ZXJuJzogICAgICAgICAgICAgICAgICAgXCJCb2x0IFBhdHRlcm5cIixcbiAgICAgICAgJ2NlbnRlcmJvcmUnOiAgICAgICAgICAgICAgICAgICAgIFwiQ2VudGVyYm9yZVwiLFxuICAgICAgICAncHJpY2UnOiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJQcmljZVwiLFxuICAgICAgICAnaXRlbS1udW1iZXInOiAgICAgICAgICAgICAgICAgICAgXCJJdGVtICNcIixcbiAgICAgICAgJ2JyYW5kcyc6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiQnJhbmRzXCIsXG4gICAgICAgICdmaW5pc2hlcyc6ICAgICAgICAgICAgICAgICAgICAgICBcIkZpbmlzaGVzXCIsXG4gICAgICAgICdzaXplcyc6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlNpemVzXCIsXG4gICAgICAgICdhbGwnOiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFsbFwiLFxuICAgICAgICAnYWxsLWJyYW5kcyc6ICAgICAgICAgICAgICAgICAgICAgXCJBbGwgQnJhbmRzXCIsXG4gICAgICAgICdhbGwtZmluaXNoZXMnOiAgICAgICAgICAgICAgICAgICBcIkFsbCBGaW5pc2hlc1wiLFxuICAgICAgICAnYWxsLXNpemVzJzogICAgICAgICAgICAgICAgICAgICAgXCJBbGwgU2l6ZXNcIixcbiAgICAgICAgJ2ZpbHRlci1yZXN1bHRzJzogICAgICAgICAgICAgICAgIFwiRmlsdGVyIFJlc3VsdHNcIixcbiAgICAgICAgJ2xvYWRpbmctZWxsaXBzaXMnOiAgICAgICAgICAgICAgIFwiTG9hZGluZy4uLlwiLFxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtdGlyZXMnOiAgICAgICAgXCJTaG93IHtjb3VudH0gVGlyZXNcIixcbiAgICAgICAgJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscyc6ICAgICAgIFwiU2hvdyB7Y291bnR9IFdoZWVsc1wiLFxuICAgICAgICAnc3BlY2lmaWNhdGlvbnMnOiAgICAgICAgICAgICAgICAgXCJTcGVjaWZpY2F0aW9uc1wiLFxuICAgICAgICAnc3BlZWQtcmF0aW5nJzogICAgICAgICAgICAgICAgICAgXCJTcGVlZCBSYXRpbmdcIixcbiAgICAgICAgJ2FueS1zcGVlZC1yYXRpbmdzJzogICAgICAgICAgICAgIFwiQW55IFNwZWVkIFJhdGluZ3NcIixcbiAgICAgICAgJ2ZlYXR1cmVzJzogICAgICAgICAgICAgICAgICAgICAgIFwiRmVhdHVyZXNcIixcbiAgICAgICAgJ2FueS1mZWF0dXJlcyc6ICAgICAgICAgICAgICAgICAgIFwiQW55IEZlYXR1cmVzXCIsXG4gICAgICAgICdmaW5pc2gnOiAgICAgICAgICAgICAgICAgICAgICAgICBcIkZpbmlzaFwiLFxuICAgICAgICAnc3VtbWFyeSc6ICAgICAgICAgICAgICAgICAgICAgICAgXCJTdW1tYXJ5XCIsXG4gICAgICAgICdjaGVjay1vdXQtbXktdmVoaWNsZSc6ICAgICAgICAgICBcIkNoZWNrIG91dCBteSB2ZWhpY2xlIVwiXG4gICAgfSk7XG59Il19
